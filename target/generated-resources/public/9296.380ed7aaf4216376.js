(self.webpackChunkthingsboard=self.webpackChunkthingsboard||[]).push([[9296],{39116:(Re,X,n)=>{"use strict";n.d(X,{P:()=>Q});var e=n(18530),t=n(27468),c=n(7673),h=n(92771),V=n(57665),S=n(27997),G=n(47169),K=n(73028),H=n(96354),k=n(93064);class Q{constructor(L,B,I,U,F,a,O){this.utils=L,this.entityService=B,this.translate=I,this.stateControllerHolder=U,this.origEntityAliases=F,this.origFilters=a,this.origUserFilters=O,this.entityAliasesChangedSubject=new e.B,this.entityAliasesChanged=this.entityAliasesChangedSubject.asObservable(),this.filtersChangedSubject=new e.B,this.filtersChanged=this.filtersChangedSubject.asObservable(),this.entityAliasResolvedSubject=new e.B,this.entityAliasResolved=this.entityAliasResolvedSubject.asObservable(),this.resolvedAliases={},this.resolvedAliasesObservable={},this.resolvedAliasesToStateEntities={},this.entityAliases=(0,S.Go)(this.origEntityAliases)||{},this.filters=(0,S.Go)(this.origFilters)||{},this.userFilters=(0,S.Go)(this.origUserFilters)||{}}updateEntityAliases(L){const B=[];for(const I of Object.keys(L)){const U=L[I],F=this.entityAliases[I];(0,S.n4)(U,F)||(B.push(I),this.setAliasUnresolved(I))}for(const I of Object.keys(this.entityAliases))L[I]||(B.push(I),this.setAliasUnresolved(I));this.entityAliases=(0,S.Go)(L),B.length&&this.entityAliasesChangedSubject.next(B)}updateFilters(L){const B=[];for(const I of Object.keys(L)){const U=L[I],F=this.filters[I];(0,S.n4)(U,F)||B.push(I)}for(const I of Object.keys(this.filters))L[I]||B.push(I);if(this.filters=(0,S.Go)(L),B.length){for(const I of B)delete this.userFilters[I];this.filtersChangedSubject.next(B)}}updateAliases(L){if(!L){L=[];for(const I of Object.keys(this.resolvedAliases))L.push(I)}const B=[];for(const I of L)this.setAliasUnresolved(I),B.push(this.getAliasInfo(I));(0,t.p)(B).subscribe(()=>{this.entityAliasesChangedSubject.next(L)})}dashboardStateChanged(){const L=[];for(const B of Object.keys(this.resolvedAliasesToStateEntities)){const I=this.resolvedAliasesToStateEntities[B],U=this.stateControllerHolder().getEntityId(I.entityParamName),F=I.entityId;(0,S.n4)(U,F)||(L.push(B),this.setAliasUnresolved(B))}L.length&&this.entityAliasesChangedSubject.next(L)}setAliasUnresolved(L){delete this.resolvedAliases[L],delete this.resolvedAliasesObservable[L],delete this.resolvedAliasesToStateEntities[L]}getEntityAliases(){return this.entityAliases}getFilters(){return this.filters}getUserFilters(){return this.userFilters}getFilterInfo(L){return this.userFilters[L]?this.userFilters[L]:this.filters[L]}getKeyFilters(L){const B=this.getFilterInfo(L);return B?(0,k.S8)(B):[]}getEntityAliasId(L){for(const B of Object.keys(this.entityAliases))if(this.entityAliases[B].alias===L)return B;return null}getAliasInfo(L){let B=this.resolvedAliases[L];if(B)return(0,c.of)(B);if(this.resolvedAliasesObservable[L])return this.resolvedAliasesObservable[L];{const I=new h.m;this.resolvedAliasesObservable[L]=I.asObservable();const U=this.entityAliases[L];if(!U){I.error(null);const F=this.resolvedAliasesObservable[L];return delete this.resolvedAliasesObservable[L],F}return this.entityService.resolveAlias(U,this.stateControllerHolder().getStateParams()).subscribe(F=>{this.resolvedAliases[L]=F,delete this.resolvedAliasesObservable[L],F.stateEntity&&(this.resolvedAliasesToStateEntities[L]={entityParamName:F.entityParamName,entityId:this.stateControllerHolder().getEntityId(F.entityParamName)}),this.entityAliasResolvedSubject.next(L),I.next(F),I.complete()},()=>{I.error(null),delete this.resolvedAliasesObservable[L]}),B=this.resolvedAliases[L],B?(0,c.of)(B):this.resolvedAliasesObservable[L]}}resolveSingleEntityInfo(L){return this.getAliasInfo(L).pipe((0,K.Z)(B=>B.resolveMultiple?B.entityFilter?this.entityService.findSingleEntityInfoByEntityFilter(B.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}):(0,c.of)(null):(0,c.of)(B.currentEntity)))}resolveSingleEntityInfoForDeviceId(L){const B=(0,k.TW)(L);return this.entityService.findSingleEntityInfoByEntityFilter(B,{ignoreLoading:!0,ignoreErrors:!0})}resolveSingleEntityInfoForTargetDevice(L){return(0,V.Ke)(L)?L.type===V.QQ.entity?this.resolveSingleEntityInfo(L.entityAliasId):this.resolveSingleEntityInfoForDeviceId(L.deviceId):(0,c.of)(null)}resolveDatasource(L,B=!1){const I=(0,S.Go)(L);return I.type===V.cT.entity||I.type===V.cT.device||I.type===V.cT.entityCount||I.type===V.cT.alarmCount?(I.filterId&&(I.keyFilters=this.getKeyFilters(I.filterId)),I.type===V.cT.alarmCount&&(I.alarmFilter=this.entityService.resolveAlarmFilter(I.alarmFilterConfig,!1)),I.type===V.cT.device?(I.type=V.cT.entity,I.entityFilter=(0,k.TW)(I.deviceId),B?this.entityService.findSingleEntityInfoByEntityFilter(I.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe((0,H.T)(U=>(U&&(0,k.ip)(I,U,!0),I))):(0,c.of)(I)):I.entityAliasId?this.getAliasInfo(I.entityAliasId).pipe((0,K.Z)(U=>(I.aliasName=U.alias,U.entityFilter?U.resolveMultiple?(I.entityFilter=U.entityFilter,B?this.entityService.findSingleEntityInfoByEntityFilter(U.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe((0,H.T)(F=>(F&&(0,k.ip)(I,F,!0),I))):(0,c.of)(I)):(U.currentEntity?(0,k.ip)(I,U.currentEntity,!0):U.stateEntity&&(I.unresolvedStateEntity=!0,I.name="Unresolved",I.entityName="Unresolved"),(0,c.of)(I)):(I.unresolvedStateEntity=!0,I.name="Unresolved",I.entityName="Unresolved",(0,c.of)(I))))):I.entityId&&!I.entityFilter?(I.entityFilter={singleEntity:{id:I.entityId,entityType:I.entityType},type:G.V6.singleEntity},(0,c.of)(I)):(I.aliasName=I.entityName,I.name=I.entityName,(0,c.of)(I))):(0,c.of)(I)}resolveAlarmSource(L){return this.resolveDatasource(L).pipe((0,H.T)(B=>{if(B.type===V.cT.function){let I;I=B.name&&B.name.length?B.name:V.cT.function,B.name=I,B.aliasName=I,B.entityName=I}return B}))}resolveDatasources(L,B,I=1024){if(!L||!L.length)return(0,c.of)([]);const U=B?[L[0]]:L,F=new Array;return U.forEach(a=>{F.push(this.resolveDatasource(a))}),(0,t.p)(F).pipe((0,H.T)(a=>{let O=0,P=0,A=0;return a.forEach(u=>{if(u.type===V.cT.function||u.type===V.cT.entityCount||u.type===V.cT.alarmCount){let m;u.name&&u.name.length?m=u.name:(m=this.translate.instant(V.Vp.get(u.type)),u.type===V.cT.function?(O++,O>1&&(m+=" "+O)):u.type===V.cT.entityCount?(P++,P>1&&(m+=" "+P)):(A++,A>1&&(m+=" "+A))),u.name=m,u.aliasName=m,u.entityName=m}else B?u.pageLink=(0,S.Go)(k.jl):u.pageLink||(I=(0,S.f1)(I)&&I>0?I:1024,u.pageLink=(0,k.Gh)(I))}),a}))}getInstantAliasInfo(L){return this.resolvedAliases[L]}updateCurrentAliasEntity(L,B){const I=this.resolvedAliases[L];if(I){const U=I.currentEntity;(0,S.n4)(B,U)||(I.currentEntity=B,this.entityAliasesChangedSubject.next([L]))}}updateUserFilter(L){let B=this.userFilters[L.id];B||(B=this.filters[L.id]),B&&!(0,S.n4)(B,L)&&(this.userFilters[L.id]=L,this.filtersChangedSubject.next([L.id]))}}},86057:(Re,X,n)=>{"use strict";n.d(X,{L:()=>H});var e=n(93953),t=n(9310),c=n(63729),h=n(96697),V=n(96354),S=n(80216),G=n(27997),K=n(73955);class H{constructor(Q,z,L){this.store=Q,this.dialogService=z,this.translate=L}canDeactivate(Q,z,L){let B=null;if(this.store.pipe((0,t.select)(c.jc),(0,h.s)(1)).subscribe(I=>{B=I}),B&&B.isAuthenticated){let I=!1;if(Q.confirmForm){const U=Q.confirmForm();U&&(I=U.dirty)}else(0,G.O9)(Q.isDirty)&&(I=Q.isDirty);if(I){const U=this.getMessage(Q);return this.dialogService.confirm(this.translate.instant("confirm-on-exit.title"),U).pipe((0,V.T)(F=>(F&&(Q.confirmForm&&Q.confirmForm()?Q.confirmForm().markAsPristine():Q.isDirty=!1),F)))}}return!0}getMessage(Q){return Q.confirmOnExitMessage?Q.confirmOnExitMessage:this.translate.instant("confirm-on-exit.html-message")}static{this.\u0275fac=function(z){return new(z||H)(e.\u0275\u0275inject(t.Store),e.\u0275\u0275inject(S.o),e.\u0275\u0275inject(K.TranslateService))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac,providedIn:"root"})}}},772:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{ActionAuthAuthenticated:()=>vt.Cy,ActionAuthLoadUser:()=>vt._Z,ActionAuthUnauthenticated:()=>vt.dA,ActionAuthUpdateAuthUser:()=>vt.Hx,ActionAuthUpdateHasRepository:()=>vt.uS,ActionAuthUpdateLastPublicDashboardId:()=>vt.qX,ActionAuthUpdateUserDetails:()=>vt.xh,ActionPreferencesDeleteUserSettings:()=>vt.qx,ActionPreferencesPutUserSettings:()=>vt.uX,ActionPreferencesUpdateOpenedMenuSection:()=>vt.Tw,ActionUpdateMobileQrCodeEnabled:()=>vt.bw,AdminService:()=>G.z,AlarmCommentService:()=>H.O,AlarmService:()=>K.v,AliasController:()=>e.P,AssetProfileService:()=>Q.h,AssetService:()=>k.I,AttributeService:()=>z.e,AuditLogService:()=>L.t,AuthActionTypes:()=>vt.Yk,AuthEffects:()=>tt.D,AuthService:()=>nt.u,BroadcastService:()=>Z.D,BrowserWindowRef:()=>Be.IL,ComponentDescriptorService:()=>B.U,CoreModule:()=>Mt.U,CustomerService:()=>I.m,DashboardService:()=>U.I,DashboardUtilsService:()=>Y.N,DataAggregator:()=>t.M,DeviceProfileService:()=>a.N,DeviceService:()=>F.g,DialogService:()=>ge.o,DynamicComponentFactoryService:()=>ce.y,EdgeService:()=>A.p,EntitiesVersionControlService:()=>O.k,EntityDataService:()=>c.t,EntityDataSubscription:()=>h.V,EntityRelationService:()=>u.Z,EntityService:()=>P.T,EntityViewService:()=>m.o,EventService:()=>p.U,ImageService:()=>T.f,ItemBufferService:()=>se.Z,LocalStorageService:()=>$.s,MenuId:()=>J.D8,MenuService:()=>de.$,NodeScriptTestService:()=>N,NotificationService:()=>C.J,NotificationWebsocketService:()=>Ke.I,OAuth2Service:()=>_.P,OtaPackageService:()=>E.y,QueueService:()=>f.F,RafService:()=>re.f,ResourceService:()=>g.Q,ResourcesService:()=>ne.pQ,RuleChainService:()=>y.P,TelemetryWebsocketService:()=>Xe.W,TenantProfileService:()=>D.H,TenantService:()=>b.I,TimeService:()=>ie.v,TitleService:()=>Ae.E,ToastNotificationService:()=>ye.I,UiSettingsService:()=>w.N,UsageInfoService:()=>Ee.Z,UserService:()=>ee.D,UserSettingsService:()=>_e.A,UtilsService:()=>Pe.T,WINDOW:()=>Be.jf,WINDOW_PROVIDERS:()=>Be.GG,WebsocketService:()=>at.H,WidgetService:()=>ve.C,WidgetSubscription:()=>S.O,WidgetSubscriptionContext:()=>V.D,WindowRef:()=>Be.WT,animatedScroll:()=>ze.z5,authReducer:()=>Ye.l,base64toObj:()=>ze.i2,base64toString:()=>ze.yH,baseUrl:()=>ze.pc,blobToBase64:()=>ze.Sk,blobToText:()=>ze.gl,browserWindowProvider:()=>Be.G$,buildUserHome:()=>J.Lq,buildUserMenu:()=>J.x9,camelCase:()=>ze.xQ,componentTypeBySelector:()=>ne.k3,convertKeysToCamelCase:()=>ze.BS,createFileFromContent:()=>ze.mg,createLabelFromDatasource:()=>ze.K2,createLabelFromPattern:()=>ze.Xh,createLabelFromSubscriptionEntityInfo:()=>ze.Nx,deepClone:()=>ze.Go,deepTrim:()=>ze.XU,defaultHttpOptions:()=>v.Ge,defaultHttpOptionsFromConfig:()=>v.eT,defaultHttpUploadOptions:()=>v.Pw,deleteNullProperties:()=>ze.IM,effects:()=>bt.zb,extractType:()=>ze.Sn,fillDataPattern:()=>ze._x,flatDataWithoutOverride:()=>ze.qb,flatFormattedData:()=>ze.og,flatModulesWithComponents:()=>ne.LU,formatNumberValue:()=>ze.ac,formatValue:()=>ze.Fl,formattedDataArrayFromDatasourceData:()=>ze.pu,formattedDataFormDatasourceData:()=>ze.K,formattedDataFromDatasource:()=>ze.Y6,genNextLabel:()=>ze.Gd,generateSecret:()=>ze.Kl,getCurrentAuthState:()=>Qe.rW,getCurrentAuthUser:()=>Qe.rx,getCurrentOpenedMenuSections:()=>Qe.KX,getCurrentUserSettings:()=>Qe.qJ,getDescendantProp:()=>ze.Lj,getEntityDetailsPageURL:()=>ze.e9,getOS:()=>ze.R0,guid:()=>ze.Os,hasDatasourceLabelsVariables:()=>ze.Wb,hashCode:()=>ze.s5,initialState:()=>Ye.u,insertVariable:()=>ze.ew,isArraysEqualIgnoreUndefined:()=>ze.xw,isBoolean:()=>ze.Lm,isDefined:()=>ze.O9,isDefinedAndNotNull:()=>ze.f1,isEmpty:()=>ze.Im,isEmptyStr:()=>ze.Qb,isEqual:()=>ze.n4,isEqualIgnoreUndefined:()=>ze.vU,isFirefox:()=>ze.gm,isFunction:()=>ze.Tn,isLiteralObject:()=>ze.Vh,isLocalUrl:()=>ze.Lr,isMobileApp:()=>ze.KR,isNotEmptyStr:()=>ze.Q8,isNumber:()=>ze.Et,isNumeric:()=>ze.kf,isObject:()=>ze.Gv,isSafari:()=>ze.nr,isString:()=>ze.Kg,isUndefined:()=>ze.b0,isUndefinedOrNull:()=>ze.z,menuSectionMap:()=>J.Vo,mergeDeep:()=>ze.D9,mergeDeepIgnoreArray:()=>ze.yM,mergeFormattedData:()=>ze.xG,metaReducers:()=>bt.h4,modulesWithComponentsToTypes:()=>ne.YN,objToBase64:()=>ze.AT,objToBase64URI:()=>ze.kY,objectHashCode:()=>ze.vM,objectValues:()=>ze.KQ,onParentScrollOrWindowResize:()=>ze.aE,padValue:()=>ze.ji,parseFunction:()=>ze.qQ,parseHttpErrorMessage:()=>ze.JG,processDataPattern:()=>ze.uc,randomAlphanumeric:()=>ze.N8,reducers:()=>bt.gz,safeExecute:()=>ze.V5,selectAuth:()=>Qe.jc,selectAuthState:()=>Qe.e2,selectAuthUser:()=>Qe.SW,selectHasRepository:()=>Qe.vu,selectHomeDashboardParams:()=>Qe.QF,selectIsAuthenticated:()=>Qe.Kc,selectIsUserLoaded:()=>Qe.HC,selectMobileQrEnabled:()=>Qe.T9,selectOpenedMenuSections:()=>Qe.jS,selectPersistDeviceStateToTelemetry:()=>Qe.Ik,selectTbelEnabled:()=>Qe.vK,selectUserDetails:()=>Qe.Qn,selectUserReady:()=>Qe.le,selectUserSettings:()=>Qe.VL,selectUserSettingsProperty:()=>Qe.O7,selectUserTokenAccessEnabled:()=>Qe.Uo,setByPath:()=>ze.xC,snakeCase:()=>ze.LW,sortObjectKeys:()=>ze.gG,stringToBase64:()=>ze.q3,unset:()=>ze.wC,updateFileContent:()=>ze.ng,validateEntityId:()=>ze.BO,windowFactory:()=>Be.Jk,windowProvider:()=>Be.K8});var e=n(39116),t=n(83501),c=n(27884),h=n(26487),V=n(92964),S=n(56673),G=n(96955),K=n(90341),H=n(85381),k=n(20580),Q=n(56564),z=n(97068),L=n(33720),B=n(29647),I=n(74172),U=n(85568),F=n(49466),a=n(14246),O=n(81554),P=n(78911),A=n(44037),u=n(20506),m=n(80727),p=n(2932),v=n(72261),T=n(15421),C=n(40283),_=n(95435),E=n(14251),f=n(50584),g=n(73216),y=n(16450),b=n(71420),D=n(37324),w=n(20444),ee=n(39063),_e=n(11691),ve=n(19104),Ee=n(66086),$=n(92570),be=n(93953),Te=n(25558),oe=n(77235),R=n(34006);class N{constructor(gt,rt){this.ruleChainService=gt,this.dialog=rt}testNodeScript(gt,rt,Ze,je,$e,Oe,Fe,le,we){return Oe&&!we?this.ruleChainService.getLatestRuleNodeDebugInput(Oe).pipe((0,Te.n)(qe=>this.openTestScriptDialog(gt,rt,Ze,je,$e,qe,Fe,le))):this.openTestScriptDialog(gt,rt,Ze,je,$e,we,Fe,le)}openTestScriptDialog(gt,rt,Ze,je,$e,Oe,Fe,le){let we,qe,lt;if(Oe&&Oe.data)try{we=JSON.parse(Oe.data)}catch{}if(we||(we={temperature:22.4,humidity:78}),Oe&&Oe.metadata)try{qe=JSON.parse(Oe.metadata)}catch{}return qe||(qe={deviceName:"Test Device",deviceType:"default",ts:(new Date).getTime()+""}),lt=Oe&&Oe.msgType?Oe.msgType:"POST_TELEMETRY_REQUEST",this.dialog.open(oe.NodeScriptTestDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog","tb-fullscreen-dialog-gt-xs"],data:{msg:we,metadata:qe,msgType:lt,functionTitle:Ze,functionName:je,script:gt,scriptType:rt,argNames:$e,helpId:Fe,scriptLang:le}}).afterClosed()}static{this.\u0275fac=function(rt){return new(rt||N)(be.\u0275\u0275inject(y.P),be.\u0275\u0275inject(R.MatDialog))}}static{this.\u0275prov=be.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"})}}var Z=n(81147),Y=n(56508),ge=n(80216),ce=n(40020),se=n(77848),J=n(82456),de=n(94375),ye=n(729),re=n(72085),ne=n(59729),ie=n(61509),Ae=n(22914),Pe=n(15673),Be=n(86884),Ke=n(98183),Xe=n(64599),at=n(13269),bt=n(59705),Mt=n(83925),ze=n(27997),vt=n(37140),tt=n(45065),Ye=n(6211),Qe=n(63729),nt=n(35524)},61310:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmTableHeaderComponent:()=>G});var e=n(93953),t=n(5986),h=(n(2446),n(9310)),V=n(89417),S=n(3979);class G extends t.M{get alarmTableConfig(){return this.entitiesTableConfig}constructor(H){super(H),this.store=H}alarmFilterChanged(H){this.alarmTableConfig.alarmFilterConfig=H,this.alarmTableConfig.getTable().resetSortAndFilter(!0,!0)}static{this.\u0275fac=function(k){return new(k||G)(e.\u0275\u0275directiveInject(h.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:G,selectors:[["tb-alarm-table-header"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["propagatedFilter","false","userMode","",3,"ngModelChange","ngModel"]],template:function(k,Q){1&k&&(e.\u0275\u0275elementStart(0,"tb-alarm-filter-config",0),e.\u0275\u0275listener("ngModelChange",function(L){return Q.alarmFilterChanged(L)}),e.\u0275\u0275elementEnd()),2&k&&e.\u0275\u0275property("ngModel",Q.alarmTableConfig.alarmFilterConfig)},dependencies:[V.NgControlStatus,V.NgModel,S.AlarmFilterConfigComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding-right:8px;overflow:hidden;max-width:100%}']})}}},29760:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmTableComponent:()=>C});var e=n(93953),t=n(8968),c=n(80216),h=n(12054),V=n(25967),S=n(67496),G=n(27468),K=n(2446),H=n(61310),k=n(15961),Q=n(53244),z=n(63729),L=n(9437),B=n(47987),I=n(84276),U=n(76939),F=n(27997);class a extends h.M7{constructor(E,f,g,y,b,D,w=K.q6.ALL,ee=null,_e={statusList:[K.KG.ACTIVE]},ve,Ee,$,be,Te,oe=!1){super(),this.alarmService=E,this.entityService=f,this.dialogService=g,this.translate=y,this.datePipe=b,this.dialog=D,this.alarmsMode=w,this.entityId=ee,this.defaultAlarmFilterConfig=_e,this.store=ve,this.viewContainerRef=Ee,this.overlay=$,this.cd=be,this.utilsService=Te,this.authUser=(0,z.rx)(this.store),this.loadDataOnInit=oe,this.tableTitle="",this.useTimePageLink=!0,this.forAllTimeEnabled=!0,this.pageMode=oe,this.defaultTimewindowInterval=(0,Q.hj)(),this.detailsPanelEnabled=!1,this.selectionEnabled=!0,this.searchEnabled=!0,this.addEnabled=!1,this.entitiesDeleteEnabled=!1,this.actionsColumnTitle="alarm.details",this.entityType=V.ck.ALARM,this.entityTranslations=V.Mi.get(V.ck.ALARM),this.entityResources={},this.alarmFilterConfig=_e,this.headerComponent=H.AlarmTableHeaderComponent,this.entitiesFetchFunction=R=>this.fetchAlarms(R),this.defaultSortOrder={property:"createdTime",direction:S.O.DESC},this.columns.push(new h.Qr("createdTime","alarm.created-time",this.datePipe,"150px")),this.columns.push(new h.i6("originatorName","alarm.originator","25%",R=>this.utilsService.customTranslation(R.originatorName,R.originatorName),R=>(0,F.e9)(R.originator.id,R.originator.entityType))),this.columns.push(new h.KK("type","alarm.type","25%",R=>this.utilsService.customTranslation(R.type,R.type))),this.columns.push(new h.KK("severity","alarm.severity","25%",R=>this.translate.instant(K.Fm.get(R.severity)),R=>({fontWeight:"bold",color:K.xk.get(R.severity)}))),this.columns.push(new h.KK("assignee","alarm.assignee","240px",R=>this.getAssigneeTemplate(R),()=>({}),!1,()=>({}),()=>{},!1,{icon:"keyboard_arrow_down",type:h.Uk.DEFAULT,isEnabled:()=>!0,name:this.translate.instant("alarm.assign"),onAction:(R,N)=>this.openAlarmAssigneePanel(R,N)})),this.columns.push(new h.KK("status","alarm.status","25%",R=>this.translate.instant(K.gj.get(R.status)))),this.cellActionDescriptors.push({name:this.translate.instant("alarm.details"),icon:"more_horiz",isEnabled:()=>!0,onAction:(R,N)=>this.showAlarmDetails(N)}),this.groupActionDescriptors.push({name:this.translate.instant("alarm.acknowledge"),icon:"done",isEnabled:!0,onAction:(R,N)=>this.ackAlarms(R,N)},{name:this.translate.instant("alarm.clear"),icon:"clear",isEnabled:!0,onAction:(R,N)=>this.clearAlarms(R,N)},{name:this.translate.instant("alarm.delete"),icon:"delete",isEnabled:!0,onAction:(R,N)=>this.deleteAlarms(R,N)})}fetchAlarms(E){const f=this.entityService.resolveAlarmFilter(this.alarmFilterConfig,!1),g=new K.AC(this.entityId,E,f);switch(this.alarmsMode){case K.q6.ALL:return this.alarmService.getAllAlarmsV2(g);case K.q6.ENTITY:return this.alarmService.getAlarmsV2(g)}}showAlarmDetails(E){const f=this.authUser.authority!==L.s.CUSTOMER_USER||E.customerId?.id===this.authUser.customerId;this.dialog.open(k.AlarmDetailsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmId:E.id.id,alarm:E,allowAcknowledgment:f,allowClear:f,displayDetails:!0,allowAssign:!0}}).afterClosed().subscribe(g=>{g&&this.updateData()})}getAssigneeTemplate(E){const f=(0,F.f1)(E.assigneeId);let g;return g=f&&((0,F.Q8)(E.assignee?.firstName)||(0,F.Q8)(E.assignee?.lastName)||(0,F.Q8)(E.assignee?.email))?`\n        <span class="assigned-container">\n         <span class="user-avatar" style="background-color: ${this.getAvatarBgColor(E.assignee)}">\n           ${(0,K.NQ)(E.assignee)}\n         </span>\n         <span class="user-display-name">${(0,K.Nc)(E.assignee)}</span>\n        </span>`:`\n        <span class="unassigned-container">\n         <mat-icon class="material-icons unassigned-icon">\n           ${f?"no_accounts":"account_circle"}\n         </mat-icon>\n         <span>${this.translate.instant(f?"alarm.user-deleted":"alarm.unassigned")}</span>\n        </span>`,`<span class="assignee-cell">${g}</span>`}getAvatarBgColor(E){return this.utilsService.stringToHslColor((0,K.Nc)(E),40,60)}openAlarmAssigneePanel(E,f){E&&E.stopPropagation();const g=E.target||E.srcElement||E.currentTarget,y=new B.OverlayConfig;y.backdropClass="cdk-overlay-transparent-backdrop",y.hasBackdrop=!0;y.positionStrategy=this.overlay.position().flexibleConnectedTo(g).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]),y.minWidth="260px";const D=this.overlay.create(y);D.backdropClick().subscribe(()=>{D.dispose()});const w=[{provide:I.ALARM_ASSIGNEE_PANEL_DATA,useValue:{alarmId:f.id.id,assigneeId:f.assigneeId?.id}},{provide:B.OverlayRef,useValue:D}],ee=e.Injector.create({parent:this.viewContainerRef.injector,providers:w}),_e=D.attach(new U.ComponentPortal(I.AlarmAssigneePanelComponent,this.viewContainerRef,ee));_e.onDestroy(()=>{_e.instance.reassigned&&this.updateData()})}ackAlarms(E,f){E&&E.stopPropagation();const g=f.filter(D=>!D.acknowledged);let y="",b="";g.length?(y=this.translate.instant("alarm.aknowledge-alarms-title",{count:g.length}),b=this.translate.instant("alarm.aknowledge-alarms-text",{count:g.length}),this.dialogService.confirm(y,b,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(D=>{if(D){const w=[];for(const ee of g)w.push(this.alarmService.ackAlarm(ee.id.id));(0,G.p)(w).subscribe(()=>{this.updateData()})}})):(y=this.translate.instant("alarm.selected-alarms",{count:f.length}),b=this.translate.instant("alarm.selected-alarms-are-acknowledged"),this.dialogService.alert(y,b).subscribe())}clearAlarms(E,f){E&&E.stopPropagation();const g=f.filter(D=>!D.cleared);let y="",b="";g.length?(y=this.translate.instant("alarm.clear-alarms-title",{count:g.length}),b=this.translate.instant("alarm.clear-alarms-text",{count:g.length}),this.dialogService.confirm(y,b,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(D=>{if(D){const w=[];for(const ee of g)w.push(this.alarmService.clearAlarm(ee.id.id));(0,G.p)(w).subscribe(()=>{this.updateData()})}})):(y=this.translate.instant("alarm.selected-alarms",{count:f.length}),b=this.translate.instant("alarm.selected-alarms-are-cleared"),this.dialogService.alert(y,b).subscribe())}deleteAlarms(E,f){E&&E.stopPropagation();const g=this.translate.instant("alarm.delete-alarms-title",{count:f.length}),y=this.translate.instant("alarm.delete-alarms-text",{count:f.length});this.dialogService.confirm(g,y,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(b=>{if(b){const D=[];for(const w of f)D.push(this.alarmService.deleteAlarm(w.id.id));(0,G.p)(D).subscribe(()=>{this.updateData()})}})}}var O=n(90341),P=n(15673),A=n(78911),u=n(73955),m=n(60177),p=n(34006),v=n(9310),T=n(7901);class C{set active(E){this.activeValue!==E&&(this.activeValue=E,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))}set entityId(E){this.entityIdValue=E,this.alarmTableConfig&&this.alarmTableConfig.entityId!==E&&(this.alarmTableConfig.alarmFilterConfig={statusList:[K.KG.ACTIVE]},this.alarmTableConfig.entityId=E,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}constructor(E,f,g,y,b,D,w,ee,_e,ve,Ee,$,be){this.alarmService=E,this.entityService=f,this.dialogService=g,this.translate=y,this.datePipe=b,this.dialog=D,this.store=w,this.overlay=ee,this.viewContainerRef=_e,this.cd=ve,this.utilsService=Ee,this.route=$,this.router=be,this.activeValue=!1,this.dirtyValue=!1,this.alarmsMode=K.q6.ENTITY,this.detailsMode=!0}ngOnInit(){this.dirtyValue=!this.activeValue;const E=!!this.route.snapshot.data.isPage;E&&(this.detailsMode=!1),(0,F.f1)(this.route.snapshot.data.alarmsMode)&&(this.alarmsMode=this.route.snapshot.data.alarmsMode);const f={statusList:[K.KG.ACTIVE]};if(E){const g=this.route.snapshot.queryParams;if(g){const y=(0,F.Go)(g);let b=!1;g?.typeList&&(f.typeList=g?.typeList,delete y.typeList,b=!0),g?.statusList&&(f.statusList=g?.statusList,delete y.statusList,b=!0),g?.severityList&&(f.severityList=g?.severityList,delete y.severityList,b=!0),g?.assignedToMe&&(f.assignedToCurrentUser=g?.assignedToMe,delete y.assignedToMe,b=!0),b&&this.router.navigate([],{relativeTo:this.route,queryParams:y,queryParamsHandling:"",replaceUrl:!0})}}this.alarmTableConfig=new a(this.alarmService,this.entityService,this.dialogService,this.translate,this.datePipe,this.dialog,this.alarmsMode,this.entityIdValue,f,this.store,this.viewContainerRef,this.overlay,this.cd,this.utilsService,E)}static{this.\u0275fac=function(f){return new(f||C)(e.\u0275\u0275directiveInject(O.v),e.\u0275\u0275directiveInject(A.T),e.\u0275\u0275directiveInject(c.o),e.\u0275\u0275directiveInject(u.TranslateService),e.\u0275\u0275directiveInject(m.DatePipe),e.\u0275\u0275directiveInject(p.MatDialog),e.\u0275\u0275directiveInject(v.Store),e.\u0275\u0275directiveInject(B.Overlay),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(P.T),e.\u0275\u0275directiveInject(T.ActivatedRoute),e.\u0275\u0275directiveInject(T.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["tb-alarm-table"]],viewQuery:function(f,g){if(1&f&&e.\u0275\u0275viewQuery(t.EntitiesTableComponent,7),2&f){let y;e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(g.entitiesTable=y.first)}},inputs:{active:"active",entityId:"entityId"},decls:1,vars:3,consts:[[3,"entitiesTableConfig"]],template:function(f,g){1&f&&e.\u0275\u0275element(0,"tb-entities-table",0),2&f&&(e.\u0275\u0275classProp("tb-details-mode",g.detailsMode),e.\u0275\u0275property("entitiesTableConfig",g.alarmTableConfig))},dependencies:[t.EntitiesTableComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]     tb-entities-table.tb-details-mode .mat-drawer-container{background-color:#fff}[_nghost-%COMP%]     tb-entities-table .assignee-cell{line-height:normal}[_nghost-%COMP%]     tb-entities-table .assignee-cell .assigned-container{display:inline-block;vertical-align:baseline;max-width:180px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]     tb-entities-table .assignee-cell .assigned-container .user-avatar{display:inline-flex;justify-content:center;align-items:center;margin-right:8px;border-radius:50%;width:28px;height:28px;min-width:28px;min-height:28px;color:#fff;font-size:13px;font-weight:700}[_nghost-%COMP%]     tb-entities-table .assignee-cell .unassigned-container{display:inline-flex;align-items:center}[_nghost-%COMP%]     tb-entities-table .assignee-cell .unassigned-container .material-icons.unassigned-icon{width:28px;height:28px;font-size:28px;margin-right:8px;color:#00000061;overflow:visible}']})}}},31648:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EntityAliasesDialogComponent:()=>f});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(57665),G=n(78502),K=n(80216),H=n(27997),k=n(40500),Q=n(56508),z=n(9310),L=n(7901),B=n(73955),I=n(60177),U=n(88834),F=n(99213),a=n(67575),O=n(59042),P=n(53719),A=n(55911),u=n(14823),m=n(71997),p=n(30450),v=n(59248);function T(g,y){1&g&&e.\u0275\u0275element(0,"mat-progress-bar",21)}function C(g,y){1&g&&e.\u0275\u0275element(0,"div",22)}function _(g,y){1&g&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&g&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"entity.alias-required")," "))}function E(g,y){if(1&g){const b=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23)(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24)(4,"mat-form-field",25),e.\u0275\u0275element(5,"input",26),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275template(7,_,3,3,"mat-error",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"tb-entity-filter-view",28),e.\u0275\u0275elementStart(9,"section",29),e.\u0275\u0275element(10,"mat-slide-toggle",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",31),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275listener("click",function(){const w=e.\u0275\u0275restoreView(b).index,ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.editAlias(w))}),e.\u0275\u0275elementStart(14,"mat-icon"),e.\u0275\u0275text(15,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"button",31),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){const w=e.\u0275\u0275restoreView(b).index,ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.removeAlias(w))}),e.\u0275\u0275elementStart(19,"mat-icon"),e.\u0275\u0275text(20,"close"),e.\u0275\u0275elementEnd()()()()}if(2&g){const b=y.$implicit,D=y.index,w=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",D+1,"."),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(6,10,"entity.alias")),e.\u0275\u0275property("formControl",b.get("alias")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",b.get("alias").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("formControl",b.get("filter")),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",b.get("resolveMultiple")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(12,12,"alias.edit")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(13,14,w.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(17,16,"entity.remove-alias")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,18,w.isLoading$))}}class f extends V.m{constructor(y,b,D,w,ee,_e,ve,Ee,$,be){if(super(y,b,ee),this.store=y,this.router=b,this.data=D,this.errorStateMatcher=w,this.dialogRef=ee,this.fb=_e,this.dashboardUtils=ve,this.translate=Ee,this.dialogs=$,this.dialog=be,this.aliasToWidgetsMap={},this.submitted=!1,this.title=D.customTitle?D.customTitle:"entity.aliases",this.disableAdd=this.data.disableAdd,this.allowedEntityTypes=this.data.allowedEntityTypes,D.widgets){let oe;if(this.data.isSingleWidget&&1===this.data.widgets.length){oe=[this.data.widgets[0].config.title];for(const N of Object.keys(this.data.entityAliases))this.aliasToWidgetsMap[N]=oe}else this.data.widgets.forEach(R=>{R.type===S.t_.rpc?R.config.targetDevice?.type===S.QQ.entity&&R.config.targetDevice.entityAliasId&&this.addWidgetTitleToWidgetsMap(R.config.targetDevice.entityAliasId,R.config.title):R.type===S.t_.alarm?R.config.alarmSource&&this.addWidgetTitleToWidgetsMap(R.config.alarmSource.entityAliasId,R.config.title):this.dashboardUtils.validateAndUpdateDatasources(R.config.datasources).forEach(Z=>{[S.cT.entity,S.cT.entityCount,S.cT.alarmCount].includes(Z.type)&&Z.entityAliasId&&this.addWidgetTitleToWidgetsMap(Z.entityAliasId,R.config.title)})})}const Te=[];for(const oe of Object.keys(this.data.entityAliases)){const R=this.data.entityAliases[oe];R.filter||(R.filter={resolveMultiple:!1}),(0,H.b0)(R.filter.resolveMultiple)&&(R.filter.resolveMultiple=!1),Te.push(this.createEntityAliasFormControl(oe,R))}this.entityAliasesFormGroup=this.fb.group({entityAliases:this.fb.array(Te)})}addWidgetTitleToWidgetsMap(y,b){let D=this.aliasToWidgetsMap[y];D||(D=[],this.aliasToWidgetsMap[y]=D),D.push(b)}createEntityAliasFormControl(y,b){const D=this.fb.group({id:[y],alias:[b?b.alias:null,[h.Validators.required]],filter:[b?b.filter:null],resolveMultiple:[!!b&&b.filter.resolveMultiple]});return D.get("resolveMultiple").valueChanges.subscribe(w=>{D.get("filter").value.resolveMultiple=w}),D}entityAliasesFormArray(){return this.entityAliasesFormGroup.get("entityAliases")}ngOnInit(){}isErrorState(y,b){const D=this.errorStateMatcher.isErrorState(y,b),w=!!(y&&y.invalid&&this.submitted);return D||w}removeAlias(y){const b=this.entityAliasesFormGroup.get("entityAliases").value[y],D=this.aliasToWidgetsMap[b.id];if(D){let w="";for(const _e of D)w+="<br/>'"+_e+"'";const ee=this.translate.instant("entity.unable-delete-entity-alias-text",{entityAlias:b.alias,widgetsList:w});this.dialogs.alert(this.translate.instant("entity.unable-delete-entity-alias-title"),ee,this.translate.instant("action.close"),!0)}else this.entityAliasesFormGroup.get("entityAliases").removeAt(y),this.entityAliasesFormGroup.markAsDirty()}addAlias(){this.openAliasDialog(-1)}editAlias(y){this.openAliasDialog(y)}openAliasDialog(y){const b=-1===y;let D;const w=this.entityAliasesFormGroup.get("entityAliases").value;b||(D=w[y]),this.dialog.open(k.EntityAliasDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:b,allowedEntityTypes:this.allowedEntityTypes,entityAliases:w,alias:b?null:(0,H.Go)(D)}}).afterClosed().subscribe(ee=>{if(ee){if(b)this.entityAliasesFormGroup.get("entityAliases").push(this.createEntityAliasFormControl(ee.id,ee));else{const _e=this.entityAliasesFormGroup.get("entityAliases").at(y);_e.get("alias").patchValue(ee.alias),_e.get("filter").patchValue(ee.filter),_e.get("resolveMultiple").patchValue(ee.filter.resolveMultiple)}this.entityAliasesFormGroup.markAsDirty()}})}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0;const y={},b={};let w,D=!0;const ee=this.entityAliasesFormGroup.get("entityAliases").value;for(const _e of ee){const ve=_e.id,Ee=_e.alias.trim(),$=_e.filter;if(b[Ee]){D=!1,w=this.translate.instant("entity.duplicate-alias-error",{alias:Ee});break}if(!$||!$.type){D=!1,w=this.translate.instant("entity.missing-entity-filter-error",{alias:Ee});break}b[Ee]=Ee,y[ve]={id:ve,alias:Ee,filter:$}}D?this.dialogRef.close(y):this.store.dispatch(new G.xo({message:w,type:"error"}))}static{this.\u0275fac=function(b){return new(b||f)(e.\u0275\u0275directiveInject(z.Store),e.\u0275\u0275directiveInject(L.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(Q.N),e.\u0275\u0275directiveInject(B.TranslateService),e.\u0275\u0275directiveInject(K.o),e.\u0275\u0275directiveInject(c.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["tb-entity-aliases-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:f}]),e.\u0275\u0275InheritDefinitionFeature],decls:43,vars:37,consts:[[2,"width","800px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"tb-aliases-header","flex","flex-row","items-center","justify-start"],[1,"max-w-5%","flex-full"],[1,"flex","max-w-95%","flex-full","flex-row","items-center","justify-start"],["translate","",1,"tb-header-label","flex-1","gt-sm:min-w-52","gt-sm:max-w-52","gt-sm:basis-52"],["translate","",1,"tb-header-label","flex-1",2,"padding-left","10px"],["translate","",1,"tb-header-label","min-w-32","max-w-32","flex-1","basis-32",2,"padding-left","10px"],[2,"min-width","80px"],[3,"disabled"],["class","flex flex-1 flex-row items-center justify-start","formArrayName","entityAliases",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["formArrayName","entityAliases",1,"flex","flex-1","flex-row","items-center","justify-start"],[1,"mat-elevation-z4","tb-alias","flex","max-w-95%","flex-full","flex-row","items-center","justify-start"],[1,"mat-block","flex-1","gt-sm:min-w-52","gt-sm:max-w-52","gt-sm:basis-52",2,"padding-top","20px"],["matInput","","required","",3,"formControl","placeholder"],[4,"ngIf"],[1,"flex-1",2,"padding-left","10px",3,"formControl"],[1,"tb-resolve-multiple-switch","flex","min-w-32","max-w-32","flex-1","basis-32","flex-col","items-center","justify-center",2,"padding-left","10px"],[1,"resolve-multiple-switch",3,"formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","disabled","matTooltip"]],template:function(b,D){1&b&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return D.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return D.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,T,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,C,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"div",8),e.\u0275\u0275element(15,"span",9),e.\u0275\u0275elementStart(16,"div",10)(17,"span",11),e.\u0275\u0275text(18,"alias.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"span",12),e.\u0275\u0275text(20,"alias.entity-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"span",13),e.\u0275\u0275text(22,"alias.resolve-multiple"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"span",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"fieldset",15),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275element(26,"mat-divider"),e.\u0275\u0275template(27,E,21,20,"div",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",17)(29,"button",18),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275pipe(31,"async"),e.\u0275\u0275listener("click",function(){return D.addAlias()}),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"span",2),e.\u0275\u0275elementStart(35,"button",19),e.\u0275\u0275pipe(36,"async"),e.\u0275\u0275listener("click",function(){return D.cancel()}),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"button",20),e.\u0275\u0275pipe(40,"async"),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementEnd()()()),2&b&&(e.\u0275\u0275property("formGroup",D.entityAliasesFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,15,D.title)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,17,D.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(12,19,D.isLoading$)),e.\u0275\u0275advance(13),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(25,21,D.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",D.entityAliasesFormArray().controls),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",D.disableAdd),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(30,23,"alias.add")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(31,25,D.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,27,"alias.add")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(36,29,D.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(38,31,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(40,33,D.isLoading$)||D.entityAliasesFormGroup.invalid||!D.entityAliasesFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(42,35,"action.save")," "))},dependencies:[I.NgForOf,I.NgIf,U.MatButton,U.MatIconButton,F.MatIcon,a.MatProgressBar,O.MatInput,P.MatFormField,P.MatError,A.MatToolbar,c.MatDialogActions,c.MatDialogContent,u.MatTooltip,m.MatDivider,p.MatSlideToggle,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormControlDirective,h.FormGroupDirective,h.FormArrayName,B.TranslateDirective,v.EntityFilterViewComponent,I.AsyncPipe,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:#00000091}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-mdc-dialog-content{padding-top:0!important;padding-bottom:0!important}']})}}},78758:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AddAttributeDialogComponent:()=>m});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(10320),G=n(97068),K=n(9310),H=n(7901),k=n(60177),Q=n(77674),z=n(88834),L=n(99213),B=n(67575),I=n(59042),U=n(53719),F=n(55911),a=n(73955);function O(p,v){1&p&&e.\u0275\u0275element(0,"mat-progress-bar",17)}function P(p,v){1&p&&e.\u0275\u0275element(0,"div",18)}function A(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p){const T=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,T.isTelemetry?"attribute.telemetry-key-required":"attribute.key-required")," ")}}function u(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"attribute.key-max-length")," "))}class m extends V.m{constructor(v,T,C,_,E,f,g){super(v,T,f),this.store=v,this.router=T,this.data=C,this.attributeService=_,this.errorStateMatcher=E,this.dialogRef=f,this.fb=g,this.submitted=!1,this.isTelemetry=!1}ngOnInit(){this.attributeFormGroup=this.fb.group({key:["",[h.Validators.required,h.Validators.maxLength(255)]],value:[null,[h.Validators.required]]}),this.isTelemetry=this.data.attributeScope===S.bX.LATEST_TELEMETRY}isErrorState(v,T){const C=this.errorStateMatcher.isErrorState(v,T),_=!!(v&&v.invalid&&this.submitted);return C||_}invalid(){const v=this.attributeFormGroup.get("value").value;return!Array.isArray(v)&&this.attributeFormGroup.invalid}cancel(){this.dialogRef.close(!1)}add(){this.submitted=!0;const v={lastUpdateTs:null,key:this.attributeFormGroup.get("key").value.trim(),value:this.attributeFormGroup.get("value").value};let T;T=this.data.attributeScope===S.bX.LATEST_TELEMETRY?this.attributeService.saveEntityTimeseries(this.data.entityId,this.data.attributeScope,[v]):this.attributeService.saveEntityAttributes(this.data.entityId,this.data.attributeScope,[v]),T.subscribe(()=>this.dialogRef.close(!0))}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(H.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(G.e),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.FormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-add-attribute-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:m}]),e.\u0275\u0275InheritDefinitionFeature],decls:32,vars:28,consts:[[2,"min-width","420px","max-width","420px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","key","required",""],[4,"ngIf"],["formControlName","value",3,"requiredText"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return C.add()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,O,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,P,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"fieldset",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"mat-form-field",9)(17,"mat-label",10),e.\u0275\u0275text(18,"attribute.key"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",11),e.\u0275\u0275template(20,A,3,3,"mat-error",12)(21,u,3,3,"mat-error",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"tb-value-input",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",14)(24,"button",15),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"button",16),e.\u0275\u0275pipe(29,"async"),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd()()()),2&T&&(e.\u0275\u0275property("formGroup",C.attributeFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,12,C.isTelemetry?"attribute.add-telemetry":"attribute.add")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,14,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,16,C.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,18,C.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",C.attributeFormGroup.get("key").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C.attributeFormGroup.get("key").hasError("maxlength")),e.\u0275\u0275advance(),e.\u0275\u0275property("requiredText",C.isTelemetry?"attribute.telemetry-value-required":"attribute.value-required"),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(25,20,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,22,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(29,24,C.isLoading$)||C.invalid()||!C.attributeFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,26,"action.add")," "))},dependencies:[k.NgIf,Q.ValueInputComponent,z.MatButton,z.MatIconButton,L.MatIcon,B.MatProgressBar,I.MatInput,U.MatFormField,U.MatLabel,U.MatError,F.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,a.TranslateDirective,k.AsyncPipe,a.TranslatePipe],encapsulation:2})}}},9611:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AddWidgetToDashboardDialogComponent:()=>g});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(15673),G=n(27997),K=n(56508),H=n(85568),k=n(27468),Q=n(7673),z=n(98799),L=n(17358),B=n(73028),I=n(77848),U=n(9310),F=n(7901),a=n(60177),O=n(23593),P=n(88834),A=n(82765),u=n(99213),m=n(67575),p=n(59042),v=n(53719),T=n(55911),C=n(5951),_=n(73955);function E(y,b){1&y&&e.\u0275\u0275element(0,"mat-progress-bar",20)}function f(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.title-required")," "))}class g extends V.m{constructor(b,D,w,ee,_e,ve,Ee,$,be,Te,oe){super(b,D,_e),this.store=b,this.router=D,this.data=w,this.errorStateMatcher=ee,this.dialogRef=_e,this.fb=ve,this.utils=Ee,this.dashboardUtils=$,this.dashboardService=be,this.itembuffer=Te,this.dialog=oe,this.submitted=!1,this.addWidgetFormGroup=this.fb.group({addToDashboardType:[0,[]],dashboardId:[null,[h.Validators.required]],newDashboardTitle:[{value:null,disabled:!0},[]],openDashboard:[!1,[]]}),this.addWidgetFormGroup.get("addToDashboardType").valueChanges.subscribe(R=>{0===R?(this.addWidgetFormGroup.get("dashboardId").setValidators([h.Validators.required]),this.addWidgetFormGroup.get("dashboardId").enable(),this.addWidgetFormGroup.get("newDashboardTitle").setValidators([]),this.addWidgetFormGroup.get("newDashboardTitle").disable(),this.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),this.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity()):(this.addWidgetFormGroup.get("dashboardId").setValidators([]),this.addWidgetFormGroup.get("dashboardId").disable(),this.addWidgetFormGroup.get("newDashboardTitle").setValidators([h.Validators.required]),this.addWidgetFormGroup.get("newDashboardTitle").enable(),this.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),this.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity())})}ngOnInit(){}isErrorState(b,D){const w=this.errorStateMatcher.isErrorState(b,D),ee=!!(b&&b.invalid&&this.submitted);return w||ee}cancel(){this.dialogRef.close(null)}add(){if(this.submitted=!0,0===this.addWidgetFormGroup.get("addToDashboardType").value){const D=this.addWidgetFormGroup.get("dashboardId").value;this.dashboardService.getDashboard(D).pipe((0,B.Z)(w=>(w=this.dashboardUtils.validateAndUpdateDashboard(w),this.selectTargetState(w).pipe((0,B.Z)(ee=>(0,k.p)([(0,Q.of)(w),(0,Q.of)(ee),this.selectTargetLayout(w,ee)])))))).subscribe(w=>{this.addWidgetToDashboard(w[0],w[1],w[2])})}else{const w={title:this.addWidgetFormGroup.get("newDashboardTitle").value};this.addWidgetToDashboard(w,"default","main")}}selectTargetState(b){const D=b.configuration.states,w=Object.keys(D);return w.length>1?this.dialog.open(L.SelectTargetStateDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:D}}).afterClosed():(0,Q.of)(w[0])}selectTargetLayout(b,D){const w=b.configuration.states[D].layouts,ee=Object.keys(w);return ee.length>1?this.dialog.open(z.SelectTargetLayoutDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():(0,Q.of)(ee[0])}addWidgetToDashboard(b,D,w){const ee={datasourceAliases:{},targetDeviceAlias:null};ee.datasourceAliases[0]={alias:this.data.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.data.entityId)};this.itembuffer.addWidgetToDashboard(b,D,w,this.data.widget,ee,{datasourceFilters:{}},null,null,48,null,-1,-1).pipe((0,B.Z)(ve=>this.dashboardService.saveDashboard(ve))).subscribe(ve=>{const Ee=this.addWidgetFormGroup.get("openDashboard").value;if(this.dialogRef.close(),Ee){let $;if(Object.keys(b.configuration.states).indexOf(D)>0){const R={id:D,params:{}},N=(0,G.kY)([R]);$=`/dashboards/${ve.id.id}?state=${N}`}else $=`/dashboards/${ve.id.id}`;this.router.parseUrl($);this.router.navigateByUrl($)}})}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275directiveInject(U.Store),e.\u0275\u0275directiveInject(F.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.T),e.\u0275\u0275directiveInject(K.N),e.\u0275\u0275directiveInject(H.I),e.\u0275\u0275directiveInject(I.Z),e.\u0275\u0275directiveInject(c.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["tb-add-widget-to-dashboard-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:g}]),e.\u0275\u0275InheritDefinitionFeature],decls:41,vars:28,consts:[[2,"min-width","400px",3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","",1,"flex","flex-col"],[3,"disabled"],["formControlName","addToDashboardType"],["color","primary",3,"value"],[1,"flex","flex-col",2,"width","300px"],["formControlName","dashboardId",3,"required","selectFirstDashboard"],[1,"mat-block"],["matInput","","formControlName","newDashboardTitle",3,"required"],[4,"ngIf"],["mat-dialog-actions","",1,"flex","flex-row"],["formControlName","openDashboard",2,"margin-bottom","0"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(D,w){1&D&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return w.add()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3,"attribute.add-widget-to-dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return w.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,E,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",7)(11,"fieldset",8),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"mat-radio-group",9)(14,"mat-radio-button",10)(15,"section",11)(16,"span",2),e.\u0275\u0275text(17,"dashboard.select-existing"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"tb-dashboard-autocomplete",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"mat-radio-button",10)(20,"section",11)(21,"span",2),e.\u0275\u0275text(22,"dashboard.create-new"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",13)(24,"mat-label",2),e.\u0275\u0275text(25,"dashboard.new-dashboard-title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",14),e.\u0275\u0275template(27,f,3,3,"mat-error",15),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(28,"div",16)(29,"mat-checkbox",17),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"span",3),e.\u0275\u0275elementStart(33,"button",18),e.\u0275\u0275pipe(34,"async"),e.\u0275\u0275listener("click",function(){return w.cancel()}),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"button",19),e.\u0275\u0275pipe(38,"async"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd()()()),2&D&&(e.\u0275\u0275property("formGroup",w.addWidgetFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,14,w.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,16,w.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",0),e.\u0275\u0275advance(4),e.\u0275\u0275property("required",0===w.addWidgetFormGroup.get("addToDashboardType").value)("selectFirstDashboard",!1),e.\u0275\u0275advance(),e.\u0275\u0275property("value",1),e.\u0275\u0275advance(7),e.\u0275\u0275property("required",1===w.addWidgetFormGroup.get("addToDashboardType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.addWidgetFormGroup.get("newDashboardTitle").hasError("required")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,18,"dashboard.open-dashboard")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(34,20,w.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(36,22,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(38,24,w.isLoading$)||w.addWidgetFormGroup.invalid||!w.addWidgetFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(40,26,"action.add")," "))},dependencies:[a.NgIf,O.DashboardAutocompleteComponent,P.MatButton,P.MatIconButton,A.MatCheckbox,u.MatIcon,m.MatProgressBar,p.MatInput,v.MatFormField,v.MatLabel,v.MatError,T.MatToolbar,c.MatDialogActions,c.MatDialogContent,C.MatRadioGroup,C.MatRadioButton,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,_.TranslateDirective,a.AsyncPipe,_.TranslatePipe],styles:['@charset "UTF-8";']})}}},89432:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AttributeTableComponent:()=>Ce});var e=n(93953),t=n(69749),c=n(719),h=n(96695),V=n(2042),S=n(80216),G=n(67496),K=n(18530),H=n(57786),k=n(27468),Q=n(70152),z=n(23294),L=n(56977),B=n(10320),I=n(45024),U=n(84412),F=n(92771),a=n(7673),O=n(29543),P=n(99437),A=n(96354),u=n(89348),m=n(99898),p=n(88141),v=n(96697);class T{constructor(q,pe,xe,Ge){this.attributeService=q,this.telemetryWsService=pe,this.zone=xe,this.translate=Ge,this.attributesSubject=new U.t([]),this.pageDataSubject=new U.t((0,O.r)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new I.SelectionModel(!0,[])}connect(q){return this.attributesSubject.asObservable()}disconnect(q){this.attributesSubject.complete(),this.pageDataSubject.complete(),this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)}loadAttributes(q,pe,xe,Ge=!1){Ge&&(this.allAttributes=null,this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)),this.selection.clear();const _t=new F.m;return this.fetchAttributes(q,pe,xe).pipe((0,P.W)(()=>(0,a.of)((0,O.r)()))).subscribe(Et=>{this.attributesSubject.next(Et.data),this.pageDataSubject.next(Et),_t.next(Et)}),_t}fetchAttributes(q,pe,xe){return this.getAllAttributes(q,pe).pipe((0,A.T)(Ge=>{const _t=Ge.filter(Et=>0!==Et.lastUpdateTs);return xe.filterData(_t)}))}getAllAttributes(q,pe){if(!this.allAttributes){let xe;B.Kk.get(pe)?(this.telemetrySubscriber=B.eb.createEntityAttributesSubscription(this.telemetryWsService,q,pe,this.zone),this.telemetrySubscriber.subscribe(),xe=this.telemetrySubscriber.attributeData$()):xe=this.attributeService.getEntityAttributes(q,pe),this.allAttributes=xe.pipe((0,u.H)(1),(0,m.B)())}return this.allAttributes}isAllSelected(){const q=this.selection.selected.length;return this.attributesSubject.pipe((0,A.T)(pe=>q===pe.length))}isEmpty(){return this.attributesSubject.pipe((0,A.T)(q=>!q.length))}total(){return this.pageDataSubject.pipe((0,A.T)(q=>q.totalElements))}masterToggle(){this.attributesSubject.pipe((0,p.M)(q=>{this.selection.selected.length===q.length?this.selection.clear():q.forEach(xe=>{this.selection.select(xe)})}),(0,v.s)(1)).subscribe()}}var C=n(97068),_=n(25967),E=n(14085),f=n(78758),g=n(47987),y=n(79993),b=n(76939),D=n(64599),w=n(57665),ee=n(39116),_e=n(15673),ve=n(56508),Ee=n(19104),$=n(87891),be=n(78911),Te=n(9611),oe=n(27997),R=n(74972),N=n(89392),Z=n(9310),Y=n(73955),ge=n(34006),ce=n(89417),se=n(60177),J=n(2869),de=n(88834),ye=n(82765),re=n(99213),ne=n(59042),ie=n(53719),Ae=n(55911),Pe=n(82798),Be=n(86600),Ke=n(14823),Xe=n(9159),at=n(71997),bt=n(11542),Mt=n(9361),ze=n(57469),vt=n(68381);const tt=["searchInput"],Ye=j=>({count:j}),Qe=()=>[10,20,30],nt=()=>({padding:"4px","font-size":"16px",color:"rgba(0,0,0,.87)"});function ot(j,q){if(1&j&&(e.\u0275\u0275elementStart(0,"mat-option",50),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",pe),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,xe.telemetryTypeTranslationsMap.get(xe.toTelemetryTypeFunc(pe)))," ")}}function gt(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",47)(1,"mat-label",23),e.\u0275\u0275text(2,"attribute.attributes-scope"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",48),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275listener("ngModelChange",function(Ge){e.\u0275\u0275restoreView(pe);const _t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_t.attributeScopeChanged(Ge))}),e.\u0275\u0275template(5,ot,3,4,"mat-option",49),e.\u0275\u0275elementEnd()()}if(2&j){const pe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,3,pe.isLoading$))("ngModel",pe.attributeScope),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",pe.attributeScopes)}}function rt(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(Ge){e.\u0275\u0275restoreView(pe);const _t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_t.addAttribute(Ge))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"add"),e.\u0275\u0275elementEnd()()}if(2&j){const pe=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,2,"action.add")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,4,pe.isLoading$))}}function Ze(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",14),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(pe);const Ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge.reloadAttributes())}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"refresh"),e.\u0275\u0275elementEnd()()}if(2&j){const pe=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,2,"action.refresh")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,4,pe.isLoading$))}}function je(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-header-cell",51)(1,"mat-checkbox",52),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("change",function(Ge){e.\u0275\u0275restoreView(pe);const _t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge?_t.dataSource.masterToggle():null)}),e.\u0275\u0275elementEnd()()}if(2&j){const pe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("checked",pe.dataSource.selection.hasValue()&&e.\u0275\u0275pipeBind1(2,2,pe.dataSource.isAllSelected()))("indeterminate",pe.dataSource.selection.hasValue()&&!e.\u0275\u0275pipeBind1(3,4,pe.dataSource.isAllSelected()))}}function $e(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"mat-checkbox",53),e.\u0275\u0275listener("click",function(Ge){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(Ge.stopPropagation())})("change",function(Ge){const _t=e.\u0275\u0275restoreView(pe).$implicit,Et=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge?Et.dataSource.selection.toggle(_t):null)}),e.\u0275\u0275elementEnd()()}if(2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("checked",xe.dataSource.selection.isSelected(pe))}}function Oe(j,q){1&j&&(e.\u0275\u0275elementStart(0,"mat-header-cell",54),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&j&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"attribute.last-update-time")," "))}function Fe(j,q){if(1&j&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&j){const pe=q.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,pe.lastUpdateTs,"yyyy-MM-dd HH:mm:ss")," ")}}function le(j,q){1&j&&(e.\u0275\u0275elementStart(0,"mat-header-cell",55),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&j&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"attribute.key")," "))}function we(j,q){if(1&j&&(e.\u0275\u0275elementStart(0,"mat-cell",56)(1,"div",57)(2,"span",58),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"tb-copy-button",59),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()()),2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(pe.key),e.\u0275\u0275advance(),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(10,nt)),e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(5,6,"attribute.copy-key")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,8,xe.isLoading$))("copyText",pe.key)}}function qe(j,q){1&j&&(e.\u0275\u0275elementStart(0,"mat-header-cell",60),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&j&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"attribute.value")," "))}function lt(j,q){if(1&j&&(e.\u0275\u0275element(0,"tb-copy-button",59),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"tbJson")),2&j){const pe=e.\u0275\u0275nextContext().$implicit,xe=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(11,nt)),e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(1,5,"attribute.copy-value")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,7,xe.isLoading$))("copyText",e.\u0275\u0275pipeBind1(3,9,pe.value))}}function Kt(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(Ge){e.\u0275\u0275restoreView(pe);const _t=e.\u0275\u0275nextContext().$implicit,Et=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Et.deleteTimeseries(Ge,_t))}),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2,"delete"),e.\u0275\u0275elementEnd()()}}function Jt(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell",61),e.\u0275\u0275listener("click",function(Ge){const _t=e.\u0275\u0275restoreView(pe).$implicit,Et=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Et.editAttribute(Ge,_t))}),e.\u0275\u0275elementStart(1,"div",62)(2,"div",63)(3,"span",58),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"tbJson"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,lt,4,12,"tb-copy-button",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"span")(8,"mat-icon"),e.\u0275\u0275text(9,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,Kt,3,0,"button",65),e.\u0275\u0275elementEnd()()}if(2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,5,pe.value)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",""!==pe.value),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",xe.isClientSideTelemetryTypeMap.get(xe.attributeScope)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",xe.attributeScope===xe.latestTelemetryTypes.LATEST_TELEMETRY)}}function Vt(j,q){1&j&&e.\u0275\u0275element(0,"mat-header-row",67)}function hn(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-row",68),e.\u0275\u0275listener("click",function(){const Ge=e.\u0275\u0275restoreView(pe).$implicit,_t=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_t.dataSource.selection.toggle(Ge))}),e.\u0275\u0275elementEnd()}if(2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("mat-selected",xe.dataSource.selection.isSelected(pe))}}function ut(j,q){if(1&j&&(e.\u0275\u0275elementStart(0,"article",72),e.\u0275\u0275element(1,"tb-dashboard",73),e.\u0275\u0275elementEnd()),2&j){const pe=q.$implicit,xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("aliasController",xe.aliasController)("widgets",pe)("columns",20)("isEdit",!1)("isMobileDisabled",!0)("isEditActionEnabled",!1)("isRemoveActionEnabled",!1)}}function Zt(j,q){1&j&&(e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"keyboard_arrow_left"),e.\u0275\u0275elementEnd()()),2&j&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"attribute.prev-widget"))}function He(j,q){if(1&j&&e.\u0275\u0275template(0,Zt,4,3,"button",74),2&j){const pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",pe.widgetsCarouselIndex>0)}}function We(j,q){1&j&&(e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"keyboard_arrow_right"),e.\u0275\u0275elementEnd()()),2&j&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"attribute.next-widget"))}function he(j,q){if(1&j&&e.\u0275\u0275template(0,We,4,3,"button",74),2&j){const pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",pe.widgetsCarouselIndex<pe.widgetsList.length-1)}}function Me(j,q){if(1&j&&e.\u0275\u0275element(0,"div",75),2&j){const pe=q.$implicit;e.\u0275\u0275classProp("visible",pe.index===pe.currentIndex)}}function Ne(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-hm-carousel",69,1),e.\u0275\u0275twoWayListener("ngModelChange",function(Ge){e.\u0275\u0275restoreView(pe);const _t=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(_t.widgetsCarouselIndex,Ge)||(_t.widgetsCarouselIndex=Ge),e.\u0275\u0275resetView(Ge)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(pe);const Ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge.onWidgetsCarouselIndexChanged())}),e.\u0275\u0275elementStart(2,"section",70),e.\u0275\u0275template(3,ut,2,7,"article",71),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,He,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(6,he,1,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)(8,Me,1,2,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&j){const pe=e.\u0275\u0275nextContext();e.\u0275\u0275twoWayProperty("ngModel",pe.widgetsCarouselIndex),e.\u0275\u0275property("data",pe.widgetsList)("infinite",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",pe.widgetsList)}}function it(j,q){1&j&&(e.\u0275\u0275elementStart(0,"span",76),e.\u0275\u0275text(1,"widgets-bundle.empty"),e.\u0275\u0275elementEnd())}function Ue(j,q){1&j&&(e.\u0275\u0275elementStart(0,"span",76),e.\u0275\u0275text(1,"widget.select-widgets-bundle"),e.\u0275\u0275elementEnd())}class Ce extends t.H{get disableAttributeScopeSelection(){return this.disableAttributeScopeSelectionValue}set disableAttributeScopeSelection(q){this.disableAttributeScopeSelectionValue=(0,E.coerceBooleanProperty)(q)}set active(q){this.activeValue!==q&&(this.activeValue=q,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))}set entityId(q){this.entityIdValue!==q&&(this.entityIdValue=q,this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}constructor(q,pe,xe,Ge,_t,Et,Gt,Ot,Wt,qt,en,Tn,tn,Mn,bn,rn){super(q),this.store=q,this.attributeService=pe,this.telemetryWsService=xe,this.translate=Ge,this.dialog=_t,this.overlay=Et,this.viewContainerRef=Gt,this.dialogService=Ot,this.entityService=Wt,this.utils=qt,this.dashboardUtils=en,this.widgetService=Tn,this.zone=tn,this.cd=Mn,this.elementRef=bn,this.fb=rn,this.telemetryTypeTranslationsMap=B.eU,this.isClientSideTelemetryTypeMap=B.Kk,this.latestTelemetryTypes=B.bX,this.attributeScopeTypes=B.BY,this.mode="default",this.attributeScopes=[],this.toTelemetryTypeFunc=B.j8,this.displayedColumns=["select","lastUpdateTs","key","value"],this.textSearchMode=!1,this.hidePageSize=!1,this.activeValue=!1,this.dirtyValue=!1,this.attributeScopeSelectionReadonly=!1,this.viewsInited=!1,this.selectedWidgetsBundleAlias=null,this.widgetBundleSet=!1,this.widgetsLoaded=!1,this.widgetsCarouselIndex=0,this.widgetsList=[],this.widgetsListCache=[],this.textSearch=this.fb.control("",{nonNullable:!0}),this.destroy$=new K.B,this.dirtyValue=!this.activeValue;const on={property:"key",direction:G.O.ASC};this.pageLink=new c.Ek(10,0,null,on),this.dataSource=new T(this.attributeService,this.telemetryWsService,this.zone,this.translate)}ngOnInit(){this.widgetResize$=new ResizeObserver(()=>{this.zone.run(()=>{const q=this.elementRef.nativeElement.offsetWidth<R.u3;q!==this.hidePageSize&&(this.hidePageSize=q,this.cd.markForCheck())})}),this.widgetResize$.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.widgetResize$&&this.widgetResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()}attributeScopeChanged(q){this.attributeScope=q,this.mode="default",this.paginator.pageIndex=0,this.updateData(!0)}ngAfterViewInit(){this.textSearch.valueChanges.pipe((0,Q.B)(150),(0,z.F)((q,pe)=>(this.pageLink.textSearch??"")===pe.trim()),(0,L.Q)(this.destroy$)).subscribe(q=>{this.paginator.pageIndex=0,this.pageLink.textSearch=q.trim(),this.updateData()}),this.sort.sortChange.pipe((0,L.Q)(this.destroy$)).subscribe(()=>this.paginator.pageIndex=0),(0,H.h)(this.sort.sortChange,this.paginator.page).pipe((0,L.Q)(this.destroy$)).subscribe(()=>this.updateData()),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)}updateData(q=!1){this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=G.O[this.sort.direction.toUpperCase()],this.dataSource.loadAttributes(this.entityIdValue,this.attributeScope,this.pageLink,q)}enterFilterMode(){this.textSearchMode=!0,setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.textSearch.reset()}resetSortAndFilter(q=!0){const pe=this.entityIdValue.entityType;if(pe===_.ck.DEVICE||pe===_.ck.ENTITY_VIEW?(this.attributeScopes=Object.keys(B.BY),this.attributeScopeSelectionReadonly=!1):(this.attributeScopes=[B.BY.SERVER_SCOPE],this.attributeScopeSelectionReadonly=!0),this.mode="default",this.textSearchMode=!1,this.selectedWidgetsBundleAlias=null,this.attributeScope=this.defaultAttributeScope,this.pageLink.textSearch=null,this.textSearch.reset("",{emitEvent:!1}),this.viewsInited){this.paginator.pageIndex=0;const xe=this.sort.sortables.get("key");this.sort.active=xe.id,this.sort.direction="asc",q&&this.updateData(!0)}}reloadAttributes(){this.updateData(!0)}addAttribute(q){q&&q.stopPropagation(),this.dialog.open(f.AddAttributeDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,attributeScope:this.attributeScope}}).afterClosed().subscribe(pe=>{pe&&this.reloadAttributes()})}editAttribute(q,pe){if(q&&q.stopPropagation(),this.isClientSideTelemetryTypeMap.get(this.attributeScope))return;const xe=q.target||q.srcElement||q.currentTarget,Ge=new g.OverlayConfig;Ge.backdropClass="cdk-overlay-transparent-backdrop",Ge.hasBackdrop=!0;Ge.positionStrategy=this.overlay.position().flexibleConnectedTo(xe).withPositions([{originX:"end",originY:"center",overlayX:"end",overlayY:"center"}]);const Et=this.overlay.create(Ge);Et.backdropClick().subscribe(()=>{Et.dispose()});const Gt=[{provide:y.EDIT_ATTRIBUTE_VALUE_PANEL_DATA,useValue:{attributeValue:pe.value}},{provide:g.OverlayRef,useValue:Et}],Ot=e.Injector.create({parent:this.viewContainerRef.injector,providers:Gt}),Wt=Et.attach(new b.ComponentPortal(y.EditAttributeValuePanelComponent,this.viewContainerRef,Ot));Wt.onDestroy(()=>{if(null!==Wt.instance.result){const qt=Wt.instance.result,en={...pe};en.value=qt,this.attributeService.saveEntityAttributes(this.entityIdValue,this.attributeScope,[en]).subscribe(()=>{this.reloadAttributes()})}})}deleteTimeseries(q,pe){q&&q.stopPropagation();const xe=q.target||q.srcElement||q.currentTarget,Ge=new g.OverlayConfig({panelClass:"tb-filter-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0,maxWidth:488,width:"100%"});Ge.positionStrategy=this.overlay.position().flexibleConnectedTo(xe).withPositions([{originX:"start",originY:"top",overlayX:"end",overlayY:"top"}]);const Et=this.overlay.create(Ge);Et.backdropClick().subscribe(()=>{Et.dispose()});const Gt=[{provide:g.OverlayRef,useValue:Et}],Ot=e.Injector.create({parent:this.viewContainerRef.injector,providers:Gt}),Wt=Et.attach(new b.ComponentPortal(N.d,this.viewContainerRef,Ot));Wt.onDestroy(()=>{if(null!==Wt.instance.result){const qt=Wt.instance.result,en=pe?[pe]:this.dataSource.selection.selected,Tn=[];let tn=!1,Mn=!1,bn=null,rn=null,on=!0;switch(qt.strategy){case B.pD.DELETE_ALL_DATA:tn=!0;break;case B.pD.DELETE_ALL_DATA_EXCEPT_LATEST_VALUE:tn=!0,on=!1;break;case B.pD.DELETE_LATEST_VALUE:Mn=qt.rewriteLatest;for(const Ta of en)bn=Ta.lastUpdateTs,rn=bn+1,Tn.push(this.attributeService.deleteEntityTimeseries(this.entityIdValue,[Ta],tn,bn,rn,Mn,on));break;case B.pD.DELETE_ALL_DATA_FOR_TIME_PERIOD:bn=qt.startDateTime.getTime(),rn=qt.endDateTime.getTime(),Mn=qt.rewriteLatest}Tn.length?(0,k.p)(Tn).subscribe(()=>this.reloadAttributes()):this.attributeService.deleteEntityTimeseries(this.entityIdValue,en,tn,bn,rn,Mn,on).subscribe(()=>this.reloadAttributes())}})}deleteAttributes(q){q&&q.stopPropagation(),this.dataSource.selection.selected.length>0&&this.dialogService.confirm(this.translate.instant("attribute.delete-attributes-title",{count:this.dataSource.selection.selected.length}),this.translate.instant("attribute.delete-attributes-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(pe=>{pe&&this.attributeService.deleteEntityAttributes(this.entityIdValue,this.attributeScope,this.dataSource.selection.selected).subscribe(()=>{this.reloadAttributes()})})}deleteTelemetry(q){this.attributeScope===this.latestTelemetryTypes.LATEST_TELEMETRY?this.deleteTimeseries(q):this.deleteAttributes(q)}enterWidgetMode(){this.mode="widget",this.widgetsList=[],this.widgetsListCache=[],this.widgetsLoaded=!1,this.widgetBundleSet=!1,this.widgetsCarouselIndex=0,this.selectedWidgetsBundleAlias="tables";const q={id:this.utils.guid(),alias:this.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.entityIdValue)},pe={};pe[q.id]=q;const xe={getStateParams:()=>({})};this.aliasController=new ee.P(this.utils,this.entityService,this.translate,()=>xe,pe,{});const _t=this.attributeScope===B.bX.LATEST_TELEMETRY?B.yw.timeseries:B.yw.attribute;this.widgetDatasource={type:w.cT.entity,entityAliasId:q.id,dataKeys:[]};for(let Et=0;Et<this.dataSource.selection.selected.length;Et++){const Gt=this.dataSource.selection.selected[Et],Ot={name:Gt.key,label:Gt.key,type:_t,color:this.utils.getMaterialColor(Et),settings:{},_hash:Math.random()};this.widgetDatasource.dataKeys.push(Ot)}}onWidgetsCarouselIndexChanged(){if("widget"===this.mode)for(let q=0;q<this.widgetsList.length;q++)this.widgetsList[q].splice(0,this.widgetsList[q].length),q===this.widgetsCarouselIndex&&this.widgetsList[q].push(this.widgetsListCache[q][0])}onWidgetsBundleChanged(q){this.widgetBundleSet=!!q,"widget"===this.mode&&(this.widgetsList=[],this.widgetsListCache=[],this.widgetsCarouselIndex=0,q&&(this.widgetsLoaded=!1,this.widgetService.getBundleWidgetTypes(q.id.id).subscribe(pe=>{pe=pe.sort((xe,Ge)=>{let _t=w.t_[Ge.descriptor.type].localeCompare(w.t_[xe.descriptor.type]);return 0===_t&&(_t=Ge.createdTime-xe.createdTime),_t});for(const xe of pe){const Ge=(0,$.YF)(xe);if(Ge.type!==w.t_.static){const _t=2*Ge.sizeX,Et=2*Ge.sizeY,Gt=Math.floor(Math.max(0,(20-_t)/2)),Ot={typeFullFqn:Ge.fullFqn,type:Ge.type,sizeX:_t,sizeY:Et,row:0,col:Gt,config:JSON.parse(Ge.defaultConfig)};if(Ot.config.title=Ge.widgetName,Ot.config.datasources=[this.widgetDatasource],this.attributeScope===B.bX.LATEST_TELEMETRY&&Ge.type!==w.t_.rpc||Ge.type===w.t_.latest){const Wt=this.widgetsListCache.push([Ot]);this.widgetsList.push(1===Wt?[Ot]:[])}}}this.widgetsLoaded=!0,this.cd.markForCheck()})))}addWidgetToDashboard(){if("widget"===this.mode&&this.widgetsListCache.length>0){const q=this.widgetsListCache[this.widgetsCarouselIndex][0];this.dialog.open(Te.AddWidgetToDashboardDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,entityName:this.entityName,widget:(0,oe.Go)(q)}}).afterClosed()}}exitWidgetMode(){this.selectedWidgetsBundleAlias=null,this.mode="default"}static{this.\u0275fac=function(pe){return new(pe||Ce)(e.\u0275\u0275directiveInject(Z.Store),e.\u0275\u0275directiveInject(C.e),e.\u0275\u0275directiveInject(D.W),e.\u0275\u0275directiveInject(Y.TranslateService),e.\u0275\u0275directiveInject(ge.MatDialog),e.\u0275\u0275directiveInject(g.Overlay),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(S.o),e.\u0275\u0275directiveInject(be.T),e.\u0275\u0275directiveInject(_e.T),e.\u0275\u0275directiveInject(ve.N),e.\u0275\u0275directiveInject(Ee.C),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(ce.FormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ce,selectors:[["tb-attribute-table"]],viewQuery:function(pe,xe){if(1&pe&&(e.\u0275\u0275viewQuery(tt,5),e.\u0275\u0275viewQuery(h.MatPaginator,5),e.\u0275\u0275viewQuery(V.MatSort,5)),2&pe){let Ge;e.\u0275\u0275queryRefresh(Ge=e.\u0275\u0275loadQuery())&&(xe.searchInputField=Ge.first),e.\u0275\u0275queryRefresh(Ge=e.\u0275\u0275loadQuery())&&(xe.paginator=Ge.first),e.\u0275\u0275queryRefresh(Ge=e.\u0275\u0275loadQuery())&&(xe.sort=Ge.first)}},inputs:{disableAttributeScopeSelection:"disableAttributeScopeSelection",defaultAttributeScope:"defaultAttributeScope",active:"active",entityId:"entityId",entityName:"entityName"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:95,vars:98,consts:[["searchInput",""],["carousel",""],["carouselPrev",""],["carouselNext",""],["carouselDot",""],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],[1,"tb-entity-table-content","tb-outlined-border","flex","flex-1","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],[1,"title-container","flex","flex-row","items-center","justify-start","xs:flex-col","xs:items-start","xs:justify-center"],[1,"tb-entity-table-title"],["class","mat-block tb-attribute-scope",4,"ngIf"],[1,"flex-1"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["color","primary",1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools","xs:flex","xs:flex-row","xs:flex-wrap"],[1,"tb-entity-table-info"],["mat-icon-button","","matTooltipPosition","above",1,"button-widget-action",3,"click","disabled","matTooltip"],["mat-raised-button","","color","accent","matTooltipPosition","above",1,"button-widget-action",3,"click","disabled","matTooltip"],["translate",""],[1,"mat-toolbar-tools","gap-2","xs:flex","xs:flex-row","xs:flex-wrap"],[1,"flex","flex-1","flex-row","items-stretch","justify-start"],[1,"tb-details-subtitle"],["required","",1,"flex-1",2,"margin-left","5%",3,"ngModelChange","selectFirstBundle","selectBundleAlias","ngModel"],[1,"table-container","flex-1"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 40px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastUpdateTs"],["mat-sort-header","","style","min-width: 150px; max-width: 150px; width: 150px;",4,"matHeaderCellDef"],["matColumnDef","key"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["class","attribute",4,"matCellDef"],["matColumnDef","value"],["style","width: 60%",4,"matHeaderCellDef"],["class","tb-value-cell attribute",3,"click",4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",3,"mat-selected","click",4,"matRowDef","matRowDefColumns"],["translate","",1,"no-data-found","flex","items-center","justify-center"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize"],["class","carousel c-accent flex-1",3,"ngModel","data","infinite","ngModelChange",4,"ngIf"],["translate","","class","mat-headline-5 flex flex-1 items-center justify-center",4,"ngIf"],[1,"mat-block","tb-attribute-scope"],[3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","40px"],[3,"change","checked","indeterminate"],[3,"click","change","checked"],["mat-sort-header","",2,"min-width","150px","max-width","150px","width","150px"],["mat-sort-header","",2,"width","40%"],[1,"attribute"],[1,"flex","flex-row",2,"align-items","center"],[1,"ellipsis"],["tooltipPosition","above","icon","content_copy",1,"attribute-copy",3,"disabled","copyText","tooltipText"],[2,"width","60%"],[1,"tb-value-cell","attribute",3,"click"],[1,"flex","flex-1","flex-row",2,"align-items","center"],[1,"flex","flex-1","flex-row",2,"overflow","hidden","align-items","center"],["class","attribute-copy","tooltipPosition","above","icon","content_copy",3,"disabled","copyText","tooltipText","style",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"mat-row-select"],[1,"mat-row-select",3,"click"],[1,"carousel","c-accent","flex-1",3,"ngModelChange","ngModel","data","infinite"],["ngx-hm-carousel-container","",1,"content"],["class","item cursor-pointer","ngx-hm-carousel-item","",4,"ngFor","ngForOf"],["ngx-hm-carousel-item","",1,"item","cursor-pointer"],[1,"tb-absolute-fill",3,"aliasController","widgets","columns","isEdit","isMobileDisabled","isEditActionEnabled","isRemoveActionEnabled"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[1,"ball"],["translate","",1,"mat-headline-5","flex","flex-1","items-center","justify-center"]],template:function(pe,xe){if(1&pe){const Ge=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"mat-toolbar",7)(3,"div",8)(4,"div",9)(5,"span",10),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,gt,6,5,"mat-form-field",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"span",12),e.\u0275\u0275template(10,rt,5,6,"button",13)(11,Ze,5,6,"button",13),e.\u0275\u0275elementStart(12,"button",14),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.enterFilterMode())}),e.\u0275\u0275elementStart(15,"mat-icon"),e.\u0275\u0275text(16,"search"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"mat-toolbar",7)(18,"div",8)(19,"button",15),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementStart(21,"mat-icon"),e.\u0275\u0275text(22,"search"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"mat-form-field",12)(24,"mat-label"),e.\u0275\u0275text(25,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",16,0),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"button",17),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.exitFilterMode())}),e.\u0275\u0275elementStart(31,"mat-icon"),e.\u0275\u0275text(32,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(33,"mat-toolbar",18)(34,"div",19)(35,"span",20),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"span",12),e.\u0275\u0275elementStart(39,"button",21),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275pipe(41,"async"),e.\u0275\u0275listener("click",function(Et){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.deleteTelemetry(Et))}),e.\u0275\u0275elementStart(42,"mat-icon"),e.\u0275\u0275text(43,"delete"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"button",22),e.\u0275\u0275pipe(45,"translate"),e.\u0275\u0275pipe(46,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.enterWidgetMode())}),e.\u0275\u0275elementStart(47,"mat-icon"),e.\u0275\u0275text(48,"now_widgets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"span",23),e.\u0275\u0275text(50,"attribute.show-on-widget"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(51,"mat-toolbar",18)(52,"div",24)(53,"div",25)(54,"span",26),e.\u0275\u0275text(55),e.\u0275\u0275pipe(56,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"tb-widgets-bundle-select",27),e.\u0275\u0275listener("ngModelChange",function(Et){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.onWidgetsBundleChanged(Et))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"button",22),e.\u0275\u0275pipe(59,"translate"),e.\u0275\u0275pipe(60,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.addWidgetToDashboard())}),e.\u0275\u0275elementStart(61,"mat-icon"),e.\u0275\u0275text(62,"dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"span",23),e.\u0275\u0275text(64,"attribute.add-to-dashboard"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(65,"button",14),e.\u0275\u0275pipe(66,"translate"),e.\u0275\u0275pipe(67,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ge),e.\u0275\u0275resetView(xe.exitWidgetMode())}),e.\u0275\u0275elementStart(68,"mat-icon"),e.\u0275\u0275text(69,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(70,"div",28)(71,"table",29),e.\u0275\u0275elementContainerStart(72,30),e.\u0275\u0275template(73,je,4,6,"mat-header-cell",31)(74,$e,2,1,"mat-cell",32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(75,33),e.\u0275\u0275template(76,Oe,3,3,"mat-header-cell",34)(77,Fe,3,4,"mat-cell",32),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(78,35),e.\u0275\u0275template(79,le,3,3,"mat-header-cell",36)(80,we,7,11,"mat-cell",37),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(81,38),e.\u0275\u0275template(82,qe,3,3,"mat-header-cell",39)(83,Jt,11,7,"mat-cell",40),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(84,Vt,1,0,"mat-header-row",41)(85,hn,1,2,"mat-row",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"span",43),e.\u0275\u0275pipe(87,"async"),e.\u0275\u0275text(88),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(89,"mat-divider")(90,"mat-paginator",44),e.\u0275\u0275pipe(91,"async"),e.\u0275\u0275template(92,Ne,10,4,"ngx-hm-carousel",45)(93,it,2,0,"span",46)(94,Ue,2,0,"span",46),e.\u0275\u0275elementEnd()()}2&pe&&(e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden","default"!==xe.mode||xe.textSearchMode||!xe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,58,xe.telemetryTypeTranslationsMap.get(xe.attributeScope))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!xe.disableAttributeScopeSelection&&!xe.attributeScopeSelectionReadonly),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",xe.attributeScope!==xe.attributeScopeTypes.CLIENT_SCOPE),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!xe.isClientSideTelemetryTypeMap.get(xe.attributeScope)),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(13,60,"action.search")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,62,xe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden","default"!==xe.mode||!xe.textSearchMode||!xe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(20,64,"action.search")),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(28,66,"common.enter-search")),e.\u0275\u0275property("formControl",xe.textSearch),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(30,68,"action.close")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden","default"!==xe.mode||xe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(37,70,xe.attributeScope===xe.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.selected-telemetry":"attribute.selected-attributes",e.\u0275\u0275pureFunction1(95,Ye,xe.dataSource.selection.selected.length))," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",xe.attributeScope===xe.attributeScopeTypes.CLIENT_SCOPE),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(40,73,"action.delete")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(41,75,xe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(45,77,"attribute.show-on-widget")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(46,79,xe.isLoading$)),e.\u0275\u0275advance(7),e.\u0275\u0275classProp("!hidden","widget"!==xe.mode),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(56,81,"widgets-bundle.current")),e.\u0275\u0275advance(2),e.\u0275\u0275property("selectFirstBundle",!1)("selectBundleAlias",xe.selectedWidgetsBundleAlias)("ngModel",null),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!xe.widgetsList.length),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(59,83,"attribute.add-to-dashboard")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(60,85,xe.isLoading$)),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(66,87,"action.close")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(67,89,xe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden","widget"===xe.mode),e.\u0275\u0275advance(),e.\u0275\u0275property("dataSource",xe.dataSource)("matSortActive",xe.pageLink.sortOrder.property)("matSortDirection",xe.pageLink.sortDirection()),e.\u0275\u0275advance(13),e.\u0275\u0275property("matHeaderRowDef",xe.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("matRowDefColumns",xe.displayedColumns),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!1===e.\u0275\u0275pipeBind1(87,91,xe.dataSource.isEmpty())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(xe.attributeScope===xe.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.no-telemetry-text":"attribute.no-attributes-text"),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden","widget"===xe.mode),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden","widget"===xe.mode),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(91,93,xe.dataSource.total()))("pageIndex",xe.pageLink.page)("pageSize",xe.pageLink.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction0(97,Qe))("hidePageSize",xe.hidePageSize),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","widget"===xe.mode&&xe.widgetsList.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","widget"===xe.mode&&xe.widgetsLoaded&&0===xe.widgetsList.length&&xe.widgetBundleSet),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","widget"===xe.mode&&!xe.widgetBundleSet))},dependencies:[se.NgForOf,se.NgIf,J.WidgetsBundleSelectComponent,de.MatButton,de.MatIconButton,ye.MatCheckbox,re.MatIcon,ne.MatInput,ie.MatFormField,ie.MatLabel,Ae.MatToolbar,Pe.MatSelect,Be.MatOption,Ke.MatTooltip,Xe.MatTable,Xe.MatHeaderCellDef,Xe.MatHeaderRowDef,Xe.MatColumnDef,Xe.MatCellDef,Xe.MatRowDef,Xe.MatHeaderCell,Xe.MatCell,Xe.MatHeaderRow,Xe.MatRow,h.MatPaginator,V.MatSort,V.MatSortHeader,at.MatDivider,ce.DefaultValueAccessor,ce.NgControlStatus,ce.RequiredValidator,ce.NgModel,ce.FormControlDirective,bt.oM,bt.bx,Y.TranslateDirective,Mt.CopyButtonComponent,ze.DashboardComponent,se.AsyncPipe,se.DatePipe,vt.TbJsonPipe,Y.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content.tb-outlined-border[_ngcontent-%COMP%]{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .mat-mdc-table[_ngcontent-%COMP%]{table-layout:fixed;min-width:450px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .button-widget-action[_ngcontent-%COMP%]{margin-left:auto;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .attribute-copy[_ngcontent-%COMP%]{visibility:hidden;transition:visibility .1s}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]:hover   .attribute-copy[_ngcontent-%COMP%]{visibility:visible}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell .mat-icon{height:24px;width:24px;font-size:24px;color:#757575}[_nghost-%COMP%]     .carousel .aniT{transition:all 1s linear}[_nghost-%COMP%]     .carousel .transition{transition:all .3s ease-in-out!important}[_nghost-%COMP%]     .carousel .content{display:flex;height:100%}[_nghost-%COMP%]     .carousel .content .item{position:relative}[_nghost-%COMP%]     .carousel .direction{width:60px}[_nghost-%COMP%]     .carousel .ball{width:10px;height:10px;border-radius:50%;background:#000;border:2px solid;opacity:.5}[_nghost-%COMP%]     .carousel .ball.visible{opacity:1}[_nghost-%COMP%]     .carousel ul.indicators{pointer-events:none}[_nghost-%COMP%]     .carousel ul.indicators li{pointer-events:all}'],changeDetection:0})}}},89392:(Re,X,n)=>{"use strict";n.d(X,{d:()=>m});var e=n(93953),t=n(10320),c=n(53244),h=n(89417),V=n(18530),S=n(56977),G=n(47987),K=n(60177),H=n(88834),k=n(99213),Q=n(59042),z=n(53719),L=n(55911),B=n(82798),I=n(86600),U=n(30450),F=n(39604),a=n(73955);function O(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p){const T=v.$implicit,C=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",T),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,C.strategiesTranslationsMap.get(T))," ")}}function P(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"div",16)(1,"mat-form-field",6)(2,"mat-label",7),e.\u0275\u0275text(3,"attribute.delete-timeseries.start-time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-datetimepicker-toggle",17)(5,"mat-datetimepicker",18,0)(7,"input",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",6)(9,"mat-label",7),e.\u0275\u0275text(10,"attribute.delete-timeseries.ends-on"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"mat-datetimepicker-toggle",17)(12,"mat-datetimepicker",18,1)(14,"input",20),e.\u0275\u0275elementEnd()()),2&p){const T=e.\u0275\u0275reference(6),C=e.\u0275\u0275reference(13);e.\u0275\u0275advance(4),e.\u0275\u0275property("for",T),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",T),e.\u0275\u0275advance(4),e.\u0275\u0275property("for",C),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",C)}}function A(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-slide-toggle",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"attribute.delete-timeseries.rewrite-latest-value")," "))}new e.InjectionToken("DeleteTimeseriesPanelData");class m{constructor(v,T){this.overlayRef=v,this.fb=T,this.result=null,this.strategiesTranslationsMap=t.hP,this.destroy$=new V.B}ngOnInit(){const v=new Date;this.deleteTimeseriesFormGroup=this.fb.group({strategy:[t.pD.DELETE_ALL_DATA],startDateTime:[{value:new Date(v.getFullYear(),v.getMonth()-1,v.getDate()),disabled:!0},h.Validators.required],endDateTime:[{value:v,disabled:!0},h.Validators.required],rewriteLatest:[!0]}),this.deleteTimeseriesFormGroup.get("strategy").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(T=>{T===t.pD.DELETE_ALL_DATA_FOR_TIME_PERIOD?(this.deleteTimeseriesFormGroup.get("startDateTime").enable({onlySelf:!0,emitEvent:!1}),this.deleteTimeseriesFormGroup.get("endDateTime").enable({onlySelf:!0,emitEvent:!1})):(this.deleteTimeseriesFormGroup.get("startDateTime").disable({onlySelf:!0,emitEvent:!1}),this.deleteTimeseriesFormGroup.get("endDateTime").disable({onlySelf:!0,emitEvent:!1}))}),this.deleteTimeseriesFormGroup.get("startDateTime").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(T=>this.onStartDateTimeChange(T)),this.deleteTimeseriesFormGroup.get("endDateTime").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(T=>this.onEndDateTimeChange(T))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}delete(){this.deleteTimeseriesFormGroup.valid?(this.result=this.deleteTimeseriesFormGroup.value,this.overlayRef.dispose()):this.deleteTimeseriesFormGroup.markAllAsTouched()}cancel(){this.overlayRef.dispose()}isPeriodStrategy(){return this.deleteTimeseriesFormGroup.get("strategy").value===t.pD.DELETE_ALL_DATA_FOR_TIME_PERIOD}isDeleteLatestStrategy(){return this.deleteTimeseriesFormGroup.get("strategy").value===t.pD.DELETE_LATEST_VALUE}onStartDateTimeChange(v){if(v){const T=this.deleteTimeseriesFormGroup.get("endDateTime").value.getTime();v.getTime()>=T?this.deleteTimeseriesFormGroup.get("startDateTime").patchValue(new Date(T-c.pY),{onlySelf:!0,emitEvent:!1}):this.deleteTimeseriesFormGroup.get("startDateTime").patchValue(v,{onlySelf:!0,emitEvent:!1})}}onEndDateTimeChange(v){if(v){const T=this.deleteTimeseriesFormGroup.get("startDateTime").value.getTime();v.getTime()<=T?this.deleteTimeseriesFormGroup.get("endDateTime").patchValue(new Date(T+c.pY),{onlySelf:!0,emitEvent:!1}):this.deleteTimeseriesFormGroup.get("endDateTime").patchValue(v,{onlySelf:!0,emitEvent:!1})}}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(G.OverlayRef),e.\u0275\u0275directiveInject(h.FormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-delete-timeseries-panel"]],decls:24,vars:14,consts:[["startDateTimePicker",""],["endDatePicker",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],[1,"mat-content","mat-padding","tb-form-settings",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["formControlName","strategy"],[3,"value",4,"ngFor","ngForOf"],["class","tb-select-interval",4,"ngIf"],["class","tb-slide-toggle","formControlName","rewriteLatest",4,"ngIf"],[1,"tb-panel-actions","flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-button","","mat-raised-button","","color","primary","type","button",3,"click","disabled"],[3,"value"],[1,"tb-select-interval"],["matPrefix","",3,"for"],["type","datetime","openOnFocus","true"],["required","","matInput","","formControlName","startDateTime",3,"matDatetimepicker"],["required","","matInput","","formControlName","endDateTime",3,"matDatetimepicker"],["formControlName","rewriteLatest",1,"tb-slide-toggle"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-toolbar")(1,"h2"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",2),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",4),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"form",5)(9,"mat-form-field",6)(10,"mat-label",7),e.\u0275\u0275text(11,"attribute.delete-timeseries.strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",8),e.\u0275\u0275template(13,O,3,4,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,P,15,4,"div",10)(15,A,3,3,"mat-slide-toggle",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",12),e.\u0275\u0275element(17,"span",2),e.\u0275\u0275elementStart(18,"button",13),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",14),e.\u0275\u0275listener("click",function(){return C.delete()}),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd()()),2&T&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,8,"attribute.delete-timeseries.delete-strategy")),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",C.deleteTimeseriesFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",C.strategiesTranslationsMap.keys()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C.isPeriodStrategy()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C.isPeriodStrategy()||C.isDeleteLatestStrategy()),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,10,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",C.deleteTimeseriesFormGroup.invalid),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,12,"action.apply")," "))},dependencies:[K.NgForOf,K.NgIf,H.MatButton,H.MatIconButton,k.MatIcon,Q.MatInput,z.MatFormField,z.MatLabel,z.MatPrefix,L.MatToolbar,B.MatSelect,I.MatOption,U.MatSlideToggle,F.MatDatetimepickerComponent,F.MatDatetimepickerToggleComponent,F.MatDatetimepickerInputDirective,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,a.TranslateDirective,a.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:none}[_nghost-%COMP%]   .tb-form-settings[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:0}[_nghost-%COMP%]   .tb-select-interval[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}@media screen and (max-width: 599px){[_nghost-%COMP%]   .tb-select-interval[_ngcontent-%COMP%]{flex-direction:column;gap:0}}[_nghost-%COMP%]   .tb-slide-toggle[_ngcontent-%COMP%]{margin-bottom:8px}']})}}},79993:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EDIT_ATTRIBUTE_VALUE_PANEL_DATA:()=>Q,EditAttributeValuePanelComponent:()=>z});var e=n(93953),t=n(86600),c=n(89417),h=n(69749),V=n(9310),S=n(47987),G=n(77674),K=n(88834),H=n(60177),k=n(73955);const Q=new e.InjectionToken("EditAttributeValuePanelData");class z extends h.H{constructor(B,I,U,F,a){super(B),this.store=B,this.data=I,this.errorStateMatcher=U,this.overlayRef=F,this.fb=a,this.result=null,this.submitted=!1}ngOnInit(){this.attributeFormGroup=this.fb.group({value:[this.data.attributeValue,[c.Validators.required]]})}isErrorState(B,I){const U=this.errorStateMatcher.isErrorState(B,I),F=!!(B&&B.invalid&&this.submitted);return U||F}invalid(){const B=this.attributeFormGroup.get("value").value;return!Array.isArray(B)&&this.attributeFormGroup.invalid}cancel(){this.overlayRef.dispose()}update(){this.submitted=!0,this.result=this.attributeFormGroup.get("value").value,this.overlayRef.dispose()}static{this.\u0275fac=function(I){return new(I||z)(e.\u0275\u0275directiveInject(V.Store),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(S.OverlayRef),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["tb-edit-attribute-value-panel"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:z}]),e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:16,consts:[[1,"mat-elevation-z1",2,"padding","5px","width","375px",3,"ngSubmit","formGroup"],[3,"disabled"],["formControlName","value","requiredText","attribute.value-required"],[1,"tb-panel-actions","flex","flex-row"],[1,"flex-1"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(I,U){1&I&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return U.update()}),e.\u0275\u0275elementStart(1,"fieldset",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275element(3,"tb-value-input",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275element(5,"span",4),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275listener("click",function(){return U.cancel()}),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",6),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()()()),2&I&&(e.\u0275\u0275property("formGroup",U.attributeFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,6,U.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(7,8,U.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,10,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(11,12,U.isLoading$)||U.invalid()||!U.attributeFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,14,"action.update")," "))},dependencies:[G.ValueInputComponent,K.MatButton,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,c.FormGroupDirective,c.FormControlName,H.AsyncPipe,k.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{background-color:#f9f9f9}']})}}},69505:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AuditLogDetailsDialogComponent:()=>I});var e=n(93953),t=n(34006),c=n(57713),h=n(56542),V=n(3408),S=n(9310),G=n(7901),K=n(88834),H=n(99213),k=n(55911),Q=n(73955),z=n(60177);const L=["actionDataEditor"],B=["failureDetailsEditor"];class I extends h.m{constructor(F,a,O,P,A){super(F,a,P),this.store=F,this.router=a,this.data=O,this.dialogRef=P,this.renderer=A,this.aceEditors=[]}ngOnInit(){this.auditLog=this.data.auditLog,this.displayFailureDetails=this.auditLog.actionStatus===c.VI.FAILURE,this.actionData=this.auditLog.actionData?JSON.stringify(this.auditLog.actionData,null,2):"",this.actionFailureDetails=this.auditLog.actionFailureDetails,this.createEditor(this.actionDataEditorElmRef,this.actionData),this.displayFailureDetails&&this.createEditor(this.failureDetailsEditorElmRef,this.actionFailureDetails)}ngOnDestroy(){this.aceEditors.forEach(F=>F.destroy()),super.ngOnDestroy()}createEditor(F,a){const O=F.nativeElement;let P={mode:"ace/mode/java",theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};P={...P,enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},(0,V.eB)().subscribe(u=>{const m=u.edit(O,P);this.aceEditors.push(m),m.session.setUseWrapMode(!1),m.setValue(a,-1),this.updateEditorSize(O,a,m)})}updateEditorSize(F,a,O){let P=200,A=600;if(a&&a.length>0){const u=a.split("\n");P=16*u.length+16;let m=0;u.forEach(p=>{const T=p.replace(/\t/g,"    ").replace(/\n/g,"").length;m=Math.max(m,T)}),A=8*m+16}this.renderer.setStyle(F,"minHeight",P.toString()+"px"),this.renderer.setStyle(F,"height",P.toString()+"px"),this.renderer.setStyle(F,"width",A.toString()+"px"),O.resize()}static{this.\u0275fac=function(a){return new(a||I)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(e.Renderer2))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["tb-audit-log-details-dialog"]],viewQuery:function(a,O){if(1&a&&(e.\u0275\u0275viewQuery(L,7),e.\u0275\u0275viewQuery(B,7)),2&a){let P;e.\u0275\u0275queryRefresh(P=e.\u0275\u0275loadQuery())&&(O.actionDataEditorElmRef=P.first),e.\u0275\u0275queryRefresh(P=e.\u0275\u0275loadQuery())&&(O.failureDetailsEditorElmRef=P.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:22,vars:12,consts:[["actionDataEditor",""],["failureDetailsEditor",""],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","",1,"flex","flex-col"],["translate","",1,"tb-title","no-padding"],[1,"tb-audit-log-action-data"],[2,"min-height","30px"],[1,"tb-audit-log-failure-details"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(a,O){1&a&&(e.\u0275\u0275elementStart(0,"mat-toolbar",2)(1,"h2",3),e.\u0275\u0275text(2,"audit-log.audit-log-details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",4),e.\u0275\u0275elementStart(4,"button",5)(5,"mat-icon",6),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",7)(8,"label",8),e.\u0275\u0275text(9,"audit-log.action-data"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"div",9,0)(12,"span",10),e.\u0275\u0275elementStart(13,"label",8),e.\u0275\u0275text(14,"audit-log.failure-details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"div",11,1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",12)(18,"button",13),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()()),2&a&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("mat-dialog-close",!1),e.\u0275\u0275advance(9),e.\u0275\u0275classProp("!hidden",!O.displayFailureDetails),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!O.displayFailureDetails),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(19,8,O.isLoading$))("mat-dialog-close",!1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,10,"action.close")," "))},dependencies:[K.MatButton,K.MatIconButton,H.MatIcon,k.MatToolbar,t.MatDialogClose,t.MatDialogActions,t.MatDialogContent,Q.TranslateDirective,z.AsyncPipe,Q.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-audit-log-action-data[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-audit-log-failure-details[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px;border:1px solid #c0c0c0}']})}}},97261:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AuditLogTableComponent:()=>O});var e=n(93953),t=n(33720),c=n(57713),S=(n(36424),n(57021),n(12054)),G=n(25967),K=n(67496),H=n(69505);class k extends S.M7{constructor(A,u,m,p,v=c.xY.TENANT,T=null,C=null,_=null,E=!0,f=!1){super(),this.auditLogService=A,this.translate=u,this.datePipe=m,this.dialog=p,this.auditLogMode=v,this.entityId=T,this.userId=C,this.customerId=_,this.loadDataOnInit=E,this.tableTitle="",this.useTimePageLink=!0,this.pageMode=f,this.detailsPanelEnabled=!1,this.selectionEnabled=!1,this.searchEnabled=!0,this.addEnabled=!1,this.entitiesDeleteEnabled=!1,this.actionsColumnTitle="audit-log.details",this.entityTranslations={noEntities:"audit-log.no-audit-logs-prompt",search:"audit-log.search"},this.entityResources={},this.entitiesFetchFunction=g=>this.fetchAuditLogs(g),this.defaultSortOrder={property:"createdTime",direction:K.O.DESC},this.columns.push(new S.Qr("createdTime","audit-log.timestamp",this.datePipe,"150px")),this.auditLogMode!==c.xY.ENTITY&&this.columns.push(new S.KK("entityType","audit-log.entity-type","20%",g=>this.getEntityTypeTranslation(g.entityId.entityType)),new S.KK("entityName","audit-log.entity-name","20%")),this.auditLogMode!==c.xY.USER&&this.columns.push(new S.KK("userName","audit-log.user","33%")),this.columns.push(new S.KK("actionType","audit-log.type","33%",g=>this.getActionTypeTranslation(g.actionType)),new S.KK("actionStatus","audit-log.status","33%",g=>this.getActionStatusTranslation(g.actionStatus))),this.cellActionDescriptors.push({name:this.translate.instant("audit-log.details"),icon:"more_horiz",isEnabled:()=>!0,onAction:(g,y)=>this.showAuditLogDetails(y)})}getEntityTypeTranslation(A){return G.Mi.has(A)&&G.Mi.get(A).type?this.translate.instant(G.Mi.get(A).type):A}getActionTypeTranslation(A){return c.xf.has(A)?this.translate.instant(c.xf.get(A)):A}getActionStatusTranslation(A){return c.BC.has(A)?this.translate.instant(c.BC.get(A)):A}fetchAuditLogs(A){switch(this.auditLogMode){case c.xY.TENANT:return this.auditLogService.getAuditLogs(A);case c.xY.ENTITY:return this.auditLogService.getAuditLogsByEntityId(this.entityId,A);case c.xY.USER:return this.auditLogService.getAuditLogsByUserId(this.userId.id,A);case c.xY.CUSTOMER:return this.auditLogService.getAuditLogsByCustomerId(this.customerId.id,A)}}showAuditLogDetails(A){this.dialog.open(H.AuditLogDetailsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{auditLog:A}})}}var Q=n(8968),z=n(9437),L=n(63729),B=n(73955),I=n(60177),U=n(34006),F=n(9310),a=n(7901);class O{set active(A){this.activeValue!==A&&(this.activeValue=A,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))}set entityId(A){this.entityIdValue=A,this.auditLogTableConfig&&this.auditLogTableConfig.entityId!==A&&(this.auditLogTableConfig.entityId=A,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}set userId(A){this.userIdValue=A,this.auditLogTableConfig&&this.auditLogTableConfig.userId!==A&&(this.auditLogTableConfig.userId=A,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}set customerId(A){this.customerIdValue=A,this.auditLogTableConfig&&this.auditLogTableConfig.customerId!==A&&(this.auditLogTableConfig.customerId=A,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}constructor(A,u,m,p,v,T){this.auditLogService=A,this.translate=u,this.datePipe=m,this.dialog=p,this.store=v,this.route=T,this.activeValue=!1,this.dirtyValue=!1}ngOnInit(){let A=this.activeValue;this.dirtyValue=!this.activeValue,this.auditLogMode||((0,L.rx)(this.store).authority===z.s.TENANT_ADMIN&&(this.auditLogMode=c.xY.TENANT),A=!0);const u=!!this.route.snapshot.data.isPage;this.auditLogTableConfig=new k(this.auditLogService,this.translate,this.datePipe,this.dialog,this.auditLogMode,this.entityIdValue,this.userIdValue,this.customerIdValue,A,u)}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(t.t),e.\u0275\u0275directiveInject(B.TranslateService),e.\u0275\u0275directiveInject(I.DatePipe),e.\u0275\u0275directiveInject(U.MatDialog),e.\u0275\u0275directiveInject(F.Store),e.\u0275\u0275directiveInject(a.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-audit-log-table"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(Q.EntitiesTableComponent,7),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.entitiesTable=p.first)}},inputs:{auditLogMode:"auditLogMode",detailsMode:"detailsMode",active:"active",entityId:"entityId",userId:"userId",customerId:"customerId"},decls:1,vars:3,consts:[[3,"entitiesTableConfig"]],template:function(u,m){1&u&&e.\u0275\u0275element(0,"tb-entities-table",0),2&u&&(e.\u0275\u0275classProp("tb-details-mode",m.detailsMode),e.\u0275\u0275property("entitiesTableConfig",m.auditLogTableConfig))},dependencies:[Q.EntitiesTableComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]     tb-entities-table.tb-details-mode .mat-drawer-container{background-color:#fff}']})}}},67792:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AddWidgetDialogComponent:()=>v});var e=n(93953),t=n(34006),c=n(56542),h=n(57665),V=n(27997),S=n(40248),G=n(9310),K=n(7901),H=n(73955),k=n(86600),Q=n(89417),z=n(60177),L=n(37441),B=n(88834),I=n(99213),U=n(55911),F=n(29772),a=n(18409),O=n(89466);const P=["widgetConfigComponent"],A=()=>({standalone:!0});function u(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-toggle-select",18),e.\u0275\u0275twoWayListener("ngModelChange",function(f){e.\u0275\u0275restoreView(_);const g=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(g.widgetConfigMode,f)||(g.widgetConfigMode=f),e.\u0275\u0275resetView(f)}),e.\u0275\u0275elementStart(1,"tb-toggle-option",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-toggle-option",20),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}if(2&T){const _=e.\u0275\u0275nextContext();e.\u0275\u0275twoWayProperty("ngModel",_.widgetConfigMode),e.\u0275\u0275property("ngModelOptions",e.\u0275\u0275pureFunction0(8,A)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"widget.basic-mode")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,6,"widget.advanced-mode"))}}function m(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-widget-preview",21)(1,"div",22)(2,"button",23),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.previewMode=!1)}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"chevron_left"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()()}if(2&T){const _=e.\u0275\u0275nextContext();e.\u0275\u0275property("aliasController",_.aliasController)("stateController",_.stateController)("dashboardTimewindow",_.dashboard.configuration.timewindow)("widget",_.widget)("widgetConfig",_.widgetFormGroup.get("widgetConfig").value.config)("previewWidth",_.widgetConfig.typeParameters.previewWidth)("previewHeight",_.widgetConfig.typeParameters.previewHeight),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,8,"action.back")," ")}}function p(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",24),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.previewMode=!0)}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&T){const _=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!_.widgetFormGroup.valid),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"widget-config.preview")," ")}}class v extends c.m{get widgetConfigMode(){return this.widgetConfigComponent?.widgetConfigMode||this.initialWidgetConfigMode}set widgetConfigMode(C){this.widgetConfigComponent.setWidgetConfigMode(C),this.hideHeader=this.widgetConfigComponent?.widgetConfigMode===h._Q.basic}constructor(C,_,E,f,g,y,b){super(C,_,y),this.store=C,this.router=_,this.translate=E,this.data=f,this.errorStateMatcher=g,this.dialogRef=y,this.fb=b,this.showLayoutConfig=!0,this.isDefaultBreakpoint=!0,this.previewMode=!1,this.hideHeader=!1,this.submitted=!1,this.dashboard=this.data.dashboard,this.aliasController=this.data.aliasController,this.stateController=this.data.stateController,this.widget=this.data.widget,this.showLayoutConfig=this.data.showLayoutConfig,this.isDefaultBreakpoint=this.data.isDefaultBreakpoint;const D=this.data.widgetInfo,w=D.typeSettingsSchema||D.settingsSchema,ee=D.typeDataKeySettingsSchema||D.dataKeySettingsSchema,_e=D.typeLatestDataKeySettingsSchema||D.latestDataKeySettingsSchema,ve=D.typeParameters,Ee=ve?.dataKeySettingsFunction,$=D.actionSources,be=!(0,V.O9)(D.typeParameters)||!D.typeParameters.useCustomDatasources;let Te,oe,R;Te=w&&""!==w?(0,V.Kg)(w)?JSON.parse(w):w:{},oe=ee&&""!==ee?(0,V.Kg)(ee)?JSON.parse(ee):ee:{},R=_e&&""!==_e?(0,V.Kg)(_e)?JSON.parse(_e):_e:{},this.widgetConfig={widgetName:D.widgetName,config:this.widget.config,layout:{resizable:this.widget.config.resizable,preserveAspectRatio:this.widget.config.preserveAspectRatio,mobileHide:this.widget.config.mobileHide,desktopHide:this.widget.config.desktopHide,mobileOrder:this.widget.config.mobileOrder,mobileHeight:this.widget.config.mobileHeight},widgetType:this.widget.type,typeParameters:ve,actionSources:$,isDataEnabled:be,settingsSchema:Te,dataKeySettingsSchema:oe,latestDataKeySettingsSchema:R,dataKeySettingsFunction:Ee,settingsDirective:D.settingsDirective,dataKeySettingsDirective:D.dataKeySettingsDirective,latestDataKeySettingsDirective:D.latestDataKeySettingsDirective,hasBasicMode:!!(0,V.f1)(D.hasBasicMode)&&D.hasBasicMode,basicModeDirective:D.basicModeDirective},this.widgetConfig.hasBasicMode&&this.widgetConfig.config?.configMode===h._Q.basic?(this.hideHeader=!0,this.initialWidgetConfigMode=h._Q.basic):this.initialWidgetConfigMode=h._Q.advanced,this.widgetFormGroup=this.fb.group({widgetConfig:[this.widgetConfig,[]]})}ngOnInit(){}isErrorState(C,_){const E=this.errorStateMatcher.isErrorState(C,_),f=!!(C&&C.invalid&&this.submitted);return E||f}helpLinkIdForWidgetType(){let C="widgetsConfig";return this.widget&&this.widget.type&&(C=h.WT.get(this.widget.type).configHelpLinkId),C}cancel(){this.dialogRef.close(null)}add(){this.submitted=!0;const C=this.widgetFormGroup.get("widgetConfig").value;this.widget.config=C.config,this.widget.config.mobileOrder=C.layout.mobileOrder,this.widget.config.mobileHeight=C.layout.mobileHeight,this.widget.config.mobileHide=C.layout.mobileHide,this.widget.config.desktopHide=C.layout.desktopHide,this.widget.config.preserveAspectRatio=C.layout.preserveAspectRatio,this.widget.config.resizable=C.layout.resizable,this.dialogRef.close(this.widget)}static{this.\u0275fac=function(_){return new(_||v)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(H.TranslateService),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(k.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(Q.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["tb-add-widget-dialog"]],viewQuery:function(_,E){if(1&_&&e.\u0275\u0275viewQuery(P,5),2&_){let f;e.\u0275\u0275queryRefresh(f=e.\u0275\u0275loadQuery())&&(E.widgetConfigComponent=f.first)}},features:[e.\u0275\u0275ProvidersFeature([]),e.\u0275\u0275InheritDefinitionFeature],decls:27,vars:23,consts:[["widgetConfigComponent",""],[1,"tb-add-widget-dialog",3,"formGroup"],["color","primary"],[1,"tb-add-widget-toolbar"],[1,"flex-1"],[1,"flex","flex-row","items-center","justify-start","gt-xs:gap-4",2,"min-width","fit-content"],["appearance","fill-invert","selectMediaBreakpoint","xs",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["isAdd","","formControlName","widgetConfig",1,"tb-absolute-fill",3,"aliasController","functionsOnly","dashboard","widget","hideHeader","showLayoutConfig","isDefaultBreakpoint"],["class","tb-absolute-fill",3,"aliasController","stateController","dashboardTimewindow","widget","widgetConfig","previewWidth","previewHeight",4,"ngIf"],["mat-dialog-actions","",1,"flex","items-center","justify-between"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],[1,"flex","flex-row","gap-2"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],["appearance","fill-invert","selectMediaBreakpoint","xs",3,"ngModelChange","ngModel","ngModelOptions"],["value","basic"],["value","advanced"],[1,"tb-absolute-fill",3,"aliasController","stateController","dashboardTimewindow","widget","widgetConfig","previewWidth","previewHeight"],[1,"tb-preview-panel-content"],["mat-button","",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"]],template:function(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1)(1,"mat-toolbar",2)(2,"div",3)(3,"h2"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",4),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275template(9,u,7,9,"tb-toggle-select",6),e.\u0275\u0275element(10,"div",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"button",8),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(f),e.\u0275\u0275resetView(E.cancel())}),e.\u0275\u0275elementStart(12,"mat-icon",9),e.\u0275\u0275text(13,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",10),e.\u0275\u0275element(15,"tb-widget-config",11,0),e.\u0275\u0275template(17,m,7,10,"tb-widget-preview",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",13)(19,"button",14),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(f),e.\u0275\u0275resetView(E.cancel())}),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",15),e.\u0275\u0275template(23,p,3,4,"button",16),e.\u0275\u0275elementStart(24,"button",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(f),e.\u0275\u0275resetView(E.add())}),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275elementEnd()()()()}2&_&&(e.\u0275\u0275property("formGroup",E.widgetFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(5,17,"widget.add"),":"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(E.data.widgetInfo.widgetName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.widgetConfig.hasBasicMode),e.\u0275\u0275advance(),e.\u0275\u0275property("tb-help",E.helpLinkIdForWidgetType()),e.\u0275\u0275advance(5),e.\u0275\u0275property("aliasController",E.aliasController)("functionsOnly",!1)("dashboard",E.dashboard)("widget",E.widget)("hideHeader",E.hideHeader)("showLayoutConfig",E.showLayoutConfig)("isDefaultBreakpoint",E.isDefaultBreakpoint),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.previewMode),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,19,"action.cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!E.previewMode),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",!E.widgetFormGroup.valid),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,21,"action.add")," "))},dependencies:[z.NgIf,L.HelpComponent,B.MatButton,B.MatIconButton,I.MatIcon,U.MatToolbar,t.MatDialogActions,t.MatDialogContent,Q.\u0275NgNoValidate,Q.NgControlStatus,Q.NgControlStatusGroup,Q.NgModel,Q.FormGroupDirective,Q.FormControlName,F.ToggleOption,a.ToggleSelectComponent,S.WidgetConfigComponent,O.G,H.TranslatePipe],styles:['@charset "UTF-8";.tb-add-widget-dialog .mat-mdc-dialog-content{padding:0;position:relative}@media screen and (min-width: 600px){.tb-add-widget-dialog{width:900px}.tb-add-widget-dialog .mat-mdc-dialog-content{height:900px}}.tb-add-widget-dialog .tb-add-widget-toolbar{flex:1;min-width:0;display:flex;flex-direction:row;place-content:center flex-start;align-items:center;gap:8px}\n'],encapsulation:2})}}},65700:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardImageDialogComponent:()=>g});var e=n(93953),t=n(34006),c=n(89417),h=n(56542),V=n(85568),S=n(7239),G=n.n(S),K=n(97647),H=n(96354),k=n(84412),Q=n(19724),z=n(27997),L=n(9310),B=n(7901),I=n(345),U=n(60177),F=n(88834),a=n(99213),O=n(67575),P=n(59042),A=n(53719),u=n(55911),m=n(9183),p=n(73955),v=n(86763),T=n(68762);function C(y,b){1&y&&e.\u0275\u0275element(0,"mat-progress-bar",27)}function _(y,b){1&y&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"dashboard.no-image")))}function E(y,b){if(1&y&&(e.\u0275\u0275element(0,"img",28),e.\u0275\u0275pipe(1,"image"),e.\u0275\u0275pipe(2,"async")),2&y){const D=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",e.\u0275\u0275pipeBind1(2,3,e.\u0275\u0275pipeBind1(1,1,D.imageUrl)),e.\u0275\u0275sanitizeUrl)}}function f(y,b){1&y&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"mat-progress-spinner",30),e.\u0275\u0275elementEnd())}class g extends h.m{constructor(b,D,w,ee,_e,ve,Ee){super(b,D,ee),this.store=b,this.router=D,this.data=w,this.dialogRef=ee,this.dashboardService=_e,this.sanitizer=ve,this.fb=Ee,this.takingScreenshotSubject=new k.t(!1),this.takingScreenshot$=this.takingScreenshotSubject.asObservable().pipe((0,K.u)()),this.dashboardId=this.data.dashboardId,this.updateImage(this.data.currentImage),this.dashboardElement=this.data.dashboardElement;this.dashboardElement.getBoundingClientRect();this.dashboardRectFormGroup=this.fb.group({left:[0,[c.Validators.min(0),c.Validators.max(100)]],top:[0,[c.Validators.min(0),c.Validators.max(100)]],right:[100,[c.Validators.min(0),c.Validators.max(100)]],bottom:[100,[c.Validators.min(0),c.Validators.max(100)]]}),this.dashboardImageFormGroup=this.fb.group({dashboardImage:[this.data.currentImage]}),this.dashboardImageFormGroup.get("dashboardImage").valueChanges.subscribe(be=>{this.updateImage(be)})}convertUserPercent(b,D){let w;return w=(0,z.Et)(b)?Math.max(0,Math.min(100,b))/100:D,w}takeScreenShot(){this.takingScreenshotSubject.next(!0);const b=this.dashboardElement.getBoundingClientRect(),D=this.convertUserPercent(this.dashboardRectFormGroup.get("left").value,0),w=this.convertUserPercent(this.dashboardRectFormGroup.get("top").value,0),ee=this.convertUserPercent(this.dashboardRectFormGroup.get("right").value,100),_e=this.convertUserPercent(this.dashboardRectFormGroup.get("bottom").value,100),ve=D*b.width,Ee=w*b.height,$=ee*b.width,be=_e*b.height,Te=b.left+ve,oe=b.top+Ee;let R=$-ve,N=be-Ee;R=Math.max(1,R),N=Math.max(1,N),(0,Q.H)(G()(this.dashboardElement,{logging:!1,useCORS:!0,foreignObjectRendering:!1,scale:512/R,x:Te,y:oe,width:R,height:N})).pipe((0,H.T)(Z=>Z.toDataURL())).subscribe(Z=>{this.updateImage(Z),this.dashboardImageFormGroup.patchValue({dashboardImage:Z},{emitEvent:!1}),this.dashboardImageFormGroup.markAsDirty(),this.takingScreenshotSubject.next(!1)},Z=>{this.takingScreenshotSubject.next(!1)})}cancel(){this.dialogRef.close(null)}save(){this.dashboardService.getDashboard(this.dashboardId.id).subscribe(b=>{const D=this.dashboardImageFormGroup.get("dashboardImage").value;b.image=D,this.dashboardService.saveDashboard(b).subscribe(()=>{this.dialogRef.close({image:D})})})}updateImage(b){this.imageUrl=b}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(V.I),e.\u0275\u0275directiveInject(I.DomSanitizer),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["tb-dashboard-image-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:58,vars:42,consts:[["elseBlock",""],[3,"ngSubmit"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","",2,"position","relative"],[1,"flex","flex-col","items-stretch","justify-center","gap-2",3,"disabled"],[1,"flex","flex-col","items-center","justify-center","gap-2",3,"formGroup"],[1,"rect-field"],["matInput","","formControlName","top","type","number","step","1","min","0","max","100"],[1,"flex","flex-row","items-center","justify-center","gap-2"],["matInput","","formControlName","left","type","number","step","1","min","0","max","100"],[1,"tb-image-preview-container"],[4,"ngIf","ngIfElse"],["matInput","","formControlName","right","type","number","step","1","min","0","max","100"],["matInput","","formControlName","bottom","type","number","step","1","min","0","max","100"],[1,"flex","flex-row","items-center","justify-center"],["mat-raised-button","","color","accent","type","button",3,"click","disabled"],[3,"formGroup"],["formControlName","dashboardImage",3,"label"],["class","taking-screenshot-progress tb-absolute-fill flex flex-col items-center justify-center",4,"ngIf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[1,"tb-image-preview",3,"src"],[1,"taking-screenshot-progress","tb-absolute-fill","flex","flex-col","items-center","justify-center"],["color","accent","mode","indeterminate"]],template:function(D,w){if(1&D){const ee=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(ee),e.\u0275\u0275resetView(w.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2",3),e.\u0275\u0275text(3,"dashboard.update-image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",4),e.\u0275\u0275elementStart(5,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ee),e.\u0275\u0275resetView(w.cancel())}),e.\u0275\u0275elementStart(6,"mat-icon",6),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,C,1,0,"mat-progress-bar",7),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",8)(11,"fieldset",9),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementStart(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),e.\u0275\u0275text(17,"Top %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",13)(20,"mat-form-field",11)(21,"mat-label"),e.\u0275\u0275text(22,"Left %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",15),e.\u0275\u0275template(25,_,3,3,"div",16)(26,E,3,5,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-form-field",11)(29,"mat-label"),e.\u0275\u0275text(30,"Right %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"input",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"mat-form-field",11)(33,"mat-label"),e.\u0275\u0275text(34,"Bottom %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",19)(37,"button",20),e.\u0275\u0275pipe(38,"async"),e.\u0275\u0275pipe(39,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ee),e.\u0275\u0275resetView(w.takeScreenShot())}),e.\u0275\u0275text(40),e.\u0275\u0275pipe(41,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",21),e.\u0275\u0275element(43,"tb-gallery-image-input",22),e.\u0275\u0275pipe(44,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(45,f,2,0,"div",23),e.\u0275\u0275pipe(46,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",24)(48,"button",25),e.\u0275\u0275pipe(49,"async"),e.\u0275\u0275pipe(50,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ee),e.\u0275\u0275resetView(w.cancel())}),e.\u0275\u0275text(51),e.\u0275\u0275pipe(52,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"button",26),e.\u0275\u0275pipe(54,"async"),e.\u0275\u0275pipe(55,"async"),e.\u0275\u0275text(56),e.\u0275\u0275pipe(57,"translate"),e.\u0275\u0275elementEnd()()()}if(2&D){const ee=e.\u0275\u0275reference(27);e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,14,w.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,16,w.isLoading$)||e.\u0275\u0275pipeBind1(13,18,w.takingScreenshot$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",w.dashboardRectFormGroup),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",!w.imageUrl)("ngIfElse",ee),e.\u0275\u0275advance(12),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(38,20,w.isLoading$)||e.\u0275\u0275pipeBind1(39,22,w.takingScreenshot$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(41,24,"dashboard.take-screenshot")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",w.dashboardImageFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(44,26,"dashboard.image")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(46,28,w.takingScreenshot$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(49,30,w.isLoading$)||e.\u0275\u0275pipeBind1(50,32,w.takingScreenshot$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(52,34,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(54,36,w.isLoading$)||e.\u0275\u0275pipeBind1(55,38,w.takingScreenshot$)||!w.dashboardImageFormGroup.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(57,40,"action.update")," ")}},dependencies:[U.NgIf,F.MatButton,F.MatIconButton,a.MatIcon,O.MatProgressBar,P.MatInput,A.MatFormField,A.MatLabel,u.MatToolbar,t.MatDialogActions,t.MatDialogContent,m.MatProgressSpinner,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NumberValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.MinValidator,c.MaxValidator,c.NgForm,c.FormGroupDirective,c.FormControlName,p.TranslateDirective,v.GalleryImageInputComponent,U.AsyncPipe,T.ImagePipe,p.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   mat-form-field.rect-field[_ngcontent-%COMP%]{max-width:80px}[_nghost-%COMP%]   .tb-image-preview[_ngcontent-%COMP%]{width:auto;max-width:298px;height:auto;max-height:298px}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]{position:relative;float:left;width:300px;height:300px;margin-right:12px;vertical-align:top;border:solid 1px}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;font-size:18px;text-align:center}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   .tb-image-preview[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .taking-screenshot-progress[_ngcontent-%COMP%]{background-color:#ffffffa6}']})}}},49764:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardPageComponent:()=>it});var e=n(93953),t=n(69749),c=n(15673),h=n(15753),V=n(86884),S=n(27997);class G{constructor(Ce){this.dashboardCtx=Ce,this.widgetIds=[],this.loaded=!1}size(){return this.widgetIds.length}isLoading(){return!this.loaded}isEmpty(){return this.loaded&&0===this.widgetIds.length}setWidgetIds(Ce){this.widgetIds=Ce,this.loaded=!0}addWidgetId(Ce){this.widgetIds.push(Ce)}removeWidgetId(Ce){const j=this.widgetIds.indexOf(Ce);return j>-1&&(this.widgetIds.splice(j,1),!0)}[Symbol.iterator](){let Ce=0;const j=this.widgetIds,q=this.dashboardCtx.getDashboard();return{next(pe){if(Ce<j.length){const xe=j[Ce++];return{done:!1,value:q.configuration.widgets[xe]}}return{done:!0,value:null}}}}widgetByIndex(Ce){const j=this.widgetIds[Ce];return j?this.widgetById(j):null}widgetById(Ce){return this.dashboardCtx.getDashboard().configuration.widgets[Ce]}}var K=n(74972),H=n(63729),k=n(57665),Q=n(45312),z=n(9437),L=n(80216),B=n(78911),I=n(39116),U=n(84412),F=n(18530),a=n(18810),O=n(7673),P=n(56508),A=n(85568),u=n(72356),m=n(77848),p=n(31648),T=(n(57974),n(67792)),C=n(13445),_=n(98799),E=n(44495),f=n(80240),g=n(46107),y=n(6415),b=n(47987),D=n(76939),w=n(2820),_e=(n(98679),n(95462)),ve=n(65700),Ee=n(62314),$=n(60177),be=n(40810),Te=n(42319),oe=n(23294),R=n(96354),N=n(88141),Z=n(65245),Y=n(99437),ge=n(50701),se=(n(90039),n(57454)),J=n(21626),de=n(9310),ye=n(99327),re=n(7901),ne=n(34006),ie=n(73955);const Ae=["dashboardContainer"],Pe=["dashboardContent"],Be=["tbEditWidget"],Ke=["dashboardWidgetSelect"],Xe=Ue=>({value:Ue}),at=Ue=>({title:Ue});function bt(Ue,Ce){1&Ue&&e.\u0275\u0275element(0,"tb-user-menu",39)}function Mt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"div",40),e.\u0275\u0275elementStart(2,"div",41),e.\u0275\u0275element(3,"mat-divider",42),e.\u0275\u0275elementStart(4,"button",43),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.manageDashboardLayouts(pe))}),e.\u0275\u0275elementStart(6,"mat-icon"),e.\u0275\u0275text(7,"view_compact"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"button",44),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.manageDashboardLayouts(pe))}),e.\u0275\u0275elementStart(10,"mat-icon"),e.\u0275\u0275text(11,"view_compact"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"tb-select-dashboard-breakpoint",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(5,4,"layout.manage")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(9,6,"layout.manage")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,8,"layout.layouts")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("dashboardCtrl",j)}}function ze(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",43),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.manageDashboardStates(pe))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"layers"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",44),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.manageDashboardStates(pe))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"layers"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,3,"dashboard.manage-states")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,5,"dashboard.manage-states")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"dashboard.states-short")," "))}function vt(Ue,Ce){if(1&Ue&&(e.\u0275\u0275element(0,"img",46),e.\u0275\u0275pipe(1,"image"),e.\u0275\u0275pipe(2,"async")),2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",e.\u0275\u0275pipeBind1(2,3,e.\u0275\u0275pipeBind1(1,1,j.dashboardLogo)),e.\u0275\u0275sanitizeUrl)}}function tt(Ue,Ce){1&Ue&&e.\u0275\u0275element(0,"tb-user-menu",47)}function Ye(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",43),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",48),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(6,"mat-icon"),e.\u0275\u0275text(7,"edit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,2,"dashboard.edit-mode")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,4,"dashboard.edit-mode")))}function Qe(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",49),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.saveDashboard())}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"done"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",50),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.saveDashboard())}),e.\u0275\u0275elementStart(8,"mat-icon"),e.\u0275\u0275text(9,"done"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",51),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(15,"mat-icon"),e.\u0275\u0275text(16,"close"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"button",52),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(19,"mat-icon"),e.\u0275\u0275text(20,"close"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"mat-divider",42),e.\u0275\u0275elementContainerEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,8,"action.save")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,10,j.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(7,12,j.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,14,"action.save")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(13,16,"action.cancel")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,18,j.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,20,j.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,22,"action.cancel"))}}function nt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",53,4),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275reference(2),Ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge.toggleVersionControl(pe,xe))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"history"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",54,5),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275reference(7),Ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ge.toggleVersionControl(pe,xe))}),e.\u0275\u0275elementStart(9,"mat-icon"),e.\u0275\u0275text(10,"history"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(3,3,"version-control.version-control")),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(8,5,"version-control.version-control")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,7,"version-control.versions")," "))}function ot(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",55),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openFilters(pe))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"filter_list"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",54),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openFilters(pe))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"filter_list"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,3,"filter.filters")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,5,"filter.filters")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"filter.filters")," "))}function gt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",55),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openEntityAliases(pe))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"devices_other"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",54),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openEntityAliases(pe))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"devices_other"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,3,"entity.aliases")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,5,"entity.aliases")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"entity.aliases-short")," "))}function rt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",55),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openDashboardSettings(pe))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",54),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.openDashboardSettings(pe))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,3,"dashboard.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,5,"dashboard.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"dashboard.settings")," "))}function Ze(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tb-timewindow",56),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(xe.dashboardCtx.dashboardTimewindow,pe)||(xe.dashboardCtx.dashboardTimewindow=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"tb-timewindow",57),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(xe.dashboardCtx.dashboardTimewindow,pe)||(xe.dashboardCtx.dashboardTimewindow=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("displayTimewindowValue",!1)("isEdit",!0),e.\u0275\u0275twoWayProperty("ngModel",j.dashboardCtx.dashboardTimewindow),e.\u0275\u0275advance(),e.\u0275\u0275property("isEdit",!0),e.\u0275\u0275twoWayProperty("ngModel",j.dashboardCtx.dashboardTimewindow)}}function je(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tb-timewindow",58),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(xe.dashboardCtx.dashboardTimewindow,pe)||(xe.dashboardCtx.dashboardTimewindow=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"tb-timewindow",59),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(xe.dashboardCtx.dashboardTimewindow,pe)||(xe.dashboardCtx.dashboardTimewindow=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("isEdit",!1),e.\u0275\u0275twoWayProperty("ngModel",j.dashboardCtx.dashboardTimewindow),e.\u0275\u0275advance(),e.\u0275\u0275property("isEdit",!1),e.\u0275\u0275twoWayProperty("ngModel",j.dashboardCtx.dashboardTimewindow)}}function $e(Ue,Ce){if(1&Ue&&e.\u0275\u0275template(0,je,3,4,"ng-container",14),2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",j.displayDashboardTimewindow())}}function Oe(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",43),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.addWidget(pe))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"add"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",60),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(xe.addWidget(pe))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}2&Ue&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,3,"dashboard.add-widget-button-text")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,5,"dashboard.add-widget-button-text")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,7,"dashboard.add-widget-button-text")," "))}function Fe(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-dashboard-select",61),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(xe.currentDashboardId,pe)||(xe.currentDashboardId=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.currentDashboardIdChanged(pe.currentDashboardId))}),e.\u0275\u0275elementEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275twoWayProperty("ngModel",j.currentDashboardId),e.\u0275\u0275property("customerId",j.currentCustomerId)("dashboardsScope",j.currentDashboardScope)}}function le(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",62)(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",63)(4,"mat-label",64),e.\u0275\u0275text(5,"dashboard.title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"input",65),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(xe.dashboard.title,pe)||(xe.dashboard.title=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd()()()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("color",j.dashboard.configuration.settings.titleColor),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",j.isEdit||!j.displayTitle()),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(j.translatedDashboardTitle),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!j.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275styleProp("color",j.dashboard.configuration.settings.titleColor),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("color",j.dashboard.configuration.settings.titleColor),e.\u0275\u0275twoWayProperty("ngModel",j.dashboard.title)}}function we(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-drawer",66),e.\u0275\u0275twoWayListener("openedChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(xe.rightLayoutOpened,pe)||(xe.rightLayoutOpened=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275element(1,"tb-dashboard-layout",67),e.\u0275\u0275elementEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext(),q=e.\u0275\u0275reference(2);e.\u0275\u0275styleProp("min-width",j.rightLayoutSize.width)("max-width",j.rightLayoutSize.width)("height",j.rightLayoutSize.height),e.\u0275\u0275property("@.disabled",!j.isMobile)("mode",j.isMobile?"over":"side"),e.\u0275\u0275twoWayProperty("opened",j.rightLayoutOpened),e.\u0275\u0275advance(),e.\u0275\u0275property("dashboardCheatSheet",q)("layoutCtx",j.mobileDisplayRightLayoutFirst?j.layouts.main.layoutCtx:j.layouts.right.layoutCtx)("dashboardCtx",j.dashboardCtx)("isEdit",j.isEdit)("isEditingWidget",j.isEditingWidget)("isMobile",j.forceDashboardMobileMode)("widgetEditMode",j.widgetEditMode)("parentDashboard",j.parentDashboard)("popoverComponent",j.popoverComponent)}}function qe(Ue,Ce){if(1&Ue&&(e.\u0275\u0275elementStart(0,"div",68),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",!j.showMainLayoutFiller),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,3,"dashboard.breakpoint-value",e.\u0275\u0275pureFunction1(6,Xe,j.currentBreakpointValue))," ")}}function lt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",69)(1,"button",70),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",71),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.saveDashboard())}),e.\u0275\u0275elementStart(8,"mat-icon"),e.\u0275\u0275text(9,"done"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"button",71),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.toggleDashboardEditMode())}),e.\u0275\u0275elementStart(13,"mat-icon"),e.\u0275\u0275text(14,"close"),e.\u0275\u0275elementEnd()()()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",j.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,11,"action.enter-edit-mode")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",!j.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,13,"action.save")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(7,15,j.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",!j.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(11,17,"action.cancel")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,19,j.isLoading$))}}function Kt(Ue,Ce){if(1&Ue&&(e.\u0275\u0275elementStart(0,"section",72)(1,"span"),e.\u0275\u0275text(2,"Powered by "),e.\u0275\u0275elementStart(3,"a",73),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("color",j.dashboard.configuration.settings.titleColor),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("Thingsboard v.",j.thingsboardVersion,"")}}function Jt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-toggle-select",79),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j),e.\u0275\u0275nextContext();const xe=e.\u0275\u0275reference(5);return e.\u0275\u0275twoWayBindingSet(xe.widgetConfigMode,pe)||(xe.widgetConfigMode=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementStart(1,"tb-toggle-option",80),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-toggle-option",81),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}if(2&Ue){e.\u0275\u0275nextContext();const j=e.\u0275\u0275reference(5);e.\u0275\u0275twoWayProperty("ngModel",j.widgetConfigMode),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"widget.basic-mode")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"widget.advanced-mode"))}}function Vt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-details-panel",74),e.\u0275\u0275listener("closeDetails",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.onEditWidgetClosed())}),e.\u0275\u0275elementStart(1,"div",75),e.\u0275\u0275template(2,Jt,7,7,"tb-toggle-select",76),e.\u0275\u0275element(3,"div",77),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-edit-widget",78,6),e.\u0275\u0275listener("revertWidgetConfig",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.onRevertWidgetEdit())})("applyWidgetConfig",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.saveWidget())}),e.\u0275\u0275elementEnd()()}if(2&Ue){const j=e.\u0275\u0275reference(5),q=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("headerTitle",null==q.editingWidget?null:q.editingWidget.config.title),e.\u0275\u0275propertyInterpolate("headerSubtitle",q.editingWidgetSubtitle),e.\u0275\u0275property("isReadOnly",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==j.widgetConfig?null:j.widgetConfig.hasBasicMode),e.\u0275\u0275advance(),e.\u0275\u0275property("tb-help",q.helpLinkIdForWidgetType()),e.\u0275\u0275advance(),e.\u0275\u0275property("dashboard",q.dashboard)("aliasController",q.dashboardCtx.aliasController)("stateController",q.dashboardCtx.stateController)("widgetEditMode",q.widgetEditMode)("widget",q.editingWidget)("widgetLayout",q.editingWidgetLayout)("showLayoutConfig",q.showLayoutConfigInEdit(q.editingLayoutCtx))("isDefaultBreakpoint","default"===(null==q.editingLayoutCtx?null:q.editingLayoutCtx.breakpoint))}}function hn(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",88)(1,"tb-widgets-bundle-search",89),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275twoWayBindingSet(xe.dashboardWidgetSelectComponent.search,pe)||(xe.dashboardWidgetSelectComponent.search=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementEnd()()}if(2&Ue){const j=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(2,2,j.dashboardWidgetSelectComponent.widgetsBundle||"bundles"!==j.dashboardWidgetSelectComponent.selectWidgetMode?"widget.search":"widgets-bundle.search")),e.\u0275\u0275twoWayProperty("ngModel",j.dashboardWidgetSelectComponent.search)}}function ut(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",94),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(xe.importWidget(pe))}),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2,"file_upload"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()}2&Ue&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,"dashboard.import-widget")))}function Zt(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-toggle-select",95),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275twoWayBindingSet(xe.dashboardWidgetSelectComponent.selectWidgetMode,pe)||(xe.dashboardWidgetSelectComponent.selectWidgetMode=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementStart(1,"tb-toggle-option",96),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-toggle-option",97),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}if(2&Ue){const j=e.\u0275\u0275nextContext(3);e.\u0275\u0275twoWayProperty("ngModel",j.dashboardWidgetSelectComponent.selectWidgetMode),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"widgets-bundle.widgets-bundles")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"widget.all-widgets"))}}function He(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",98),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(xe.editWidgetsTypesToDisplay(pe))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"filter_list"),e.\u0275\u0275elementEnd()()}2&Ue&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"widget.filter"))}function We(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-toggle-select",95),e.\u0275\u0275twoWayListener("ngModelChange",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275twoWayBindingSet(xe.dashboardWidgetSelectComponent.deprecatedFilter,pe)||(xe.dashboardWidgetSelectComponent.deprecatedFilter=pe),e.\u0275\u0275resetView(pe)}),e.\u0275\u0275elementStart(1,"tb-toggle-option",99),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-toggle-option",100),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"tb-toggle-option",101),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()}if(2&Ue){const j=e.\u0275\u0275nextContext(3);e.\u0275\u0275twoWayProperty("ngModel",j.dashboardWidgetSelectComponent.deprecatedFilter),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"widget.all")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,6,"widget.actual")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,8,"widget.deprecated"))}}function he(Ue,Ce){if(1&Ue&&(e.\u0275\u0275elementStart(0,"div",90),e.\u0275\u0275template(1,ut,5,3,"button",91)(2,Zt,7,7,"tb-toggle-select",92)(3,He,4,3,"button",93)(4,We,10,10,"tb-toggle-select",92),e.\u0275\u0275elementEnd()),2&Ue){const j=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bundles"===(null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.selectWidgetMode)&&!(null!=j.dashboardWidgetSelectComponent&&j.dashboardWidgetSelectComponent.widgetsBundle)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","bundles"===(null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.selectWidgetMode)&&!(null!=j.dashboardWidgetSelectComponent&&j.dashboardWidgetSelectComponent.widgetsBundle)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.widgetTypes.size)>1),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.hasDeprecated)}}function Me(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-dashboard-widget-select",102,7),e.\u0275\u0275listener("widgetSelected",function(pe){e.\u0275\u0275restoreView(j);const xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(xe.addWidgetFromType(pe))}),e.\u0275\u0275elementEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("aliasController",j.dashboardCtx.aliasController)("filterWidgetTypes",j.filterWidgetTypes)("scadaFirst",j.layouts.main.layoutCtx.gridSettings.layoutType===j.LayoutType.scada)}}function Ne(Ue,Ce){if(1&Ue){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-details-panel",82),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("closeDetails",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.onAddWidgetClosed())})("closeSearch",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.dashboardWidgetSelectComponent.search="")}),e.\u0275\u0275elementStart(4,"div",83)(5,"button",84),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(j);const pe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(pe.clearSelectedWidgetBundle())}),e.\u0275\u0275elementStart(6,"mat-icon"),e.\u0275\u0275text(7,"arrow_back"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,hn,3,4,"div",85)(9,he,5,4,"div",86)(10,Me,2,3,"tb-dashboard-widget-select",87),e.\u0275\u0275elementEnd()}if(2&Ue){const j=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("headerTitle",j.isAddingWidget?"allWidgets"===(null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.selectWidgetMode)?e.\u0275\u0275pipeBind2(2,11,"dashboard.select-widget-value",e.\u0275\u0275pureFunction1(17,at,e.\u0275\u0275pipeBind1(1,9,"widget.all-widgets"))):e.\u0275\u0275pipeBind2(3,14,null!=j.dashboardWidgetSelectComponent&&j.dashboardWidgetSelectComponent.widgetsBundle?"dashboard.select-widget-value":"widget.select-widgets-bundle",null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.widgetsBundle):""),e.\u0275\u0275property("isShowSearch",!0)("isReadOnly",!0)("isEdit",!1),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",!(j.isAddingWidget&&(null!=j.dashboardWidgetSelectComponent&&j.dashboardWidgetSelectComponent.widgetsBundle||"allWidgets"===(null==j.dashboardWidgetSelectComponent?null:j.dashboardWidgetSelectComponent.selectWidgetMode)))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",j.isAddingWidget&&j.dashboardWidgetSelectComponent),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",j.isAddingWidget),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",j.isAddingWidget)}}class it extends t.H{get isDirty(){return this.isEdit&&!this.forcePristine}set isDirty(Ce){this.forcePristine=!Ce}set hideToolbar(Ce){this.hideToolbarValue=Ce}get hideToolbar(){return(this.hideToolbarValue||this.hideToolbarSetting())&&!this.isEdit||this.isEditingWidget||this.isAddingWidget}get toolbarOpened(){return!this.widgetEditMode&&!this.hideToolbar&&(this.toolbarAlwaysOpen()||this.isToolbarOpened||this.isEdit||this.showRightLayoutSwitch())}set toolbarOpened(Ce){}get rightLayoutOpened(){return!this.isMobile||this.isRightLayoutOpened}set rightLayoutOpened(Ce){}get mobileDisplayRightLayoutFirst(){return this.isMobile&&this.layouts.right.layoutCtx.gridSettings?.mobileDisplayLayoutFirst}set mobileDisplayRightLayoutFirst(Ce){}constructor(Ce,j,q,pe,xe,Ge,_t,Et,Gt,Ot,Wt,qt,en,Tn,tn,Mn,bn,rn,on,Ta,go,fo,Ma,Da,aa,_o){super(Ce),this.store=Ce,this.window=j,this.document=q,this.breakpointObserver=pe,this.route=xe,this.router=Ge,this.utils=_t,this.dashboardUtils=Et,this.entityService=Gt,this.dialogService=Ot,this.widgetComponentService=Wt,this.dashboardService=qt,this.itembuffer=en,this.importExport=Tn,this.mobileService=tn,this.dialog=Mn,this.translate=bn,this.popoverService=rn,this.renderer=on,this.ngZone=Ta,this.embeddedValue=go,this.overlay=fo,this.viewContainerRef=Ma,this.cd=Da,this.elRef=aa,this.injector=_o,this.LayoutType=h.p5,this.destroyed=!1,this.forcePristine=!1,this.authState=(0,H.rW)(this.store),this.authUser=this.authState.authUser,this.embedded=!1,this.hideToolbarValue=!1,this.syncStateWithQueryParam=!0,this.parentDashboard=null,this.popoverComponent=null,this.parentAliasController=null,this.iframeMode=this.utils.iframeMode,this.forceFullscreen=this.authState.forceFullscreen,this.readonly=!1,this.isMobileApp=this.mobileService.isMobileApp(),this.isFullscreen=!1,this.isEdit=!1,this.isEditingWidget=!1,this.isEditingWidgetClosed=!0,this.isMobile=!this.breakpointObserver.isMatched(K.zV["gt-sm"]),this.forceDashboardMobileMode=!1,this.isAddingWidget=!1,this.isAddingWidgetClosed=!0,this.filterWidgetTypes=null,this.isToolbarOpened=!1,this.isToolbarOpenedAnimate=!1,this.isRightLayoutOpened=!1,this.editingWidget=null,this.editingWidgetLayout=null,this.editingWidgetOriginal=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetSubtitle=null,this.editingLayoutCtx=null,this.thingsboardVersion=Q.c.tbVersion,this.setStateDashboardId=!1,this.mainLayoutSize={width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%"},this.rightLayoutSize={width:"100%",height:"100%"},this.defaultDashboardLogo="assets/logo_title_white.svg",this.dashboardCtx={instanceId:this.utils.guid(),getDashboard:()=>this.dashboard,dashboardTimewindow:null,state:null,breakpoint:null,stateController:null,stateChanged:null,stateId:null,aliasController:null,runChangeDetection:this.runChangeDetection.bind(this)},this.layouts={main:{show:!1,layoutCtx:{id:"main",breakpoint:"default",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:this,displayGrid:"onDrag&Resize",layoutData:null,layoutDataChanged:new U.t(null)}},right:{show:!1,layoutCtx:{id:"right",breakpoint:"default",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:this,displayGrid:"onDrag&Resize",layoutData:null,layoutDataChanged:new U.t(null)}}},this.updateBreadcrumbs=new e.EventEmitter,this.rxSubscriptions=new Array,this.changeMobileSize=new F.B,(0,S.f1)(this.embeddedValue)&&(this.embedded=this.embeddedValue)}ngOnInit(){this.rxSubscriptions.push(this.route.data.subscribe(Ce=>{let j;j=this.embedded?{dashboard:this.dashboardUtils.validateAndUpdateDashboard(this.dashboard),currentDashboardId:this.dashboard.id?this.dashboard.id.id:null,widgetEditMode:!1,singlePageMode:!1}:{dashboard:Ce.dashboard,currentDashboardId:this.route.snapshot.params.dashboardId,widgetEditMode:Ce.widgetEditMode,singlePageMode:Ce.singlePageMode},this.init(j),this.runChangeDetection()})),this.syncStateWithQueryParam&&this.rxSubscriptions.push(this.route.queryParamMap.subscribe(Ce=>{Ce.has("reload")&&(this.dashboardCtx.aliasController.updateAliases(),setTimeout(()=>{this.mobileService.handleDashboardStateName(this.dashboardCtx.stateController.getCurrentStateName()),this.mobileService.onDashboardLoaded(this.layouts.right.show,this.isRightLayoutOpened)}))})),this.rxSubscriptions.push(this.changeMobileSize.pipe((0,oe.F)()).subscribe(Ce=>{this.isMobile=Ce,this.updateLayoutSizes()})),this.rxSubscriptions.push(this.breakpointObserver.observe(this.dashboardUtils.getBreakpoints()).pipe((0,R.T)(Ce=>this.parseBreakpointsResponse(Ce.breakpoints)),(0,N.M)(Ce=>{this.dashboardCtx.breakpoint=Ce?Ce.id:"default",this.changeMobileSize.next(!!Ce&&this.isMobileSize(Ce))}),(0,oe.F)((Ce,j)=>{if(this.layouts.right.show||this.isEdit)return!0;let q="default";return j&&this.layouts.main.layoutCtx.layoutData?.[j.id]&&(q=j.id),this.layouts.main.layoutCtx.breakpoint===q}),(0,Z.i)(1)).subscribe(()=>{this.dashboardUtils.updatedLayoutForBreakpoint(this.layouts.main,this.dashboardCtx.breakpoint),this.updateLayoutSizes()})),this.isMobileApp&&this.syncStateWithQueryParam&&this.mobileService.registerToggleLayoutFunction(()=>{setTimeout(()=>{this.toggleLayouts(),this.cd.detectChanges()})})}ngAfterViewInit(){this.dashboardResize$=new ResizeObserver(()=>{this.ngZone.run(()=>{this.updateLayoutSizes()})}),this.dashboardResize$.observe(this.dashboardContainer.nativeElement),!this.widgetEditMode&&!this.readonly&&this.dashboardUtils.isEmptyDashboard(this.dashboard)&&this.setEditMode(!0,!1)}init(Ce){if(this.reset(),this.dashboard=Ce.dashboard,this.translatedDashboardTitle=this.getTranslatedDashboardTitle(),!this.embedded&&this.dashboard.id&&(this.setStateDashboardId=!0),this.route.snapshot.queryParamMap.has("hideToolbar")&&(this.hideToolbar="true"===this.route.snapshot.queryParamMap.get("hideToolbar")),this.route.snapshot.queryParamMap.has("embedded")&&(this.embedded="true"===this.route.snapshot.queryParamMap.get("embedded")),this.currentDashboardId=Ce.currentDashboardId,this.route.snapshot.params.customerId?(this.currentCustomerId=this.route.snapshot.params.customerId,this.currentDashboardScope="customer"):(this.currentDashboardScope=this.authUser.authority===z.s.TENANT_ADMIN?"tenant":"customer",this.currentCustomerId=this.authUser.customerId),this.dashboardConfiguration=this.dashboard.configuration,this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.layouts.main.layoutCtx.widgets=new G(this.dashboardCtx),this.layouts.right.layoutCtx.widgets=new G(this.dashboardCtx),this.widgetEditMode=Ce.widgetEditMode,this.singlePageMode=Ce.singlePageMode,this.readonly=this.embedded||this.singlePageMode&&!this.widgetEditMode&&!this.route.snapshot.queryParamMap.get("edit")||this.forceFullscreen||this.isMobileApp||this.authUser.authority===z.s.CUSTOMER_USER||"true"===this.route.snapshot.queryParamMap.get("readonly"),this.dashboardCtx.aliasController=this.parentAliasController?this.parentAliasController:new I.P(this.utils,this.entityService,this.translate,()=>this.dashboardCtx.stateController,this.dashboardConfiguration.entityAliases,this.dashboardConfiguration.filters,this.parentDashboard?.aliasController.getUserFilters()),this.updateDashboardCss(),this.widgetEditMode){const j={type:"widgetEditModeInited"};this.window.parent.postMessage(JSON.stringify(j),"*")}}updateDashboardCss(){this.cleanupDashboardCss();const Ce=this.dashboardConfiguration.settings.dashboardCss;if((0,S.Q8)(Ce)){const j=new Ee.A;j.testMode=!1,this.dashboardPageClass="tb-dashboard-page-css-"+(0,S.Os)(),j.cssPreviewNamespace="tb-default ."+this.dashboardPageClass,j.createStyleElement(this.dashboardPageClass,Ce)}}cleanupDashboardCss(){if(this.dashboardPageClass){const Ce=this.document.getElementById(this.dashboardPageClass);Ce&&Ce.parentNode.removeChild(Ce)}}reset(){this.dashboard=null,this.translatedDashboardTitle=null,this.dashboardConfiguration=null,this.dashboardLogoCache=void 0,this.prevDashboard=null,this.widgetEditMode=!1,this.singlePageMode=!1,this.isFullscreen=!1,this.isEdit=!1,this.isEditingWidget=!1,this.isEditingWidgetClosed=!0,this.forceDashboardMobileMode=!1,this.isAddingWidget=!1,this.isAddingWidgetClosed=!0,this.isToolbarOpened=!1,this.isToolbarOpenedAnimate=!1,this.isRightLayoutOpened=!1,this.editingWidget=null,this.editingWidgetLayout=null,this.editingWidgetOriginal=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetSubtitle=null,this.editingLayoutCtx=null,this.currentDashboardId=null,this.currentCustomerId=null,this.currentDashboardScope=null,this.setStateDashboardId=!1,this.dashboardCtx.state=null}ngOnDestroy(){this.destroyed=!0,this.cleanupDashboardCss(),this.isMobileApp&&this.syncStateWithQueryParam&&this.mobileService.unregisterToggleLayoutFunction(),this.rxSubscriptions.forEach(Ce=>{Ce.unsubscribe()}),this.rxSubscriptions.length=0,this.dashboardResize$&&this.dashboardResize$.disconnect(),this.layouts.main.layoutCtx.layoutDataChanged.unsubscribe(),this.layouts.right.layoutCtx.layoutDataChanged.unsubscribe()}runChangeDetection(){this.ngZone.run(()=>{this.cd.detectChanges()})}openToolbar(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!0}closeToolbar(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!1}showCloseToolbar(){return!this.toolbarAlwaysOpen()&&!this.isEdit&&!this.showRightLayoutSwitch()}hideFullscreenButton(){return this.widgetEditMode||this.iframeMode||this.forceFullscreen||this.singlePageMode}toolbarAlwaysOpen(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.toolbarAlwaysOpen)||this.dashboard.configuration.settings.toolbarAlwaysOpen}hideToolbarSetting(){return!(!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.hideToolbar))&&this.dashboard.configuration.settings.hideToolbar}displayTitle(){return!(!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showTitle))&&this.dashboard.configuration.settings.showTitle}getTranslatedDashboardTitle(){return this.utils.customTranslation(this.dashboard.title,this.dashboard.title)}displayExport(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showDashboardExport)||this.dashboard.configuration.settings.showDashboardExport}displayUpdateDashboardImage(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showUpdateDashboardImage)||this.dashboard.configuration.settings.showUpdateDashboardImage}displayDashboardTimewindow(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showDashboardTimewindow)||this.dashboard.configuration.settings.showDashboardTimewindow}displayDashboardsSelect(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showDashboardsSelect)||this.dashboard.configuration.settings.showDashboardsSelect}displayEntitiesSelect(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showEntitiesSelect)||this.dashboard.configuration.settings.showEntitiesSelect}displayFilters(){return!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showFilters)||this.dashboard.configuration.settings.showFilters}showDashboardLogo(){return!(!this.dashboard.configuration.settings||!(0,S.O9)(this.dashboard.configuration.settings.showDashboardLogo))&&(this.dashboard.configuration.settings.showDashboardLogo&&(this.forceFullscreen||this.singlePageMode||this.isFullscreen))}get dashboardLogo(){return this.dashboard.configuration.settings.dashboardLogoUrl||this.defaultDashboardLogo}showRightLayoutSwitch(){return this.isMobile&&!this.isMobileApp&&this.layouts.right.show}toggleLayouts(){this.isRightLayoutOpened=!this.isRightLayoutOpened,this.mobileService.onDashboardRightLayoutChanged(this.isRightLayoutOpened)}openRightLayout(){this.isRightLayoutOpened=!0,this.mobileService.onDashboardRightLayoutChanged(this.isRightLayoutOpened)}updateLayoutSizes(){let Ce=!1,j=!1;this.dashboardCtx.state&&(Ce=this.updateMainLayoutSize(),j=this.updateRightLayoutSize()),(Ce||j)&&this.cd.markForCheck()}updateMainLayoutSize(){const Ce=this.mainLayoutSize.width,j=this.mainLayoutSize.height,q=this.mainLayoutSize.maxWidth,pe=this.mainLayoutSize.minWidth;if(this.isEditingWidget&&"main"===this.editingLayoutCtx.id?this.mainLayoutSize.width="100%":this.mainLayoutSize.width=this.layouts.right.show&&!this.isMobile?this.calculateWidth("main"):"100%",this.isEditingWidget&&"main"!==this.editingLayoutCtx.id?this.mainLayoutSize.height="0px":this.mainLayoutSize.height="100%",this.isEdit&&!this.isEditingWidget){const xe=this.dashboardContainer.nativeElement.getBoundingClientRect().x,Ge=this.dashboardUtils.getBreakpointInfoById(this.layouts.main.layoutCtx.breakpoint);let Et,_t="100%";if(Ge){const Gt=this.isMobileSize(Ge);Ge.maxWidth&&(_t=Gt?`${Ge.maxWidth}px`:Ge.maxWidth-xe+"px"),Ge.minWidth&&(Et=Gt?`${Ge.minWidth}px`:Ge.minWidth-xe+"px")}this.mainLayoutSize.maxWidth=_t,this.mainLayoutSize.minWidth=Et}else this.mainLayoutSize.maxWidth="100%",this.mainLayoutSize.minWidth=void 0;return Ce!==this.mainLayoutSize.width||j!==this.mainLayoutSize.height||q!==this.mainLayoutSize.maxWidth||pe!==this.mainLayoutSize.minWidth}updateRightLayoutSize(){const Ce=this.rightLayoutSize.width,j=this.rightLayoutSize.height;return this.isEditingWidget&&"right"===this.editingLayoutCtx.id?this.rightLayoutSize.width="100%":this.rightLayoutSize.width=this.isMobile?"100%":this.calculateWidth("right"),this.isEditingWidget&&"right"!==this.editingLayoutCtx.id?this.rightLayoutSize.height="0px":this.rightLayoutSize.height="100%",Ce!==this.rightLayoutSize.width||j!==this.rightLayoutSize.height}calculateWidth(Ce){let j;const q=this.dashboard.configuration.states[this.dashboardCtx.state].layouts.main,pe=this.dashboard.configuration.states[this.dashboardCtx.state].layouts.right;if(pe&&(j=q.gridSettings.layoutDimension?q.gridSettings.layoutDimension:pe.gridSettings.layoutDimension),j){if(j.type===ge.pA.PERCENTAGE)return"right"===Ce?100-j.leftWidthPercentage+"%":j.leftWidthPercentage+"%";{const xe=this.dashboardContainer.nativeElement.getBoundingClientRect().width,Ge=xe-ge._p.MIN;return j.fixedLayout===Ce?Ge<=j.fixedWidth?Ge+"px":j.fixedWidth+"px":Ge<=j.fixedWidth?ge._p.MIN+"px":xe-j.fixedWidth+"px"}}return"50%"}isPublicUser(){return this.authUser.isPublic}isTenantAdmin(){return this.authUser.authority===z.s.TENANT_ADMIN}isSystemAdmin(){return this.authUser.authority===z.s.SYS_ADMIN}exportDashboard(Ce){Ce&&Ce.stopPropagation(),this.importExport.exportDashboard(this.currentDashboardId)}openEntityAliases(Ce){Ce&&Ce.stopPropagation(),this.dialog.open(p.EntityAliasesDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:(0,S.Go)(this.dashboard.configuration.entityAliases),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleEntityAlias:!1}}).afterClosed().subscribe(j=>{j&&(this.dashboard.configuration.entityAliases=j,this.entityAliasesUpdated())})}openFilters(Ce){Ce&&Ce.stopPropagation(),this.dialog.open(y.FiltersDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filters:(0,S.Go)(this.dashboard.configuration.filters),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleFilter:!1}}).afterClosed().subscribe(j=>{j&&(this.dashboard.configuration.filters=j,this.filtersUpdated())})}openDashboardSettings(Ce){Ce&&Ce.stopPropagation();let j=null;const q=this.dashboardUtils.isSingleLayoutDashboard(this.dashboard);if(q){const pe=this.dashboardUtils.getDashboardLayoutConfig(this.dashboard.configuration.states[q.state].layouts[q.layout],this.layouts[q.layout].layoutCtx.breakpoint);j=(0,S.Go)(pe.gridSettings)}this.dialog.open(E.DashboardSettingsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:(0,S.Go)(this.dashboard.configuration.settings),gridSettings:j,breakpointId:this.layouts.main.layoutCtx.breakpoint}}).afterClosed().subscribe(pe=>{if(pe){this.dashboard.configuration.settings=pe.settings,this.dashboardLogoCache=void 0,this.updateDashboardCss();const xe=pe.gridSettings;if(xe){const Ge=(0,S.Go)(this.dashboard.configuration.states[q.state].layouts),_t=this.dashboardUtils.getDashboardLayoutConfig(Ge[q.layout],this.layouts[q.layout].layoutCtx.breakpoint);this.dashboardUtils.updateLayoutSettings(_t,xe),this.updateDashboardLayouts(Ge)}}})}manageDashboardStates(Ce){Ce&&Ce.stopPropagation(),this.dialog.open(f.ManageDashboardStatesDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:(0,S.Go)(this.dashboard.configuration.states),widgets:(0,S.Go)(this.dashboard.configuration.widgets)}}).afterClosed().subscribe(j=>{j&&((0,S.n4)(j.widgets,this.dashboard.configuration.widgets)||(this.dashboard.configuration.widgets=j.widgets),j.states&&this.updateStates(j.states))})}manageDashboardLayouts(Ce){Ce&&Ce.stopPropagation(),this.dialog.open(C.ManageDashboardLayoutsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{layouts:(0,S.Go)(this.dashboard.configuration.states[this.dashboardCtx.state].layouts)}}).afterClosed().subscribe(j=>{j&&this.updateDashboardLayouts(j)})}moveWidgets(Ce,j,q){Ce&&Ce.stopPropagation(),this.layouts[j].layoutCtx.displayGrid="always",this.cd.markForCheck(),this.dialog.open(se.y,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe(pe=>{if(this.layouts[j].layoutCtx.displayGrid="onDrag&Resize",pe){const xe=this.dashboardConfiguration.states[this.dashboardCtx.state].layouts[j],Ge=this.dashboardUtils.getDashboardLayoutConfig(xe,q);this.dashboardUtils.moveWidgets(Ge,pe.cols,pe.rows),this.updateLayouts()}else this.cd.markForCheck()})}updateDashboardLayouts(Ce){this.dashboardUtils.setLayouts(this.dashboard,this.dashboardCtx.state,Ce),this.updateLayouts()}updateStates(Ce){this.dashboard.configuration.states=Ce,this.dashboardUtils.removeUnusedWidgets(this.dashboard);let j=this.dashboardCtx.state;this.dashboard.configuration.states[j]||(j=this.dashboardUtils.getRootStateId(this.dashboardConfiguration.states)),this.openDashboardState(j)}importWidget(Ce){Ce&&Ce.stopPropagation(),this.importExport.importWidget(this.dashboard,this.dashboardCtx.state,this.editMissingAliases.bind(this),this.selectTargetLayout.bind(this),this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe(j=>{if(j){this.isAddingWidget&&(this.onAddWidgetClosed(),this.isAddingWidgetClosed=!0);const q=j.widget,pe=j.layoutId;this.layouts[pe].layoutCtx.widgets.addWidgetId(q.id),this.runChangeDetection()}})}editMissingAliases(Ce,j,q,pe){return this.dialog.open(p.EntityAliasesDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:pe,widgets:Ce,customTitle:q,isSingleWidget:j,disableAdd:!0}}).afterClosed().pipe((0,R.T)(xe=>{if(xe)return xe;throw new Error("Unable to resolve missing entity aliases!")}))}currentDashboardIdChanged(Ce){this.widgetEditMode||(this.dashboardCtx.stateController.cleanupPreservedStates(),"customer"===this.currentDashboardScope&&this.authUser.authority===z.s.TENANT_ADMIN?this.router.navigateByUrl(`customers/${this.currentCustomerId}/dashboards/${Ce}`):this.singlePageMode?this.router.navigateByUrl(`dashboard/${Ce}`):this.router.navigateByUrl(`dashboards/${Ce}`))}toggleDashboardEditMode(){this.setEditMode(!this.isEdit,!0),this.notifyDashboardToggleEditMode()}saveDashboard(){this.translatedDashboardTitle=this.getTranslatedDashboardTitle(),this.notifyDashboardUpdated()}openDashboardState(Ce,j){if(!this.destroyed){const q=this.dashboardUtils.getStateLayoutsData(this.dashboard,Ce);q&&(this.dashboardCtx.state=Ce,this.dashboardCtx.aliasController.dashboardStateChanged(),this.isRightLayoutOpened=!!j,this.updateLayouts(q)),setTimeout(()=>{this.mobileService.onDashboardLoaded(this.layouts.right.show,this.isRightLayoutOpened)})}}updateLayouts(Ce){Ce||(Ce=this.dashboardUtils.getStateLayoutsData(this.dashboard,this.dashboardCtx.state));for(const j of Object.keys(this.layouts)){const q=this.layouts[j];if(Ce[j]){q.show=!0;const pe=Ce[j];this.updateLayout(q,pe)}else q.show=!1,this.updateLayout(q,{default:{widgetIds:[],widgetLayouts:{},gridSettings:null}})}}updateLayout(Ce,j){Ce.layoutCtx.layoutData=j,Ce.layoutCtx.layoutDataChanged.next(),this.dashboardUtils.updatedLayoutForBreakpoint(Ce,this.isEdit?Ce.layoutCtx.breakpoint:this.dashboardCtx.breakpoint),this.updateLayoutSizes()}setEditMode(Ce,j){this.isEdit=Ce,this.isEdit?(this.dashboardCtx.stateController.preserveState(),this.prevDashboard=(0,S.Go)(this.dashboard)):(this.isEditingWidget&&(this.onEditWidgetClosed(),this.isEditingWidgetClosed=!0),this.isAddingWidget&&(this.onAddWidgetClosed(),this.isAddingWidgetClosed=!0),this.resetHighlight(),j&&(this.dashboard=this.prevDashboard,this.dashboardLogoCache=void 0,this.dashboardConfiguration=this.dashboard.configuration,this.widgetEditMode||(this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.updateDashboardCss(),this.entityAliasesUpdated(),this.filtersUpdated(),this.updateLayouts())))}resetHighlight(){for(const Ce of Object.keys(this.layouts))this.layouts[Ce].layoutCtx&&this.layouts[Ce].layoutCtx.ctrl&&this.layouts[Ce].layoutCtx.ctrl.resetHighlight()}entityAliasesUpdated(){this.dashboardCtx.aliasController.updateEntityAliases(this.dashboard.configuration.entityAliases)}filtersUpdated(){this.dashboardCtx.aliasController.updateFilters(this.dashboard.configuration.filters)}notifyDashboardToggleEditMode(){if(this.widgetEditMode){const Ce={type:"widgetEditModeToggle",data:this.isEdit};this.window.parent.postMessage(JSON.stringify(Ce),"*")}}notifyDashboardUpdated(){if(this.widgetEditMode){const Ce=this.layouts.main.layoutCtx.widgets.widgetByIndex(0),j=this.layouts.main.layoutCtx.widgetLayouts[Ce.id];Ce.sizeX=j.sizeX,Ce.sizeY=j.sizeY;const q={type:"widgetEditUpdated",data:Ce};this.window.parent.postMessage(JSON.stringify(q),"*"),this.setEditMode(!1,!1)}else{let Ce=!1;this.dashboard.configuration.timewindow=this.dashboardCtx.dashboardTimewindow,this.dashboardService.saveDashboard(this.dashboard).pipe((0,Y.W)(j=>j.status===J.HttpStatusCode.Conflict?(Ce=!0,this.dashboardService.getDashboard(this.dashboard.id.id).pipe((0,R.T)(q=>this.dashboardUtils.validateAndUpdateDashboard(q)))):(0,a.$)(()=>j))).subscribe(j=>{if(Ce){const q={dashboard:j,currentDashboardId:j.id?j.id.id:null,widgetEditMode:this.widgetEditMode,singlePageMode:this.singlePageMode};this.init(q)}else this.dashboard.version=j.version,this.setEditMode(!1,!1)})}}helpLinkIdForWidgetType(){let Ce="widgetsConfig";return this.editingWidget&&this.editingWidget.type&&(Ce=k.WT.get(this.editingWidget.type).configHelpLinkId),Ce}addWidget(Ce,j){Ce&&Ce.stopPropagation(),this.isEditingWidget&&(this.onEditWidgetClosed(),this.isEditingWidgetClosed=!0,this.isAddingWidgetClosed=!1),this.isAddingWidget=!0,this.addingLayoutCtx=j}onAddWidgetClosed(){this.isAddingWidget=!1}detailsDrawerOpenedStart(){this.isEditingWidget?this.isEditingWidgetClosed=!1:this.isAddingWidget&&(this.isAddingWidgetClosed=!1)}detailsDrawerClosed(){this.isEditingWidgetClosed=!0,this.isAddingWidgetClosed=!0}addWidgetToLayout(Ce,j){const q=this.layouts[j].layoutCtx;this.dashboardUtils.addWidgetToLayout(this.dashboard,this.dashboardCtx.state,j,Ce,void 0,void 0,-1,-1,q.breakpoint),q.widgets.addWidgetId(Ce.id),this.runChangeDetection()}isAddingToScadaLayout(){const Ce=this.dashboardConfiguration.states[this.dashboardCtx.state].layouts;let j;return j=this.addingLayoutCtx?.id?[this.addingLayoutCtx?.id]:Object.keys(Ce),j.every(q=>Ce[q].gridSettings.layoutType===h.p5.scada)}selectTargetLayout(){const Ce=this.dashboardConfiguration.states[this.dashboardCtx.state].layouts,j=Object.keys(Ce);return j.length>1?this.dialog.open(_.SelectTargetLayoutDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():(0,O.of)(j[0])}addWidgetToDashboard(Ce){this.addingLayoutCtx?(this.addWidgetToLayout(Ce,this.addingLayoutCtx.id),this.addingLayoutCtx=null):this.selectTargetLayout().subscribe(j=>{j&&this.addWidgetToLayout(Ce,j)})}addWidgetFromType(Ce){this.onAddWidgetClosed(),this.widgetComponentService.getWidgetInfo(Ce.typeFullFqn).subscribe(j=>{const q=this.dashboardUtils.widgetConfigFromWidgetType(j);q.title||(q.title="New "+j.widgetName);let pe={typeFullFqn:j.fullFqn,type:j.type,sizeX:j.sizeX,sizeY:j.sizeY,config:q,row:0,col:0};pe=this.dashboardUtils.validateAndUpdateWidget(pe);let xe=!0;this.addingLayoutCtx?.breakpoint?xe="default"===this.addingLayoutCtx.breakpoint:this.layouts.right.show||(xe="default"===this.layouts.main.layoutCtx.breakpoint);const Ge=this.isAddingToScadaLayout();Ge&&(pe=this.dashboardUtils.prepareWidgetForScadaLayout(pe,j.scada));let _t=!0;(Ge||this.layouts.right.show||!this.showLayoutConfigInEdit(this.layouts.main.layoutCtx))&&(_t=!1),j.typeParameters.useCustomDatasources?this.addWidgetToDashboard(pe):this.dialog.open(T.AddWidgetDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],maxWidth:"95vw",injector:this.injector,data:{dashboard:this.dashboard,aliasController:this.dashboardCtx.aliasController,stateController:this.dashboardCtx.stateController,widget:pe,widgetInfo:j,showLayoutConfig:_t,isDefaultBreakpoint:xe}}).afterClosed().subscribe(Et=>{Et&&this.addWidgetToDashboard(Et)})})}onRevertWidgetEdit(){this.editWidgetComponent.widgetFormGroup.dirty&&(this.editWidgetComponent.widgetFormGroup.markAsPristine(),this.editingWidget=(0,S.Go)(this.editingWidgetOriginal),this.editingWidgetLayout=(0,S.Go)(this.editingWidgetLayoutOriginal))}saveWidget(){this.editWidgetComponent.widgetFormGroup.markAsPristine();const Ce=(0,S.Go)(this.editingWidget),j=(0,S.Go)(this.editingWidgetLayout),q=this.editingWidgetOriginal.id;this.dashboardConfiguration.widgets[q]=Ce,this.editingWidgetOriginal=Ce,this.editingWidgetLayoutOriginal=j,this.editingLayoutCtx.widgetLayouts[Ce.id]=j,setTimeout(()=>{this.editingLayoutCtx.ctrl.highlightWidget(Ce.id,0)},0)}onEditWidgetClosed(){this.editingWidgetOriginal=null,this.editingWidget=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetLayout=null,this.editingLayoutCtx=null,this.editingWidgetSubtitle=null,this.isEditingWidget=!1,this.updateLayoutSizes(),this.resetHighlight(),this.forceDashboardMobileMode=!1}editWidget(Ce,j,q){if(Ce.stopPropagation(),this.isAddingWidget&&(this.onAddWidgetClosed(),this.isAddingWidgetClosed=!0,this.isEditingWidgetClosed=!1),this.editingWidgetOriginal===q)this.onEditWidgetClosed();else{const pe=!this.forceDashboardMobileMode;if(this.editingWidgetOriginal=q,this.editingWidgetLayoutOriginal=j.widgetLayouts[q.id],this.editingWidget=(0,S.Go)(this.editingWidgetOriginal),this.editingWidgetLayout=(0,S.Go)(this.editingWidgetLayoutOriginal),this.editingLayoutCtx=j,this.editingWidgetSubtitle=this.widgetComponentService.getInstantWidgetInfo(this.editingWidget).widgetName,this.forceDashboardMobileMode=!0,this.isEditingWidget=!0,this.updateLayoutSizes(),j){const Ge=pe?400:300;setTimeout(()=>{j.ctrl.highlightWidget(q.id,Ge)},pe?350:0)}}}showLayoutConfigInEdit(Ce){return Ce?.gridSettings?.layoutType===h.p5.divider||Ce?.gridSettings?.layoutType===h.p5.default&&("default"===Ce?.breakpoint||"default"!==Ce?.breakpoint&&Ce?.gridSettings?.viewFormat===h.LM.list)}replaceReferenceWithWidgetCopy(Ce,j,q){Ce.stopPropagation();const pe=j.widgets.removeWidgetId(q.id),xe=this.dashboardUtils.replaceReferenceWithWidgetCopy(q,this.dashboard,this.dashboardCtx.state,j.id,j.breakpoint,pe);j.widgets.addWidgetId(xe.id),this.runChangeDetection()}copyWidget(Ce,j,q){this.itembuffer.copyWidget(this.dashboard,this.dashboardCtx.state,j.id,q,j.breakpoint)}copyWidgetReference(Ce,j,q){this.itembuffer.copyWidgetReference(this.dashboard,this.dashboardCtx.state,j.id,q,j.breakpoint)}pasteWidget(Ce,j,q){this.itembuffer.pasteWidget(this.dashboard,this.dashboardCtx.state,j.id,j.breakpoint,q,this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe(pe=>{j.widgets.addWidgetId(pe.id),this.runChangeDetection()})}pasteWidgetReference(Ce,j,q){this.itembuffer.pasteWidgetReference(this.dashboard,this.dashboardCtx.state,j.id,j.breakpoint,q).subscribe(pe=>{j.widgets.addWidgetId(pe.id),this.runChangeDetection()})}removeWidget(Ce,j,q){let pe=q.config.title;(!pe||0===pe.length)&&(pe=this.widgetComponentService.getInstantWidgetInfo(q).widgetName);const xe=this.translate.instant("widget.remove-widget-title",{widgetTitle:pe}),Ge=this.translate.instant("widget.remove-widget-text");this.dialogService.confirm(xe,Ge,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(_t=>{_t&&j.widgets.removeWidgetId(q.id)&&(this.dashboardUtils.removeWidgetFromLayout(this.dashboard,this.dashboardCtx.state,j.id,q.id,j.breakpoint),this.runChangeDetection())})}exportWidget(Ce,j,q,pe){Ce.stopPropagation(),this.importExport.exportWidget(this.dashboard,this.dashboardCtx.state,j.id,q,pe,j.breakpoint)}dashboardMouseDown(Ce,j){this.isEdit&&!this.isEditingWidget&&j.ctrl.resetHighlight()}widgetClicked(Ce,j,q){this.isEditingWidget&&this.editWidget(Ce,j,q)}widgetMouseDown(Ce,j,q){this.isEdit&&!this.isEditingWidget&&j.ctrl.selectWidget(q.id,0)}prepareDashboardContextMenu(Ce){const j=[];return this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode&&(j.push({action:this.openDashboardSettings.bind(this),enabled:!0,value:"dashboard.settings",icon:"settings"}),j.push({action:this.openEntityAliases.bind(this),enabled:!0,value:"entity.aliases",icon:"devices_other"}),j.push({action:q=>{Ce.ctrl.pasteWidget(q)},enabled:this.itembuffer.hasWidget(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),j.push({action:q=>{Ce.ctrl.pasteWidgetReference(q)},enabled:this.itembuffer.canPasteWidgetReference(this.dashboard,this.dashboardCtx.state,Ce.id,Ce.breakpoint),value:"action.paste-reference",icon:"content_paste",shortcut:"M-I"}),j.push({action:q=>{this.moveWidgets(q,Ce.id,Ce.breakpoint)},enabled:!0,value:"dashboard.move-all-widgets",icon:"open_with"})),j}prepareWidgetContextMenu(Ce,j,q){const pe=[];return this.isEdit&&!this.isEditingWidget&&(pe.push({action:(xe,Ge)=>{this.editWidget(xe,Ce,Ge)},enabled:!0,value:"action.edit",icon:"edit"}),q&&pe.push({action:(xe,Ge)=>{this.replaceReferenceWithWidgetCopy(xe,Ce,Ge)},enabled:!0,value:"widget.replace-reference-with-widget-copy",icon:"mdi:file-replace-outline"}),this.widgetEditMode||(pe.push({action:(xe,Ge)=>{this.copyWidget(xe,Ce,Ge)},enabled:!0,value:"action.copy",icon:"content_copy",shortcut:"M-C"}),pe.push({action:(xe,Ge)=>{this.copyWidgetReference(xe,Ce,Ge)},enabled:!0,value:"action.copy-reference",icon:"content_copy",shortcut:"M-R"}),pe.push({action:(xe,Ge)=>{this.removeWidget(xe,Ce,Ge)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}))),pe}clearSelectedWidgetBundle(){this.dashboardWidgetSelectComponent.search="",this.dashboardWidgetSelectComponent.widgetsBundle=null,this.dashboardWidgetSelectComponent.selectWidgetMode="bundles"}editWidgetsTypesToDisplay(Ce){Ce&&Ce.stopPropagation();const j=Ce.target||Ce.currentTarget,q=new b.OverlayConfig;q.backdropClass="cdk-overlay-transparent-backdrop",q.hasBackdrop=!0;q.positionStrategy=this.overlay.position().flexibleConnectedTo(j).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);const xe=this.overlay.create(q);xe.backdropClick().subscribe(()=>{xe.dispose()});const Ge=this.dashboardWidgetSelectComponent.filterWidgetTypes,_t=Array.from(this.dashboardWidgetSelectComponent.widgetTypes.values()).map(Ot=>({type:Ot,display:null===Ge||Ge.includes(Ot)})),Et=[{provide:w.DISPLAY_WIDGET_TYPES_PANEL_DATA,useValue:{types:_t,typesUpdated:Ot=>{this.filterWidgetTypes=Ot.filter(Wt=>Wt.display).map(Wt=>Wt.type),this.cd.markForCheck()}}},{provide:b.OverlayRef,useValue:xe}],Gt=e.Injector.create({parent:this.viewContainerRef.injector,providers:Et});xe.attach(new D.ComponentPortal(w.DisplayWidgetTypesPanelComponent,this.viewContainerRef,Gt)),this.cd.markForCheck()}updateDashboardImage(Ce){Ce&&Ce.stopPropagation(),this.dialog.open(ve.DashboardImageDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboardId:this.dashboard.id,currentImage:this.dashboard.image,dashboardElement:this.dashboardContainer.nativeElement}}).afterClosed().subscribe(j=>{j&&(this.dashboard.image=j.image)})}toggleVersionControl(Ce,j){Ce&&Ce.stopPropagation();const q=j._elementRef.nativeElement;if(this.popoverService.hasPopover(q))this.popoverService.hidePopover(q);else{const pe=this.popoverService.displayPopover(q,this.renderer,this.viewContainerRef,be.d,"leftTop",!0,null,{detailsMode:!0,active:!0,singleEntityMode:!0,externalEntityId:this.dashboard.externalId||this.dashboard.id,entityId:this.dashboard.id,entityName:this.dashboard.name,onBeforeCreateVersion:()=>this.dashboardService.saveDashboard(this.dashboard).pipe((0,N.M)(xe=>{this.dashboard=this.dashboardUtils.validateAndUpdateDashboard(xe),this.prevDashboard=(0,S.Go)(this.dashboard)}))},{},{},{},!0);pe.tbComponentRef.instance.popoverComponent=pe,pe.tbComponentRef.instance.versionRestored.subscribe(()=>{this.dashboardService.getDashboard(this.currentDashboardId).subscribe(xe=>{const Ge={dashboard:xe=this.dashboardUtils.validateAndUpdateDashboard(xe),currentDashboardId:this.currentDashboardId,widgetEditMode:this.widgetEditMode,singlePageMode:this.singlePageMode};this.init(Ge),this.dashboardCtx.stateController.cleanupPreservedStates(),this.dashboardCtx.stateController.resetState(),this.setEditMode(!0,!1),this.updateBreadcrumbs.emit(),this.ngZone.run(()=>{this.cd.detectChanges()})})})}}get showMainLayoutFiller(){const Ce=this.dashboardUtils.getBreakpointInfoById(this.layouts.main.layoutCtx.breakpoint)?.maxWidth||1/0,j=this.dashboardUtils.getBreakpointInfoById(this.dashboardCtx.breakpoint)?.maxWidth||1/0;return!this.layouts.right.show&&Ce<j&&!this.isEditingWidget}get currentBreakpointValue(){return this.dashboardUtils.getBreakpointSizeDescription(this.layouts.main.layoutCtx.breakpoint)}parseBreakpointsResponse(Ce){const j=[];return Object.keys(Ce).map(q=>{Ce[q]&&j.push(this.dashboardUtils.getBreakpointInfoByValue(q))}),j.pop()}isMobileSize(Ce){return!!Ce?.maxWidth&&Ce.maxWidth<960}static{this.\u0275fac=function(j){return new(j||it)(e.\u0275\u0275directiveInject(de.Store),e.\u0275\u0275directiveInject(V.jf),e.\u0275\u0275directiveInject($.DOCUMENT),e.\u0275\u0275directiveInject(ye.BreakpointObserver),e.\u0275\u0275directiveInject(re.ActivatedRoute),e.\u0275\u0275directiveInject(re.Router),e.\u0275\u0275directiveInject(c.T),e.\u0275\u0275directiveInject(P.N),e.\u0275\u0275directiveInject(B.T),e.\u0275\u0275directiveInject(L.o),e.\u0275\u0275directiveInject(u.j),e.\u0275\u0275directiveInject(A.I),e.\u0275\u0275directiveInject(m.Z),e.\u0275\u0275directiveInject(g.ImportExportService),e.\u0275\u0275directiveInject(_e.O),e.\u0275\u0275directiveInject(ne.MatDialog),e.\u0275\u0275directiveInject(ie.TranslateService),e.\u0275\u0275directiveInject(Te.TbPopoverService),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject("embeddedValue",8),e.\u0275\u0275directiveInject(b.Overlay),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:it,selectors:[["tb-dashboard-page"]],viewQuery:function(j,q){if(1&j&&(e.\u0275\u0275viewQuery(Ae,5),e.\u0275\u0275viewQuery(Pe,5,e.ElementRef),e.\u0275\u0275viewQuery(Be,5),e.\u0275\u0275viewQuery(Ke,5)),2&j){let pe;e.\u0275\u0275queryRefresh(pe=e.\u0275\u0275loadQuery())&&(q.dashboardContainer=pe.first),e.\u0275\u0275queryRefresh(pe=e.\u0275\u0275loadQuery())&&(q.dashboardContent=pe.first),e.\u0275\u0275queryRefresh(pe=e.\u0275\u0275loadQuery())&&(q.editWidgetComponent=pe.first),e.\u0275\u0275queryRefresh(pe=e.\u0275\u0275loadQuery())&&(q.dashboardWidgetSelectComponent=pe.first)}},hostVars:2,hostBindings:function(j,q){2&j&&e.\u0275\u0275classMap(q.dashboardPageClass)},inputs:{embedded:"embedded",currentState:"currentState",hideToolbar:"hideToolbar",syncStateWithQueryParam:"syncStateWithQueryParam",dashboard:"dashboard",parentDashboard:"parentDashboard",popoverComponent:"popoverComponent",parentAliasController:"parentAliasController"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:63,vars:107,consts:[["cheatSheetComponent",""],["timewindowTemplate",""],["dashboardContainer",""],["dashboardContent",""],["versionControlIconButton",""],["versionControlButton",""],["tbEditWidget",""],["dashboardWidgetSelect",""],["tb-toast","","tb-fullscreen","",1,"tb-dashboard-page","mat-content","flex-1",3,"fullscreenElement","fullscreen"],[1,"tb-dashboard-toolbar"],[3,"triggerClick","forceFullscreen","toolbarOpened"],[1,"tb-dashboard-action-panels","flex","flex-col","items-stretch","justify-center","gt-sm:flex-row","gt-sm:items-center","gt-sm:justify-between"],[1,"tb-dashboard-action-panel","tb-left-panel"],["class","gt-sm:!hidden","displayUserInfo","true",4,"ngIf"],[4,"ngIf"],[1,"lt-md:flex-1",3,"statesControllerId","dashboardCtrl","dashboardId","isMobile","state","currentState","syncStateWithQueryParam","states"],["aria-label","dashboard_logo","class","dashboard_logo",3,"src",4,"ngIf"],[1,"tb-dashboard-action-panel"],["mat-icon-button","","matTooltipPosition","below",1,"close-action",3,"click","matTooltip"],["class","lt-md:!hidden","displayUserInfo","true",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below",3,"click","matTooltip"],["mat-icon-button","","matTooltipPosition","below",1,"xs:!hidden",3,"click","matTooltip"],[4,"ngIf","ngIfElse"],["tooltipPosition","below",3,"aliasController"],[3,"ngModel","customerId","dashboardsScope","ngModelChange",4,"ngIf"],["tb-toast","","toastTarget","dashboardRoot",1,"tb-dashboard-container","tb-absolute-fill"],["hasBackdrop","false",1,"tb-absolute-fill","tb-dashboard-drawer-container"],[1,"flex","flex-col","items-start","justify-center"],["class","tb-dashboard-title",3,"color",4,"ngIf"],[1,"tb-dashboard-layouts","flex-1"],["id","tb-right-layout","style","border-left: none","disableClose","true","position","end",3,"min-width","max-width","height","mode","opened","openedChange",4,"ngIf"],["id","tb-main-layout"],[3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode","parentDashboard","popoverComponent"],["class","layout-filler",3,"!hidden",4,"ngIf"],["data-html2canvas-ignore","","class","tb-header-buttons tb-enter-edit-mode flex flex-row flex-wrap items-end justify-start",4,"ngIf"],["data-html2canvas-ignore","","class","tb-powered-by-footer",3,"color",4,"ngIf"],["disableClose","","mode","over","position","end",1,"tb-details-drawer",3,"openedStart","closed","opened"],["class","flex-1",3,"headerTitle","headerSubtitle","isReadOnly","closeDetails",4,"ngIf"],["class","flex-1","headerHeightPx","64","backgroundColor","#cfd8dc",3,"headerTitle","isShowSearch","isReadOnly","isEdit","closeDetails","closeSearch",4,"ngIf"],["displayUserInfo","true",1,"gt-sm:!hidden"],[1,"gt-sm:!hidden",2,"flex","1 1 100%"],[1,"flex","flex-row","items-center","justify-end","lg:gap-1.5","lt-md:flex-1","lt-lg:gap-0.75","gt-sm:items-center","gt-sm:justify-start","gt-lg:gap-3"],["vertical","",1,"tb-toolbar-divider"],["mat-icon-button","","matTooltipPosition","below",1,"gt-md:!hidden",3,"click","matTooltip"],["mat-button","","matTooltipPosition","below",1,"lt-lg:!hidden",3,"click","matTooltip"],[3,"dashboardCtrl"],["aria-label","dashboard_logo",1,"dashboard_logo",3,"src"],["displayUserInfo","true",1,"lt-md:!hidden"],["mat-stroked-button","",1,"lt-lg:!hidden",3,"click"],["mat-icon-button","","matTooltipPosition","below",1,"gt-md:!hidden",3,"click","disabled","matTooltip"],["mat-stroked-button","",1,"lt-lg:!hidden",3,"click","disabled"],["mat-icon-button","","matTooltipPosition","below",1,"gt-md:!hidden",3,"click","matTooltip","disabled"],["mat-button","",1,"lt-lg:!hidden",3,"click","disabled"],["mat-icon-button","","matTooltipPosition","below",1,"lt-lg:!hidden","gt-lg:!hidden",3,"click","matTooltip"],["mat-button","","matTooltipPosition","below",1,"lt-xl:!hidden",3,"click","matTooltip"],["mat-icon-button","","matTooltipPosition","below",1,"gt-lg:!hidden",3,"click","matTooltip"],["asButton","","flatButton","","tooltipPosition","below","aggregation","true","timezone","true",1,"lt-xl:!hidden",3,"ngModelChange","displayTimewindowValue","isEdit","ngModel"],["hideLabel","","tooltipPosition","below","aggregation","true","timezone","true",1,"gt-lg:!hidden",3,"ngModelChange","isEdit","ngModel"],["hideLabel","","tooltipPosition","below","aggregation","true","timezone","true",1,"gt-md:!hidden",3,"ngModelChange","isEdit","ngModel"],["tooltipPosition","below","aggregation","true","timezone","true",1,"lt-lg:!hidden",3,"ngModelChange","isEdit","ngModel"],["mat-stroked-button","","matTooltipPosition","below",1,"lt-lg:!hidden",3,"click","matTooltip"],[3,"ngModelChange","ngModel","customerId","dashboardsScope"],[1,"tb-dashboard-title"],["subscriptSizing","dynamic",1,"mat-block","tb-appearance-transparent"],["translate",""],["matInput","","required","","name","title",1,"tb-dashboard-title",3,"ngModelChange","ngModel"],["id","tb-right-layout","disableClose","true","position","end",2,"border-left","none",3,"openedChange","mode","opened"],[2,"height","100%",3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode","parentDashboard","popoverComponent"],[1,"layout-filler"],["data-html2canvas-ignore","",1,"tb-header-buttons","tb-enter-edit-mode","flex","flex-row","flex-wrap","items-end","justify-start"],["color","primary","mat-mini-fab","","matTooltipPosition","above",1,"tb-btn-header","tb-btn-edit",3,"click","matTooltip"],["color","primary","mat-mini-fab","","matTooltipPosition","below",1,"tb-btn-header","tb-btn-edit",3,"click","disabled","matTooltip"],["data-html2canvas-ignore","",1,"tb-powered-by-footer"],["href","https://thingsboard.io","target","_blank"],[1,"flex-1",3,"closeDetails","headerTitle","headerSubtitle","isReadOnly"],[1,"details-buttons","flex","flex-row","items-center","justify-start","gap-4"],["appearance","fill-invert","selectMediaBreakpoint","xs",3,"ngModel","ngModelChange",4,"ngIf"],[3,"tb-help"],[3,"revertWidgetConfig","applyWidgetConfig","dashboard","aliasController","stateController","widgetEditMode","widget","widgetLayout","showLayoutConfig","isDefaultBreakpoint"],["appearance","fill-invert","selectMediaBreakpoint","xs",3,"ngModelChange","ngModel"],["value","basic"],["value","advanced"],["headerHeightPx","64","backgroundColor","#cfd8dc",1,"flex-1",3,"closeDetails","closeSearch","headerTitle","isShowSearch","isReadOnly","isEdit"],[1,"prefix-title-buttons",2,"height","28px","margin-right","12px"],["mat-icon-button","","type","button",1,"tb-mat-28",3,"click"],["class","search-pane flex flex-row",4,"ngIf"],["class","details-buttons flex flex-row items-center justify-start",4,"ngIf"],[3,"aliasController","filterWidgetTypes","scadaFirst","widgetSelected",4,"ngIf"],[1,"search-pane","flex","flex-row"],[1,"flex-1",3,"ngModelChange","ngModel","placeholder"],[1,"details-buttons","flex","flex-row","items-center","justify-start"],["mat-button","","type","button",3,"click",4,"ngIf"],["appearance","fill-invert","disablePagination","","selectMediaBreakpoint","xs",3,"ngModel","ngModelChange",4,"ngIf"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","type","button",3,"click"],["appearance","fill-invert","disablePagination","","selectMediaBreakpoint","xs",3,"ngModelChange","ngModel"],["value","bundles"],["value","allWidgets"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","matTooltip"],["value","ALL"],["value","ACTUAL"],["value","DEPRECATED"],[3,"widgetSelected","aliasController","filterWidgetTypes","scadaFirst"]],template:function(j,q){if(1&j){const pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275element(1,"tb-hotkeys-cheatsheet",null,0),e.\u0275\u0275elementStart(3,"section",9)(4,"tb-dashboard-toolbar",10),e.\u0275\u0275listener("triggerClick",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.openToolbar())}),e.\u0275\u0275elementStart(5,"div",11)(6,"div",12),e.\u0275\u0275template(7,bt,1,0,"tb-user-menu",13)(8,Mt,15,10,"ng-container",14),e.\u0275\u0275element(9,"tb-states-component",15),e.\u0275\u0275template(10,ze,11,9,"ng-container",14)(11,vt,3,5,"img",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",17)(13,"button",18),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.closeToolbar())}),e.\u0275\u0275elementStart(15,"mat-icon"),e.\u0275\u0275text(16,"arrow_forward"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(17,tt,1,0,"tb-user-menu",19),e.\u0275\u0275elementStart(18,"button",20),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.toggleLayouts())}),e.\u0275\u0275elementStart(20,"mat-icon"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"button",21),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.isFullscreen=!q.isFullscreen)}),e.\u0275\u0275elementStart(24,"mat-icon"),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"button",20),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275listener("click",function(Ge){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.exportDashboard(Ge))}),e.\u0275\u0275elementStart(28,"mat-icon"),e.\u0275\u0275text(29,"file_download"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(30,Ye,10,6,"ng-container",14)(31,Qe,24,24,"ng-container",14)(32,nt,13,9,"ng-container",14)(33,ot,11,9,"ng-container",14)(34,gt,11,9,"ng-container",14)(35,rt,11,9,"ng-container",14),e.\u0275\u0275elementStart(36,"button",20),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275listener("click",function(Ge){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.updateDashboardImage(Ge))}),e.\u0275\u0275elementStart(38,"mat-icon"),e.\u0275\u0275text(39,"wallpaper"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(40,Ze,3,5,"ng-container",22)(41,$e,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(43,Oe,11,9,"ng-container",14),e.\u0275\u0275element(44,"tb-filters-edit",23)(45,"tb-aliases-entity-select",23),e.\u0275\u0275template(46,Fe,1,3,"tb-dashboard-select",24),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"section",25,2)(49,"mat-drawer-container",26)(50,"mat-drawer-content",27,3),e.\u0275\u0275template(52,le,7,12,"section",28),e.\u0275\u0275elementStart(53,"mat-drawer-container",29),e.\u0275\u0275template(54,we,2,18,"mat-drawer",30),e.\u0275\u0275elementStart(55,"mat-drawer-content",31),e.\u0275\u0275element(56,"tb-dashboard-layout",32),e.\u0275\u0275template(57,qe,3,8,"div",33),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(58,lt,15,21,"section",34)(59,Kt,5,3,"section",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"mat-drawer",36),e.\u0275\u0275listener("openedStart",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.detailsDrawerOpenedStart())})("closed",function(){return e.\u0275\u0275restoreView(pe),e.\u0275\u0275resetView(q.detailsDrawerClosed())}),e.\u0275\u0275template(61,Vt,6,13,"tb-details-panel",37)(62,Ne,11,19,"tb-details-panel",38),e.\u0275\u0275elementEnd()()()()}if(2&j){const pe=e.\u0275\u0275reference(2),xe=e.\u0275\u0275reference(42);e.\u0275\u0275classProp("mobile-app",q.isMobileApp&&!q.isEdit),e.\u0275\u0275property("fullscreenElement",q.elRef.nativeElement)("fullscreen",q.widgetEditMode||q.iframeMode||q.forceFullscreen||q.isFullscreen),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("tb-dashboard-toolbar-opened",q.toolbarOpened)("tb-dashboard-toolbar-closed",!q.toolbarOpened),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",q.widgetEditMode||q.hideToolbar),e.\u0275\u0275property("forceFullscreen",q.forceFullscreen)("toolbarOpened",q.toolbarOpened),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",q.isMobileApp&&!q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.isPublicUser()&&q.forceFullscreen),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("statesControllerId",q.isEdit?"default":q.dashboardConfiguration.settings.stateControllerId)("dashboardCtrl",q)("dashboardId",q.setStateDashboardId?q.dashboard.id.id:"")("isMobile",q.isMobile)("state",q.dashboardCtx.state)("currentState",q.currentState)("syncStateWithQueryParam",q.syncStateWithQueryParam)("states",q.dashboardConfiguration.states),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.showDashboardLogo()),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!q.showCloseToolbar()),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(14,97,"dashboard.close-toolbar")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!q.isPublicUser()&&q.forceFullscreen),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!q.showRightLayoutSwitch()),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(19,99,q.isRightLayoutOpened?"dashboard.hide-details":"dashboard.show-details")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(q.isRightLayoutOpened?"arrow_back":"menu"),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",q.hideFullscreenButton()),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(23,101,q.isFullscreen?"fullscreen.exit":"fullscreen.expand")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(q.isFullscreen?"fullscreen_exit":"fullscreen"),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!q.currentDashboardId||q.isMobileApp||!q.displayExport()||q.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(27,103,"dashboard.export")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!q.readonly&&!q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.currentDashboardId&&q.isEdit&&q.isTenantAdmin()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!q.currentDashboardId||q.isEdit||q.isMobileApp||!q.isTenantAdmin()||!q.displayUpdateDashboardImage()),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(37,105,"dashboard.update-image")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",q.isEdit)("ngIfElse",xe),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",q.isEdit||!q.displayFilters()),e.\u0275\u0275property("aliasController",q.dashboardCtx.aliasController),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",q.isEdit||!q.displayEntitiesSelect()),e.\u0275\u0275property("aliasController",q.dashboardCtx.aliasController),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.isEdit&&!q.widgetEditMode&&!q.embedded&&q.displayDashboardsSelect()),e.\u0275\u0275advance(),e.\u0275\u0275classProp("is-fullscreen",q.forceFullscreen)("tb-dashboard-toolbar-opened",q.toolbarOpened)("tb-dashboard-toolbar-animated",q.isToolbarOpenedAnimate)("tb-dashboard-toolbar-closed",!q.toolbarOpened),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!q.widgetEditMode),e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-shrinked",q.isEditingWidget),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.layouts.right.show),e.\u0275\u0275advance(),e.\u0275\u0275styleProp("width",q.mainLayoutSize.width)("height",q.mainLayoutSize.height),e.\u0275\u0275classProp("!hidden",!q.layouts.main.show),e.\u0275\u0275advance(),e.\u0275\u0275styleProp("max-width",q.mainLayoutSize.maxWidth)("min-width",q.mainLayoutSize.minWidth),e.\u0275\u0275property("dashboardCheatSheet",pe)("layoutCtx",q.mobileDisplayRightLayoutFirst?q.layouts.right.layoutCtx:q.layouts.main.layoutCtx)("dashboardCtx",q.dashboardCtx)("isEdit",q.isEdit)("isEditingWidget",q.isEditingWidget)("isMobile",q.forceDashboardMobileMode)("widgetEditMode",q.widgetEditMode)("parentDashboard",q.parentDashboard)("popoverComponent",q.popoverComponent),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",q.isEdit),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.readonly&&(q.hideToolbar||q.widgetEditMode)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.embedded),e.\u0275\u0275advance(),e.\u0275\u0275property("opened",q.isEditingWidget||q.isAddingWidget),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.isEditingWidgetClosed),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!q.isAddingWidgetClosed&&!q.widgetEditMode)}},styles:['@charset "UTF-8";tb-dashboard-page{display:flex;width:100%;height:100%}div.tb-dashboard-page.mat-content{overflow:hidden}div.tb-dashboard-page section.tb-dashboard-title{position:relative;padding-left:20px;max-height:60px}div.tb-dashboard-page section.tb-dashboard-title .mat-mdc-form-field.mat-form-field-appearance-fill.tb-appearance-transparent .mat-mdc-text-field-wrapper .mat-mdc-form-field-infix{width:100%;padding-top:20px}div.tb-dashboard-page section.tb-dashboard-title .mat-mdc-form-field.mat-form-field-appearance-fill.tb-appearance-transparent .mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{top:24px}div.tb-dashboard-page section.tb-dashboard-title input.tb-dashboard-title{height:38px;font-size:2rem;font-weight:500;letter-spacing:.005em}div.tb-dashboard-page section.tb-dashboard-toolbar{position:absolute;top:0;left:0;z-index:13;pointer-events:none}div.tb-dashboard-page section.tb-dashboard-toolbar .dashboard_logo{height:75%;margin-right:16px}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-opened{right:0}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-closed{right:18px;transition:right .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page .mat-divider-vertical.tb-toolbar-divider{border-right-color:#ffffffbf;height:30px}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:84px}@media screen and (min-width: 960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:64px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:84px}@media screen and (min-width: 960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:50px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen).tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2)}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed{margin-top:0}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed.tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page.mobile-app .tb-dashboard-container.tb-dashboard-toolbar-opened{margin-top:40px}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts{width:100%}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts.tb-shrinked{width:max(40%,100% - 956px)}@media screen and (min-width: 2000px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts.tb-shrinked{width:max(40%,100% - 1192px)}}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts #tb-main-layout{display:flex}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts #tb-main-layout tb-dashboard-layout{width:100%}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts #tb-main-layout .layout-filler{flex:1;background:repeating-linear-gradient(-16deg,#d3d3d3,#d3d3d3 3px,#e0e0e0 3px 11px);border-bottom:2px dashed #bdbdbd;border-right:2px dashed #bdbdbd;writing-mode:vertical-rl;text-align:center;transform:rotate(180deg);color:#616161;letter-spacing:.25px}@media screen and (min-width: 960px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:85%!important}}@media screen and (min-width: 1280px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:min(85%,956px)!important}}@media screen and (min-width: 2000px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:min(60%,1192px)!important}}div.tb-dashboard-page section.tb-header-buttons.tb-enter-edit-mode{top:2px}div.tb-dashboard-page section.tb-header-buttons.tb-enter-edit-mode .mdc-fab.tb-btn-edit{opacity:.5}div.tb-dashboard-page section.tb-powered-by-footer{position:absolute;right:25px;bottom:5px;z-index:30;pointer-events:none}div.tb-dashboard-page section.tb-powered-by-footer span{font-size:12px}div.tb-dashboard-page section.tb-powered-by-footer span a{font-weight:700;text-decoration:none;pointer-events:all;border:none}\n'],encapsulation:2,changeDetection:0})}}},44495:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardSettingsDialogComponent:()=>ce});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(15753),G=n(27997),K=n(10951),H=n(56508),k=n(18530),Q=n(57786),z=n(56977),L=n(9310),B=n(7901),I=n(73955),U=n(60177),F=n(56877),a=n(88834),O=n(99213),P=n(67575),A=n(59042),u=n(53719),m=n(55911),p=n(82798),v=n(14823),T=n(30450),C=n(9454),_=n(62720),E=n(86763);const f=se=>({type:se});function g(se,J){1&se&&e.\u0275\u0275element(0,"mat-progress-bar",12)}function y(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-option",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&se){const de=J.$implicit,ye=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",de),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",ye.getStatesControllerTranslation(de)," ")}}function b(se,J){1&se&&(e.\u0275\u0275element(0,"tb-css",37),e.\u0275\u0275pipe(1,"translate")),2&se&&e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(1,1,"dashboard.dashboard-css"))}function D(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-form-field",15)(6,"mat-select",16),e.\u0275\u0275template(7,y,2,2,"mat-option",17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",18)(9,"div",19),e.\u0275\u0275text(10,"dashboard.title-settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",14)(12,"mat-slide-toggle",20),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"tb-color-input",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",18)(17,"div",19),e.\u0275\u0275text(18,"dashboard.dashboard-logo-settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",22)(20,"mat-slide-toggle",23),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"tb-gallery-image-input",24),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",18)(26,"div",19),e.\u0275\u0275text(27,"dashboard.toolbar-settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-slide-toggle",25),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-slide-toggle",26),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"mat-slide-toggle",27),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"mat-slide-toggle",28),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"mat-slide-toggle",29),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"mat-slide-toggle",30),e.\u0275\u0275text(44),e.\u0275\u0275pipe(45,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"mat-slide-toggle",31),e.\u0275\u0275text(47),e.\u0275\u0275pipe(48,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"mat-slide-toggle",32),e.\u0275\u0275text(50),e.\u0275\u0275pipe(51,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"mat-expansion-panel",33)(53,"mat-expansion-panel-header")(54,"mat-panel-description",34),e.\u0275\u0275text(55," dashboard.advanced-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(56,b,2,3,"ng-template",35),e.\u0275\u0275elementEnd()()),2&se){const de=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",de.settingsFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,14,"dashboard.state-controller")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",de.stateControllerIds),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,16,"dashboard.title")," "),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,18,"dashboard.display-dashboard-logo")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(24,20,"dashboard.dashboard-logo-image")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(30,22,"dashboard.hide-toolbar")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,24,"dashboard.toolbar-always-open")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(36,26,"dashboard.display-dashboards-selection")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(39,28,"dashboard.display-entities-selection")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(42,30,"dashboard.display-filters")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(45,32,"dashboard.display-dashboard-timewindow")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(48,34,"dashboard.display-dashboard-export")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(51,36,"dashboard.display-update-dashboard-image")," ")}}function w(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-option",36),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se){const de=J.$implicit,ye=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",de),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,ye.viewFormatTypeTranslationMap.get(de))," ")}}function ee(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",55),e.\u0275\u0275text(2,"dashboard.view-format"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",15)(4,"mat-select",56),e.\u0275\u0275template(5,w,3,4,"mat-option",17),e.\u0275\u0275elementEnd()()()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",de.viewFormatTypes)}}function _e(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-form-field",57),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"input",58),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("matTooltipDisabled",!(de.gridSettingsFormGroup.get("columns").invalid&&de.gridSettingsFormGroup.get("columns").touched))("matTooltip",e.\u0275\u0275pipeBind1(1,3,de.gridSettingsFormGroup.get("columns").hasError("required")?"dashboard.columns-count-required":de.gridSettingsFormGroup.get("columns").hasError("min")?"dashboard.min-columns-count-message":"dashboard.max-columns-count-message")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"widget-config.set"))}}function ve(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-option",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&se){const de=J.$implicit;e.\u0275\u0275property("value",de),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",de," ")}}function Ee(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-form-field",15)(1,"mat-select",59),e.\u0275\u0275template(2,ve,2,2,"mat-option",17),e.\u0275\u0275elementEnd()()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",de.scadaColumns)}}function $(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",2),e.\u0275\u0275text(2,"dashboard.widgets-margins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",57),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275element(5,"input",60),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("matTooltipDisabled",!(de.gridSettingsFormGroup.get("margin").invalid&&de.gridSettingsFormGroup.get("margin").touched))("matTooltip",e.\u0275\u0275pipeBind1(4,3,de.gridSettingsFormGroup.get("margin").hasError("required")?"dashboard.margin-required":de.gridSettingsFormGroup.get("margin").hasError("min")?"dashboard.min-margin-message":"dashboard.max-margin-message")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(6,5,"widget-config.set"))}}function be(se,J){1&se&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-slide-toggle",61),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&se&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"dashboard.apply-outer-margin")," "))}function Te(se,J){1&se&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-slide-toggle",62),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&se&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"dashboard.autofill-height")," "))}function oe(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",2),e.\u0275\u0275text(2,"dashboard.row-height"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",42),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275element(5,"input",63),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementStart(7,"span",64),e.\u0275\u0275text(8,"px"),e.\u0275\u0275elementEnd()()()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("matTooltipDisabled",!(de.gridSettingsFormGroup.get("rowHeight").invalid&&de.gridSettingsFormGroup.get("rowHeight").touched))("matTooltip",e.\u0275\u0275pipeBind1(4,3,de.gridSettingsFormGroup.get("rowHeight").hasError("required")?"dashboard.row-height-required":de.gridSettingsFormGroup.get("rowHeight").hasError("min")?"dashboard.min-row-height-message":"dashboard.max-row-height-message")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(6,5,"widget-config.set"))}}function R(se,J){1&se&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-slide-toggle",65),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&se&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"dashboard.display-first-in-mobile-view")," "))}function N(se,J){1&se&&(e.\u0275\u0275elementStart(0,"div",22)(1,"mat-slide-toggle",66),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&se&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"dashboard.autofill-height")," "))}function Z(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",2),e.\u0275\u0275text(2,"dashboard.mobile-row-height"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",42),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275element(5,"input",67),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementStart(7,"span",64),e.\u0275\u0275text(8,"px"),e.\u0275\u0275elementEnd()()()),2&se){const de=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275property("matTooltipDisabled",!(de.gridSettingsFormGroup.get("mobileRowHeight").invalid&&de.gridSettingsFormGroup.get("mobileRowHeight").touched))("matTooltip",e.\u0275\u0275pipeBind1(4,3,de.gridSettingsFormGroup.get("mobileRowHeight").hasError("required")?"dashboard.mobile-row-height-required":de.gridSettingsFormGroup.get("mobileRowHeight").hasError("min")?"dashboard.min-mobile-row-height-message":"dashboard.max-mobile-row-height-message")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(6,5,"widget-config.set"))}}function Y(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",18)(1,"div",19),e.\u0275\u0275text(2,"dashboard.mobile-layout"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,R,4,3,"div",45)(4,N,4,3,"div",45)(5,Z,9,7,"div",39),e.\u0275\u0275elementEnd()),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",de.isRightLayout),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!de.isScada()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!de.isScada())}}function ge(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",13)(1,"div",18)(2,"div",38),e.\u0275\u0275text(3,"dashboard.layout-settings-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ee,6,1,"div",39),e.\u0275\u0275elementStart(5,"div",14)(6,"div",2),e.\u0275\u0275text(7,"dashboard.columns-count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,_e,4,7,"mat-form-field",40)(9,Ee,3,1,"mat-form-field",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",14)(11,"div",2),e.\u0275\u0275text(12,"dashboard.min-layout-width"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",42),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275element(15,"input",43),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementStart(17,"span",44),e.\u0275\u0275text(18,"dashboard.columns-suffix"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,$,7,7,"div",39)(20,be,4,3,"div",45)(21,Te,4,3,"div",45)(22,oe,9,7,"div",39),e.\u0275\u0275elementStart(23,"div",14)(24,"div",2),e.\u0275\u0275text(25,"dashboard.background-color"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"tb-color-input",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"tb-gallery-image-input",47),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementStart(29,"div",14)(30,"div"),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"mat-form-field",15)(34,"mat-select",48)(35,"mat-option",49),e.\u0275\u0275text(36,"Fit width"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"mat-option",50),e.\u0275\u0275text(38,"Fit height"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"mat-option",51),e.\u0275\u0275text(40,"Cover"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"mat-option",52),e.\u0275\u0275text(42,"Contain"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"mat-option",53),e.\u0275\u0275text(44,"Original size"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(45,Y,6,3,"div",54),e.\u0275\u0275elementEnd()),2&se){const de=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",de.gridSettingsFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("translateParams",e.\u0275\u0275pureFunction1(23,f,de.layoutSettingsType)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",de.isDefaultLayout&&!de.isDefaultBreakpoint),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!de.isScada()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",de.isScada()),e.\u0275\u0275advance(4),e.\u0275\u0275property("matTooltipDisabled",!(de.gridSettingsFormGroup.get("minColumns").invalid&&de.gridSettingsFormGroup.get("minColumns").touched))("matTooltip",e.\u0275\u0275pipeBind1(14,15,de.gridSettingsFormGroup.get("minColumns").hasError("required")?"dashboard.columns-count-required":de.gridSettingsFormGroup.get("minColumns").hasError("min")?"dashboard.min-columns-count-message":"dashboard.max-columns-count-message")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(16,17,"widget-config.set")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!de.isScada()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!de.isScada()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!de.isScada()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",de.isDefaultLayout&&!de.isDefaultBreakpoint),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(28,19,"dashboard.background-image")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(32,21,"dashboard.background-size-mode")),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",!de.isScada()&&de.isDefaultBreakpoint)}}class ce extends V.m{constructor(J,de,ye,re,ne,ie,Ae,Pe,Be){if(super(J,de,ne),this.store=J,this.router=de,this.data=ye,this.errorStateMatcher=re,this.dialogRef=ne,this.fb=ie,this.translate=Ae,this.statesControllerService=Pe,this.dashboardUtils=Be,this.viewFormatTypes=S.ol,this.viewFormatTypeTranslationMap=S.wn,this.isRightLayout=!1,this.submitted=!1,this.scadaColumns=[],this.layoutType=S.p5.default,this.breakpointId="default",this.destroy$=new k.B,this.stateControllerTranslationMap=new Map([["default","dashboard.state-controller-default"]]),this.stateControllerIds=Object.keys(this.statesControllerService.getStateControllers()),this.settings=this.data.settings,this.gridSettings=this.data.gridSettings,this.isRightLayout=this.data.isRightLayout,this.breakpointId=this.data.breakpointId,this.settings){const Ke=!!(0,G.b0)(this.settings.showTitle)||this.settings.showTitle,Xe=!(0,G.b0)(this.settings.showDashboardLogo)&&this.settings.showDashboardLogo,at=!(0,G.b0)(this.settings.hideToolbar)&&this.settings.hideToolbar;this.settingsFormGroup=this.fb.group({stateControllerId:[(0,G.b0)(this.settings.stateControllerId)?"entity":this.settings.stateControllerId,[]],showTitle:[Ke,[]],titleColor:[{value:(0,G.b0)(this.settings.titleColor)?"rgba(0,0,0,0.870588)":this.settings.titleColor,disabled:!Ke},[]],showDashboardLogo:[Xe,[]],dashboardLogoUrl:[{value:(0,G.b0)(this.settings.dashboardLogoUrl)?null:this.settings.dashboardLogoUrl,disabled:!Xe},[]],hideToolbar:[at,[]],toolbarAlwaysOpen:[{value:!!(0,G.b0)(this.settings.toolbarAlwaysOpen)||this.settings.toolbarAlwaysOpen,disabled:at},[]],showDashboardsSelect:[{value:!!(0,G.b0)(this.settings.showDashboardsSelect)||this.settings.showDashboardsSelect,disabled:at},[]],showEntitiesSelect:[{value:!!(0,G.b0)(this.settings.showEntitiesSelect)||this.settings.showEntitiesSelect,disabled:at},[]],showFilters:[{value:!!(0,G.b0)(this.settings.showFilters)||this.settings.showFilters,disabled:at},[]],showDashboardTimewindow:[{value:!!(0,G.b0)(this.settings.showDashboardTimewindow)||this.settings.showDashboardTimewindow,disabled:at},[]],showDashboardExport:[{value:!!(0,G.b0)(this.settings.showDashboardExport)||this.settings.showDashboardExport,disabled:at},[]],showUpdateDashboardImage:[{value:!!(0,G.b0)(this.settings.showUpdateDashboardImage)||this.settings.showUpdateDashboardImage,disabled:at},[]],dashboardCss:[(0,G.b0)(this.settings.dashboardCss)?"":this.settings.dashboardCss,[]]}),this.settingsFormGroup.get("stateControllerId").valueChanges.pipe((0,z.Q)(this.destroy$)).subscribe(bt=>{"default"!==bt&&this.settingsFormGroup.get("toolbarAlwaysOpen").setValue(!0)}),this.settingsFormGroup.get("showTitle").valueChanges.pipe((0,z.Q)(this.destroy$)).subscribe(bt=>{bt?this.settingsFormGroup.get("titleColor").enable():this.settingsFormGroup.get("titleColor").disable()}),this.settingsFormGroup.get("showDashboardLogo").valueChanges.pipe((0,z.Q)(this.destroy$)).subscribe(bt=>{bt?this.settingsFormGroup.get("dashboardLogoUrl").enable():this.settingsFormGroup.get("dashboardLogoUrl").disable()}),this.settingsFormGroup.get("hideToolbar").valueChanges.pipe((0,z.Q)(this.destroy$)).subscribe(bt=>{bt?(this.settingsFormGroup.get("toolbarAlwaysOpen").disable(),this.settingsFormGroup.get("showDashboardsSelect").disable(),this.settingsFormGroup.get("showEntitiesSelect").disable(),this.settingsFormGroup.get("showFilters").disable(),this.settingsFormGroup.get("showDashboardTimewindow").disable(),this.settingsFormGroup.get("showDashboardExport").disable(),this.settingsFormGroup.get("showUpdateDashboardImage").disable()):(this.settingsFormGroup.get("toolbarAlwaysOpen").enable(),this.settingsFormGroup.get("showDashboardsSelect").enable(),this.settingsFormGroup.get("showEntitiesSelect").enable(),this.settingsFormGroup.get("showFilters").enable(),this.settingsFormGroup.get("showDashboardTimewindow").enable(),this.settingsFormGroup.get("showDashboardExport").enable(),this.settingsFormGroup.get("showUpdateDashboardImage").enable())})}else this.settingsFormGroup=this.fb.group({});if(this.gridSettings){(0,G.O9)(this.gridSettings.layoutType)&&(this.layoutType=this.gridSettings.layoutType),this.layoutType!==S.p5.divider?this.layoutSettingsType=this.dashboardUtils.getBreakpointName(this.breakpointId):this.isRightLayout?this.layoutSettingsType=this.translate.instant("layout.right"):this.layoutSettingsType=this.translate.instant("layout.left");let Ke=24;for(;Ke<=1008;)this.scadaColumns.push(Ke),Ke+=24;const Xe=!(0,G.b0)(this.gridSettings.mobileAutoFillHeight)&&this.gridSettings.mobileAutoFillHeight;if(this.gridSettingsFormGroup=this.fb.group({columns:[this.gridSettings.columns||24,[h.Validators.required,h.Validators.min(10),h.Validators.max(1008)]],minColumns:[this.gridSettings.minColumns||this.gridSettings.columns||24,[h.Validators.required,h.Validators.min(10),h.Validators.max(1008)]],margin:[(0,G.O9)(this.gridSettings.margin)?this.gridSettings.margin:10,[h.Validators.required,h.Validators.min(0),h.Validators.max(50)]],outerMargin:[!!(0,G.b0)(this.gridSettings.outerMargin)||this.gridSettings.outerMargin,[]],viewFormat:[(0,G.b0)(this.gridSettings.viewFormat)?S.LM.grid:this.gridSettings.viewFormat,[]],autoFillHeight:[!(0,G.b0)(this.gridSettings.autoFillHeight)&&this.gridSettings.autoFillHeight,[]],rowHeight:[(0,G.b0)(this.gridSettings.rowHeight)?70:this.gridSettings.rowHeight,[h.Validators.required,h.Validators.min(5),h.Validators.max(200)]],backgroundColor:[this.gridSettings.backgroundColor||"rgba(0,0,0,0)",[]],backgroundImageUrl:[this.gridSettings.backgroundImageUrl,[]],backgroundSizeMode:[this.gridSettings.backgroundSizeMode||"100%",[]],mobileAutoFillHeight:[Xe,[]],mobileRowHeight:[{value:(0,G.b0)(this.gridSettings.mobileRowHeight)?70:this.gridSettings.mobileRowHeight,disabled:Xe},[h.Validators.required,h.Validators.min(5),h.Validators.max(200)]]}),this.isRightLayout){const at=!(0,G.b0)(this.gridSettings.mobileDisplayLayoutFirst)&&this.gridSettings.mobileDisplayLayoutFirst;this.gridSettingsFormGroup.addControl("mobileDisplayLayoutFirst",this.fb.control(at,[]))}if(this.isScada()){this.gridSettingsFormGroup.get("margin").disable(),this.gridSettingsFormGroup.get("outerMargin").disable(),this.gridSettingsFormGroup.get("viewFormat").disable({emitEvent:!1}),this.gridSettingsFormGroup.get("rowHeight").disable(),this.gridSettingsFormGroup.get("autoFillHeight").disable({emitEvent:!1}),this.gridSettingsFormGroup.get("mobileAutoFillHeight").disable({emitEvent:!1}),this.gridSettingsFormGroup.get("mobileRowHeight").disable();const at=this.gridSettingsFormGroup.get("columns").value;if(at%24!=0){const bt=Math.min(1008,24*Math.ceil(at/24));this.gridSettingsFormGroup.get("columns").patchValue(bt)}}else(0,Q.h)(this.gridSettingsFormGroup.get("viewFormat").valueChanges,"default"!==this.breakpointId?this.gridSettingsFormGroup.get("autoFillHeight").valueChanges:this.gridSettingsFormGroup.get("mobileAutoFillHeight").valueChanges).pipe((0,z.Q)(this.destroy$)).subscribe(()=>{this.updateGridSettingsFormState()}),this.updateGridSettingsFormState();(this.layoutType===S.p5.default&&"default"!==this.breakpointId||this.isScada())&&(this.gridSettingsFormGroup.get("mobileAutoFillHeight").disable({emitEvent:!1}),this.gridSettingsFormGroup.get("mobileRowHeight").disable())}else this.gridSettingsFormGroup=this.fb.group({})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isScada(){return this.layoutType===S.p5.scada}get isDefaultLayout(){return this.layoutType===S.p5.default}get isDefaultBreakpoint(){return"default"===this.breakpointId}isErrorState(J,de){const ye=this.errorStateMatcher.isErrorState(J,de),re=!!(J&&J.invalid&&this.submitted);return ye||re}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0;let J=null,de=null;this.settings&&(J={...this.settings,...this.settingsFormGroup.getRawValue()}),this.gridSettings&&(de={...this.gridSettings,...this.gridSettingsFormGroup.getRawValue()}),this.dialogRef.close({settings:J,gridSettings:de})}getStatesControllerTranslation(J){return this.stateControllerTranslationMap.has(J)?this.translate.instant(this.stateControllerTranslationMap.get(J)):J}updateGridSettingsFormState(){if("default"===this.breakpointId)this.gridSettingsFormGroup.get("mobileAutoFillHeight").value?this.gridSettingsFormGroup.get("mobileRowHeight").disable():this.gridSettingsFormGroup.get("mobileRowHeight").enable();else{const J=this.gridSettingsFormGroup.get("autoFillHeight").value,de=this.gridSettingsFormGroup.get("viewFormat").value;de!==S.LM.list||J?this.gridSettingsFormGroup.get("rowHeight").disable():this.gridSettingsFormGroup.get("rowHeight").enable(),de===S.LM.list?(this.gridSettingsFormGroup.get("columns").disable(),this.gridSettingsFormGroup.get("minColumns").disable()):(this.gridSettingsFormGroup.get("columns").enable(),this.gridSettingsFormGroup.get("minColumns").enable())}}static{this.\u0275fac=function(de){return new(de||ce)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.FormBuilder),e.\u0275\u0275directiveInject(I.TranslateService),e.\u0275\u0275directiveInject(K.C),e.\u0275\u0275directiveInject(H.N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ce,selectors:[["tb-dashboard-settings-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:ce}]),e.\u0275\u0275InheritDefinitionFeature],decls:22,vars:18,consts:[[2,"width","750px",3,"ngSubmit"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","",1,"tb-form-panel","no-border","no-padding"],["class","tb-form-panel no-border no-padding",3,"formGroup",4,"ngIf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-row","space-between"],["appearance","outline","subscriptSizing","dynamic",1,"medium-width"],["required","","formControlName","stateControllerId"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],["formControlName","showTitle",1,"mat-slide"],["asBoxInput","","colorClearButton","","formControlName","titleColor"],[1,"tb-form-row"],["formControlName","showDashboardLogo",1,"mat-slide"],["formControlName","dashboardLogoUrl",1,"flex-1",3,"label"],["formControlName","hideToolbar",1,"mat-slide"],["formControlName","toolbarAlwaysOpen",1,"mat-slide"],["formControlName","showDashboardsSelect",1,"mat-slide"],["formControlName","showEntitiesSelect",1,"mat-slide"],["formControlName","showFilters",1,"mat-slide"],["formControlName","showDashboardTimewindow",1,"mat-slide"],["formControlName","showDashboardExport",1,"mat-slide"],["formControlName","showUpdateDashboardImage",1,"mat-slide"],[1,"tb-settings"],["translate","",1,"flex","items-stretch","justify-end"],["matExpansionPanelContent",""],[3,"value"],["formControlName","dashboardCss",3,"label"],["translate","",1,"tb-form-panel-title",3,"translateParams"],["class","tb-form-row space-between",4,"ngIf"],["appearance","outline","class","number medium-width tb-suffix-absolute","subscriptSizing","dynamic","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",3,"matTooltipDisabled","matTooltip",4,"ngIf"],["class","medium-width","appearance","outline","subscriptSizing","dynamic",4,"ngIf"],["appearance","outline","subscriptSizing","dynamic","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"number","medium-width",3,"matTooltipDisabled","matTooltip"],["matInput","","formControlName","minColumns","type","number","min","10","max","1008","step","1","required","",3,"placeholder"],["translate","","matSuffix",""],["class","tb-form-row",4,"ngIf"],["asBoxInput","","colorClearButton","","formControlName","backgroundColor"],["formControlName","backgroundImageUrl",1,"flex-1",3,"label"],["formControlName","backgroundSizeMode"],["value","100%"],["value","auto 100%"],["value","cover"],["value","contain"],["value","auto"],["class","tb-form-panel stroked",4,"ngIf"],["translate","",1,"fixed-title-width"],["formControlName","viewFormat"],["appearance","outline","subscriptSizing","dynamic","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"number","medium-width","tb-suffix-absolute",3,"matTooltipDisabled","matTooltip"],["matInput","","formControlName","columns","type","number","min","10","max","1008","step","1","required","",3,"placeholder"],["required","","formControlName","columns"],["matInput","","formControlName","margin","type","number","min","0","max","50","step","any","required","",3,"placeholder"],["formControlName","outerMargin",1,"mat-slide"],["formControlName","autoFillHeight",1,"mat-slide"],["matInput","","formControlName","rowHeight","type","number","min","5","max","200","step","any","required","",3,"placeholder"],["matSuffix",""],["formControlName","mobileDisplayLayoutFirst",1,"mat-slide"],["formControlName","mobileAutoFillHeight",1,"mat-slide"],["matInput","","formControlName","mobileRowHeight","type","number","min","5","max","200","step","any","required","",3,"placeholder"]],template:function(de,ye){1&de&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ye.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return ye.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,g,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",7),e.\u0275\u0275template(11,D,57,38,"div",8)(12,ge,46,25,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",9)(14,"button",10),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275listener("click",function(){return ye.cancel()}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"button",11),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()()()),2&de&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(ye.settings?"dashboard.settings":"layout.settings"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,8,ye.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ye.settings),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ye.gridSettings),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,10,ye.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(19,14,ye.isLoading$)||ye.settingsFormGroup.invalid||ye.gridSettingsFormGroup.invalid||!ye.settingsFormGroup.dirty&&!ye.gridSettingsFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,16,"action.save")," "))},dependencies:[U.NgForOf,U.NgIf,F.v,a.MatButton,a.MatIconButton,O.MatIcon,P.MatProgressBar,A.MatInput,u.MatFormField,u.MatSuffix,m.MatToolbar,c.MatDialogActions,c.MatDialogContent,p.MatSelect,t.MatOption,v.MatTooltip,T.MatSlideToggle,C.MatExpansionPanel,C.MatExpansionPanelHeader,C.MatExpansionPanelDescription,C.MatExpansionPanelContent,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NumberValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.MinValidator,h.MaxValidator,h.NgForm,h.FormGroupDirective,h.FormControlName,_.ColorInputComponent,I.TranslateDirective,E.GalleryImageInputComponent,U.AsyncPipe,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 8px 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3;width:fit-content}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings{box-shadow:none}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-content{overflow:visible}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-expansion-panel-header{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-expansion-panel-header:hover{background:none}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator{padding:2px}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-expansion-panel-header-description{align-items:center}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.tb-settings .tb-css-content-panel{margin:0 0 8px}[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content{font:inherit}']})}}},98679:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardWidgetSelectComponent:()=>Te});var e=n(31635),t=n(93953),c=n(39519),h=n(19104),V=n(57665),S=n(70152),G=n(23294),K=n(65245),H=n(96354),k=n(84412),Q=n(84572),z=n(27997),L=n(719),B=n(67496),I=n(29225),U=n(60177),F=n(90039),a=n(25596),O=n(9183),P=n(73955),A=n(44201),u=n(68762);const m=(oe,R)=>({fetchFunction:oe,filter:R}),p=()=>({maxWidth:"300px"}),v=()=>({emptyUrl:"/assets/widget-preview-empty.svg"});function T(oe,R){1&oe&&t.\u0275\u0275elementContainer(0)}function C(oe,R){if(1&oe&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,T,1,0,"ng-container",12),t.\u0275\u0275elementContainerEnd()),2&oe){const N=t.\u0275\u0275nextContext(2),Z=t.\u0275\u0275reference(5);t.\u0275\u0275advance(),t.\u0275\u0275property("ngTemplateOutlet",Z)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,m,N.widgetsFetchFunction,N.widgetsFilter))}}function _(oe,R){if(1&oe&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,C,2,5,"ng-container",11),t.\u0275\u0275elementContainerEnd()),2&oe){const N=t.\u0275\u0275nextContext(),Z=t.\u0275\u0275reference(7);t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",N.widgetsBundle)("ngIfElse",Z)}}function E(oe,R){1&oe&&t.\u0275\u0275elementContainer(0)}function f(oe,R){if(1&oe&&t.\u0275\u0275template(0,E,1,0,"ng-container",12),2&oe){const N=t.\u0275\u0275nextContext(),Z=t.\u0275\u0275reference(5);t.\u0275\u0275property("ngTemplateOutlet",Z)("ngTemplateOutletContext",t.\u0275\u0275pureFunction2(2,m,N.allWidgetsFetchFunction,N.allWidgetsFilter))}}function g(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275text(1,"widget.deprecated"),t.\u0275\u0275elementEnd())}function y(oe,R){if(1&oe){const N=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-card",14),t.\u0275\u0275listener("click",function(Y){const ge=t.\u0275\u0275restoreView(N).item,ce=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(ce.onWidgetClicked(Y,ge))}),t.\u0275\u0275elementStart(1,"div",15)(2,"div",16),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",17)(5,"div",18)(6,"div",19),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",20)(10,"span"),t.\u0275\u0275text(11,"i"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(12,g,2,0,"div",21),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"div",22),t.\u0275\u0275element(14,"div",23)(15,"img",24),t.\u0275\u0275pipe(16,"image"),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275elementEnd()()}if(2&oe){const N=R.item;t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("title",N.name),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",N.name," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,8,"widget."+N.widgetType+"-short")),t.\u0275\u0275advance(2),t.\u0275\u0275property("tbPopoverContent",N.description)("tbPopoverOverlayStyle",t.\u0275\u0275pureFunction0(15,p)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",N.deprecated),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("alt",N.title),t.\u0275\u0275property("src",t.\u0275\u0275pipeBind1(17,13,t.\u0275\u0275pipeBind2(16,10,N.image,t.\u0275\u0275pureFunction0(16,v))),t.\u0275\u0275sanitizeUrl)}}function b(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"div",26)(1,"span",27),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"mat-spinner",28),t.\u0275\u0275elementEnd()),2&oe&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"widget.loading-widgets")," "))}function D(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"span",29),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&oe){const N=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"bundles"===N.selectWidgetMode?"widgets-bundle.empty":"widget.no-widgets-text"))}}function w(oe,R){if(1&oe&&(t.\u0275\u0275element(0,"tb-scroll-grid",13),t.\u0275\u0275template(1,y,18,17,"ng-template",null,4,t.\u0275\u0275templateRefExtractor)(3,b,5,3,"ng-template",null,5,t.\u0275\u0275templateRefExtractor)(5,D,3,3,"ng-template",null,6,t.\u0275\u0275templateRefExtractor)),2&oe){const N=R.fetchFunction,Z=R.filter,Y=t.\u0275\u0275reference(2),ge=t.\u0275\u0275reference(4),ce=t.\u0275\u0275reference(6),se=t.\u0275\u0275nextContext(),J=t.\u0275\u0275reference(9);t.\u0275\u0275property("columns",se.columns)("itemSize",se.gridWidgetsItemSizeStrategy)("fetchFunction",N)("filter",Z)("itemCard",Y)("loadingCell",J)("dataLoading",ge)("noData",ce)}}function ee(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275text(1,"sys"),t.\u0275\u0275elementEnd())}function _e(oe,R){if(1&oe){const N=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-card",14),t.\u0275\u0275listener("click",function(Y){const ge=t.\u0275\u0275restoreView(N).item,ce=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(ce.selectBundle(Y,ge))}),t.\u0275\u0275elementStart(1,"div",15)(2,"div",16),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",18),t.\u0275\u0275template(5,ee,2,0,"div",30),t.\u0275\u0275elementStart(6,"div",20)(7,"span"),t.\u0275\u0275text(8,"i"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(9,"div",22),t.\u0275\u0275element(10,"div",23)(11,"img",24),t.\u0275\u0275pipe(12,"image"),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275elementEnd()()}if(2&oe){const N=R.item,Z=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("title",N.name),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",N.title," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Z.isSystem(N)),t.\u0275\u0275advance(),t.\u0275\u0275property("tbPopoverContent",N.description)("tbPopoverOverlayStyle",t.\u0275\u0275pureFunction0(12,p)),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("alt",N.title),t.\u0275\u0275property("src",t.\u0275\u0275pipeBind1(13,10,t.\u0275\u0275pipeBind2(12,7,N.image,t.\u0275\u0275pureFunction0(13,v))),t.\u0275\u0275sanitizeUrl)}}function ve(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"div",26)(1,"span",27),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"mat-spinner",31),t.\u0275\u0275elementEnd()),2&oe&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"widgets-bundle.loading-widgets-bundles")," "))}function Ee(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"span",32),t.\u0275\u0275text(1,"widgets-bundle.no-widgets-bundles-text"),t.\u0275\u0275elementEnd())}function $(oe,R){if(1&oe&&(t.\u0275\u0275element(0,"tb-scroll-grid",13),t.\u0275\u0275template(1,_e,14,14,"ng-template",null,7,t.\u0275\u0275templateRefExtractor)(3,ve,5,3,"ng-template",null,8,t.\u0275\u0275templateRefExtractor)(5,Ee,2,0,"ng-template",null,9,t.\u0275\u0275templateRefExtractor)),2&oe){const N=t.\u0275\u0275reference(2),Z=t.\u0275\u0275reference(4),Y=t.\u0275\u0275reference(6),ge=t.\u0275\u0275nextContext(),ce=t.\u0275\u0275reference(9);t.\u0275\u0275property("columns",ge.columns)("itemSize",ge.gridWidgetsItemSizeStrategy)("fetchFunction",ge.widgetBundlesFetchFunction)("filter",ge.widgetsBundleFilter)("itemCard",N)("loadingCell",ce)("dataLoading",Z)("noData",Y)}}function be(oe,R){1&oe&&(t.\u0275\u0275elementStart(0,"mat-card",33),t.\u0275\u0275element(1,"div",15),t.\u0275\u0275elementStart(2,"div",22),t.\u0275\u0275element(3,"div",23),t.\u0275\u0275elementEnd()())}class Te{set search(R){this.searchSubject.next(R)}get search(){return this.searchSubject.value}set filterWidgetTypes(R){this.filterWidgetTypes$.next(R)}get filterWidgetTypes(){return this.filterWidgetTypes$.value}set selectWidgetMode(R){this.selectWidgetMode$.value!==R&&("bundles"===R&&null===this.widgetsBundle$.value?(this.widgetTypes.clear(),this.hasDeprecated=!1):(this.widgetTypes=new Set(Object.keys(V.t_).map(N=>N)),this.hasDeprecated=!0),this.filterWidgetTypes$.next(null),this.deprecatedFilter$.next(V.Kn.ACTUAL),this.selectWidgetMode$.next(R))}get selectWidgetMode(){return this.selectWidgetMode$.value}set deprecatedFilter(R){this.deprecatedFilter$.next(R)}get deprecatedFilter(){return this.deprecatedFilter$.value}set widgetsBundle(R){this.widgetsBundle$.value!==R&&(null===R&&"allWidgets"!==this.selectWidgetMode$.value?(this.widgetTypes.clear(),this.hasDeprecated=!1):(this.widgetTypes=new Set(Object.keys(V.t_).map(N=>N)),this.hasDeprecated=!0),this.filterWidgetTypes$.next(null),this.deprecatedFilter$.next(V.Kn.ACTUAL),this.widgetsBundle$.next(R))}get widgetsBundle(){return this.widgetsBundle$.value}constructor(R,N){this.widgetsService=R,this.cd=N,this.searchSubject=new k.t(""),this.search$=this.searchSubject.asObservable().pipe((0,S.B)(150)),this.filterWidgetTypes$=new k.t(null),this.deprecatedFilter$=new k.t(V.Kn.ACTUAL),this.selectWidgetMode$=new k.t("bundles"),this.widgetsBundle$=new k.t(null),this.widgetTypes=new Set,this.hasDeprecated=!1,this.scadaFirst=!1,this.widgetSelected=new t.EventEmitter,this.columns={columns:2,breakpoints:{"screen and (min-width: 2000px)":5,"screen and (min-width: 1097px)":4,"gt-sm":3,"screen and (min-width: 721px)":4,"screen and (min-width: 485px)":3}},this.gridWidgetsItemSizeStrategy={defaultItemSize:160,itemSizeFunction:Z=>.8*(Z-24)+76},this.widgetsBundleFilter="",this.allWidgetsFilter={search:"",filter:null,deprecatedFilter:V.Kn.ACTUAL},this.widgetsFilter={search:"",filter:null,deprecatedFilter:V.Kn.ACTUAL,widgetsBundleId:null},this.widgetBundlesFetchFunction=(Z,Y,ge)=>{const ce=new L.Ek(Z,Y,ge,{property:"title",direction:B.O.ASC});return this.widgetsService.getWidgetBundles(ce,!0,!1,this.scadaFirst)},this.allWidgetsFetchFunction=(Z,Y,ge)=>{const ce=new L.Ek(Z,Y,ge.search,{property:"name",direction:B.O.ASC});return this.widgetsService.getWidgetTypes(ce,!1,!0,this.scadaFirst,ge.deprecatedFilter,ge.filter)},this.widgetsFetchFunction=(Z,Y,ge)=>{const ce=new L.Ek(Z,Y,ge.search,{property:"name",direction:B.O.ASC});return this.widgetsService.getBundleWidgetTypeInfos(ce,ge.widgetsBundleId,!0,ge.deprecatedFilter,ge.filter)},this.search$.pipe((0,G.F)(),(0,K.i)(1)).subscribe(Z=>{this.widgetsBundleFilter=Z,this.cd.markForCheck()}),(0,Q.z)({search:this.search$,filter:this.filterWidgetTypes$.asObservable(),deprecatedFilter:this.deprecatedFilter$.asObservable()}).pipe((0,G.F)((Z,Y)=>JSON.stringify(Z)===JSON.stringify(Y)),(0,K.i)(1)).subscribe(Z=>{this.allWidgetsFilter=Z,this.cd.markForCheck()}),(0,Q.z)({search:this.search$,widgetsBundleId:this.widgetsBundle$.pipe((0,H.T)(Z=>null!==Z?Z.id.id:null)),filter:this.filterWidgetTypes$.asObservable(),deprecatedFilter:this.deprecatedFilter$.asObservable()}).pipe((0,G.F)((Z,Y)=>JSON.stringify(Z)===JSON.stringify(Y)),(0,K.i)(1)).subscribe(Z=>{Z.widgetsBundleId&&(this.widgetsFilter=Z,this.cd.markForCheck())})}ngOnInit(){}onWidgetClicked(R,N){this.widgetSelected.emit(this.toWidgetInfo(N))}isSystem(R){return R&&R.tenantId.id===c.k}selectBundle(R,N){R.preventDefault(),this.widgetsBundle=N,(N.title?.toLowerCase().includes(this.search.toLowerCase())||N.description?.toLowerCase().includes(this.search.toLowerCase()))&&this.searchSubject.next("")}isObject(R){return(0,z.Gv)(R)}toWidgetInfo(R){return{typeFullFqn:(0,V.hy)(R),type:R.widgetType,title:R.name,image:R.image,description:R.description,deprecated:R.deprecated}}static{this.\u0275fac=function(N){return new(N||Te)(t.\u0275\u0275directiveInject(h.C),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:Te,selectors:[["tb-dashboard-widget-select"]],inputs:{aliasController:"aliasController",scadaFirst:"scadaFirst",search:"search",filterWidgetTypes:"filterWidgetTypes",selectWidgetMode:"selectWidgetMode",deprecatedFilter:"deprecatedFilter"},outputs:{widgetSelected:"widgetSelected"},decls:10,vars:2,consts:[["allWidgets",""],["widgets",""],["bundles",""],["widgetLoadingCard",""],["widgetCard",""],["loadingWidgets",""],["noWidgets",""],["widgetsBundleCard",""],["loadingWidgetBundles",""],["noWidgetBundles",""],[1,"tb-dashboard-widget-select"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"columns","itemSize","fetchFunction","filter","itemCard","loadingCell","dataLoading","noData"],["appearance","raised",1,"tb-widget-preview-card","flex","flex-col","gap-2",3,"click"],[1,"title-container"],[1,"widget-title",3,"title"],[1,"title-items-container"],[1,"title-items"],[1,"widget-type"],["tb-popover","","tbPopoverShowCloseButton","false",1,"info-banner","tb-primary-fill",3,"tbPopoverContent","tbPopoverOverlayStyle"],["class","widget-deprecated","translate","",4,"ngIf"],[1,"preview-container"],[1,"preview-spacer"],[1,"preview",3,"src","alt"],["translate","",1,"widget-deprecated"],[1,"tb-absolute-fill","flex","flex-col","items-center","justify-center"],[1,"mat-headline-5",2,"padding-bottom","20px"],["color","accent","strokeWidth","5"],[1,"mat-headline-5","tb-absolute-fill","flex","items-center","justify-center"],["class","widget-type",4,"ngIf"],["strokeWidth","5"],["translate","",1,"mat-headline-5","tb-absolute-fill","flex","items-center","justify-center"],["appearance","raised",1,"tb-widget-preview-card","loading-cell","flex","flex-col","gap-2"]],template:function(N,Z){if(1&N&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275template(1,_,2,2,"ng-container",11)(2,f,1,5,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)(4,w,7,8,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)(6,$,7,8,"ng-template",null,2,t.\u0275\u0275templateRefExtractor)(8,be,4,0,"ng-template",null,3,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&N){const Y=t.\u0275\u0275reference(3);t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf","bundles"===Z.selectWidgetMode)("ngIfElse",Y)}},dependencies:[U.NgIf,U.NgTemplateOutlet,F.TbPopoverDirective,a.MatCard,O.MatProgressSpinner,P.TranslateDirective,A.ScrollGridComponent,U.AsyncPipe,u.ImagePipe,P.TranslatePipe],styles:['@charset "UTF-8";.tb-dashboard-widget-select{background-color:#cfd8dc;position:absolute;inset:0}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card{cursor:pointer;transition:box-shadow .2s;padding:12px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card:hover{box-shadow:0 2px 6px 6px #0003,0 1px 4px 2px #00000024,0 1px 6px #0000001f}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container{height:32px;display:flex;flex-direction:row;gap:4px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .widget-title{flex:1;color:#000000c2;font-size:12px;font-style:normal;font-weight:500;line-height:16px;letter-spacing:.2px;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items-container{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .widget-deprecated{display:flex;height:12px;padding:0 2px;justify-content:flex-end;align-items:center;align-self:stretch;color:#d12730b8;font-size:11px;font-style:normal;font-weight:400;letter-spacing:.2px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items{display:flex;align-items:flex-start;gap:8px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items .widget-type{padding:1px 4px;border-radius:4px;background:#ecececa3;color:#0000008a;font-size:11px;font-style:normal;font-weight:500;line-height:16px;letter-spacing:.017px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items .info-banner{display:flex;width:18px;padding:1px 0;justify-content:center;align-items:center;border-radius:4px;color:#fff;font-size:11px;font-style:normal;font-weight:600;line-height:16px;letter-spacing:.017px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items .info-banner:before{opacity:.5}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .title-container .title-items .info-banner>span{z-index:1}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card.loading-cell{height:100%;min-height:200px}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card.loading-cell .preview-container,.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card.loading-cell .title-container{background:linear-gradient(110deg,#ececec 8%,#f5f5f5 18%,#ececec 33%);border-radius:5px;background-size:200% 100%;animation:1s shine linear infinite}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .preview-container{position:relative}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .preview-spacer{margin-top:80%}.tb-dashboard-widget-select .mat-mdc-card.tb-widget-preview-card .preview{position:absolute;inset:0;object-fit:contain;width:100%;height:100%}@keyframes shine{to{background-position-x:-200%}}\n'],encapsulation:2})}}(0,e.__decorate)([(0,I.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],Te.prototype,"scadaFirst",void 0)},57974:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EditWidgetComponent:()=>A});var e=n(31635),t=n(93953),c=n(69749),h=n(72356),V=n(27997),S=n(40248),G=n(29225),K=n(9310),H=n(34006),k=n(89417),Q=n(60177),z=n(88834),L=n(99213),B=n(89466),I=n(73955);const U=["widgetConfigComponent"];function F(u,m){if(1&u){const p=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(p);const T=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(T.previewMode=!1)}),t.\u0275\u0275elementStart(1,"mat-icon"),t.\u0275\u0275text(2,"chevron_left"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}2&u&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,1,"action.back")," "))}function a(u,m){if(1&u){const p=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(p);const T=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(T.previewMode=!0)}),t.\u0275\u0275elementStart(1,"mat-icon"),t.\u0275\u0275text(2,"visibility"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&u){const p=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",!p.widgetFormGroup.valid),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,2,"widget-config.preview")," ")}}function O(u,m){if(1&u){const p=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(p);const T=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(T.previewMode=!0)}),t.\u0275\u0275elementStart(1,"mat-icon"),t.\u0275\u0275text(2,"visibility"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&u){const p=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",!p.widgetFormGroup.valid),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,2,"widget-config.preview")," ")}}function P(u,m){if(1&u&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275element(1,"tb-widget-preview",17),t.\u0275\u0275elementEnd()),2&u){const p=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("aliasController",p.aliasController)("stateController",p.stateController)("dashboardTimewindow",p.dashboard.configuration.timewindow)("widget",p.widget)("widgetConfig",p.widgetFormGroup.get("widgetConfig").value.config)("previewWidth",p.widgetConfig.typeParameters.previewWidth)("previewHeight",p.widgetConfig.typeParameters.previewHeight)}}class A extends c.H{get widgetConfigMode(){return this.widgetConfigComponent?.widgetConfigMode}set widgetConfigMode(m){this.widgetConfigComponent.setWidgetConfigMode(m)}constructor(m,p,v,T){super(m),this.store=m,this.dialog=p,this.fb=v,this.widgetComponentService=T,this.showLayoutConfig=!0,this.isDefaultBreakpoint=!0,this.applyWidgetConfig=new t.EventEmitter,this.revertWidgetConfig=new t.EventEmitter,this.previewMode=!1,this.currentWidgetConfigChanged=!1,this.widgetFormGroup=this.fb.group({widgetConfig:[null]})}ngOnInit(){this.loadWidgetConfig()}ngOnChanges(m){let p=!1;for(const v of Object.keys(m)){const T=m[v];!T.firstChange&&T.currentValue!==T.previousValue&&["widget","widgetLayout"].includes(v)&&(p=!0)}p&&(this.currentWidgetConfigChanged?this.currentWidgetConfigChanged=!1:this.previewMode=!1,this.loadWidgetConfig())}onApplyWidgetConfig(){this.widgetFormGroup.valid&&(this.currentWidgetConfigChanged=!0,this.applyWidgetConfig.emit())}onRevertWidgetConfig(){this.currentWidgetConfigChanged=!0,this.revertWidgetConfig.emit()}loadWidgetConfig(){if(!this.widget)return;const m=this.widgetComponentService.getInstantWidgetInfo(this.widget),p=m.typeSettingsSchema||m.settingsSchema,v=m.typeDataKeySettingsSchema||m.dataKeySettingsSchema,T=m.typeLatestDataKeySettingsSchema||m.latestDataKeySettingsSchema,C=m.typeParameters,_=C?.dataKeySettingsFunction,E=m.actionSources,f=!(0,V.O9)(m.typeParameters)||!m.typeParameters.useCustomDatasources;let g,y,b;g=p&&""!==p?(0,V.Kg)(p)?JSON.parse(p):p:{},y=v&&""!==v?(0,V.Kg)(v)?JSON.parse(v):v:{},b=T&&""!==T?(0,V.Kg)(T)?JSON.parse(T):T:{},this.widgetConfig={widgetName:m.widgetName,config:this.widget.config,layout:this.widgetLayout,widgetType:this.widget.type,typeParameters:C,actionSources:E,isDataEnabled:f,settingsSchema:g,dataKeySettingsSchema:y,latestDataKeySettingsSchema:b,dataKeySettingsFunction:_,settingsDirective:m.settingsDirective,dataKeySettingsDirective:m.dataKeySettingsDirective,latestDataKeySettingsDirective:m.latestDataKeySettingsDirective,hasBasicMode:!!(0,V.f1)(m.hasBasicMode)&&m.hasBasicMode,basicModeDirective:m.basicModeDirective},this.widgetFormGroup.reset({widgetConfig:this.widgetConfig})}static{this.\u0275fac=function(p){return new(p||A)(t.\u0275\u0275directiveInject(K.Store),t.\u0275\u0275directiveInject(H.MatDialog),t.\u0275\u0275directiveInject(k.UntypedFormBuilder),t.\u0275\u0275directiveInject(h.j))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:A,selectors:[["tb-edit-widget"]],viewQuery:function(p,v){if(1&p&&t.\u0275\u0275viewQuery(U,5),2&p){let T;t.\u0275\u0275queryRefresh(T=t.\u0275\u0275loadQuery())&&(v.widgetConfigComponent=T.first)}},inputs:{dashboard:"dashboard",aliasController:"aliasController",stateController:"stateController",widgetEditMode:"widgetEditMode",widget:"widget",widgetLayout:"widgetLayout",showLayoutConfig:"showLayoutConfig",isDefaultBreakpoint:"isDefaultBreakpoint"},outputs:{applyWidgetConfig:"applyWidgetConfig",revertWidgetConfig:"revertWidgetConfig"},features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275NgOnChangesFeature],decls:22,vars:23,consts:[["widgetConfigComponent",""],[3,"formGroup"],[3,"disabled"],["formControlName","widgetConfig",3,"aliasController","functionsOnly","dashboard","widget","hideToggleHeader","showLayoutConfig","isDefaultBreakpoint"],[1,"tb-widget-config-header-prefix"],["mat-button","",3,"click",4,"ngIf"],["class","gt-sm:!hidden","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"tb-widget-config-header-suffix","flex","flex-row","items-center","justify-end","gap-3","lt-md:flex-1"],["class","lt-md:!hidden","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"flex","flex-row","items-center","justify-start","gap-3"],["mat-stroked-button","","color","primary",3,"click","disabled"],["mat-flat-button","","color","primary",3,"click","disabled"],["class","widget-preview-background",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","primary",1,"gt-sm:!hidden",3,"click","disabled"],["mat-button","","color","primary",1,"lt-md:!hidden",3,"click","disabled"],[1,"widget-preview-background"],[1,"widget-preview-section",3,"aliasController","stateController","dashboardTimewindow","widget","widgetConfig","previewWidth","previewHeight"]],template:function(p,v){if(1&p){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",1)(1,"fieldset",2),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"tb-widget-config",3,0)(5,"div",4),t.\u0275\u0275template(6,F,5,3,"button",5)(7,a,5,4,"button",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",7),t.\u0275\u0275template(9,O,5,4,"button",8),t.\u0275\u0275elementStart(10,"div",9)(11,"button",10),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(T),t.\u0275\u0275resetView(v.onRevertWidgetConfig())}),t.\u0275\u0275elementStart(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"button",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(T),t.\u0275\u0275resetView(v.onApplyWidgetConfig())}),t.\u0275\u0275elementStart(17,"mat-icon"),t.\u0275\u0275text(18,"done"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(21,P,2,7,"div",12),t.\u0275\u0275elementEnd()()}2&p&&(t.\u0275\u0275property("formGroup",v.widgetFormGroup),t.\u0275\u0275advance(),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(2,17,v.isLoading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("aliasController",v.aliasController)("functionsOnly",v.widgetEditMode)("dashboard",v.dashboard)("widget",v.widget)("hideToggleHeader",v.previewMode)("showLayoutConfig",v.showLayoutConfig)("isDefaultBreakpoint",v.isDefaultBreakpoint),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",v.previewMode),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!v.previewMode),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!v.previewMode),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!v.widgetFormGroup.dirty),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,19,"action.decline")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!v.widgetFormGroup.valid||!v.widgetFormGroup.dirty),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,21,"action.apply")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",v.previewMode))},dependencies:[Q.NgIf,z.MatButton,L.MatIcon,k.\u0275NgNoValidate,k.NgControlStatus,k.NgControlStatusGroup,k.FormGroupDirective,k.FormControlName,S.WidgetConfigComponent,B.G,Q.AsyncPipe,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .widget-preview-background[_ngcontent-%COMP%]{position:absolute;inset:68px 0 0;background:#fff;z-index:5}[_nghost-%COMP%]   .widget-preview-section[_ngcontent-%COMP%]{position:absolute;inset:0 16px 16px;border:1px solid rgba(0,0,0,.05);border-radius:4px}']})}}(0,e.__decorate)([(0,G.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],A.prototype,"showLayoutConfig",void 0),(0,e.__decorate)([(0,G.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],A.prototype,"isDefaultBreakpoint",void 0)},25009:(Re,X,n)=>{"use strict";n.d(X,{O:()=>O});var e=n(93953),t=n(56542),c=n(34006),h=n(56508),V=n(9310),S=n(7901),G=n(89417),K=n(60177),H=n(88834),k=n(99213),Q=n(53719),z=n(55911),L=n(82798),B=n(86600),I=n(73955),U=n(99691);function F(P,A){if(1&P&&(e.\u0275\u0275elementStart(0,"mat-option",15)(1,"mat-icon")(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",16),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()),2&P){const u=A.$implicit,m=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",u),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(m.getIcon(u)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getName(u)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getSizeDescription(u))}}function a(P,A){if(1&P&&(e.\u0275\u0275elementStart(0,"mat-option",15)(1,"mat-icon")(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",16),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()),2&P){const u=A.$implicit,m=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",u),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(m.getIcon(u)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getName(u)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getSizeDescription(u))}}class O extends t.m{constructor(A,u,m,p,v,T){super(A,u,v),this.store=A,this.router=u,this.fb=m,this.data=p,this.dialogRef=v,this.dashboardUtils=T,this.allowBreakpointIds=[],this.selectedBreakpointIds=[],this.allowBreakpointIds=this.data.allowBreakpointIds,this.selectedBreakpointIds=this.data.selectedBreakpointIds,this.addBreakpointFormGroup=this.fb.group({newBreakpointId:[{value:this.allowBreakpointIds[0],disabled:1===this.allowBreakpointIds.length}],copyFrom:[{value:"default",disabled:1===this.selectedBreakpointIds.length}]})}cancel(){this.dialogRef.close(null)}save(){this.dialogRef.close(this.addBreakpointFormGroup.getRawValue())}getName(A){return this.dashboardUtils.getBreakpointName(A)}getIcon(A){return this.dashboardUtils.getBreakpointIcon(A)}getSizeDescription(A){return this.dashboardUtils.getBreakpointSizeDescription(A)}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(V.Store),e.\u0275\u0275directiveInject(S.Router),e.\u0275\u0275directiveInject(G.FormBuilder),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["add-new-breakpoint-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:14,consts:[["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content","",2,"width","400px","max-width","100%"],[3,"formGroup"],["appearance","outline"],["formControlName","newBreakpointId",3,"hideSingleSelectionIndicator"],["style","min-height:56px;",3,"value",4,"ngFor","ngForOf"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","copyFrom",3,"hideSingleSelectionIndicator"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[2,"min-height","56px",3,"value"],[2,"font-size","12px","letter-spacing","0.4px","color","#9e9e9e"]],template:function(u,m){1&u&&(e.\u0275\u0275elementStart(0,"mat-toolbar",0)(1,"h2",1),e.\u0275\u0275text(2,"layout.add-new-breakpoint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",2),e.\u0275\u0275elementStart(4,"button",3),e.\u0275\u0275listener("click",function(){return m.cancel()}),e.\u0275\u0275elementStart(5,"mat-icon",4),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",5)(8,"form",6)(9,"mat-form-field",7)(10,"mat-label",1),e.\u0275\u0275text(11,"layout.breakpoint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",8)(13,"mat-select-trigger"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,F,8,4,"mat-option",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"mat-form-field",10)(17,"mat-label",1),e.\u0275\u0275text(18,"layout.copy-from"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"mat-select",11)(20,"mat-select-trigger"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,a,8,4,"mat-option",9),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(23,"div",12)(24,"button",13),e.\u0275\u0275listener("click",function(){return m.cancel()}),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"button",14),e.\u0275\u0275listener("click",function(){return m.save()}),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd()()),2&u&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("formGroup",m.addBreakpointFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("hideSingleSelectionIndicator",!1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getName(m.addBreakpointFormGroup.get("newBreakpointId").value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",m.allowBreakpointIds),e.\u0275\u0275advance(4),e.\u0275\u0275property("hideSingleSelectionIndicator",!1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.getName(m.addBreakpointFormGroup.get("copyFrom").value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",m.selectedBreakpointIds),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,10,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",m.addBreakpointFormGroup.invalid),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,12,"action.add")," "))},dependencies:[K.NgForOf,H.MatButton,H.MatIconButton,k.MatIcon,Q.MatFormField,Q.MatLabel,z.MatToolbar,c.MatDialogActions,c.MatDialogContent,L.MatSelect,L.MatSelectTrigger,B.MatOption,G.\u0275NgNoValidate,G.NgControlStatus,G.NgControlStatusGroup,G.FormGroupDirective,G.FormControlName,I.TranslateDirective,U.TbIconComponent,I.TranslatePipe],encapsulation:2})}}},50701:(Re,X,n)=>{"use strict";var e,h,t,c;n.d(X,{GV:()=>t,_p:()=>c,pA:()=>e}),(h=e||(e={})).PERCENTAGE="percentage",h.FIXED="fixed",function(h){h[h.MIN=10]="MIN",h[h.MAX=90]="MAX"}(t||(t={})),function(h){h[h.MIN=150]="MIN",h[h.MAX=4e3]="MAX"}(c||(c={}))},13445:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{ManageDashboardLayoutsDialogComponent:()=>R});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(15753),G=n(27997),K=n(56508),H=n(44495),k=n(50701),Q=n(25009),z=n(80216),L=n(9310),B=n(7901),I=n(73955),U=n(60177),F=n(88834),a=n(65571),O=n(99213),P=n(53719),A=n(55911),u=n(82798),m=n(14823),p=n(71997),v=n(43881),T=n(63785),C=n(99691);const _=["tooltip"];function E(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&N){const Y=Z.$implicit,ge=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",Y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,ge.layoutTypeTranslations.get(Y))," ")}}function f(N,Z){1&N&&e.\u0275\u0275element(0,"mat-divider")}function g(N,Z){if(1&N){const Y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",32)(2,"div",33)(3,"tb-icon"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",34),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",35),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",36)(10,"button",37),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275listener("click",function(){const ce=e.\u0275\u0275restoreView(Y).$implicit,se=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(se.openLayoutSettings("main",ce.breakpoint))}),e.\u0275\u0275elementStart(12,"mat-icon"),e.\u0275\u0275text(13,"settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"button",38),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275listener("click",function(ce){const se=e.\u0275\u0275restoreView(Y).$implicit,J=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(J.deleteBreakpoint(ce,se.breakpoint))}),e.\u0275\u0275elementStart(16,"tb-icon"),e.\u0275\u0275text(17,"delete"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(18,f,1,0,"mat-divider",39),e.\u0275\u0275elementContainerEnd()}if(2&N){const Y=Z.$implicit,ge=Z.last;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(Y.icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",Y.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",Y.descriptionSize," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(11,9,"layout.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("tb-hidden","default"===Y.breakpoint),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(15,11,"action.delete")),e.\u0275\u0275property("disabled","default"===Y.breakpoint),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!ge)}}function y(N,Z){if(1&N){const Y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"div",23)(2,"div",24),e.\u0275\u0275element(3,"div",25),e.\u0275\u0275elementStart(4,"div",26),e.\u0275\u0275text(5,"layout.breakpoints"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",27),e.\u0275\u0275text(7,"layout.size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",29),e.\u0275\u0275template(10,g,19,13,"ng-container",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"button",31),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ce.addBreakpoint())}),e.\u0275\u0275elementStart(13,"mat-icon"),e.\u0275\u0275text(14,"add"),e.\u0275\u0275elementEnd()()()}if(2&N){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",Y.layoutBreakpoints),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(12,3,"layout.add-new-breakpoint")),e.\u0275\u0275property("disabled",!Y.allowBreakpointIds.length)}}function b(N,Z){if(1&N&&e.\u0275\u0275element(0,"input",56),2&N){const Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("min",Y.layoutPercentageSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutPercentageSize.MAX)}}function D(N,Z){if(1&N&&e.\u0275\u0275element(0,"input",57),2&N){const Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("min",Y.layoutFixedSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutFixedSize.MAX)}}function w(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"div",53),e.\u0275\u0275template(1,b,1,2,"input",54)(2,D,1,2,"input",55),e.\u0275\u0275elementEnd()),2&N){const Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value!==Y.layoutWidthType.FIXED),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value===Y.layoutWidthType.FIXED&&"main"===Y.layoutsFormGroup.get("fixedLayout").value)}}function ee(N,Z){if(1&N&&e.\u0275\u0275element(0,"input",61),2&N){const Y=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("min",Y.layoutPercentageSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutPercentageSize.MAX)}}function _e(N,Z){if(1&N&&e.\u0275\u0275element(0,"input",57),2&N){const Y=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("min",Y.layoutFixedSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutFixedSize.MAX)}}function ve(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"div",53),e.\u0275\u0275template(1,ee,1,2,"input",60)(2,_e,1,2,"input",55),e.\u0275\u0275elementEnd()),2&N){const Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value!==Y.layoutWidthType.FIXED),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value===Y.layoutWidthType.FIXED)}}function Ee(N,Z){if(1&N){const Y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",58)(1,"button",47),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ce.openLayoutSettings("right"))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"button",59),e.\u0275\u0275listener("mouseover",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(ce.show())})("mouseleave",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275reference(7);return e.\u0275\u0275resetView(ce.hide())})("click",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ce.setFixedLayout("right"))}),e.\u0275\u0275elementStart(6,"span",49,3),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,ve,3,2,"div",50),e.\u0275\u0275elementEnd()}if(2&N){const Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275classMap(Y.layoutButtonClass("right")),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,8,"layout.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275classMap(Y.layoutButtonClass("right")),e.\u0275\u0275advance(),e.\u0275\u0275property("matTooltip",Y.layoutButtonText("right")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,10,"layout.right")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.showPreviewInputs("right"))}}function $(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"mat-slider",65),e.\u0275\u0275element(1,"input",66),e.\u0275\u0275elementEnd()),2&N){const Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("min",Y.layoutPercentageSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutPercentageSize.MAX),e.\u0275\u0275property("displayWith",Y.formatSliderTooltipLabel.bind(Y))}}function be(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"mat-slider",65),e.\u0275\u0275element(1,"input",67),e.\u0275\u0275elementEnd()),2&N){const Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275propertyInterpolate("min",Y.layoutFixedSize.MIN),e.\u0275\u0275propertyInterpolate("max",Y.layoutFixedSize.MAX),e.\u0275\u0275property("displayWith",Y.formatSliderTooltipLabel.bind(Y))}}function Te(N,Z){if(1&N&&(e.\u0275\u0275elementStart(0,"div",62),e.\u0275\u0275template(1,$,2,3,"mat-slider",63)(2,be,2,3,"mat-slider",63),e.\u0275\u0275elementStart(3,"div",64)(4,"label"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"label"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()()),2&N){const Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value===Y.layoutWidthType.PERCENTAGE),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.layoutsFormGroup.get("type").value!==Y.layoutWidthType.PERCENTAGE),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",Y.layoutsFormGroup.get("type").value===Y.layoutWidthType.PERCENTAGE?Y.layoutPercentageSize.MIN+"%":Y.layoutFixedSize.MIN+"px"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",Y.layoutsFormGroup.get("type").value===Y.layoutWidthType.PERCENTAGE?Y.layoutPercentageSize.MAX+"%":Y.layoutFixedSize.MAX+"px"," ")}}function oe(N,Z){if(1&N){const Y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",40)(1,"mat-button-toggle-group",41)(2,"mat-button-toggle",42),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-button-toggle",43),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",44)(9,"div",45,1)(11,"div",46)(12,"button",47),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ce.openLayoutSettings("main"))}),e.\u0275\u0275elementStart(14,"mat-icon"),e.\u0275\u0275text(15,"settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"button",48),e.\u0275\u0275listener("mouseover",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275reference(18);return e.\u0275\u0275resetView(ce.show())})("mouseleave",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275reference(18);return e.\u0275\u0275resetView(ce.hide())})("click",function(){e.\u0275\u0275restoreView(Y);const ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ce.setFixedLayout("main"))}),e.\u0275\u0275elementStart(17,"span",49,2),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(21,w,3,2,"div",50),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,Ee,11,12,"div",51),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,Te,8,4,"div",52),e.\u0275\u0275elementEnd()}if(2&N){const Y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!Y.isDividerLayout),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,18,"layout.percentage-width")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,20,"layout.fixed-width")," "),e.\u0275\u0275advance(5),e.\u0275\u0275styleProp("flex-basis",Y.buttonFlexValue()+"%")("max-width",Y.buttonFlexValue()+"%"),e.\u0275\u0275advance(),e.\u0275\u0275classMap(Y.layoutButtonClass("main")),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(13,22,"layout.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275classMap(Y.layoutButtonClass("main",!0)),e.\u0275\u0275advance(),e.\u0275\u0275property("matTooltip",Y.layoutButtonText("main")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,24,Y.isDividerLayout?"layout.left":"layout.main")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.showPreviewInputs("main")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.isDividerLayout),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.isDividerLayout)}}class R extends V.m{constructor(Z,Y,ge,ce,se,J,de,ye,re,ne){super(Z,Y,se),this.store=Z,this.router=Y,this.data=ge,this.errorStateMatcher=ce,this.dialogRef=se,this.fb=J,this.dashboardUtils=de,this.translate=ye,this.dialog=re,this.dialogs=ne,this.layoutWidthType=k.pA,this.layoutPercentageSize=k.GV,this.layoutFixedSize=k._p,this.layoutTypes=S.iQ,this.layoutTypeTranslations=S.aK,this.layoutBreakpoints=[],this.subscriptions=[],this.submitted=!1,this.allowBreakpointIds=[],this.selectedBreakpointIds=["default"],this.layouts=this.data.layouts;let ie=S.p5.default;if((0,G.O9)(this.layouts.right)?ie=S.p5.divider:(0,G.O9)(this.layouts.main.gridSettings.layoutType)&&(ie=this.layouts.main.gridSettings.layoutType),this.layoutsFormGroup=this.fb.group({layoutType:[ie],main:[{value:(0,G.O9)(this.layouts.main),disabled:!0}],sliderPercentage:[50],sliderFixed:[this.layoutFixedSize.MIN],leftWidthPercentage:[50,[h.Validators.min(this.layoutPercentageSize.MIN),h.Validators.max(this.layoutPercentageSize.MAX),h.Validators.required]],rightWidthPercentage:[50,[h.Validators.min(this.layoutPercentageSize.MIN),h.Validators.max(this.layoutPercentageSize.MAX),h.Validators.required]],type:[k.pA.PERCENTAGE],fixedWidth:[this.layoutFixedSize.MIN,[h.Validators.min(this.layoutFixedSize.MIN),h.Validators.max(this.layoutFixedSize.MAX),h.Validators.required]],fixedLayout:["main",[]]}),this.subscriptions.push(this.layoutsFormGroup.get("type").valueChanges.subscribe(Ae=>{Ae===k.pA.FIXED?(this.layoutsFormGroup.get("leftWidthPercentage").disable(),this.layoutsFormGroup.get("rightWidthPercentage").disable(),this.layoutsFormGroup.get("fixedWidth").enable(),this.layoutsFormGroup.get("fixedLayout").enable()):(this.layoutsFormGroup.get("leftWidthPercentage").enable(),this.layoutsFormGroup.get("rightWidthPercentage").enable(),this.layoutsFormGroup.get("fixedWidth").disable(),this.layoutsFormGroup.get("fixedLayout").disable())})),this.layouts.right)if(this.layouts.right.gridSettings.layoutDimension)this.layoutsFormGroup.patchValue({fixedLayout:this.layouts.right.gridSettings.layoutDimension.fixedLayout,type:k.pA.FIXED,fixedWidth:this.layouts.right.gridSettings.layoutDimension.fixedWidth,sliderFixed:this.layouts.right.gridSettings.layoutDimension.fixedWidth},{emitEvent:!1});else if(this.layouts.main.gridSettings.layoutDimension)if(this.layouts.main.gridSettings.layoutDimension.type===k.pA.FIXED)this.layoutsFormGroup.patchValue({fixedLayout:this.layouts.main.gridSettings.layoutDimension.fixedLayout,type:k.pA.FIXED,fixedWidth:this.layouts.main.gridSettings.layoutDimension.fixedWidth,sliderFixed:this.layouts.main.gridSettings.layoutDimension.fixedWidth},{emitEvent:!1});else{const Ae=Number(this.layouts.main.gridSettings.layoutDimension.leftWidthPercentage);this.layoutsFormGroup.patchValue({leftWidthPercentage:Ae,sliderPercentage:Ae,rightWidthPercentage:100-Number(Ae)},{emitEvent:!1})}if(this.layouts.main||(this.layouts.main=this.dashboardUtils.createDefaultLayoutData()),this.layouts.right||(this.layouts.right=this.dashboardUtils.createDefaultLayoutData()),this.addLayoutConfiguration("default"),!this.isDividerLayout&&this.layouts.main.breakpoints)for(const Ae of Object.keys(this.layouts.main.breakpoints))this.addLayoutConfiguration(Ae),this.selectedBreakpointIds.push(Ae);this.allowBreakpointIds=Object.values(this.dashboardUtils.getListBreakpoint()).filter(Ae=>!this.selectedBreakpointIds.includes(Ae.id)).map(Ae=>Ae.id),this.sortLayoutBreakpoints(),this.subscriptions.push(this.layoutsFormGroup.get("sliderPercentage").valueChanges.subscribe(Ae=>this.layoutsFormGroup.get("leftWidthPercentage").patchValue(Ae))),this.subscriptions.push(this.layoutsFormGroup.get("sliderFixed").valueChanges.subscribe(Ae=>{this.layoutsFormGroup.get("fixedWidth").patchValue(Ae)})),this.subscriptions.push(this.layoutsFormGroup.get("leftWidthPercentage").valueChanges.subscribe(Ae=>{this.showTooltip(this.layoutsFormGroup.get("leftWidthPercentage"),k.pA.PERCENTAGE,"main"),this.layoutControlChange("rightWidthPercentage",Ae)})),this.subscriptions.push(this.layoutsFormGroup.get("rightWidthPercentage").valueChanges.subscribe(Ae=>{this.showTooltip(this.layoutsFormGroup.get("rightWidthPercentage"),k.pA.PERCENTAGE,"right"),this.layoutControlChange("leftWidthPercentage",Ae)})),this.subscriptions.push(this.layoutsFormGroup.get("fixedWidth").valueChanges.subscribe(Ae=>{this.showTooltip(this.layoutsFormGroup.get("fixedWidth"),k.pA.FIXED,this.layoutsFormGroup.get("fixedLayout").value),this.layoutsFormGroup.get("sliderFixed").setValue(Ae,{emitEvent:!1})}))}ngOnDestroy(){for(const Z of this.subscriptions)Z.unsubscribe()}isErrorState(Z,Y){const ge=this.errorStateMatcher.isErrorState(Z,Y),ce=!!(Z&&Z.invalid&&this.submitted);return ge||ce}openLayoutSettings(Z,Y="default"){const ge=this.dashboardUtils.getDashboardLayoutConfig(this.layouts[Z],Y),ce=ge.gridSettings;ce.layoutType=this.layoutsFormGroup.get("layoutType").value,this.dialog.open(H.DashboardSettingsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:null,gridSettings:ce,isRightLayout:this.isDividerLayout&&"right"===Z,breakpointId:Y}}).afterClosed().subscribe(se=>{se&&se.gridSettings&&(this.dashboardUtils.updateLayoutSettings(ge,se.gridSettings),this.layoutsFormGroup.markAsDirty())})}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0;const Z=this.layoutsFormGroup.value.layoutType;if(this.layouts.main.gridSettings.layoutType=Z,this.isDividerLayout)delete this.layouts.main.breakpoints,this.layouts.right.gridSettings.layoutType=Z;else if(delete this.layouts.right,this.layouts.main.breakpoints)for(const Y of Object.values(this.layouts.main.breakpoints))Y.gridSettings.layoutType=Z;if(delete this.layouts.main.gridSettings.layoutDimension,this.layouts.right?.gridSettings&&delete this.layouts.right.gridSettings.layoutDimension,this.isDividerLayout){const Y=this.layoutsFormGroup.value,ge=Y.type,ce={type:ge};ge===k.pA.PERCENTAGE?(ce.leftWidthPercentage=Y.leftWidthPercentage,this.layouts.main.gridSettings.layoutDimension=ce):(ce.fixedWidth=Y.fixedWidth,ce.fixedLayout=Y.fixedLayout,"main"===Y.fixedLayout?this.layouts.main.gridSettings.layoutDimension=ce:this.layouts.right.gridSettings.layoutDimension=ce)}this.dialogRef.close(this.layouts)}buttonFlexValue(){const Z=this.layoutsFormGroup.value;if(this.isDividerLayout)return Z.type!==k.pA.FIXED?Z.leftWidthPercentage:"main"===Z.fixedLayout?10:90}formatSliderTooltipLabel(Z){return this.layoutsFormGroup.get("type").value===k.pA.FIXED?Z:`${Z}|${100-Z}`}layoutControlChange(Z,Y){const ge=100-Number(Y);this.layoutsFormGroup.get(Z).setValue(ge,{emitEvent:!1}),this.layoutsFormGroup.get("sliderPercentage").setValue("leftWidthPercentage"===Z?ge:Number(Y),{emitEvent:!1})}setFixedLayout(Z){this.layoutsFormGroup.get("type").value===k.pA.FIXED&&this.isDividerLayout&&(this.layoutsFormGroup.get("fixedLayout").setValue(Z),this.layoutsFormGroup.get("fixedLayout").markAsDirty())}showTooltip(Z,Y,ge){if(Z.errors){let ce;const se=Y===k.pA.FIXED?"px":"%";Z.errors.required?ce=Y===k.pA.FIXED?this.translate.instant("layout.layout-fixed-width-required"):"right"===ge?this.translate.instant("layout.right-width-percentage-required"):this.translate.instant("layout.left-width-percentage-required"):Z.errors.min?ce=this.translate.instant("layout.value-min-error",{min:Z.errors.min.min,unit:se}):Z.errors.max&&(ce=this.translate.instant("layout.value-max-error",{max:Z.errors.max.max,unit:se})),this.tooltip.tooltipClass="main"===ge?"tb-layout-error-tooltip-main":"tb-layout-error-tooltip-right",this.tooltip.message=ce,this.tooltip.show(1300)}else this.tooltip.message="",this.tooltip.hide()}layoutButtonClass(Z,Y=!1){const ge=this.layoutsFormGroup.value;if(this.isDividerLayout){let ce=Y?"tb-layout-button-main ":"";return ge.fixedLayout===Z||ge.type===k.pA.PERCENTAGE||(ce+="tb-fixed-layout-button"),ce}}layoutButtonText(Z){const Y=this.layoutsFormGroup.value;if(Y.fixedLayout!==Z&&this.isDividerLayout&&Y.type!==k.pA.PERCENTAGE)return"main"===Z?this.translate.instant("layout.left-side"):this.translate.instant("layout.right-side")}showPreviewInputs(Z){const Y=this.layoutsFormGroup.value;return this.isDividerLayout&&(Y.type===k.pA.PERCENTAGE||Y.fixedLayout===Z)}get isDividerLayout(){return this.layoutsFormGroup.get("layoutType").value===S.p5.divider}addBreakpoint(){this.dialog.open(Q.O,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{allowBreakpointIds:this.allowBreakpointIds,selectedBreakpointIds:this.selectedBreakpointIds}}).afterClosed().subscribe(Z=>{Z&&(this.createdNewBreakpoint(Z.newBreakpointId,Z.copyFrom),this.layoutsFormGroup.markAsDirty())})}deleteBreakpoint(Z,Y){Z&&Z.stopPropagation();const ge=this.translate.instant("layout.delete-breakpoint-title",{name:Y}),ce=this.translate.instant("layout.delete-breakpoint-text");this.dialogs.confirm(ge,ce,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(se=>{se&&(delete this.layouts.main.breakpoints[Y],(0,G.n4)(this.layouts.main.breakpoints,{})&&delete this.layouts.main.breakpoints,this.layoutBreakpoints=this.layoutBreakpoints.filter(J=>J.breakpoint!==Y),this.allowBreakpointIds.push(Y),this.selectedBreakpointIds=this.selectedBreakpointIds.filter(J=>J!==Y),this.sortLayoutBreakpoints(),this.layoutsFormGroup.markAsDirty())})}createdNewBreakpoint(Z,Y){const ge=this.layouts.main,ce="default"===Y?ge:ge.breakpoints[Y],se=(0,G.Go)(ce.gridSettings),J=(0,G.Go)(ce.widgets);if("default"===Y){this.dashboardUtils.getBreakpointInfoById(Z)?.maxWidth<960&&(se.viewFormat=S.LM.list,se.rowHeight=se.mobileRowHeight,se.autoFillHeight=se.mobileAutoFillHeight);for(const ye in J)J[ye]&&(delete J[ye].desktopHide,delete J[ye].mobileHide)}ge.breakpoints||(ge.breakpoints={}),ge.breakpoints[Z]={gridSettings:se,widgets:J},this.selectedBreakpointIds.push(Z),this.allowBreakpointIds=this.allowBreakpointIds.filter(de=>de!==Z),this.addLayoutConfiguration(Z),this.sortLayoutBreakpoints()}addLayoutConfiguration(Z){const Y="default"===Z?this.layouts.main:this.layouts.main.breakpoints[Z],ge="default"===Z?"":this.dashboardUtils.getBreakpointSizeDescription(Z);this.layoutBreakpoints.push({icon:this.dashboardUtils.getBreakpointIcon(Z),name:this.dashboardUtils.getBreakpointName(Z),layout:Y,descriptionSize:ge,breakpoint:Z})}sortLayoutBreakpoints(){this.layoutBreakpoints.sort((Z,Y)=>{const ge=this.dashboardUtils.getBreakpointInfoById(Z.breakpoint)?.maxWidth||1/0;return(this.dashboardUtils.getBreakpointInfoById(Y.breakpoint)?.maxWidth||1/0)-ge}),this.selectedBreakpointIds.sort((Z,Y)=>{const ge=this.dashboardUtils.getBreakpointInfoById(Z)?.maxWidth||1/0;return(this.dashboardUtils.getBreakpointInfoById(Y)?.maxWidth||1/0)-ge}),this.allowBreakpointIds.sort((Z,Y)=>{const ge=this.dashboardUtils.getBreakpointInfoById(Z)?.maxWidth||1/0;return(this.dashboardUtils.getBreakpointInfoById(Y)?.maxWidth||1/0)-ge})}static{this.\u0275fac=function(Y){return new(Y||R)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(K.N),e.\u0275\u0275directiveInject(I.TranslateService),e.\u0275\u0275directiveInject(c.MatDialog),e.\u0275\u0275directiveInject(z.o))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:R,selectors:[["tb-manage-dashboard-layouts-dialog"]],viewQuery:function(Y,ge){if(1&Y&&e.\u0275\u0275viewQuery(_,5),2&Y){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(ge.tooltip=ce.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:R}]),e.\u0275\u0275InheritDefinitionFeature],decls:26,vars:11,consts:[["dividerLayout",""],["tooltip","matTooltip"],["mainLayoutTooltip","matTooltip"],["rightLayoutTooltip","matTooltip"],[3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-row","space-between"],["translate","",1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"flex"],["formControlName","layoutType"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-panel stroked",4,"ngIf","ngIfElse"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],[1,"tb-form-panel","stroked"],[1,"tb-form-table","tb-layout-breakpoints"],[1,"tb-form-table-header","no-padding-right"],[1,"tb-form-table-header-cell","tb-icon"],["translate","",1,"tb-form-table-header-cell","tb-breakpoint"],["translate","",1,"tb-form-table-header-cell","tb-size"],[1,"tb-form-table-header-cell","tb-actions"],[1,"tb-form-table-body","no-gap"],[4,"ngFor","ngForOf"],["mat-button","","matTooltipPosition","above","color","primary","type","button",1,"tb-add-breakpoint-button","flex-1",3,"click","matTooltip","disabled"],[1,"tb-form-table-row","no-padding-right"],[1,"tb-form-table-row-cell","tb-icon"],[1,"tb-form-table-row-cell","tb-breakpoint"],["tbTruncateWithTooltip","",1,"tb-form-table-row-cell","tb-size"],[1,"tb-form-table-row-cell-buttons","tb-actions"],["mat-icon-button","","matTooltipPosition","above","type","button",3,"click","matTooltip"],["mat-icon-button","","matTooltipPosition","above","type","button",3,"click","matTooltip","disabled"],[4,"ngIf"],[1,"flex","flex-col","items-center","justify-start","gap-5"],["aria-label","Select width value type","formControlName","type"],["value","percentage",1,"flex-1"],["value","fixed",1,"flex-1"],[1,"tb-layout-preview","flex","flex-row","items-center","justify-center"],["matTooltip","","matTooltipPosition","below",1,"tb-layout-preview-container","flex","flex-row","items-center","justify-start"],[1,"tb-layout-preview-container-main","flex","flex-1","flex-col","items-center","justify-start"],["mat-icon-button","","type","button","matTooltipPosition","above","aria-label","Layout settings",1,"tb-layout-preview-element",3,"click","matTooltip"],["type","button","mat-raised-button","","color","primary",1,"tb-layout-button","flex-1",3,"mouseover","mouseleave","click"],["matTooltipPosition","above",3,"matTooltip"],["class","tb-layout-preview-element tb-layout-preview-input flex-1",4,"ngIf"],["class","flex flex-1 flex-col items-center justify-start","matTooltip","",4,"ngIf"],["class","flex flex-col items-center justify-center gap-2","style","width: 80%",4,"ngIf"],[1,"tb-layout-preview-element","tb-layout-preview-input","flex-1"],["formControlName","leftWidthPercentage","type","number","step","1","required","",3,"min","max",4,"ngIf"],["formControlName","fixedWidth","type","number","step","1","required","",3,"min","max",4,"ngIf"],["formControlName","leftWidthPercentage","type","number","step","1","required","",3,"min","max"],["formControlName","fixedWidth","type","number","step","1","required","",3,"min","max"],["matTooltip","",1,"flex","flex-1","flex-col","items-center","justify-start"],["type","button","mat-raised-button","","color","primary",1,"tb-layout-button","tb-layout-button-right","flex-1",3,"mouseover","mouseleave","click"],["formControlName","rightWidthPercentage","type","number","step","1","required","",3,"min","max",4,"ngIf"],["formControlName","rightWidthPercentage","type","number","step","1","required","",3,"min","max"],[1,"flex","flex-col","items-center","justify-center","gap-2",2,"width","80%"],["step","1","style","width: 100%;","color","accent","discrete","",3,"min","max","displayWith",4,"ngIf"],[1,"tb-hint","tb-hint-group","flex","flex-row","items-center","justify-between",2,"width","100%"],["step","1","color","accent","discrete","",2,"width","100%",3,"min","max","displayWith"],["matSliderThumb","","formControlName","sliderPercentage"],["matSliderThumb","","formControlName","sliderFixed"]],template:function(Y,ge){if(1&Y){const ce=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",4),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(ce),e.\u0275\u0275resetView(ge.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",5)(2,"h2",6),e.\u0275\u0275text(3,"layout.manage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",7),e.\u0275\u0275elementStart(5,"button",8),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ce),e.\u0275\u0275resetView(ge.cancel())}),e.\u0275\u0275elementStart(6,"mat-icon",9),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",10)(9,"section",11)(10,"div",12)(11,"div",13),e.\u0275\u0275text(12,"dashboard.layout"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",14)(14,"mat-select",15),e.\u0275\u0275template(15,E,3,4,"mat-option",16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(16,y,15,5,"div",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,oe,24,26,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",18)(20,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ce),e.\u0275\u0275resetView(ge.cancel())}),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"button",20),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd()()()}if(2&Y){const ce=e.\u0275\u0275reference(18);e.\u0275\u0275property("formGroup",ge.layoutsFormGroup),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngForOf",ge.layoutTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!ge.isDividerLayout)("ngIfElse",ce),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,7,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",ge.layoutsFormGroup.invalid||!ge.layoutsFormGroup.dirty),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,9,"action.save")," ")}},dependencies:[U.NgForOf,U.NgIf,F.MatButton,F.MatIconButton,a.MatButtonToggleGroup,a.MatButtonToggle,O.MatIcon,P.MatFormField,A.MatToolbar,c.MatDialogActions,c.MatDialogContent,u.MatSelect,t.MatOption,m.MatTooltip,p.MatDivider,v.MatSlider,v.MatSliderThumb,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NumberValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.MinValidator,h.MaxValidator,h.FormGroupDirective,h.FormControlName,T.TruncateWithTooltipDirective,I.TranslateDirective,C.TbIconComponent,I.TranslatePipe],styles:['@charset "UTF-8";html[_ngcontent-%COMP%]{--mat-badge-text-font: Roboto, sans-serif;--mat-badge-text-size: 12px;--mat-badge-text-weight: 600;--mat-badge-small-size-text-size: 9px;--mat-badge-large-size-text-size: 24px}.mat-h1[_ngcontent-%COMP%], .mat-headline-5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2[_ngcontent-%COMP%], .mat-headline-6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,sans-serif;letter-spacing:.0125em;margin:0 0 16px}.mat-h3[_ngcontent-%COMP%], .mat-subtitle-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subtitle-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,sans-serif;letter-spacing:.009375em;margin:0 0 16px}.mat-h4[_ngcontent-%COMP%], .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 16px/24px Roboto,sans-serif;letter-spacing:.03125em;margin:0 0 16px}.mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 11.62px/20px Roboto,sans-serif;margin:0 0 12px}.mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 9.38px/20px Roboto,sans-serif;margin:0 0 12px}.mat-body-strong[_ngcontent-%COMP%], .mat-subtitle-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-subtitle-2[_ngcontent-%COMP%]{font:500 14px/22px Roboto,sans-serif;letter-spacing:.0071428571em}.mat-body[_ngcontent-%COMP%], .mat-body-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,sans-serif;letter-spacing:.0178571429em}.mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-body-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.mat-small[_ngcontent-%COMP%], .mat-caption[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{font:400 12px/20px Roboto,sans-serif;letter-spacing:.0333333333em}.mat-headline-1[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-1[_ngcontent-%COMP%]{font:300 96px/96px Roboto,sans-serif;letter-spacing:-.015625em;margin:0 0 56px}.mat-headline-2[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-2[_ngcontent-%COMP%]{font:300 60px/60px Roboto,sans-serif;letter-spacing:-.0083333333em;margin:0 0 64px}.mat-headline-3[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-3[_ngcontent-%COMP%]{font:400 48px/50px Roboto,sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-headline-4[_ngcontent-%COMP%], .mat-typography[_ngcontent-%COMP%]   .mat-headline-4[_ngcontent-%COMP%]{font:400 34px/40px Roboto,sans-serif;letter-spacing:.0073529412em;margin:0 0 64px}html[_ngcontent-%COMP%]{--mat-bottom-sheet-container-text-font: Roboto, sans-serif;--mat-bottom-sheet-container-text-line-height: 20px;--mat-bottom-sheet-container-text-size: 14px;--mat-bottom-sheet-container-text-tracking: .0178571429em;--mat-bottom-sheet-container-text-weight: 400;--mat-legacy-button-toggle-label-text-font: Roboto, sans-serif;--mat-legacy-button-toggle-label-text-line-height: 24px;--mat-legacy-button-toggle-label-text-size: 16px;--mat-legacy-button-toggle-label-text-tracking: .03125em;--mat-legacy-button-toggle-label-text-weight: 400;--mat-standard-button-toggle-label-text-font: Roboto, sans-serif;--mat-standard-button-toggle-label-text-line-height: 24px;--mat-standard-button-toggle-label-text-size: 16px;--mat-standard-button-toggle-label-text-tracking: .03125em;--mat-standard-button-toggle-label-text-weight: 400;--mat-datepicker-calendar-text-font: Roboto, sans-serif;--mat-datepicker-calendar-text-size: 13px;--mat-datepicker-calendar-body-label-text-size: 14px;--mat-datepicker-calendar-body-label-text-weight: 500;--mat-datepicker-calendar-period-button-text-size: 14px;--mat-datepicker-calendar-period-button-text-weight: 500;--mat-datepicker-calendar-header-text-size: 11px;--mat-datepicker-calendar-header-text-weight: 400;--mat-expansion-header-text-font: Roboto, sans-serif;--mat-expansion-header-text-size: 14px;--mat-expansion-header-text-weight: 500;--mat-expansion-header-text-line-height: inherit;--mat-expansion-header-text-tracking: inherit;--mat-expansion-container-text-font: Roboto, sans-serif;--mat-expansion-container-text-line-height: 20px;--mat-expansion-container-text-size: 14px;--mat-expansion-container-text-tracking: .0178571429em;--mat-expansion-container-text-weight: 400;--mat-grid-list-tile-header-primary-text-size: 14px;--mat-grid-list-tile-header-secondary-text-size: 12px;--mat-grid-list-tile-footer-primary-text-size: 14px;--mat-grid-list-tile-footer-secondary-text-size: 12px;--mat-stepper-container-text-font: Roboto, sans-serif;--mat-stepper-header-label-text-font: Roboto, sans-serif;--mat-stepper-header-label-text-size: 14px;--mat-stepper-header-label-text-weight: 400;--mat-stepper-header-error-state-label-text-size: 16px;--mat-stepper-header-selected-state-label-text-size: 16px;--mat-stepper-header-selected-state-label-text-weight: 400;--mat-toolbar-title-text-font: Roboto, sans-serif;--mat-toolbar-title-text-line-height: 32px;--mat-toolbar-title-text-size: 20px;--mat-toolbar-title-text-tracking: .0125em;--mat-toolbar-title-text-weight: 500;--mat-tree-node-text-font: Roboto, sans-serif;--mat-tree-node-text-size: 14px;--mat-tree-node-text-weight: 400;--mat-option-label-text-font: Roboto, sans-serif;--mat-option-label-text-line-height: 24px;--mat-option-label-text-size: 16px;--mat-option-label-text-tracking: .03125em;--mat-option-label-text-weight: 400;--mat-optgroup-label-text-font: Roboto, sans-serif;--mat-optgroup-label-text-line-height: 24px;--mat-optgroup-label-text-size: 16px;--mat-optgroup-label-text-tracking: .03125em;--mat-optgroup-label-text-weight: 400;--mat-card-title-text-font: Roboto, sans-serif;--mat-card-title-text-line-height: 32px;--mat-card-title-text-size: 20px;--mat-card-title-text-tracking: .0125em;--mat-card-title-text-weight: 500;--mat-card-subtitle-text-font: Roboto, sans-serif;--mat-card-subtitle-text-line-height: 22px;--mat-card-subtitle-text-size: 14px;--mat-card-subtitle-text-tracking: .0071428571em;--mat-card-subtitle-text-weight: 500;--mdc-plain-tooltip-supporting-text-font: Roboto, sans-serif;--mdc-plain-tooltip-supporting-text-size: 12px;--mdc-plain-tooltip-supporting-text-weight: 400;--mdc-plain-tooltip-supporting-text-tracking: .0333333333em;--mdc-filled-text-field-label-text-font: Roboto, sans-serif;--mdc-filled-text-field-label-text-size: 16px;--mdc-filled-text-field-label-text-tracking: .03125em;--mdc-filled-text-field-label-text-weight: 400;--mdc-outlined-text-field-label-text-font: Roboto, sans-serif;--mdc-outlined-text-field-label-text-size: 16px;--mdc-outlined-text-field-label-text-tracking: .03125em;--mdc-outlined-text-field-label-text-weight: 400;--mat-form-field-container-text-font: Roboto, sans-serif;--mat-form-field-container-text-line-height: 24px;--mat-form-field-container-text-size: 16px;--mat-form-field-container-text-tracking: .03125em;--mat-form-field-container-text-weight: 400;--mat-form-field-outlined-label-text-populated-size: 16px;--mat-form-field-subscript-text-font: Roboto, sans-serif;--mat-form-field-subscript-text-line-height: 20px;--mat-form-field-subscript-text-size: 12px;--mat-form-field-subscript-text-tracking: .0333333333em;--mat-form-field-subscript-text-weight: 400;--mat-select-trigger-text-font: Roboto, sans-serif;--mat-select-trigger-text-line-height: 24px;--mat-select-trigger-text-size: 16px;--mat-select-trigger-text-tracking: .03125em;--mat-select-trigger-text-weight: 400;--mdc-dialog-subhead-font: Roboto, sans-serif;--mdc-dialog-subhead-line-height: 32px;--mdc-dialog-subhead-size: 20px;--mdc-dialog-subhead-weight: 500;--mdc-dialog-subhead-tracking: .0125em;--mdc-dialog-supporting-text-font: Roboto, sans-serif;--mdc-dialog-supporting-text-line-height: 24px;--mdc-dialog-supporting-text-size: 16px;--mdc-dialog-supporting-text-weight: 400;--mdc-dialog-supporting-text-tracking: .03125em}.mat-mdc-standard-chip[_ngcontent-%COMP%]{--mdc-chip-label-text-font: Roboto, sans-serif;--mdc-chip-label-text-line-height: 20px;--mdc-chip-label-text-size: 14px;--mdc-chip-label-text-tracking: .0178571429em;--mdc-chip-label-text-weight: 400}html[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{--mat-switch-label-text-font: Roboto, sans-serif;--mat-switch-label-text-line-height: 20px;--mat-switch-label-text-size: 14px;--mat-switch-label-text-tracking: .0178571429em;--mat-switch-label-text-weight: 400}html[_ngcontent-%COMP%]{--mat-radio-label-text-font: Roboto, sans-serif;--mat-radio-label-text-line-height: 20px;--mat-radio-label-text-size: 14px;--mat-radio-label-text-tracking: .0178571429em;--mat-radio-label-text-weight: 400;--mdc-slider-label-label-text-font: Roboto, sans-serif;--mdc-slider-label-label-text-size: 14px;--mdc-slider-label-label-text-line-height: 22px;--mdc-slider-label-label-text-tracking: .0071428571em;--mdc-slider-label-label-text-weight: 500;--mat-menu-item-label-text-font: Roboto, sans-serif;--mat-menu-item-label-text-size: 16px;--mat-menu-item-label-text-tracking: .03125em;--mat-menu-item-label-text-line-height: 24px;--mat-menu-item-label-text-weight: 400;--mdc-list-list-item-label-text-font: Roboto, sans-serif;--mdc-list-list-item-label-text-line-height: 24px;--mdc-list-list-item-label-text-size: 16px;--mdc-list-list-item-label-text-tracking: .03125em;--mdc-list-list-item-label-text-weight: 400;--mdc-list-list-item-supporting-text-font: Roboto, sans-serif;--mdc-list-list-item-supporting-text-line-height: 20px;--mdc-list-list-item-supporting-text-size: 14px;--mdc-list-list-item-supporting-text-tracking: .0178571429em;--mdc-list-list-item-supporting-text-weight: 400;--mdc-list-list-item-trailing-supporting-text-font: Roboto, sans-serif;--mdc-list-list-item-trailing-supporting-text-line-height: 20px;--mdc-list-list-item-trailing-supporting-text-size: 12px;--mdc-list-list-item-trailing-supporting-text-tracking: .0333333333em;--mdc-list-list-item-trailing-supporting-text-weight: 400}.mdc-list-group__subheader[_ngcontent-%COMP%]{font:400 16px/28px Roboto,sans-serif;letter-spacing:.009375em}html[_ngcontent-%COMP%]{--mat-paginator-container-text-font: Roboto, sans-serif;--mat-paginator-container-text-line-height: 20px;--mat-paginator-container-text-size: 12px;--mat-paginator-container-text-tracking: .0333333333em;--mat-paginator-container-text-weight: 400;--mat-paginator-select-trigger-text-size: 12px}.mat-mdc-tab-header[_ngcontent-%COMP%]{--mat-tab-header-label-text-font: Roboto, sans-serif;--mat-tab-header-label-text-size: 14px;--mat-tab-header-label-text-tracking: .0892857143em;--mat-tab-header-label-text-line-height: 36px;--mat-tab-header-label-text-weight: 500}html[_ngcontent-%COMP%]{--mat-checkbox-label-text-font: Roboto, sans-serif;--mat-checkbox-label-text-line-height: 20px;--mat-checkbox-label-text-size: 14px;--mat-checkbox-label-text-tracking: .0178571429em;--mat-checkbox-label-text-weight: 400;--mdc-text-button-label-text-font: Roboto, sans-serif;--mdc-text-button-label-text-size: 14px;--mdc-text-button-label-text-tracking: .0892857143em;--mdc-text-button-label-text-weight: 500;--mdc-text-button-label-text-transform: none;--mdc-filled-button-label-text-font: Roboto, sans-serif;--mdc-filled-button-label-text-size: 14px;--mdc-filled-button-label-text-tracking: .0892857143em;--mdc-filled-button-label-text-weight: 500;--mdc-filled-button-label-text-transform: none;--mdc-protected-button-label-text-font: Roboto, sans-serif;--mdc-protected-button-label-text-size: 14px;--mdc-protected-button-label-text-tracking: .0892857143em;--mdc-protected-button-label-text-weight: 500;--mdc-protected-button-label-text-transform: none;--mdc-outlined-button-label-text-font: Roboto, sans-serif;--mdc-outlined-button-label-text-size: 14px;--mdc-outlined-button-label-text-tracking: .0892857143em;--mdc-outlined-button-label-text-weight: 500;--mdc-outlined-button-label-text-transform: none;--mdc-extended-fab-label-text-font: Roboto, sans-serif;--mdc-extended-fab-label-text-size: 14px;--mdc-extended-fab-label-text-tracking: .0892857143em;--mdc-extended-fab-label-text-weight: 500;--mdc-snackbar-supporting-text-font: Roboto, sans-serif;--mdc-snackbar-supporting-text-line-height: 20px;--mdc-snackbar-supporting-text-size: 14px;--mdc-snackbar-supporting-text-weight: 400;--mat-table-header-headline-font: Roboto, sans-serif;--mat-table-header-headline-line-height: 22px;--mat-table-header-headline-size: 14px;--mat-table-header-headline-weight: 500;--mat-table-header-headline-tracking: .0071428571em;--mat-table-row-item-label-text-font: Roboto, sans-serif;--mat-table-row-item-label-text-line-height: 20px;--mat-table-row-item-label-text-size: 14px;--mat-table-row-item-label-text-weight: 400;--mat-table-row-item-label-text-tracking: .0178571429em;--mat-table-footer-supporting-text-font: Roboto, sans-serif;--mat-table-footer-supporting-text-line-height: 20px;--mat-table-footer-supporting-text-size: 14px;--mat-table-footer-supporting-text-weight: 400;--mat-table-footer-supporting-text-tracking: .0178571429em}.mat-ripple[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mat-ripple[_ngcontent-%COMP%]:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded[_ngcontent-%COMP%]{overflow:visible}.mat-ripple-element[_ngcontent-%COMP%]{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0,0,.2,1);transform:scale3d(0,0,0);background-color:var(--mat-ripple-color, rgba(0, 0, 0, .1))}.cdk-high-contrast-active[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%], .cdk-drag-placeholder[_ngcontent-%COMP%]   .mat-ripple-element[_ngcontent-%COMP%]{display:none}.cdk-visually-hidden[_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl][_ngcontent-%COMP%]   .cdk-visually-hidden[_ngcontent-%COMP%]{left:auto;right:0}.cdk-overlay-container[_ngcontent-%COMP%], .cdk-global-overlay-wrapper[_ngcontent-%COMP%]{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;z-index:1000}.cdk-overlay-container[_ngcontent-%COMP%]:empty{display:none}.cdk-global-overlay-wrapper[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:1}.cdk-high-contrast-active[_ngcontent-%COMP%]   .cdk-overlay-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:.6}.cdk-overlay-dark-backdrop[_ngcontent-%COMP%]{background:#00000052}.cdk-overlay-transparent-backdrop[_ngcontent-%COMP%]{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing[_ngcontent-%COMP%]{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation[_ngcontent-%COMP%]{transition:none}.cdk-overlay-connected-position-bounding-box[_ngcontent-%COMP%]{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock[_ngcontent-%COMP%]{position:fixed;width:100%;overflow-y:scroll}textarea.cdk-textarea-autosize[_ngcontent-%COMP%]{resize:none}textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:auto!important;overflow:hidden!important}textarea.cdk-textarea-autosize-measuring-firefox[_ngcontent-%COMP%]{padding:2px 0!important;box-sizing:content-box!important;height:0!important}@keyframes _ngcontent-%COMP%_cdk-text-field-autofill-start{}@keyframes _ngcontent-%COMP%_cdk-text-field-autofill-end{}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:-webkit-autofill{animation:_ngcontent-%COMP%_cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){animation:_ngcontent-%COMP%_cdk-text-field-autofill-end 0s 1ms}.mat-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border:var(--mat-focus-indicator-border-width, 3px) var(--mat-focus-indicator-border-style, solid) var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-focus-indicator-display: block}.mat-mdc-focus-indicator[_ngcontent-%COMP%]{position:relative}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:before{inset:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-mdc-focus-indicator-display, none);border:var(--mat-mdc-focus-indicator-border-width, 3px) var(--mat-mdc-focus-indicator-border-style, solid) var(--mat-mdc-focus-indicator-border-color, transparent);border-radius:var(--mat-mdc-focus-indicator-border-radius, 4px)}.mat-mdc-focus-indicator[_ngcontent-%COMP%]:focus:before{content:""}.cdk-high-contrast-active[_ngcontent-%COMP%]{--mat-mdc-focus-indicator-display: block}.mat-app-background[_ngcontent-%COMP%]{background-color:var(--mat-app-background-color, var(--mat-app-background, transparent));color:var(--mat-app-text-color, var(--mat-app-on-background, inherit))}.mat-elevation-z0[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z0[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-0, none)}.mat-elevation-z1[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z1[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-1, none)}.mat-elevation-z2[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z2[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-2, none)}.mat-elevation-z3[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z3[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-3, none)}.mat-elevation-z4[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z4[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-4, none)}.mat-elevation-z5[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z5[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-5, none)}.mat-elevation-z6[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z6[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-6, none)}.mat-elevation-z7[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z7[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-7, none)}.mat-elevation-z8[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-8, none)}.mat-elevation-z9[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z9[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-9, none)}.mat-elevation-z10[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z10[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-10, none)}.mat-elevation-z11[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z11[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-11, none)}.mat-elevation-z12[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z12[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-12, none)}.mat-elevation-z13[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z13[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-13, none)}.mat-elevation-z14[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z14[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-14, none)}.mat-elevation-z15[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z15[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-15, none)}.mat-elevation-z16[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z16[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-16, none)}.mat-elevation-z17[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z17[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-17, none)}.mat-elevation-z18[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z18[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-18, none)}.mat-elevation-z19[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z19[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-19, none)}.mat-elevation-z20[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z20[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-20, none)}.mat-elevation-z21[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z21[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-21, none)}.mat-elevation-z22[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z22[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-22, none)}.mat-elevation-z23[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z23[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-23, none)}.mat-elevation-z24[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z24[_ngcontent-%COMP%]{box-shadow:var(--mat-app-elevation-shadow-level-24, none)}.tb-default[_ngcontent-%COMP%]{--mat-ripple-color: rgba(0, 0, 0, .1);--mat-option-selected-state-label-text-color: #305680;--mat-option-label-text-color: rgba(0, 0, 0, .87);--mat-option-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-option-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-option-selected-state-layer-color: rgba(0, 0, 0, .04);--mat-optgroup-label-text-color: rgba(0, 0, 0, .87);--mat-full-pseudo-checkbox-selected-icon-color: #ff5722;--mat-full-pseudo-checkbox-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #b0b0b0;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #b0b0b0;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #ff5722;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #b0b0b0;--mat-app-background-color: #eeeeee;--mat-app-text-color: rgba(0, 0, 0, .87);--mat-app-elevation-shadow-level-0: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-1: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-2: 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-3: 0px 3px 3px -2px rgba(0, 0, 0, .2), 0px 3px 4px 0px rgba(0, 0, 0, .14), 0px 1px 8px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-4: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-5: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 5px 8px 0px rgba(0, 0, 0, .14), 0px 1px 14px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-6: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-7: 0px 4px 5px -2px rgba(0, 0, 0, .2), 0px 7px 10px 1px rgba(0, 0, 0, .14), 0px 2px 16px 1px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-8: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-9: 0px 5px 6px -3px rgba(0, 0, 0, .2), 0px 9px 12px 1px rgba(0, 0, 0, .14), 0px 3px 16px 2px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-10: 0px 6px 6px -3px rgba(0, 0, 0, .2), 0px 10px 14px 1px rgba(0, 0, 0, .14), 0px 4px 18px 3px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-11: 0px 6px 7px -4px rgba(0, 0, 0, .2), 0px 11px 15px 1px rgba(0, 0, 0, .14), 0px 4px 20px 3px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-12: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-13: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 13px 19px 2px rgba(0, 0, 0, .14), 0px 5px 24px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-14: 0px 7px 9px -4px rgba(0, 0, 0, .2), 0px 14px 21px 2px rgba(0, 0, 0, .14), 0px 5px 26px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-15: 0px 8px 9px -5px rgba(0, 0, 0, .2), 0px 15px 22px 2px rgba(0, 0, 0, .14), 0px 6px 28px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-16: 0px 8px 10px -5px rgba(0, 0, 0, .2), 0px 16px 24px 2px rgba(0, 0, 0, .14), 0px 6px 30px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-17: 0px 8px 11px -5px rgba(0, 0, 0, .2), 0px 17px 26px 2px rgba(0, 0, 0, .14), 0px 6px 32px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-18: 0px 9px 11px -5px rgba(0, 0, 0, .2), 0px 18px 28px 2px rgba(0, 0, 0, .14), 0px 7px 34px 6px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-19: 0px 9px 12px -6px rgba(0, 0, 0, .2), 0px 19px 29px 2px rgba(0, 0, 0, .14), 0px 7px 36px 6px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-20: 0px 10px 13px -6px rgba(0, 0, 0, .2), 0px 20px 31px 3px rgba(0, 0, 0, .14), 0px 8px 38px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-21: 0px 10px 13px -6px rgba(0, 0, 0, .2), 0px 21px 33px 3px rgba(0, 0, 0, .14), 0px 8px 40px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-22: 0px 10px 14px -6px rgba(0, 0, 0, .2), 0px 22px 35px 3px rgba(0, 0, 0, .14), 0px 8px 42px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-23: 0px 11px 14px -7px rgba(0, 0, 0, .2), 0px 23px 36px 3px rgba(0, 0, 0, .14), 0px 9px 44px 8px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-24: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mat-option-label-text-font: Roboto, sans-serif;--mat-option-label-text-line-height: 24px;--mat-option-label-text-size: 16px;--mat-option-label-text-tracking: .03125em;--mat-option-label-text-weight: 400;--mat-optgroup-label-text-font: Roboto, sans-serif;--mat-optgroup-label-text-line-height: 24px;--mat-optgroup-label-text-size: 16px;--mat-optgroup-label-text-tracking: .03125em;--mat-optgroup-label-text-weight: 400;--mdc-elevated-card-container-shape: 4px;--mdc-outlined-card-container-shape: 4px;--mdc-outlined-card-outline-width: 1px;--mdc-elevated-card-container-color: white;--mdc-elevated-card-container-elevation: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mdc-outlined-card-container-color: white;--mdc-outlined-card-outline-color: rgba(0, 0, 0, .12);--mdc-outlined-card-container-elevation: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mat-card-subtitle-text-color: rgba(0, 0, 0, .54);--mat-card-title-text-font: Roboto, sans-serif;--mat-card-title-text-line-height: 32px;--mat-card-title-text-size: 20px;--mat-card-title-text-tracking: .0125em;--mat-card-title-text-weight: 500;--mat-card-subtitle-text-font: Roboto, sans-serif;--mat-card-subtitle-text-line-height: 22px;--mat-card-subtitle-text-size: 14px;--mat-card-subtitle-text-tracking: .0071428571em;--mat-card-subtitle-text-weight: 500;--mdc-linear-progress-active-indicator-height: 4px;--mdc-linear-progress-track-height: 4px;--mdc-linear-progress-track-shape: 0;--mdc-plain-tooltip-container-shape: 4px;--mdc-plain-tooltip-supporting-text-line-height: 16px;--mdc-plain-tooltip-container-color: #616161;--mdc-plain-tooltip-supporting-text-color: #fff;--mdc-plain-tooltip-supporting-text-font: Roboto, sans-serif;--mdc-plain-tooltip-supporting-text-size: 12px;--mdc-plain-tooltip-supporting-text-weight: 400;--mdc-plain-tooltip-supporting-text-tracking: .0333333333em;--mdc-filled-text-field-active-indicator-height: 1px;--mdc-filled-text-field-focus-active-indicator-height: 2px;--mdc-filled-text-field-container-shape: 4px;--mdc-outlined-text-field-outline-width: 1px;--mdc-outlined-text-field-focus-outline-width: 2px;--mdc-outlined-text-field-container-shape: 4px;--mdc-filled-text-field-caret-color: #305680;--mdc-filled-text-field-focus-active-indicator-color: #305680;--mdc-filled-text-field-focus-label-text-color: rgba(48, 86, 128, .87);--mdc-filled-text-field-container-color: whitesmoke;--mdc-filled-text-field-disabled-container-color: #fafafa;--mdc-filled-text-field-label-text-color: rgba(0, 0, 0, .6);--mdc-filled-text-field-hover-label-text-color: rgba(0, 0, 0, .6);--mdc-filled-text-field-disabled-label-text-color: rgba(0, 0, 0, .38);--mdc-filled-text-field-input-text-color: rgba(0, 0, 0, .87);--mdc-filled-text-field-disabled-input-text-color: rgba(0, 0, 0, .38);--mdc-filled-text-field-input-text-placeholder-color: rgba(0, 0, 0, .6);--mdc-filled-text-field-error-hover-label-text-color: #f44336;--mdc-filled-text-field-error-focus-label-text-color: #f44336;--mdc-filled-text-field-error-label-text-color: #f44336;--mdc-filled-text-field-error-caret-color: #f44336;--mdc-filled-text-field-active-indicator-color: rgba(0, 0, 0, .42);--mdc-filled-text-field-disabled-active-indicator-color: rgba(0, 0, 0, .06);--mdc-filled-text-field-hover-active-indicator-color: rgba(0, 0, 0, .87);--mdc-filled-text-field-error-active-indicator-color: #f44336;--mdc-filled-text-field-error-focus-active-indicator-color: #f44336;--mdc-filled-text-field-error-hover-active-indicator-color: #f44336;--mdc-outlined-text-field-caret-color: #305680;--mdc-outlined-text-field-focus-outline-color: #305680;--mdc-outlined-text-field-focus-label-text-color: rgba(48, 86, 128, .87);--mdc-outlined-text-field-label-text-color: rgba(0, 0, 0, .6);--mdc-outlined-text-field-hover-label-text-color: rgba(0, 0, 0, .6);--mdc-outlined-text-field-disabled-label-text-color: rgba(0, 0, 0, .38);--mdc-outlined-text-field-input-text-color: rgba(0, 0, 0, .87);--mdc-outlined-text-field-disabled-input-text-color: rgba(0, 0, 0, .38);--mdc-outlined-text-field-input-text-placeholder-color: rgba(0, 0, 0, .6);--mdc-outlined-text-field-error-caret-color: #f44336;--mdc-outlined-text-field-error-focus-label-text-color: #f44336;--mdc-outlined-text-field-error-label-text-color: #f44336;--mdc-outlined-text-field-error-hover-label-text-color: #f44336;--mdc-outlined-text-field-outline-color: rgba(0, 0, 0, .38);--mdc-outlined-text-field-disabled-outline-color: rgba(0, 0, 0, .06);--mdc-outlined-text-field-hover-outline-color: rgba(0, 0, 0, .87);--mdc-outlined-text-field-error-focus-outline-color: #f44336;--mdc-outlined-text-field-error-hover-outline-color: #f44336;--mdc-outlined-text-field-error-outline-color: #f44336;--mat-form-field-focus-select-arrow-color: rgba(48, 86, 128, .87);--mat-form-field-disabled-input-text-placeholder-color: rgba(0, 0, 0, .38);--mat-form-field-state-layer-color: rgba(0, 0, 0, .87);--mat-form-field-error-text-color: #f44336;--mat-form-field-select-option-text-color: inherit;--mat-form-field-select-disabled-option-text-color: GrayText;--mat-form-field-leading-icon-color: unset;--mat-form-field-disabled-leading-icon-color: unset;--mat-form-field-trailing-icon-color: unset;--mat-form-field-disabled-trailing-icon-color: unset;--mat-form-field-error-focus-trailing-icon-color: unset;--mat-form-field-error-hover-trailing-icon-color: unset;--mat-form-field-error-trailing-icon-color: unset;--mat-form-field-enabled-select-arrow-color: rgba(0, 0, 0, .54);--mat-form-field-disabled-select-arrow-color: rgba(0, 0, 0, .38);--mat-form-field-hover-state-layer-opacity: .04;--mat-form-field-focus-state-layer-opacity: .08;--mat-form-field-container-height: 56px;--mat-form-field-filled-label-display: block;--mat-form-field-container-vertical-padding: 16px;--mat-form-field-filled-with-label-container-padding-top: 24px;--mat-form-field-filled-with-label-container-padding-bottom: 8px;--mdc-filled-text-field-label-text-font: Roboto, sans-serif;--mdc-filled-text-field-label-text-size: 16px;--mdc-filled-text-field-label-text-tracking: .03125em;--mdc-filled-text-field-label-text-weight: 400;--mdc-outlined-text-field-label-text-font: Roboto, sans-serif;--mdc-outlined-text-field-label-text-size: 16px;--mdc-outlined-text-field-label-text-tracking: .03125em;--mdc-outlined-text-field-label-text-weight: 400;--mat-form-field-container-text-font: Roboto, sans-serif;--mat-form-field-container-text-line-height: 24px;--mat-form-field-container-text-size: 16px;--mat-form-field-container-text-tracking: .03125em;--mat-form-field-container-text-weight: 400;--mat-form-field-outlined-label-text-populated-size: 16px;--mat-form-field-subscript-text-font: Roboto, sans-serif;--mat-form-field-subscript-text-line-height: 20px;--mat-form-field-subscript-text-size: 12px;--mat-form-field-subscript-text-tracking: .0333333333em;--mat-form-field-subscript-text-weight: 400;--mat-select-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-select-panel-background-color: white;--mat-select-enabled-trigger-text-color: rgba(0, 0, 0, .87);--mat-select-disabled-trigger-text-color: rgba(0, 0, 0, .38);--mat-select-placeholder-text-color: rgba(0, 0, 0, .6);--mat-select-enabled-arrow-color: rgba(0, 0, 0, .54);--mat-select-disabled-arrow-color: rgba(0, 0, 0, .38);--mat-select-focused-arrow-color: rgba(48, 86, 128, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87);--mat-select-arrow-transform: translateY(-8px);--mat-select-trigger-text-font: Roboto, sans-serif;--mat-select-trigger-text-line-height: 24px;--mat-select-trigger-text-size: 16px;--mat-select-trigger-text-tracking: .03125em;--mat-select-trigger-text-weight: 400;--mat-autocomplete-container-shape: 4px;--mat-autocomplete-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-autocomplete-background-color: white;--mdc-dialog-container-shape: 4px;--mat-dialog-container-elevation-shadow: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mat-dialog-container-max-width: 80vw;--mat-dialog-container-small-max-width: 80vw;--mat-dialog-container-min-width: 0;--mat-dialog-actions-alignment: start;--mat-dialog-actions-padding: 8px;--mat-dialog-content-padding: 20px 24px;--mat-dialog-with-actions-content-padding: 20px 24px;--mat-dialog-headline-padding: 0 24px 9px;--mdc-dialog-container-color: white;--mdc-dialog-subhead-color: rgba(0, 0, 0, .87);--mdc-dialog-supporting-text-color: rgba(0, 0, 0, .6);--mdc-dialog-subhead-font: Roboto, sans-serif;--mdc-dialog-subhead-line-height: 32px;--mdc-dialog-subhead-size: 20px;--mdc-dialog-subhead-weight: 500;--mdc-dialog-subhead-tracking: .0125em;--mdc-dialog-supporting-text-font: Roboto, sans-serif;--mdc-dialog-supporting-text-line-height: 24px;--mdc-dialog-supporting-text-size: 16px;--mdc-dialog-supporting-text-weight: 400;--mdc-dialog-supporting-text-tracking: .03125em;--mdc-switch-disabled-selected-icon-opacity: .38;--mdc-switch-disabled-track-opacity: .12;--mdc-switch-disabled-unselected-icon-opacity: .38;--mdc-switch-handle-height: 20px;--mdc-switch-handle-shape: 10px;--mdc-switch-handle-width: 20px;--mdc-switch-selected-icon-size: 18px;--mdc-switch-track-height: 14px;--mdc-switch-track-shape: 7px;--mdc-switch-track-width: 36px;--mdc-switch-unselected-icon-size: 18px;--mdc-switch-selected-focus-state-layer-opacity: .12;--mdc-switch-selected-hover-state-layer-opacity: .04;--mdc-switch-selected-pressed-state-layer-opacity: .1;--mdc-switch-unselected-focus-state-layer-opacity: .12;--mdc-switch-unselected-hover-state-layer-opacity: .04;--mdc-switch-unselected-pressed-state-layer-opacity: .1;--mdc-switch-selected-focus-state-layer-color: #527dad;--mdc-switch-selected-handle-color: #527dad;--mdc-switch-selected-hover-state-layer-color: #527dad;--mdc-switch-selected-pressed-state-layer-color: #527dad;--mdc-switch-selected-focus-handle-color: #1a237e;--mdc-switch-selected-hover-handle-color: #1a237e;--mdc-switch-selected-pressed-handle-color: #1a237e;--mdc-switch-selected-focus-track-color: #7986cb;--mdc-switch-selected-hover-track-color: #7986cb;--mdc-switch-selected-pressed-track-color: #7986cb;--mdc-switch-selected-track-color: #7986cb;--mdc-switch-disabled-selected-handle-color: #424242;--mdc-switch-disabled-selected-icon-color: #fff;--mdc-switch-disabled-selected-track-color: #424242;--mdc-switch-disabled-unselected-handle-color: #424242;--mdc-switch-disabled-unselected-icon-color: #fff;--mdc-switch-disabled-unselected-track-color: #424242;--mdc-switch-handle-surface-color: #fff;--mdc-switch-selected-icon-color: #fff;--mdc-switch-unselected-focus-handle-color: #212121;--mdc-switch-unselected-focus-state-layer-color: #424242;--mdc-switch-unselected-focus-track-color: #e0e0e0;--mdc-switch-unselected-handle-color: #616161;--mdc-switch-unselected-hover-handle-color: #212121;--mdc-switch-unselected-hover-state-layer-color: #424242;--mdc-switch-unselected-hover-track-color: #e0e0e0;--mdc-switch-unselected-icon-color: #fff;--mdc-switch-unselected-pressed-handle-color: #212121;--mdc-switch-unselected-pressed-state-layer-color: #424242;--mdc-switch-unselected-pressed-track-color: #e0e0e0;--mdc-switch-unselected-track-color: #e0e0e0;--mdc-switch-handle-elevation-shadow: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mdc-switch-disabled-handle-elevation-shadow: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mdc-switch-disabled-label-text-color: rgba(0, 0, 0, .38);--mdc-switch-state-layer-size: 40px;--mdc-radio-disabled-selected-icon-opacity: .38;--mdc-radio-disabled-unselected-icon-opacity: .38;--mdc-radio-state-layer-size: 40px;--mat-radio-touch-target-display: block;--mat-radio-label-text-font: Roboto, sans-serif;--mat-radio-label-text-line-height: 20px;--mat-radio-label-text-size: 14px;--mat-radio-label-text-tracking: .0178571429em;--mat-radio-label-text-weight: 400;--mdc-slider-active-track-height: 6px;--mdc-slider-active-track-shape: 9999px;--mdc-slider-handle-height: 20px;--mdc-slider-handle-shape: 50%;--mdc-slider-handle-width: 20px;--mdc-slider-inactive-track-height: 4px;--mdc-slider-inactive-track-shape: 9999px;--mdc-slider-with-overlap-handle-outline-width: 1px;--mdc-slider-with-tick-marks-active-container-opacity: .6;--mdc-slider-with-tick-marks-container-shape: 50%;--mdc-slider-with-tick-marks-container-size: 2px;--mdc-slider-with-tick-marks-inactive-container-opacity: .6;--mdc-slider-handle-elevation: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mat-slider-value-indicator-width: auto;--mat-slider-value-indicator-height: 32px;--mat-slider-value-indicator-caret-display: block;--mat-slider-value-indicator-border-radius: 4px;--mat-slider-value-indicator-padding: 0 12px;--mat-slider-value-indicator-text-transform: none;--mat-slider-value-indicator-container-transform: translateX(-50%);--mdc-slider-handle-color: #305680;--mdc-slider-focus-handle-color: #305680;--mdc-slider-hover-handle-color: #305680;--mdc-slider-active-track-color: #305680;--mdc-slider-inactive-track-color: #305680;--mdc-slider-with-tick-marks-inactive-container-color: #305680;--mdc-slider-with-tick-marks-active-container-color: white;--mdc-slider-disabled-active-track-color: #000;--mdc-slider-disabled-handle-color: #000;--mdc-slider-disabled-inactive-track-color: #000;--mdc-slider-label-container-color: #000;--mdc-slider-label-label-text-color: #fff;--mdc-slider-with-overlap-handle-outline-color: #fff;--mdc-slider-with-tick-marks-disabled-container-color: #000;--mat-slider-ripple-color: #305680;--mat-slider-hover-state-layer-color: rgba(48, 86, 128, .05);--mat-slider-focus-state-layer-color: rgba(48, 86, 128, .2);--mat-slider-value-indicator-opacity: .6;--mdc-slider-label-label-text-font: Roboto, sans-serif;--mdc-slider-label-label-text-size: 14px;--mdc-slider-label-label-text-line-height: 22px;--mdc-slider-label-label-text-tracking: .0071428571em;--mdc-slider-label-label-text-weight: 500;--mat-menu-container-shape: 4px;--mat-menu-divider-bottom-spacing: 0;--mat-menu-divider-top-spacing: 0;--mat-menu-item-spacing: 16px;--mat-menu-item-icon-size: 24px;--mat-menu-item-leading-spacing: 16px;--mat-menu-item-trailing-spacing: 16px;--mat-menu-item-with-icon-leading-spacing: 16px;--mat-menu-item-with-icon-trailing-spacing: 16px;--mat-menu-base-elevation-level: 8;--mat-menu-item-label-text-color: rgba(0, 0, 0, .87);--mat-menu-item-icon-color: rgba(0, 0, 0, .87);--mat-menu-item-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-menu-item-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-menu-container-color: white;--mat-menu-divider-color: rgba(0, 0, 0, .12);--mat-menu-item-label-text-font: Roboto, sans-serif;--mat-menu-item-label-text-size: 16px;--mat-menu-item-label-text-tracking: .03125em;--mat-menu-item-label-text-line-height: 24px;--mat-menu-item-label-text-weight: 400;--mdc-list-list-item-container-shape: 0;--mdc-list-list-item-leading-avatar-shape: 50%;--mdc-list-list-item-container-color: transparent;--mdc-list-list-item-selected-container-color: transparent;--mdc-list-list-item-leading-avatar-color: transparent;--mdc-list-list-item-leading-icon-size: 24px;--mdc-list-list-item-leading-avatar-size: 40px;--mdc-list-list-item-trailing-icon-size: 24px;--mdc-list-list-item-disabled-state-layer-color: transparent;--mdc-list-list-item-disabled-state-layer-opacity: 0;--mdc-list-list-item-disabled-label-text-opacity: .38;--mdc-list-list-item-disabled-leading-icon-opacity: .38;--mdc-list-list-item-disabled-trailing-icon-opacity: .38;--mat-list-active-indicator-color: transparent;--mat-list-active-indicator-shape: 4px;--mdc-list-list-item-label-text-color: rgba(0, 0, 0, .87);--mdc-list-list-item-supporting-text-color: rgba(0, 0, 0, .54);--mdc-list-list-item-leading-icon-color: rgba(0, 0, 0, .38);--mdc-list-list-item-trailing-supporting-text-color: rgba(0, 0, 0, .38);--mdc-list-list-item-trailing-icon-color: rgba(0, 0, 0, .38);--mdc-list-list-item-selected-trailing-icon-color: rgba(0, 0, 0, .38);--mdc-list-list-item-disabled-label-text-color: black;--mdc-list-list-item-disabled-leading-icon-color: black;--mdc-list-list-item-disabled-trailing-icon-color: black;--mdc-list-list-item-hover-label-text-color: rgba(0, 0, 0, .87);--mdc-list-list-item-hover-leading-icon-color: rgba(0, 0, 0, .38);--mdc-list-list-item-hover-trailing-icon-color: rgba(0, 0, 0, .38);--mdc-list-list-item-focus-label-text-color: rgba(0, 0, 0, .87);--mdc-list-list-item-hover-state-layer-color: black;--mdc-list-list-item-hover-state-layer-opacity: .04;--mdc-list-list-item-focus-state-layer-color: black;--mdc-list-list-item-focus-state-layer-opacity: .12;--mdc-list-list-item-one-line-container-height: 48px;--mdc-list-list-item-two-line-container-height: 64px;--mdc-list-list-item-three-line-container-height: 88px;--mat-list-list-item-leading-icon-start-space: 16px;--mat-list-list-item-leading-icon-end-space: 32px;--mdc-list-list-item-label-text-font: Roboto, sans-serif;--mdc-list-list-item-label-text-line-height: 24px;--mdc-list-list-item-label-text-size: 16px;--mdc-list-list-item-label-text-tracking: .03125em;--mdc-list-list-item-label-text-weight: 400;--mdc-list-list-item-supporting-text-font: Roboto, sans-serif;--mdc-list-list-item-supporting-text-line-height: 20px;--mdc-list-list-item-supporting-text-size: 14px;--mdc-list-list-item-supporting-text-tracking: .0178571429em;--mdc-list-list-item-supporting-text-weight: 400;--mdc-list-list-item-trailing-supporting-text-font: Roboto, sans-serif;--mdc-list-list-item-trailing-supporting-text-line-height: 20px;--mdc-list-list-item-trailing-supporting-text-size: 12px;--mdc-list-list-item-trailing-supporting-text-tracking: .0333333333em;--mdc-list-list-item-trailing-supporting-text-weight: 400;--mat-paginator-container-text-color: rgba(0, 0, 0, .87);--mat-paginator-container-background-color: white;--mat-paginator-enabled-icon-color: rgba(0, 0, 0, .54);--mat-paginator-disabled-icon-color: rgba(0, 0, 0, .12);--mat-paginator-container-size: 56px;--mat-paginator-form-field-container-height: 40px;--mat-paginator-form-field-container-vertical-padding: 8px;--mat-paginator-touch-target-display: block;--mat-paginator-container-text-font: Roboto, sans-serif;--mat-paginator-container-text-line-height: 20px;--mat-paginator-container-text-size: 12px;--mat-paginator-container-text-tracking: .0333333333em;--mat-paginator-container-text-weight: 400;--mat-paginator-select-trigger-text-size: 12px;--mdc-secondary-navigation-tab-container-height: 48px;--mdc-tab-indicator-active-indicator-height: 2px;--mdc-tab-indicator-active-indicator-shape: 0;--mat-tab-header-divider-color: transparent;--mat-tab-header-divider-height: 0;--mdc-checkbox-disabled-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-state-layer-opacity: .16;--mdc-checkbox-selected-hover-state-layer-opacity: .04;--mdc-checkbox-selected-pressed-state-layer-opacity: .16;--mdc-checkbox-unselected-focus-state-layer-opacity: .16;--mdc-checkbox-unselected-hover-state-layer-opacity: .04;--mdc-checkbox-unselected-pressed-state-layer-opacity: .16;--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #ff5722;--mdc-checkbox-selected-hover-icon-color: #ff5722;--mdc-checkbox-selected-icon-color: #ff5722;--mdc-checkbox-selected-pressed-icon-color: #ff5722;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #ff5722;--mdc-checkbox-selected-hover-state-layer-color: #ff5722;--mdc-checkbox-selected-pressed-state-layer-color: #ff5722;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black;--mat-checkbox-disabled-label-color: rgba(0, 0, 0, .38);--mat-checkbox-label-text-color: rgba(0, 0, 0, .87);--mdc-checkbox-state-layer-size: 40px;--mat-checkbox-touch-target-display: block;--mat-checkbox-label-text-font: Roboto, sans-serif;--mat-checkbox-label-text-line-height: 20px;--mat-checkbox-label-text-size: 14px;--mat-checkbox-label-text-tracking: .0178571429em;--mat-checkbox-label-text-weight: 400;--mdc-text-button-container-shape: 4px;--mdc-text-button-keep-touch-target: false;--mdc-filled-button-container-shape: 4px;--mdc-filled-button-keep-touch-target: false;--mdc-protected-button-container-shape: 4px;--mdc-protected-button-container-elevation-shadow: 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12);--mdc-protected-button-disabled-container-elevation-shadow: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mdc-protected-button-focus-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mdc-protected-button-hover-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mdc-protected-button-pressed-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-outlined-button-keep-touch-target: false;--mdc-outlined-button-outline-width: 1px;--mdc-outlined-button-container-shape: 4px;--mat-text-button-horizontal-padding: 8px;--mat-text-button-with-icon-horizontal-padding: 8px;--mat-text-button-icon-spacing: 8px;--mat-text-button-icon-offset: 0;--mat-filled-button-horizontal-padding: 16px;--mat-filled-button-icon-spacing: 8px;--mat-filled-button-icon-offset: -4px;--mat-protected-button-horizontal-padding: 16px;--mat-protected-button-icon-spacing: 8px;--mat-protected-button-icon-offset: -4px;--mat-outlined-button-horizontal-padding: 15px;--mat-outlined-button-icon-spacing: 8px;--mat-outlined-button-icon-offset: -4px;--mdc-text-button-label-text-color: black;--mdc-text-button-disabled-label-text-color: rgba(0, 0, 0, .38);--mat-text-button-state-layer-color: black;--mat-text-button-disabled-state-layer-color: black;--mat-text-button-ripple-color: rgba(0, 0, 0, .1);--mat-text-button-hover-state-layer-opacity: .04;--mat-text-button-focus-state-layer-opacity: .12;--mat-text-button-pressed-state-layer-opacity: .12;--mdc-filled-button-container-color: white;--mdc-filled-button-label-text-color: black;--mdc-filled-button-disabled-container-color: rgba(0, 0, 0, .12);--mdc-filled-button-disabled-label-text-color: rgba(0, 0, 0, .38);--mat-filled-button-state-layer-color: black;--mat-filled-button-disabled-state-layer-color: black;--mat-filled-button-ripple-color: rgba(0, 0, 0, .1);--mat-filled-button-hover-state-layer-opacity: .04;--mat-filled-button-focus-state-layer-opacity: .12;--mat-filled-button-pressed-state-layer-opacity: .12;--mdc-protected-button-container-color: white;--mdc-protected-button-label-text-color: black;--mdc-protected-button-disabled-container-color: rgba(0, 0, 0, .12);--mdc-protected-button-disabled-label-text-color: rgba(0, 0, 0, .38);--mat-protected-button-state-layer-color: black;--mat-protected-button-disabled-state-layer-color: black;--mat-protected-button-ripple-color: rgba(0, 0, 0, .1);--mat-protected-button-hover-state-layer-opacity: .04;--mat-protected-button-focus-state-layer-opacity: .12;--mat-protected-button-pressed-state-layer-opacity: .12;--mdc-outlined-button-disabled-outline-color: rgba(0, 0, 0, .12);--mdc-outlined-button-disabled-label-text-color: rgba(0, 0, 0, .38);--mdc-outlined-button-label-text-color: black;--mdc-outlined-button-outline-color: rgba(0, 0, 0, .12);--mat-outlined-button-state-layer-color: black;--mat-outlined-button-disabled-state-layer-color: black;--mat-outlined-button-ripple-color: rgba(0, 0, 0, .1);--mat-outlined-button-hover-state-layer-opacity: .04;--mat-outlined-button-focus-state-layer-opacity: .12;--mat-outlined-button-pressed-state-layer-opacity: .12;--mdc-text-button-container-height: 36px;--mdc-filled-button-container-height: 36px;--mdc-protected-button-container-height: 36px;--mdc-outlined-button-container-height: 36px;--mat-text-button-touch-target-display: block;--mat-filled-button-touch-target-display: block;--mat-protected-button-touch-target-display: block;--mat-outlined-button-touch-target-display: block;--mdc-text-button-label-text-font: Roboto, sans-serif;--mdc-text-button-label-text-size: 14px;--mdc-text-button-label-text-tracking: .03125em;--mdc-text-button-label-text-weight: 500;--mdc-text-button-label-text-transform: none;--mdc-filled-button-label-text-font: Roboto, sans-serif;--mdc-filled-button-label-text-size: 14px;--mdc-filled-button-label-text-tracking: .03125em;--mdc-filled-button-label-text-weight: 500;--mdc-filled-button-label-text-transform: none;--mdc-protected-button-label-text-font: Roboto, sans-serif;--mdc-protected-button-label-text-size: 14px;--mdc-protected-button-label-text-tracking: .03125em;--mdc-protected-button-label-text-weight: 500;--mdc-protected-button-label-text-transform: none;--mdc-outlined-button-label-text-font: Roboto, sans-serif;--mdc-outlined-button-label-text-size: 14px;--mdc-outlined-button-label-text-tracking: .03125em;--mdc-outlined-button-label-text-weight: 500;--mdc-outlined-button-label-text-transform: none;--mdc-icon-button-icon-size: 24px;--mdc-icon-button-icon-color: inherit;--mdc-icon-button-disabled-icon-color: rgba(0, 0, 0, .38);--mat-icon-button-state-layer-color: black;--mat-icon-button-disabled-state-layer-color: black;--mat-icon-button-ripple-color: rgba(0, 0, 0, .1);--mat-icon-button-hover-state-layer-opacity: .04;--mat-icon-button-focus-state-layer-opacity: .12;--mat-icon-button-pressed-state-layer-opacity: .12;--mat-icon-button-touch-target-display: block;--mdc-fab-container-shape: 50%;--mdc-fab-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-fab-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-fab-small-container-shape: 50%;--mdc-fab-small-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-fab-small-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-small-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-small-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-extended-fab-container-height: 48px;--mdc-extended-fab-container-shape: 24px;--mdc-extended-fab-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-extended-fab-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-extended-fab-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-extended-fab-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-fab-container-color: white;--mat-fab-foreground-color: black;--mat-fab-state-layer-color: black;--mat-fab-disabled-state-layer-color: black;--mat-fab-ripple-color: rgba(0, 0, 0, .1);--mat-fab-hover-state-layer-opacity: .04;--mat-fab-focus-state-layer-opacity: .12;--mat-fab-pressed-state-layer-opacity: .12;--mat-fab-disabled-state-container-color: rgba(0, 0, 0, .12);--mat-fab-disabled-state-foreground-color: rgba(0, 0, 0, .38);--mdc-fab-small-container-color: white;--mat-fab-small-foreground-color: black;--mat-fab-small-state-layer-color: black;--mat-fab-small-disabled-state-layer-color: black;--mat-fab-small-ripple-color: rgba(0, 0, 0, .1);--mat-fab-small-hover-state-layer-opacity: .04;--mat-fab-small-focus-state-layer-opacity: .12;--mat-fab-small-pressed-state-layer-opacity: .12;--mat-fab-small-disabled-state-container-color: rgba(0, 0, 0, .12);--mat-fab-small-disabled-state-foreground-color: rgba(0, 0, 0, .38);--mat-fab-touch-target-display: block;--mat-fab-small-touch-target-display: block;--mdc-extended-fab-label-text-font: Roboto, sans-serif;--mdc-extended-fab-label-text-size: 14px;--mdc-extended-fab-label-text-tracking: .03125em;--mdc-extended-fab-label-text-weight: 500;--mdc-snackbar-container-shape: 4px;--mdc-snackbar-container-color: #333333;--mdc-snackbar-supporting-text-color: rgba(255, 255, 255, .87);--mat-snack-bar-button-color: #ff5722;--mdc-snackbar-supporting-text-font: Roboto, sans-serif;--mdc-snackbar-supporting-text-line-height: 20px;--mdc-snackbar-supporting-text-size: 14px;--mdc-snackbar-supporting-text-weight: 400;--mat-table-row-item-outline-width: 1px;--mat-table-background-color: white;--mat-table-header-headline-color: rgba(0, 0, 0, .87);--mat-table-row-item-label-text-color: rgba(0, 0, 0, .87);--mat-table-row-item-outline-color: rgba(0, 0, 0, .12);--mat-table-header-container-height: 56px;--mat-table-footer-container-height: 52px;--mat-table-row-item-container-height: 52px;--mat-table-header-headline-font: Roboto, sans-serif;--mat-table-header-headline-line-height: 22px;--mat-table-header-headline-size: 14px;--mat-table-header-headline-weight: 500;--mat-table-header-headline-tracking: .0071428571em;--mat-table-row-item-label-text-font: Roboto, sans-serif;--mat-table-row-item-label-text-line-height: 20px;--mat-table-row-item-label-text-size: 14px;--mat-table-row-item-label-text-weight: 400;--mat-table-row-item-label-text-tracking: .0178571429em;--mat-table-footer-supporting-text-font: Roboto, sans-serif;--mat-table-footer-supporting-text-line-height: 20px;--mat-table-footer-supporting-text-size: 14px;--mat-table-footer-supporting-text-weight: 400;--mat-table-footer-supporting-text-tracking: .0178571429em;--mdc-circular-progress-active-indicator-width: 4px;--mdc-circular-progress-size: 48px;--mdc-circular-progress-active-indicator-color: #305680;--mat-badge-container-shape: 50%;--mat-badge-container-size: unset;--mat-badge-small-size-container-size: unset;--mat-badge-large-size-container-size: unset;--mat-badge-legacy-container-size: 22px;--mat-badge-legacy-small-size-container-size: 16px;--mat-badge-legacy-large-size-container-size: 28px;--mat-badge-container-offset: -11px 0;--mat-badge-small-size-container-offset: -8px 0;--mat-badge-large-size-container-offset: -14px 0;--mat-badge-container-overlap-offset: -11px;--mat-badge-small-size-container-overlap-offset: -8px;--mat-badge-large-size-container-overlap-offset: -14px;--mat-badge-container-padding: 0;--mat-badge-small-size-container-padding: 0;--mat-badge-large-size-container-padding: 0;--mat-badge-background-color: #305680;--mat-badge-text-color: white;--mat-badge-disabled-state-background-color: #b0b0b0;--mat-badge-disabled-state-text-color: rgba(0, 0, 0, .38);--mat-badge-text-font: Roboto, sans-serif;--mat-badge-text-size: 12px;--mat-badge-text-weight: 600;--mat-badge-small-size-text-size: 9px;--mat-badge-large-size-text-size: 24px;--mat-bottom-sheet-container-shape: 4px;--mat-bottom-sheet-container-text-color: rgba(0, 0, 0, .87);--mat-bottom-sheet-container-background-color: white;--mat-bottom-sheet-container-text-font: Roboto, sans-serif;--mat-bottom-sheet-container-text-line-height: 20px;--mat-bottom-sheet-container-text-size: 14px;--mat-bottom-sheet-container-text-tracking: .0178571429em;--mat-bottom-sheet-container-text-weight: 400;--mat-legacy-button-toggle-height: 36px;--mat-legacy-button-toggle-shape: 2px;--mat-legacy-button-toggle-focus-state-layer-opacity: 1;--mat-standard-button-toggle-shape: 4px;--mat-standard-button-toggle-hover-state-layer-opacity: .04;--mat-standard-button-toggle-focus-state-layer-opacity: .12;--mat-legacy-button-toggle-text-color: rgba(0, 0, 0, .38);--mat-legacy-button-toggle-state-layer-color: rgba(0, 0, 0, .12);--mat-legacy-button-toggle-selected-state-text-color: rgba(0, 0, 0, .54);--mat-legacy-button-toggle-selected-state-background-color: #e0e0e0;--mat-legacy-button-toggle-disabled-state-text-color: rgba(0, 0, 0, .26);--mat-legacy-button-toggle-disabled-state-background-color: #eeeeee;--mat-legacy-button-toggle-disabled-selected-state-background-color: #bdbdbd;--mat-standard-button-toggle-text-color: rgba(0, 0, 0, .87);--mat-standard-button-toggle-background-color: white;--mat-standard-button-toggle-state-layer-color: black;--mat-standard-button-toggle-selected-state-background-color: #e0e0e0;--mat-standard-button-toggle-selected-state-text-color: rgba(0, 0, 0, .87);--mat-standard-button-toggle-disabled-state-text-color: rgba(0, 0, 0, .26);--mat-standard-button-toggle-disabled-state-background-color: white;--mat-standard-button-toggle-disabled-selected-state-text-color: rgba(0, 0, 0, .87);--mat-standard-button-toggle-disabled-selected-state-background-color: #bdbdbd;--mat-standard-button-toggle-divider-color: #e0e0e0;--mat-standard-button-toggle-height: 48px;--mat-legacy-button-toggle-label-text-font: Roboto, sans-serif;--mat-legacy-button-toggle-label-text-line-height: 24px;--mat-legacy-button-toggle-label-text-size: 16px;--mat-legacy-button-toggle-label-text-tracking: .03125em;--mat-legacy-button-toggle-label-text-weight: 400;--mat-standard-button-toggle-label-text-font: Roboto, sans-serif;--mat-standard-button-toggle-label-text-line-height: 24px;--mat-standard-button-toggle-label-text-size: 16px;--mat-standard-button-toggle-label-text-tracking: .03125em;--mat-standard-button-toggle-label-text-weight: 400;--mat-datepicker-calendar-container-shape: 4px;--mat-datepicker-calendar-container-touch-shape: 4px;--mat-datepicker-calendar-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mat-datepicker-calendar-container-touch-elevation-shadow: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mat-datepicker-calendar-date-selected-state-text-color: white;--mat-datepicker-calendar-date-selected-state-background-color: #305680;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(48, 86, 128, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: white;--mat-datepicker-calendar-date-focus-state-background-color: rgba(48, 86, 128, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(48, 86, 128, .3);--mat-datepicker-toggle-active-state-icon-color: #305680;--mat-datepicker-calendar-date-in-range-state-background-color: rgba(48, 86, 128, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e;--mat-datepicker-toggle-icon-color: rgba(0, 0, 0, .54);--mat-datepicker-calendar-body-label-text-color: rgba(0, 0, 0, .54);--mat-datepicker-calendar-period-button-text-color: black;--mat-datepicker-calendar-period-button-icon-color: rgba(0, 0, 0, .54);--mat-datepicker-calendar-navigation-button-icon-color: rgba(0, 0, 0, .54);--mat-datepicker-calendar-header-divider-color: rgba(0, 0, 0, .12);--mat-datepicker-calendar-header-text-color: rgba(0, 0, 0, .54);--mat-datepicker-calendar-date-today-outline-color: rgba(0, 0, 0, .38);--mat-datepicker-calendar-date-today-disabled-state-outline-color: rgba(0, 0, 0, .18);--mat-datepicker-calendar-date-text-color: rgba(0, 0, 0, .87);--mat-datepicker-calendar-date-outline-color: transparent;--mat-datepicker-calendar-date-disabled-state-text-color: rgba(0, 0, 0, .38);--mat-datepicker-calendar-date-preview-state-outline-color: rgba(0, 0, 0, .24);--mat-datepicker-range-input-separator-color: rgba(0, 0, 0, .87);--mat-datepicker-range-input-disabled-state-separator-color: rgba(0, 0, 0, .38);--mat-datepicker-range-input-disabled-state-text-color: rgba(0, 0, 0, .38);--mat-datepicker-calendar-container-background-color: white;--mat-datepicker-calendar-container-text-color: rgba(0, 0, 0, .87);--mat-datepicker-calendar-text-font: Roboto, sans-serif;--mat-datepicker-calendar-text-size: 13px;--mat-datepicker-calendar-body-label-text-size: 14px;--mat-datepicker-calendar-body-label-text-weight: 500;--mat-datepicker-calendar-period-button-text-size: 14px;--mat-datepicker-calendar-period-button-text-weight: 500;--mat-datepicker-calendar-header-text-size: 11px;--mat-datepicker-calendar-header-text-weight: 400;--mat-divider-width: 1px;--mat-divider-color: rgba(0, 0, 0, .12);--mat-expansion-container-shape: 4px;--mat-expansion-legacy-header-indicator-display: inline-block;--mat-expansion-header-indicator-display: none;--mat-expansion-container-background-color: white;--mat-expansion-container-text-color: rgba(0, 0, 0, .87);--mat-expansion-actions-divider-color: rgba(0, 0, 0, .12);--mat-expansion-header-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-expansion-header-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-expansion-header-disabled-state-text-color: rgba(0, 0, 0, .26);--mat-expansion-header-text-color: rgba(0, 0, 0, .87);--mat-expansion-header-description-color: rgba(0, 0, 0, .54);--mat-expansion-header-indicator-color: rgba(0, 0, 0, .54);--mat-expansion-header-collapsed-state-height: 48px;--mat-expansion-header-expanded-state-height: 64px;--mat-expansion-header-text-font: Roboto, sans-serif;--mat-expansion-header-text-size: 14px;--mat-expansion-header-text-weight: 500;--mat-expansion-header-text-line-height: inherit;--mat-expansion-header-text-tracking: inherit;--mat-expansion-container-text-font: Roboto, sans-serif;--mat-expansion-container-text-line-height: 20px;--mat-expansion-container-text-size: 14px;--mat-expansion-container-text-tracking: .0178571429em;--mat-expansion-container-text-weight: 400;--mat-grid-list-tile-header-primary-text-size: 14px;--mat-grid-list-tile-header-secondary-text-size: 12px;--mat-grid-list-tile-footer-primary-text-size: 14px;--mat-grid-list-tile-footer-secondary-text-size: 12px;--mat-icon-color: inherit;--mat-sidenav-container-shape: 0;--mat-sidenav-container-elevation-shadow: 0px 8px 10px -5px rgba(0, 0, 0, .2), 0px 16px 24px 2px rgba(0, 0, 0, .14), 0px 6px 30px 5px rgba(0, 0, 0, .12);--mat-sidenav-container-width: auto;--mat-sidenav-container-divider-color: rgba(0, 0, 0, .12);--mat-sidenav-container-background-color: white;--mat-sidenav-container-text-color: rgba(0, 0, 0, .87);--mat-sidenav-content-background-color: #eeeeee;--mat-sidenav-content-text-color: rgba(0, 0, 0, .87);--mat-sidenav-scrim-color: rgba(0, 0, 0, .6);--mat-stepper-header-icon-foreground-color: white;--mat-stepper-header-selected-state-icon-background-color: #305680;--mat-stepper-header-selected-state-icon-foreground-color: white;--mat-stepper-header-done-state-icon-background-color: #305680;--mat-stepper-header-done-state-icon-foreground-color: white;--mat-stepper-header-edit-state-icon-background-color: #305680;--mat-stepper-header-edit-state-icon-foreground-color: white;--mat-stepper-container-color: white;--mat-stepper-line-color: rgba(0, 0, 0, .12);--mat-stepper-header-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-stepper-header-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-stepper-header-label-text-color: rgba(0, 0, 0, .54);--mat-stepper-header-optional-label-text-color: rgba(0, 0, 0, .54);--mat-stepper-header-selected-state-label-text-color: rgba(0, 0, 0, .87);--mat-stepper-header-error-state-label-text-color: #f44336;--mat-stepper-header-icon-background-color: rgba(0, 0, 0, .54);--mat-stepper-header-error-state-icon-foreground-color: #f44336;--mat-stepper-header-error-state-icon-background-color: transparent;--mat-stepper-header-height: 72px;--mat-stepper-container-text-font: Roboto, sans-serif;--mat-stepper-header-label-text-font: Roboto, sans-serif;--mat-stepper-header-label-text-size: 14px;--mat-stepper-header-label-text-weight: 400;--mat-stepper-header-error-state-label-text-size: 16px;--mat-stepper-header-selected-state-label-text-size: 16px;--mat-stepper-header-selected-state-label-text-weight: 400;--mat-sort-arrow-color: #757575;--mat-toolbar-container-background-color: whitesmoke;--mat-toolbar-container-text-color: rgba(0, 0, 0, .87);--mat-toolbar-standard-height: 64px;--mat-toolbar-mobile-height: 56px;--mat-toolbar-title-text-font: Roboto, sans-serif;--mat-toolbar-title-text-line-height: 32px;--mat-toolbar-title-text-size: 20px;--mat-toolbar-title-text-tracking: .0125em;--mat-toolbar-title-text-weight: 500;--mat-tree-container-background-color: white;--mat-tree-node-text-color: rgba(0, 0, 0, .87);--mat-tree-node-min-height: 48px;--mat-tree-node-text-font: Roboto, sans-serif;--mat-tree-node-text-size: 14px;--mat-tree-node-text-weight: 400}.mat-theme-loaded-marker[_ngcontent-%COMP%]{display:none}.tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mat-option-selected-state-label-text-color: #ff5722;--mat-option-label-text-color: rgba(0, 0, 0, .87);--mat-option-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-option-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-option-selected-state-layer-color: rgba(0, 0, 0, .04)}.tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mat-option-selected-state-label-text-color: #f44336;--mat-option-label-text-color: rgba(0, 0, 0, .87);--mat-option-hover-state-layer-color: rgba(0, 0, 0, .04);--mat-option-focus-state-layer-color: rgba(0, 0, 0, .04);--mat-option-selected-state-layer-color: rgba(0, 0, 0, .04)}.tb-default[_ngcontent-%COMP%]   .mat-primary[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #305680;--mat-full-pseudo-checkbox-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #b0b0b0;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #b0b0b0;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #305680;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #b0b0b0}.tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #ff5722;--mat-full-pseudo-checkbox-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #b0b0b0;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #b0b0b0;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #ff5722;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #b0b0b0}.tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #f44336;--mat-full-pseudo-checkbox-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #eeeeee;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #b0b0b0;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #b0b0b0;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #f44336;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #b0b0b0}.tb-default[_ngcontent-%COMP%]   .mat-mdc-progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #305680;--mdc-linear-progress-track-color: rgba(48, 86, 128, .25)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-progress-bar.mat-accent[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #ff5722;--mdc-linear-progress-track-color: rgba(255, 87, 34, .25)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-progress-bar.mat-warn[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #f44336;--mdc-linear-progress-track-color: rgba(244, 67, 54, .25)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-accent[_ngcontent-%COMP%]{--mdc-filled-text-field-caret-color: #ff5722;--mdc-filled-text-field-focus-active-indicator-color: #ff5722;--mdc-filled-text-field-focus-label-text-color: rgba(255, 87, 34, .87);--mdc-outlined-text-field-caret-color: #ff5722;--mdc-outlined-text-field-focus-outline-color: #ff5722;--mdc-outlined-text-field-focus-label-text-color: rgba(255, 87, 34, .87);--mat-form-field-focus-select-arrow-color: rgba(255, 87, 34, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-warn[_ngcontent-%COMP%]{--mdc-filled-text-field-caret-color: #f44336;--mdc-filled-text-field-focus-active-indicator-color: #f44336;--mdc-filled-text-field-focus-label-text-color: rgba(244, 67, 54, .87);--mdc-outlined-text-field-caret-color: #f44336;--mdc-outlined-text-field-focus-outline-color: #f44336;--mdc-outlined-text-field-focus-label-text-color: rgba(244, 67, 54, .87);--mat-form-field-focus-select-arrow-color: rgba(244, 67, 54, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-accent[_ngcontent-%COMP%]{--mat-select-panel-background-color: white;--mat-select-enabled-trigger-text-color: rgba(0, 0, 0, .87);--mat-select-disabled-trigger-text-color: rgba(0, 0, 0, .38);--mat-select-placeholder-text-color: rgba(0, 0, 0, .6);--mat-select-enabled-arrow-color: rgba(0, 0, 0, .54);--mat-select-disabled-arrow-color: rgba(0, 0, 0, .38);--mat-select-focused-arrow-color: rgba(255, 87, 34, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-warn[_ngcontent-%COMP%]{--mat-select-panel-background-color: white;--mat-select-enabled-trigger-text-color: rgba(0, 0, 0, .87);--mat-select-disabled-trigger-text-color: rgba(0, 0, 0, .38);--mat-select-placeholder-text-color: rgba(0, 0, 0, .6);--mat-select-enabled-arrow-color: rgba(0, 0, 0, .54);--mat-select-disabled-arrow-color: rgba(0, 0, 0, .38);--mat-select-focused-arrow-color: rgba(244, 67, 54, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip[_ngcontent-%COMP%]{--mdc-chip-container-shape-radius: 16px;--mdc-chip-with-avatar-avatar-shape-radius: 14px;--mdc-chip-with-avatar-avatar-size: 28px;--mdc-chip-with-icon-icon-size: 18px;--mdc-chip-outline-width: 0;--mdc-chip-outline-color: transparent;--mdc-chip-disabled-outline-color: transparent;--mdc-chip-focus-outline-color: transparent;--mdc-chip-hover-state-layer-opacity: .04;--mdc-chip-with-avatar-disabled-avatar-opacity: 1;--mdc-chip-flat-selected-outline-width: 0;--mdc-chip-selected-hover-state-layer-opacity: .04;--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity: 1;--mdc-chip-with-icon-disabled-icon-opacity: 1;--mat-chip-disabled-container-opacity: .4;--mat-chip-trailing-action-opacity: .54;--mat-chip-trailing-action-focus-opacity: 1;--mat-chip-trailing-action-state-layer-color: transparent;--mat-chip-selected-trailing-action-state-layer-color: transparent;--mat-chip-trailing-action-hover-state-layer-opacity: 0;--mat-chip-trailing-action-focus-state-layer-opacity: 0;--mdc-chip-disabled-label-text-color: #212121;--mdc-chip-elevated-container-color: #e0e0e0;--mdc-chip-elevated-selected-container-color: #e0e0e0;--mdc-chip-elevated-disabled-container-color: #e0e0e0;--mdc-chip-flat-disabled-selected-container-color: #e0e0e0;--mdc-chip-focus-state-layer-color: black;--mdc-chip-hover-state-layer-color: black;--mdc-chip-selected-hover-state-layer-color: black;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: black;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: #212121;--mdc-chip-selected-label-text-color: #212121;--mdc-chip-with-icon-icon-color: #212121;--mdc-chip-with-icon-disabled-icon-color: #212121;--mdc-chip-with-icon-selected-icon-color: #212121;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: #212121;--mdc-chip-with-trailing-icon-trailing-icon-color: #212121;--mat-chip-selected-disabled-trailing-icon-color: #212121;--mat-chip-selected-trailing-icon-color: #212121}.tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-primary[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-primary[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: white;--mdc-chip-elevated-container-color: #305680;--mdc-chip-elevated-selected-container-color: #305680;--mdc-chip-elevated-disabled-container-color: #305680;--mdc-chip-flat-disabled-selected-container-color: #305680;--mdc-chip-focus-state-layer-color: black;--mdc-chip-hover-state-layer-color: black;--mdc-chip-selected-hover-state-layer-color: black;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: black;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: white;--mdc-chip-selected-label-text-color: white;--mdc-chip-with-icon-icon-color: white;--mdc-chip-with-icon-disabled-icon-color: white;--mdc-chip-with-icon-selected-icon-color: white;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: white;--mdc-chip-with-trailing-icon-trailing-icon-color: white;--mat-chip-selected-disabled-trailing-icon-color: white;--mat-chip-selected-trailing-icon-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-accent[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-accent[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: white;--mdc-chip-elevated-container-color: #ff5722;--mdc-chip-elevated-selected-container-color: #ff5722;--mdc-chip-elevated-disabled-container-color: #ff5722;--mdc-chip-flat-disabled-selected-container-color: #ff5722;--mdc-chip-focus-state-layer-color: black;--mdc-chip-hover-state-layer-color: black;--mdc-chip-selected-hover-state-layer-color: black;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: black;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: white;--mdc-chip-selected-label-text-color: white;--mdc-chip-with-icon-icon-color: white;--mdc-chip-with-icon-disabled-icon-color: white;--mdc-chip-with-icon-selected-icon-color: white;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: white;--mdc-chip-with-trailing-icon-trailing-icon-color: white;--mat-chip-selected-disabled-trailing-icon-color: white;--mat-chip-selected-trailing-icon-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-warn[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-warn[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: white;--mdc-chip-elevated-container-color: #f44336;--mdc-chip-elevated-selected-container-color: #f44336;--mdc-chip-elevated-disabled-container-color: #f44336;--mdc-chip-flat-disabled-selected-container-color: #f44336;--mdc-chip-focus-state-layer-color: black;--mdc-chip-hover-state-layer-color: black;--mdc-chip-selected-hover-state-layer-color: black;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: black;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: white;--mdc-chip-selected-label-text-color: white;--mdc-chip-with-icon-icon-color: white;--mdc-chip-with-icon-disabled-icon-color: white;--mdc-chip-with-icon-selected-icon-color: white;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: white;--mdc-chip-with-trailing-icon-trailing-icon-color: white;--mat-chip-selected-disabled-trailing-icon-color: white;--mat-chip-selected-trailing-icon-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{--mdc-chip-container-height: 32px}.tb-default[_ngcontent-%COMP%]   .mat-mdc-standard-chip[_ngcontent-%COMP%]{--mdc-chip-label-text-font: Roboto, sans-serif;--mdc-chip-label-text-line-height: 20px;--mdc-chip-label-text-size: 14px;--mdc-chip-label-text-tracking: .0178571429em;--mdc-chip-label-text-weight: 400}.tb-default[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{--mat-switch-disabled-selected-handle-opacity: .38;--mat-switch-disabled-unselected-handle-opacity: .38;--mat-switch-unselected-handle-size: 20px;--mat-switch-selected-handle-size: 20px;--mat-switch-pressed-handle-size: 20px;--mat-switch-with-icon-handle-size: 20px;--mat-switch-selected-handle-horizontal-margin: 0;--mat-switch-selected-with-icon-handle-horizontal-margin: 0;--mat-switch-selected-pressed-handle-horizontal-margin: 0;--mat-switch-unselected-handle-horizontal-margin: 0;--mat-switch-unselected-with-icon-handle-horizontal-margin: 0;--mat-switch-unselected-pressed-handle-horizontal-margin: 0;--mat-switch-visible-track-opacity: 1;--mat-switch-hidden-track-opacity: 1;--mat-switch-visible-track-transition: transform 75ms 0ms cubic-bezier(0, 0, .2, 1);--mat-switch-hidden-track-transition: transform 75ms 0ms cubic-bezier(.4, 0, .6, 1);--mat-switch-track-outline-width: 1px;--mat-switch-track-outline-color: transparent;--mat-switch-selected-track-outline-width: 1px;--mat-switch-selected-track-outline-color: transparent;--mat-switch-disabled-unselected-track-outline-width: 1px;--mat-switch-disabled-unselected-track-outline-color: transparent;--mat-switch-label-text-color: rgba(0, 0, 0, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-slide-toggle.mat-accent[_ngcontent-%COMP%]{--mdc-switch-selected-focus-state-layer-color: #f4511e;--mdc-switch-selected-handle-color: #f4511e;--mdc-switch-selected-hover-state-layer-color: #f4511e;--mdc-switch-selected-pressed-state-layer-color: #f4511e;--mdc-switch-selected-focus-handle-color: #bf360c;--mdc-switch-selected-hover-handle-color: #bf360c;--mdc-switch-selected-pressed-handle-color: #bf360c;--mdc-switch-selected-focus-track-color: #ff8a65;--mdc-switch-selected-hover-track-color: #ff8a65;--mdc-switch-selected-pressed-track-color: #ff8a65;--mdc-switch-selected-track-color: #ff8a65}.tb-default[_ngcontent-%COMP%]   .mat-mdc-slide-toggle.mat-warn[_ngcontent-%COMP%]{--mdc-switch-selected-focus-state-layer-color: #e53935;--mdc-switch-selected-handle-color: #e53935;--mdc-switch-selected-hover-state-layer-color: #e53935;--mdc-switch-selected-pressed-state-layer-color: #e53935;--mdc-switch-selected-focus-handle-color: #b71c1c;--mdc-switch-selected-hover-handle-color: #b71c1c;--mdc-switch-selected-pressed-handle-color: #b71c1c;--mdc-switch-selected-focus-track-color: #e57373;--mdc-switch-selected-hover-track-color: #e57373;--mdc-switch-selected-pressed-track-color: #e57373;--mdc-switch-selected-track-color: #e57373}.tb-default[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{--mat-switch-label-text-font: Roboto, sans-serif;--mat-switch-label-text-line-height: 20px;--mat-switch-label-text-size: 14px;--mat-switch-label-text-tracking: .0178571429em;--mat-switch-label-text-weight: 400}.tb-default[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #305680;--mdc-radio-selected-hover-icon-color: #305680;--mdc-radio-selected-icon-color: #305680;--mdc-radio-selected-pressed-icon-color: #305680;--mat-radio-ripple-color: black;--mat-radio-checked-ripple-color: #305680;--mat-radio-disabled-label-color: rgba(0, 0, 0, .38);--mat-radio-label-text-color: rgba(0, 0, 0, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-accent[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #ff5722;--mdc-radio-selected-hover-icon-color: #ff5722;--mdc-radio-selected-icon-color: #ff5722;--mdc-radio-selected-pressed-icon-color: #ff5722;--mat-radio-ripple-color: black;--mat-radio-checked-ripple-color: #ff5722;--mat-radio-disabled-label-color: rgba(0, 0, 0, .38);--mat-radio-label-text-color: rgba(0, 0, 0, .87)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-warn[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #f44336;--mdc-radio-selected-hover-icon-color: #f44336;--mdc-radio-selected-icon-color: #f44336;--mdc-radio-selected-pressed-icon-color: #f44336;--mat-radio-ripple-color: black;--mat-radio-checked-ripple-color: #f44336;--mat-radio-disabled-label-color: rgba(0, 0, 0, .38);--mat-radio-label-text-color: rgba(0, 0, 0, .87)}.tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mdc-slider-handle-color: #ff5722;--mdc-slider-focus-handle-color: #ff5722;--mdc-slider-hover-handle-color: #ff5722;--mdc-slider-active-track-color: #ff5722;--mdc-slider-inactive-track-color: #ff5722;--mdc-slider-with-tick-marks-inactive-container-color: #ff5722;--mdc-slider-with-tick-marks-active-container-color: white;--mat-slider-ripple-color: #ff5722;--mat-slider-hover-state-layer-color: rgba(255, 87, 34, .05);--mat-slider-focus-state-layer-color: rgba(255, 87, 34, .2)}.tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mdc-slider-handle-color: #f44336;--mdc-slider-focus-handle-color: #f44336;--mdc-slider-hover-handle-color: #f44336;--mdc-slider-active-track-color: #f44336;--mdc-slider-inactive-track-color: #f44336;--mdc-slider-with-tick-marks-inactive-container-color: #f44336;--mdc-slider-with-tick-marks-active-container-color: white;--mat-slider-ripple-color: #f44336;--mat-slider-hover-state-layer-color: rgba(244, 67, 54, .05);--mat-slider-focus-state-layer-color: rgba(244, 67, 54, .2)}.tb-default[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #305680;--mdc-radio-selected-hover-icon-color: #305680;--mdc-radio-selected-icon-color: #305680;--mdc-radio-selected-pressed-icon-color: #305680}.tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #ff5722;--mdc-radio-selected-hover-icon-color: #ff5722;--mdc-radio-selected-icon-color: #ff5722;--mdc-radio-selected-pressed-icon-color: #ff5722}.tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: black;--mdc-radio-disabled-unselected-icon-color: black;--mdc-radio-unselected-hover-icon-color: #212121;--mdc-radio-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-radio-unselected-pressed-icon-color: rgba(0, 0, 0, .54);--mdc-radio-selected-focus-icon-color: #f44336;--mdc-radio-selected-hover-icon-color: #f44336;--mdc-radio-selected-icon-color: #f44336;--mdc-radio-selected-pressed-icon-color: #f44336}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-option[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #305680;--mdc-checkbox-selected-hover-icon-color: #305680;--mdc-checkbox-selected-icon-color: #305680;--mdc-checkbox-selected-pressed-icon-color: #305680;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #305680;--mdc-checkbox-selected-hover-state-layer-color: #305680;--mdc-checkbox-selected-pressed-state-layer-color: #305680;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-option.mat-accent[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #ff5722;--mdc-checkbox-selected-hover-icon-color: #ff5722;--mdc-checkbox-selected-icon-color: #ff5722;--mdc-checkbox-selected-pressed-icon-color: #ff5722;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #ff5722;--mdc-checkbox-selected-hover-state-layer-color: #ff5722;--mdc-checkbox-selected-pressed-state-layer-color: #ff5722;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-option.mat-warn[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #f44336;--mdc-checkbox-selected-hover-icon-color: #f44336;--mdc-checkbox-selected-icon-color: #f44336;--mdc-checkbox-selected-pressed-icon-color: #f44336;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #f44336;--mdc-checkbox-selected-hover-state-layer-color: #f44336;--mdc-checkbox-selected-pressed-state-layer-color: #f44336;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--selected[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--selected[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--activated[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--activated[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{color:#305680}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__content[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{opacity:1}.tb-default[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-state-layer-size: 40px}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line[_ngcontent-%COMP%]{height:56px}.tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines[_ngcontent-%COMP%]{height:72px}.tb-default[_ngcontent-%COMP%]   .mdc-list-group__subheader[_ngcontent-%COMP%]{font:400 16px/28px Roboto,sans-serif;letter-spacing:.009375em}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #305680;--mat-tab-header-disabled-ripple-color: rgba(0, 0, 0, .38);--mat-tab-header-pagination-icon-color: black;--mat-tab-header-inactive-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-label-text-color: #305680;--mat-tab-header-active-ripple-color: #305680;--mat-tab-header-inactive-ripple-color: #305680;--mat-tab-header-inactive-focus-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-focus-label-text-color: #305680;--mat-tab-header-active-hover-label-text-color: #305680;--mat-tab-header-active-focus-indicator-color: #305680;--mat-tab-header-active-hover-indicator-color: #305680}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-accent[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-accent[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #ff5722;--mat-tab-header-disabled-ripple-color: rgba(0, 0, 0, .38);--mat-tab-header-pagination-icon-color: black;--mat-tab-header-inactive-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-label-text-color: #ff5722;--mat-tab-header-active-ripple-color: #ff5722;--mat-tab-header-inactive-ripple-color: #ff5722;--mat-tab-header-inactive-focus-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-focus-label-text-color: #ff5722;--mat-tab-header-active-hover-label-text-color: #ff5722;--mat-tab-header-active-focus-indicator-color: #ff5722;--mat-tab-header-active-hover-indicator-color: #ff5722}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-warn[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-warn[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #f44336;--mat-tab-header-disabled-ripple-color: rgba(0, 0, 0, .38);--mat-tab-header-pagination-icon-color: black;--mat-tab-header-inactive-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-label-text-color: #f44336;--mat-tab-header-active-ripple-color: #f44336;--mat-tab-header-inactive-ripple-color: #f44336;--mat-tab-header-inactive-focus-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(0, 0, 0, .6);--mat-tab-header-active-focus-label-text-color: #f44336;--mat-tab-header-active-hover-label-text-color: #f44336;--mat-tab-header-active-focus-indicator-color: #f44336;--mat-tab-header-active-hover-indicator-color: #f44336}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-primary[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #305680;--mat-tab-header-with-background-foreground-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-accent[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #ff5722;--mat-tab-header-with-background-foreground-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-warn[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #f44336;--mat-tab-header-with-background-foreground-color: white}.tb-default[_ngcontent-%COMP%]   .mat-mdc-tab-header[_ngcontent-%COMP%]{--mdc-secondary-navigation-tab-container-height: 48px;--mat-tab-header-label-text-font: Roboto, sans-serif;--mat-tab-header-label-text-size: 14px;--mat-tab-header-label-text-tracking: .03125em;--mat-tab-header-label-text-line-height: 36px;--mat-tab-header-label-text-weight: 500}.tb-default[_ngcontent-%COMP%]   .mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #305680;--mdc-checkbox-selected-hover-icon-color: #305680;--mdc-checkbox-selected-icon-color: #305680;--mdc-checkbox-selected-pressed-icon-color: #305680;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #305680;--mdc-checkbox-selected-hover-state-layer-color: #305680;--mdc-checkbox-selected-pressed-state-layer-color: #305680;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black}.tb-default[_ngcontent-%COMP%]   .mat-mdc-checkbox.mat-warn[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(0, 0, 0, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #f44336;--mdc-checkbox-selected-hover-icon-color: #f44336;--mdc-checkbox-selected-icon-color: #f44336;--mdc-checkbox-selected-pressed-icon-color: #f44336;--mdc-checkbox-unselected-focus-icon-color: #212121;--mdc-checkbox-unselected-hover-icon-color: #212121;--mdc-checkbox-unselected-icon-color: rgba(0, 0, 0, .54);--mdc-checkbox-selected-focus-state-layer-color: #f44336;--mdc-checkbox-selected-hover-state-layer-color: #f44336;--mdc-checkbox-selected-pressed-state-layer-color: #f44336;--mdc-checkbox-unselected-focus-state-layer-color: black;--mdc-checkbox-unselected-hover-state-layer-color: black;--mdc-checkbox-unselected-pressed-state-layer-color: black}.tb-default[_ngcontent-%COMP%]   .mat-mdc-button.mat-primary[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #305680;--mat-text-button-state-layer-color: #305680;--mat-text-button-ripple-color: rgba(48, 86, 128, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-button.mat-accent[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #ff5722;--mat-text-button-state-layer-color: #ff5722;--mat-text-button-ripple-color: rgba(255, 87, 34, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-button.mat-warn[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #f44336;--mat-text-button-state-layer-color: #f44336;--mat-text-button-ripple-color: rgba(244, 67, 54, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-primary[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #305680;--mdc-filled-button-label-text-color: white;--mat-filled-button-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-accent[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #ff5722;--mdc-filled-button-label-text-color: white;--mat-filled-button-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-warn[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #f44336;--mdc-filled-button-label-text-color: white;--mat-filled-button-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #305680;--mdc-protected-button-label-text-color: white;--mat-protected-button-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-accent[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #ff5722;--mdc-protected-button-label-text-color: white;--mat-protected-button-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-warn[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #f44336;--mdc-protected-button-label-text-color: white;--mat-protected-button-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-primary[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #305680;--mdc-outlined-button-outline-color: rgba(0, 0, 0, .12);--mat-outlined-button-state-layer-color: #305680;--mat-outlined-button-ripple-color: rgba(48, 86, 128, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-accent[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #ff5722;--mdc-outlined-button-outline-color: rgba(0, 0, 0, .12);--mat-outlined-button-state-layer-color: #ff5722;--mat-outlined-button-ripple-color: rgba(255, 87, 34, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-warn[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #f44336;--mdc-outlined-button-outline-color: rgba(0, 0, 0, .12);--mat-outlined-button-state-layer-color: #f44336;--mat-outlined-button-ripple-color: rgba(244, 67, 54, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-primary[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #305680;--mat-icon-button-state-layer-color: #305680;--mat-icon-button-ripple-color: rgba(48, 86, 128, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-accent[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #ff5722;--mat-icon-button-state-layer-color: #ff5722;--mat-icon-button-ripple-color: rgba(255, 87, 34, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-warn[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #f44336;--mat-icon-button-state-layer-color: #f44336;--mat-icon-button-ripple-color: rgba(244, 67, 54, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{--mdc-icon-button-state-layer-size: 48px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:12px}.tb-default[_ngcontent-%COMP%]   .mat-mdc-fab.mat-primary[_ngcontent-%COMP%]{--mdc-fab-container-color: #305680;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-fab.mat-accent[_ngcontent-%COMP%]{--mdc-fab-container-color: #ff5722;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-fab.mat-warn[_ngcontent-%COMP%]{--mdc-fab-container-color: #f44336;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-primary[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #305680;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-accent[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #ff5722;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-warn[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #f44336;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1)}.tb-default[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #ff5722}.tb-default[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #f44336}.tb-default[_ngcontent-%COMP%]   .mat-badge-accent[_ngcontent-%COMP%]{--mat-badge-background-color: #ff5722;--mat-badge-text-color: white}.tb-default[_ngcontent-%COMP%]   .mat-badge-warn[_ngcontent-%COMP%]{--mat-badge-background-color: #f44336;--mat-badge-text-color: white}.tb-default[_ngcontent-%COMP%]   .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]{--mat-datepicker-calendar-date-selected-state-text-color: white;--mat-datepicker-calendar-date-selected-state-background-color: #ff5722;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(255, 87, 34, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: white;--mat-datepicker-calendar-date-focus-state-background-color: rgba(255, 87, 34, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(255, 87, 34, .3);--mat-datepicker-calendar-date-in-range-state-background-color: rgba(255, 87, 34, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e}.tb-default[_ngcontent-%COMP%]   .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]{--mat-datepicker-calendar-date-selected-state-text-color: white;--mat-datepicker-calendar-date-selected-state-background-color: #f44336;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(244, 67, 54, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: white;--mat-datepicker-calendar-date-focus-state-background-color: rgba(244, 67, 54, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(244, 67, 54, .3);--mat-datepicker-calendar-date-in-range-state-background-color: rgba(244, 67, 54, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e}.tb-default[_ngcontent-%COMP%]   .mat-datepicker-toggle-active.mat-accent[_ngcontent-%COMP%]{--mat-datepicker-toggle-active-state-icon-color: #ff5722}.tb-default[_ngcontent-%COMP%]   .mat-datepicker-toggle-active.mat-warn[_ngcontent-%COMP%]{--mat-datepicker-toggle-active-state-icon-color: #f44336}.tb-default[_ngcontent-%COMP%]   .mat-calendar-controls[_ngcontent-%COMP%]{--mat-icon-button-touch-target-display: none}.tb-default[_ngcontent-%COMP%]   .mat-calendar-controls[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{--mdc-icon-button-state-layer-size: 40px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:8px}.tb-default[_ngcontent-%COMP%]   .mat-icon.mat-primary[_ngcontent-%COMP%]{--mat-icon-color: #305680}.tb-default[_ngcontent-%COMP%]   .mat-icon.mat-accent[_ngcontent-%COMP%]{--mat-icon-color: #ff5722}.tb-default[_ngcontent-%COMP%]   .mat-icon.mat-warn[_ngcontent-%COMP%]{--mat-icon-color: #f44336}.tb-default[_ngcontent-%COMP%]   .mat-step-header.mat-accent[_ngcontent-%COMP%]{--mat-stepper-header-icon-foreground-color: white;--mat-stepper-header-selected-state-icon-background-color: #ff5722;--mat-stepper-header-selected-state-icon-foreground-color: white;--mat-stepper-header-done-state-icon-background-color: #ff5722;--mat-stepper-header-done-state-icon-foreground-color: white;--mat-stepper-header-edit-state-icon-background-color: #ff5722;--mat-stepper-header-edit-state-icon-foreground-color: white}.tb-default[_ngcontent-%COMP%]   .mat-step-header.mat-warn[_ngcontent-%COMP%]{--mat-stepper-header-icon-foreground-color: white;--mat-stepper-header-selected-state-icon-background-color: #f44336;--mat-stepper-header-selected-state-icon-foreground-color: white;--mat-stepper-header-done-state-icon-background-color: #f44336;--mat-stepper-header-done-state-icon-foreground-color: white;--mat-stepper-header-edit-state-icon-background-color: #f44336;--mat-stepper-header-edit-state-icon-foreground-color: white}.tb-default[_ngcontent-%COMP%]   .mat-toolbar.mat-primary[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #305680;--mat-toolbar-container-text-color: white}.tb-default[_ngcontent-%COMP%]   .mat-toolbar.mat-accent[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #ff5722;--mat-toolbar-container-text-color: white}.tb-default[_ngcontent-%COMP%]   .mat-toolbar.mat-warn[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #f44336;--mat-toolbar-container-text-color: white}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-calendar-header[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-selected[_ngcontent-%COMP%]{background-color:#305680;color:#fff}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-disabled[_ngcontent-%COMP%] > .mat-datetimepicker-calendar-body-selected[_ngcontent-%COMP%]{background-color:#30568066}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-today[_ngcontent-%COMP%]:not(.mat-datetimepicker-calendar-body-selected){border-color:#305680}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-today.mat-datetimepicker-calendar-body-selected[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #fff}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-clock-center[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-clock-hand[_ngcontent-%COMP%]{background-color:#305680}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-clock-hand[_ngcontent-%COMP%]:before{background-color:#305680}.tb-default[_ngcontent-%COMP%]   .mat-datetimepicker-clock-cell.mat-datetimepicker-clock-cell-selected[_ngcontent-%COMP%]{background-color:hsl(from #305680 h s calc(l + 5%))}.tb-default[_ngcontent-%COMP%]   mat-toolbar.mat-hue-3[_ngcontent-%COMP%]{background-color:#a7c1de}.tb-default[_ngcontent-%COMP%]   mat-fab-toolbar[_ngcontent-%COMP%]   .mat-fab-toolbar-background[_ngcontent-%COMP%]{background:#f5f5f5;color:#000000de}.tb-default[_ngcontent-%COMP%]   mat-fab-toolbar.mat-primary[_ngcontent-%COMP%]   .mat-fab-toolbar-background[_ngcontent-%COMP%]{background:#305680;color:#fff}.tb-default[_ngcontent-%COMP%]   mat-fab-toolbar.mat-accent[_ngcontent-%COMP%]   .mat-fab-toolbar-background[_ngcontent-%COMP%]{background:#ff5722;color:#fff}.tb-default[_ngcontent-%COMP%]   mat-fab-toolbar.mat-warn[_ngcontent-%COMP%]   .mat-fab-toolbar-background[_ngcontent-%COMP%]{background:#f44336;color:#fff}.tb-default[_ngcontent-%COMP%]   div.tb-dashboard-page.mobile-app[_ngcontent-%COMP%]   mat-fab-toolbar.mat-primary[_ngcontent-%COMP%]   .mat-fab-toolbar-background[_ngcontent-%COMP%]{background:#fff;color:#000000de}.tb-default[_ngcontent-%COMP%]   div.tb-dashboard-page.mobile-app[_ngcontent-%COMP%]   mat-fab-toolbar[_ngcontent-%COMP%]   mat-toolbar.mat-primary[_ngcontent-%COMP%]{background:#fff;color:#000000de}.tb-default[_ngcontent-%COMP%]   div.tb-dashboard-page.mobile-app[_ngcontent-%COMP%]   mat-fab-toolbar[_ngcontent-%COMP%]   mat-toolbar.mat-primary[_ngcontent-%COMP%]   button.mat-mdc-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#305680}.tb-default[_ngcontent-%COMP%]   div.tb-dashboard-page.mobile-app[_ngcontent-%COMP%]   mat-fab-toolbar[_ngcontent-%COMP%]   .mat-mdc-fab.mat-primary[_ngcontent-%COMP%]{background:#fff;color:#305680}.tb-default[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}.tb-default[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.tb-default[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbcbcbcc}.tb-default[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a5a5a5a6}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mdc-text-field--filled[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-mdc-form-field-focus-overlay[_ngcontent-%COMP%]{background-color:transparent}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mdc-text-field--filled[_ngcontent-%COMP%]:before, .tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-mdc-form-field-focus-overlay[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:100%;position:absolute;left:0;top:0;background-color:#305680}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mdc-text-field--filled[_ngcontent-%COMP%]:before{opacity:.03}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled){background-color:transparent}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled):before{opacity:.06}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-mdc-form-field-focus-overlay[_ngcontent-%COMP%]:before{opacity:.87}.tb-default[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-hint-wrapper[_ngcontent-%COMP%]{color:#0009}.tb-default[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]{--mdc-outlined-button-outline-color: inherit}.tb-default[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:inherit}.tb-default[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-icon.mat-primary[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-icon.mat-accent[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-icon.mat-warn[_ngcontent-%COMP%]{color:var(--mat-icon-color)}.tb-default[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-headline-5[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-5[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font:400 24px/32px Roboto,sans-serif;letter-spacing:normal;margin:0 0 16px}.tb-default[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-headline-6[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-6[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font:500 20px/32px Roboto,sans-serif;letter-spacing:.0125em;margin:0 0 16px}.tb-default[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-subtitle-1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h3[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-subtitle-1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font:400 16px/28px Roboto,sans-serif;letter-spacing:.009375em;margin:0 0 16px}.tb-default[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h4[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font:400 16px/24px Roboto,sans-serif;letter-spacing:.03125em;margin:0 0 16px}.tb-default[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h5[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font:400 11.62px/20px Roboto,sans-serif;margin:0 0 12px}.tb-default[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-h6[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font:400 9.38px/20px Roboto,sans-serif;margin:0 0 12px}.tb-default[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-subtitle-2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body-strong[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-subtitle-2[_ngcontent-%COMP%]{font:500 14px/22px Roboto,sans-serif;letter-spacing:.0071428571em}.tb-default[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]{font:400 14px/20px Roboto,sans-serif;letter-spacing:.0178571429em}.tb-default[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-body-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.tb-default[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-small[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{font:400 12px/20px Roboto,sans-serif;letter-spacing:.0333333333em}.tb-default[_ngcontent-%COMP%]   .mat-headline-1[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-1[_ngcontent-%COMP%]{font:300 96px/96px Roboto,sans-serif;letter-spacing:-.015625em;margin:0 0 56px}.tb-default[_ngcontent-%COMP%]   .mat-headline-2[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-2[_ngcontent-%COMP%]{font:300 60px/60px Roboto,sans-serif;letter-spacing:-.0083333333em;margin:0 0 64px}.tb-default[_ngcontent-%COMP%]   .mat-headline-3[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-3[_ngcontent-%COMP%]{font:400 48px/50px Roboto,sans-serif;letter-spacing:normal;margin:0 0 64px}.tb-default[_ngcontent-%COMP%]   .mat-headline-4[_ngcontent-%COMP%], .tb-default[_ngcontent-%COMP%]   .mat-typography[_ngcontent-%COMP%]   .mat-headline-4[_ngcontent-%COMP%]{font:400 34px/40px Roboto,sans-serif;letter-spacing:.0073529412em;margin:0 0 64px}.tb-dark[_ngcontent-%COMP%]{--mat-ripple-color: rgba(255, 255, 255, .1);--mat-option-selected-state-label-text-color: #9fa8da;--mat-option-label-text-color: white;--mat-option-hover-state-layer-color: rgba(255, 255, 255, .08);--mat-option-focus-state-layer-color: rgba(255, 255, 255, .08);--mat-option-selected-state-layer-color: rgba(255, 255, 255, .08);--mat-optgroup-label-text-color: white;--mat-full-pseudo-checkbox-selected-icon-color: #ff5722;--mat-full-pseudo-checkbox-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(255, 255, 255, .7);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #686868;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #686868;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #ff5722;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #686868;--mat-app-background-color: #305680;--mat-app-text-color: white;--mat-app-elevation-shadow-level-0: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-1: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-2: 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-3: 0px 3px 3px -2px rgba(0, 0, 0, .2), 0px 3px 4px 0px rgba(0, 0, 0, .14), 0px 1px 8px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-4: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-5: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 5px 8px 0px rgba(0, 0, 0, .14), 0px 1px 14px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-6: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-7: 0px 4px 5px -2px rgba(0, 0, 0, .2), 0px 7px 10px 1px rgba(0, 0, 0, .14), 0px 2px 16px 1px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-8: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-9: 0px 5px 6px -3px rgba(0, 0, 0, .2), 0px 9px 12px 1px rgba(0, 0, 0, .14), 0px 3px 16px 2px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-10: 0px 6px 6px -3px rgba(0, 0, 0, .2), 0px 10px 14px 1px rgba(0, 0, 0, .14), 0px 4px 18px 3px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-11: 0px 6px 7px -4px rgba(0, 0, 0, .2), 0px 11px 15px 1px rgba(0, 0, 0, .14), 0px 4px 20px 3px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-12: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-13: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 13px 19px 2px rgba(0, 0, 0, .14), 0px 5px 24px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-14: 0px 7px 9px -4px rgba(0, 0, 0, .2), 0px 14px 21px 2px rgba(0, 0, 0, .14), 0px 5px 26px 4px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-15: 0px 8px 9px -5px rgba(0, 0, 0, .2), 0px 15px 22px 2px rgba(0, 0, 0, .14), 0px 6px 28px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-16: 0px 8px 10px -5px rgba(0, 0, 0, .2), 0px 16px 24px 2px rgba(0, 0, 0, .14), 0px 6px 30px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-17: 0px 8px 11px -5px rgba(0, 0, 0, .2), 0px 17px 26px 2px rgba(0, 0, 0, .14), 0px 6px 32px 5px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-18: 0px 9px 11px -5px rgba(0, 0, 0, .2), 0px 18px 28px 2px rgba(0, 0, 0, .14), 0px 7px 34px 6px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-19: 0px 9px 12px -6px rgba(0, 0, 0, .2), 0px 19px 29px 2px rgba(0, 0, 0, .14), 0px 7px 36px 6px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-20: 0px 10px 13px -6px rgba(0, 0, 0, .2), 0px 20px 31px 3px rgba(0, 0, 0, .14), 0px 8px 38px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-21: 0px 10px 13px -6px rgba(0, 0, 0, .2), 0px 21px 33px 3px rgba(0, 0, 0, .14), 0px 8px 40px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-22: 0px 10px 14px -6px rgba(0, 0, 0, .2), 0px 22px 35px 3px rgba(0, 0, 0, .14), 0px 8px 42px 7px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-23: 0px 11px 14px -7px rgba(0, 0, 0, .2), 0px 23px 36px 3px rgba(0, 0, 0, .14), 0px 9px 44px 8px rgba(0, 0, 0, .12);--mat-app-elevation-shadow-level-24: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mdc-elevated-card-container-shape: 4px;--mdc-outlined-card-container-shape: 4px;--mdc-outlined-card-outline-width: 1px;--mdc-elevated-card-container-color: #305680;--mdc-elevated-card-container-elevation: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mdc-outlined-card-container-color: #305680;--mdc-outlined-card-outline-color: rgba(255, 255, 255, .12);--mdc-outlined-card-container-elevation: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mat-card-subtitle-text-color: rgba(255, 255, 255, .7);--mdc-linear-progress-active-indicator-height: 4px;--mdc-linear-progress-track-height: 4px;--mdc-linear-progress-track-shape: 0;--mdc-plain-tooltip-container-shape: 4px;--mdc-plain-tooltip-supporting-text-line-height: 16px;--mdc-plain-tooltip-container-color: #616161;--mdc-plain-tooltip-supporting-text-color: #fff;--mdc-filled-text-field-active-indicator-height: 1px;--mdc-filled-text-field-focus-active-indicator-height: 2px;--mdc-filled-text-field-container-shape: 4px;--mdc-outlined-text-field-outline-width: 1px;--mdc-outlined-text-field-focus-outline-width: 2px;--mdc-outlined-text-field-container-shape: 4px;--mdc-filled-text-field-caret-color: #9fa8da;--mdc-filled-text-field-focus-active-indicator-color: #9fa8da;--mdc-filled-text-field-focus-label-text-color: rgba(159, 168, 218, .87);--mdc-filled-text-field-container-color: #385d85;--mdc-filled-text-field-disabled-container-color: #345983;--mdc-filled-text-field-label-text-color: rgba(255, 255, 255, .6);--mdc-filled-text-field-hover-label-text-color: rgba(255, 255, 255, .6);--mdc-filled-text-field-disabled-label-text-color: rgba(255, 255, 255, .38);--mdc-filled-text-field-input-text-color: rgba(255, 255, 255, .87);--mdc-filled-text-field-disabled-input-text-color: rgba(255, 255, 255, .38);--mdc-filled-text-field-input-text-placeholder-color: rgba(255, 255, 255, .6);--mdc-filled-text-field-error-hover-label-text-color: #f44336;--mdc-filled-text-field-error-focus-label-text-color: #f44336;--mdc-filled-text-field-error-label-text-color: #f44336;--mdc-filled-text-field-error-caret-color: #f44336;--mdc-filled-text-field-active-indicator-color: rgba(255, 255, 255, .42);--mdc-filled-text-field-disabled-active-indicator-color: rgba(255, 255, 255, .06);--mdc-filled-text-field-hover-active-indicator-color: rgba(255, 255, 255, .87);--mdc-filled-text-field-error-active-indicator-color: #f44336;--mdc-filled-text-field-error-focus-active-indicator-color: #f44336;--mdc-filled-text-field-error-hover-active-indicator-color: #f44336;--mdc-outlined-text-field-caret-color: #9fa8da;--mdc-outlined-text-field-focus-outline-color: #9fa8da;--mdc-outlined-text-field-focus-label-text-color: rgba(159, 168, 218, .87);--mdc-outlined-text-field-label-text-color: rgba(255, 255, 255, .6);--mdc-outlined-text-field-hover-label-text-color: rgba(255, 255, 255, .6);--mdc-outlined-text-field-disabled-label-text-color: rgba(255, 255, 255, .38);--mdc-outlined-text-field-input-text-color: rgba(255, 255, 255, .87);--mdc-outlined-text-field-disabled-input-text-color: rgba(255, 255, 255, .38);--mdc-outlined-text-field-input-text-placeholder-color: rgba(255, 255, 255, .6);--mdc-outlined-text-field-error-caret-color: #f44336;--mdc-outlined-text-field-error-focus-label-text-color: #f44336;--mdc-outlined-text-field-error-label-text-color: #f44336;--mdc-outlined-text-field-error-hover-label-text-color: #f44336;--mdc-outlined-text-field-outline-color: rgba(255, 255, 255, .38);--mdc-outlined-text-field-disabled-outline-color: rgba(255, 255, 255, .06);--mdc-outlined-text-field-hover-outline-color: rgba(255, 255, 255, .87);--mdc-outlined-text-field-error-focus-outline-color: #f44336;--mdc-outlined-text-field-error-hover-outline-color: #f44336;--mdc-outlined-text-field-error-outline-color: #f44336;--mat-form-field-focus-select-arrow-color: rgba(159, 168, 218, .87);--mat-form-field-disabled-input-text-placeholder-color: rgba(255, 255, 255, .38);--mat-form-field-state-layer-color: rgba(255, 255, 255, .87);--mat-form-field-error-text-color: #f44336;--mat-form-field-select-option-text-color: rgba(0, 0, 0, .87);--mat-form-field-select-disabled-option-text-color: rgba(0, 0, 0, .38);--mat-form-field-leading-icon-color: unset;--mat-form-field-disabled-leading-icon-color: unset;--mat-form-field-trailing-icon-color: unset;--mat-form-field-disabled-trailing-icon-color: unset;--mat-form-field-error-focus-trailing-icon-color: unset;--mat-form-field-error-hover-trailing-icon-color: unset;--mat-form-field-error-trailing-icon-color: unset;--mat-form-field-enabled-select-arrow-color: rgba(255, 255, 255, .54);--mat-form-field-disabled-select-arrow-color: rgba(255, 255, 255, .38);--mat-form-field-hover-state-layer-opacity: .08;--mat-form-field-focus-state-layer-opacity: .24;--mat-select-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-select-panel-background-color: #305680;--mat-select-enabled-trigger-text-color: rgba(255, 255, 255, .87);--mat-select-disabled-trigger-text-color: rgba(255, 255, 255, .38);--mat-select-placeholder-text-color: rgba(255, 255, 255, .6);--mat-select-enabled-arrow-color: rgba(255, 255, 255, .54);--mat-select-disabled-arrow-color: rgba(255, 255, 255, .38);--mat-select-focused-arrow-color: rgba(159, 168, 218, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87);--mat-autocomplete-container-shape: 4px;--mat-autocomplete-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mat-autocomplete-background-color: #305680;--mdc-dialog-container-shape: 4px;--mat-dialog-container-elevation-shadow: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mat-dialog-container-max-width: 80vw;--mat-dialog-container-small-max-width: 80vw;--mat-dialog-container-min-width: 0;--mat-dialog-actions-alignment: start;--mat-dialog-actions-padding: 8px;--mat-dialog-content-padding: 20px 24px;--mat-dialog-with-actions-content-padding: 20px 24px;--mat-dialog-headline-padding: 0 24px 9px;--mdc-dialog-container-color: #305680;--mdc-dialog-subhead-color: rgba(255, 255, 255, .87);--mdc-dialog-supporting-text-color: rgba(255, 255, 255, .6);--mdc-switch-disabled-selected-icon-opacity: .38;--mdc-switch-disabled-track-opacity: .12;--mdc-switch-disabled-unselected-icon-opacity: .38;--mdc-switch-handle-height: 20px;--mdc-switch-handle-shape: 10px;--mdc-switch-handle-width: 20px;--mdc-switch-selected-icon-size: 18px;--mdc-switch-track-height: 14px;--mdc-switch-track-shape: 7px;--mdc-switch-track-width: 36px;--mdc-switch-unselected-icon-size: 18px;--mdc-switch-selected-focus-state-layer-opacity: .12;--mdc-switch-selected-hover-state-layer-opacity: .04;--mdc-switch-selected-pressed-state-layer-opacity: .1;--mdc-switch-unselected-focus-state-layer-opacity: .12;--mdc-switch-unselected-hover-state-layer-opacity: .04;--mdc-switch-unselected-pressed-state-layer-opacity: .1;--mdc-switch-selected-focus-state-layer-color: #7986cb;--mdc-switch-selected-handle-color: #7986cb;--mdc-switch-selected-hover-state-layer-color: #7986cb;--mdc-switch-selected-pressed-state-layer-color: #7986cb;--mdc-switch-selected-focus-handle-color: #9fa8da;--mdc-switch-selected-hover-handle-color: #9fa8da;--mdc-switch-selected-pressed-handle-color: #9fa8da;--mdc-switch-selected-focus-track-color: #527dad;--mdc-switch-selected-hover-track-color: #527dad;--mdc-switch-selected-pressed-track-color: #527dad;--mdc-switch-selected-track-color: #527dad;--mdc-switch-disabled-selected-handle-color: #000;--mdc-switch-disabled-selected-icon-color: #212121;--mdc-switch-disabled-selected-track-color: #f5f5f5;--mdc-switch-disabled-unselected-handle-color: #000;--mdc-switch-disabled-unselected-icon-color: #212121;--mdc-switch-disabled-unselected-track-color: #f5f5f5;--mdc-switch-handle-surface-color: #fff;--mdc-switch-selected-icon-color: #212121;--mdc-switch-unselected-focus-handle-color: #fafafa;--mdc-switch-unselected-focus-state-layer-color: #f5f5f5;--mdc-switch-unselected-focus-track-color: #616161;--mdc-switch-unselected-handle-color: #9e9e9e;--mdc-switch-unselected-hover-handle-color: #fafafa;--mdc-switch-unselected-hover-state-layer-color: #f5f5f5;--mdc-switch-unselected-hover-track-color: #616161;--mdc-switch-unselected-icon-color: #212121;--mdc-switch-unselected-pressed-handle-color: #fafafa;--mdc-switch-unselected-pressed-state-layer-color: #f5f5f5;--mdc-switch-unselected-pressed-track-color: #616161;--mdc-switch-unselected-track-color: #616161;--mdc-switch-handle-elevation-shadow: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mdc-switch-disabled-handle-elevation-shadow: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mdc-switch-disabled-label-text-color: rgba(255, 255, 255, .5);--mdc-radio-disabled-selected-icon-opacity: .38;--mdc-radio-disabled-unselected-icon-opacity: .38;--mdc-radio-state-layer-size: 40px;--mdc-slider-active-track-height: 6px;--mdc-slider-active-track-shape: 9999px;--mdc-slider-handle-height: 20px;--mdc-slider-handle-shape: 50%;--mdc-slider-handle-width: 20px;--mdc-slider-inactive-track-height: 4px;--mdc-slider-inactive-track-shape: 9999px;--mdc-slider-with-overlap-handle-outline-width: 1px;--mdc-slider-with-tick-marks-active-container-opacity: .6;--mdc-slider-with-tick-marks-container-shape: 50%;--mdc-slider-with-tick-marks-container-size: 2px;--mdc-slider-with-tick-marks-inactive-container-opacity: .6;--mdc-slider-handle-elevation: 0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12);--mat-slider-value-indicator-width: auto;--mat-slider-value-indicator-height: 32px;--mat-slider-value-indicator-caret-display: block;--mat-slider-value-indicator-border-radius: 4px;--mat-slider-value-indicator-padding: 0 12px;--mat-slider-value-indicator-text-transform: none;--mat-slider-value-indicator-container-transform: translateX(-50%);--mdc-slider-handle-color: #9fa8da;--mdc-slider-focus-handle-color: #9fa8da;--mdc-slider-hover-handle-color: #9fa8da;--mdc-slider-active-track-color: #9fa8da;--mdc-slider-inactive-track-color: #9fa8da;--mdc-slider-with-tick-marks-inactive-container-color: #9fa8da;--mdc-slider-with-tick-marks-active-container-color: #1a237e;--mdc-slider-disabled-active-track-color: #fff;--mdc-slider-disabled-handle-color: #fff;--mdc-slider-disabled-inactive-track-color: #fff;--mdc-slider-label-container-color: #fff;--mdc-slider-label-label-text-color: #000;--mdc-slider-with-overlap-handle-outline-color: #fff;--mdc-slider-with-tick-marks-disabled-container-color: #fff;--mat-slider-ripple-color: #9fa8da;--mat-slider-hover-state-layer-color: rgba(159, 168, 218, .05);--mat-slider-focus-state-layer-color: rgba(159, 168, 218, .2);--mat-slider-value-indicator-opacity: .9;--mat-menu-container-shape: 4px;--mat-menu-divider-bottom-spacing: 0;--mat-menu-divider-top-spacing: 0;--mat-menu-item-spacing: 16px;--mat-menu-item-icon-size: 24px;--mat-menu-item-leading-spacing: 16px;--mat-menu-item-trailing-spacing: 16px;--mat-menu-item-with-icon-leading-spacing: 16px;--mat-menu-item-with-icon-trailing-spacing: 16px;--mat-menu-base-elevation-level: 8;--mat-menu-item-label-text-color: white;--mat-menu-item-icon-color: white;--mat-menu-item-hover-state-layer-color: rgba(255, 255, 255, .08);--mat-menu-item-focus-state-layer-color: rgba(255, 255, 255, .08);--mat-menu-container-color: #305680;--mat-menu-divider-color: rgba(255, 255, 255, .12);--mdc-list-list-item-container-shape: 0;--mdc-list-list-item-leading-avatar-shape: 50%;--mdc-list-list-item-container-color: transparent;--mdc-list-list-item-selected-container-color: transparent;--mdc-list-list-item-leading-avatar-color: transparent;--mdc-list-list-item-leading-icon-size: 24px;--mdc-list-list-item-leading-avatar-size: 40px;--mdc-list-list-item-trailing-icon-size: 24px;--mdc-list-list-item-disabled-state-layer-color: transparent;--mdc-list-list-item-disabled-state-layer-opacity: 0;--mdc-list-list-item-disabled-label-text-opacity: .38;--mdc-list-list-item-disabled-leading-icon-opacity: .38;--mdc-list-list-item-disabled-trailing-icon-opacity: .38;--mat-list-active-indicator-color: transparent;--mat-list-active-indicator-shape: 4px;--mdc-list-list-item-label-text-color: white;--mdc-list-list-item-supporting-text-color: rgba(255, 255, 255, .7);--mdc-list-list-item-leading-icon-color: rgba(255, 255, 255, .5);--mdc-list-list-item-trailing-supporting-text-color: rgba(255, 255, 255, .5);--mdc-list-list-item-trailing-icon-color: rgba(255, 255, 255, .5);--mdc-list-list-item-selected-trailing-icon-color: rgba(255, 255, 255, .5);--mdc-list-list-item-disabled-label-text-color: white;--mdc-list-list-item-disabled-leading-icon-color: white;--mdc-list-list-item-disabled-trailing-icon-color: white;--mdc-list-list-item-hover-label-text-color: white;--mdc-list-list-item-hover-leading-icon-color: rgba(255, 255, 255, .5);--mdc-list-list-item-hover-trailing-icon-color: rgba(255, 255, 255, .5);--mdc-list-list-item-focus-label-text-color: white;--mdc-list-list-item-hover-state-layer-color: white;--mdc-list-list-item-hover-state-layer-opacity: .08;--mdc-list-list-item-focus-state-layer-color: white;--mdc-list-list-item-focus-state-layer-opacity: .24;--mat-paginator-container-text-color: rgba(255, 255, 255, .87);--mat-paginator-container-background-color: #305680;--mat-paginator-enabled-icon-color: rgba(255, 255, 255, .54);--mat-paginator-disabled-icon-color: rgba(255, 255, 255, .12);--mdc-secondary-navigation-tab-container-height: 48px;--mdc-tab-indicator-active-indicator-height: 2px;--mdc-tab-indicator-active-indicator-shape: 0;--mat-tab-header-divider-color: transparent;--mat-tab-header-divider-height: 0;--mdc-checkbox-disabled-selected-checkmark-color: #fff;--mdc-checkbox-selected-focus-state-layer-opacity: .16;--mdc-checkbox-selected-hover-state-layer-opacity: .04;--mdc-checkbox-selected-pressed-state-layer-opacity: .16;--mdc-checkbox-unselected-focus-state-layer-opacity: .16;--mdc-checkbox-unselected-hover-state-layer-opacity: .04;--mdc-checkbox-unselected-pressed-state-layer-opacity: .16;--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #ff5722;--mdc-checkbox-selected-hover-icon-color: #ff5722;--mdc-checkbox-selected-icon-color: #ff5722;--mdc-checkbox-selected-pressed-icon-color: #ff5722;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #ff5722;--mdc-checkbox-selected-hover-state-layer-color: #ff5722;--mdc-checkbox-selected-pressed-state-layer-color: #ff5722;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white;--mat-checkbox-disabled-label-color: rgba(255, 255, 255, .5);--mat-checkbox-label-text-color: white;--mdc-text-button-container-shape: 4px;--mdc-text-button-keep-touch-target: false;--mdc-filled-button-container-shape: 4px;--mdc-filled-button-keep-touch-target: false;--mdc-protected-button-container-shape: 4px;--mdc-protected-button-container-elevation-shadow: 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12);--mdc-protected-button-disabled-container-elevation-shadow: 0px 0px 0px 0px rgba(0, 0, 0, .2), 0px 0px 0px 0px rgba(0, 0, 0, .14), 0px 0px 0px 0px rgba(0, 0, 0, .12);--mdc-protected-button-focus-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mdc-protected-button-hover-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mdc-protected-button-pressed-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-outlined-button-keep-touch-target: false;--mdc-outlined-button-outline-width: 1px;--mdc-outlined-button-container-shape: 4px;--mat-text-button-horizontal-padding: 8px;--mat-text-button-with-icon-horizontal-padding: 8px;--mat-text-button-icon-spacing: 8px;--mat-text-button-icon-offset: 0;--mat-filled-button-horizontal-padding: 16px;--mat-filled-button-icon-spacing: 8px;--mat-filled-button-icon-offset: -4px;--mat-protected-button-horizontal-padding: 16px;--mat-protected-button-icon-spacing: 8px;--mat-protected-button-icon-offset: -4px;--mat-outlined-button-horizontal-padding: 15px;--mat-outlined-button-icon-spacing: 8px;--mat-outlined-button-icon-offset: -4px;--mdc-text-button-label-text-color: white;--mdc-text-button-disabled-label-text-color: rgba(255, 255, 255, .5);--mat-text-button-state-layer-color: white;--mat-text-button-disabled-state-layer-color: white;--mat-text-button-ripple-color: rgba(255, 255, 255, .1);--mat-text-button-hover-state-layer-opacity: .08;--mat-text-button-focus-state-layer-opacity: .24;--mat-text-button-pressed-state-layer-opacity: .24;--mdc-filled-button-container-color: #305680;--mdc-filled-button-label-text-color: white;--mdc-filled-button-disabled-container-color: rgba(255, 255, 255, .12);--mdc-filled-button-disabled-label-text-color: rgba(255, 255, 255, .5);--mat-filled-button-state-layer-color: white;--mat-filled-button-disabled-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1);--mat-filled-button-hover-state-layer-opacity: .08;--mat-filled-button-focus-state-layer-opacity: .24;--mat-filled-button-pressed-state-layer-opacity: .24;--mdc-protected-button-container-color: #305680;--mdc-protected-button-label-text-color: white;--mdc-protected-button-disabled-container-color: rgba(255, 255, 255, .12);--mdc-protected-button-disabled-label-text-color: rgba(255, 255, 255, .5);--mat-protected-button-state-layer-color: white;--mat-protected-button-disabled-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1);--mat-protected-button-hover-state-layer-opacity: .08;--mat-protected-button-focus-state-layer-opacity: .24;--mat-protected-button-pressed-state-layer-opacity: .24;--mdc-outlined-button-disabled-outline-color: rgba(255, 255, 255, .12);--mdc-outlined-button-disabled-label-text-color: rgba(255, 255, 255, .5);--mdc-outlined-button-label-text-color: white;--mdc-outlined-button-outline-color: rgba(255, 255, 255, .12);--mat-outlined-button-state-layer-color: white;--mat-outlined-button-disabled-state-layer-color: white;--mat-outlined-button-ripple-color: rgba(255, 255, 255, .1);--mat-outlined-button-hover-state-layer-opacity: .08;--mat-outlined-button-focus-state-layer-opacity: .24;--mat-outlined-button-pressed-state-layer-opacity: .24;--mdc-icon-button-icon-size: 24px;--mdc-icon-button-icon-color: inherit;--mdc-icon-button-disabled-icon-color: rgba(255, 255, 255, .5);--mat-icon-button-state-layer-color: white;--mat-icon-button-disabled-state-layer-color: white;--mat-icon-button-ripple-color: rgba(255, 255, 255, .1);--mat-icon-button-hover-state-layer-opacity: .08;--mat-icon-button-focus-state-layer-opacity: .24;--mat-icon-button-pressed-state-layer-opacity: .24;--mdc-fab-container-shape: 50%;--mdc-fab-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-fab-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-fab-small-container-shape: 50%;--mdc-fab-small-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-fab-small-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-small-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-fab-small-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-extended-fab-container-height: 48px;--mdc-extended-fab-container-shape: 24px;--mdc-extended-fab-container-elevation-shadow: 0px 3px 5px -1px rgba(0, 0, 0, .2), 0px 6px 10px 0px rgba(0, 0, 0, .14), 0px 1px 18px 0px rgba(0, 0, 0, .12);--mdc-extended-fab-focus-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-extended-fab-hover-container-elevation-shadow: 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12);--mdc-extended-fab-pressed-container-elevation-shadow: 0px 7px 8px -4px rgba(0, 0, 0, .2), 0px 12px 17px 2px rgba(0, 0, 0, .14), 0px 5px 22px 4px rgba(0, 0, 0, .12);--mdc-fab-container-color: #305680;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-disabled-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1);--mat-fab-hover-state-layer-opacity: .08;--mat-fab-focus-state-layer-opacity: .24;--mat-fab-pressed-state-layer-opacity: .24;--mat-fab-disabled-state-container-color: rgba(255, 255, 255, .12);--mat-fab-disabled-state-foreground-color: rgba(255, 255, 255, .5);--mdc-fab-small-container-color: #305680;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-disabled-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1);--mat-fab-small-hover-state-layer-opacity: .08;--mat-fab-small-focus-state-layer-opacity: .24;--mat-fab-small-pressed-state-layer-opacity: .24;--mat-fab-small-disabled-state-container-color: rgba(255, 255, 255, .12);--mat-fab-small-disabled-state-foreground-color: rgba(255, 255, 255, .5);--mdc-snackbar-container-shape: 4px;--mdc-snackbar-container-color: #d6dde6;--mdc-snackbar-supporting-text-color: rgba(48, 86, 128, .87);--mat-snack-bar-button-color: rgba(0, 0, 0, .87);--mat-table-row-item-outline-width: 1px;--mat-table-background-color: #305680;--mat-table-header-headline-color: white;--mat-table-row-item-label-text-color: white;--mat-table-row-item-outline-color: rgba(255, 255, 255, .12);--mdc-circular-progress-active-indicator-width: 4px;--mdc-circular-progress-size: 48px;--mdc-circular-progress-active-indicator-color: #9fa8da;--mat-badge-container-shape: 50%;--mat-badge-container-size: unset;--mat-badge-small-size-container-size: unset;--mat-badge-large-size-container-size: unset;--mat-badge-legacy-container-size: 22px;--mat-badge-legacy-small-size-container-size: 16px;--mat-badge-legacy-large-size-container-size: 28px;--mat-badge-container-offset: -11px 0;--mat-badge-small-size-container-offset: -8px 0;--mat-badge-large-size-container-offset: -14px 0;--mat-badge-container-overlap-offset: -11px;--mat-badge-small-size-container-overlap-offset: -8px;--mat-badge-large-size-container-overlap-offset: -14px;--mat-badge-container-padding: 0;--mat-badge-small-size-container-padding: 0;--mat-badge-large-size-container-padding: 0;--mat-badge-background-color: #9fa8da;--mat-badge-text-color: #1a237e;--mat-badge-disabled-state-background-color: #6e89a6;--mat-badge-disabled-state-text-color: rgba(255, 255, 255, .5);--mat-bottom-sheet-container-shape: 4px;--mat-bottom-sheet-container-text-color: white;--mat-bottom-sheet-container-background-color: #305680;--mat-legacy-button-toggle-height: 36px;--mat-legacy-button-toggle-shape: 2px;--mat-legacy-button-toggle-focus-state-layer-opacity: 1;--mat-standard-button-toggle-shape: 4px;--mat-standard-button-toggle-hover-state-layer-opacity: .04;--mat-standard-button-toggle-focus-state-layer-opacity: .12;--mat-legacy-button-toggle-text-color: rgba(255, 255, 255, .5);--mat-legacy-button-toggle-state-layer-color: rgba(255, 255, 255, .12);--mat-legacy-button-toggle-selected-state-text-color: rgba(255, 255, 255, .7);--mat-legacy-button-toggle-selected-state-background-color: #1a237e;--mat-legacy-button-toggle-disabled-state-text-color: rgba(255, 255, 255, .3);--mat-legacy-button-toggle-disabled-state-background-color: black;--mat-legacy-button-toggle-disabled-selected-state-background-color: #305680;--mat-standard-button-toggle-text-color: white;--mat-standard-button-toggle-background-color: #305680;--mat-standard-button-toggle-state-layer-color: white;--mat-standard-button-toggle-selected-state-background-color: #1a237e;--mat-standard-button-toggle-selected-state-text-color: white;--mat-standard-button-toggle-disabled-state-text-color: rgba(255, 255, 255, .3);--mat-standard-button-toggle-disabled-state-background-color: #305680;--mat-standard-button-toggle-disabled-selected-state-text-color: white;--mat-standard-button-toggle-disabled-selected-state-background-color: #305680;--mat-standard-button-toggle-divider-color: #496a8f;--mat-datepicker-calendar-container-shape: 4px;--mat-datepicker-calendar-container-touch-shape: 4px;--mat-datepicker-calendar-container-elevation-shadow: 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12);--mat-datepicker-calendar-container-touch-elevation-shadow: 0px 11px 15px -7px rgba(0, 0, 0, .2), 0px 24px 38px 3px rgba(0, 0, 0, .14), 0px 9px 46px 8px rgba(0, 0, 0, .12);--mat-datepicker-calendar-date-selected-state-text-color: #1a237e;--mat-datepicker-calendar-date-selected-state-background-color: #9fa8da;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(159, 168, 218, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: #1a237e;--mat-datepicker-calendar-date-focus-state-background-color: rgba(159, 168, 218, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(159, 168, 218, .3);--mat-datepicker-toggle-active-state-icon-color: #9fa8da;--mat-datepicker-calendar-date-in-range-state-background-color: rgba(159, 168, 218, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e;--mat-datepicker-toggle-icon-color: white;--mat-datepicker-calendar-body-label-text-color: rgba(255, 255, 255, .7);--mat-datepicker-calendar-period-button-text-color: white;--mat-datepicker-calendar-period-button-icon-color: white;--mat-datepicker-calendar-navigation-button-icon-color: white;--mat-datepicker-calendar-header-divider-color: rgba(255, 255, 255, .12);--mat-datepicker-calendar-header-text-color: rgba(255, 255, 255, .7);--mat-datepicker-calendar-date-today-outline-color: rgba(255, 255, 255, .5);--mat-datepicker-calendar-date-today-disabled-state-outline-color: rgba(255, 255, 255, .3);--mat-datepicker-calendar-date-text-color: white;--mat-datepicker-calendar-date-outline-color: transparent;--mat-datepicker-calendar-date-disabled-state-text-color: rgba(255, 255, 255, .5);--mat-datepicker-calendar-date-preview-state-outline-color: rgba(255, 255, 255, .24);--mat-datepicker-range-input-separator-color: white;--mat-datepicker-range-input-disabled-state-separator-color: rgba(255, 255, 255, .5);--mat-datepicker-range-input-disabled-state-text-color: rgba(255, 255, 255, .5);--mat-datepicker-calendar-container-background-color: #305680;--mat-datepicker-calendar-container-text-color: white;--mat-divider-width: 1px;--mat-divider-color: rgba(255, 255, 255, .12);--mat-expansion-container-shape: 4px;--mat-expansion-legacy-header-indicator-display: inline-block;--mat-expansion-header-indicator-display: none;--mat-expansion-container-background-color: #305680;--mat-expansion-container-text-color: white;--mat-expansion-actions-divider-color: rgba(255, 255, 255, .12);--mat-expansion-header-hover-state-layer-color: rgba(255, 255, 255, .04);--mat-expansion-header-focus-state-layer-color: rgba(255, 255, 255, .04);--mat-expansion-header-disabled-state-text-color: rgba(255, 255, 255, .3);--mat-expansion-header-text-color: white;--mat-expansion-header-description-color: rgba(255, 255, 255, .7);--mat-expansion-header-indicator-color: rgba(255, 255, 255, .7);--mat-icon-color: inherit;--mat-sidenav-container-shape: 0;--mat-sidenav-container-elevation-shadow: 0px 8px 10px -5px rgba(0, 0, 0, .2), 0px 16px 24px 2px rgba(0, 0, 0, .14), 0px 6px 30px 5px rgba(0, 0, 0, .12);--mat-sidenav-container-width: auto;--mat-sidenav-container-divider-color: rgba(255, 255, 255, .12);--mat-sidenav-container-background-color: #305680;--mat-sidenav-container-text-color: white;--mat-sidenav-content-background-color: #305680;--mat-sidenav-content-text-color: white;--mat-sidenav-scrim-color: rgba(207, 169, 127, .6);--mat-stepper-header-icon-foreground-color: #1a237e;--mat-stepper-header-selected-state-icon-background-color: #9fa8da;--mat-stepper-header-selected-state-icon-foreground-color: #1a237e;--mat-stepper-header-done-state-icon-background-color: #9fa8da;--mat-stepper-header-done-state-icon-foreground-color: #1a237e;--mat-stepper-header-edit-state-icon-background-color: #9fa8da;--mat-stepper-header-edit-state-icon-foreground-color: #1a237e;--mat-stepper-container-color: #305680;--mat-stepper-line-color: rgba(255, 255, 255, .12);--mat-stepper-header-hover-state-layer-color: rgba(255, 255, 255, .04);--mat-stepper-header-focus-state-layer-color: rgba(255, 255, 255, .04);--mat-stepper-header-label-text-color: rgba(255, 255, 255, .7);--mat-stepper-header-optional-label-text-color: rgba(255, 255, 255, .7);--mat-stepper-header-selected-state-label-text-color: white;--mat-stepper-header-error-state-label-text-color: #f44336;--mat-stepper-header-icon-background-color: rgba(255, 255, 255, .7);--mat-stepper-header-error-state-icon-foreground-color: #f44336;--mat-stepper-header-error-state-icon-background-color: transparent;--mat-sort-arrow-color: #c1ccd9;--mat-toolbar-container-background-color: #1a237e;--mat-toolbar-container-text-color: white;--mat-tree-container-background-color: #305680;--mat-tree-node-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mat-option-selected-state-label-text-color: #ff5722;--mat-option-label-text-color: white;--mat-option-hover-state-layer-color: rgba(255, 255, 255, .08);--mat-option-focus-state-layer-color: rgba(255, 255, 255, .08);--mat-option-selected-state-layer-color: rgba(255, 255, 255, .08)}.tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mat-option-selected-state-label-text-color: #f44336;--mat-option-label-text-color: white;--mat-option-hover-state-layer-color: rgba(255, 255, 255, .08);--mat-option-focus-state-layer-color: rgba(255, 255, 255, .08);--mat-option-selected-state-layer-color: rgba(255, 255, 255, .08)}.tb-dark[_ngcontent-%COMP%]   .mat-primary[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #9fa8da;--mat-full-pseudo-checkbox-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(255, 255, 255, .7);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #686868;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #686868;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #9fa8da;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #686868}.tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #ff5722;--mat-full-pseudo-checkbox-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(255, 255, 255, .7);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #686868;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #686868;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #ff5722;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #686868}.tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mat-full-pseudo-checkbox-selected-icon-color: #f44336;--mat-full-pseudo-checkbox-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-unselected-icon-color: rgba(255, 255, 255, .7);--mat-full-pseudo-checkbox-disabled-selected-checkmark-color: #305680;--mat-full-pseudo-checkbox-disabled-unselected-icon-color: #686868;--mat-full-pseudo-checkbox-disabled-selected-icon-color: #686868;--mat-minimal-pseudo-checkbox-selected-checkmark-color: #f44336;--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: #686868}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #9fa8da;--mdc-linear-progress-track-color: rgba(159, 168, 218, .25)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-progress-bar.mat-accent[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #ff5722;--mdc-linear-progress-track-color: rgba(255, 87, 34, .25)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-progress-bar.mat-warn[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #f44336;--mdc-linear-progress-track-color: rgba(244, 67, 54, .25)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-accent[_ngcontent-%COMP%]{--mdc-filled-text-field-caret-color: #ff5722;--mdc-filled-text-field-focus-active-indicator-color: #ff5722;--mdc-filled-text-field-focus-label-text-color: rgba(255, 87, 34, .87);--mdc-outlined-text-field-caret-color: #ff5722;--mdc-outlined-text-field-focus-outline-color: #ff5722;--mdc-outlined-text-field-focus-label-text-color: rgba(255, 87, 34, .87);--mat-form-field-focus-select-arrow-color: rgba(255, 87, 34, .87)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-warn[_ngcontent-%COMP%]{--mdc-filled-text-field-caret-color: #f44336;--mdc-filled-text-field-focus-active-indicator-color: #f44336;--mdc-filled-text-field-focus-label-text-color: rgba(244, 67, 54, .87);--mdc-outlined-text-field-caret-color: #f44336;--mdc-outlined-text-field-focus-outline-color: #f44336;--mdc-outlined-text-field-focus-label-text-color: rgba(244, 67, 54, .87);--mat-form-field-focus-select-arrow-color: rgba(244, 67, 54, .87)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-accent[_ngcontent-%COMP%]{--mat-select-panel-background-color: #305680;--mat-select-enabled-trigger-text-color: rgba(255, 255, 255, .87);--mat-select-disabled-trigger-text-color: rgba(255, 255, 255, .38);--mat-select-placeholder-text-color: rgba(255, 255, 255, .6);--mat-select-enabled-arrow-color: rgba(255, 255, 255, .54);--mat-select-disabled-arrow-color: rgba(255, 255, 255, .38);--mat-select-focused-arrow-color: rgba(255, 87, 34, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-form-field.mat-warn[_ngcontent-%COMP%]{--mat-select-panel-background-color: #305680;--mat-select-enabled-trigger-text-color: rgba(255, 255, 255, .87);--mat-select-disabled-trigger-text-color: rgba(255, 255, 255, .38);--mat-select-placeholder-text-color: rgba(255, 255, 255, .6);--mat-select-enabled-arrow-color: rgba(255, 255, 255, .54);--mat-select-disabled-arrow-color: rgba(255, 255, 255, .38);--mat-select-focused-arrow-color: rgba(244, 67, 54, .87);--mat-select-invalid-arrow-color: rgba(244, 67, 54, .87)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip[_ngcontent-%COMP%]{--mdc-chip-container-shape-radius: 16px;--mdc-chip-with-avatar-avatar-shape-radius: 14px;--mdc-chip-with-avatar-avatar-size: 28px;--mdc-chip-with-icon-icon-size: 18px;--mdc-chip-outline-width: 0;--mdc-chip-outline-color: transparent;--mdc-chip-disabled-outline-color: transparent;--mdc-chip-focus-outline-color: transparent;--mdc-chip-hover-state-layer-opacity: .04;--mdc-chip-with-avatar-disabled-avatar-opacity: 1;--mdc-chip-flat-selected-outline-width: 0;--mdc-chip-selected-hover-state-layer-opacity: .04;--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity: 1;--mdc-chip-with-icon-disabled-icon-opacity: 1;--mat-chip-disabled-container-opacity: .4;--mat-chip-trailing-action-opacity: .54;--mat-chip-trailing-action-focus-opacity: 1;--mat-chip-trailing-action-state-layer-color: transparent;--mat-chip-selected-trailing-action-state-layer-color: transparent;--mat-chip-trailing-action-hover-state-layer-opacity: 0;--mat-chip-trailing-action-focus-state-layer-opacity: 0;--mdc-chip-disabled-label-text-color: #fafafa;--mdc-chip-elevated-container-color: #496a8f;--mdc-chip-elevated-selected-container-color: #496a8f;--mdc-chip-elevated-disabled-container-color: #496a8f;--mdc-chip-flat-disabled-selected-container-color: #496a8f;--mdc-chip-focus-state-layer-color: white;--mdc-chip-hover-state-layer-color: white;--mdc-chip-selected-hover-state-layer-color: white;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: white;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: #fafafa;--mdc-chip-selected-label-text-color: #fafafa;--mdc-chip-with-icon-icon-color: #fafafa;--mdc-chip-with-icon-disabled-icon-color: #fafafa;--mdc-chip-with-icon-selected-icon-color: #fafafa;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: #fafafa;--mdc-chip-with-trailing-icon-trailing-icon-color: #fafafa;--mat-chip-selected-disabled-trailing-icon-color: #fafafa;--mat-chip-selected-trailing-icon-color: #fafafa}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-primary[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-primary[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: #1a237e;--mdc-chip-elevated-container-color: #9fa8da;--mdc-chip-elevated-selected-container-color: #9fa8da;--mdc-chip-elevated-disabled-container-color: #9fa8da;--mdc-chip-flat-disabled-selected-container-color: #9fa8da;--mdc-chip-focus-state-layer-color: white;--mdc-chip-hover-state-layer-color: white;--mdc-chip-selected-hover-state-layer-color: white;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: white;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: #1a237e;--mdc-chip-selected-label-text-color: #1a237e;--mdc-chip-with-icon-icon-color: #1a237e;--mdc-chip-with-icon-disabled-icon-color: #1a237e;--mdc-chip-with-icon-selected-icon-color: #1a237e;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: #1a237e;--mdc-chip-with-trailing-icon-trailing-icon-color: #1a237e;--mat-chip-selected-disabled-trailing-icon-color: #1a237e;--mat-chip-selected-trailing-icon-color: #1a237e}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-accent[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-accent[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: white;--mdc-chip-elevated-container-color: #ff5722;--mdc-chip-elevated-selected-container-color: #ff5722;--mdc-chip-elevated-disabled-container-color: #ff5722;--mdc-chip-flat-disabled-selected-container-color: #ff5722;--mdc-chip-focus-state-layer-color: white;--mdc-chip-hover-state-layer-color: white;--mdc-chip-selected-hover-state-layer-color: white;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: white;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: white;--mdc-chip-selected-label-text-color: white;--mdc-chip-with-icon-icon-color: white;--mdc-chip-with-icon-disabled-icon-color: white;--mdc-chip-with-icon-selected-icon-color: white;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: white;--mdc-chip-with-trailing-icon-trailing-icon-color: white;--mat-chip-selected-disabled-trailing-icon-color: white;--mat-chip-selected-trailing-icon-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-selected.mat-warn[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-standard-chip.mat-mdc-chip-highlighted.mat-warn[_ngcontent-%COMP%]{--mdc-chip-disabled-label-text-color: white;--mdc-chip-elevated-container-color: #f44336;--mdc-chip-elevated-selected-container-color: #f44336;--mdc-chip-elevated-disabled-container-color: #f44336;--mdc-chip-flat-disabled-selected-container-color: #f44336;--mdc-chip-focus-state-layer-color: white;--mdc-chip-hover-state-layer-color: white;--mdc-chip-selected-hover-state-layer-color: white;--mdc-chip-focus-state-layer-opacity: .12;--mdc-chip-selected-focus-state-layer-color: white;--mdc-chip-selected-focus-state-layer-opacity: .12;--mdc-chip-label-text-color: white;--mdc-chip-selected-label-text-color: white;--mdc-chip-with-icon-icon-color: white;--mdc-chip-with-icon-disabled-icon-color: white;--mdc-chip-with-icon-selected-icon-color: white;--mdc-chip-with-trailing-icon-disabled-trailing-icon-color: white;--mdc-chip-with-trailing-icon-trailing-icon-color: white;--mat-chip-selected-disabled-trailing-icon-color: white;--mat-chip-selected-trailing-icon-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{--mat-switch-disabled-selected-handle-opacity: .38;--mat-switch-disabled-unselected-handle-opacity: .38;--mat-switch-unselected-handle-size: 20px;--mat-switch-selected-handle-size: 20px;--mat-switch-pressed-handle-size: 20px;--mat-switch-with-icon-handle-size: 20px;--mat-switch-selected-handle-horizontal-margin: 0;--mat-switch-selected-with-icon-handle-horizontal-margin: 0;--mat-switch-selected-pressed-handle-horizontal-margin: 0;--mat-switch-unselected-handle-horizontal-margin: 0;--mat-switch-unselected-with-icon-handle-horizontal-margin: 0;--mat-switch-unselected-pressed-handle-horizontal-margin: 0;--mat-switch-visible-track-opacity: 1;--mat-switch-hidden-track-opacity: 1;--mat-switch-visible-track-transition: transform 75ms 0ms cubic-bezier(0, 0, .2, 1);--mat-switch-hidden-track-transition: transform 75ms 0ms cubic-bezier(.4, 0, .6, 1);--mat-switch-track-outline-width: 1px;--mat-switch-track-outline-color: transparent;--mat-switch-selected-track-outline-width: 1px;--mat-switch-selected-track-outline-color: transparent;--mat-switch-disabled-unselected-track-outline-width: 1px;--mat-switch-disabled-unselected-track-outline-color: transparent;--mat-switch-label-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-slide-toggle.mat-accent[_ngcontent-%COMP%]{--mdc-switch-selected-focus-state-layer-color: #ff8a65;--mdc-switch-selected-handle-color: #ff8a65;--mdc-switch-selected-hover-state-layer-color: #ff8a65;--mdc-switch-selected-pressed-state-layer-color: #ff8a65;--mdc-switch-selected-focus-handle-color: #ffab91;--mdc-switch-selected-hover-handle-color: #ffab91;--mdc-switch-selected-pressed-handle-color: #ffab91;--mdc-switch-selected-focus-track-color: #f4511e;--mdc-switch-selected-hover-track-color: #f4511e;--mdc-switch-selected-pressed-track-color: #f4511e;--mdc-switch-selected-track-color: #f4511e}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-slide-toggle.mat-warn[_ngcontent-%COMP%]{--mdc-switch-selected-focus-state-layer-color: #e57373;--mdc-switch-selected-handle-color: #e57373;--mdc-switch-selected-hover-state-layer-color: #e57373;--mdc-switch-selected-pressed-state-layer-color: #e57373;--mdc-switch-selected-focus-handle-color: #ef9a9a;--mdc-switch-selected-hover-handle-color: #ef9a9a;--mdc-switch-selected-pressed-handle-color: #ef9a9a;--mdc-switch-selected-focus-track-color: #e53935;--mdc-switch-selected-hover-track-color: #e53935;--mdc-switch-selected-pressed-track-color: #e53935;--mdc-switch-selected-track-color: #e53935}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #9fa8da;--mdc-radio-selected-hover-icon-color: #9fa8da;--mdc-radio-selected-icon-color: #9fa8da;--mdc-radio-selected-pressed-icon-color: #9fa8da;--mat-radio-ripple-color: white;--mat-radio-checked-ripple-color: #9fa8da;--mat-radio-disabled-label-color: rgba(255, 255, 255, .5);--mat-radio-label-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-accent[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #ff5722;--mdc-radio-selected-hover-icon-color: #ff5722;--mdc-radio-selected-icon-color: #ff5722;--mdc-radio-selected-pressed-icon-color: #ff5722;--mat-radio-ripple-color: white;--mat-radio-checked-ripple-color: #ff5722;--mat-radio-disabled-label-color: rgba(255, 255, 255, .5);--mat-radio-label-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-radio-button.mat-warn[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #f44336;--mdc-radio-selected-hover-icon-color: #f44336;--mdc-radio-selected-icon-color: #f44336;--mdc-radio-selected-pressed-icon-color: #f44336;--mat-radio-ripple-color: white;--mat-radio-checked-ripple-color: #f44336;--mat-radio-disabled-label-color: rgba(255, 255, 255, .5);--mat-radio-label-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mdc-slider-handle-color: #ff5722;--mdc-slider-focus-handle-color: #ff5722;--mdc-slider-hover-handle-color: #ff5722;--mdc-slider-active-track-color: #ff5722;--mdc-slider-inactive-track-color: #ff5722;--mdc-slider-with-tick-marks-inactive-container-color: #ff5722;--mdc-slider-with-tick-marks-active-container-color: white;--mat-slider-ripple-color: #ff5722;--mat-slider-hover-state-layer-color: rgba(255, 87, 34, .05);--mat-slider-focus-state-layer-color: rgba(255, 87, 34, .2)}.tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mdc-slider-handle-color: #f44336;--mdc-slider-focus-handle-color: #f44336;--mdc-slider-hover-handle-color: #f44336;--mdc-slider-active-track-color: #f44336;--mdc-slider-inactive-track-color: #f44336;--mdc-slider-with-tick-marks-inactive-container-color: #f44336;--mdc-slider-with-tick-marks-active-container-color: white;--mat-slider-ripple-color: #f44336;--mat-slider-hover-state-layer-color: rgba(244, 67, 54, .05);--mat-slider-focus-state-layer-color: rgba(244, 67, 54, .2)}.tb-dark[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #9fa8da;--mdc-radio-selected-hover-icon-color: #9fa8da;--mdc-radio-selected-icon-color: #9fa8da;--mdc-radio-selected-pressed-icon-color: #9fa8da}.tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #ff5722;--mdc-radio-selected-hover-icon-color: #ff5722;--mdc-radio-selected-icon-color: #ff5722;--mdc-radio-selected-pressed-icon-color: #ff5722}.tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: white;--mdc-radio-disabled-unselected-icon-color: white;--mdc-radio-unselected-hover-icon-color: #eeeeee;--mdc-radio-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-radio-unselected-pressed-icon-color: rgba(255, 255, 255, .54);--mdc-radio-selected-focus-icon-color: #f44336;--mdc-radio-selected-hover-icon-color: #f44336;--mdc-radio-selected-icon-color: #f44336;--mdc-radio-selected-pressed-icon-color: #f44336}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-option[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: #1a237e;--mdc-checkbox-selected-focus-icon-color: #9fa8da;--mdc-checkbox-selected-hover-icon-color: #9fa8da;--mdc-checkbox-selected-icon-color: #9fa8da;--mdc-checkbox-selected-pressed-icon-color: #9fa8da;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #9fa8da;--mdc-checkbox-selected-hover-state-layer-color: #9fa8da;--mdc-checkbox-selected-pressed-state-layer-color: #9fa8da;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-option.mat-accent[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #ff5722;--mdc-checkbox-selected-hover-icon-color: #ff5722;--mdc-checkbox-selected-icon-color: #ff5722;--mdc-checkbox-selected-pressed-icon-color: #ff5722;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #ff5722;--mdc-checkbox-selected-hover-state-layer-color: #ff5722;--mdc-checkbox-selected-pressed-state-layer-color: #ff5722;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-option.mat-warn[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #f44336;--mdc-checkbox-selected-hover-icon-color: #f44336;--mdc-checkbox-selected-icon-color: #f44336;--mdc-checkbox-selected-pressed-icon-color: #f44336;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #f44336;--mdc-checkbox-selected-hover-state-layer-color: #f44336;--mdc-checkbox-selected-pressed-state-layer-color: #f44336;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--selected[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--selected[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--activated[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base.mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--activated[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{color:#9fa8da}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__content[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-list-base[_ngcontent-%COMP%]   .mdc-list-item--disabled[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{opacity:1}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #9fa8da;--mat-tab-header-disabled-ripple-color: rgba(255, 255, 255, .5);--mat-tab-header-pagination-icon-color: white;--mat-tab-header-inactive-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-label-text-color: #9fa8da;--mat-tab-header-active-ripple-color: #9fa8da;--mat-tab-header-inactive-ripple-color: #9fa8da;--mat-tab-header-inactive-focus-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-focus-label-text-color: #9fa8da;--mat-tab-header-active-hover-label-text-color: #9fa8da;--mat-tab-header-active-focus-indicator-color: #9fa8da;--mat-tab-header-active-hover-indicator-color: #9fa8da}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-accent[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-accent[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #ff5722;--mat-tab-header-disabled-ripple-color: rgba(255, 255, 255, .5);--mat-tab-header-pagination-icon-color: white;--mat-tab-header-inactive-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-label-text-color: #ff5722;--mat-tab-header-active-ripple-color: #ff5722;--mat-tab-header-inactive-ripple-color: #ff5722;--mat-tab-header-inactive-focus-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-focus-label-text-color: #ff5722;--mat-tab-header-active-hover-label-text-color: #ff5722;--mat-tab-header-active-focus-indicator-color: #ff5722;--mat-tab-header-active-hover-indicator-color: #ff5722}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-warn[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-warn[_ngcontent-%COMP%]{--mdc-tab-indicator-active-indicator-color: #f44336;--mat-tab-header-disabled-ripple-color: rgba(255, 255, 255, .5);--mat-tab-header-pagination-icon-color: white;--mat-tab-header-inactive-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-label-text-color: #f44336;--mat-tab-header-active-ripple-color: #f44336;--mat-tab-header-inactive-ripple-color: #f44336;--mat-tab-header-inactive-focus-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-inactive-hover-label-text-color: rgba(255, 255, 255, .6);--mat-tab-header-active-focus-label-text-color: #f44336;--mat-tab-header-active-hover-label-text-color: #f44336;--mat-tab-header-active-focus-indicator-color: #f44336;--mat-tab-header-active-hover-indicator-color: #f44336}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-primary[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-primary[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #9fa8da;--mat-tab-header-with-background-foreground-color: #1a237e}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-accent[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-accent[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #ff5722;--mat-tab-header-with-background-foreground-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-group.mat-background-warn[_ngcontent-%COMP%], .tb-dark[_ngcontent-%COMP%]   .mat-mdc-tab-nav-bar.mat-background-warn[_ngcontent-%COMP%]{--mat-tab-header-with-background-background-color: #f44336;--mat-tab-header-with-background-foreground-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-checkbox.mat-primary[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: #1a237e;--mdc-checkbox-selected-focus-icon-color: #9fa8da;--mdc-checkbox-selected-hover-icon-color: #9fa8da;--mdc-checkbox-selected-icon-color: #9fa8da;--mdc-checkbox-selected-pressed-icon-color: #9fa8da;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #9fa8da;--mdc-checkbox-selected-hover-state-layer-color: #9fa8da;--mdc-checkbox-selected-pressed-state-layer-color: #9fa8da;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-checkbox.mat-warn[_ngcontent-%COMP%]{--mdc-checkbox-disabled-selected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-disabled-unselected-icon-color: rgba(255, 255, 255, .38);--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-focus-icon-color: #f44336;--mdc-checkbox-selected-hover-icon-color: #f44336;--mdc-checkbox-selected-icon-color: #f44336;--mdc-checkbox-selected-pressed-icon-color: #f44336;--mdc-checkbox-unselected-focus-icon-color: #eeeeee;--mdc-checkbox-unselected-hover-icon-color: #eeeeee;--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .54);--mdc-checkbox-selected-focus-state-layer-color: #f44336;--mdc-checkbox-selected-hover-state-layer-color: #f44336;--mdc-checkbox-selected-pressed-state-layer-color: #f44336;--mdc-checkbox-unselected-focus-state-layer-color: white;--mdc-checkbox-unselected-hover-state-layer-color: white;--mdc-checkbox-unselected-pressed-state-layer-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-button.mat-primary[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #9fa8da;--mat-text-button-state-layer-color: #9fa8da;--mat-text-button-ripple-color: rgba(159, 168, 218, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-button.mat-accent[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #ff5722;--mat-text-button-state-layer-color: #ff5722;--mat-text-button-ripple-color: rgba(255, 87, 34, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-button.mat-warn[_ngcontent-%COMP%]{--mdc-text-button-label-text-color: #f44336;--mat-text-button-state-layer-color: #f44336;--mat-text-button-ripple-color: rgba(244, 67, 54, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-primary[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #9fa8da;--mdc-filled-button-label-text-color: #1a237e;--mat-filled-button-state-layer-color: #1a237e;--mat-filled-button-ripple-color: rgba(26, 35, 126, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-accent[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #ff5722;--mdc-filled-button-label-text-color: white;--mat-filled-button-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-unelevated-button.mat-warn[_ngcontent-%COMP%]{--mdc-filled-button-container-color: #f44336;--mdc-filled-button-label-text-color: white;--mat-filled-button-state-layer-color: white;--mat-filled-button-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #9fa8da;--mdc-protected-button-label-text-color: #1a237e;--mat-protected-button-state-layer-color: #1a237e;--mat-protected-button-ripple-color: rgba(26, 35, 126, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-accent[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #ff5722;--mdc-protected-button-label-text-color: white;--mat-protected-button-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-raised-button.mat-warn[_ngcontent-%COMP%]{--mdc-protected-button-container-color: #f44336;--mdc-protected-button-label-text-color: white;--mat-protected-button-state-layer-color: white;--mat-protected-button-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-primary[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #9fa8da;--mdc-outlined-button-outline-color: rgba(255, 255, 255, .12);--mat-outlined-button-state-layer-color: #9fa8da;--mat-outlined-button-ripple-color: rgba(159, 168, 218, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-accent[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #ff5722;--mdc-outlined-button-outline-color: rgba(255, 255, 255, .12);--mat-outlined-button-state-layer-color: #ff5722;--mat-outlined-button-ripple-color: rgba(255, 87, 34, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-outlined-button.mat-warn[_ngcontent-%COMP%]{--mdc-outlined-button-label-text-color: #f44336;--mdc-outlined-button-outline-color: rgba(255, 255, 255, .12);--mat-outlined-button-state-layer-color: #f44336;--mat-outlined-button-ripple-color: rgba(244, 67, 54, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-primary[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #9fa8da;--mat-icon-button-state-layer-color: #9fa8da;--mat-icon-button-ripple-color: rgba(159, 168, 218, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-accent[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #ff5722;--mat-icon-button-state-layer-color: #ff5722;--mat-icon-button-ripple-color: rgba(255, 87, 34, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-icon-button.mat-warn[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: #f44336;--mat-icon-button-state-layer-color: #f44336;--mat-icon-button-ripple-color: rgba(244, 67, 54, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-fab.mat-primary[_ngcontent-%COMP%]{--mdc-fab-container-color: #9fa8da;--mat-fab-foreground-color: #1a237e;--mat-fab-state-layer-color: #1a237e;--mat-fab-ripple-color: rgba(26, 35, 126, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-fab.mat-accent[_ngcontent-%COMP%]{--mdc-fab-container-color: #ff5722;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-fab.mat-warn[_ngcontent-%COMP%]{--mdc-fab-container-color: #f44336;--mat-fab-foreground-color: white;--mat-fab-state-layer-color: white;--mat-fab-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-primary[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #9fa8da;--mat-fab-small-foreground-color: #1a237e;--mat-fab-small-state-layer-color: #1a237e;--mat-fab-small-ripple-color: rgba(26, 35, 126, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-accent[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #ff5722;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-mdc-mini-fab.mat-warn[_ngcontent-%COMP%]{--mdc-fab-small-container-color: #f44336;--mat-fab-small-foreground-color: white;--mat-fab-small-state-layer-color: white;--mat-fab-small-ripple-color: rgba(255, 255, 255, .1)}.tb-dark[_ngcontent-%COMP%]   .mat-accent[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #ff5722}.tb-dark[_ngcontent-%COMP%]   .mat-warn[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: #f44336}.tb-dark[_ngcontent-%COMP%]   .mat-badge-accent[_ngcontent-%COMP%]{--mat-badge-background-color: #ff5722;--mat-badge-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-badge-warn[_ngcontent-%COMP%]{--mat-badge-background-color: #f44336;--mat-badge-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-datepicker-content.mat-accent[_ngcontent-%COMP%]{--mat-datepicker-calendar-date-selected-state-text-color: white;--mat-datepicker-calendar-date-selected-state-background-color: #ff5722;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(255, 87, 34, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: white;--mat-datepicker-calendar-date-focus-state-background-color: rgba(255, 87, 34, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(255, 87, 34, .3);--mat-datepicker-calendar-date-in-range-state-background-color: rgba(255, 87, 34, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e}.tb-dark[_ngcontent-%COMP%]   .mat-datepicker-content.mat-warn[_ngcontent-%COMP%]{--mat-datepicker-calendar-date-selected-state-text-color: white;--mat-datepicker-calendar-date-selected-state-background-color: #f44336;--mat-datepicker-calendar-date-selected-disabled-state-background-color: rgba(244, 67, 54, .4);--mat-datepicker-calendar-date-today-selected-state-outline-color: white;--mat-datepicker-calendar-date-focus-state-background-color: rgba(244, 67, 54, .3);--mat-datepicker-calendar-date-hover-state-background-color: rgba(244, 67, 54, .3);--mat-datepicker-calendar-date-in-range-state-background-color: rgba(244, 67, 54, .2);--mat-datepicker-calendar-date-in-comparison-range-state-background-color: rgba(249, 171, 0, .2);--mat-datepicker-calendar-date-in-overlap-range-state-background-color: #a8dab5;--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color: #46a35e}.tb-dark[_ngcontent-%COMP%]   .mat-datepicker-toggle-active.mat-accent[_ngcontent-%COMP%]{--mat-datepicker-toggle-active-state-icon-color: #ff5722}.tb-dark[_ngcontent-%COMP%]   .mat-datepicker-toggle-active.mat-warn[_ngcontent-%COMP%]{--mat-datepicker-toggle-active-state-icon-color: #f44336}.tb-dark[_ngcontent-%COMP%]   .mat-icon.mat-primary[_ngcontent-%COMP%]{--mat-icon-color: #9fa8da}.tb-dark[_ngcontent-%COMP%]   .mat-icon.mat-accent[_ngcontent-%COMP%]{--mat-icon-color: #ff5722}.tb-dark[_ngcontent-%COMP%]   .mat-icon.mat-warn[_ngcontent-%COMP%]{--mat-icon-color: #f44336}.tb-dark[_ngcontent-%COMP%]   .mat-step-header.mat-accent[_ngcontent-%COMP%]{--mat-stepper-header-icon-foreground-color: white;--mat-stepper-header-selected-state-icon-background-color: #ff5722;--mat-stepper-header-selected-state-icon-foreground-color: white;--mat-stepper-header-done-state-icon-background-color: #ff5722;--mat-stepper-header-done-state-icon-foreground-color: white;--mat-stepper-header-edit-state-icon-background-color: #ff5722;--mat-stepper-header-edit-state-icon-foreground-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-step-header.mat-warn[_ngcontent-%COMP%]{--mat-stepper-header-icon-foreground-color: white;--mat-stepper-header-selected-state-icon-background-color: #f44336;--mat-stepper-header-selected-state-icon-foreground-color: white;--mat-stepper-header-done-state-icon-background-color: #f44336;--mat-stepper-header-done-state-icon-foreground-color: white;--mat-stepper-header-edit-state-icon-background-color: #f44336;--mat-stepper-header-edit-state-icon-foreground-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-toolbar.mat-primary[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #9fa8da;--mat-toolbar-container-text-color: #1a237e}.tb-dark[_ngcontent-%COMP%]   .mat-toolbar.mat-accent[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #ff5722;--mat-toolbar-container-text-color: white}.tb-dark[_ngcontent-%COMP%]   .mat-toolbar.mat-warn[_ngcontent-%COMP%]{--mat-toolbar-container-background-color: #f44336;--mat-toolbar-container-text-color: white}[_nghost-%COMP%]   .tb-layout-fixed-container[_ngcontent-%COMP%]{width:100%;min-width:368px;padding:8px 8px 8px 0;min-height:48px}[_nghost-%COMP%]   .tb-hint-group[_ngcontent-%COMP%]{padding:0;margin-top:-14px}[_nghost-%COMP%]   .tb-layout-preview[_ngcontent-%COMP%]{width:100%;background-color:#e8eaf699;padding:35px}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]{width:75%}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   button.tb-fixed-layout-button[_ngcontent-%COMP%]{background-color:transparent;color:#000;cursor:pointer}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   button.tb-fixed-layout-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   button.tb-fixed-layout-button[_ngcontent-%COMP%]:hover{background-color:#d3d3d399}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition-duration:.5s;transition-property:max-width;position:relative}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{align-self:end}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-element[_ngcontent-%COMP%]{position:absolute;z-index:99}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-element[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px;color:#ffffffc2}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-element[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]:hover{transform:rotate(180deg);transition:transform .5s}[_nghost-%COMP%]   .tb-layout-preview-container-main[_ngcontent-%COMP%]{min-width:25%}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-input[_ngcontent-%COMP%]{margin:80px 0 0}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #778899;background-color:transparent;color:#fff;border-radius:4px;text-align:center;outline:none;width:37px;height:28px;font-size:14px}[_nghost-%COMP%]   .tb-layout-preview-container[_ngcontent-%COMP%]   .tb-layout-preview-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{outline:2px solid #f44336;border:1px solid transparent;background-color:#f4433633}[_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-header-cell.tb-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-row-cell.tb-icon[_ngcontent-%COMP%]{width:29px;min-width:29px;max-width:29px;display:flex;place-content:center}[_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-header-cell.tb-breakpoint[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-row-cell.tb-breakpoint[_ngcontent-%COMP%]{flex:1 1 15%;width:15%;min-width:100px}[_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-header-cell.tb-size[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-row-cell.tb-size[_ngcontent-%COMP%]{flex:1 1 85%;width:200px}[_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-header-cell.tb-actions[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .tb-form-table-row-cell.tb-actions[_ngcontent-%COMP%]{width:96pxpx;min-width:96px;max-width:96px;display:flex;justify-content:end}[_nghost-%COMP%]   .tb-layout-breakpoints[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:6px;margin-bottom:6px}[_nghost-%COMP%]   .tb-add-breakpoint-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:#fff;padding:8px;border:2px dashed rgba(0,0,0,.08);border-radius:10px}[_nghost-%COMP%]     .mat-button-toggle-group{width:100%;min-width:354px;border:2px solid rgba(0,0,0,.06)}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle-checked{background:#0000000f}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle{border:none!important}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle-label-content .mat-pseudo-checkbox{display:none}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{width:550px;max-width:100%;padding:16px}  .tb-layout-error-tooltip-right{background-color:#f44336!important;margin:5px 0 0 105px;width:160px;text-align:center}  .tb-layout-error-tooltip-main{background-color:#f44336!important;margin:5px 105px 0 0;width:160px;text-align:center}','@charset "UTF-8";[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 10px;cursor:default;border-radius:5px}[_nghost-%COMP%]   button.tb-layout-button-right[_ngcontent-%COMP%]{border-radius:0 5px 5px 0}[_nghost-%COMP%]   button.tb-layout-button-main[_ngcontent-%COMP%]{border-radius:5px 0 0 5px}[_nghost-%COMP%]     button.tb-layout-button .mdc-button__label{line-height:36px}']})}}},57454:(Re,X,n)=>{"use strict";n.d(X,{y:()=>U});var e=n(93953),t=n(89417),c=n(56542),h=n(9310),V=n(7901),S=n(34006),G=n(60177),K=n(88834),H=n(99213),k=n(67575),Q=n(59042),z=n(53719),L=n(55911),B=n(73955);function I(F,a){1&F&&e.\u0275\u0275element(0,"mat-progress-bar",17)}class U extends c.m{constructor(a,O,P,A,u){super(a,O,P),this.store=a,this.router=O,this.dialogRef=P,this.fb=A,this.dialog=u,this.moveWidgetsFormGroup=this.fb.group({cols:[0,[t.Validators.required]],rows:[0,[t.Validators.required]]})}cancel(){this.dialogRef.close(null)}move(){const a=this.moveWidgetsFormGroup.value;this.dialogRef.close(a)}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(V.Router),e.\u0275\u0275directiveInject(S.MatDialogRef),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-move-widgets-dialog"]],features:[e.\u0275\u0275ProvidersFeature([]),e.\u0275\u0275InheritDefinitionFeature],decls:34,vars:22,consts:[[3,"ngSubmit"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","",1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-row","space-between","column-xs"],[1,"flex","flex-row","items-center","justify-start","gap-2"],["appearance","outline","subscriptSizing","dynamic",1,"number"],["required","","matInput","","formControlName","cols","type","number","step","1",3,"placeholder"],["translate","","matSuffix",""],["required","","matInput","","formControlName","rows","type","number","step","1",3,"placeholder"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return P.move()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3,"dashboard.move-all-widgets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return P.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,I,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",7)(11,"div",8)(12,"div",2),e.\u0275\u0275text(13,"dashboard.move-by"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",9)(15,"mat-form-field",10),e.\u0275\u0275element(16,"input",11),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementStart(18,"span",12),e.\u0275\u0275text(19,"dashboard.cols"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"mat-form-field",10),e.\u0275\u0275element(21,"input",13),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementStart(23,"span",12),e.\u0275\u0275text(24,"dashboard.rows"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(25,"div",14)(26,"button",15),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275listener("click",function(){return P.cancel()}),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"button",16),e.\u0275\u0275pipe(31,"async"),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()()()),2&O&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,8,P.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",P.moveWidgetsFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(17,10,"widget-config.set")),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(22,12,"widget-config.set")),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(27,14,P.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,16,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(31,18,P.isLoading$)||P.moveWidgetsFormGroup.invalid||!P.moveWidgetsFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,20,"action.move")," "))},dependencies:[G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatProgressBar,Q.MatInput,z.MatFormField,z.MatSuffix,L.MatToolbar,S.MatDialogActions,S.MatDialogContent,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.NgForm,t.FormGroupDirective,t.FormControlName,B.TranslateDirective,G.AsyncPipe,B.TranslatePipe],encapsulation:2})}}},22669:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardStateDialogComponent:()=>u});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(56508),G=n(9310),K=n(7901),H=n(73955),k=n(60177),Q=n(88834),z=n(82765),L=n(99213),B=n(67575),I=n(59042),U=n(53719),F=n(55911);function a(m,p){1&m&&e.\u0275\u0275element(0,"mat-progress-bar",17)}function O(m,p){1&m&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.state-name-required")," "))}function P(m,p){1&m&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.state-id-required")," "))}function A(m,p){1&m&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.state-id-exists")," "))}class u extends V.m{constructor(p,v,T,C,_,E,f,g){super(p,v,_),this.store=p,this.router=v,this.data=T,this.errorStateMatcher=C,this.dialogRef=_,this.fb=E,this.translate=f,this.dashboardUtils=g,this.submitted=!1,this.states=this.data.states,this.isAdd=this.data.isAdd,this.isAdd?(this.state={id:"",...this.dashboardUtils.createDefaultState("",!1)},this.prevStateId=""):(this.state=this.data.state,this.prevStateId=this.state.id),this.stateFormGroup=this.fb.group({name:[this.state.name,[h.Validators.required]],id:[this.state.id,[h.Validators.required,this.validateDuplicateStateId()]],root:[this.state.root,[]]}),this.stateFormGroup.get("name").valueChanges.subscribe(y=>{this.checkStateName(y)}),this.stateFormGroup.get("id").valueChanges.subscribe(y=>{this.stateIdTouched=!0})}checkStateName(p){p&&!this.stateIdTouched&&this.isAdd&&this.stateFormGroup.get("id").setValue(p.toLowerCase().replace(/\W/g,"_"),{emitEvent:!1})}validateDuplicateStateId(){return p=>{const v=p.value;return v&&this.states[v]&&v!==this.prevStateId?{stateExists:!0}:null}}ngOnInit(){}isErrorState(p,v){const T=this.errorStateMatcher.isErrorState(p,v),C=!!(p&&p.invalid&&this.submitted);return T||C}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.state={...this.state,...this.stateFormGroup.value},this.state.id=this.state.id.trim(),this.dialogRef.close(this.state)}static{this.\u0275fac=function(v){return new(v||u)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(H.TranslateService),e.\u0275\u0275directiveInject(S.N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["tb-dashboard-state-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:u}]),e.\u0275\u0275InheritDefinitionFeature],decls:36,vars:26,consts:[[2,"min-width","480px",3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[1,"flex","flex-col",3,"disabled"],[1,"mat-block"],["required","","matInput","","formControlName","name"],[4,"ngIf"],["required","","matInput","","formControlName","id"],["formControlName","root"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(v,T){1&v&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return T.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return T.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,a,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",7)(11,"fieldset",8),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"mat-form-field",9)(14,"mat-label",2),e.\u0275\u0275text(15,"dashboard.state-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",10),e.\u0275\u0275template(17,O,3,3,"mat-error",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-form-field",9)(19,"mat-label",2),e.\u0275\u0275text(20,"dashboard.state-id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",12),e.\u0275\u0275template(22,P,3,3,"mat-error",11)(23,A,3,3,"mat-error",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-checkbox",13),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",14)(28,"button",15),e.\u0275\u0275pipe(29,"async"),e.\u0275\u0275listener("click",function(){return T.cancel()}),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"button",16),e.\u0275\u0275pipe(33,"async"),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd()()()),2&v&&(e.\u0275\u0275property("formGroup",T.stateFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(T.isAdd?"dashboard.add-state":"dashboard.edit-state"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,12,T.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,14,T.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",T.stateFormGroup.get("name").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",T.stateFormGroup.get("id").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",T.stateFormGroup.get("id").hasError("stateExists")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,16,"dashboard.is-root-state")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(29,18,T.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,20,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(33,22,T.isLoading$)||T.stateFormGroup.invalid||!T.stateFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(35,24,T.isAdd?"action.add":"action.save")," "))},dependencies:[k.NgIf,Q.MatButton,Q.MatIconButton,z.MatCheckbox,L.MatIcon,B.MatProgressBar,I.MatInput,U.MatFormField,U.MatLabel,U.MatError,F.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,H.TranslateDirective,k.AsyncPipe,H.TranslatePipe],encapsulation:2})}}},80240:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{ManageDashboardStatesDialogComponent:()=>ne});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(719),S=n(84412),G=n(92771),K=n(7673),H=n(29543),k=n(99437),Q=n(96354),z=n(89348),L=n(99898);class B{constructor(Ae){this.states=Ae,this.statesSubject=new S.t([]),this.pageDataSubject=new S.t((0,H.r)()),this.pageData$=this.pageDataSubject.asObservable()}connect(Ae){return this.statesSubject.asObservable()}disconnect(Ae){this.statesSubject.complete(),this.pageDataSubject.complete()}loadStates(Ae,Pe=!1){Pe&&(this.allStates=null);const Be=new G.m;return this.fetchStates(Ae).pipe((0,k.W)(()=>(0,K.of)((0,H.r)()))).subscribe(Ke=>{this.statesSubject.next(Ke.data),this.pageDataSubject.next(Ke),Be.next(Ke)}),Be}fetchStates(Ae){return this.getAllStates().pipe((0,Q.T)(Pe=>Ae.filterData(Pe)))}getAllStates(){if(!this.allStates){const Ae=[];for(const Pe of Object.keys(this.states)){const Be=this.states[Pe];Ae.push({id:Pe,...Be})}this.allStates=(0,K.of)(Ae).pipe((0,z.H)(1),(0,L.B)())}return this.allStates}isEmpty(){return this.statesSubject.pipe((0,Q.T)(Ae=>!Ae.length))}total(){return this.pageDataSubject.pipe((0,Q.T)(Ae=>Ae.totalElements))}}var I=n(67496),U=n(96695),F=n(2042),a=n(33726),O=n(57786),P=n(70152),A=n(23294),u=n(88141),m=n(80216),p=n(27997),v=n(22669),T=n(15673),C=n(9310),_=n(7901),E=n(89417),f=n(73955),g=n(60177),y=n(88834),b=n(99213),D=n(67575),w=n(59042),ee=n(53719),_e=n(55911),ve=n(14823),Ee=n(9159),$=n(71997);const be=["searchInput"],Te=()=>({standalone:!0}),oe=()=>[5,10,15];function R(ie,Ae){1&ie&&e.\u0275\u0275element(0,"mat-progress-bar",38)}function N(ie,Ae){1&ie&&(e.\u0275\u0275elementStart(0,"mat-header-cell",39),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&ie&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.state-name")," "))}function Z(ie,Ae){if(1&ie&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ie){const Pe=Ae.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Pe.name," ")}}function Y(ie,Ae){1&ie&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&ie&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.state-id")," "))}function ge(ie,Ae){if(1&ie&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ie){const Pe=Ae.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Pe.id," ")}}function ce(ie,Ae){1&ie&&(e.\u0275\u0275elementStart(0,"mat-header-cell",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&ie&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.is-root-state")," "))}function se(ie,Ae){if(1&ie&&(e.\u0275\u0275elementStart(0,"mat-cell")(1,"mat-icon",42),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&ie){const Pe=Ae.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(Pe.root?"check_box":"check_box_outline_blank")}}function J(ie,Ae){1&ie&&e.\u0275\u0275element(0,"mat-header-cell",43)}function de(ie,Ae){if(1&ie){const Pe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"div",44)(2,"button",16),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275listener("click",function(Ke){const Xe=e.\u0275\u0275restoreView(Pe).$implicit,at=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(at.editState(Ke,Xe))}),e.\u0275\u0275elementStart(5,"mat-icon"),e.\u0275\u0275text(6,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",16),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275listener("click",function(Ke){const Xe=e.\u0275\u0275restoreView(Pe).$implicit,at=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(at.duplicateState(Ke,Xe))}),e.\u0275\u0275elementStart(10,"mat-icon"),e.\u0275\u0275text(11,"content_copy"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"button",16),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(Ke){const Xe=e.\u0275\u0275restoreView(Pe).$implicit,at=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(at.deleteState(Ke,Xe))}),e.\u0275\u0275elementStart(15,"mat-icon"),e.\u0275\u0275text(16,"delete"),e.\u0275\u0275elementEnd()()()()}if(2&ie){const Pe=Ae.$implicit,Be=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(3,8,"dashboard.edit-state")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,10,Be.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(8,12,"dashboard.duplicate-state-action")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(9,14,Be.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",Pe.root),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(13,16,"dashboard.delete-state")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,18,Be.isLoading$))}}function ye(ie,Ae){1&ie&&e.\u0275\u0275element(0,"mat-header-row",45)}function re(ie,Ae){1&ie&&e.\u0275\u0275element(0,"mat-row",45)}class ne extends h.m{constructor(Ae,Pe,Be,Ke,Xe,at,bt,Mt,ze,vt){super(Ae,Pe,Xe),this.store=Ae,this.router=Pe,this.data=Be,this.errorStateMatcher=Ke,this.dialogRef=Xe,this.fb=at,this.translate=bt,this.dialogs=Mt,this.utils=ze,this.dialog=vt,this.textSearchMode=!1,this.submitted=!1,this.stateNames=new Set,this.states=this.data.states,this.widgets=this.data.widgets,this.statesFormGroup=this.fb.group({}),Object.values(this.states).forEach(Ye=>this.stateNames.add(Ye.name));const tt={property:"name",direction:I.O.ASC};this.pageLink=new V.Ek(5,0,null,tt),this.displayedColumns=["name","id","root","actions"],this.dataSource=new B(this.states)}ngOnInit(){this.dataSource.loadStates(this.pageLink)}ngAfterViewInit(){(0,a.R)(this.searchInputField.nativeElement,"keyup").pipe((0,P.B)(150),(0,A.F)(),(0,u.M)(()=>{this.paginator.pageIndex=0,this.updateData()})).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,O.h)(this.sort.sortChange,this.paginator.page).pipe((0,u.M)(()=>this.updateData())).subscribe()}updateData(Ae=!1){this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=I.O[this.sort.direction.toUpperCase()],this.dataSource.loadStates(this.pageLink,Ae)}addState(Ae){this.openStateDialog(Ae)}editState(Ae,Pe){this.openStateDialog(Ae,Pe)}deleteState(Ae,Pe){Ae&&Ae.stopPropagation();const Be=this.translate.instant("dashboard.delete-state-title"),Ke=this.translate.instant("dashboard.delete-state-text",{stateName:Pe.name});this.dialogs.confirm(Be,Ke,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(Xe=>{Xe&&(this.stateNames.delete(Pe.name),delete this.states[Pe.id],this.onStatesUpdated())})}enterFilterMode(){this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()}openStateDialog(Ae,Pe=null){Ae&&Ae.stopPropagation();const Be=null===Pe;let Ke=null,Xe="";Be||(Ke=Pe.id,Xe=Pe.name),this.dialog.open(v.DashboardStateDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:Be,states:this.states,state:(0,p.Go)(Pe)}}).afterClosed().subscribe(at=>{at&&this.saveState(at,Ke,Xe)})}saveState(Ae,Pe,Be){const Ke={name:Ae.name,root:Ae.root,layouts:Ae.layouts};if(Pe&&Pe!==Ae.id?(delete this.states[Pe],this.states[Ae.id]=Ke):this.states[Ae.id]=Ke,Be&&Be!==Ae.name&&(this.stateNames.delete(Be),this.stateNames.add(Ae.name)),Ae.root)for(const Xe of Object.keys(this.states)){const at=this.states[Xe];Xe!==Ae.id&&(at.root=!1)}else{let Xe=!1;for(const at of Object.keys(this.states))if(this.states[at].root){Xe=!0;break}if(!Xe){const at=Object.keys(this.states)[0];this.states[at].root=!0}}this.onStatesUpdated()}duplicateState(Ae,Pe){const Be=Pe,Ke=this.getNextDuplicatedName(Pe.name);if(Ke){const Xe=(0,p.Go)(Be),at=(0,p.Go)(this.widgets),bt={},Mt={};Xe.id=Ke.toLowerCase().replace(/\W/g,"_"),Xe.name=Ke,Xe.root=!1,this.stateNames.add(Xe.name);for(const[ze,vt]of Object.entries(Xe.layouts.main.widgets)){const tt=this.utils.guid();bt[tt]=vt,at[tt]=this.widgets[ze],at[tt].id=tt}if(Xe.layouts.main.widgets=bt,(0,p.O9)(Xe.layouts?.right)){for(const[ze,vt]of Object.entries(Xe.layouts.right.widgets)){const tt=this.utils.guid();Mt[tt]=vt,at[tt]=this.widgets[ze],at[tt].id=tt}Xe.layouts.right.widgets=Mt}this.states[Xe.id]=Xe,this.widgets=at,this.onStatesUpdated()}}getNextDuplicatedName(Ae){const Pe=` - ${this.translate.instant("action.copy")} `;let Be=0;for(;++Be<Number.MAX_SAFE_INTEGER;){const Ke=`${Ae}${Pe}${Be}`;if(!this.stateNames.has(Ke))return Ke}return null}onStatesUpdated(){this.statesFormGroup.markAsDirty(),this.updateData(!0)}isErrorState(Ae,Pe){const Be=this.errorStateMatcher.isErrorState(Ae,Pe),Ke=!!(Ae&&Ae.invalid&&this.submitted);return Be||Ke}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.dialogRef.close({states:this.states,widgets:this.widgets})}static{this.\u0275fac=function(Pe){return new(Pe||ne)(e.\u0275\u0275directiveInject(C.Store),e.\u0275\u0275directiveInject(_.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(E.UntypedFormBuilder),e.\u0275\u0275directiveInject(f.TranslateService),e.\u0275\u0275directiveInject(m.o),e.\u0275\u0275directiveInject(T.T),e.\u0275\u0275directiveInject(c.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ne,selectors:[["tb-manage-dashboard-states-dialog"]],viewQuery:function(Pe,Be){if(1&Pe&&(e.\u0275\u0275viewQuery(be,5),e.\u0275\u0275viewQuery(U.MatPaginator,5),e.\u0275\u0275viewQuery(F.MatSort,5)),2&Pe){let Ke;e.\u0275\u0275queryRefresh(Ke=e.\u0275\u0275loadQuery())&&(Be.searchInputField=Ke.first),e.\u0275\u0275queryRefresh(Ke=e.\u0275\u0275loadQuery())&&(Be.paginator=Ke.first),e.\u0275\u0275queryRefresh(Ke=e.\u0275\u0275loadQuery())&&(Be.sort=Ke.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:ne}]),e.\u0275\u0275InheritDefinitionFeature],decls:78,vars:65,consts:[["searchInput",""],[2,"width","750px",3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"manage-dashboard-states"],[1,"tb-entity-table"],[1,"tb-entity-table-content","flex","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","name"],["mat-sort-header","","style","width: 60%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","root"],["mat-sort-header","","style","width: 80px",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 120px; max-width: 120px; width: 120px",4,"matHeaderCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",4,"matRowDef","matRowDefColumns"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["mat-sort-header","",2,"width","60%"],["mat-sort-header","",2,"width","40%"],["mat-sort-header","",2,"width","80px"],[1,"material-icons","mat-icon"],[2,"min-width","120px","max-width","120px","width","120px"],[1,"flex","flex-1","flex-row"],[1,"mat-row-select"]],template:function(Pe,Be){if(1&Pe){const Ke=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2",3),e.\u0275\u0275text(3,"dashboard.manage-states"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",4),e.\u0275\u0275elementStart(5,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.cancel())}),e.\u0275\u0275elementStart(6,"mat-icon",6),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,R,1,0,"mat-progress-bar",7),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",8)(11,"fieldset",9),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",10)(14,"div",11)(15,"div",12)(16,"mat-toolbar",13)(17,"div",14)(18,"span",15),e.\u0275\u0275text(19,"dashboard.states"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"span",4),e.\u0275\u0275elementStart(21,"button",16),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275listener("click",function(at){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.addState(at))}),e.\u0275\u0275elementStart(24,"mat-icon"),e.\u0275\u0275text(25,"add"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"button",16),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275pipe(28,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.enterFilterMode())}),e.\u0275\u0275elementStart(29,"mat-icon"),e.\u0275\u0275text(30,"search"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(31,"mat-toolbar",13)(32,"div",14)(33,"button",17),e.\u0275\u0275pipe(34,"translate"),e.\u0275\u0275elementStart(35,"mat-icon"),e.\u0275\u0275text(36,"search"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"mat-form-field",4)(38,"mat-label"),e.\u0275\u0275text(39,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"input",18,0),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275twoWayListener("ngModelChange",function(at){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275twoWayBindingSet(Be.pageLink.textSearch,at)||(Be.pageLink.textSearch=at),e.\u0275\u0275resetView(at)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"button",19),e.\u0275\u0275pipe(44,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.exitFilterMode())}),e.\u0275\u0275elementStart(45,"mat-icon"),e.\u0275\u0275text(46,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"div",20)(48,"table",21),e.\u0275\u0275elementContainerStart(49,22),e.\u0275\u0275template(50,N,3,3,"mat-header-cell",23)(51,Z,2,1,"mat-cell",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(52,25),e.\u0275\u0275template(53,Y,3,3,"mat-header-cell",26)(54,ge,2,1,"mat-cell",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(55,27),e.\u0275\u0275template(56,ce,3,3,"mat-header-cell",28)(57,se,3,1,"mat-cell",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(58,29),e.\u0275\u0275template(59,J,1,0,"mat-header-cell",30)(60,de,17,20,"mat-cell",24),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(61,ye,1,0,"mat-header-row",31)(62,re,1,0,"mat-row",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"span",33),e.\u0275\u0275pipe(64,"async"),e.\u0275\u0275text(65),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(66,"mat-divider")(67,"mat-paginator",34),e.\u0275\u0275pipe(68,"async"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(69,"div",35)(70,"button",36),e.\u0275\u0275pipe(71,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ke),e.\u0275\u0275resetView(Be.cancel())}),e.\u0275\u0275text(72),e.\u0275\u0275pipe(73,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"button",37),e.\u0275\u0275pipe(75,"async"),e.\u0275\u0275text(76),e.\u0275\u0275pipe(77,"translate"),e.\u0275\u0275elementEnd()()()}2&Pe&&(e.\u0275\u0275property("formGroup",Be.statesFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,33,Be.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,35,Be.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",Be.textSearchMode),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(22,37,"dashboard.add-state")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,39,Be.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(27,41,"action.search")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(28,43,Be.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",!Be.textSearchMode),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(34,45,"dashboard.search-states")),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(42,47,"dashboard.search-states")),e.\u0275\u0275twoWayProperty("ngModel",Be.pageLink.textSearch),e.\u0275\u0275property("ngModelOptions",e.\u0275\u0275pureFunction0(63,Te)),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(44,49,"action.close")),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",Be.dataSource)("matSortActive",Be.pageLink.sortOrder.property)("matSortDirection",Be.pageLink.sortDirection()),e.\u0275\u0275advance(13),e.\u0275\u0275property("matHeaderRowDef",Be.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("matRowDefColumns",Be.displayedColumns),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!1===e.\u0275\u0275pipeBind1(64,51,Be.dataSource.isEmpty())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("dashboard.no-states-text"),e.\u0275\u0275advance(2),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(68,53,Be.dataSource.total()))("pageIndex",Be.pageLink.page)("pageSize",Be.pageLink.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction0(64,oe)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(71,55,Be.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(73,57,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(75,59,Be.isLoading$)||Be.statesFormGroup.invalid||!Be.statesFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(77,61,"action.save")," "))},dependencies:[g.NgIf,y.MatButton,y.MatIconButton,b.MatIcon,D.MatProgressBar,w.MatInput,ee.MatFormField,ee.MatLabel,_e.MatToolbar,c.MatDialogActions,c.MatDialogContent,ve.MatTooltip,Ee.MatTable,Ee.MatHeaderCellDef,Ee.MatHeaderRowDef,Ee.MatColumnDef,Ee.MatCellDef,Ee.MatRowDef,Ee.MatHeaderCell,Ee.MatCell,Ee.MatHeaderRow,Ee.MatRow,U.MatPaginator,F.MatSort,F.MatSortHeader,$.MatDivider,E.\u0275NgNoValidate,E.DefaultValueAccessor,E.NgControlStatus,E.NgControlStatusGroup,E.NgModel,E.FormGroupDirective,f.TranslateDirective,g.AsyncPipe,f.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .manage-dashboard-states .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}']})}}},10951:(Re,X,n)=>{"use strict";n.d(X,{C:()=>c});var e=n(93953),t=n(27997);class c{constructor(){this.statesControllers={},this.statesControllerStates={}}registerStatesController(V,S){this.statesControllers[V]={component:S}}getStateControllers(){return this.statesControllers}getStateController(V){return this.statesControllers[V]}preserveStateControllerState(V,S){this.statesControllerStates[V]=(0,t.Go)(S)}withdrawStateControllerState(V){const S=this.statesControllerStates[V];return delete this.statesControllerStates[V],S}cleanupPreservedStates(){this.statesControllerStates={}}static{this.\u0275fac=function(S){return new(S||c)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})}}},2820:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DISPLAY_WIDGET_TYPES_PANEL_DATA:()=>G,DisplayWidgetTypesPanelComponent:()=>K});var e=n(93953),t=n(60177),c=n(82765),h=n(89417),V=n(73955);function S(H,k){if(1&H){const Q=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-checkbox",2),e.\u0275\u0275twoWayListener("ngModelChange",function(L){const B=e.\u0275\u0275restoreView(Q).$implicit;return e.\u0275\u0275twoWayBindingSet(B.display,L)||(B.display=L),e.\u0275\u0275resetView(L)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(Q);const L=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(L.update())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&H){const Q=k.$implicit;e.\u0275\u0275twoWayProperty("ngModel",Q.display),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"widget."+Q.type)," ")}}const G=new e.InjectionToken("DisplayWidgetTypesPanelData");class K{constructor(k){this.data=k,this.types=this.data.types}update(){this.data.typesUpdated(this.types)}static{this.\u0275fac=function(Q){return new(Q||K)(e.\u0275\u0275directiveInject(G))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:K,selectors:[["tb-widget-types-panel"]],decls:2,vars:1,consts:[[1,"mat-content","mat-padding","flex","flex-col"],["style","padding-bottom: 8px;",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"padding-bottom","8px",3,"ngModelChange","ngModel"]],template:function(Q,z){1&Q&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,S,3,4,"mat-checkbox",1),e.\u0275\u0275elementEnd()),2&Q&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",z.types))},dependencies:[t.NgForOf,c.MatCheckbox,h.NgControlStatus,h.NgModel,V.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;min-width:200px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px #0003,0 13px 19px 2px #00000024,0 5px 24px 4px #0000001f}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}']})}}},83103:(Re,X,n)=>{"use strict";n.d(X,{n:()=>S});var e=n(93953),t=n(69749),c=n(9310),h=n(7901),V=n(49764);class S extends t.H{constructor(K,H){super(K),this.store=K,this.route=H,this.dashboard=this.route.snapshot.data.dashboard}static{this.\u0275fac=function(H){return new(H||S)(e.\u0275\u0275directiveInject(c.Store),e.\u0275\u0275directiveInject(h.ActivatedRoute))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["tb-dashboard-view"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"embedded","dashboard"]],template:function(H,k){1&H&&e.\u0275\u0275element(0,"tb-dashboard-page",0),2&H&&e.\u0275\u0275property("embedded",!0)("dashboard",k.dashboard)},dependencies:[V.DashboardPageComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%}']})}}},57469:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DashboardComponent:()=>Te});var e=n(31635),t=n(93953),c=n(69749),h=n(63729),V=n(53244),S=n(61509),G=n(73378),K=n(11035),H=n(92771),k=n(27997),Q=n(74972),z=n(35334),L=n(96697),B=n(15673),I=n(70933),F=(n(90039),n(29225)),a=n(9310),O=n(99327),P=n(60177),A=n(99213),u=n(59115),m=n(9183),p=n(12887),v=n(73955),T=n(99691),C=n(15571),_=n(42415);const E=["gridster"],f=["dashboardMenuTrigger"],g=["widgetMenuTrigger"],y=oe=>({"tb-noselect":oe});function b(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"keyboardShortcut"),t.\u0275\u0275elementEnd()),2&oe){const N=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,N.shortcut),"")}}function D(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"mat-icon"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&oe){const N=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(N.icon)}}function w(oe,R){if(1&oe){const N=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){const Y=t.\u0275\u0275restoreView(N).$implicit,ge=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(Y.action(ge.dashboardContextMenuEvent))}),t.\u0275\u0275template(1,b,3,3,"span",17)(2,D,2,1,"mat-icon",18),t.\u0275\u0275elementStart(3,"span",19),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()}if(2&oe){const N=R.$implicit;t.\u0275\u0275property("disabled",!N.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",N.shortcut),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",N.icon),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(N.value)}}function ee(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275template(1,w,5,4,"button",15),t.\u0275\u0275elementEnd()),2&oe){const N=R.items;t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",N)}}function _e(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"keyboardShortcut"),t.\u0275\u0275elementEnd()),2&oe){const N=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,N.shortcut),"")}}function ve(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"tb-icon",22),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&oe){const N=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(N.icon)}}function Ee(oe,R){if(1&oe){const N=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){const Y=t.\u0275\u0275restoreView(N).$implicit,ge=t.\u0275\u0275nextContext().widget,ce=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.action(ce.widgetContextMenuEvent,ge))}),t.\u0275\u0275template(1,_e,3,3,"span",17)(2,ve,2,1,"tb-icon",21),t.\u0275\u0275elementStart(3,"span",19),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()}if(2&oe){const N=R.$implicit;t.\u0275\u0275property("disabled",!N.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",N.shortcut),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",N.icon),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(N.value)}}function $(oe,R){if(1&oe&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275template(1,Ee,5,4,"button",15),t.\u0275\u0275elementEnd()),2&oe){const N=R.items;t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",N)}}function be(oe,R){if(1&oe){const N=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"gridster-item",23,5)(2,"tb-widget-container",24),t.\u0275\u0275listener("widgetFullscreenChanged",function(Y){t.\u0275\u0275restoreView(N);const ge=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(ge.onWidgetFullscreenChanged(Y))})("widgetComponentAction",function(Y){const ge=t.\u0275\u0275restoreView(N).$implicit,ce=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(ce.onWidgetComponentAction(Y,ge))}),t.\u0275\u0275elementEnd()()}if(2&oe){const N=R.$implicit,Z=t.\u0275\u0275reference(1),Y=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(t.\u0275\u0275pureFunction1(16,y,Y.isEdit)),t.\u0275\u0275property("item",N),t.\u0275\u0275advance(2),t.\u0275\u0275property("gridsterItem",Z)("widget",N)("dashboardWidgets",Y.dashboardWidgets)("dashboardStyle",Y.dashboardStyle)("backgroundImage",Y.backgroundImage)("isEdit",Y.isEdit)("isEditingWidget",Y.isEditingWidget)("isPreview",Y.isPreview)("isMobile",Y.isMobileSize)("isEditActionEnabled",Y.isEditActionEnabled)("isExportActionEnabled",Y.isExportActionEnabled)("isRemoveActionEnabled",Y.isRemoveActionEnabled)("disableWidgetInteraction",Y.disableWidgetInteraction)}}class Te extends c.H{constructor(R,N,Z,Y,ge,ce,se){super(R),this.store=R,this.utils=N,this.timeService=Z,this.breakpointObserver=Y,this.differs=ge,this.kvDiffers=ce,this.ngZone=se,this.setGridSize=!1,this.displayGrid="onDrag&Resize",this.centerVertical=!1,this.centerHorizontal=!1,this.disableWidgetInteraction=!1,this.ignoreLoading=!0,this.parentDashboard=null,this.popoverComponent=null,this.dashboardTimewindowChangedSubject=new H.m,this.dashboardTimewindowChanged=this.dashboardTimewindowChangedSubject.asObservable().pipe((0,z.d)()),this.isWidgetExpanded=!1,this.isMobileSize=!1,this.dashboardMenuPosition={x:"0px",y:"0px"},this.widgetMenuPosition={x:"0px",y:"0px"},this.dashboardWidgets=new K.Y(this,this.differs.find([]).create((J,de)=>de),this.kvDiffers.find([]).create()),this.optionsChangeNotificationsPaused=!1,this.authUser=(0,h.rx)(R)}ngOnInit(){this.dashboardWidgets.parentDashboard=this.parentDashboard,this.dashboardWidgets.popoverComponent=this.popoverComponent,this.dashboardTimewindow||(this.dashboardTimewindow=this.timeService.defaultTimewindow()),this.gridsterOpts={gridType:this.gridType||G.jJ.ScrollVertical,keepFixedHeightInMobile:!0,disableWarnings:!1,disableAutoPositionOnConflict:!1,pushItems:!1,swap:!1,maxRows:3e3,minCols:this.columns?this.columns:24,setGridSize:this.setGridSize,maxCols:3e3,maxItemCols:1e3,maxItemRows:1e3,maxItemArea:1e6,outerMargin:!(0,k.O9)(this.outerMargin)||this.outerMargin,margin:(0,k.O9)(this.margin)?this.margin:10,minItemCols:1,minItemRows:1,defaultItemCols:8,defaultItemRows:6,displayGrid:this.displayGrid,resizable:{enabled:this.isEdit&&!this.isEditingWidget,delayStart:50,stop:(R,N)=>{N.item.updatePosition(N.$item.x,N.$item.y)}},draggable:{enabled:this.isEdit&&!this.isEditingWidget,delayStart:100,stop:(R,N)=>{N.item.updatePosition(N.$item.x,N.$item.y)}},itemChangeCallback:()=>this.dashboardWidgets.sortWidgets(),itemInitCallback:(R,N)=>{N.item.gridsterItemComponent=N}},this.updateGridOpts(),this.breakpointObserverSubscription=this.breakpointObserver.observe(Q.zV["gt-sm"]).subscribe(()=>{this.updateGridOpts(),this.notifyGridsterOptionsChanged()}),this.updateWidgets()}ngOnDestroy(){super.ngOnDestroy(),this.gridsterResize$&&this.gridsterResize$.disconnect(),this.breakpointObserverSubscription&&this.breakpointObserverSubscription.unsubscribe(),this.dashboardTimewindowChangedSubject.complete(),this.gridster=null}ngDoCheck(){this.optionsChangeNotificationsPaused||this.dashboardWidgets.doCheck()}ngOnChanges(R){let N=!1,Z=!1,Y=!1,ge=!1,ce=!1,se=!1;for(const J of Object.keys(R)){const de=R[J];!de.firstChange&&de.currentValue!==de.previousValue&&(["isMobile","isMobileDisabled","autofillHeight","mobileAutofillHeight","mobileRowHeight","colWidthInteger"].includes(J)?N=!0:["outerMargin","margin","columns"].includes(J)?Z=!0:["isEdit","isEditingWidget"].includes(J)?Y=!0:"displayGrid"===J?ge=!0:["widgets","widgetLayouts"].includes(J)?ce=!0:"dashboardTimewindow"===J&&(se=!0))}ce?this.updateWidgets():se&&this.dashboardTimewindowChangedSubject.next(this.dashboardTimewindow),Z&&this.updateColumnOpts(),N&&this.updateGridOpts(),Y&&this.updateEditingOpts(),ge&&this.updateDisplayGridOpts(),(N||Z||Y||ge)&&this.notifyGridsterOptionsChanged()}updateWidgets(){this.dashboardWidgets.setWidgets(this.widgets,this.widgetLayouts),this.dashboardWidgets.doCheck()}updateWidgetLayouts(){this.dashboardWidgets.widgetLayoutsUpdated()}ngAfterViewInit(){this.gridsterResize$=new ResizeObserver(()=>{this.ngZone.run(()=>{this.onGridsterParentResize()})}),this.gridsterResize$.observe(this.gridster.el.parentElement)}onUpdateTimewindow(R,N,Z,Y){this.ngZone.run(()=>{!this.originalDashboardTimewindow&&!Y&&(this.originalDashboardTimewindow=(0,k.Go)(this.dashboardTimewindow)),this.dashboardTimewindow=(0,V.vZ)(this.dashboardTimewindow,R,N,Z,this.timeService),this.dashboardTimewindowChangedSubject.next(this.dashboardTimewindow)})}onResetTimewindow(){this.ngZone.run(()=>{this.originalDashboardTimewindow&&(this.dashboardTimewindow=(0,k.Go)(this.originalDashboardTimewindow),this.originalDashboardTimewindow=null,this.dashboardTimewindowChangedSubject.next(this.dashboardTimewindow))})}isAutofillHeight(){return this.isMobileSize?!!(0,k.O9)(this.mobileAutofillHeight)&&this.mobileAutofillHeight:!!(0,k.O9)(this.autofillHeight)&&this.autofillHeight}onDashboardMouseDown(R){this.callbacks&&this.callbacks.onDashboardMouseDown&&(R&&R.stopPropagation(),this.callbacks.onDashboardMouseDown(R))}openDashboardContextMenu(R){if(this.callbacks&&this.callbacks.prepareDashboardContextMenu){const N=this.callbacks.prepareDashboardContextMenu(R);N&&N.length&&(R.preventDefault(),R.stopPropagation(),this.dashboardContextMenuEvent=R,this.dashboardMenuPosition.x=R.clientX+"px",this.dashboardMenuPosition.y=R.clientY+"px",this.dashboardMenuTrigger.menuData={items:N},this.dashboardMenuTrigger.openMenu())}}openWidgetContextMenu(R,N){if(this.callbacks&&this.callbacks.prepareWidgetContextMenu){const Z=this.callbacks.prepareWidgetContextMenu(R,N.widget,N.isReference);Z&&Z.length&&(R.preventDefault(),R.stopPropagation(),this.widgetContextMenuEvent=R,this.widgetMenuPosition.x=R.clientX+"px",this.widgetMenuPosition.y=R.clientY+"px",this.widgetMenuTrigger.menuData={items:Z,widget:N.widget},this.widgetMenuTrigger.openMenu())}}onWidgetFullscreenChanged(R){this.isWidgetExpanded=R}onWidgetComponentAction(R,N){const Z=R.event;switch(R.actionType){case I.WidgetComponentActionType.MOUSE_DOWN:this.widgetMouseDown(Z,N);break;case I.WidgetComponentActionType.CLICKED:this.widgetClicked(Z,N);break;case I.WidgetComponentActionType.CONTEXT_MENU:this.openWidgetContextMenu(Z,N);break;case I.WidgetComponentActionType.EDIT:this.editWidget(Z,N);break;case I.WidgetComponentActionType.EXPORT:this.exportWidget(Z,N);break;case I.WidgetComponentActionType.REMOVE:this.removeWidget(Z,N);break;case I.WidgetComponentActionType.REPLACE_REFERENCE_WITH_WIDGET_COPY:this.replaceReferenceWithWidgetCopy(Z,N)}}widgetMouseDown(R,N){this.callbacks&&this.callbacks.onWidgetMouseDown&&this.callbacks.onWidgetMouseDown(R,N.widget)}widgetClicked(R,N){this.callbacks&&this.callbacks.onWidgetClicked&&this.callbacks.onWidgetClicked(R,N.widget)}editWidget(R,N){R&&R.stopPropagation(),this.isEditActionEnabled&&this.callbacks&&this.callbacks.onEditWidget&&this.callbacks.onEditWidget(R,N.widget)}replaceReferenceWithWidgetCopy(R,N){R&&R.stopPropagation(),this.isEditActionEnabled&&this.callbacks&&this.callbacks.replaceReferenceWithWidgetCopy&&this.callbacks.replaceReferenceWithWidgetCopy(R,N.widget)}exportWidget(R,N){R&&R.stopPropagation(),this.isExportActionEnabled&&this.callbacks&&this.callbacks.onExportWidget&&N.title$.pipe((0,L.s)(1)).subscribe(Z=>{this.callbacks.onExportWidget(R,N.widget,Z)})}removeWidget(R,N){R&&R.stopPropagation(),this.isRemoveActionEnabled&&this.callbacks&&this.callbacks.onRemoveWidget&&this.callbacks.onRemoveWidget(R,N.widget)}highlightWidget(R,N){const Z=this.dashboardWidgets.highlightWidget(R);Z&&this.scrollToWidget(Z,N)}selectWidget(R,N){const Z=this.dashboardWidgets.selectWidget(R);Z&&this.scrollToWidget(Z,N)}getSelectedWidget(){const R=this.dashboardWidgets.getSelectedWidget();return R?R.widget:null}getEventGridPosition(R){const N={row:0,column:0},Z=_(this.gridster.el);let Y=0,ge=0;"pageX"in R&&"pageY"in R&&(Y=R.pageX,ge=R.pageY);const ce=Z.offset(),se=Y-ce.left+Z.scrollLeft(),J=ge-ce.top+Z.scrollTop();return N.row=this.gridster.pixelsToPositionY(J,Math.floor),N.column=this.gridster.pixelsToPositionX(se,Math.floor),N}resetHighlight(){const R=this.dashboardWidgets.resetHighlight();R&&setTimeout(()=>{this.scrollToWidget(R,0)},0)}scrollToWidget(R,N){const Z=this.gridster.el;R.gridsterItemComponent$().subscribe(Y=>{const ge=Y.el,ce=(Z.clientHeight-ge.clientHeight)/2;let se;se=this.isMobileSize?ge.offsetTop:se=Y.top,ce>0&&(se-=ce),(0,k.z5)(Z,se,N)})}onGridsterParentResize(){const R=this.gridster.el.offsetHeight;this.isMobileSize&&this.mobileAutofillHeight&&R&&this.updateGridOpts(R),this.notifyGridsterOptionsChanged()}updateGridOpts(R){let N=!1;const Z=this.checkIsMobileSize();this.isMobileSize!==Z&&(this.isMobileSize=Z,N=!0);const Y=this.isAutofillHeight();this.gridsterOpts.gridType=Y?this.isMobileSize?G.jJ.Fixed:G.jJ.Fit:this.isMobileSize?G.jJ.Fixed:this.gridType||G.jJ.ScrollVertical,this.gridsterOpts.mobileBreakpoint=this.isMobileSize?2e4:0;const ge=this.detectRowSize(this.isMobileSize,Y,R);this.gridsterOpts.fixedRowHeight!==ge&&(this.gridsterOpts.fixedRowHeight=ge),N&&this.dashboardWidgets.updateRowsAndSort()}updateColumnOpts(){this.gridsterOpts.minCols=this.columns?this.columns:24,this.gridsterOpts.outerMargin=!(0,k.O9)(this.outerMargin)||this.outerMargin,this.gridsterOpts.margin=(0,k.O9)(this.margin)?this.margin:10}updateEditingOpts(){this.gridsterOpts.resizable.enabled=this.isEdit&&!this.isEditingWidget,this.gridsterOpts.draggable.enabled=this.isEdit&&!this.isEditingWidget}updateDisplayGridOpts(){this.gridsterOpts.displayGrid=this.displayGrid}notifyGridsterOptionsChanged(){this.optionsChangeNotificationsPaused||this.gridster&&this.gridster.options&&this.gridster.optionsChanged()}pauseChangeNotifications(){this.optionsChangeNotificationsPaused=!0}resumeChangeNotifications(){this.optionsChangeNotificationsPaused=!1}notifyLayoutUpdated(){this.updateWidgetLayouts()}detectRowSize(R,N,Z){let Y=null;if(N){if(N&&R&&(Z||(Z=this.gridster.el.offsetHeight),Z)){let ge=0;for(const ce of this.dashboardWidgets.activeDashboardWidgets)ge+=ce.rows;Y=(Z-this.gridsterOpts.margin*(ge+(this.gridsterOpts.outerMargin?1:-1)))/ge}}else R&&(Y=(0,k.O9)(this.mobileRowHeight)?this.mobileRowHeight:70);return Y}checkIsMobileSize(){const R=!0===this.isMobileDisabled;let N=!0===this.isMobile&&!R;return!N&&!R&&(N=!this.breakpointObserver.isMatched(Q.zV["gt-sm"])),N}static{this.\u0275fac=function(N){return new(N||Te)(t.\u0275\u0275directiveInject(a.Store),t.\u0275\u0275directiveInject(B.T),t.\u0275\u0275directiveInject(S.v),t.\u0275\u0275directiveInject(O.BreakpointObserver),t.\u0275\u0275directiveInject(t.IterableDiffers),t.\u0275\u0275directiveInject(t.KeyValueDiffers),t.\u0275\u0275directiveInject(t.NgZone))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:Te,selectors:[["tb-dashboard"]],viewQuery:function(N,Z){if(1&N&&(t.\u0275\u0275viewQuery(E,7),t.\u0275\u0275viewQuery(f,7),t.\u0275\u0275viewQuery(g,7)),2&N){let Y;t.\u0275\u0275queryRefresh(Y=t.\u0275\u0275loadQuery())&&(Z.gridster=Y.first),t.\u0275\u0275queryRefresh(Y=t.\u0275\u0275loadQuery())&&(Z.dashboardMenuTrigger=Y.first),t.\u0275\u0275queryRefresh(Y=t.\u0275\u0275loadQuery())&&(Z.widgetMenuTrigger=Y.first)}},inputs:{widgets:"widgets",widgetLayouts:"widgetLayouts",callbacks:"callbacks",aliasController:"aliasController",stateController:"stateController",columns:"columns",setGridSize:"setGridSize",margin:"margin",outerMargin:"outerMargin",displayGrid:"displayGrid",gridType:"gridType",centerVertical:"centerVertical",centerHorizontal:"centerHorizontal",isEdit:"isEdit",isEditingWidget:"isEditingWidget",isPreview:"isPreview",autofillHeight:"autofillHeight",mobileAutofillHeight:"mobileAutofillHeight",mobileRowHeight:"mobileRowHeight",isMobile:"isMobile",isMobileDisabled:"isMobileDisabled",isEditActionEnabled:"isEditActionEnabled",isExportActionEnabled:"isExportActionEnabled",isRemoveActionEnabled:"isRemoveActionEnabled",disableWidgetInteraction:"disableWidgetInteraction",dashboardStyle:"dashboardStyle",backgroundImage:"backgroundImage",dashboardClass:"dashboardClass",ignoreLoading:"ignoreLoading",dashboardTimewindow:"dashboardTimewindow",parentDashboard:"parentDashboard",popoverComponent:"popoverComponent"},features:[t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275NgOnChangesFeature],decls:18,vars:28,consts:[["dashboardMenuTrigger","matMenuTrigger"],["dashboardMenu","matMenu"],["widgetMenuTrigger","matMenuTrigger"],["widgetMenu","matMenu"],["gridster",""],["gridsterItem",""],[1,"tb-progress-cover","flex","flex-1","flex-col","items-center","justify-center"],["color","warn","mode","indeterminate","diameter","100"],["id","gridster-parent",1,"tb-dashboard-content","flex-1",3,"mousedown","tbcontextmenu"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["matMenuContent",""],["id","gridster-background"],["id","gridster-child",3,"options"],[3,"item","class",4,"ngFor","ngForOf"],[1,"tb-dashboard-context-menu-items"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click","disabled"],["class","tb-alt-text",4,"ngIf"],[4,"ngIf"],["translate",""],[1,"tb-alt-text"],["matMenuItemIcon","",4,"ngIf"],["matMenuItemIcon",""],[3,"item"],[3,"widgetFullscreenChanged","widgetComponentAction","gridsterItem","widget","dashboardWidgets","dashboardStyle","backgroundImage","isEdit","isEditingWidget","isPreview","isMobile","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","disableWidgetInteraction"]],template:function(N,Z){if(1&N){const Y=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275element(2,"mat-spinner",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",8),t.\u0275\u0275listener("mousedown",function(ce){return t.\u0275\u0275restoreView(Y),t.\u0275\u0275resetView(Z.onDashboardMouseDown(ce))})("tbcontextmenu",function(ce){return t.\u0275\u0275restoreView(Y),t.\u0275\u0275resetView(Z.openDashboardContextMenu(ce))}),t.\u0275\u0275element(4,"div",9,0),t.\u0275\u0275elementStart(6,"mat-menu",null,1),t.\u0275\u0275template(8,ee,2,1,"ng-template",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"div",9,2),t.\u0275\u0275elementStart(11,"mat-menu",null,3),t.\u0275\u0275template(13,$,2,1,"ng-template",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",11)(15,"gridster",12,4),t.\u0275\u0275template(17,be,3,18,"gridster-item",13),t.\u0275\u0275elementEnd()()()}if(2&N){const Y=t.\u0275\u0275reference(7),ge=t.\u0275\u0275reference(12);t.\u0275\u0275styleMap(Z.dashboardStyle),t.\u0275\u0275styleProp("background-image",Z.backgroundImage),t.\u0275\u0275classProp("!hidden",!1===t.\u0275\u0275pipeBind1(1,26,Z.isLoading$)||Z.ignoreLoading||Z.isEdit),t.\u0275\u0275advance(3),t.\u0275\u0275classProp("autofill-height",Z.isAutofillHeight())("center-vertical",Z.centerVertical)("center-horizontal",Z.centerHorizontal),t.\u0275\u0275advance(),t.\u0275\u0275styleProp("left",Z.dashboardMenuPosition.x)("top",Z.dashboardMenuPosition.y),t.\u0275\u0275property("matMenuTriggerFor",Y),t.\u0275\u0275advance(5),t.\u0275\u0275styleProp("left",Z.widgetMenuPosition.x)("top",Z.widgetMenuPosition.y),t.\u0275\u0275property("matMenuTriggerFor",ge),t.\u0275\u0275advance(5),t.\u0275\u0275classMap(Z.dashboardClass),t.\u0275\u0275advance(),t.\u0275\u0275property("options",Z.gridsterOpts),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",Z.dashboardWidgets)}},dependencies:[P.NgForOf,P.NgIf,A.MatIcon,u.MatMenu,u.MatMenuItem,u.MatMenuContent,u.MatMenuTrigger,m.MatProgressSpinner,G.iA,G.Zu,p.Q,v.TranslateDirective,T.TbIconComponent,I.WidgetContainerComponent,P.AsyncPipe,C.KeyboardShortcutPipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-progress-cover[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:6;opacity:1}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]{position:absolute;inset:0;background:none;outline:none;overflow-y:auto}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]   #gridster-background[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]   gridster-item[_ngcontent-%COMP%]{transition:none;overflow:visible;background:none}[_nghost-%COMP%]   .tb-dashboard-content.autofill-height[_ngcontent-%COMP%]{overflow-y:hidden}[_nghost-%COMP%]   .tb-dashboard-content.autofill-height[_ngcontent-%COMP%]   gridster.mobile[_ngcontent-%COMP%]{overflow-y:hidden}[_nghost-%COMP%]   .tb-dashboard-content.center-vertical[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-dashboard-content.center-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .tb-dashboard-content.center-vertical[_ngcontent-%COMP%]   #gridster-child[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-dashboard-content.center-horizontal[_ngcontent-%COMP%]   #gridster-child[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-dashboard-content.center-vertical[_ngcontent-%COMP%]   #gridster-background[_ngcontent-%COMP%]{height:auto;max-height:100%;width:100%}[_nghost-%COMP%]   .tb-dashboard-content.center-horizontal[_ngcontent-%COMP%]   #gridster-background[_ngcontent-%COMP%]{width:auto;max-width:100%;height:100%}[_nghost-%COMP%]   #gridster-child[_ngcontent-%COMP%]{background:none}.tb-dashboard-context-menu-items[_ngcontent-%COMP%]{min-width:256px}'],changeDetection:0})}}(0,e.__decorate)([(0,F.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],Te.prototype,"setGridSize",void 0),(0,e.__decorate)([(0,F.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],Te.prototype,"centerVertical",void 0),(0,e.__decorate)([(0,F.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],Te.prototype,"centerHorizontal",void 0)},98799:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{SelectTargetLayoutDialogComponent:()=>B});var e=n(93953),t=n(56542),c=n(9310),h=n(7901),V=n(34006),S=n(60177),G=n(88834),K=n(99213),H=n(67575),k=n(55911),Q=n(89417),z=n(73955);function L(I,U){1&I&&e.\u0275\u0275element(0,"mat-progress-bar",10)}class B extends t.m{constructor(U,F,a){super(U,F,a),this.store=U,this.router=F,this.dialogRef=a}ngOnInit(){}selectLayout(U){this.dialogRef.close(U)}cancel(){this.dialogRef.close(null)}static{this.\u0275fac=function(F){return new(F||B)(e.\u0275\u0275directiveInject(c.Store),e.\u0275\u0275directiveInject(h.Router),e.\u0275\u0275directiveInject(V.MatDialogRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["tb-select-target-layout-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:20,vars:6,consts:[["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[1,"flex","flex-col","gap-2",3,"disabled"],[1,"flex","flex-row","items-center","justify-start","gap-2"],["mat-raised-button","","color","primary","type","button",1,"tb-layout-button","flex-1",3,"click"],["color","warn","mode","indeterminate"]],template:function(F,a){1&F&&(e.\u0275\u0275elementStart(0,"form")(1,"mat-toolbar",0)(2,"h2",1),e.\u0275\u0275text(3,"layout.select"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",2),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275listener("click",function(){return a.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",4),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,L,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",6)(11,"fieldset",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8)(14,"button",9),e.\u0275\u0275listener("click",function(){return a.selectLayout("main")}),e.\u0275\u0275elementStart(15,"span",1),e.\u0275\u0275text(16,"layout.main"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"button",9),e.\u0275\u0275listener("click",function(){return a.selectLayout("right")}),e.\u0275\u0275elementStart(18,"span",1),e.\u0275\u0275text(19,"layout.right"),e.\u0275\u0275elementEnd()()()()()()),2&F&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,2,a.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,4,a.isLoading$)))},dependencies:[S.NgIf,G.MatButton,G.MatIconButton,K.MatIcon,H.MatProgressBar,k.MatToolbar,V.MatDialogContent,Q.\u0275NgNoValidate,Q.NgControlStatusGroup,Q.NgForm,z.TranslateDirective,S.AsyncPipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 10px;cursor:default;border-radius:5px}[_nghost-%COMP%]   button.tb-layout-button-right[_ngcontent-%COMP%]{border-radius:0 5px 5px 0}[_nghost-%COMP%]   button.tb-layout-button-main[_ngcontent-%COMP%]{border-radius:5px 0 0 5px}[_nghost-%COMP%]     button.tb-layout-button .mdc-button__label{line-height:36px}']})}}},17358:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{SelectTargetStateDialogComponent:()=>O});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(56508),G=n(9310),K=n(7901),H=n(60177),k=n(88834),Q=n(99213),z=n(67575),L=n(53719),B=n(55911),I=n(82798),U=n(73955);function F(P,A){1&P&&e.\u0275\u0275element(0,"mat-progress-bar",15)}function a(P,A){if(1&P&&(e.\u0275\u0275elementStart(0,"mat-option",16),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&P){const u=A.$implicit;e.\u0275\u0275property("value",u.key),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",u.value.name," ")}}class O extends V.m{constructor(A,u,m,p,v,T,C){super(A,u,v),this.store=A,this.router=u,this.data=m,this.errorStateMatcher=p,this.dialogRef=v,this.fb=T,this.dashboardUtils=C,this.submitted=!1,this.states=this.data.states,this.stateFormGroup=this.fb.group({stateId:[this.dashboardUtils.getRootStateId(this.states),[h.Validators.required]]})}ngOnInit(){}isErrorState(A,u){const m=this.errorStateMatcher.isErrorState(A,u),p=!!(A&&A.invalid&&this.submitted);return m||p}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0;const A=this.stateFormGroup.get("stateId").value;this.dialogRef.close(A)}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-select-target-state-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:O}]),e.\u0275\u0275InheritDefinitionFeature],decls:28,vars:22,consts:[[3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[1,"flex","flex-col",3,"disabled"],[1,"mat-block"],["required","","formControlName","stateId"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[3,"value"]],template:function(u,m){1&u&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return m.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3,"dashboard.select-state"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return m.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,F,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",7)(11,"fieldset",8),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"mat-form-field",9)(14,"mat-label",2),e.\u0275\u0275text(15,"dashboard.state"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"mat-select",10),e.\u0275\u0275template(17,a,2,2,"mat-option",11),e.\u0275\u0275pipe(18,"keyvalue"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(19,"div",12)(20,"button",13),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275listener("click",function(){return m.cancel()}),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"button",14),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()()),2&u&&(e.\u0275\u0275property("formGroup",m.stateFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,8,m.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(12,10,m.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(18,12,m.states)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(21,14,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,16,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(25,18,m.isLoading$)||m.stateFormGroup.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,20,"action.select")," "))},dependencies:[H.NgForOf,H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatProgressBar,L.MatFormField,L.MatLabel,B.MatToolbar,c.MatDialogActions,c.MatDialogContent,I.MatSelect,t.MatOption,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,U.TranslateDirective,H.AsyncPipe,H.KeyValuePipe,U.TranslatePipe],encapsulation:2})}}},60563:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DetailsPanelComponent:()=>a});var e=n(31635),t=n(93953),c=n(69749),h=n(29225),V=n(9310),S=n(60177),G=n(88834),K=n(99213),H=n(55911),k=n(14823),Q=n(73955);const z=[[["",8,"prefix-title-buttons"]],[["",8,"header-pane"]],[["",8,"details-buttons"]],"*",[["",8,"search-pane"]]],L=[".prefix-title-buttons",".header-pane",".details-buttons","*",".search-pane"];function B(O,P){if(1&O){const A=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",11)(1,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(A);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onToggleSearch())}),t.\u0275\u0275elementStart(2,"mat-icon",13),t.\u0275\u0275text(3,"arrow_back"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",14),t.\u0275\u0275projection(5,4),t.\u0275\u0275elementEnd()()}if(2&O){const A=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("!hidden",!A.showSearchPane)}}function I(O,P){if(1&O){const A=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(A);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onToggleSearch())}),t.\u0275\u0275elementStart(1,"mat-icon",13),t.\u0275\u0275text(2,"search"),t.\u0275\u0275elementEnd()()}}function U(O,P){if(1&O){const A=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(A);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onCloseDetails())}),t.\u0275\u0275elementStart(1,"mat-icon",13),t.\u0275\u0275text(2,"close"),t.\u0275\u0275elementEnd()()}}function F(O,P){if(1&O){const A=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"section",15)(1,"button",16),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(A);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onApplyDetails())}),t.\u0275\u0275elementStart(4,"mat-icon",13),t.\u0275\u0275text(5,"done"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"button",16),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(A);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onToggleDetailsEditMode())}),t.\u0275\u0275elementStart(9,"mat-icon",13),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()()}if(2&O){const A=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275classProp("tb-hide",!A.isEdit),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,7,"action.apply-changes")),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(3,9,A.isLoading$)||(null==A.theForm?null:A.theForm.invalid)||!(null!=A.theForm&&A.theForm.dirty)),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(7,11,A.isAlwaysEdit||A.isEdit?"action.decline-changes":"details.toggle-edit-mode")),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(8,13,A.isLoading$)||A.isAlwaysEdit&&!(null!=A.theForm&&A.theForm.dirty)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(A.isEdit?"close":"edit")}}class a extends c.H{set theForm(P){this.theFormValue!==P&&(null!==this.formSubscription&&(this.formSubscription.unsubscribe(),this.formSubscription=null),this.theFormValue=P,null!==this.theFormValue&&(this.formSubscription=this.theFormValue.valueChanges.subscribe(()=>this.cd.detectChanges())))}get theForm(){return this.theFormValue}get isEdit(){return this.isAlwaysEdit||this.isEditValue}set isEdit(P){this.isEditValue=P,this.isEditChange.emit(this.isEditValue)}constructor(P,A){super(P),this.store=P,this.cd=A,this.headerHeightPx=100,this.headerTitle="",this.headerSubtitle="",this.isReadOnly=!1,this.isAlwaysEdit=!1,this.isShowSearch=!1,this.backgroundColor="#FFF",this.showCloseDetails=!0,this.formSubscription=null,this.closeDetails=new t.EventEmitter,this.toggleDetailsEditMode=new t.EventEmitter,this.applyDetails=new t.EventEmitter,this.closeSearch=new t.EventEmitter,this.isEditValue=!1,this.showSearchPane=!1,this.isEditChange=new t.EventEmitter}ngOnDestroy(){null!==this.formSubscription&&this.formSubscription.unsubscribe(),super.ngOnDestroy()}onCloseDetails(){this.closeDetails.emit()}onToggleDetailsEditMode(){this.isAlwaysEdit||(this.isEdit=!this.isEdit),this.toggleDetailsEditMode.emit(this.isEditValue)}onApplyDetails(){this.theForm&&this.theForm.valid&&this.applyDetails.emit()}onToggleSearch(){this.showSearchPane=!this.showSearchPane,this.showSearchPane||this.closeSearch.emit()}static{this.\u0275fac=function(A){return new(A||a)(t.\u0275\u0275directiveInject(V.Store),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["tb-details-panel"]],inputs:{headerHeightPx:"headerHeightPx",headerTitle:"headerTitle",headerSubtitle:"headerSubtitle",isReadOnly:"isReadOnly",isAlwaysEdit:"isAlwaysEdit",isShowSearch:"isShowSearch",backgroundColor:"backgroundColor",showCloseDetails:"showCloseDetails",theForm:"theForm",isEdit:"isEdit"},outputs:{closeDetails:"closeDetails",toggleDetailsEditMode:"toggleDetailsEditMode",applyDetails:"applyDetails",closeSearch:"closeSearch",isEditChange:"isEditChange"},features:[t.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:L,decls:19,vars:12,consts:[["color","primary",1,"details-toolbar"],[1,"mat-toolbar-tools","flex","flex-row","items-center","justify-start",2,"height","100%"],[1,"mat-toolbar-tools","tb-details-title-header","flex","flex-1","flex-col","items-start","justify-start"],[1,"tb-details-title","flex","flex-row","items-center","justify-start"],[1,"tb-details-title-text"],[1,"tb-details-subtitle"],[2,"width","100%"],["class","flex flex-row items-center justify-start","style","width: 100%;",3,"!hidden",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["class","layout-wrap tb-header-buttons flex flex-row",4,"ngIf"],[1,"mat-content","flex-1"],[1,"flex","flex-row","items-center","justify-start",2,"width","100%"],["mat-icon-button","",3,"click"],[1,"material-icons"],[2,"width","100%","margin","0 20px"],[1,"layout-wrap","tb-header-buttons","flex","flex-row"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header","mat-fab-bottom-right",3,"click","disabled","matTooltip"]],template:function(A,u){1&A&&(t.\u0275\u0275projectionDef(z),t.\u0275\u0275elementStart(0,"header")(1,"mat-toolbar",0)(2,"div",1)(3,"div",2)(4,"div",3),t.\u0275\u0275projection(5),t.\u0275\u0275elementStart(6,"span",4),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"span",5),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"span",6),t.\u0275\u0275projection(11,1),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(12,B,6,2,"div",7)(13,I,3,0,"button",8),t.\u0275\u0275projection(14,2),t.\u0275\u0275template(15,U,3,0,"button",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,F,11,15,"section",9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",10),t.\u0275\u0275projection(18,3),t.\u0275\u0275elementEnd()),2&A&&(t.\u0275\u0275advance(),t.\u0275\u0275styleProp("height",u.headerHeightPx+"px"),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("!hidden",u.showSearchPane),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(u.headerTitle),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(u.headerSubtitle),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",u.isShowSearch),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",u.isShowSearch&&!u.showSearchPane),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",u.showCloseDetails),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!u.isReadOnly),t.\u0275\u0275advance(),t.\u0275\u0275styleProp("background-color",u.backgroundColor))},dependencies:[S.NgIf,G.MatIconButton,G.MatFabButton,K.MatIcon,H.MatToolbar,k.MatTooltip,S.AsyncPipe,Q.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-toolbar.details-toolbar[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     .mat-toolbar-tools{height:100%;min-height:60px;max-height:120px}[_nghost-%COMP%]     .mat-toolbar-tools.tb-details-title-header{min-width:0;padding:0 16px 0 8px}[_nghost-%COMP%]     .tb-details-title{width:inherit;margin:20px 8px 0 0;font-size:1rem;font-weight:400}@media screen and (min-width: 960px){[_nghost-%COMP%]     .tb-details-title{font-size:1.5rem}}[_nghost-%COMP%]     .tb-details-subtitle{margin:10px 0;font-size:1rem;opacity:.8}[_nghost-%COMP%]     .tb-details-title-text, [_nghost-%COMP%]     .tb-details-subtitle{width:inherit;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     tb-dashboard .tb-dashboard-content{background-color:#cfd8dc!important}']})}}(0,e.__decorate)([(0,h.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],a.prototype,"showCloseDetails",void 0)},36106:(Re,X,n)=>{"use strict";n.d(X,{v:()=>F});var e=n(93953),t=n(49466),c=n(5095),h=n(27997),V=n(84412),S=n(5964),G=n(23294),K=n(88141),H=n(73028),k=n(25967),Q=n(78502),z=n(9310),L=n(73955),B=n(88834),I=n(99213),U=n(89692);class F{set deviceId(O){this.deviceId$.next(O)}constructor(O,P,A,u){this.store=O,this.translate=P,this.deviceService=A,this.cd=u,this.deviceId$=new V.t(null),this.hideButton=!0,this.loading=!1,this.credentialsSubscription=null,this.deviceId$.pipe((0,S.p)(m=>(0,h.f1)(m)&&m.entityType===k.ck.DEVICE),(0,G.F)((m,p)=>m.id===p.id),(0,K.M)(()=>this.loading=!0),(0,H.Z)(m=>this.deviceService.getDeviceCredentials(m.id))).subscribe(m=>{this.processingValue(m),this.loading=!1})}ngOnInit(){this.credentialsSubscription=this.credentials$.pipe((0,S.p)(O=>(0,h.f1)(O)),(0,G.F)((O,P)=>(0,h.n4)(O,P))).subscribe(O=>{this.processingValue(O),this.cd.detectChanges()})}ngOnDestroy(){this.deviceId$.unsubscribe(),null!==this.credentialsSubscription&&this.credentialsSubscription.unsubscribe()}processingValue(O){switch(O.credentialsType){case c.tr.ACCESS_TOKEN:this.hideButton=!1,this.credential=O.credentialsId,this.buttonLabel=this.translate.instant("device.copyAccessToken"),this.tooltipMessage=this.translate.instant("device.accessTokenCopiedMessage");break;case c.tr.MQTT_BASIC:this.hideButton=!1,this.credential=this.convertObjectToString(JSON.parse(O.credentialsValue)),this.buttonLabel=this.translate.instant("device.copy-mqtt-authentication"),this.tooltipMessage=this.translate.instant("device.mqtt-authentication-copied-message");break;default:this.hideButton=!0,this.credential=null,this.buttonLabel="",this.tooltipMessage=""}}convertObjectToString(O){return Object.keys(O).forEach(P=>!O[P]&&void 0!==O[P]&&delete O[P]),JSON.stringify(O).replace(/"([^"]+)":/g,"$1:")}onCopyCredential(){this.store.dispatch(new Q.xo({message:this.tooltipMessage,type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}static{this.\u0275fac=function(P){return new(P||F)(e.\u0275\u0275directiveInject(z.Store),e.\u0275\u0275directiveInject(L.TranslateService),e.\u0275\u0275directiveInject(t.g),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["tb-copy-device-credentials"]],inputs:{deviceId:"deviceId",disabled:"disabled",credentials$:"credentials$"},decls:4,vars:5,consts:[["mat-raised-button","","ngxClipboard","",3,"cbOnSuccess","cbContent","disabled"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(P,A){1&P&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275listener("cbOnSuccess",function(){return A.onCopyCredential()}),e.\u0275\u0275element(1,"mat-icon",1),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&P&&(e.\u0275\u0275classProp("!hidden",A.hideButton),e.\u0275\u0275property("cbContent",A.credential)("disabled",A.disabled||A.loading),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(A.buttonLabel))},dependencies:[B.MatButton,I.MatIcon,U.Uo],encapsulation:2})}}},80328:(Re,X,n)=>{"use strict";n.d(X,{K:()=>a});var e=n(93953),t=n(89417),c=n(91284),h=n(56977),V=n(18530),S=n(60177),G=n(99213),K=n(59042),H=n(53719),k=n(37403),Q=n(82798),z=n(86600),L=n(14823),B=n(73955);function I(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&O){const A=P.$implicit,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",A),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",u.lwm2mSecurityTypeTranslationMap.get(A)," ")}}function U(O,P){1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.lwm2m-security-config.client-publicKey-or-id-required")," "))}function F(O,P){1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.lwm2m-security-config.client-secret-key-required")," "))}class a{constructor(P){this.fb=P,this.securityConfigLwM2MType=c.Km,this.securityConfigLwM2MTypes=Object.values(c.Km),this.lwm2mSecurityTypeTranslationMap=c.dh,this.publicKeyOrIdTooltipNamesMap=c.fJ,this.clientSecretKeyTooltipNamesMap=c.lV,this.destroy$=new V.B,this.propagateChange=A=>{},this.setValidatorsSecurity=()=>{const A=[t.Validators.required],u=[t.Validators.required];this.serverFormGroup.get("clientPublicKeyOrId").setValidators(u),this.serverFormGroup.get("clientSecretKey").setValidators(A),this.serverFormGroup.get("clientPublicKeyOrId").enable({emitEvent:!1}),this.serverFormGroup.get("clientSecretKey").enable()},this.serverFormGroup=this.fb.group({securityMode:[c.Km.NO_SEC],clientPublicKeyOrId:[""],clientSecretKey:[""]}),this.serverFormGroup.get("securityMode").valueChanges.pipe((0,h.Q)(this.destroy$)).subscribe(A=>{this.updateValidate(A)}),this.serverFormGroup.valueChanges.pipe((0,h.Q)(this.destroy$)).subscribe(A=>{this.propagateChange(A)})}writeValue(P){P&&this.updateValueFields(P)}registerOnChange(P){this.propagateChange=P}registerOnTouched(P){}setDisabledState(P){P?this.serverFormGroup.disable({emitEvent:!1}):this.serverFormGroup.enable({emitEvent:!1})}validate(P){return this.serverFormGroup.valid?null:{securityConfig:{valid:!1}}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateValueFields(P){this.serverFormGroup.patchValue(P,{emitEvent:!1}),this.updateValidate(P.securityMode,!0)}updateValidate(P,A=!1){switch(P){case c.Km.NO_SEC:this.serverFormGroup.get("clientPublicKeyOrId").clearValidators(),this.serverFormGroup.get("clientSecretKey").clearValidators(),this.serverFormGroup.get("clientPublicKeyOrId").disable({emitEvent:!1}),this.serverFormGroup.get("clientSecretKey").disable();break;case c.Km.PSK:case c.Km.RPK:case c.Km.X509:this.setValidatorsSecurity()}this.serverFormGroup.get("clientPublicKeyOrId").updateValueAndValidity({emitEvent:!1}),this.serverFormGroup.get("clientSecretKey").updateValueAndValidity({emitEvent:!A})}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-device-credentials-lwm2m-server"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>a),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>a),multi:!0}])],decls:27,vars:18,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","securityMode"],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-primary",2,"cursor","pointer",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","clientPublicKeyOrId","required",""],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","clientSecretKey","required",""],[3,"value"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),e.\u0275\u0275text(3,"device.lwm2m-security-config.mode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",3),e.\u0275\u0275template(5,I,2,2,"mat-option",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div")(7,"mat-form-field",1)(8,"mat-label"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-icon",5),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275text(13,"help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"textarea",6),e.\u0275\u0275text(15,"      "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,U,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-form-field",1)(18,"mat-label"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"mat-icon",5),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275text(23,"help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"textarea",8),e.\u0275\u0275text(25,"      "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,F,3,3,"mat-error",7),e.\u0275\u0275elementEnd()()()),2&A&&(e.\u0275\u0275property("formGroup",u.serverFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",u.securityConfigLwM2MTypes),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",u.serverFormGroup.get("securityMode").value===u.securityConfigLwM2MType.NO_SEC),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,10,"device.lwm2m-security-config.client-publicKey-or-id")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(12,12,u.publicKeyOrIdTooltipNamesMap.get(u.serverFormGroup.get("securityMode").value))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",u.serverFormGroup.get("clientPublicKeyOrId").hasError("required")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,14,"device.lwm2m-security-config.client-secret-key")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(22,16,u.clientSecretKeyTooltipNamesMap.get(u.serverFormGroup.get("securityMode").value))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",u.serverFormGroup.get("clientSecretKey").hasError("required")))},dependencies:[S.NgForOf,S.NgIf,G.MatIcon,K.MatInput,H.MatFormField,H.MatLabel,H.MatError,H.MatSuffix,k.xb,Q.MatSelect,z.MatOption,L.MatTooltip,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,B.TranslateDirective,B.TranslatePipe],encapsulation:2})}}},29508:(Re,X,n)=>{"use strict";n.d(X,{L:()=>E});var e=n(93953),t=n(89417),c=n(91284),h=n(18530),V=n(56977),S=n(27997),G=n(60177),K=n(99213),H=n(59042),k=n(53719),Q=n(37403),z=n(82798),L=n(86600),B=n(14823),I=n(96850),U=n(9454),F=n(73955),a=n(80328);function O(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.lwm2m-security-config.endpoint-required")," "))}function P(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",13),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",b.credentialTypeLwM2MNamesMap.get(b.securityConfigLwM2MType[y])," ")}}function A(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.lwm2m-security-config.identity-required")," "))}function u(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-icon",14),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275text(6,"help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",15),e.\u0275\u0275template(8,A,3,3,"mat-error",6),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"device.lwm2m-security-config.identity")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(5,5,"device.lwm2m-security-config.identity-tooltip")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",y.lwm2mConfigFormGroup.get("client.identity").hasError("required"))}}function m(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.lwm2m-security-config.client-key-required")," "))}function p(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-icon",14),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275text(6,"help"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"textarea",16),e.\u0275\u0275text(8,"        "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,m,3,3,"mat-error",6),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"device.lwm2m-security-config.client-key")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(5,5,y.clientKeyTooltipNamesMap.get(y.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",y.lwm2mConfigFormGroup.get("client.key").hasError("required"))}}function v(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-icon",14),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2,"help"),e.\u0275\u0275elementEnd()),2&f&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device.lwm2m-security-config.client-public-key-tooltip"))}function T(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label",4),e.\u0275\u0275text(2,"device.lwm2m-security-config.client-public-key"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,v,3,3,"mat-icon",17),e.\u0275\u0275elementStart(4,"textarea",18),e.\u0275\u0275text(5,"        "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-hint",4),e.\u0275\u0275text(7,"device.lwm2m-security-config.client-public-key-hint"),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",y.lwm2mConfigFormGroup.get("client.cert").value)}}function C(f,g){1&f&&e.\u0275\u0275element(0,"tb-device-credentials-lwm2m-server",19)}function _(f,g){1&f&&e.\u0275\u0275element(0,"tb-device-credentials-lwm2m-server",20)}class E{constructor(g){this.fb=g,this.securityConfigLwM2MType=c.Km,this.securityConfigLwM2MTypes=Object.keys(c.Km),this.credentialTypeLwM2MNamesMap=c.dh,this.clientKeyTooltipNamesMap=c.Zj,this.destroy$=new h.B,this.propagateChange=y=>{},this.securityConfigClientUpdateValidators=y=>{switch(y){case c.Km.NO_SEC:this.setValidatorsNoSecX509(),this.lwm2mConfigFormGroup.get("client.cert").disable({emitEvent:!1});break;case c.Km.X509:this.setValidatorsNoSecX509(),this.lwm2mConfigFormGroup.get("client.cert").enable({emitEvent:!1});break;case c.Km.PSK:this.setValidatorsPskRpk(y),this.lwm2mConfigFormGroup.get("client.identity").enable({emitEvent:!1});break;case c.Km.RPK:this.setValidatorsPskRpk(y),this.lwm2mConfigFormGroup.get("client.identity").disable({emitEvent:!1})}this.lwm2mConfigFormGroup.get("client.identity").updateValueAndValidity({emitEvent:!1}),this.lwm2mConfigFormGroup.get("client.key").updateValueAndValidity({emitEvent:!1})},this.setValidatorsNoSecX509=()=>{this.lwm2mConfigFormGroup.get("client.identity").clearValidators(),this.lwm2mConfigFormGroup.get("client.key").clearValidators(),this.lwm2mConfigFormGroup.get("client.identity").disable({emitEvent:!1}),this.lwm2mConfigFormGroup.get("client.key").disable({emitEvent:!1})},this.setValidatorsPskRpk=y=>{y===c.Km.PSK?this.lwm2mConfigFormGroup.get("client.identity").setValidators([t.Validators.required]):this.lwm2mConfigFormGroup.get("client.identity").clearValidators(),this.lwm2mConfigFormGroup.get("client.key").setValidators([t.Validators.required]),this.lwm2mConfigFormGroup.get("client.key").enable({emitEvent:!1}),this.lwm2mConfigFormGroup.get("client.cert").disable({emitEvent:!1})},this.initLwm2mConfigForm=()=>{const y=this.fb.group({client:this.fb.group({endpoint:["",t.Validators.required],securityConfigClientMode:[c.Km.NO_SEC],identity:[{value:"",disabled:!0}],key:[{value:"",disabled:!0}],cert:[{value:"",disabled:!0}]}),bootstrap:this.fb.group({bootstrapServer:[(0,c.L0)()],lwm2mServer:[(0,c.L0)()]})});return y.get("client.securityConfigClientMode").valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(b=>{this.securityConfigClientModeChanged(b)}),y.valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(b=>{this.propagateChange(JSON.stringify(b))}),y},this.lwm2mConfigFormGroup=this.initLwm2mConfigForm()}writeValue(g){(0,S.f1)(g)&&this.initClientSecurityConfig(JSON.parse(g))}registerOnChange(g){this.propagateChange=g}registerOnTouched(g){}setDisabledState(g){g?this.lwm2mConfigFormGroup.disable({emitEvent:!1}):(this.lwm2mConfigFormGroup.enable({emitEvent:!1}),this.securityConfigClientUpdateValidators(this.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value))}validate(){return this.lwm2mConfigFormGroup.valid?null:{securityConfigLWm2m:!1}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initClientSecurityConfig(g){this.lwm2mConfigFormGroup.patchValue(g,{emitEvent:!1}),this.securityConfigClientUpdateValidators(g.client.securityConfigClientMode)}securityConfigClientModeChanged(g){const y=(0,c.t1)(g,this.lwm2mConfigFormGroup.get("client.endpoint").value);switch(g){case c.Km.PSK:case c.Km.RPK:y.key=this.lwm2mConfigFormGroup.get("client.key").value}this.lwm2mConfigFormGroup.get("client").reset(y,{emitEvent:!1}),this.securityConfigClientUpdateValidators(g)}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-device-credentials-lwm2m"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>E),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>E),multi:!0}])],decls:33,vars:18,consts:[[3,"formGroup"],[3,"label"],["formGroupName","client"],[1,"mat-block"],["translate",""],["matInput","","type","text","formControlName","endpoint","required",""],[4,"ngIf"],["formControlName","securityConfigClientMode"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block",4,"ngIf"],["formGroupName","bootstrap",2,"padding","2px"],["multi","true",1,"mat-body-2"],["matExpansionPanelContent",""],[3,"value"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-primary",2,"cursor","pointer",3,"matTooltip"],["matInput","","type","text","formControlName","identity","required",""],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","key","required",""],["class","mat-primary","aria-hidden","false","aria-label","help-icon","matSuffix","","style","cursor:pointer;",3,"matTooltip",4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","cert"],["formControlName","bootstrapServer"],["formControlName","lwm2mServer"]],template:function(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-tab-group",0)(1,"mat-tab",1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementContainerStart(3,2),e.\u0275\u0275elementStart(4,"mat-form-field",3)(5,"mat-label",4),e.\u0275\u0275text(6,"device.lwm2m-security-config.endpoint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"input",5),e.\u0275\u0275template(8,O,3,3,"mat-error",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",3)(10,"mat-label",4),e.\u0275\u0275text(11,"device.lwm2m-security-config.mode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",7),e.\u0275\u0275template(13,P,2,2,"mat-option",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,u,9,7,"mat-form-field",9)(15,p,10,7,"mat-form-field",9)(16,T,8,1,"mat-form-field",9),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-tab",1),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementStart(19,"div",10)(20,"mat-accordion",11)(21,"mat-expansion-panel")(22,"mat-expansion-panel-header")(23,"mat-panel-title"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(26,C,1,0,"ng-template",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"mat-expansion-panel")(28,"mat-expansion-panel-header")(29,"mat-panel-title"),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,_,1,0,"ng-template",12),e.\u0275\u0275elementEnd()()()()()),2&y&&(e.\u0275\u0275property("formGroup",b.lwm2mConfigFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(2,10,"device.lwm2m-security-config.client-tab")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",b.lwm2mConfigFormGroup.get("client.endpoint").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",b.securityConfigLwM2MTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===b.securityConfigLwM2MType.PSK),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===b.securityConfigLwM2MType.RPK||b.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===b.securityConfigLwM2MType.PSK),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===b.securityConfigLwM2MType.X509),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(18,12,"device.lwm2m-security-config.bootstrap-tab")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,14,"device.lwm2m-security-config.bootstrap-server")," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,16,"device.lwm2m-security-config.lwm2m-server")," "))},dependencies:[G.NgForOf,G.NgIf,K.MatIcon,H.MatInput,k.MatFormField,k.MatLabel,k.MatHint,k.MatError,k.MatSuffix,Q.xb,z.MatSelect,L.MatOption,B.MatTooltip,I.MatTab,I.MatTabGroup,U.MatAccordion,U.MatExpansionPanel,U.MatExpansionPanelHeader,U.MatExpansionPanelTitle,U.MatExpansionPanelContent,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,F.TranslateDirective,a.K,F.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%]{min-height:330px}[_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{min-height:200px}[_nghost-%COMP%]     .mat-mdc-tab-body{padding:16px 0}']})}}},59754:(Re,X,n)=>{"use strict";n.d(X,{A:()=>C});var e=n(93953),t=n(89417),c=n(18530),h=n(56977),V=n(27997),S=n(60177),G=n(50931),K=n(88834),H=n(99213),k=n(59042),Q=n(53719),z=n(14823),L=n(73955),B=n(9361),I=n(19267);function U(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(f);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.generate("clientId"))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"autorenew"),e.\u0275\u0275elementEnd()()}2&_&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device.generate-client-id"))}function F(_,E){if(1&_&&(e.\u0275\u0275element(0,"tb-copy-button",15),e.\u0275\u0275pipe(1,"translate")),2&_){const f=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(1,2,"device.copy-client-id")),e.\u0275\u0275property("copyText",f.deviceCredentialsMqttFormGroup.get("clientId").value)}}function a(_,E){if(1&_&&e.\u0275\u0275template(0,F,2,4,"tb-copy-button",14),2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",f.deviceCredentialsMqttFormGroup.get("clientId").value)}}function O(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.client-id-pattern")," "))}function P(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(f);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.generate("userName"))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"autorenew"),e.\u0275\u0275elementEnd()()}2&_&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device.generate-user-name"))}function A(_,E){if(1&_&&(e.\u0275\u0275element(0,"tb-copy-button",15),e.\u0275\u0275pipe(1,"translate")),2&_){const f=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(1,2,"device.copy-user-name")),e.\u0275\u0275property("copyText",f.deviceCredentialsMqttFormGroup.get("userName").value)}}function u(_,E){if(1&_&&e.\u0275\u0275template(0,A,2,4,"tb-copy-button",14),2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",f.deviceCredentialsMqttFormGroup.get("userName").value)}}function m(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.user-name-required")," "))}function p(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(f);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.generate("password"))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"autorenew"),e.\u0275\u0275elementEnd()()}2&_&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device.generate-password"))}function v(_,E){if(1&_&&(e.\u0275\u0275element(0,"tb-copy-button",15),e.\u0275\u0275pipe(1,"translate")),2&_){const f=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(1,2,"device.copy-password")),e.\u0275\u0275property("copyText",f.deviceCredentialsMqttFormGroup.get("password").value)}}function T(_,E){if(1&_&&e.\u0275\u0275template(0,v,2,4,"tb-copy-button",14),2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",f.deviceCredentialsMqttFormGroup.get("password").value)}}class C{constructor(E){this.fb=E,this.destroy$=new c.B,this.propagateChange=f=>{},this.deviceCredentialsMqttFormGroup=this.fb.group({clientId:[null],userName:[null],password:[null]},{validators:this.atLeastOne(t.Validators.required,["clientId","userName"])}),this.deviceCredentialsMqttFormGroup.valueChanges.pipe((0,h.Q)(this.destroy$)).subscribe(f=>{this.updateView(f)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(E){this.propagateChange=E}registerOnTouched(E){}setDisabledState(E){this.disabled=E,this.disabled?this.deviceCredentialsMqttFormGroup.disable({emitEvent:!1}):this.deviceCredentialsMqttFormGroup.enable({emitEvent:!1})}validate(){return this.deviceCredentialsMqttFormGroup.valid?null:{deviceCredentialsMqttBasic:!1}}writeValue(E){if((0,V.f1)(E)&&!(0,V.Qb)(E)){const f=JSON.parse(E);this.deviceCredentialsMqttFormGroup.patchValue(f,{emitEvent:!1})}}updateView(E){const f=JSON.stringify(E);this.propagateChange(f)}passwordChanged(){""!==this.deviceCredentialsMqttFormGroup.get("password").value?this.deviceCredentialsMqttFormGroup.get("userName").setValidators([t.Validators.required]):this.deviceCredentialsMqttFormGroup.get("userName").setValidators([]),this.deviceCredentialsMqttFormGroup.get("userName").updateValueAndValidity({emitEvent:!1})}atLeastOne(E,f=null){return g=>(f||(f=Object.keys(g.controls)),g?.controls&&f.some(b=>!E(g.controls[b]))?null:{atLeastOne:!0})}generate(E){this.deviceCredentialsMqttFormGroup.get(E).patchValue((0,V.Kl)(20))}static{this.\u0275fac=function(f){return new(f||C)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["tb-device-credentials-mqtt-basic"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>C),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>C),multi:!0}])],decls:27,vars:13,consts:[["copyClientId",""],["copyUserName",""],["copyPassword",""],[3,"formGroup"],[1,"mat-block"],["translate",""],["matInput","","formControlName","clientId"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf","ngIfElse"],[4,"ngIf"],["matInput","","formControlName","userName",3,"required"],["matInput","","formControlName","password","autocomplete","new-password","type","password",3,"ngModelChange"],["matSuffix",""],[2,"margin-top","-12px","display","block",3,"error"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"click","matTooltip"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText",4,"ngIf"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText"]],template:function(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",3)(1,"mat-form-field",4)(2,"mat-label",5),e.\u0275\u0275text(3,"device.client-id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",6),e.\u0275\u0275template(5,U,4,3,"button",7)(6,a,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)(8,O,3,3,"mat-error",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",4)(10,"mat-label",5),e.\u0275\u0275text(11,"device.user-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",9),e.\u0275\u0275template(13,P,4,3,"button",7)(14,u,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(16,m,3,3,"mat-error",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-form-field",4)(18,"mat-label",5),e.\u0275\u0275text(19,"device.password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"input",10),e.\u0275\u0275listener("ngModelChange",function(){return e.\u0275\u0275restoreView(y),e.\u0275\u0275resetView(g.passwordChanged())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"tb-toggle-password",11),e.\u0275\u0275template(22,p,4,3,"button",7)(23,T,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"tb-error",12),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275elementEnd()}if(2&f){const y=e.\u0275\u0275reference(7),b=e.\u0275\u0275reference(15),D=e.\u0275\u0275reference(24);e.\u0275\u0275property("formGroup",g.deviceCredentialsMqttFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!g.deviceCredentialsMqttFormGroup.get("clientId").value&&!g.disabled)("ngIfElse",y),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",g.deviceCredentialsMqttFormGroup.get("clientId").hasError("pattern")),e.\u0275\u0275advance(4),e.\u0275\u0275property("required",!!g.deviceCredentialsMqttFormGroup.get("password").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!g.deviceCredentialsMqttFormGroup.get("userName").value&&!g.disabled)("ngIfElse",b),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",g.deviceCredentialsMqttFormGroup.get("userName").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!g.deviceCredentialsMqttFormGroup.get("password").value&&!g.disabled)("ngIfElse",D),e.\u0275\u0275advance(3),e.\u0275\u0275property("error",g.deviceCredentialsMqttFormGroup.hasError("atLeastOne")?e.\u0275\u0275pipeBind1(26,11,"device.client-id-or-user-name-necessary"):"")}},dependencies:[S.NgIf,G.TbErrorComponent,K.MatIconButton,H.MatIcon,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatError,Q.MatSuffix,z.MatTooltip,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,L.TranslateDirective,B.CopyButtonComponent,I.TogglePasswordComponent,L.TranslatePipe],encapsulation:2})}}},86508:(Re,X,n)=>{"use strict";n.d(X,{g:()=>b});var e=n(31635),t=n(93953),c=n(89417),h=n(5095),V=n(18530),S=n(56977),G=n(27997),K=n(29225),H=n(60177),k=n(88834),Q=n(99213),z=n(59042),L=n(53719),B=n(14823),I=n(73955),U=n(9361),F=n(29772),a=n(18409),O=n(29508),P=n(59754);function A(D,w){if(1&D&&(t.\u0275\u0275elementStart(0,"tb-toggle-option",8),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&D){const ee=w.$implicit,_e=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",ee),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",_e.credentialTypeNamesMap.get(ee)," ")}}function u(D,w){if(1&D){const ee=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ee);const ve=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(ve.generate("credentialsId"))}),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"autorenew"),t.\u0275\u0275elementEnd()()}2&D&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device.generate-access-token"))}function m(D,w){if(1&D&&(t.\u0275\u0275element(0,"tb-copy-button",16),t.\u0275\u0275pipe(1,"translate")),2&D){const ee=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("tooltipText",t.\u0275\u0275pipeBind1(1,2,"device.copy-access-token")),t.\u0275\u0275property("copyText",ee.deviceCredentialsFormGroup.get("credentialsId").value)}}function p(D,w){if(1&D&&t.\u0275\u0275template(0,m,2,4,"tb-copy-button",15),2&D){const ee=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngIf",ee.deviceCredentialsFormGroup.get("credentialsId").value)}}function v(D,w){1&D&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&D&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device.access-token-required")," "))}function T(D,w){1&D&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&D&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device.access-token-invalid")," "))}function C(D,w){if(1&D&&(t.\u0275\u0275elementStart(0,"mat-form-field",9)(1,"mat-label",10),t.\u0275\u0275text(2,"device.access-token"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",11),t.\u0275\u0275template(4,u,4,3,"button",12)(5,p,1,1,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)(7,v,3,3,"mat-error",13)(8,T,3,3,"mat-error",13),t.\u0275\u0275elementEnd()),2&D){const ee=t.\u0275\u0275reference(6),_e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!_e.deviceCredentialsFormGroup.get("credentialsId").value&&!_e.disabled)("ngIfElse",ee),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",_e.deviceCredentialsFormGroup.get("credentialsId").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",_e.deviceCredentialsFormGroup.get("credentialsId").hasError("pattern"))}}function _(D,w){if(1&D&&(t.\u0275\u0275element(0,"tb-copy-button",16),t.\u0275\u0275pipe(1,"translate")),2&D){const ee=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("tooltipText",t.\u0275\u0275pipeBind1(1,2,"device.copy-certificate")),t.\u0275\u0275property("copyText",ee.deviceCredentialsFormGroup.get("credentialsValue").value)}}function E(D,w){1&D&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&D&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device.certificate-pem-format-required")," "))}function f(D,w){if(1&D&&(t.\u0275\u0275elementStart(0,"mat-form-field",9)(1,"mat-label",10),t.\u0275\u0275text(2,"device.certificate-pem-format"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"textarea",17),t.\u0275\u0275template(4,_,2,4,"tb-copy-button",15)(5,E,3,3,"mat-error",13),t.\u0275\u0275elementEnd()),2&D){const ee=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",ee.deviceCredentialsFormGroup.get("credentialsValue").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ee.deviceCredentialsFormGroup.get("credentialsValue").hasError("required"))}}function g(D,w){1&D&&t.\u0275\u0275element(0,"tb-device-credentials-mqtt-basic",18)}function y(D,w){1&D&&t.\u0275\u0275element(0,"tb-device-credentials-lwm2m",18)}class b{get deviceTransportType(){return this.deviceTransportTypeValue}set deviceTransportType(w){if(w){this.deviceTransportTypeValue=w,this.credentialsTypes=h.Js.get(w);const ee=this.deviceCredentialsFormGroup.get("credentialsType").value;this.credentialsTypes.includes(ee)||this.deviceCredentialsFormGroup.get("credentialsType").patchValue(this.credentialsTypes[0],{onlySelf:!0})}}constructor(w){this.fb=w,this.deviceTransportTypeValue=h.y0.DEFAULT,this.initAccessToken=!1,this.destroy$=new V.B,this.deviceCredentialsType=h.tr,this.credentialsTypes=h.Js.get(h.y0.DEFAULT),this.credentialTypeNamesMap=h.QP,this.propagateChange=null,this.propagateChangePending=!1,this.deviceCredentialsFormGroup=this.fb.group({credentialsType:[h.tr.ACCESS_TOKEN],credentialsId:[null],credentialsValue:[null]}),this.deviceCredentialsFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>{this.updateView()}),this.deviceCredentialsFormGroup.get("credentialsType").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(ee=>{this.credentialsTypeChanged(ee)})}ngOnInit(){this.disabled&&this.deviceCredentialsFormGroup.disable({emitEvent:!1}),this.initAccessToken&&!this.deviceCredentialsFormGroup.get("credentialsId").value&&this.deviceCredentialsFormGroup.get("credentialsType").value===h.tr.ACCESS_TOKEN&&this.deviceCredentialsFormGroup.get("credentialsId").patchValue((0,G.Kl)(20))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(w){if((0,G.f1)(w)){const ee=this.credentialsTypes.includes(w.credentialsType)?w.credentialsType:this.credentialsTypes[0];this.deviceCredentialsFormGroup.patchValue({credentialsType:ee,credentialsId:w.credentialsId,credentialsValue:w.credentialsValue},{emitEvent:!1}),this.updateValidators()}}updateView(){const w=this.deviceCredentialsFormGroup.value;this.propagateChange?this.propagateChange(w):this.propagateChangePending=!0}registerOnChange(w){this.propagateChange=w,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(()=>{this.updateView()},0))}registerOnTouched(w){}setDisabledState(w){this.disabled=w,this.disabled?this.deviceCredentialsFormGroup.disable({emitEvent:!1}):(this.deviceCredentialsFormGroup.enable({emitEvent:!1}),this.updateValidators())}validate(w){return this.deviceCredentialsFormGroup.valid?null:{deviceCredentials:{valid:!1}}}credentialsTypeChanged(w){this.deviceCredentialsFormGroup.patchValue({credentialsId:null,credentialsValue:null}),this.updateValidators(),w===h.tr.ACCESS_TOKEN&&this.initAccessToken&&this.deviceCredentialsFormGroup.get("credentialsId").patchValue((0,G.Kl)(20))}updateValidators(){if(this.deviceCredentialsFormGroup.get("credentialsType").value===h.tr.ACCESS_TOKEN)this.deviceCredentialsFormGroup.get("credentialsId").setValidators([c.Validators.required,c.Validators.pattern(/^.{1,32}$/)]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1});else this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([c.Validators.required]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsId").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1})}generate(w){this.deviceCredentialsFormGroup.get(w).patchValue((0,G.Kl)(20))}static{this.\u0275fac=function(ee){return new(ee||b)(t.\u0275\u0275directiveInject(c.FormBuilder))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:b,selectors:[["tb-device-credentials"]],inputs:{disabled:"disabled",deviceTransportType:"deviceTransportType",initAccessToken:"initAccessToken"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>b),multi:!0},{provide:c.NG_VALIDATORS,useExisting:(0,t.forwardRef)(()=>b),multi:!0}])],decls:11,vars:9,consts:[["copyAccessToken",""],[3,"formGroup"],[2,"margin-bottom","16px"],["translate","",1,"tb-type-title"],["formControlName","credentialsType","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],[1,"mat-block"],["translate",""],["matInput","","formControlName","credentialsId","required",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf","ngIfElse"],[4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Generate","matTooltipPosition","above",3,"click","matTooltip"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText",4,"ngIf"],["matSuffix","","miniButton","false","tooltipPosition","above","icon","content_copy",3,"copyText","tooltipText"],["matInput","","formControlName","credentialsValue","cols","15","rows","5","required",""],["formControlName","credentialsValue"]],template:function(ee,_e){1&ee&&(t.\u0275\u0275elementStart(0,"section",1)(1,"section",2)(2,"div",3),t.\u0275\u0275text(3,"device.credentials-type"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"tb-toggle-select",4),t.\u0275\u0275template(5,A,2,2,"tb-toggle-option",5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",6),t.\u0275\u0275template(7,C,9,4,"ng-template",7)(8,f,6,2,"ng-template",7)(9,g,1,0,"ng-template",7)(10,y,1,0,"ng-template",7),t.\u0275\u0275elementEnd()()),2&ee&&(t.\u0275\u0275property("formGroup",_e.deviceCredentialsFormGroup),t.\u0275\u0275advance(),t.\u0275\u0275classProp("!hidden",!((null==_e.credentialsTypes?null:_e.credentialsTypes.length)>1)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngForOf",_e.credentialsTypes),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitch",_e.deviceCredentialsFormGroup.get("credentialsType").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",_e.deviceCredentialsType.ACCESS_TOKEN),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",_e.deviceCredentialsType.X509_CERTIFICATE),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",_e.deviceCredentialsType.MQTT_BASIC),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",_e.deviceCredentialsType.LWM2M_CREDENTIALS))},dependencies:[H.NgForOf,H.NgIf,H.NgSwitch,H.NgSwitchCase,k.MatIconButton,Q.MatIcon,z.MatInput,L.MatFormField,L.MatLabel,L.MatError,L.MatSuffix,B.MatTooltip,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,I.TranslateDirective,U.CopyButtonComponent,F.ToggleOption,a.ToggleSelectComponent,O.L,P.A,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-type-title[_ngcontent-%COMP%]{font-size:12px;line-height:16px;letter-spacing:.25px;margin-bottom:8px}']})}}(0,e.__decorate)([(0,K.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],b.prototype,"initAccessToken",void 0)},15003:(Re,X,n)=>{"use strict";n.d(X,{R:()=>H});var e=n(93953),t=n(60177),c=n(19440),h=n(36106),V=n(86508),S=n(29508),G=n(80328),K=n(59754);class H{static{this.\u0275fac=function(z){return new(z||H)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:H})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[t.CommonModule,c.G]})}}(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(H,{declarations:[h.v,V.g,S.L,G.K,K.A],imports:[t.CommonModule,c.G],exports:[h.v,V.g,S.L,G.K,K.A]})},66951:(Re,X,n)=>{"use strict";n.d(X,{S:()=>C});var e=n(31635),t=n(93953),c=n(89417),h=n(29225),V=n(47987),S=n(76939),G=n(27997),K=n(14246),H=n(73955),k=n(60177),Q=n(88834),z=n(99213),L=n(53719),B=n(82798),I=n(86600),U=n(14823),F=n(19325);const a=["deviceFilterPanel"];function O(_,E){1&_&&t.\u0275\u0275elementContainer(0)}function P(_,E){if(1&_&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,O,1,0,"ng-container",4),t.\u0275\u0275elementContainerEnd()),2&_){t.\u0275\u0275nextContext();const f=t.\u0275\u0275reference(4);t.\u0275\u0275advance(),t.\u0275\u0275property("ngTemplateOutlet",f)}}function A(_,E){if(1&_){const f=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"button",5),t.\u0275\u0275listener("click",function(y){t.\u0275\u0275restoreView(f);const b=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(b.toggleDeviceFilterPanel(y))}),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"filter_list"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&_){const f=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("matTooltip",f.buttonDisplayValue),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",f.buttonDisplayValue," ")}}function u(_,E){if(1&_&&t.\u0275\u0275template(0,A,5,2,"ng-container",3),2&_){const f=t.\u0275\u0275nextContext(),g=t.\u0275\u0275reference(6);t.\u0275\u0275property("ngIf",f.buttonMode)("ngIfElse",g)}}function m(_,E){1&_&&t.\u0275\u0275elementContainer(0)}function p(_,E){if(1&_){const f=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",6),t.\u0275\u0275listener("ngSubmit",function(){t.\u0275\u0275restoreView(f);const y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(y.update())}),t.\u0275\u0275template(1,m,1,0,"ng-container",4),t.\u0275\u0275elementStart(2,"div",7)(3,"button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(f);const y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(y.cancel())}),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",9),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()()}if(2&_){const f=t.\u0275\u0275nextContext(),g=t.\u0275\u0275reference(6);t.\u0275\u0275advance(),t.\u0275\u0275property("ngTemplateOutlet",g),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"action.cancel")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",f.deviceInfoFilterForm.invalid||!f.deviceInfoFilterForm.dirty),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,6,"action.update")," ")}}function v(_,E){if(1&_){const f=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"tb-device-profile-autocomplete",11),t.\u0275\u0275listener("deviceProfileChanged",function(y){t.\u0275\u0275restoreView(f);const b=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(b.deviceProfileChanged(y))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"mat-form-field")(3,"mat-label",12),t.\u0275\u0275text(4,"device.device-state"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",13)(6,"mat-option",14),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"mat-option",15),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"mat-option",15),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()()()()}if(2&_){const f=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",f.deviceInfoFilterForm),t.\u0275\u0275advance(),t.\u0275\u0275property("displayAllOnEmpty",!0)("editProfileEnabled",!1)("addNewProfile",!1),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,9,"device.any")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",!0),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,11,"device.active")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",!1),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,13,"device.inactive")," ")}}const T=new t.InjectionToken("DeviceFilterConfigData");class C{constructor(E,f,g,y,b,D,w,ee,_e){this.data=E,this.overlayRef=f,this.fb=g,this.translate=y,this.overlay=b,this.nativeElement=D,this.viewContainerRef=w,this.deviceProfileService=ee,this.cd=_e,this.buttonMode=!0,this.panelMode=!1,this.buttonDisplayValue=this.translate.instant("device.device-filter"),this.panelResult=null,this.propagateChange=ve=>{}}ngOnInit(){this.data&&(this.panelMode=this.data.panelMode,this.deviceInfoFilter=this.data.deviceInfoFilter),this.deviceInfoFilterForm=this.fb.group({deviceProfileId:[null,[]],active:["",[]]}),this.deviceInfoFilterForm.valueChanges.subscribe(()=>{this.updateValidators(),this.buttonMode||this.deviceFilterUpdated(this.deviceInfoFilterForm.value)}),this.panelMode&&this.updateDeviceInfoFilterForm(this.deviceInfoFilter)}ngOnDestroy(){}registerOnChange(E){this.propagateChange=E}registerOnTouched(E){}setDisabledState(E){this.disabled=E,this.disabled?this.deviceInfoFilterForm.disable({emitEvent:!1}):(this.deviceInfoFilterForm.enable({emitEvent:!1}),this.updateValidators())}writeValue(E){this.deviceInfoFilter=E,this.updateButtonDisplayValue(),this.updateDeviceInfoFilterForm(E)}updateValidators(){}toggleDeviceFilterPanel(E){E&&E.stopPropagation();const f=new V.OverlayConfig({panelClass:"tb-filter-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0,maxHeight:"80vh",height:"min-content",minWidth:""});f.hasBackdrop=!0;f.positionStrategy=this.overlay.position().flexibleConnectedTo(this.nativeElement).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]),this.deviceFilterOverlayRef=this.overlay.create(f),this.deviceFilterOverlayRef.backdropClick().subscribe(()=>{this.deviceFilterOverlayRef.dispose()}),this.deviceFilterOverlayRef.attach(new S.TemplatePortal(this.deviceFilterPanel,this.viewContainerRef))}cancel(){this.updateDeviceInfoFilterForm(this.deviceInfoFilter),this.overlayRef?this.overlayRef.dispose():this.deviceFilterOverlayRef.dispose()}update(){this.deviceFilterUpdated(this.deviceInfoFilterForm.value),this.panelMode&&(this.panelResult=this.deviceInfoFilter),this.overlayRef?this.overlayRef.dispose():this.deviceFilterOverlayRef.dispose()}deviceProfileChanged(E){this.deviceProfileInfo=E,this.updateButtonDisplayValue()}updateDeviceInfoFilterForm(E){this.deviceInfoFilterForm.patchValue({deviceProfileId:E?.deviceProfileId,active:(0,G.f1)(E?.active)?E?.active:""},{emitEvent:!1}),this.updateValidators()}deviceFilterUpdated(E){this.deviceInfoFilter=E,""===this.deviceInfoFilter.active&&(this.deviceInfoFilter.active=null),this.updateButtonDisplayValue(),this.propagateChange(this.deviceInfoFilter)}updateButtonDisplayValue(){if(this.buttonMode){const E=[];if((0,G.f1)(this.deviceInfoFilter?.deviceProfileId)){if(!this.deviceProfileInfo)return void this.deviceProfileService.getDeviceProfileInfo(this.deviceInfoFilter?.deviceProfileId.id,{ignoreLoading:!0,ignoreErrors:!0}).subscribe(f=>{this.deviceProfileChanged(f)});E.push(this.deviceProfileInfo.name)}if((0,G.f1)(this.deviceInfoFilter?.active)){const f=this.deviceInfoFilter?.active?"device.active":"device.inactive";E.push(this.translate.instant(f))}E.length?this.buttonDisplayValue=this.translate.instant("device.filter-title")+`: ${E.join(", ")}`:this.buttonDisplayValue=this.translate.instant("device.device-filter-title"),this.cd.detectChanges()}}static{this.\u0275fac=function(f){return new(f||C)(t.\u0275\u0275directiveInject(T,8),t.\u0275\u0275directiveInject(V.OverlayRef,8),t.\u0275\u0275directiveInject(c.UntypedFormBuilder),t.\u0275\u0275directiveInject(H.TranslateService),t.\u0275\u0275directiveInject(V.Overlay),t.\u0275\u0275directiveInject(t.ElementRef),t.\u0275\u0275directiveInject(t.ViewContainerRef),t.\u0275\u0275directiveInject(K.N),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:C,selectors:[["tb-device-info-filter"]],viewQuery:function(f,g){if(1&f&&t.\u0275\u0275viewQuery(a,5),2&f){let y;t.\u0275\u0275queryRefresh(y=t.\u0275\u0275loadQuery())&&(g.deviceFilterPanel=y.first)}},inputs:{disabled:"disabled",buttonMode:"buttonMode"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>C),multi:!0}])],decls:7,vars:2,consts:[["componentMode",""],["deviceFilterPanel",""],["deviceFilter",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["color","primary","matTooltipPosition","above","mat-stroked-button","",3,"click","matTooltip"],[1,"mat-content","mat-padding","flex","flex-col",3,"ngSubmit"],[1,"tb-panel-actions","flex","flex-row","items-center","justify-end"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"flex","flex-col","gap-4",2,"min-width","280px",3,"formGroup"],["subscriptSizing","dynamic","formControlName","deviceProfileId",3,"deviceProfileChanged","displayAllOnEmpty","editProfileEnabled","addNewProfile"],["translate",""],["formControlName","active"],["value",""],[3,"value"]],template:function(f,g){if(1&f&&t.\u0275\u0275template(0,P,2,1,"ng-container",3)(1,u,1,2,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)(3,p,9,8,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)(5,v,15,15,"ng-template",null,2,t.\u0275\u0275templateRefExtractor),2&f){const y=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",g.panelMode)("ngIfElse",y)}},dependencies:[k.NgIf,k.NgTemplateOutlet,Q.MatButton,z.MatIcon,L.MatFormField,L.MatLabel,B.MatSelect,I.MatOption,U.MatTooltip,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,c.NgForm,c.FormGroupDirective,c.FormControlName,H.TranslateDirective,F.DeviceProfileAutocompleteComponent,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;overflow:hidden;max-width:100%}[_nghost-%COMP%]   .mdc-button[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]     .mdc-button .mat-icon{min-width:24px}[_nghost-%COMP%]     .mdc-button .mdc-button__label{overflow:hidden;text-overflow:ellipsis}']})}}(0,e.__decorate)([(0,h.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],C.prototype,"buttonMode",void 0)},14109:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EdgeDownlinkTableHeaderComponent:()=>h});var e=n(93953),t=n(5986),c=n(9310);class h extends t.M{get eventTableConfig(){return this.entitiesTableConfig}constructor(S){super(S),this.store=S}static{this.\u0275fac=function(G){return new(G||h)(e.\u0275\u0275directiveInject(c.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["tb-edge-downlink-table-header"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,template:function(G,K){1&G&&e.\u0275\u0275element(0,"div")},styles:['@charset "UTF-8";[_nghost-%COMP%]{padding-right:8px}']})}}},58512:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EdgeDownlinkTableComponent:()=>u});var e=n(93953),t=n(8968),c=n(12054),h=n(72358),V=n(67496),S=n(74972),G=n(74208),K=n(10320),H=n(14109),k=n(96354),Q=n(70274),z=n(78502);class L extends c.M7{constructor(p,v,T,C,_,E,f,g,y){super(),this.attributeService=p,this.datePipe=v,this.dialogService=T,this.dialog=C,this.edgeService=_,this.entityService=E,this.translate=f,this.store=g,this.entityId=y,this.tableTitle="",this.loadDataOnInit=!1,this.useTimePageLink=!0,this.detailsPanelEnabled=!1,this.selectionEnabled=!1,this.searchEnabled=!1,this.addEnabled=!1,this.entitiesDeleteEnabled=!1,this.pageMode=!1,this.headerComponent=H.EdgeDownlinkTableHeaderComponent,this.entityTranslations={noEntities:"edge.no-downlinks-prompt"},this.entitiesFetchFunction=b=>this.fetchEvents(b),this.defaultSortOrder={property:"createdTime",direction:V.O.DESC},this.updateColumns()}fetchEvents(p){return this.attributeService.getEntityAttributes(this.entityId,K.BY.SERVER_SCOPE,["queueStartTs"]).pipe((0,k.T)(v=>this.onUpdate(v)),(0,Q.H)(()=>this.edgeService.getEdgeEvents(this.entityId,p)))}onUpdate(p){this.queueStartTs=0;const v=p.reduce((T,C)=>(T[C.key]=C,T),{});this.queueStartTs=v.queueStartTs&&v.queueStartTs.value?v.queueStartTs.value:0}updateColumns(p=!1){this.columns=[],this.columns.push(new c.Qr("createdTime","event.event-time",this.datePipe,"120px"),new c.KK("type","event.type","25%",v=>{let T=h.s7.get(v.type);return T?this.translate.instant(T):v.type},v=>({}),!1),new c.KK("action","edge.event-action","25%",v=>{let T=h._5.get(v.action);return T?this.translate.instant(T):v.action},v=>({}),!1),new c.KK("entityId","edge.entity-id","40%",v=>v.entityId?v.entityId:"",()=>({}),!1),new c.KK("status","event.status","10%",v=>this.updateEdgeEventStatus(v.createdTime),v=>({color:this.isPending(v.createdTime)?h.jN.get(h.s0.PENDING):h.jN.get(h.s0.DEPLOYED)}),!1),new c.aN("data","event.data",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>this.isEdgeEventHasData(v),onAction:(v,T)=>{this.prepareEdgeEventContent(T).subscribe(C=>this.showEdgeEventContent(v,C,"event.data"),()=>this.showEntityNotFoundError())}},"48px")),p&&this.getTable().columnsUpdated(!0)}updateEdgeEventStatus(p){return this.queueStartTs&&p<=this.queueStartTs?this.translate.instant("edge.deployed"):this.translate.instant("edge.pending")}isPending(p){return p>this.queueStartTs}isEdgeEventHasData(p){return!(p.type===h.mK.ADMIN_SETTINGS||p.action===h.EM.DELETED)}prepareEdgeEventContent(p){return this.entityService.getEdgeEventContent(p).pipe((0,k.T)(v=>JSON.stringify(v)))}showEdgeEventContent(p,v,T){p&&p.stopPropagation(),this.dialog.open(G.EventContentDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{content:v,title:T,contentType:S.cM.JSON}})}showEntityNotFoundError(){this.store.dispatch(new z.xo({message:this.translate.instant("edge.load-entity-error"),type:"error",verticalPosition:"top",horizontalPosition:"left"}))}}var B=n(80216),I=n(97068),U=n(44037),F=n(78911),a=n(60177),O=n(34006),P=n(73955),A=n(9310);class u{set active(p){this.activeValue!==p&&(this.activeValue=p,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))}set entityId(p){this.entityIdValue=p,this.edgeDownlinkTableConfig&&this.edgeDownlinkTableConfig.entityId!==p&&(this.edgeDownlinkTableConfig.entityId=p,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}constructor(p,v,T,C,_,E,f,g){this.attributeService=p,this.datePipe=v,this.dialogService=T,this.dialog=C,this.edgeService=_,this.entityService=E,this.translate=f,this.store=g,this.activeValue=!1,this.dirtyValue=!1}ngOnInit(){this.dirtyValue=!this.activeValue,this.edgeDownlinkTableConfig=new L(this.attributeService,this.datePipe,this.dialogService,this.dialog,this.edgeService,this.entityService,this.translate,this.store,this.entityIdValue)}static{this.\u0275fac=function(v){return new(v||u)(e.\u0275\u0275directiveInject(I.e),e.\u0275\u0275directiveInject(a.DatePipe),e.\u0275\u0275directiveInject(B.o),e.\u0275\u0275directiveInject(O.MatDialog),e.\u0275\u0275directiveInject(U.p),e.\u0275\u0275directiveInject(F.T),e.\u0275\u0275directiveInject(P.TranslateService),e.\u0275\u0275directiveInject(A.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["tb-edge-downlink-table"]],viewQuery:function(v,T){if(1&v&&e.\u0275\u0275viewQuery(t.EntitiesTableComponent,7),2&v){let C;e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(T.entitiesTable=C.first)}},inputs:{active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(v,T){1&v&&e.\u0275\u0275element(0,"tb-entities-table",0),2&v&&e.\u0275\u0275property("entitiesTableConfig",T.edgeDownlinkTableConfig)},dependencies:[t.EntitiesTableComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}']})}}},83274:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AddEntityDialogComponent:()=>O});var e=n(93953),t=n(86600),c=n(34006),h=n(93938),V=n(56542),S=n(9310),G=n(7901),K=n(60177),H=n(37441),k=n(88834),Q=n(99213),z=n(67575),L=n(55911),B=n(89417),I=n(73955);const U=["entityDetailsForm"];function F(P,A){1&P&&e.\u0275\u0275element(0,"mat-progress-bar",14)}function a(P,A){1&P&&e.\u0275\u0275element(0,"div",15)}class O extends V.m{constructor(A,u,m,p,v,T){super(A,u,p),this.store=A,this.router=u,this.data=m,this.dialogRef=p,this.injector=v,this.errorStateMatcher=T,this.submitted=!1}ngOnInit(){this.entitiesTableConfig=this.data.entitiesTableConfig,this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.entity={};const A=this.entityDetailsFormAnchor.viewContainerRef;A.clear();const u=e.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector}),m=A.createComponent(this.entitiesTableConfig.entityComponent,{index:0,injector:u});this.entityComponent=m.instance,this.entityComponent.isEdit=!0,this.detailsForm=this.entityComponent.entityForm}helpLinkId(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId}isErrorState(A,u){const m=this.errorStateMatcher.isErrorState(A,u),p=!!(A&&A.invalid&&this.submitted);return m||p}cancel(){this.dialogRef.close(null)}add(){this.submitted=!0,this.detailsForm.valid&&(this.entity={...this.entity,...this.entityComponent.entityFormValue()},this.entitiesTableConfig.saveEntity(this.entity).subscribe(A=>{this.dialogRef.close(A)}))}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-add-entity-dialog"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(U,7),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.entityDetailsFormAnchor=p.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:O}]),e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:22,consts:[["entityDetailsForm",""],[2,"min-width","400px","width","750px",3,"ngSubmit"],["color","primary"],["translate",""],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.add())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2",3),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",4)(5,"div",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",7),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,F,1,0,"mat-progress-bar",8),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,a,1,0,"div",9),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275element(14,"tb-anchor",null,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",11)(17,"button",12),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",13),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()}2&u&&(e.\u0275\u0275styleMap(m.entitiesTableConfig.addDialogStyle),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(m.translations.add),e.\u0275\u0275advance(2),e.\u0275\u0275property("tb-help",m.helpLinkId()),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,10,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,12,m.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,14,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,16,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,18,m.isLoading$)||(null==m.detailsForm?null:m.detailsForm.invalid)||!(null!=m.detailsForm&&m.detailsForm.dirty)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,20,"action.add")," "))},dependencies:[K.NgIf,h.TbAnchorComponent,H.HelpComponent,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatProgressBar,L.MatToolbar,c.MatDialogActions,c.MatDialogContent,B.\u0275NgNoValidate,B.NgControlStatusGroup,B.NgForm,I.TranslateDirective,K.AsyncPipe,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]     .mat-padding{padding:0}']})}}},8968:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EntitiesTableComponent:()=>Zt});var e=n(93953),t=n(69749),c=n(719),h=n(96695),V=n(2042),S=n(56977),G=n(70152),K=n(23294),H=n(65245),k=n(96354),Q=n(99437),z=n(67496),L=n(18530),B=n(57786),I=n(7673),U=n(27468),F=n(12054),a=n(80216),O=n(83274),P=n(53244),A=n(93938),u=n(27997),m=n(74972),p=n(91801),v=n(9310),T=n(7901),C=n(73955),_=n(34006),E=n(345),f=n(89417),g=n(60177),y=n(92369),b=n(88834),D=n(82765),w=n(99213),ee=n(59042),_e=n(53719),ve=n(90882),Ee=n(55911),$=n(59115),be=n(14823),Te=n(9159),oe=n(71997),R=n(9361),N=n(99691),Z=n(6435);const Y=["entityTableHeader"],ge=["searchInput"],ce=["entityDetailsPanel"],se=He=>({count:He});function J(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-drawer",40,3)(2,"tb-entity-details-panel",41,4),e.\u0275\u0275listener("closeEntityDetails",function(){e.\u0275\u0275restoreView(he);const Ne=e.\u0275\u0275nextContext();return Ne.isDetailsOpen=!1,e.\u0275\u0275resetView(Ne.detailsPanelOpened.emit(Ne.isDetailsOpen))})("entityUpdated",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(it.onEntityUpdated(Ne))})("entityAction",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(it.onEntityAction(Ne))}),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275property("opened",he.isDetailsOpen),e.\u0275\u0275advance(2),e.\u0275\u0275property("entitiesTableConfig",he.entitiesTableConfig)("entityId",he.isDetailsOpen?null==he.dataSource.currentEntity?null:he.dataSource.currentEntity.id:null)}}function de(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"span",42),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(he.entitiesTableConfig.tableTitle)}}function ye(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-timewindow",43),e.\u0275\u0275twoWayListener("ngModelChange",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext();return e.\u0275\u0275twoWayBindingSet(it.timewindow,Ne)||(it.timewindow=Ne),e.\u0275\u0275resetView(Ne)}),e.\u0275\u0275listener("ngModelChange",function(){e.\u0275\u0275restoreView(he);const Ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ne.onTimewindowChange())}),e.\u0275\u0275elementEnd()}if(2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275twoWayProperty("ngModel",he.timewindow),e.\u0275\u0275property("forAllTimeEnabled",he.entitiesTableConfig.forAllTimeEnabled)}}function re(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(it.addEntity(Ne))}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"add"),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,2,he.translations.add)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,4,he.isLoading$))}}function ne(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(it.entitiesTableConfig.addActionDescriptors[0].onAction(Ne))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("!hidden",!he.entitiesTableConfig.addActionDescriptors[0].isEnabled()),e.\u0275\u0275propertyInterpolate("matTooltip",he.entitiesTableConfig.addActionDescriptors[0].name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,5,he.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(he.entitiesTableConfig.addActionDescriptors[0].icon)}}function ie(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",48),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit;return e.\u0275\u0275resetView(it.onAction(Ne))}),e.\u0275\u0275elementStart(2,"tb-icon",49),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("!hidden",!he.isEnabled()),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,5,Me.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(he.icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(he.name)}}function Ae(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"button",45),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"add"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-menu",46,6),e.\u0275\u0275template(7,ie,6,7,"button",47),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275reference(6),Me=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,4,Me.translations.add)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,6,Me.isLoading$))("matMenuTriggerFor",he),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",Me.entitiesTableConfig.addActionDescriptors)}}function Pe(He,We){if(1&He&&e.\u0275\u0275template(0,ne,4,7,"button",44)(1,Ae,8,8,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),2&He){const he=e.\u0275\u0275reference(2),Me=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",1===Me.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",he)}}function Be(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit;return e.\u0275\u0275resetView(it.onAction(Ne))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",!he.isEnabled()),e.\u0275\u0275propertyInterpolate("matTooltip",he.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,5,Me.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(he.icon)}}function Ke(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(he);const Ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ne.enterFilterMode())}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"search"),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,2,he.translations.search)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,4,he.isLoading$))}}function Xe(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(it.onAction(Ne,Ue.dataSource.selection.selected))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("!hidden",!he.isEnabled),e.\u0275\u0275propertyInterpolate("matTooltip",he.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,5,Me.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(he.icon)}}function at(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-toolbar",50)(1,"div",14)(2,"span",51),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",18),e.\u0275\u0275template(6,Xe,4,7,"button",20),e.\u0275\u0275elementEnd()()),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",he.dataSource.selection.isEmpty()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,4,he.translations.selectedEntities,e.\u0275\u0275pureFunction1(7,se,he.dataSource.selection.selected.length))," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",he.groupActionDescriptors)}}function bt(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-header-cell",52)(1,"mat-checkbox",53),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("change",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ne?it.dataSource.masterToggle():null)}),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("checked",he.dataSource.selection.hasValue()&&e.\u0275\u0275pipeBind1(2,2,he.dataSource.isAllSelected()))("indeterminate",he.dataSource.selection.hasValue()&&!e.\u0275\u0275pipeBind1(3,4,he.dataSource.isAllSelected()))}}function Mt(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"mat-checkbox",54),e.\u0275\u0275listener("click",function(Ne){return e.\u0275\u0275restoreView(he),e.\u0275\u0275resetView(Ne.stopPropagation())})("change",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ne?Ue.dataSource.selection.toggle(it):null)}),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!Me.entitiesTableConfig.entitySelectionEnabled(he)),e.\u0275\u0275property("checked",Me.dataSource.selection.isSelected(he))}}function ze(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-header-cell",58),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275nextContext().$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(Me.headerCellStyle(he)),e.\u0275\u0275classProp("mat-number-cell",he.isNumberColumn)("lt-lg:!hidden",he.mobileHide),e.\u0275\u0275property("disabled",!he.sortable),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",he.ignoreTranslate?he.title:e.\u0275\u0275pipeBind1(2,8,he.title)," ")}}function vt(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",65),e.\u0275\u0275listener("click",function(Ne){return e.\u0275\u0275restoreView(he),e.\u0275\u0275resetView(Ne.stopPropagation())}),e.\u0275\u0275elementEnd()}if(2&He){const he=We.ngIf,Me=e.\u0275\u0275nextContext(2),Ne=Me.$implicit,it=Me.index,Ue=e.\u0275\u0275nextContext().$implicit,Ce=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",he)("innerHTML",Ce.cellContent(Ne,Ue,it),e.\u0275\u0275sanitizeHtml)}}function tt(He,We){if(1&He&&e.\u0275\u0275template(0,vt,1,2,"a",64),2&He){const he=e.\u0275\u0275nextContext().$implicit,Me=e.\u0275\u0275reference(5),Ne=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("ngIf",Ne.entityURL(he))("ngIfElse",Me)}}function Ye(He,We){if(1&He&&e.\u0275\u0275element(0,"tb-entity-chips",66),2&He){const he=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("entity",he)}}function Qe(He,We){if(1&He&&e.\u0275\u0275element(0,"span",67),2&He){const he=e.\u0275\u0275nextContext(),Me=he.$implicit,Ne=he.index,it=e.\u0275\u0275nextContext().$implicit,Ue=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",Ue.cellContent(Me,it,Ne),e.\u0275\u0275sanitizeHtml)}}function nt(He,We){if(1&He&&(e.\u0275\u0275element(0,"tb-copy-button",68),e.\u0275\u0275pipe(1,"async")),2&He){const he=e.\u0275\u0275nextContext(2).$implicit,Me=e.\u0275\u0275nextContext().$implicit,Ne=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(Me.actionCell.style),e.\u0275\u0275classProp("!hidden",!Me.actionCell.isEnabled(he)),e.\u0275\u0275propertyInterpolate("tooltipText",Me.actionCell.nameFunction?Me.actionCell.nameFunction(he):Me.actionCell.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,8,Ne.isLoading$))("copyText",Me.actionCell.onAction(null,he))("icon",Me.actionCell.icon)}}function ot(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){e.\u0275\u0275restoreView(he);const it=e.\u0275\u0275nextContext(2).$implicit,Ue=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(Ue.actionCell.onAction(Ne,it))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&He){const he=e.\u0275\u0275nextContext(2).$implicit,Me=e.\u0275\u0275nextContext().$implicit,Ne=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",!Me.actionCell.isEnabled(he)),e.\u0275\u0275propertyInterpolate("matTooltip",Me.actionCell.nameFunction?Me.actionCell.nameFunction(he):Me.actionCell.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,7,Ne.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(Me.actionCell.style),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Me.actionCell.icon," ")}}function gt(He,We){if(1&He&&(e.\u0275\u0275elementContainerStart(0,60),e.\u0275\u0275template(1,nt,2,10,"ng-template",61)(2,ot,4,9,"ng-template",62),e.\u0275\u0275elementContainerEnd()),2&He){const he=e.\u0275\u0275nextContext(2).$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",he.actionCell.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",Me.cellActionType.COPY_BUTTON)}}function rt(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-cell",59),e.\u0275\u0275elementContainerStart(1,60),e.\u0275\u0275template(2,tt,1,2,"ng-template",61)(3,Ye,1,1,"ng-template",61)(4,Qe,1,1,"ng-template",62,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(6,gt,3,2,"ng-template",63),e.\u0275\u0275elementEnd()),2&He){const he=We.$implicit,Me=We.index,Ne=e.\u0275\u0275nextContext().$implicit,it=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(it.cellStyle(he,Ne,Me)),e.\u0275\u0275classProp("mat-number-cell",Ne.isNumberColumn)("lt-lg:!hidden",Ne.mobileHide),e.\u0275\u0275property("matTooltip",it.cellTooltip(he,Ne,Me)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",Ne.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","link"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","entityChips"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Ne.actionCell)}}function Ze(He,We){if(1&He&&(e.\u0275\u0275elementContainerStart(0,55),e.\u0275\u0275template(1,ze,3,10,"mat-header-cell",56)(2,rt,7,11,"mat-cell",57),e.\u0275\u0275elementContainerEnd()),2&He){const he=We.$implicit;e.\u0275\u0275property("matColumnDef",he.key)}}function je(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-header-cell",58),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275nextContext().$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(Me.headerCellStyle(he)),e.\u0275\u0275property("disabled",!he.sortable),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,he.title)," ")}}function $e(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"button",21),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(Ue.actionDescriptor.onAction(Ne,it))}),e.\u0275\u0275elementStart(3,"tb-icon"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()}if(2&He){const he=We.$implicit,Me=We.index,Ne=e.\u0275\u0275nextContext().$implicit,it=e.\u0275\u0275nextContext();e.\u0275\u0275styleMap(it.cellStyle(he,Ne,Me)),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!Ne.actionDescriptor.isEnabled(he)),e.\u0275\u0275propertyInterpolate("matTooltip",Ne.actionDescriptor.nameFunction?Ne.actionDescriptor.nameFunction(he):Ne.actionDescriptor.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,9,it.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(Ne.actionDescriptor.style),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Ne.actionDescriptor.iconFunction?Ne.actionDescriptor.iconFunction(he):Ne.actionDescriptor.icon," ")}}function Oe(He,We){if(1&He&&(e.\u0275\u0275elementContainerStart(0,55),e.\u0275\u0275template(1,je,3,6,"mat-header-cell",69)(2,$e,5,11,"mat-cell",70),e.\u0275\u0275elementContainerEnd()),2&He){const he=We.$implicit;e.\u0275\u0275property("matColumnDef",he.key)}}function Fe(He,We){if(1&He&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",71),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",72),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&He){const he=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",he.entitiesTableConfig.actionsColumnTitle?e.\u0275\u0275pipeBind1(3,4,he.entitiesTableConfig.actionsColumnTitle):""," "),e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("min-width",48*he.cellActionDescriptors.length+"px"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",he.entitiesTableConfig.actionsColumnTitle?e.\u0275\u0275pipeBind1(6,6,he.entitiesTableConfig.actionsColumnTitle):""," ")}}function le(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-header-cell"),e.\u0275\u0275template(1,Fe,7,8,"ng-container",38),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",he.cellActionDescriptors.length)}}function we(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext(2).$implicit;return e.\u0275\u0275resetView(it.onAction(Ne,Ue))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext(2).$implicit,Ne=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",he.nameFunction?he.nameFunction(Me):he.name),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,5,Ne.isLoading$)||!he.isEnabled(Me)),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(he.style),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",he.iconFunction?he.iconFunction(Me):he.icon," ")}}function qe(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",48),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext(2).$implicit;return e.\u0275\u0275resetView(it.onAction(Ne,Ue))}),e.\u0275\u0275elementStart(2,"tb-icon",49),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext(2).$implicit,Ne=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",!he.isEnabled(Me)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,7,Ne.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(he.style),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",he.iconFunction?he.iconFunction(Me):he.icon," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(he.nameFunction?he.nameFunction(Me):he.name)}}function lt(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",73),e.\u0275\u0275template(2,we,4,7,"button",74),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",75)(4,"button",76),e.\u0275\u0275listener("click",function(Ne){return e.\u0275\u0275restoreView(he),e.\u0275\u0275resetView(Ne.stopPropagation())}),e.\u0275\u0275elementStart(5,"mat-icon",77),e.\u0275\u0275text(6,"more_vert"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"mat-menu",46,8),e.\u0275\u0275template(9,qe,6,9,"button",47),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&He){const he=e.\u0275\u0275reference(8),Me=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275styleProp("min-width",48*Me.cellActionDescriptors.length+"px"),e.\u0275\u0275classProp("lt-lg:!hidden",1!==Me.cellActionDescriptors.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",Me.cellActionDescriptors),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",1===Me.cellActionDescriptors.length),e.\u0275\u0275advance(),e.\u0275\u0275property("matMenuTriggerFor",he),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",Me.cellActionDescriptors)}}function Kt(He,We){if(1&He&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275template(1,lt,10,9,"ng-container",38),e.\u0275\u0275elementEnd()),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",he.cellActionDescriptors.length)}}function Jt(He,We){if(1&He&&e.\u0275\u0275element(0,"mat-header-row"),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("mat-row-select",he.selectionEnabled)}}function Vt(He,We){if(1&He){const he=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-row",78),e.\u0275\u0275listener("click",function(Ne){const it=e.\u0275\u0275restoreView(he).$implicit,Ue=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ue.onRowClick(Ne,it))}),e.\u0275\u0275elementEnd()}if(2&He){const he=We.$implicit,Me=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",Me.dataSource.dataLoading)("mat-row-select",Me.selectionEnabled)("mat-selected",Me.dataSource.selection.isSelected(he))("tb-current-entity",Me.dataSource.isCurrentEntity(he))("tb-pointer",Me.entitiesTableConfig.rowPointer)}}function hn(He,We){1&He&&e.\u0275\u0275element(0,"mat-divider")}function ut(He,We){if(1&He&&(e.\u0275\u0275element(0,"mat-paginator",79),e.\u0275\u0275pipe(1,"async")),2&He){const he=e.\u0275\u0275nextContext();e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(1,5,he.dataSource.total()))("pageIndex",he.pageLink.page)("pageSize",he.pageLink.pageSize)("pageSizeOptions",he.pageSizeOptions)("hidePageSize",he.hidePageSize)}}class Zt extends t.H{constructor(We,he,Me,Ne,it,Ue,Ce,j,q,pe,xe){super(We),this.store=We,this.route=he,this.translate=Me,this.dialog=Ne,this.dialogService=it,this.domSanitizer=Ue,this.cd=Ce,this.router=j,this.elementRef=q,this.fb=pe,this.zone=xe,this.headerCellStyleCache=[],this.cellContentCache=[],this.cellTooltipCache=[],this.cellStyleCache=[],this.defaultPageSize=10,this.displayPagination=!0,this.hidePageSize=!1,this.pageMode=!0,this.textSearchMode=!1,this.cellActionType=F.Uk,this.isDetailsOpen=!1,this.detailsPanelOpened=new e.EventEmitter,this.textSearch=this.fb.control("",{nonNullable:!0}),this.viewInited=!1,this.destroy$=new L.B}ngOnInit(){this.entitiesTableConfig?this.init(this.entitiesTableConfig):this.route.data.pipe((0,S.Q)(this.destroy$)).subscribe(We=>{this.init(We.entitiesTableConfig)}),this.widgetResize$=new ResizeObserver(()=>{this.zone.run(()=>{const We=this.elementRef.nativeElement.offsetWidth<m.u3;We!==this.hidePageSize&&(this.hidePageSize=We,this.cd.markForCheck())})}),this.widgetResize$.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.widgetResize$&&this.widgetResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()}ngOnChanges(We){for(const he of Object.keys(We)){const Me=We[he];!Me.firstChange&&Me.currentValue!==Me.previousValue&&"entitiesTableConfig"===he&&Me.currentValue&&this.init(Me.currentValue)}}init(We){if(this.isDetailsOpen=!1,this.entitiesTableConfig=We,this.pageMode=this.entitiesTableConfig.pageMode,this.entitiesTableConfig.headerComponent){const Ue=this.entityTableHeaderAnchor.viewContainerRef;Ue.clear();Ue.createComponent(this.entitiesTableConfig.headerComponent).instance.entitiesTableConfig=this.entitiesTableConfig}this.entitiesTableConfig.setTable(this),this.translations=this.entitiesTableConfig.entityTranslations,this.headerActionDescriptors=[...this.entitiesTableConfig.headerActionDescriptors],this.groupActionDescriptors=[...this.entitiesTableConfig.groupActionDescriptors],this.cellActionDescriptors=[...this.entitiesTableConfig.cellActionDescriptors],this.entitiesTableConfig.entitiesDeleteEnabled&&(this.cellActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:Ue=>this.entitiesTableConfig.deleteEnabled(Ue),onAction:(Ue,Ce)=>this.deleteEntity(Ue,Ce)}),this.groupActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:!0,onAction:(Ue,Ce)=>this.deleteEntities(Ue,Ce)}));const he=this.groupActionDescriptors.filter(Ue=>Ue.isEnabled);this.selectionEnabled=this.entitiesTableConfig.selectionEnabled&&he.length,this.columnsUpdated();const Me=this.route.snapshot.queryParams;let Ne=null,it=null;if(this.pageMode?(it=Me?.action,(this.entitiesTableConfig.defaultSortOrder||Me.hasOwnProperty("direction")||Me.hasOwnProperty("property"))&&(Ne={property:Me?.property||this.entitiesTableConfig.defaultSortOrder.property,direction:Me?.direction||this.entitiesTableConfig.defaultSortOrder.direction})):this.entitiesTableConfig.defaultSortOrder&&(Ne={property:this.entitiesTableConfig.defaultSortOrder.property,direction:this.entitiesTableConfig.defaultSortOrder.direction}),this.displayPagination=this.entitiesTableConfig.displayPagination,this.defaultPageSize=this.entitiesTableConfig.defaultPageSize,this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.entitiesTableConfig.useTimePageLink){this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval;const Ue=this.getTimePageLinkInterval();this.pageLink=new c.fU(10,0,null,Ne,Ue.startTime,Ue.endTime)}else this.pageLink=new c.Ek(10,0,null,Ne);if(this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:c.fV,this.pageMode){Me.hasOwnProperty("page")&&(this.pageLink.page=Number(Me.page)),Me.hasOwnProperty("pageSize")&&(this.pageLink.pageSize=Number(Me.pageSize));const Ue=Me.textSearch;if((0,u.Q8)(Ue)){const Ce=decodeURI(Ue);this.textSearchMode=!0,this.pageLink.textSearch=Ce.trim(),this.textSearch.setValue(Ce,{emitEvent:!1})}}if(this.dataSource=this.entitiesTableConfig.dataSource(this.dataLoaded.bind(this)),this.entitiesTableConfig.onLoadAction&&this.entitiesTableConfig.onLoadAction(this.route),this.entitiesTableConfig.loadDataOnInit&&this.dataSource.loadEntities(this.pageLink),this.viewInited&&setTimeout(()=>{this.updatePaginationSubscriptions()},0),this.pageMode){if(it){const Ue={};this.router.navigate([],{relativeTo:this.route,queryParams:Ue,queryParamsHandling:"",replaceUrl:!0})}"add"===it&&setTimeout(()=>{this.addEntity(null)},0)}}ngAfterViewInit(){this.textSearch.valueChanges.pipe((0,G.B)(150),(0,K.F)((We,he)=>(this.pageLink.textSearch??"")===he.trim()),(0,S.Q)(this.destroy$)).subscribe(We=>{if(this.pageMode){const he={textSearch:(0,u.Q8)(We)?encodeURI(We):null,page:null};this.updatedRouterParamsAndData(he)}else this.pageLink.textSearch=(0,u.Q8)(We)?We.trim():null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData()}),this.pageMode&&this.route.queryParams.pipe((0,H.i)(1),(0,S.Q)(this.destroy$)).subscribe(We=>{this.displayPagination&&(this.paginator.pageIndex=Number(We.page)||0,this.paginator.pageSize=Number(We.pageSize)||this.defaultPageSize),this.sort.active=We.property||this.entitiesTableConfig.defaultSortOrder.property,this.sort.direction=(We.direction||this.entitiesTableConfig.defaultSortOrder.direction).toLowerCase();const he=We.textSearch;if((0,u.Q8)(he)){const Me=decodeURI(he);this.textSearchMode=!0,this.pageLink.textSearch=Me.trim(),this.textSearch.setValue(Me,{emitEvent:!1})}else this.pageLink.textSearch=null,this.textSearch.reset("",{emitEvent:!1});this.updateData()}),this.updatePaginationSubscriptions(),this.viewInited=!0}updatePaginationSubscriptions(){let We;this.updateDataSubscription&&(this.updateDataSubscription.unsubscribe(),this.updateDataSubscription=null);const he=this.sort.sortChange.asObservable().pipe((0,k.T)(Me=>{const Ne=Me.direction.toUpperCase(),it={direction:this.entitiesTableConfig?.defaultSortOrder?.direction===Ne?null:Ne,property:this.entitiesTableConfig?.defaultSortOrder?.property===Me.active?null:Me.active};return this.displayPagination&&(it.page=null,this.paginator.pageIndex=0),it}));this.displayPagination&&(We=this.paginator.page.asObservable().pipe((0,k.T)(Me=>({page:0===Me.pageIndex?null:Me.pageIndex,pageSize:Me.pageSize===this.defaultPageSize?null:Me.pageSize})))),this.updateDataSubscription=(this.displayPagination?(0,B.h)(he,We):he).pipe((0,S.Q)(this.destroy$)).subscribe(Me=>this.updatedRouterParamsAndData(Me))}addEnabled(){return this.entitiesTableConfig.addEnabled}clearSelection(){this.dataSource.selection.clear(),this.cd.detectChanges()}updateData(We=!0,he=!0){if(We&&(this.isDetailsOpen=!1),this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0,this.sort.active?this.pageLink.sortOrder={property:this.sort.active,direction:z.O[this.sort.direction.toUpperCase()]}:this.pageLink.sortOrder=null,this.entitiesTableConfig.useTimePageLink){const Me=this.pageLink,Ne=this.getTimePageLinkInterval();Me.startTime=Ne.startTime,Me.endTime=Ne.endTime}this.dataSource.loadEntities(this.pageLink),he&&this.isDetailsOpen&&this.entityDetailsPanel&&this.entityDetailsPanel.reloadEntity()}getTimePageLinkInterval(){const We={};switch(this.timewindow.history.historyType){case P.NL.LAST_INTERVAL:const he=Date.now();We.startTime=he-this.timewindow.history.timewindowMs,We.endTime=he;break;case P.NL.FIXED:We.startTime=this.timewindow.history.fixedTimewindow.startTimeMs,We.endTime=this.timewindow.history.fixedTimewindow.endTimeMs;break;case P.NL.INTERVAL:const Me=(0,P.az)(this.timewindow.history.quickInterval);We.startTime=Me[0],We.endTime=Me[1];break;case P.NL.FOR_ALL_TIME:We.startTime=null,We.endTime=null}return We}dataLoaded(We,he){isFinite(We)&&isFinite(he)?this.clearCellCache(We,he):(this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0)}onRowClick(We,he){this.entitiesTableConfig.handleRowClick(We,he)||this.toggleEntityDetails(We,he)}toggleEntityDetails(We,he){We&&We.stopPropagation(),this.dataSource.toggleCurrentEntity(he)?this.isDetailsOpen=!0:this.isDetailsOpen=!this.isDetailsOpen,this.detailsPanelOpened.emit(this.isDetailsOpen)}addEntity(We){let he;he=this.entitiesTableConfig.addEntity?this.entitiesTableConfig.addEntity():this.dialog.open(O.AddEntityDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entitiesTableConfig:this.entitiesTableConfig}}).afterClosed(),he.subscribe(Me=>{Me&&(this.updateData(),this.entitiesTableConfig.entityAdded(Me))})}onEntityUpdated(We){this.updateData(!1,!1),this.entitiesTableConfig.entityUpdated(We)}onEntityAction(We){"delete"===We.action&&this.deleteEntity(We.event,We.entity)}deleteEntity(We,he){We&&We.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntityTitle(he),this.entitiesTableConfig.deleteEntityContent(he),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(Me=>{Me&&this.entitiesTableConfig.deleteEntity(he.id).subscribe(()=>{this.updateData(),this.entitiesTableConfig.entitiesDeleted([he.id])})})}deleteEntities(We,he){We&&We.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntitiesTitle(he.length),this.entitiesTableConfig.deleteEntitiesContent(he.length),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(Me=>{if(Me){const Ne=[];he.forEach(it=>{this.entitiesTableConfig.deleteEnabled(it)&&Ne.push(this.entitiesTableConfig.deleteEntity(it.id).pipe((0,k.T)(()=>it.id),(0,Q.W)(()=>(0,I.of)(null))))}),(0,U.p)(Ne).subscribe(it=>{this.updateData(),this.entitiesTableConfig.entitiesDeleted(it.filter(Ue=>null!==Ue))})}})}onTimewindowChange(){this.displayPagination&&(this.paginator.pageIndex=0),this.updateData()}enterFilterMode(){this.textSearchMode=!0,setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.textSearch.reset()}resetSortAndFilter(We=!0,he=!1){this.textSearchMode=!1,this.pageLink.textSearch=null,this.textSearch.reset("",{emitEvent:!1}),this.entitiesTableConfig.useTimePageLink&&!he&&(this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval),this.displayPagination&&(this.paginator.pageIndex=0);const Me=this.sort.sortables.get(this.entitiesTableConfig.defaultSortOrder.property);this.sort.active=Me.id,this.sort.direction=this.entitiesTableConfig.defaultSortOrder.direction===z.O.ASC?"asc":"desc",We&&this.updatedRouterParamsAndData({},"")}columnsUpdated(We=!1){this.entityColumns=this.entitiesTableConfig.columns.filter(he=>he instanceof F.KK||he instanceof F.i6||he instanceof F.us).map(he=>he),this.actionColumns=this.entitiesTableConfig.columns.filter(he=>he instanceof F.aN).map(he=>he),this.displayedColumns=[],this.selectionEnabled&&this.displayedColumns.push("select"),this.entitiesTableConfig.columns.forEach(he=>{this.displayedColumns.push(he.key)}),this.displayedColumns.push("actions"),this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0,We&&this.dataSource.reset()}cellActionDescriptorsUpdated(){this.cellActionDescriptors=[...this.entitiesTableConfig.cellActionDescriptors]}headerCellStyle(We){const he=this.entitiesTableConfig.columns.indexOf(We);let Me=this.headerCellStyleCache[he];if(!Me){const Ne={width:We.width};"0px"!==We.width&&(Ne.minWidth=We.width,Ne.maxWidth=We.width),Me=We instanceof F.KK?{...We.headerCellStyleFunction(We.key),...Ne}:Ne,this.headerCellStyleCache[he]=Me}return Me}clearCellCache(We,he){const Me=he*this.entitiesTableConfig.columns.length+We;this.cellContentCache[Me]=void 0,this.cellTooltipCache[Me]=void 0,this.cellStyleCache[Me]=void 0}cellContent(We,he,Me){if(he instanceof F.KK||he instanceof F.i6){const Ne=this.entitiesTableConfig.columns.indexOf(he),it=Me*this.entitiesTableConfig.columns.length+Ne;let Ue=this.cellContentCache[it];return(0,u.b0)(Ue)&&(Ue=this.domSanitizer.bypassSecurityTrustHtml(he.cellContentFunction(We,he.key)),this.cellContentCache[it]=Ue),Ue}return""}cellTooltip(We,he,Me){if(he instanceof F.KK){const Ne=this.entitiesTableConfig.columns.indexOf(he),it=Me*this.entitiesTableConfig.columns.length+Ne;let Ue=this.cellTooltipCache[it];if(!(0,u.b0)(Ue))return null!==Ue?Ue:void 0;Ue=he.cellTooltipFunction(We,he.key),Ue=(0,u.O9)(Ue)?Ue:null,this.cellTooltipCache[it]=Ue}}cellStyle(We,he,Me){const Ne=this.entitiesTableConfig.columns.indexOf(he),it=Me*this.entitiesTableConfig.columns.length+Ne;let Ue=this.cellStyleCache[it];if(!Ue){const Ce={width:he.width};"0px"!==he.width&&(Ce.minWidth=he.width,Ce.maxWidth=he.width),Ue=he instanceof F.KK?{...he.cellStyleFunction(We,he.key),...Ce}:Ce,this.cellStyleCache[it]=Ue}return Ue}trackByColumnKey(We,he){return he.key}trackByEntityId(We,he){return he.id.id}updatedRouterParamsAndData(We,he="merge"){this.pageMode?(this.router.navigate([],{relativeTo:this.route,queryParams:We,queryParamsHandling:he}),""===he&&(0,u.n4)(this.route.snapshot.queryParams,We)&&this.updateData()):this.updateData()}detectChanges(){this.cd.markForCheck()}static{this.\u0275fac=function(he){return new(he||Zt)(e.\u0275\u0275directiveInject(v.Store),e.\u0275\u0275directiveInject(T.ActivatedRoute),e.\u0275\u0275directiveInject(C.TranslateService),e.\u0275\u0275directiveInject(_.MatDialog),e.\u0275\u0275directiveInject(a.o),e.\u0275\u0275directiveInject(E.DomSanitizer),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(T.Router),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(f.FormBuilder),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Zt,selectors:[["tb-entities-table"]],viewQuery:function(he,Me){if(1&he&&(e.\u0275\u0275viewQuery(Y,7),e.\u0275\u0275viewQuery(ge,5),e.\u0275\u0275viewQuery(h.MatPaginator,5),e.\u0275\u0275viewQuery(V.MatSort,5),e.\u0275\u0275viewQuery(ce,5)),2&he){let Ne;e.\u0275\u0275queryRefresh(Ne=e.\u0275\u0275loadQuery())&&(Me.entityTableHeaderAnchor=Ne.first),e.\u0275\u0275queryRefresh(Ne=e.\u0275\u0275loadQuery())&&(Me.searchInputField=Ne.first),e.\u0275\u0275queryRefresh(Ne=e.\u0275\u0275loadQuery())&&(Me.paginator=Ne.first),e.\u0275\u0275queryRefresh(Ne=e.\u0275\u0275loadQuery())&&(Me.sort=Ne.first),e.\u0275\u0275queryRefresh(Ne=e.\u0275\u0275loadQuery())&&(Me.entityDetailsPanel=Ne.first)}},inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:63,vars:57,consts:[["entityTableHeader",""],["addActions",""],["searchInput",""],["drawer",""],["entityDetailsPanel",""],["addActionsMenu",""],["addActionsMenu","matMenu"],["defaultContent",""],["cellActionsMenu","matMenu"],["hasBackdrop","false",1,"tb-absolute-fill"],["class","tb-details-drawer mat-elevation-z4","mode","over","position","end",3,"opened",4,"ngIf"],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],[1,"tb-entity-table-content","tb-outlined-border","flex","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],[1,"title-container","flex","flex-row","items-center","justify-start","xs:flex-col","xs:items-start","xs:justify-center"],["class","tb-entity-table-title",4,"ngIf"],["asButton","","strokedButton","","historyOnly","",3,"ngModel","forAllTimeEnabled","ngModelChange",4,"ngIf"],[1,"flex-1"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf","ngIfElse"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","!hidden","matTooltip","click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["class","mat-mdc-table-toolbar","color","primary",3,"!hidden",4,"ngIf"],[1,"table-container","flex-1"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 40px;",4,"matHeaderCellDef"],[4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderCellDef"],[3,"mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"!hidden","mat-row-select","mat-selected","tb-current-entity","tb-pointer","click",4,"matRowDef","matRowDefColumns"],[1,"no-data-found","flex","items-center","justify-center"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize",4,"ngIf"],["mode","over","position","end",1,"tb-details-drawer","mat-elevation-z4",3,"opened"],[3,"closeEntityDetails","entityUpdated","entityAction","entitiesTableConfig","entityId"],[1,"tb-entity-table-title"],["asButton","","strokedButton","","historyOnly","",3,"ngModelChange","ngModel","forAllTimeEnabled"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","!hidden","matTooltip","click",4,"ngIf","ngIfElse"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"disabled","!hidden","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click","disabled"],["matMenuItemIcon",""],["color","primary",1,"mat-mdc-table-toolbar"],[1,"tb-entity-table-info"],[2,"width","40px"],[3,"change","checked","indeterminate"],[3,"click","change","checked"],[3,"matColumnDef"],["mat-sort-header","",3,"mat-number-cell","lt-lg:!hidden","style","disabled",4,"matHeaderCellDef"],["matTooltipPosition","above",3,"mat-number-cell","lt-lg:!hidden","matTooltip","style",4,"matCellDef"],["mat-sort-header","",3,"disabled"],["matTooltipPosition","above",3,"matTooltip"],[3,"ngSwitch"],[3,"ngSwitchCase"],["ngSwitchDefault",""],[3,"ngIf"],[3,"routerLink","innerHTML","click",4,"ngIf","ngIfElse"],[3,"click","routerLink","innerHTML"],[3,"entity"],[3,"innerHTML"],["tooltipPosition","above",3,"disabled","copyText","tooltipText","icon"],["mat-sort-header","",3,"style","disabled",4,"matHeaderCellDef"],[3,"style",4,"matCellDef"],[1,"gt-md:!hidden",2,"min-width","48px"],[1,"lt-lg:!hidden"],[1,"flex","flex-row","items-stretch","justify-end"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf"],[1,"gt-md:!hidden"],["mat-icon-button","",3,"click","matMenuTriggerFor"],[1,"material-icons"],[3,"click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize"]],template:function(he,Me){if(1&he){const Ne=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-drawer-container",9),e.\u0275\u0275template(1,J,4,3,"mat-drawer",10),e.\u0275\u0275elementStart(2,"mat-drawer-content")(3,"div",11)(4,"div",12)(5,"mat-toolbar",13)(6,"div",14)(7,"div",15),e.\u0275\u0275template(8,de,2,1,"span",16),e.\u0275\u0275element(9,"tb-anchor",null,0),e.\u0275\u0275template(11,ye,1,2,"tb-timewindow",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"span",18),e.\u0275\u0275elementStart(13,"div"),e.\u0275\u0275template(14,re,5,6,"button",19)(15,Pe,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,Be,4,7,"button",20),e.\u0275\u0275elementStart(18,"button",21),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ne),e.\u0275\u0275resetView(Me.updateData())}),e.\u0275\u0275elementStart(21,"mat-icon"),e.\u0275\u0275text(22,"refresh"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,Ke,5,6,"button",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"mat-toolbar",13)(25,"div",14)(26,"button",23),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementStart(28,"mat-icon"),e.\u0275\u0275text(29,"search"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"mat-form-field",18)(31,"mat-label"),e.\u0275\u0275text(32,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",24,2),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"button",25),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ne),e.\u0275\u0275resetView(Me.exitFilterMode())}),e.\u0275\u0275elementStart(38,"mat-icon"),e.\u0275\u0275text(39,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(40,at,7,9,"mat-toolbar",26),e.\u0275\u0275elementStart(41,"div",27)(42,"table",28),e.\u0275\u0275elementContainerStart(43,29),e.\u0275\u0275template(44,bt,4,6,"mat-header-cell",30)(45,Mt,2,3,"mat-cell",31),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(46,Ze,3,1,"ng-container",32)(47,Oe,3,1,"ng-container",32),e.\u0275\u0275elementContainerStart(48,33),e.\u0275\u0275template(49,le,2,1,"mat-header-cell",34)(50,Kt,2,1,"mat-cell",31),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(51,Jt,1,2,"mat-header-row",35)(52,Vt,1,10,"mat-row",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"span",37),e.\u0275\u0275pipe(54,"async"),e.\u0275\u0275pipe(55,"async"),e.\u0275\u0275text(56),e.\u0275\u0275pipe(57,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"span",37),e.\u0275\u0275text(59),e.\u0275\u0275pipe(60,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(61,hn,1,0,"mat-divider",38)(62,ut,2,7,"mat-paginator",39),e.\u0275\u0275elementEnd()()()()}if(2&he){const Ne=e.\u0275\u0275reference(16);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Me.entitiesTableConfig.detailsPanelEnabled),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",Me.textSearchMode||!Me.dataSource.selection.isEmpty()),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Me.entitiesTableConfig.tableTitle),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Me.entitiesTableConfig.useTimePageLink),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!Me.addEnabled()),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!Me.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",Ne),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",Me.headerActionDescriptors),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(19,39,"action.refresh")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,41,Me.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Me.entitiesTableConfig.searchEnabled),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!Me.textSearchMode||!Me.dataSource.selection.isEmpty()),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(27,43,Me.translations.search)),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(35,45,Me.translations.search)),e.\u0275\u0275property("formControl",Me.textSearch),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(37,47,"action.close")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",Me.entitiesTableConfig.selectionEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",Me.dataSource)("trackBy",Me.trackByEntityId)("matSortActive",null==Me.pageLink.sortOrder?null:Me.pageLink.sortOrder.property)("matSortDirection",Me.pageLink.sortDirection()),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",Me.entityColumns)("ngForTrackBy",Me.trackByColumnKey),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",Me.actionColumns)("ngForTrackBy",Me.trackByColumnKey),e.\u0275\u0275advance(4),e.\u0275\u0275property("matHeaderRowDef",Me.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("matRowDefColumns",Me.displayedColumns),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",e.\u0275\u0275pipeBind1(54,49,Me.isLoading$)||!1===e.\u0275\u0275pipeBind1(55,51,Me.dataSource.isEmpty())||Me.dataSource.dataLoading),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(57,53,Me.translations.noEntities)),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!Me.dataSource.dataLoading),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(60,55,"common.loading")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Me.displayPagination),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Me.displayPagination)}},dependencies:[g.NgForOf,g.NgIf,g.NgSwitch,g.NgSwitchCase,g.NgSwitchDefault,A.TbAnchorComponent,y.TimewindowComponent,b.MatIconButton,D.MatCheckbox,w.MatIcon,ee.MatInput,_e.MatFormField,_e.MatLabel,ve.MatDrawer,ve.MatDrawerContainer,ve.MatDrawerContent,Ee.MatToolbar,$.MatMenu,$.MatMenuItem,$.MatMenuTrigger,be.MatTooltip,Te.MatTable,Te.MatHeaderCellDef,Te.MatHeaderRowDef,Te.MatColumnDef,Te.MatCellDef,Te.MatRowDef,Te.MatHeaderCell,Te.MatCell,Te.MatHeaderRow,Te.MatRow,h.MatPaginator,V.MatSort,V.MatSortHeader,oe.MatDivider,f.DefaultValueAccessor,f.NgControlStatus,f.NgModel,f.FormControlDirective,T.RouterLink,R.CopyButtonComponent,N.TbIconComponent,p.EntityDetailsPanelComponent,Z.I,g.AsyncPipe,C.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   mat-drawer-container[_ngcontent-%COMP%]{overflow:clip}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content.tb-outlined-border[_ngcontent-%COMP%]{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}'],changeDetection:0})}}},6435:(Re,X,n)=>{"use strict";n.d(X,{I:()=>G});var e=n(93953),t=n(45876),c=n(60177),h=n(7901);function V(K,H){if(1&K){const k=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",1),e.\u0275\u0275listener("click",function(z){return e.\u0275\u0275restoreView(k),e.\u0275\u0275resetView(z.stopPropagation())}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&K){const k=H.$implicit,Q=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate2("routerLink","",Q.entityDetailsPrefixUrl,"/",k.id.id,""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",k.name,"\n")}}const S=new Map([[t.EntityType.DOMAIN,"oauth2ClientInfos"],[t.EntityType.MOBILE_APP,"oauth2ClientInfos"]]);class G{set entity(H){this.entityValue=H,this.update()}get entity(){return this.entityValue}update(){if(this.entity&&this.entity.id){const H=this.entity.id.entityType;this.subEntitiesKey=S.get(H),this.subEntities=this.entity?.[this.subEntitiesKey],this.subEntities.length&&(this.entityDetailsPrefixUrl=t.baseDetailsPageByEntityType.get(this.subEntities[0].id.entityType))}}static{this.\u0275fac=function(k){return new(k||G)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:G,selectors:[["tb-entity-chips"]],inputs:{entity:"entity"},decls:1,vars:1,consts:[["class","tb-entity-chip",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"tb-entity-chip",3,"click","routerLink"]],template:function(k,Q){1&k&&e.\u0275\u0275template(0,V,2,4,"a",0),2&k&&e.\u0275\u0275property("ngForOf",Q.subEntities)},dependencies:[c.NgForOf,h.RouterLink],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:4px 0}[_nghost-%COMP%]   a.tb-entity-chip[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;line-height:16px;background:#e0e0e0;color:#212121;white-space:nowrap;border:none}[_nghost-%COMP%]   a.tb-entity-chip[_ngcontent-%COMP%]:hover{background:#b7b7b7}']})}}},75402:(Re,X,n)=>{"use strict";n.d(X,{i:()=>O});var e=n(93953),t=n(27997),c=n(81147),h=n(91801),V=n(80216),S=n(7901),G=n(73955),K=n(9310),H=n(60177),k=n(93938),Q=n(37441),z=n(88834),L=n(99213),B=n(25596),I=n(55911),U=n(14823),F=n(96850);function a(P,A){if(1&P){const u=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",15)(1,"button",16),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(u);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onApplyDetails())}),e.\u0275\u0275elementStart(4,"mat-icon",17),e.\u0275\u0275text(5,"done"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",16),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(u);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onToggleDetailsEditMode())}),e.\u0275\u0275elementStart(9,"mat-icon",17),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd()()()}if(2&P){const u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-hide",!u.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,7,"action.apply-changes")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,9,u.isLoading$)||u.detailsForm.invalid||!u.detailsForm.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(7,11,u.isEdit?"action.decline-changes":"details.toggle-edit-mode")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(8,13,u.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(u.isEdit?"close":"edit")}}class O extends h.EntityDetailsPanelComponent{set entitiesTableConfig(A){this.entitiesTableConfigValue!==A&&(this.entitiesTableConfigValue=A,this.entitiesTableConfigValue&&(this.entitiesTableConfigValue.setEntityDetailsPage(this),this.isEdit=!1,this.entity=null))}get entitiesTableConfig(){return this.entitiesTableConfigValue}constructor(A,u,m,p,v,T,C,_){super(_,m,p),this.route=A,this.router=u,this.injector=m,this.cd=p,this.broadcast=v,this.translate=T,this.dialogService=C,this.store=_,this.isReadOnly=!1,this.entitiesTableConfig=this.route.snapshot.data.entitiesTableConfig,this.backNavigationCommands=this.route.snapshot.data.backNavigationCommands}ngOnInit(){this.headerSubtitle="",this.headerSubtitle=this.translate.instant(this.entitiesTableConfig.entityTranslations.details),super.init(),this.entityComponent.isDetailsPage=!0,this.subscriptions.push(this.entityAction.subscribe(A=>{"delete"===A.action&&this.deleteEntity(A.event,A.entity)})),this.subscriptions.push(this.route.paramMap.subscribe(A=>{if(this.entitiesTableConfig){const u=this.entitiesTableConfig.entityType,m=A.get("entityId");this.currentEntityId={id:m,entityType:u},this.reload(),this.selectedTab=0}}))}ngOnDestroy(){super.ngOnDestroy()}reload(){this.reloadEntity().subscribe(()=>{this.onUpdateEntity()})}onToggleDetailsEditMode(){this.isEdit?(this.entityComponent.entity=this.entity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.entity),this.isEdit=!this.isEdit):(this.isEdit=!this.isEdit,this.editingEntity=(0,t.Go)(this.entity),this.entityComponent.entity=this.editingEntity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.editingEntity),this.entitiesTableConfig.hideDetailsTabsOnEdit&&(this.selectedTab=0))}onApplyDetails(){this.saveEntity(!1).subscribe(A=>{A&&this.onUpdateEntity()})}confirmForm(){return this.detailsForm}goBack(){const A=this.backNavigationCommands||["../"];this.router.navigate(A,{relativeTo:this.route})}onUpdateEntity(){this.broadcast.broadcast("updateBreadcrumb"),this.isReadOnly=this.entitiesTableConfig.detailsReadonly(this.entity),this.headerTitle=this.entitiesTableConfig.entityTitle(this.entity)}deleteEntity(A,u){A&&A.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntityTitle(u),this.entitiesTableConfig.deleteEntityContent(u),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(m=>{m&&this.entitiesTableConfig.deleteEntity(u.id).subscribe(()=>{this.goBack()})})}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(S.ActivatedRoute),e.\u0275\u0275directiveInject(S.Router),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(c.D),e.\u0275\u0275directiveInject(G.TranslateService),e.\u0275\u0275directiveInject(V.o),e.\u0275\u0275directiveInject(K.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-entity-details-page"]],hostVars:2,hostBindings:function(u,m){2&u&&e.\u0275\u0275classMap(m["tb-absolute-fill"])},features:[e.\u0275\u0275InheritDefinitionFeature],decls:23,vars:13,consts:[["entityDetailsForm",""],["entityTabs",""],["appearance","outlined",1,"settings-card"],[1,"details-toolbar"],[1,"mat-toolbar-tools","flex","flex-row","items-center","justify-start","gap-2"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"tb-details-title-header","flex","flex-col","items-start","justify-center"],[1,"tb-details-title","tb-ellipsis"],[1,"tb-details-subtitle","tb-ellipsis"],[1,"tb-help",3,"tb-help"],[1,"flex-1"],["class","tb-header-button flex flex-row gap-2",4,"ngIf"],[1,"flex-full"],["mat-stretch-tabs","false",1,"tb-absolute-fill","size-full",3,"selectedIndexChange","selectedIndex"],[3,"label"],[1,"tb-header-button","flex","flex-row","gap-2"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header",3,"click","disabled","matTooltip"],[1,"material-icons"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-card",2)(1,"mat-toolbar",3)(2,"div",4)(3,"button",5),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.goBack())}),e.\u0275\u0275elementStart(5,"mat-icon"),e.\u0275\u0275text(6,"arrow_back"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",6)(8,"div",7),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(12,"div",9)(13,"span",10),e.\u0275\u0275template(14,a,11,15,"section",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"mat-card-content",12)(16,"mat-tab-group",13),e.\u0275\u0275twoWayListener("selectedIndexChange",function(T){return e.\u0275\u0275restoreView(p),e.\u0275\u0275twoWayBindingSet(m.selectedTab,T)||(m.selectedTab=T),e.\u0275\u0275resetView(T)}),e.\u0275\u0275elementStart(17,"mat-tab",14),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275element(19,"tb-anchor",null,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"tb-anchor",null,1),e.\u0275\u0275elementEnd()()()}2&u&&(e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,9,"action.back")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(m.headerTitle),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(m.headerSubtitle),e.\u0275\u0275advance(),e.\u0275\u0275property("tb-help",m.helpLinkId()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!m.isReadOnly),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("tb-headless",m.hideDetailsTabs()),e.\u0275\u0275twoWayProperty("selectedIndex",m.selectedTab),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(18,11,"details.details")))},dependencies:[H.NgIf,k.TbAnchorComponent,Q.HelpComponent,z.MatIconButton,z.MatFabButton,L.MatIcon,B.MatCard,B.MatCardContent,I.MatToolbar,U.MatTooltip,F.MatTab,F.MatTabGroup,H.AsyncPipe,G.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{margin:8px;padding:0;width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]{height:84px;min-height:84px;border-radius:4px 4px 0 0;background:#fff;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .tb-details-title-header[_ngcontent-%COMP%]{min-width:0;width:auto}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .tb-details-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}@media screen and (min-width: 960px){[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .tb-details-title[_ngcontent-%COMP%]{font-size:1.2rem}}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .tb-details-subtitle[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .details-toolbar[_ngcontent-%COMP%]   .tb-ellipsis[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media screen and (min-width: 960px) and (max-width: 1279px){[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{width:60%}}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .tb-header-button[_ngcontent-%COMP%]   .tb-btn-header[_ngcontent-%COMP%]{position:relative!important;animation:tbMoveFromTopFade .3s ease both}[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]   .tb-header-button[_ngcontent-%COMP%]   .tb-btn-header.tb-hide[_ngcontent-%COMP%]{animation:tbMoveToTopFade .3s ease both}[_nghost-%COMP%]     .tb-help .mat-mdc-icon-button.mat-primary{color:#00000085}[_nghost-%COMP%]     .mat-mdc-card-content{position:relative;overflow:hidden}[_nghost-%COMP%]     .mat-mdc-card-content>.mat-mdc-tab-group>.mat-mdc-tab-body-wrapper{position:absolute;inset:49px 0 0}[_nghost-%COMP%]     .mat-mdc-card-content>.mat-mdc-tab-group>.mat-mdc-tab-header .mat-mdc-tab{min-width:40px}'],changeDetection:0})}}},91801:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EntityDetailsPanelComponent:()=>O});var e=n(93953),t=n(69749),h=(n(12054),n(92001)),V=n(25967),S=n(93938),G=n(92771),K=n(18810),H=n(96850),k=n(27997),Q=n(99437),z=n(21626),L=n(9310),B=n(37441),I=n(60563),U=n(73955);const F=["entityDetailsForm"],a=["entityTabs"];class O extends t.H{constructor(A,u,m){super(A),this.store=A,this.injector=u,this.cd=m,this.closeEntityDetails=new e.EventEmitter,this.entityUpdated=new e.EventEmitter,this.entityAction=new e.EventEmitter,this.isEditValue=!1,this.selectedTab=0,this.entityTypes=V.ck,this.subscriptions=[],this.viewInited=!1}set entityId(A){(0,h.p)(A,this.currentEntityId)||(this.currentEntityId=A,this.currentEntityId&&this.reloadEntity())}set entitiesTableConfig(A){this.entitiesTableConfigValue!==A&&(this.entitiesTableConfigValue=A,this.entitiesTableConfigValue&&(this.currentEntityId=null,this.isEdit=!1,this.entity=null,this.init()))}get entitiesTableConfig(){return this.entitiesTableConfigValue}set isEdit(A){this.isEditValue=A,this.entityComponent&&(this.entityComponent.isEdit=A),this.entityTabsComponent&&(this.entityTabsComponent.isEdit=A)}get isEdit(){return this.isEditValue}init(){this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.buildEntityComponent()}clearSubscriptions(){this.subscriptions.forEach(A=>{A.unsubscribe()}),this.subscriptions.length=0}ngOnDestroy(){super.ngOnDestroy(),this.clearSubscriptions()}buildEntityComponent(){this.clearSubscriptions(),this.entityComponentRef&&(this.entityComponentRef.destroy(),this.entityComponentRef=null);const A=this.entityDetailsFormAnchor.viewContainerRef;A.clear();const u=e.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector});this.entityComponentRef=A.createComponent(this.entitiesTableConfig.entityComponent,{index:0,injector:u}),this.entityComponent=this.entityComponentRef.instance,this.entityComponent.isEdit=this.isEdit,this.detailsForm=this.entityComponent.entityForm,this.subscriptions.push(this.entityComponent.entityAction.subscribe(m=>{this.entityAction.emit(m)})),this.buildEntityTabsComponent(),this.subscriptions.push(this.entityComponent.entityForm.valueChanges.subscribe(()=>{this.cd.detectChanges()}))}buildEntityTabsComponent(){this.entityTabsComponentRef&&(this.entityTabsComponentRef.destroy(),this.entityTabsComponentRef=null);const A=this.entityTabsAnchor.viewContainerRef;A.clear(),this.entityTabsComponent=null,this.entitiesTableConfig.entityTabsComponent&&(this.entityTabsComponentRef=A.createComponent(this.entitiesTableConfig.entityTabsComponent),this.entityTabsComponent=this.entityTabsComponentRef.instance,this.entityTabsComponent.isEdit=this.isEdit,this.entityTabsComponent.entitiesTableConfig=this.entitiesTableConfig,this.entityTabsComponent.detailsForm=this.detailsForm,this.subscriptions.push(this.entityTabsComponent.entityTabsChanged.subscribe(u=>{u&&(this.viewInited?(this.matTabGroup._tabs.reset([...this.inclusiveTabs.toArray(),...u]),this.matTabGroup._tabs.notifyOnChanges()):this.pendingTabs=u)})))}hideDetailsTabs(){return!this.entityTabsComponent||this.isEditValue&&this.entitiesTableConfig.hideDetailsTabsOnEdit}reloadEntity(){const A=new G.m;return this.isEdit=!1,this.entitiesTableConfig.loadEntity(this.currentEntityId).subscribe(u=>{this.entity=u,this.entityComponent.entity=u,this.entityTabsComponent&&(this.entityTabsComponent.entity=u),A.next(u),A.complete()}),A}onCloseEntityDetails(){this.closeEntityDetails.emit()}onToggleEditMode(A){A?(this.isEdit=A,this.editingEntity=(0,k.Go)(this.entity),this.entityComponent.entity=this.editingEntity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.editingEntity),this.entitiesTableConfig.hideDetailsTabsOnEdit&&(this.selectedTab=0)):(this.entityComponent.entity=this.entity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.entity),this.isEdit=A)}helpLinkId(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId}saveEntity(A=!0){const u=new G.m;if(this.detailsForm.valid){const m={...this.editingEntity,...this.entityComponent.entityFormValue()};this.editingEntity.hasOwnProperty("additionalInfo")&&(m.additionalInfo=(0,k.D9)(this.editingEntity.additionalInfo,this.entityComponent.entityFormValue()?.additionalInfo)),this.entitiesTableConfig.saveEntity(m,this.editingEntity).pipe((0,Q.W)(p=>p.status===z.HttpStatusCode.Conflict?this.entitiesTableConfig.loadEntity(this.currentEntityId):(0,K.$)(()=>p))).subscribe(p=>{this.entity=p,this.entityComponent.entity=p,this.entityTabsComponent&&(this.entityTabsComponent.entity=p),this.isEdit=!1,A&&this.entityUpdated.emit(this.entity),u.next(p),u.complete()})}else u.next(null),u.complete();return u}ngAfterViewInit(){this.viewInited=!0,this.pendingTabs&&(this.matTabGroup._tabs.reset([...this.inclusiveTabs.toArray(),...this.pendingTabs]),this.matTabGroup._tabs.notifyOnChanges(),this.pendingTabs=null)}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-entity-details-panel"]],viewQuery:function(u,m){if(1&u&&(e.\u0275\u0275viewQuery(F,7),e.\u0275\u0275viewQuery(a,7),e.\u0275\u0275viewQuery(H.MatTabGroup,7),e.\u0275\u0275viewQuery(H.MatTab,5)),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.entityDetailsFormAnchor=p.first),e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.entityTabsAnchor=p.first),e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.matTabGroup=p.first),e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.inclusiveTabs=p)}},inputs:{entityId:"entityId",entitiesTableConfig:"entitiesTableConfig"},outputs:{closeEntityDetails:"closeEntityDetails",entityUpdated:"entityUpdated",entityAction:"entityAction"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:14,consts:[["entityDetailsForm",""],["entityTabs",""],[1,"flex-1",3,"closeDetails","toggleDetailsEditMode","applyDetails","headerTitle","headerSubtitle","isReadOnly","isEdit","theForm"],[1,"details-buttons"],[3,"tb-help"],["mat-stretch-tabs","false",1,"tb-absolute-fill","flex-1",3,"selectedIndexChange","selectedIndex"],[3,"label"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-details-panel",2),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("closeDetails",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.onCloseEntityDetails())})("toggleDetailsEditMode",function(T){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.onToggleEditMode(T))})("applyDetails",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.saveEntity())}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275element(3,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-tab-group",5),e.\u0275\u0275twoWayListener("selectedIndexChange",function(T){return e.\u0275\u0275restoreView(p),e.\u0275\u0275twoWayBindingSet(m.selectedTab,T)||(m.selectedTab=T),e.\u0275\u0275resetView(T)}),e.\u0275\u0275elementStart(5,"mat-tab",6),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275element(7,"tb-anchor",null,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"tb-anchor",null,1),e.\u0275\u0275elementEnd()()}2&u&&(e.\u0275\u0275propertyInterpolate("headerSubtitle",e.\u0275\u0275pipeBind1(1,10,m.translations.details)),e.\u0275\u0275property("headerTitle",m.entitiesTableConfig.entityTitle(m.entity))("isReadOnly",m.entitiesTableConfig.detailsReadonly(m.entity))("isEdit",m.isEditValue)("theForm",m.detailsForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("tb-help",m.helpLinkId()),e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-headless",m.hideDetailsTabs()),e.\u0275\u0275twoWayProperty("selectedIndex",m.selectedTab),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(6,12,"details.details")))},dependencies:[S.TbAnchorComponent,B.HelpComponent,H.MatTab,H.MatTabGroup,I.DetailsPanelComponent,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-mdc-tab-group>.mat-mdc-tab-body-wrapper{position:absolute;inset:49px 0 0}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-mdc-tab-group>.mat-mdc-tab-header .mat-mdc-tab{min-width:40px}'],changeDetection:0})}}},59248:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EntityFilterViewComponent:()=>H});var e=n(93953),t=n(89417),c=n(47169),h=n(25967),V=n(73955),S=n(60177);function G(k,Q){1&k&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275text(1,"alias.no-entity-filter-specified"),e.\u0275\u0275elementEnd())}function K(k,Q){if(1&k&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&k){const z=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(z.filterDisplayValue)}}class H{constructor(Q){this.translate=Q}registerOnChange(Q){}registerOnTouched(Q){}setDisabledState(Q){}writeValue(Q){if(this.filter=Q,this.filter&&this.filter.type){let z,L,B,I,U,F,a;switch(this.filter.type){case c.V6.singleEntity:z=this.filter.singleEntity.entityType,this.filterDisplayValue=this.translate.instant(h.Mi.get(z).list,{count:1});break;case c.V6.entityList:z=this.filter.entityType;const O=this.filter.entityList.length;this.filterDisplayValue=this.translate.instant(h.Mi.get(z).list,{count:O});break;case c.V6.entityName:z=this.filter.entityType,L=this.filter.entityNameFilter,this.filterDisplayValue=this.translate.instant(h.Mi.get(z).nameStartsWith,{prefix:L});break;case c.V6.entityType:z=this.filter.entityType,this.filterDisplayValue=this.translate.instant(h.Mi.get(z).typePlural);break;case c.V6.stateEntity:this.filterDisplayValue=this.translate.instant("alias.filter-type-state-entity-description");break;case c.V6.assetType:const P=[];this.filter.assetTypes.forEach(f=>{P.push(`'${f}'`)});const A=P.join(", ");L=this.filter.assetNameFilter,L&&L.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-and-name-description",{assetTypes:A,prefix:L}):this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-description",{assetTypes:A});break;case c.V6.deviceType:const u=[];this.filter.deviceTypes.forEach(f=>{u.push(`'${f}'`)});const m=u.join(", ");L=this.filter.deviceNameFilter,L&&L.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-and-name-description",{deviceTypes:m,prefix:L}):this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-description",{deviceTypes:m});break;case c.V6.edgeType:const p=[];this.filter.edgeTypes.forEach(f=>{p.push(`'${f}'`)});const v=p.join(", ");L=this.filter.edgeNameFilter,L&&L.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-type-and-name-description",{edgeTypes:v,prefix:L}):this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-type-description",{edgeTypes:v});break;case c.V6.entityViewType:const T=[];this.filter.entityViewTypes.forEach(f=>{T.push(`'${f}'`)});const C=T.join(", ");L=this.filter.entityViewNameFilter,L&&L.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-and-name-description",{entityViewTypes:C,prefix:L}):this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-description",{entityViewTypes:C});break;case c.V6.relationsQuery:B=this.translate.instant("alias.all-entities"),I=this.translate.instant("alias.any-relation"),F=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(h.Mi.get(this.filter.rootEntity.entityType).type),a=this.translate.instant("relation.direction-type."+this.filter.direction);const _=this.filter.filters;if(_&&_.length){const f=[];_.forEach(g=>{let y;if(g.entityTypes&&g.entityTypes.length){const D=[];g.entityTypes.forEach(w=>{D.push(this.translate.instant(h.Mi.get(w).typePlural))}),y=D.join(", ")}else y=B;U=g.relationType&&g.relationType.length?`'${g.relationType}'`:I;const b=this.translate.instant("alias.filter-type-relations-query-description",{entities:y,relationType:U,direction:a,rootEntity:F});f.push(b)}),this.filterDisplayValue=f.join(", ")}else this.filterDisplayValue=this.translate.instant("alias.filter-type-relations-query-description",{entities:B,relationType:I,direction:a,rootEntity:F});break;case c.V6.assetSearchQuery:case c.V6.deviceSearchQuery:case c.V6.edgeSearchQuery:case c.V6.entityViewSearchQuery:B=this.translate.instant("alias.all-entities"),I=this.translate.instant("alias.any-relation"),F=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(h.Mi.get(this.filter.rootEntity.entityType).type),a=this.translate.instant("relation.direction-type."+this.filter.direction),U=this.filter.relationType&&this.filter.relationType.length?`'${Q.relationType}'`:I;const E={relationType:U,direction:a,rootEntity:F};if(this.filter.type===c.V6.assetSearchQuery){const f=[];this.filter.assetTypes.forEach(y=>{f.push(`'${y}'`)});const g=f.join(", ");E.assetTypes=g,this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-search-query-description",E)}else if(this.filter.type===c.V6.deviceSearchQuery){const f=[];this.filter.deviceTypes.forEach(y=>{f.push(`'${y}'`)});const g=f.join(", ");E.deviceTypes=g,this.filterDisplayValue=this.translate.instant("alias.filter-type-device-search-query-description",E)}else if(this.filter.type===c.V6.edgeSearchQuery){const f=[];this.filter.edgeTypes.forEach(y=>{f.push(`'${y}'`)});const g=f.join(", ");E.edgeTypes=g,this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-search-query-description",E)}else if(this.filter.type===c.V6.entityViewSearchQuery){const f=[];this.filter.entityViewTypes.forEach(y=>{f.push(`'${y}'`)});const g=f.join(", ");E.entityViewTypes=g,this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-search-query-description",E)}break;default:this.filterDisplayValue=this.filter.type}}else this.filterDisplayValue=""}static{this.\u0275fac=function(z){return new(z||H)(e.\u0275\u0275directiveInject(V.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:H,selectors:[["tb-entity-filter-view"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>H),multi:!0}])],decls:4,vars:2,consts:[["filterView",""],[1,"tb-entity-filter-view","flex","flex-col"],["class","entity-filter-empty","translate","",4,"ngIf","ngIfElse"],["translate","",1,"entity-filter-empty"],[1,"flex","flex-col"],[1,"entity-filter-value"]],template:function(z,L){if(1&z&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,G,2,0,"div",2)(2,K,3,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&z){const B=e.\u0275\u0275reference(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!L.filter||!L.filter.type)("ngIfElse",B)}},dependencies:[S.NgIf,V.TranslateDirective],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-empty[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:#dd2c00de}[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-type[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:#00000091}[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-value[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:#00000091}']})}}},5986:(Re,X,n)=>{"use strict";n.d(X,{M:()=>h});var e=n(69749),t=n(93953),c=n(9310);class h extends e.H{set entitiesTableConfig(S){this.setEntitiesTableConfig(S)}get entitiesTableConfig(){return this.entitiesTableConfigValue}constructor(S){super(S),this.store=S}ngOnInit(){}setEntitiesTableConfig(S){this.entitiesTableConfigValue=S}static{this.\u0275fac=function(G){return new(G||h)(t.\u0275\u0275directiveInject(c.Store))}}static{this.\u0275dir=t.\u0275\u0275defineDirective({type:h,inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[t.\u0275\u0275InheritDefinitionFeature]})}}},61172:(Re,X,n)=>{"use strict";n.d(X,{P:()=>L});var e=n(69749),t=n(93953),c=n(96850),h=n(84412),V=n(9437),S=n(63729),G=n(25967),K=n(57713),H=n(84117),k=n(10320),Q=n(39519),z=n(9310);class L extends e.H{set isEdit(I){this.isEditValue=I}get isEdit(){return this.isEditValue}set entity(I){this.setEntity(I)}get entity(){return this.entityValue}set entitiesTableConfig(I){this.setEntitiesTableConfig(I)}get entitiesTableConfig(){return this.entitiesTableConfigValue}constructor(I){super(I),this.store=I,this.attributeScopes=k.BY,this.latestTelemetryTypes=k.bX,this.authorities=V.s,this.entityTypes=G.ck,this.auditLogModes=K.xY,this.eventTypes=H.Bx,this.debugEventTypes=H.U3,this.nullUid=Q.k,this.entityTabsSubject=new h.t(null),this.entityTabsChanged=this.entityTabsSubject.asObservable(),this.authUser=(0,S.rx)(I)}ngOnInit(){}ngAfterViewInit(){this.entityTabsSubject.next(this.entityTabs.toArray()),this.entityTabs.changes.subscribe(()=>{this.entityTabsSubject.next(this.entityTabs.toArray())})}setEntity(I){this.entityValue=I}setEntitiesTableConfig(I){this.entitiesTableConfigValue=I}static{this.\u0275fac=function(U){return new(U||L)(t.\u0275\u0275directiveInject(z.Store))}}static{this.\u0275dir=t.\u0275\u0275defineDirective({type:L,viewQuery:function(U,F){if(1&U&&t.\u0275\u0275viewQuery(c.MatTab,5),2&U){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(F.entityTabs=a)}},inputs:{isEdit:"isEdit",entity:"entity",entitiesTableConfig:"entitiesTableConfig",detailsForm:"detailsForm"},features:[t.\u0275\u0275InheritDefinitionFeature]})}}},74208:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EventContentDialogComponent:()=>F});var e=n(93953),t=n(34006),c=n(56542),h=n(74972),V=n(3408),S=n(96778),G=n(7673),K=n(27997),H=n(9310),k=n(7901),Q=n(88834),z=n(99213),L=n(55911),B=n(73955),I=n(60177);const U=["eventContentEditor"];class F extends c.m{constructor(O,P,A,u,m){super(O,P,u),this.store=O,this.router=P,this.data=A,this.dialogRef=u,this.renderer=m}ngOnInit(){this.content=this.data.content,this.title=this.data.title,this.contentType=this.data.contentType,this.createEditor(this.eventContentEditorElmRef,this.content)}ngOnDestroy(){this.aceEditor&&this.aceEditor.destroy(),super.ngOnDestroy()}isJson(O){try{return(0,K.Vh)(JSON.parse(O))}catch{return!1}}createEditor(O,P){const A=O.nativeElement;let u="java",m=null;if(this.contentType)if(u=h.z4.get(this.contentType).code,this.contentType===h.cM.JSON&&P)m=(0,S.hh)(P,{indent_size:4});else if(this.contentType===h.cM.BINARY&&P)try{const p=(0,K.yH)(P);this.isJson(p)?(u="json",m=(0,S.hh)(p,{indent_size:4})):m=(0,G.of)(p)}catch{}m||(m=(0,G.of)(P)),m.subscribe(p=>{let v={mode:`ace/mode/${u}`,theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};v={...v,enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},(0,V.eB)().subscribe(C=>{this.aceEditor=C.edit(A,v),this.aceEditor.session.setUseWrapMode(!1),this.aceEditor.setValue(p,-1),this.updateEditorSize(A,p,this.aceEditor)})})}updateEditorSize(O,P,A){let u=400,m=600;if(P&&P.length>0){const p=P.split("\n");u=16*p.length+16;let v=0;p.forEach(T=>{const _=T.replace(/\t/g,"    ").replace(/\n/g,"").length;v=Math.max(v,_)}),m=8*v+16}this.renderer.setStyle(O,"minHeight",u.toString()+"px"),this.renderer.setStyle(O,"height",u.toString()+"px"),this.renderer.setStyle(O,"width",m.toString()+"px"),A.resize()}static{this.\u0275fac=function(P){return new(P||F)(e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(k.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(e.Renderer2))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["tb-event-content-dialog"]],viewQuery:function(P,A){if(1&P&&e.\u0275\u0275viewQuery(U,7),2&P){let u;e.\u0275\u0275queryRefresh(u=e.\u0275\u0275loadQuery())&&(A.eventContentEditorElmRef=u.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:16,vars:9,consts:[["eventContentEditor",""],["color","primary",1,"flex","flex-row"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","",1,"flex","flex-col"],[1,"tb-event-content"],["mat-dialog-actions","",1,"flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(P,A){1&P&&(e.\u0275\u0275elementStart(0,"mat-toolbar",1)(1,"h2",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",3),e.\u0275\u0275elementStart(4,"button",4)(5,"mat-icon",5),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275element(8,"div",7,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275element(11,"span",3),e.\u0275\u0275elementStart(12,"button",9),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()),2&P&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.title),e.\u0275\u0275advance(2),e.\u0275\u0275property("mat-dialog-close",!1),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(13,5,A.isLoading$))("mat-dialog-close",!1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,7,"action.close")," "))},dependencies:[Q.MatButton,Q.MatIconButton,z.MatIcon,L.MatToolbar,t.MatDialogClose,t.MatDialogActions,t.MatDialogContent,B.TranslateDirective,I.AsyncPipe,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-event-content[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px}']})}}},56029:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EVENT_FILTER_PANEL_DATA:()=>u,EventFilterPanelComponent:()=>m});var e=n(93953),t=n(89417),c=n(25967),h=n(27997),V=n(47987),S=n(60177),G=n(37850),K=n(88834),H=n(59042),k=n(53719),Q=n(82798),z=n(86600),L=n(73955);function B(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&p){const T=v.$implicit;e.\u0275\u0275property("value",T),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",T," ")}}function I(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",9)(5,"mat-option",10),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,B,2,2,"mat-option",11),e.\u0275\u0275elementEnd()()),2&p){const T=e.\u0275\u0275nextContext().$implicit,C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,T.title)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControlName",T.key),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,6,"event.all-events")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",C.selectorValues(T.key))}}function U(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"event.min-value")," "))}function F(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",12),e.\u0275\u0275template(5,U,3,3,"mat-error",13),e.\u0275\u0275elementEnd()),2&p){const T=e.\u0275\u0275nextContext().$implicit,C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,T.title)),e.\u0275\u0275advance(2),e.\u0275\u0275property("name",T.key)("formControlName",T.key),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C.eventFilterFormGroup.get(T.key).hasError("min"))}}function a(p,v){if(1&p){const T=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-checkbox",14),e.\u0275\u0275listener("ngModelChange",function(_){e.\u0275\u0275restoreView(T);const E=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(E.changeIsError(_))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&p&&(e.\u0275\u0275property("falseValue",""),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"event.has-error")," "))}function O(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",15),e.\u0275\u0275elementEnd()),2&p){const T=e.\u0275\u0275nextContext().$implicit,C=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",!C.showErrorMsgFields()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,T.title))}}function P(p,v){if(1&p&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field")(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&p){const T=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,T.title)),e.\u0275\u0275advance(2),e.\u0275\u0275property("name",T.key)("formControlName",T.key)}}function A(p,v){if(1&p&&(e.\u0275\u0275elementContainerStart(0)(1,6),e.\u0275\u0275template(2,I,9,8,"ng-template",7)(3,F,6,6,"ng-template",7)(4,a,3,4,"ng-template",7)(5,O,5,5,"ng-template",7)(6,P,6,5,"ng-container",8),e.\u0275\u0275elementContainerEnd()()),2&p){const T=v.$implicit,C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",T.key),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",C.isSelector(T.key)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",C.isNumberFields(T.key)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","isError"),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase","errorStr")}}const u=new e.InjectionToken("AlarmFilterPanelData");class m{constructor(v,T,C){this.data=v,this.overlayRef=T,this.fb=C,this.conditionError=!1,this.msgDirectionTypes=["IN","OUT"],this.statusTypes=["Success","Failure"],this.entityTypes=Object.keys(c.ck),this.showColumns=[],this.eventFilterFormGroup=this.fb.group({}),this.data.columns.forEach(_=>{this.showColumns.push(_);const E=[];this.isNumberFields(_.key)&&E.push(t.Validators.min(0)),this.eventFilterFormGroup.addControl(_.key,this.fb.control(this.data.filterParams[_.key]||"",E)),"isError"===_.key&&(this.conditionError=!0)})}isSelector(v){return["msgDirectionType","status","entityName"].includes(v)?v:""}isNumberFields(v){return["minMessagesProcessed","maxMessagesProcessed","minErrorsOccurred","maxErrorsOccurred"].includes(v)?v:""}selectorValues(v){switch(v){case"msgDirectionType":return this.msgDirectionTypes;case"status":return this.statusTypes;case"entityName":return this.entityTypes}}update(){const v=(0,h.XU)(Object.fromEntries(Object.entries(this.eventFilterFormGroup.value).filter(([T,C])=>""!==C)));this.result={filterParams:v,columns:this.data.columns},this.overlayRef.dispose()}showErrorMsgFields(){return!this.conditionError||""!==this.eventFilterFormGroup.get("isError").value}cancel(){this.overlayRef.dispose()}changeIsError(v){this.conditionError&&""===v&&this.eventFilterFormGroup.get("errorStr").reset("",{emitEvent:!1})}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(u),e.\u0275\u0275directiveInject(V.OverlayRef),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-event-filter-panel"]],decls:10,vars:9,consts:[[1,"tb-filter","flex","flex-col",3,"ngSubmit","formGroup"],[1,"tb-filter-container","mat-padding","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"tb-panel-actions","mat-padding","flex","flex-row","items-center","justify-end"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"ngSwitch"],[3,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"formControlName"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","0",3,"name","formControlName"],[4,"ngIf"],["formControlName","isError",3,"ngModelChange","falseValue"],["matInput","","type","text","name","errorSearchText","formControlName","errorStr"],["matInput","","type","text",3,"name","formControlName"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return C.update()}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,A,7,5,"ng-container",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"button",4),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()()),2&T&&(e.\u0275\u0275property("formGroup",C.eventFilterFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",C.showColumns),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,5,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",C.eventFilterFormGroup.invalid||!C.eventFilterFormGroup.dirty),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,7,"action.update")," "))},dependencies:[S.NgForOf,S.NgIf,S.NgSwitch,S.NgSwitchCase,S.NgSwitchDefault,G.TbCheckboxComponent,K.MatButton,H.MatInput,k.MatFormField,k.MatLabel,k.MatError,Q.MatSelect,z.MatOption,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.MinValidator,t.FormGroupDirective,t.FormControlName,L.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;min-width:300px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-filter-container[_ngcontent-%COMP%]{overflow:auto}']})}}},19386:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EventTableHeaderComponent:()=>z});var e=n(93953),t=n(5986),c=n(84117),h=n(9310),V=n(60177),S=n(53719),G=n(82798),K=n(86600),H=n(89417),k=n(73955);function Q(L,B){if(1&L&&(e.\u0275\u0275elementStart(0,"mat-option",4),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&L){const I=B.$implicit,U=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",I),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,U.eventTypeTranslationsMap.get(I))," ")}}class z extends t.M{get eventTableConfig(){return this.entitiesTableConfig}constructor(B){super(B),this.store=B,this.eventTypeTranslationsMap=c.j6}eventTypeChanged(B){this.eventTableConfig.eventType=B,this.eventTableConfig.getTable().resetSortAndFilter(!0,!0)}static{this.\u0275fac=function(I){return new(I||z)(e.\u0275\u0275directiveInject(h.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["tb-event-table-header"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:2,consts:[[1,"mat-block"],["translate",""],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(I,U){1&I&&(e.\u0275\u0275elementStart(0,"mat-form-field",0)(1,"mat-label",1),e.\u0275\u0275text(2,"event.event-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",2),e.\u0275\u0275listener("ngModelChange",function(a){return U.eventTypeChanged(a)}),e.\u0275\u0275template(4,Q,3,4,"mat-option",3),e.\u0275\u0275elementEnd()()),2&I&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",U.eventTableConfig.eventType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",U.eventTableConfig.eventTypes))},dependencies:[V.NgForOf,S.MatFormField,S.MatLabel,G.MatSelect,K.MatOption,H.NgControlStatus,H.NgModel,k.TranslateDirective,k.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding-right:8px;min-width:160px}']})}}},29414:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EventTableComponent:()=>u});var e=n(93953),t=n(8968),c=n(12054),h=n(84117),V=n(19386),S=n(33726),G=n(67496),K=n(74972),H=n(74208),k=n(27997),Q=n(53244),z=n(47987),L=n(76939),B=n(56029),I=n(55645);class U extends c.M7{set eventType(p){this.eventTypeValue!==p&&(this.eventTypeValue=p,this.updateCellAction(),this.updateColumns(!0),this.updateFilterColumns())}get eventType(){return this.eventTypeValue}constructor(p,v,T,C,_,E,f,g,y=null,b=null,D,w,ee,_e,ve){super(),this.eventService=p,this.dialogService=v,this.translate=T,this.datePipe=C,this.dialog=_,this.entityId=E,this.tenantId=f,this.defaultEventType=g,this.disabledEventTypes=y,this.debugEventTypes=b,this.overlay=D,this.viewContainerRef=w,this.cd=ee,this.testButtonLabel=_e,this.debugEventSelected=ve,this.hideClearEventAction=!1,this.filterParams={},this.filterColumns=[],this.loadDataOnInit=!1,this.tableTitle="",this.useTimePageLink=!0,this.defaultTimewindowInterval=(0,Q.e5)(15*Q.pY),this.detailsPanelEnabled=!1,this.selectionEnabled=!1,this.searchEnabled=!1,this.addEnabled=!1,this.entitiesDeleteEnabled=!1,this.pageMode=!1,this.headerComponent=V.EventTableHeaderComponent,this.eventTypes=Object.keys(h.Bx).map(Ee=>h.Bx[Ee]),y&&y.length&&(this.eventTypes=this.eventTypes.filter(Ee=>-1===y.indexOf(Ee))),b&&b.length&&(this.eventTypes=[...this.eventTypes,...b]),this.eventTypeValue=g,this.entityTranslations={noEntities:"event.no-events-prompt"},this.entityResources={},this.entitiesFetchFunction=Ee=>this.fetchEvents(Ee),this.defaultSortOrder={property:"createdTime",direction:G.O.DESC},this.updateColumns(),this.updateCellAction(),this.updateFilterColumns(),this.headerActionDescriptors.push({name:this.translate.instant("event.clear-filter"),icon:"mdi:filter-variant-remove",isEnabled:()=>!(0,k.n4)(this.filterParams,{}),onAction:Ee=>{this.clearFiter(Ee)}},{name:this.translate.instant("event.events-filter"),icon:"filter_list",isEnabled:()=>!0,onAction:Ee=>{this.editEventFilter(Ee)}},{name:this.translate.instant("event.clean-events"),icon:"delete",isEnabled:()=>!this.hideClearEventAction,onAction:Ee=>this.clearEvents(Ee)})}clearEvents(p){p&&p.stopPropagation(),this.dialogService.confirm(this.translate.instant("event.clear-request-title"),this.translate.instant("event.clear-request-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(v=>{v&&this.eventService.clearEvents(this.entityId,this.eventType,this.filterParams,this.tenantId,this.getTable().pageLink).subscribe(()=>{this.getTable().paginator.pageIndex=0,this.updateData()})})}fetchEvents(p){return this.eventService.getFilterEvents(this.entityId,this.eventType,this.tenantId,this.filterParams,p)}updateColumns(p=!1){switch(this.columns=[],this.columns.push(new c.Qr("createdTime","event.event-time",this.datePipe,"120px","yyyy-MM-dd HH:mm:ss.SSS"),new c.KK("server","event.server","100px",v=>v.body.server,v=>({}),!1)),this.eventType){case h.Bx.ERROR:this.columns.push(new c.KK("method","event.method","100%",v=>v.body.method,v=>({}),!1),new c.aN("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>v.body.error&&v.body.error.length>0,onAction:(v,T)=>this.showContent(v,T.body.error,"event.error")},"100px"));break;case h.Bx.LC_EVENT:this.columns.push(new c.KK("method","event.event","100%",v=>v.body.event,v=>({}),!1),new c.KK("status","event.status","100%",v=>this.translate.instant(v.body.success?"event.success":"event.failed"),v=>({}),!1),new c.aN("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>v.body.error&&v.body.error.length>0,onAction:(v,T)=>this.showContent(v,T.body.error,"event.error")},"100px"));break;case h.Bx.STATS:this.columns.push(new c.KK("messagesProcessed","event.messages-processed","50%",v=>v.body.messagesProcessed+"",()=>({}),!1,()=>({}),()=>{},!0),new c.KK("errorsOccurred","event.errors-occurred","50%",v=>v.body.errorsOccurred+"",()=>({}),!1,()=>({}),()=>{},!0));break;case h.U3.DEBUG_RULE_NODE:this.columns[0].width="80px",this.columns[1].headerCellStyleFunction=()=>({padding:"0 12px 0 0"}),this.columns[1].cellStyleFunction=()=>({padding:"0 12px 0 0"}),this.columns.push(new c.KK("type","event.type","40px",v=>v.body.type,v=>({padding:"0 12px 0 0"}),!1,v=>({padding:"0 12px 0 0"})),new c.KK("entityType","event.entity-type","75px",v=>v.body.entityType,v=>({padding:"0 12px 0 0"}),!1,v=>({padding:"0 12px 0 0"})),new c.KK("entityId","event.entity-id","85px",v=>`<span style="display: inline-block; width: 7ch">${v.body.entityId.substring(0,6)}\u2026</span>`,()=>({padding:"0 12px 0 0"}),!1,()=>({padding:"0 12px 0 0"}),()=>{},!1,{name:this.translate.instant("event.copy-entity-id"),icon:"content_paste",style:{padding:"4px","font-size":"16px",color:"rgba(0,0,0,.87)"},isEnabled:()=>!0,onAction:(v,T)=>T.body.entityId,type:c.Uk.COPY_BUTTON}),new c.KK("msgId","event.message-id","85px",v=>`<span style="display: inline-block; width: 7ch">${v.body.msgId.substring(0,6)}\u2026</span>`,()=>({padding:"0 12px 0 0"}),!1,()=>({padding:"0 12px 0 0"}),()=>{},!1,{name:this.translate.instant("event.copy-message-id"),icon:"content_paste",style:{padding:"4px","font-size":"16px",color:"rgba(0,0,0,.87)"},isEnabled:()=>!0,onAction:(v,T)=>T.body.msgId,type:c.Uk.COPY_BUTTON}),new c.KK("msgType","event.message-type","100px",v=>v.body.msgType,v=>({whiteSpace:"nowrap",padding:"0 12px 0 0"}),!1,v=>({padding:"0 12px 0 0"}),v=>v.body.msgType),new c.KK("relationType","event.relation-type","85px",v=>v.body.relationType,()=>({padding:"0 12px 0 0"}),!1,()=>({padding:"0 12px 0 0"})),new c.aN("data","event.data",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>!!v.body.data&&v.body.data.length>0,onAction:(v,T)=>this.showContent(v,T.body.data,"event.data",T.body.dataType)},"48px"),new c.aN("metadata","event.metadata",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>!!v.body.metadata&&v.body.metadata.length>0,onAction:(v,T)=>this.showContent(v,T.body.metadata,"event.metadata",K.cM.JSON,!0)},"48px"),new c.aN("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>v.body.error&&v.body.error.length>0,onAction:(v,T)=>this.showContent(v,T.body.error,"event.error")},"48px"));break;case h.U3.DEBUG_RULE_CHAIN:this.columns[0].width="100px",this.columns.push(new c.aN("message","event.message",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>!!v.body.message&&v.body.message.length>0,onAction:(v,T)=>this.showContent(v,T.body.message,"event.message")},"48px"),new c.aN("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:v=>v.body.error&&v.body.error.length>0,onAction:(v,T)=>this.showContent(v,T.body.error,"event.error")},"48px"))}p&&this.getTable().columnsUpdated(!0)}updateCellAction(){if(this.cellActionDescriptors=[],this.eventType===h.U3.DEBUG_RULE_NODE)this.testButtonLabel&&this.cellActionDescriptors.push({name:this.translate.instant("rulenode.test-with-this-message",{test:this.translate.instant(this.testButtonLabel)}),icon:"bug_report",isEnabled:p=>"IN"===p.body.type||void 0!==p.body.error,onAction:(p,v)=>{this.debugEventSelected.next(v.body)}});this.getTable()?.cellActionDescriptorsUpdated()}showContent(p,v,T,C=null,_=!1){if(p&&p.stopPropagation(),C===K.cM.JSON&&_)try{v=JSON.stringify((0,k.gG)(JSON.parse(v)))}catch{}this.dialog.open(H.EventContentDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{content:v,title:T,contentType:C}})}updateFilterColumns(){switch(this.filterParams={},this.filterColumns=[{key:"server",title:"event.server"}],this.eventType){case h.Bx.ERROR:this.filterColumns.push({key:"method",title:"event.method"},{key:"errorStr",title:"event.error"});break;case h.Bx.LC_EVENT:this.filterColumns.push({key:"event",title:"event.event"},{key:"status",title:"event.status"},{key:"errorStr",title:"event.error"});break;case h.Bx.STATS:this.filterColumns.push({key:"minMessagesProcessed",title:"event.min-messages-processed"},{key:"maxMessagesProcessed",title:"event.max-messages-processed"},{key:"minErrorsOccurred",title:"event.min-errors-occurred"},{key:"maxErrorsOccurred",title:"event.max-errors-occurred"});break;case h.U3.DEBUG_RULE_NODE:this.filterColumns.push({key:"msgDirectionType",title:"event.type"},{key:"entityId",title:"event.entity-id"},{key:"entityType",title:"event.entity-type"},{key:"msgId",title:"event.message-id"},{key:"msgType",title:"event.message-type"},{key:"relationType",title:"event.relation-type"},{key:"dataSearch",title:"event.data"},{key:"metadataSearch",title:"event.metadata"},{key:"isError",title:"event.error"},{key:"errorStr",title:"event.error"});break;case h.U3.DEBUG_RULE_CHAIN:this.filterColumns.push({key:"message",title:"event.message"},{key:"isError",title:"event.error"},{key:"errorStr",title:"event.error"})}}clearFiter(p){p&&p.stopPropagation(),this.filterParams={},this.getTable().paginator.pageIndex=0,this.updateData()}editEventFilter(p){p&&p.stopPropagation();const v=p.target||p.srcElement||p.currentTarget,T=new z.OverlayConfig({panelClass:"tb-panel-container",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0,height:"fit-content",maxHeight:"65vh"});T.positionStrategy=this.overlay.position().flexibleConnectedTo(v).withPositions(I.w);const C=this.overlay.create(T);C.backdropClick().subscribe(()=>{C.dispose()});const _=[{provide:B.EVENT_FILTER_PANEL_DATA,useValue:{columns:this.filterColumns,filterParams:this.filterParams}},{provide:z.OverlayRef,useValue:C}],E=e.Injector.create({parent:this.viewContainerRef.injector,providers:_}),f=C.attach(new L.ComponentPortal(B.EventFilterPanelComponent,this.viewContainerRef,E)),g=(0,S.R)(window,"resize").subscribe(()=>{C.updatePosition()});f.onDestroy(()=>{g.unsubscribe(),f.instance.result&&!(0,k.n4)(this.filterParams,f.instance.result.filterParams)&&(this.filterParams=f.instance.result.filterParams,this.getTable().paginator.pageIndex=0,this.updateData())}),this.cd.detectChanges()}}var F=n(2932),a=n(80216),O=n(73955),P=n(60177),A=n(34006);class u{get active(){return this.activeValue}set active(p){this.activeValue!==p&&(this.activeValue=p,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))}set entityId(p){this.entityIdValue=p,this.eventTableConfig&&this.eventTableConfig.entityId!==p&&(this.eventTableConfig.eventType=this.defaultEventType,this.eventTableConfig.entityId=p,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}get functionTestButtonLabel(){return this.functionTestButtonLabelValue}set functionTestButtonLabel(p){(0,k.Q8)(p)?this.functionTestButtonLabelValue=p:this.functionTestButtonLabelValue="",this.eventTableConfig&&(this.eventTableConfig.testButtonLabel=this.functionTestButtonLabel,this.eventTableConfig.updateCellAction())}constructor(p,v,T,C,_,E,f,g){this.eventService=p,this.dialogService=v,this.translate=T,this.datePipe=C,this.dialog=_,this.overlay=E,this.viewContainerRef=f,this.cd=g,this.activeValue=!1,this.dirtyValue=!1,this.debugEventSelected=new e.EventEmitter}ngOnInit(){this.dirtyValue=!this.activeValue,this.eventTableConfig=new U(this.eventService,this.dialogService,this.translate,this.datePipe,this.dialog,this.entityIdValue,this.tenantId,this.defaultEventType,this.disabledEventTypes,this.debugEventTypes,this.overlay,this.viewContainerRef,this.cd,this.functionTestButtonLabel,this.debugEventSelected)}ngAfterViewInit(){this.isEmptyData$=this.entitiesTable.dataSource.isEmpty().subscribe(p=>this.eventTableConfig.hideClearEventAction=p)}ngOnDestroy(){this.isEmptyData$&&this.isEmptyData$.unsubscribe()}static{this.\u0275fac=function(v){return new(v||u)(e.\u0275\u0275directiveInject(F.U),e.\u0275\u0275directiveInject(a.o),e.\u0275\u0275directiveInject(O.TranslateService),e.\u0275\u0275directiveInject(P.DatePipe),e.\u0275\u0275directiveInject(A.MatDialog),e.\u0275\u0275directiveInject(z.Overlay),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["tb-event-table"]],viewQuery:function(v,T){if(1&v&&e.\u0275\u0275viewQuery(t.EntitiesTableComponent,7),2&v){let C;e.\u0275\u0275queryRefresh(C=e.\u0275\u0275loadQuery())&&(T.entitiesTable=C.first)}},inputs:{tenantId:"tenantId",defaultEventType:"defaultEventType",disabledEventTypes:"disabledEventTypes",debugEventTypes:"debugEventTypes",active:"active",entityId:"entityId",functionTestButtonLabel:"functionTestButtonLabel"},outputs:{debugEventSelected:"debugEventSelected"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(v,T){1&v&&e.\u0275\u0275element(0,"tb-entities-table",0),2&v&&e.\u0275\u0275property("entitiesTableConfig",T.eventTableConfig)},dependencies:[t.EntitiesTableComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}']})}}},4452:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{BooleanFilterPredicateComponent:()=>Q});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(53719),S=n(82798),G=n(86600),K=n(61219),H=n(73955);function k(z,L){if(1&z&&(e.\u0275\u0275elementStart(0,"mat-option",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&z){const B=L.$implicit,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",B),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,I.booleanOperationTranslations.get(I.booleanOperationEnum[B]))," ")}}class Q{constructor(L){this.fb=L,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=c.w_,this.booleanOperations=Object.keys(c.OQ),this.booleanOperationEnum=c.OQ,this.booleanOperationTranslations=c.Xg,this.propagateChange=null}ngOnInit(){this.booleanFilterPredicateFormGroup=this.fb.group({operation:[c.OQ.EQUAL,[t.Validators.required]],value:[null,[t.Validators.required]]}),this.booleanFilterPredicateFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(L){this.propagateChange=L}registerOnTouched(L){}setDisabledState(L){this.disabled=L,this.disabled?this.booleanFilterPredicateFormGroup.disable({emitEvent:!1}):this.booleanFilterPredicateFormGroup.enable({emitEvent:!1})}validate(){return this.booleanFilterPredicateFormGroup?null:{booleanFilterPredicate:{valid:!1}}}writeValue(L){this.booleanFilterPredicateFormGroup.get("operation").patchValue(L.operation,{emitEvent:!1}),this.booleanFilterPredicateFormGroup.get("value").patchValue(L.value,{emitEvent:!1})}updateModel(){let L=null;this.booleanFilterPredicateFormGroup.valid&&(L=this.booleanFilterPredicateFormGroup.getRawValue(),L.type=c.E1.BOOLEAN),this.propagateChange(L)}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-boolean-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Q),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>Q),multi:!0}])],decls:6,vars:8,consts:[[1,"flex","flex-1","flex-row","items-start","justify-start","gap-2",3,"formGroup"],["hideRequiredMarker","",1,"mat-block","max-w-30%","flex-full"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","value",1,"max-w-70%","flex-full",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,k,3,4,"mat-option",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"tb-filter-predicate-value",4),e.\u0275\u0275elementEnd()),2&B&&(e.\u0275\u0275property("formGroup",I.booleanFilterPredicateFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,6,"filter.operation.operation")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",I.booleanOperations),e.\u0275\u0275advance(),e.\u0275\u0275property("allowUserDynamicSource",I.allowUserDynamicSource)("onlyUserDynamicSource",I.onlyUserDynamicSource)("valueType",I.valueTypeEnum.BOOLEAN))},dependencies:[h.NgForOf,V.MatFormField,S.MatSelect,G.MatOption,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,K.FilterPredicateValueComponent,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper:before{content:none}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-infix{width:auto;min-width:auto}']})}}},7148:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{ComplexFilterPredicateComponent:()=>z});var e=n(93953),t=n(89417),h=(n(93064),n(27997)),V=n(20737),S=n(34006),G=n(88834),K=n(99213),H=n(53719),k=n(14823),Q=n(73955);class z{constructor(B,I){this.complexFilterPredicateDialogComponent=B,this.dialog=I,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.propagateChange=null}ngOnInit(){}registerOnChange(B){this.propagateChange=B}registerOnTouched(B){}setDisabledState(B){this.disabled=B}writeValue(B){this.complexFilterPredicate=B}openComplexFilterDialog(){this.dialog.open(this.complexFilterPredicateDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:this.disabled?this.complexFilterPredicate:(0,h.Go)(this.complexFilterPredicate),readonly:this.disabled,valueType:this.valueType,isAdd:!1,key:this.key,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().subscribe(B=>{B&&(this.complexFilterPredicate=B,this.updateModel())})}updateModel(){this.propagateChange(this.complexFilterPredicate)}static{this.\u0275fac=function(I){return new(I||z)(e.\u0275\u0275directiveInject(V.X0),e.\u0275\u0275directiveInject(S.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["tb-complex-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>z),multi:!0}])],decls:7,vars:4,consts:[[1,"flex","flex-1","flex-row","items-center","justify-start","gap-2"],["translate",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"]],template:function(I,U){1&I&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-label",1),e.\u0275\u0275text(2,"filter.complex-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",2),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275listener("click",function(){return U.openComplexFilterDialog()}),e.\u0275\u0275elementStart(5,"mat-icon"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()()),2&I&&(e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,2,U.disabled?"filter.complex-filter":"filter.edit-complex-filter")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(U.disabled?"more_vert":"edit"))},dependencies:[G.MatIconButton,K.MatIcon,H.MatLabel,k.MatTooltip,Q.TranslateDirective,Q.TranslatePipe],encapsulation:2})}}},90934:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterPredicateListComponent:()=>u});var e=n(93953),t=n(89417),c=n(18530),h=n(7673),V=n(93064),S=n(56977),G=n(96354),K=n(20737),H=n(34006),k=n(60177),Q=n(88834),z=n(99213),L=n(14823),B=n(71997),I=n(9454),U=n(73955),F=n(71635);function a(m,p){1&m&&(e.\u0275\u0275elementStart(0,"label",19),e.\u0275\u0275text(1,"filter.ignore-case"),e.\u0275\u0275elementEnd())}function O(m,p){1&m&&(e.\u0275\u0275elementStart(0,"label",20),e.\u0275\u0275text(1,"filter.user-parameters"),e.\u0275\u0275elementEnd())}function P(m,p){if(1&m&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m){const v=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,v.complexOperationTranslations.get(v.operation)))}}function A(m,p){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",21)(1,"div",22),e.\u0275\u0275template(2,P,3,3,"span",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",24)(4,"div",25),e.\u0275\u0275element(5,"tb-filter-predicate",26),e.\u0275\u0275elementStart(6,"button",27),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275listener("click",function(){const C=e.\u0275\u0275restoreView(v).index,_=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.removePredicate(C))}),e.\u0275\u0275elementStart(8,"mat-icon"),e.\u0275\u0275text(9,"close"),e.\u0275\u0275elementEnd()()()()()}if(2&m){const v=p.$implicit,T=p.index,C=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",T>0),e.\u0275\u0275advance(3),e.\u0275\u0275property("valueType",C.valueType)("displayUserParameters",C.displayUserParameters)("allowUserDynamicSource",C.allowUserDynamicSource)("onlyUserDynamicSource",C.onlyUserDynamicSource)("key",C.key)("formControl",v),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",C.disabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(7,10,"filter.remove-filter"))}}class u{constructor(p,v,T){this.fb=p,this.complexFilterPredicateDialogComponent=v,this.dialog=T,this.operation=V.Ad.AND,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=V.w_,this.complexOperationTranslations=V.Nj,this.destroy$=new c.B,this.propagateChange=null}ngOnInit(){this.filterListFormGroup=this.fb.group({predicates:this.fb.array([])}),this.filterListFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get predicatesFormArray(){return this.filterListFormGroup.get("predicates")}registerOnChange(p){this.propagateChange=p}registerOnTouched(p){}setDisabledState(p){this.disabled=p,this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})}validate(p){return this.filterListFormGroup.valid?null:{filterList:{valid:!1}}}writeValue(p){if(p.length===this.predicatesFormArray.length)this.predicatesFormArray.patchValue(p,{emitEvent:!1});else{const v=[];if(p)for(const T of p)v.push(this.fb.control(T,[t.Validators.required]));this.filterListFormGroup.setControl("predicates",this.fb.array(v),{emitEvent:!1}),this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})}}removePredicate(p){this.predicatesFormArray.removeAt(p)}addPredicate(p){const v=this.filterListFormGroup.get("predicates"),T=(0,V.tS)(this.valueType,p);let C;C=p?this.openComplexFilterDialog(T):(0,h.of)(T),C.subscribe(_=>{_&&v.push(this.fb.control(_,[t.Validators.required]))})}openComplexFilterDialog(p){return this.dialog.open(this.complexFilterPredicateDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:p.keyFilterPredicate,readonly:this.disabled,valueType:this.valueType,key:this.key,isAdd:!0,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().pipe((0,G.T)(v=>v?(p.keyFilterPredicate=v,p):null))}updateModel(){const p=this.filterListFormGroup.getRawValue().predicates;p.length?this.propagateChange(p):this.propagateChange(null)}static{this.\u0275fac=function(v){return new(v||u)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(K.X0),e.\u0275\u0275directiveInject(H.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["tb-filter-predicate-list"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",operation:"operation",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>u),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>u),multi:!0}])],decls:33,vars:27,consts:[[1,"flex","flex-col",3,"formGroup"],[3,"expanded"],["translate",""],[1,"flex","flex-row"],[1,"max-w-8%","flex-full"],[1,"flex","max-w-92%","flex-full","flex-row","items-center","justify-start","gap-2"],[1,"flex","flex-1","flex-row","gap-2"],[1,"flex","max-w-30%","flex-full","flex-row","items-center","justify-start","gap-2"],["translate","",1,"tb-title","no-padding","flex-1"],["translate","","class","tb-title no-padding","style","min-width: 70px;",4,"ngIf"],["translate","",1,"tb-title","no-padding","max-w-70%","flex-full"],["translate","","class","tb-title no-padding","style","width: 60px;",4,"ngIf"],[2,"min-width","40px"],[2,"padding-bottom","5px"],[1,"predicate-list"],["class","flex flex-row items-stretch justify-start","style","height: 76px;","formArrayName","predicates",4,"ngFor","ngForOf"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[1,"flex","flex-row","gap-2",2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],["translate","",1,"tb-title","no-padding",2,"min-width","70px"],["translate","",1,"tb-title","no-padding",2,"width","60px"],["formArrayName","predicates",1,"flex","flex-row","items-stretch","justify-start",2,"height","76px"],[1,"filters-operation","flex","max-w-8%","flex-full","flex-row","items-stretch","justify-center"],[4,"ngIf"],[1,"flex","max-w-92%","flex-full","flex-col"],[1,"flex","flex-1","flex-row","items-center","justify-start","gap-2"],[1,"flex-1",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","key","formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"]],template:function(v,T){1&v&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"div",2),e.\u0275\u0275text(5,"filter.filters"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div",3),e.\u0275\u0275element(7,"span",4),e.\u0275\u0275elementStart(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e.\u0275\u0275text(12,"filter.operation.operation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,a,2,0,"label",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"label",10),e.\u0275\u0275text(15,"filter.value"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,O,2,0,"label",11),e.\u0275\u0275elementStart(17,"span",12),e.\u0275\u0275text(18,"\xa0"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(19,"mat-divider",13),e.\u0275\u0275elementStart(20,"div",14),e.\u0275\u0275template(21,A,10,12,"div",15),e.\u0275\u0275elementStart(22,"span",16),e.\u0275\u0275text(23,"filter.no-filters"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",17)(25,"button",18),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275listener("click",function(){return T.addPredicate(!1)}),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"button",18),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275listener("click",function(){return T.addPredicate(!0)}),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementEnd()()()()),2&v&&(e.\u0275\u0275property("formGroup",T.filterListFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",T.valueType===T.valueTypeEnum.STRING),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",T.displayUserParameters),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",T.disabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",T.predicatesFormArray.controls),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!!T.predicatesFormArray.length)("disabled",T.disabled),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",T.disabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(26,19,"filter.add-filter")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,21,"action.add")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",T.disabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(30,23,"filter.add-complex-filter")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(32,25,"filter.add-complex")," "))},dependencies:[k.NgForOf,k.NgIf,Q.MatButton,Q.MatIconButton,z.MatIcon,L.MatTooltip,B.MatDivider,I.MatExpansionPanel,I.MatExpansionPanelHeader,I.MatExpansionPanelTitle,t.NgControlStatus,t.NgControlStatusGroup,t.FormControlDirective,t.FormGroupDirective,t.FormArrayName,U.TranslateDirective,F.FilterPredicateComponent,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;max-height:350px}[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-18px;color:#666;font-weight:500}']})}}},61219:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterPredicateValueComponent:()=>u});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(51485),S=n(88834),G=n(82765),K=n(59042),H=n(53719),k=n(82798),Q=n(86600),z=n(14823),L=n(73955),B=n(99691);function I(m,p){1&m&&(e.\u0275\u0275elementStart(0,"mat-form-field",8),e.\u0275\u0275element(1,"input",16),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(2,1,"filter.value")))}function U(m,p){1&m&&(e.\u0275\u0275elementStart(0,"mat-form-field",8),e.\u0275\u0275element(1,"input",17),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(2,1,"filter.value")))}function F(m,p){1&m&&e.\u0275\u0275element(0,"tb-datetime",18),2&m&&e.\u0275\u0275property("showLabel",!1)}function a(m,p){if(1&m&&(e.\u0275\u0275elementStart(0,"mat-checkbox",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m){const v=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,v.filterPredicateValueFormGroup.get("defaultValue").value?"value.true":"value.false")," ")}}function O(m,p){if(1&m&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&m){const v=p.$implicit,T=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",v),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,T.dynamicValueSourceTypeTranslations.get(v))," ")}}function P(m,p){1&m&&(e.\u0275\u0275elementStart(0,"div",20)(1,"mat-checkbox",21),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",12),e.\u0275\u0275text(5,"filter.source-attribute-not-set"),e.\u0275\u0275elementEnd()()),2&m&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"filter.inherit-owner")," "))}function A(m,p){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(v);const C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.dynamicMode=!C.dynamicMode)}),e.\u0275\u0275elementStart(2,"tb-icon",23),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&m){const v=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,2,v.dynamicMode?"filter.switch-to-default-value":"filter.switch-to-dynamic-value")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(v.dynamicMode?"mdi:numeric":"mdi:variable")}}class u{set allowUserDynamicSource(p){this.dynamicValueSourceTypes=(0,c.xm)(p),this.allow=p}set onlyUserDynamicSource(p){this.onlyUserDynamicSourceValue=p,this.filterPredicateValueFormGroup&&(this.updateValidationDynamicMode(),setTimeout(()=>{this.updateModel()},0))}get onlyUserDynamicSource(){return this.onlyUserDynamicSourceValue}set operation(p){!p||p!==c.VE.IN&&p!==c.VE.NOT_IN?this.hintText="filter.default-value":this.hintText="filter.default-comma-separated-values"}constructor(p){this.fb=p,this.inheritModeForSources=c.n3,this.onlyUserDynamicSourceValue=!1,this.valueTypeEnum=c.w_,this.allow=!0,this.dynamicValueSourceTypes=(0,c.xm)(this.allow),this.dynamicValueSourceTypeTranslations=c.DP,this.dynamicMode=!1,this.inheritMode=!1,this.hintText="filter.default-value",this.propagateChange=null,this.propagateChangePending=!1}ngOnInit(){let p,v;switch(this.valueType){case c.w_.STRING:p="",v=[];break;case c.w_.NUMERIC:p=0,v=[t.Validators.required];break;case c.w_.BOOLEAN:p=!1,v=[];break;case c.w_.DATE_TIME:p=Date.now(),v=[t.Validators.required]}this.filterPredicateValueFormGroup=this.fb.group({defaultValue:[p,v],dynamicValue:this.fb.group({sourceType:[null],sourceAttribute:[null],inherit:[!1]})}),this.filterPredicateValueFormGroup.get("dynamicValue").get("sourceType").valueChanges.subscribe(T=>{T||this.filterPredicateValueFormGroup.get("dynamicValue").get("sourceAttribute").patchValue(null,{emitEvent:!1}),this.updateShowInheritMode(T)}),this.updateValidationDynamicMode(),this.filterPredicateValueFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(p){this.propagateChange=p,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(()=>{this.updateModel()},0))}registerOnTouched(p){}setDisabledState(p){this.disabled=p,this.disabled?this.filterPredicateValueFormGroup.disable({emitEvent:!1}):this.filterPredicateValueFormGroup.enable({emitEvent:!1})}validate(){return this.filterPredicateValueFormGroup.valid?null:{filterPredicateValue:{valid:!1}}}writeValue(p){this.propagateChangePending=!1,this.filterPredicateValueFormGroup.get("defaultValue").patchValue(p.defaultValue,{emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue").patchValue({sourceType:p.dynamicValue?p.dynamicValue.sourceType:null,sourceAttribute:p.dynamicValue?p.dynamicValue.sourceAttribute:null,inherit:!!p.dynamicValue&&p.dynamicValue.inherit},{emitEvent:this.onlyUserDynamicSource}),this.updateShowInheritMode(p?.dynamicValue?.sourceType)}updateModel(){const p=this.filterPredicateValueFormGroup.getRawValue();p.dynamicValue&&(!p.dynamicValue.sourceType||!p.dynamicValue.sourceAttribute)&&(p.dynamicValue=null),this.propagateChange?this.propagateChange(p):this.propagateChangePending=!0}updateShowInheritMode(p){this.inheritModeForSources.includes(p)?this.inheritMode=!0:(this.filterPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!1,{emitEvent:!1}),this.inheritMode=!1)}updateValidationDynamicMode(){this.onlyUserDynamicSource?(this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").setValidators(t.Validators.required),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").setValidators(t.Validators.required)):(this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").clearValidators(),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").clearValidators()),this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").updateValueAndValidity({emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").updateValueAndValidity({emitEvent:!1})}static{this.\u0275fac=function(v){return new(v||u)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["tb-filter-predicate-value"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",operation:"operation",valueType:"valueType"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>u),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>u),multi:!0}])],decls:30,vars:26,consts:[[1,"flex","flex-1","flex-row","items-center","justify-start","gap-2",3,"formGroup"],[1,"flex","flex-1","flex-col"],[1,"flex","flex-col",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"tb-hint"],[1,"flex","flex-col"],["formGroupName","dynamicValue",1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"flex","max-w-35%","flex-full","flex-col"],["hideRequiredMarker","",1,"mat-block"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["translate","",1,"tb-hint"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],["class","flex flex-col","style","padding-top: 6px",4,"ngIf"],["mat-icon-button","","class","mat-elevation-z1 tb-mat-32","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matInput","","formControlName","defaultValue",3,"placeholder"],["required","","type","number","matInput","","formControlName","defaultValue",3,"placeholder"],["formControlName","defaultValue","dateText","filter.date","timeText","filter.time","required","",3,"showLabel"],["formControlName","defaultValue"],[1,"flex","flex-col",2,"padding-top","6px"],["formControlName","inherit"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"mat-elevation-z1","tb-mat-32",3,"click","matTooltip"],[1,"tb-mat-20"]],template:function(v,T){1&v&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,I,3,3,"ng-template",3)(4,U,3,3,"ng-template",3)(5,F,1,1,"ng-template",3)(6,a,3,3,"ng-template",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",5)(11,"div",6)(12,"div",7)(13,"mat-form-field",8)(14,"mat-select",9),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementStart(16,"mat-option",10),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,O,3,4,"mat-option",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",12),e.\u0275\u0275text(21,"filter.dynamic-source-type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",1)(23,"mat-form-field",8),e.\u0275\u0275element(24,"input",13),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",12),e.\u0275\u0275text(27,"filter.source-attribute"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(28,P,6,3,"div",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,A,4,4,"button",15),e.\u0275\u0275elementEnd()),2&v&&(e.\u0275\u0275property("formGroup",T.filterPredicateValueFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",T.dynamicMode||T.onlyUserDynamicSource),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",T.valueType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",T.valueTypeEnum.STRING),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",T.valueTypeEnum.NUMERIC),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",T.valueTypeEnum.DATE_TIME),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",T.valueTypeEnum.BOOLEAN),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,18,T.hintText)),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!T.dynamicMode&&!T.onlyUserDynamicSource),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(15,20,"filter.dynamic-source-type")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(18,22,"filter.no-dynamic-value")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",T.dynamicValueSourceTypes),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(25,24,"filter.source-attribute")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!T.allow&&T.inheritMode),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!T.onlyUserDynamicSource))},dependencies:[h.NgForOf,h.NgIf,h.NgSwitch,h.NgSwitchCase,V.DatetimeComponent,S.MatIconButton,G.MatCheckbox,K.MatInput,H.MatFormField,k.MatSelect,Q.MatOption,z.MatTooltip,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,L.TranslateDirective,B.TbIconComponent,L.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper:before{content:none}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-infix{width:auto;min-width:auto}']})}}},71635:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterPredicateComponent:()=>I});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(4452),S=n(70581),G=n(33349),K=n(7148),H=n(44032);function k(U,F){if(1&U&&e.\u0275\u0275element(0,"tb-string-filter-predicate",4),2&U){const a=e.\u0275\u0275nextContext();e.\u0275\u0275property("allowUserDynamicSource",a.allowUserDynamicSource)("onlyUserDynamicSource",a.onlyUserDynamicSource)}}function Q(U,F){if(1&U&&e.\u0275\u0275element(0,"tb-numeric-filter-predicate",5),2&U){const a=e.\u0275\u0275nextContext();e.\u0275\u0275property("allowUserDynamicSource",a.allowUserDynamicSource)("onlyUserDynamicSource",a.onlyUserDynamicSource)("valueType",a.valueType)}}function z(U,F){if(1&U&&e.\u0275\u0275element(0,"tb-boolean-filter-predicate",4),2&U){const a=e.\u0275\u0275nextContext();e.\u0275\u0275property("allowUserDynamicSource",a.allowUserDynamicSource)("onlyUserDynamicSource",a.onlyUserDynamicSource)}}function L(U,F){if(1&U&&e.\u0275\u0275element(0,"tb-complex-filter-predicate",6),2&U){const a=e.\u0275\u0275nextContext();e.\u0275\u0275property("allowUserDynamicSource",a.allowUserDynamicSource)("onlyUserDynamicSource",a.onlyUserDynamicSource)("key",a.key)("valueType",a.valueType)("displayUserParameters",a.displayUserParameters)}}function B(U,F){if(1&U&&e.\u0275\u0275element(0,"tb-filter-user-info",7),2&U){let a;const O=e.\u0275\u0275nextContext();e.\u0275\u0275property("valueType",O.valueType)("operation",null==(a=O.filterPredicateFormGroup.get("predicate").value)?null:a.operation)("key",O.key)}}class I{constructor(F){this.fb=F,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.filterPredicateType=c.E1,this.propagateChange=null}ngOnInit(){this.filterPredicateFormGroup=this.fb.group({predicate:[null,[t.Validators.required]],userInfo:[null,[]]}),this.filterPredicateFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(F){this.propagateChange=F}registerOnTouched(F){}setDisabledState(F){this.disabled=F,this.disabled?this.filterPredicateFormGroup.disable({emitEvent:!1}):this.filterPredicateFormGroup.enable({emitEvent:!1})}validate(){return this.filterPredicateFormGroup.valid?null:{filterPredicate:{valid:!1}}}writeValue(F){this.type=F.keyFilterPredicate.type,this.filterPredicateFormGroup.get("predicate").patchValue(F.keyFilterPredicate,{emitEvent:!1}),this.filterPredicateFormGroup.get("userInfo").patchValue(F.userInfo,{emitEvent:!1})}updateModel(){let F=null;this.filterPredicateFormGroup.valid&&(F={keyFilterPredicate:this.filterPredicateFormGroup.getRawValue().predicate,userInfo:this.filterPredicateFormGroup.getRawValue().userInfo}),this.propagateChange(F)}static{this.\u0275fac=function(a){return new(a||I)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["tb-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>I),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>I),multi:!0}])],decls:7,vars:7,consts:[[1,"flex","flex-1","flex-row","items-center","justify-start","gap-2",3,"formGroup"],[1,"flex","flex-1","flex-col",3,"ngSwitch"],[3,"ngSwitchCase"],["style","width: 60px;","class","flex flex-row items-stretch justify-center","formControlName","userInfo",3,"valueType","operation","key",4,"ngIf"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","key","valueType","displayUserParameters"],["formControlName","userInfo",1,"flex","flex-row","items-stretch","justify-center",2,"width","60px",3,"valueType","operation","key"]],template:function(a,O){1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,k,1,2,"ng-template",2)(3,Q,1,3,"ng-template",2)(4,z,1,2,"ng-template",2)(5,L,1,5,"ng-template",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,B,1,3,"tb-filter-user-info",3),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("formGroup",O.filterPredicateFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",O.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",O.filterPredicateType.STRING),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",O.filterPredicateType.NUMERIC),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",O.filterPredicateType.BOOLEAN),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",O.filterPredicateType.COMPLEX),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",O.type!==O.filterPredicateType.COMPLEX&&O.displayUserParameters))},dependencies:[h.NgIf,h.NgSwitch,h.NgSwitchCase,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,V.BooleanFilterPredicateComponent,S.StringFilterPredicateComponent,G.NumericFilterPredicateComponent,K.ComplexFilterPredicateComponent,H.FilterUserInfoComponent],encapsulation:2})}}},66317:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterTextComponent:()=>K});var e=n(93953),t=n(89417),c=n(93064),h=n(14085),V=n(34006),S=n(73955),G=n(60177);class K{get required(){return this.requiredValue}set required(k){this.requiredValue=(0,h.coerceBooleanProperty)(k)}constructor(k,Q,z,L){this.dialog=k,this.fb=Q,this.translate=z,this.datePipe=L,this.noFilterText=this.translate.instant("filter.no-filter-text"),this.addFilterPrompt=this.translate.instant("filter.add-filter-prompt"),this.nowrap=!1,this.requiredClass=!1,this.propagateChange=B=>{}}registerOnChange(k){this.propagateChange=k}registerOnTouched(k){}ngOnInit(){}setDisabledState(k){this.disabled=k}writeValue(k){this.updateFilterText(k)}updateFilterText(k){this.requiredClass=!1,k&&k.length?this.filterText=(0,c.dC)(this.translate,this.datePipe,k):this.required&&!this.disabled?(this.filterText=this.addFilterPrompt,this.requiredClass=!0):this.filterText=this.noFilterText}static{this.\u0275fac=function(Q){return new(Q||K)(e.\u0275\u0275directiveInject(V.MatDialog),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.TranslateService),e.\u0275\u0275directiveInject(G.DatePipe))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:K,selectors:[["tb-filter-text"]],inputs:{required:"required",disabled:"disabled",noFilterText:"noFilterText",addFilterPrompt:"addFilterPrompt",nowrap:"nowrap"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>K),multi:!0}])],decls:1,vars:7,consts:[[1,"tb-filter-text",3,"innerHTML"]],template:function(Q,z){1&Q&&e.\u0275\u0275element(0,"div",0),2&Q&&(e.\u0275\u0275classProp("disabled",z.disabled)("required",z.requiredClass)("nowrap",z.nowrap),e.\u0275\u0275property("innerHTML",z.filterText,e.\u0275\u0275sanitizeHtml))},styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-filter-text[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-filter-text.disabled[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]   .tb-filter-text.required[_ngcontent-%COMP%]{color:#f44336;padding:0 4px}[_nghost-%COMP%]   .tb-filter-text.nowrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}[_nghost-%COMP%]     .tb-filter-text{line-height:1.8em}[_nghost-%COMP%]     .tb-filter-text span{display:inline-block;vertical-align:middle;line-height:1.4em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-predicate{padding-right:4px;padding-left:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value, [_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-source{font-weight:700;border:1px groove rgba(0,0,0,.25);border-radius:4px;padding-left:4px;padding-right:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key{color:#305680}[_nghost-%COMP%]     .tb-filter-text .tb-filter-value{color:#ff5722}[_nghost-%COMP%]     .tb-filter-text .tb-filter-simple-operation{font-size:.9em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-complex-operation{font-weight:700}[_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-dynamic-source, [_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-value{color:#0c959c}[_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-left-bracket, [_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-right-bracket{font-size:1.2em}']})}}},15307:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterUserInfoDialogComponent:()=>a});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(93064),S=n(9310),G=n(7901),K=n(89417),H=n(73955),k=n(60177),Q=n(88834),z=n(82765),L=n(99213),B=n(59042),I=n(53719),U=n(55911);function F(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,A.isLoading$)||A.filterUserInfoFormGroup.invalid||!A.filterUserInfoFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"action.update")," ")}}class a extends h.m{constructor(P,A,u,m,p,v,T){super(P,A,p),this.store=P,this.router=A,this.data=u,this.errorStateMatcher=m,this.dialogRef=p,this.fb=v,this.translate=T,this.submitted=!1;const C=this.data.keyFilterPredicateUserInfo||(0,V.Mg)();this.filterUserInfoFormGroup=this.fb.group({editable:[C.editable],label:[C.label],autogeneratedLabel:[C.autogeneratedLabel],order:[C.order]}),this.onAutogeneratedLabelChange(),this.data.readonly?this.filterUserInfoFormGroup.disable({emitEvent:!1}):this.filterUserInfoFormGroup.get("autogeneratedLabel").valueChanges.subscribe(()=>{this.onAutogeneratedLabelChange()})}onAutogeneratedLabelChange(){if(this.filterUserInfoFormGroup.get("autogeneratedLabel").value){const A=(0,V.YA)(this.data.key,this.data.valueType,this.data.operation,this.translate);this.filterUserInfoFormGroup.get("label").patchValue(A,{emitEvent:!1}),this.filterUserInfoFormGroup.get("label").disable({emitEvent:!1})}else this.filterUserInfoFormGroup.get("label").enable({emitEvent:!1})}ngOnInit(){}isErrorState(P,A){const u=this.errorStateMatcher.isErrorState(P,A),m=!!(P&&P.invalid&&this.submitted);return u||m}cancel(){this.dialogRef.close(null)}save(){if(this.submitted=!0,this.filterUserInfoFormGroup.valid){const P=this.filterUserInfoFormGroup.getRawValue();this.dialogRef.close(P)}}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(K.UntypedFormBuilder),e.\u0275\u0275directiveInject(H.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-filter-user-info-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:a}]),e.\u0275\u0275InheritDefinitionFeature],decls:33,vars:20,consts:[[2,"width","500px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"flex","flex-col",3,"disabled"],["formControlName","editable",2,"margin-bottom","16px"],[1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"mat-block","flex-1"],["translate",""],["matInput","","formControlName","label"],["formControlName","autogeneratedLabel"],[1,"mat-block"],["matInput","","type","number","formControlName","order"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return u.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",5)(10,"fieldset",6),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementStart(12,"mat-checkbox",7),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",8)(16,"mat-form-field",9)(17,"mat-label",10),e.\u0275\u0275text(18,"filter.display-label"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-checkbox",12),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"mat-form-field",13)(24,"mat-label",10),e.\u0275\u0275text(25,"filter.order-priority"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",15)(28,"button",16),e.\u0275\u0275pipe(29,"async"),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(32,F,4,6,"button",17),e.\u0275\u0275elementEnd()()),2&A&&(e.\u0275\u0275property("formGroup",u.filterUserInfoFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,8,u.data.readonly?"filter.filter-user-params":"filter.edit-filter-user-params")),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(11,10,u.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,12,"filter.editable")," "),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,14,"filter.autogenerated-label")," "),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(29,16,u.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,18,u.data.readonly?"action.close":"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!u.data.readonly))},dependencies:[k.NgIf,Q.MatButton,Q.MatIconButton,z.MatCheckbox,L.MatIcon,B.MatInput,I.MatFormField,I.MatLabel,U.MatToolbar,c.MatDialogActions,c.MatDialogContent,K.\u0275NgNoValidate,K.DefaultValueAccessor,K.NumberValueAccessor,K.NgControlStatus,K.NgControlStatusGroup,K.FormGroupDirective,K.FormControlName,H.TranslateDirective,k.AsyncPipe,H.TranslatePipe],encapsulation:2})}}},44032:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FilterUserInfoComponent:()=>Q});var e=n(93953),t=n(89417),h=(n(93064),n(15307)),V=n(27997),S=n(34006),G=n(88834),K=n(99213),H=n(14823),k=n(73955);class Q{constructor(L){this.dialog=L,this.propagateChange=null}ngOnInit(){}registerOnChange(L){this.propagateChange=L}registerOnTouched(L){}setDisabledState(L){this.disabled=L}writeValue(L){this.keyFilterPredicateUserInfo=L}openFilterUserInfoDialog(){this.dialog.open(h.FilterUserInfoDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilterPredicateUserInfo:(0,V.Go)(this.keyFilterPredicateUserInfo),valueType:this.valueType,key:this.key,operation:this.operation,readonly:this.disabled}}).afterClosed().subscribe(L=>{L&&(this.keyFilterPredicateUserInfo=L,this.updateModel())})}updateModel(){this.propagateChange(this.keyFilterPredicateUserInfo)}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(S.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-filter-user-info"]],inputs:{disabled:"disabled",key:"key",operation:"operation",valueType:"valueType"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Q),multi:!0}])],decls:4,vars:3,consts:[["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){return I.openFilterUserInfoDialog()}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"settings"),e.\u0275\u0275elementEnd()()),2&B&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,I.disabled?"filter.filter-user-params":"filter.edit-filter-user-params"))},dependencies:[G.MatIconButton,K.MatIcon,H.MatTooltip,k.TranslatePipe],encapsulation:2})}}},6415:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{FiltersDialogComponent:()=>_});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(57665),G=n(15673),K=n(78502),H=n(80216),k=n(27997),Q=n(67710),z=n(56508),L=n(9310),B=n(7901),I=n(73955),U=n(60177),F=n(88834),a=n(99213),O=n(67575),P=n(53719),A=n(55911),u=n(14823),m=n(71997),p=n(30450);function v(E,f){1&E&&e.\u0275\u0275element(0,"mat-progress-bar",20)}function T(E,f){1&E&&e.\u0275\u0275element(0,"div",21)}function C(E,f){if(1&E){const g=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",23)(4,"mat-label",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"section",24),e.\u0275\u0275element(7,"mat-slide-toggle",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",26),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("click",function(){const b=e.\u0275\u0275restoreView(g).index,D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.editFilter(b))}),e.\u0275\u0275elementStart(11,"mat-icon"),e.\u0275\u0275text(12,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"button",27),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275listener("click",function(){const b=e.\u0275\u0275restoreView(g).index,D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.duplicateFilter(b))}),e.\u0275\u0275elementStart(16,"mat-icon"),e.\u0275\u0275text(17,"content_copy"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"button",26),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275listener("click",function(){const b=e.\u0275\u0275restoreView(g).index,D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.removeFilter(b))}),e.\u0275\u0275elementStart(21,"mat-icon"),e.\u0275\u0275text(22,"close"),e.\u0275\u0275elementEnd()()()()}if(2&E){const g=f.$implicit,y=f.index,b=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",y+1,"."),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(g.get("filter").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",g.get("editable")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(9,9,"filter.edit")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,11,b.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(14,13,"filter.duplicate-filter-action")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,15,b.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(19,17,"filter.remove-filter")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,19,b.isLoading$))}}class _ extends V.m{constructor(f,g,y,b,D,w,ee,_e,ve,Ee,$){if(super(f,g,D),this.store=f,this.router=g,this.data=y,this.errorStateMatcher=b,this.dialogRef=D,this.fb=w,this.utils=ee,this.dashboardUtils=_e,this.translate=ve,this.dialogs=Ee,this.dialog=$,this.filterToWidgetsMap={},this.filterNames=new Set,this.submitted=!1,this.title=y.customTitle?y.customTitle:"filter.filters",this.disableAdd=this.data.disableAdd,y.widgets){let Te;if(this.data.isSingleWidget&&1===this.data.widgets.length){Te=[this.data.widgets[0].config.title];for(const R of Object.keys(this.data.filters))this.filterToWidgetsMap[R]=Te}else this.data.widgets.forEach(oe=>{this.dashboardUtils.validateAndUpdateDatasources(oe.config.datasources).forEach(N=>{N.type===S.cT.entity&&N.filterId&&(Te=this.filterToWidgetsMap[N.filterId],Te||(Te=[],this.filterToWidgetsMap[N.filterId]=Te),Te.push(oe.config.title))})})}const be=[];for(const Te of Object.keys(this.data.filters)){const oe=this.data.filters[Te];(0,k.b0)(oe.editable)&&(oe.editable=!0),this.filterNames.add(oe.filter),be.push(this.createFilterFormControl(Te,oe))}this.filtersFormGroup=this.fb.group({filters:this.fb.array(be)})}createFilterFormControl(f,g){return this.fb.group({id:[f],filter:[g?g.filter:null,[h.Validators.required]],keyFilters:[g?g.keyFilters:[],[h.Validators.required]],editable:[!g||g.editable]})}filtersFormArray(){return this.filtersFormGroup.get("filters")}ngOnInit(){}isErrorState(f,g){const y=this.errorStateMatcher.isErrorState(f,g),b=!!(f&&f.invalid&&this.submitted);return y||b}removeFilter(f){const g=this.filtersFormGroup.get("filters").value[f],y=this.filterToWidgetsMap[g.id];if(y){let b="";for(const w of y)b+="<br/>'"+w+"'";const D=this.translate.instant("filter.unable-delete-filter-text",{filter:g.filter,widgetsList:b});this.dialogs.alert(this.translate.instant("filter.unable-delete-filter-title"),D,this.translate.instant("action.close"),!0)}else this.filtersFormGroup.get("filters").removeAt(f),this.filterNames.delete(g.filter),this.filtersFormGroup.markAsDirty()}getNextDuplicatedName(f){const g=` - ${this.translate.instant("action.copy")} `;let y=0;for(;++y<Number.MAX_SAFE_INTEGER;){const b=`${f}${g}${y}`;if(!this.filterNames.has(b))return b}return null}duplicateFilter(f){const g=this.filtersFormGroup.get("filters").value[f],y=this.getNextDuplicatedName(g.filter);if(y){const b=(0,k.Go)(g);b.id=this.utils.guid(),b.filter=y,this.filtersFormGroup.get("filters").insert(f+1,this.createFilterFormControl(b.id,b)),this.filterNames.add(b.filter)}}addFilter(){this.openFilterDialog(-1)}editFilter(f){this.openFilterDialog(f)}openFilterDialog(f){const g=-1===f;let y;const b=this.filtersFormGroup.get("filters").value;g||(y=b[f],this.filterNames.delete(y.filter)),this.dialog.open(Q.FilterDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:g,filters:b,filter:g?null:(0,k.Go)(y)}}).afterClosed().subscribe(D=>{if(D){if(g)this.filtersFormGroup.get("filters").push(this.createFilterFormControl(D.id,D));else{const w=this.filtersFormGroup.get("filters").at(f);w.get("filter").patchValue(D.filter),w.get("editable").patchValue(D.editable),w.get("keyFilters").patchValue(D.keyFilters)}this.filterNames.add(D.filter),this.filtersFormGroup.markAsDirty()}})}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0;const f={},g={};let b,y=!0;const D=this.filtersFormGroup.get("filters").value;for(const w of D){const ee=w.id,_e=w.filter,ve=w.keyFilters,Ee=w.editable;if(g[_e]){y=!1,b=this.translate.instant("filter.duplicate-filter-error",{filter:_e});break}if(!ve||!ve.length){y=!1,b=this.translate.instant("filter.missing-key-filters-error",{filter:_e});break}g[_e]=_e,f[ee]={id:ee,filter:_e,keyFilters:ve,editable:Ee}}y?this.dialogRef.close(f):this.store.dispatch(new K.xo({message:b,type:"error"}))}static{this.\u0275fac=function(g){return new(g||_)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(z.N),e.\u0275\u0275directiveInject(I.TranslateService),e.\u0275\u0275directiveInject(H.o),e.\u0275\u0275directiveInject(c.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["tb-filters-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:_}]),e.\u0275\u0275InheritDefinitionFeature],decls:41,vars:37,consts:[[2,"width","700px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"tb-filters-header","flex","flex-row","items-center","justify-start"],[1,"max-w-5%","flex-full"],[1,"flex","max-w-95%","flex-full","flex-row","items-center","justify-start"],["translate","",1,"tb-header-label","flex-1"],["translate","",1,"tb-header-label","flex","min-w-20","max-w-20","flex-1","basis-20","flex-col","items-center","justify-center",2,"padding-left","5px"],[2,"min-width","132px"],[3,"disabled"],["class","flex flex-1 flex-row items-center justify-start","formArrayName","filters",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["formArrayName","filters",1,"flex","flex-1","flex-row","items-center","justify-start"],[1,"mat-elevation-z4","tb-filter","flex","max-w-95%","flex-full","flex-row","items-center","justify-start"],[1,"tb-editable-switch","flex","min-w-20","max-w-20","flex-1","basis-20","flex-col","items-center","justify-center",2,"padding-left","10px"],[1,"editable-switch",3,"formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","disabled","matTooltip"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","48px",3,"click","disabled","matTooltip"]],template:function(g,y){1&g&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return y.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return y.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,v,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,T,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"div",8),e.\u0275\u0275element(15,"span",9),e.\u0275\u0275elementStart(16,"div",10)(17,"div",11),e.\u0275\u0275text(18,"filter.filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",12),e.\u0275\u0275text(20,"filter.editable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"div",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"fieldset",14),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275element(24,"mat-divider"),e.\u0275\u0275template(25,C,23,21,"div",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",16)(27,"button",17),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275pipe(29,"async"),e.\u0275\u0275listener("click",function(){return y.addFilter()}),e.\u0275\u0275text(30),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"span",2),e.\u0275\u0275elementStart(33,"button",18),e.\u0275\u0275pipe(34,"async"),e.\u0275\u0275listener("click",function(){return y.cancel()}),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"button",19),e.\u0275\u0275pipe(38,"async"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd()()()),2&g&&(e.\u0275\u0275property("formGroup",y.filtersFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,15,y.title)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,17,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(12,19,y.isLoading$)),e.\u0275\u0275advance(11),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,21,y.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",y.filtersFormArray().controls),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",y.disableAdd),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(28,23,"filter.add")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(29,25,y.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(31,27,"filter.add")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(34,29,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(36,31,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(38,33,y.isLoading$)||y.filtersFormGroup.invalid||!y.filtersFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(40,35,"action.save")," "))},dependencies:[U.NgForOf,U.NgIf,F.MatButton,F.MatIconButton,a.MatIcon,O.MatProgressBar,P.MatLabel,A.MatToolbar,c.MatDialogActions,c.MatDialogContent,u.MatTooltip,m.MatDivider,p.MatSlideToggle,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.FormControlDirective,h.FormGroupDirective,h.FormArrayName,I.TranslateDirective,U.AsyncPipe,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:#00000091}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-mdc-dialog-content{padding-top:0!important;padding-bottom:0!important}']})}}},9224:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{KeyFilterDialogComponent:()=>J});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(93064),G=n(80216),K=n(39412),H=n(18530),k=n(7673),Q=n(56977),z=n(99172),L=n(5964),B=n(96354),I=n(73028),U=n(89348),F=n(99898),a=n(27997),O=n(14246),P=n(9310),A=n(7901),u=n(73955),m=n(60177),p=n(51485),v=n(88834),T=n(82765),C=n(99213),_=n(59042),E=n(53719),f=n(55911),g=n(82798),y=n(60850),b=n(90934),D=n(91009);const w=["keyNameInput"],ee=(de,ye)=>({"max-w-45%":de,"max-w-70%":ye}),_e=(de,ye)=>({"max-w-20%":de,"max-w-30%":ye});function ve(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"mat-option",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&de){const re=ye.$implicit,ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",re),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,ne.entityKeyTypeTranslations.get(re))," ")}}function Ee(de,ye){if(1&de){const re=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(re);const ie=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ie.clear())}),e.\u0275\u0275elementStart(1,"mat-icon",6),e.\u0275\u0275text(2,"close"),e.\u0275\u0275elementEnd()()}}function $(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"mat-option",28),e.\u0275\u0275element(1,"span",30),e.\u0275\u0275pipe(2,"highlight"),e.\u0275\u0275elementEnd()),2&de){const re=ye.$implicit,ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",re),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(2,2,re,ne.searchText),e.\u0275\u0275sanitizeHtml)}}function be(de,ye){1&de&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&de&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"filter.key-name-required")," "))}function Te(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"mat-option",28),e.\u0275\u0275element(1,"mat-icon",22),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&de){const re=ye.$implicit,ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",re),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("svgIcon",ne.entityKeyValueTypes.get(ne.entityKeyValueTypeEnum[re]).icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,ne.entityKeyValueTypes.get(ne.entityKeyValueTypeEnum[re]).name))}}function oe(de,ye){1&de&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&de&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"filter.value-type-required")," "))}function R(de,ye){1&de&&(e.\u0275\u0275elementStart(0,"mat-form-field",33)(1,"mat-label",12),e.\u0275\u0275text(2,"filter.value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",34),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&de&&(e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(4,1,"filter.value")))}function N(de,ye){1&de&&(e.\u0275\u0275elementStart(0,"mat-form-field",33)(1,"mat-label",12),e.\u0275\u0275text(2,"filter.value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",35),e.\u0275\u0275elementEnd())}function Z(de,ye){1&de&&e.\u0275\u0275element(0,"tb-datetime",36)}function Y(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"mat-checkbox",37),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&de){const re=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,re.keyFilterFormGroup.get("value").value?"value.true":"value.false")," ")}}function ge(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",31),e.\u0275\u0275template(2,R,5,3,"ng-template",32)(3,N,4,0,"ng-template",32)(4,Z,1,0,"ng-template",32)(5,Y,3,3,"ng-template",32),e.\u0275\u0275elementEnd()()),2&de){const re=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",re.keyFilterFormGroup.get("valueType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",re.entityKeyValueTypeEnum.STRING),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",re.entityKeyValueTypeEnum.NUMERIC),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",re.entityKeyValueTypeEnum.DATE_TIME),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",re.entityKeyValueTypeEnum.BOOLEAN)}}function ce(de,ye){if(1&de&&e.\u0275\u0275element(0,"tb-filter-predicate-list",38),2&de){const re=e.\u0275\u0275nextContext();e.\u0275\u0275property("allowUserDynamicSource",re.data.allowUserDynamicSource)("onlyUserDynamicSource",re.isConstantKeyType)("displayUserParameters",re.data.displayUserParameters)("valueType",re.keyFilterFormGroup.get("valueType").value)("key",re.keyFilterFormGroup.get("key.key").value)}}function se(de,ye){if(1&de&&(e.\u0275\u0275elementStart(0,"button",39),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&de){const re=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,re.isLoading$)||re.keyFilterFormGroup.invalid||!re.keyFilterFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,re.data.isAdd?"action.add":"action.update")," ")}}class J extends V.m{constructor(ye,re,ne,ie,Ae,Pe,Be,Ke,Xe){super(ye,re,Ae),this.store=ye,this.router=re,this.data=ne,this.errorStateMatcher=ie,this.dialogRef=Ae,this.deviceProfileService=Pe,this.dialogs=Be,this.translate=Ke,this.fb=Xe,this.dirty=!1,this.destroy$=new H.B,this.entityKeyTypes=this.data.telemetryKeysOnly?[S.vH.ATTRIBUTE,S.vH.TIME_SERIES,S.vH.CONSTANT]:[S.vH.ENTITY_FIELD,S.vH.ATTRIBUTE,S.vH.CLIENT_ATTRIBUTE,S.vH.SERVER_ATTRIBUTE,S.vH.SHARED_ATTRIBUTE,S.vH.TIME_SERIES],this.entityKeyTypeTranslations=S.OR,this.entityKeyValueTypesKeys=Object.keys(S.w_),this.entityKeyValueTypeEnum=S.w_,this.entityKeyValueTypes=S.bg,this.submitted=!1,this.showAutocomplete=!1,this.searchText="",this.keyFilterFormGroup=this.fb.group({key:this.fb.group({type:[this.data.keyFilter.key.type,[h.Validators.required]],key:[this.data.keyFilter.key.key,[h.Validators.required]]}),valueType:[this.data.keyFilter.valueType,[h.Validators.required]],predicates:[this.data.keyFilter.predicates,[h.Validators.required]]}),this.data.telemetryKeysOnly&&this.keyFilterFormGroup.addControl("value",this.fb.control(this.data.keyFilter.value)),this.data.readonly?this.keyFilterFormGroup.disable({emitEvent:!1}):(this.keyFilterFormGroup.get("valueType").valueChanges.pipe((0,Q.Q)(this.destroy$)).subscribe(at=>{const bt=this.keyFilterFormGroup.value.valueType,Mt=this.keyFilterFormGroup.get("predicates").value,ze=this.keyFilterFormGroup.get("value")?.value;bt&&bt!==at&&(this.isConstantKeyType&&this.data.telemetryKeysOnly&&this.keyFilterFormGroup.get("value").setValue(null),Mt&&Mt.length&&this.dialogs.confirm(this.translate.instant("filter.key-value-type-change-title"),this.translate.instant("filter.key-value-type-change-message")).subscribe(vt=>{vt?this.keyFilterFormGroup.get("predicates").setValue([]):(this.keyFilterFormGroup.get("valueType").setValue(bt,{emitEvent:!1}),this.keyFilterFormGroup.get("value")?.setValue(ze,{emitEvent:!1}))})),this.data.telemetryKeysOnly&&this.isConstantKeyType&&at===S.w_.BOOLEAN&&(this.keyFilterFormGroup.get("value").clearValidators(),this.keyFilterFormGroup.get("value").setValue(!!(0,a.Lm)(ze)&&ze),this.keyFilterFormGroup.get("value").updateValueAndValidity())}),this.keyFilterFormGroup.get("key.type").valueChanges.pipe((0,z.Z)(this.data.keyFilter.key.type),(0,Q.Q)(this.destroy$)).subscribe(at=>{at===S.vH.ENTITY_FIELD||(0,a.O9)(this.data.entityId)?(this.entityKeysName=null,this.dirty=!1,this.showAutocomplete=!0):this.showAutocomplete=!1,this.data.telemetryKeysOnly&&(at===S.vH.CONSTANT&&this.keyFilterFormGroup.get("valueType").value!==S.w_.BOOLEAN?(this.keyFilterFormGroup.get("value").setValidators(h.Validators.required),this.keyFilterFormGroup.get("value").updateValueAndValidity()):(this.keyFilterFormGroup.get("value").clearValidators(),this.keyFilterFormGroup.get("value").updateValueAndValidity()))}),this.keyFilterFormGroup.get("key.key").valueChanges.pipe((0,L.p)(at=>this.keyFilterFormGroup.get("key.type").value===S.vH.ENTITY_FIELD&&K.f.hasOwnProperty(at)),(0,Q.Q)(this.destroy$)).subscribe(at=>{const bt=this.keyFilterFormGroup.value.valueType,Mt=K.f[at]?.time?S.w_.DATE_TIME:S.w_.STRING;bt!==Mt&&this.keyFilterFormGroup.get("valueType").patchValue(Mt,{emitEvent:!1})}),this.filteredKeysName=this.keyFilterFormGroup.get("key.key").valueChanges.pipe((0,B.T)(at=>at||""),(0,I.Z)(at=>this.fetchEntityName(at)),(0,Q.Q)(this.destroy$)))}ngOnDestroy(){super.ngOnDestroy(),this.destroy$.next(),this.destroy$.complete()}isErrorState(ye,re){const ne=this.errorStateMatcher.isErrorState(ye,re),ie=!!(ye&&ye.invalid&&this.submitted);return ne||ie}cancel(){this.dialogRef.close(null)}clear(){this.keyFilterFormGroup.get("key.key").patchValue("",{emitEvent:!0}),setTimeout(()=>{this.keyNameInput.nativeElement.blur(),this.keyNameInput.nativeElement.focus()},0)}onFocus(){!this.dirty&&this.showAutocomplete&&(this.keyFilterFormGroup.get("key.key").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!0)}save(){if(this.submitted=!0,this.keyFilterFormGroup.valid){const ye=this.keyFilterFormGroup.getRawValue();this.dialogRef.close(ye)}}get isConstantKeyType(){return this.keyFilterFormGroup.get("key.type").value===S.vH.CONSTANT}fetchEntityName(ye){return this.searchText=ye,this.getEntityKeys().pipe((0,B.T)(re=>ye?re.filter(ne=>ne.toUpperCase().startsWith(ye.toUpperCase())):re))}getEntityKeys(){if(!this.entityKeysName){let ye;switch(this.keyFilterFormGroup.get("key.type").value){case S.vH.ENTITY_FIELD:ye=(0,k.of)(Object.keys(K.f).map(re=>K.f[re]).map(re=>re.keyName).sort());break;case S.vH.ATTRIBUTE:ye=this.deviceProfileService.getDeviceProfileDevicesAttributesKeys(this.data.entityId?.id,{ignoreLoading:!0});break;case S.vH.TIME_SERIES:ye=this.deviceProfileService.getDeviceProfileDevicesTimeseriesKeys(this.data.entityId?.id,{ignoreLoading:!0});break;default:ye=(0,k.of)([])}this.entityKeysName=ye.pipe((0,U.H)(1),(0,F.B)())}return this.entityKeysName}static{this.\u0275fac=function(re){return new(re||J)(e.\u0275\u0275directiveInject(P.Store),e.\u0275\u0275directiveInject(A.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(O.N),e.\u0275\u0275directiveInject(G.o),e.\u0275\u0275directiveInject(u.TranslateService),e.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:J,selectors:[["tb-key-filter-dialog"]],viewQuery:function(re,ne){if(1&re&&e.\u0275\u0275viewQuery(w,7),2&re){let ie;e.\u0275\u0275queryRefresh(ie=e.\u0275\u0275loadQuery())&&(ne.keyNameInput=ie.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:J}]),e.\u0275\u0275InheritDefinitionFeature],decls:49,vars:40,consts:[["keyNameInput",""],["keyName","matAutocomplete"],[2,"width","1200px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"flex","flex-col",3,"disabled"],[1,"entity-key","flex","flex-row","gap-2"],["formGroupName","key",1,"flex","flex-full","flex-row","gap-2"],[1,"mat-block","max-w-40%","flex-full"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[1,"mat-block","max-w-60%","flex-full"],["matInput","","required","","formControlName","key",3,"focusin","matAutocomplete","matAutocompleteDisabled"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption",""],[4,"ngIf"],[1,"mat-block","tb-value-type","flex-full"],["formControlName","valueType"],[1,"tb-mat-18",3,"svgIcon"],["class","flex-1",4,"ngIf"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key",4,"ngIf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"innerHTML"],[1,"flex","flex-col",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","","required","","formControlName","value",3,"placeholder"],["required","","type","number","matInput","","formControlName","value"],["formControlName","value","dateText","filter.date","timeText","filter.time","required",""],["formControlName","value",2,"margin-top","20px"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(re,ne){if(1&re){const ie=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(ie),e.\u0275\u0275resetView(ne.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",3)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",4),e.\u0275\u0275elementStart(6,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ie),e.\u0275\u0275resetView(ne.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",6),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",7)(10,"fieldset",8),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementStart(12,"section",9)(13,"section",10)(14,"mat-form-field",11)(15,"mat-label",12),e.\u0275\u0275text(16,"filter.key-type.key-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-select",13),e.\u0275\u0275template(18,ve,3,4,"mat-option",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"mat-form-field",15)(20,"mat-label",12),e.\u0275\u0275text(21,"filter.key-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"input",16,0),e.\u0275\u0275listener("focusin",function(){return e.\u0275\u0275restoreView(ie),e.\u0275\u0275resetView(ne.onFocus())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,Ee,3,0,"button",17),e.\u0275\u0275elementStart(25,"mat-autocomplete",18,1),e.\u0275\u0275template(27,$,3,5,"mat-option",14),e.\u0275\u0275pipe(28,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,be,3,3,"mat-error",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"mat-form-field",20)(31,"mat-label",12),e.\u0275\u0275text(32,"filter.value-type.value-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"mat-select",21)(34,"mat-select-trigger"),e.\u0275\u0275element(35,"mat-icon",22),e.\u0275\u0275elementStart(36,"span"),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(39,Te,5,5,"mat-option",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,oe,3,3,"mat-error",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(41,ge,6,5,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(42,ce,1,5,"tb-filter-predicate-list",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",25)(44,"button",26),e.\u0275\u0275pipe(45,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ie),e.\u0275\u0275resetView(ne.cancel())}),e.\u0275\u0275text(46),e.\u0275\u0275pipe(47,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,se,4,6,"button",27),e.\u0275\u0275elementEnd()()}if(2&re){let ie,Ae;const Pe=e.\u0275\u0275reference(26);e.\u0275\u0275property("formGroup",ne.keyFilterFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,22,ne.data.isAdd?"filter.add-key-filter":ne.data.readonly?"filter.key-filter":"filter.edit-key-filter")),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(11,24,ne.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275classMap(e.\u0275\u0275pureFunction2(34,ee,ne.isConstantKeyType,!ne.isConstantKeyType)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",ne.entityKeyTypes),e.\u0275\u0275advance(4),e.\u0275\u0275property("matAutocomplete",Pe)("matAutocompleteDisabled",!ne.showAutocomplete),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ne.keyFilterFormGroup.get("key.key").value&&ne.showAutocomplete),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(28,26,ne.filteredKeysName)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ne.keyFilterFormGroup.get("key.key").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275classMap(e.\u0275\u0275pureFunction2(37,_e,ne.isConstantKeyType,!ne.isConstantKeyType)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("svgIcon",null==(ie=ne.entityKeyValueTypes.get(ne.keyFilterFormGroup.get("valueType").value))?null:ie.icon),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,28,null==(Ae=ne.entityKeyValueTypes.get(ne.keyFilterFormGroup.get("valueType").value))?null:Ae.name)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",ne.entityKeyValueTypesKeys),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ne.keyFilterFormGroup.get("valueType").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ne.isConstantKeyType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ne.keyFilterFormGroup.get("valueType").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(45,30,ne.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(47,32,ne.data.readonly?"action.close":"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!ne.data.readonly)}},dependencies:[m.NgForOf,m.NgIf,m.NgSwitch,m.NgSwitchCase,p.DatetimeComponent,v.MatButton,v.MatIconButton,T.MatCheckbox,C.MatIcon,_.MatInput,E.MatFormField,E.MatLabel,E.MatError,E.MatSuffix,f.MatToolbar,c.MatDialogActions,c.MatDialogContent,g.MatSelect,g.MatSelectTrigger,t.MatOption,y.MatAutocomplete,y.MatAutocompleteTrigger,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NumberValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,h.FormGroupName,u.TranslateDirective,b.FilterPredicateListComponent,m.AsyncPipe,D.HighlightPipe,u.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]     .mat-mdc-form-field.tb-value-type mat-select-trigger .mat-icon{vertical-align:middle;margin-right:8px}[_nghost-%COMP%]     .mat-mdc-form-field.tb-value-type mat-select-trigger .mat-icon svg{vertical-align:initial}']})}}},13792:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{KeyFilterListComponent:()=>O});var e=n(93953),t=n(89417),c=n(18530),h=n(93064),V=n(27997),S=n(9224),G=n(56977),K=n(34006),H=n(60177),k=n(88834),Q=n(99213),z=n(14823),L=n(71997),B=n(9454),I=n(73955),U=n(66317);function F(P,A){1&P&&(e.\u0275\u0275elementStart(0,"span",3),e.\u0275\u0275text(1,"filter.operation.and"),e.\u0275\u0275elementEnd())}function a(P,A){if(1&P){const u=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",17)(1,"div",18),e.\u0275\u0275template(2,F,2,0,"span",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",20)(4,"div",21)(5,"div",22),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",22),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",23),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275listener("click",function(){const p=e.\u0275\u0275restoreView(u).index,v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.editKeyFilter(p))}),e.\u0275\u0275elementStart(12,"mat-icon"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"button",23),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275listener("click",function(){const p=e.\u0275\u0275restoreView(u).index,v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.removeKeyFilter(p))}),e.\u0275\u0275elementStart(16,"mat-icon"),e.\u0275\u0275text(17,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(18,"mat-divider"),e.\u0275\u0275elementEnd()()}if(2&P){const u=A.$implicit,m=A.index,p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m>0),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(u.value.key.key),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,8,p.entityKeyTypeTranslations.get(u.value.key.type))),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(11,10,p.disabled?"filter.key-filter":"filter.edit-key-filter")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(p.disabled?"more_vert":"edit"),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",p.disabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(15,12,"filter.remove-key-filter"))}}class O{constructor(A,u){this.fb=A,this.dialog=u,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.telemetryKeysOnly=!1,this.entityKeyTypeTranslations=h.OR,this.destroy$=new c.B,this.propagateChange=null}ngOnInit(){this.keyFilterListFormGroup=this.fb.group({keyFilters:this.fb.array([])}),this.keyFiltersControl=this.fb.control(null),this.keyFilterListFormGroup.valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get keyFiltersFormArray(){return this.keyFilterListFormGroup.get("keyFilters")}registerOnChange(A){this.propagateChange=A}registerOnTouched(A){}setDisabledState(A){this.disabled=A,this.disabled?(this.keyFilterListFormGroup.disable({emitEvent:!1}),this.keyFiltersControl.disable({emitEvent:!1})):(this.keyFilterListFormGroup.enable({emitEvent:!1}),this.keyFiltersControl.enable({emitEvent:!1}))}validate(){return this.keyFilterListFormGroup.valid&&this.keyFiltersControl.valid?null:{keyFilterList:{valid:!1}}}writeValue(A){if(A.length===this.keyFiltersFormArray.length)this.keyFiltersFormArray.patchValue(A,{emitEvent:!1});else{const m=[];if(A)for(const p of A)m.push(this.fb.control(p,[t.Validators.required]));this.keyFilterListFormGroup.setControl("keyFilters",this.fb.array(m),{emitEvent:!1}),this.disabled?this.keyFilterListFormGroup.disable({emitEvent:!1}):this.keyFilterListFormGroup.enable({emitEvent:!1})}const u=(0,h.oN)(A);this.keyFiltersControl.patchValue(u,{emitEvent:!1})}removeKeyFilter(A){this.keyFilterListFormGroup.get("keyFilters").removeAt(A)}addKeyFilter(){const A=this.keyFilterListFormGroup.get("keyFilters");this.openKeyFilterDialog(null).subscribe(u=>{u&&A.push(this.fb.control(u,[t.Validators.required]))})}editKeyFilter(A){const u=this.keyFilterListFormGroup.get("keyFilters").at(A).value;this.openKeyFilterDialog(u).subscribe(m=>{m&&this.keyFilterListFormGroup.get("keyFilters").at(A).patchValue(m)})}openKeyFilterDialog(A){const u=!A;return A||(A={key:{key:"",type:h.vH.ATTRIBUTE},valueType:null,value:null,predicates:[]}),this.dialog.open(S.KeyFilterDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilter:A?this.disabled?A:(0,V.Go)(A):null,isAdd:u,readonly:this.disabled,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,telemetryKeysOnly:this.telemetryKeysOnly,entityId:this.entityId}}).afterClosed()}updateModel(){const A=this.keyFilterListFormGroup.getRawValue().keyFilters;A.length?this.propagateChange(A):this.propagateChange(null);const u=(0,h.oN)(A);this.keyFiltersControl.patchValue(u,{emitEvent:!1})}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(K.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-key-filter-list"]],inputs:{disabled:"disabled",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",telemetryKeysOnly:"telemetryKeysOnly",entityId:"entityId"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>O),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>O),multi:!0}])],decls:35,vars:22,consts:[[1,"flex","flex-col",3,"formGroup"],[3,"multi"],[3,"expanded"],["translate",""],[1,"flex","flex-row"],[1,"max-w-8%","flex-full"],[1,"flex","max-w-92%","flex-full","flex-row","items-center","justify-start"],["translate","",1,"tb-title","no-padding","flex-1"],[2,"min-width","80px"],[2,"min-width","40px"],[1,"key-filter-list"],["class","flex flex-row items-stretch justify-start","style","max-height: 76px;","formArrayName","keyFilters",4,"ngFor","ngForOf"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"tb-filter-preview"],[3,"formControl"],["formArrayName","keyFilters",1,"flex","flex-row","items-stretch","justify-start",2,"max-height","76px"],[1,"filters-operation","max-w-8%","flex-full"],["translate","",4,"ngIf"],[1,"flex","max-w-92%","flex-full","flex-col"],[1,"flex","flex-row","items-center","justify-start"],[1,"flex-1"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"]],template:function(u,m){1&u&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-accordion",1)(2,"mat-expansion-panel",2)(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"div",3),e.\u0275\u0275text(6,"filter.key-filters"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275element(8,"span",5),e.\u0275\u0275elementStart(9,"div",6)(10,"label",7),e.\u0275\u0275text(11,"filter.key-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"label",7),e.\u0275\u0275text(13,"filter.key-type.key-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"span",8),e.\u0275\u0275text(15,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"span",9),e.\u0275\u0275text(17,"\xa0"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(18,"mat-divider"),e.\u0275\u0275elementStart(19,"div",10),e.\u0275\u0275template(20,a,19,14,"div",11),e.\u0275\u0275elementStart(21,"span",12),e.\u0275\u0275text(22,"filter.no-key-filters"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",13)(24,"button",14),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275listener("click",function(){return m.addKeyFilter()}),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"mat-expansion-panel",2)(29,"mat-expansion-panel-header")(30,"mat-panel-title")(31,"div",3),e.\u0275\u0275text(32,"filter.preview"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",15),e.\u0275\u0275element(34,"tb-filter-text",16),e.\u0275\u0275elementEnd()()()()),2&u&&(e.\u0275\u0275property("formGroup",m.keyFilterListFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("multi",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(12),e.\u0275\u0275classProp("!hidden",m.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!m.disabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",m.keyFiltersFormArray.controls),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!!m.keyFiltersFormArray.length)("disabled",m.disabled),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",m.disabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(25,18,"filter.add-key-filter")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,20,"filter.add-key-filter")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("formControl",m.keyFiltersControl))},dependencies:[H.NgForOf,H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatTooltip,L.MatDivider,B.MatAccordion,B.MatExpansionPanel,B.MatExpansionPanelHeader,B.MatExpansionPanelTitle,t.NgControlStatus,t.NgControlStatusGroup,t.FormControlDirective,t.FormGroupDirective,t.FormArrayName,I.TranslateDirective,U.FilterTextComponent,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-18px;color:#666;font-weight:500}[_nghost-%COMP%]   .tb-filter-preview[_ngcontent-%COMP%]{padding:8px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]     .tb-filter-preview .tb-filter-text{max-height:200px}']})}}},33349:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{NumericFilterPredicateComponent:()=>Q});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(53719),S=n(82798),G=n(86600),K=n(61219),H=n(73955);function k(z,L){if(1&z&&(e.\u0275\u0275elementStart(0,"mat-option",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&z){const B=L.$implicit,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",B),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,I.numericOperationTranslations.get(I.numericOperationEnum[B]))," ")}}class Q{constructor(L){this.fb=L,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=c.w_,this.numericOperations=Object.keys(c.hI),this.numericOperationEnum=c.hI,this.numericOperationTranslations=c.ih,this.propagateChange=null}ngOnInit(){this.numericFilterPredicateFormGroup=this.fb.group({operation:[c.hI.EQUAL,[t.Validators.required]],value:[null,[t.Validators.required]]}),this.numericFilterPredicateFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(L){this.propagateChange=L}registerOnTouched(L){}setDisabledState(L){this.disabled=L,this.disabled?this.numericFilterPredicateFormGroup.disable({emitEvent:!1}):this.numericFilterPredicateFormGroup.enable({emitEvent:!1})}validate(){return this.numericFilterPredicateFormGroup.valid?null:{numericFilterPredicate:{valid:!1}}}writeValue(L){this.numericFilterPredicateFormGroup.get("operation").patchValue(L.operation,{emitEvent:!1}),this.numericFilterPredicateFormGroup.get("value").patchValue(L.value,{emitEvent:!1})}updateModel(){const L=this.numericFilterPredicateFormGroup.getRawValue();L.type=c.E1.NUMERIC,this.propagateChange(L)}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-numeric-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",valueType:"valueType"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Q),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>Q),multi:!0}])],decls:6,vars:8,consts:[[1,"flex","flex-1","flex-row","items-start","justify-start","gap-2",3,"formGroup"],["hideRequiredMarker","",1,"mat-block","max-w-30%","flex-full"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","value",1,"max-w-70%","flex-full",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,k,3,4,"mat-option",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(5,"tb-filter-predicate-value",4),e.\u0275\u0275elementEnd()),2&B&&(e.\u0275\u0275property("formGroup",I.numericFilterPredicateFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,6,"filter.operation.operation")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",I.numericOperations),e.\u0275\u0275advance(),e.\u0275\u0275property("allowUserDynamicSource",I.allowUserDynamicSource)("onlyUserDynamicSource",I.onlyUserDynamicSource)("valueType",I.valueType))},dependencies:[h.NgForOf,V.MatFormField,S.MatSelect,G.MatOption,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,K.FilterPredicateValueComponent,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper:before{content:none}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-infix{width:auto;min-width:auto}']})}}},70581:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{StringFilterPredicateComponent:()=>z});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(82765),S=n(53719),G=n(82798),K=n(86600),H=n(61219),k=n(73955);function Q(L,B){if(1&L&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&L){const I=B.$implicit,U=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",I),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,U.stringOperationTranslations.get(U.stringOperationEnum[I]))," ")}}class z{constructor(B){this.fb=B,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=c.w_,this.stringOperations=Object.keys(c.VE),this.stringOperationEnum=c.VE,this.stringOperationTranslations=c.$y,this.propagateChange=null}ngOnInit(){this.stringFilterPredicateFormGroup=this.fb.group({operation:[c.VE.STARTS_WITH,[t.Validators.required]],value:[null,[t.Validators.required]],ignoreCase:[!1]}),this.stringFilterPredicateFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(B){this.propagateChange=B}registerOnTouched(B){}setDisabledState(B){this.disabled=B,this.disabled?this.stringFilterPredicateFormGroup.disable({emitEvent:!1}):this.stringFilterPredicateFormGroup.enable({emitEvent:!1})}writeValue(B){this.stringFilterPredicateFormGroup.get("operation").patchValue(B.operation,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("value").patchValue(B.value,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("ignoreCase").patchValue(B.ignoreCase,{emitEvent:!1})}validate(B){return this.stringFilterPredicateFormGroup.valid?null:{stringFilterPredicate:{valid:!1}}}updateModel(){const B=this.stringFilterPredicateFormGroup.getRawValue();B.type=c.E1.STRING,this.propagateChange(B)}static{this.\u0275fac=function(I){return new(I||z)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["tb-string-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>z),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>z),multi:!0}])],decls:8,vars:9,consts:[[1,"flex","flex-1","flex-row","items-start","justify-start","gap-2",3,"formGroup"],[1,"flex","max-w-30%","flex-full","flex-row","items-center","justify-start","gap-2"],["hideRequiredMarker","",1,"mat-block","flex-1"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","ignoreCase",1,"flex","flex-row","items-stretch","justify-center",2,"min-width","70px"],["formControlName","value",1,"max-w-70%","flex-full",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType","operation"],[3,"value"]],template:function(I,U){1&I&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275template(5,Q,3,4,"mat-option",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"mat-checkbox",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"tb-filter-predicate-value",6),e.\u0275\u0275elementEnd()),2&I&&(e.\u0275\u0275property("formGroup",U.stringFilterPredicateFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(4,7,"filter.operation.operation")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",U.stringOperations),e.\u0275\u0275advance(2),e.\u0275\u0275property("allowUserDynamicSource",U.allowUserDynamicSource)("onlyUserDynamicSource",U.onlyUserDynamicSource)("valueType",U.valueTypeEnum.STRING)("operation",U.stringFilterPredicateFormGroup.get("operation").value))},dependencies:[h.NgForOf,V.MatCheckbox,S.MatFormField,G.MatSelect,K.MatOption,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,H.FilterPredicateValueComponent,k.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper:before{content:none}[_nghost-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-infix{width:auto;min-width:auto}']})}}},25612:(Re,X,n)=>{"use strict";n.d(X,{I:()=>st});var e={};n.r(e),n.d(e,{AliasesEntityAutocompleteComponent:()=>tt});var t={};n.r(t),n.d(t,{ALIASES_ENTITY_SELECT_PANEL_DATA:()=>Qe,AliasesEntitySelectPanelComponent:()=>nt});var c={};n.r(c),n.d(c,{AliasesEntitySelectComponent:()=>Fe});var h={};n.r(h),n.d(h,{RelationFiltersComponent:()=>Ot});var V={};n.r(V),n.d(V,{EntityFilterComponent:()=>vn});var S={};n.r(S),n.d(S,{WidgetActionDialogComponent:()=>Xt});var G={};n.r(G),n.d(G,{ManageWidgetActionsComponent:()=>Wn});var K={};n.r(K),n.d(K,{ComplexFilterPredicateDialogComponent:()=>On});var H={};n.r(H),n.d(H,{UserFilterDialogComponent:()=>$t});var k={};n.r(k),n.d(k,{FILTER_EDIT_PANEL_DATA:()=>Bn,FiltersEditPanelComponent:()=>sa});var Q={};n.r(Q),n.d(Q,{FiltersEditComponent:()=>Yn});var z={};n.r(z),n.d(z,{DashboardToolbarComponent:()=>ua});var L={};n.r(L),n.d(L,{DashboardLayoutComponent:()=>_a});var B={};n.r(B),n.d(B,{EmbedDashboardDialogComponent:()=>ba});var I={};n.r(I),n.d(I,{MAT_BOTTOM_SHEET_DATA:()=>Tl,MAT_BOTTOM_SHEET_DEFAULT_OPTIONS:()=>oi,MatBottomSheet:()=>Jn,MatBottomSheetConfig:()=>zr,MatBottomSheetContainer:()=>Ln,MatBottomSheetModule:()=>$r,MatBottomSheetRef:()=>pr,matBottomSheetAnimations:()=>xl});var U={};n.r(U),n.d(U,{MatNestedTreeNode:()=>Un,MatTree:()=>Gn,MatTreeFlatDataSource:()=>mi,MatTreeFlattener:()=>Kl,MatTreeModule:()=>Zr,MatTreeNestedDataSource:()=>Nl,MatTreeNode:()=>kn,MatTreeNodeDef:()=>xn,MatTreeNodeOutlet:()=>Rn,MatTreeNodePadding:()=>Vn,MatTreeNodeToggle:()=>gn});var F={};n.r(F),n.d(F,{BasicWidgetConfigComponent:()=>Kd.G,BasicWidgetConfigModule:()=>ka.BasicWidgetConfigModule,HomeComponentsModule:()=>st,WidgetComponentsModule:()=>eo.WidgetComponentsModule,WidgetConfigComponentsModule:()=>ya.WidgetConfigComponentsModule,WidgetSettingsCommonModule:()=>va.WidgetSettingsCommonModule,basicWidgetConfigComponentsMap:()=>ka.basicWidgetConfigComponentsMap,checkHasActions:()=>St.OU,constructTableCssString:()=>St.OW,entityDataSortOrderFromString:()=>St.Bx,findColumn:()=>St.kn,findColumnByDef:()=>St.ML,findColumnByEntityKey:()=>St.ff,findColumnByLabel:()=>St.TF,findColumnByName:()=>St.IG,findColumnProperty:()=>St.NY,findEntityKeyByColumnDef:()=>St.UY,fromAlarmColumnDef:()=>St.vC,fromEntityColumnDef:()=>St.DG,getAlarmValue:()=>St.Tl,getCellContentInfo:()=>St.MV,getCellStyleInfo:()=>St.Gy,getColumnDefaultVisibility:()=>St.CT,getColumnSelectionAvailability:()=>St.C5,getColumnWidth:()=>St.XY,getEntityValue:()=>St.h6,getHeaderTitle:()=>St.k1,getRowStyleInfo:()=>St.ON,getTableCellButtonActions:()=>St.cF,noDataMessage:()=>St.Ns,prepareTableCellButtonActions:()=>St.tb,toAlarmColumnDef:()=>St.AA,toEntityColumnDef:()=>St.Mb,toEntityKey:()=>St.y$,widthStyle:()=>St.kj});var a=n(93953),O=n(60177),P=n(19440),A=n(83274),u=n(8968),m=n(60563),p=n(91801),v=n(69505),T=n(97261),C=n(19386),_=n(29414),E=n(56029),f=n(59948),g=n(65197),y=n(61310),b=n(29760),D=n(89432),w=n(78758),ee=n(79993),_e=n(57469),ve=n(81556),Ee=n(72356),$=n(89417),be=n(7673),Te=n(70152),oe=n(88141),R=n(96354),N=n(23294),Z=n(25558),Y=n(97647),ge=n(99437),ce=n(29543),se=n(14085),J=n(78911),de=n(27997),ye=n(9310),re=n(73955),ne=n(88834),ie=n(99213),Ae=n(59042),Pe=n(53719),Be=n(86600),Ke=n(60850),Xe=n(91009);const at=["entityInfoInput"],bt=fe=>({entity:fe});function Mt(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",8),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.clear())}),a.\u0275\u0275elementStart(1,"mat-icon",9),a.\u0275\u0275text(2,"close"),a.\u0275\u0275elementEnd()()}}function ze(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",10),a.\u0275\u0275element(1,"span",11),a.\u0275\u0275pipe(2,"highlight"),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275property("innerHTML",a.\u0275\u0275pipeBind2(2,2,d.name,x.searchText),a.\u0275\u0275sanitizeHtml)}}function vt(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",10)(1,"span"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"async"),a.\u0275\u0275elementEnd()()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",null),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(3,2,d.translate.get("entity.no-entities-matching",a.\u0275\u0275pureFunction1(4,bt,d.searchText)))," ")}}class tt{get required(){return this.requiredValue}set required(l){this.requiredValue=(0,se.coerceBooleanProperty)(l)}constructor(l,d,x,ae){this.store=l,this.translate=d,this.entityService=x,this.fb=ae,this.searchText="",this.propagateChange=Ie=>{},this.selectEntityInfoFormGroup=this.fb.group({entityInfo:[null]})}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){}ngOnInit(){this.filteredEntityInfos=this.selectEntityInfoFormGroup.get("entityInfo").valueChanges.pipe((0,Te.B)(150),(0,oe.M)(l=>{let d;d="string"!=typeof l&&l?l:null,this.updateView(d)}),(0,R.T)(l=>l?"string"==typeof l?l:l.name:""),(0,N.F)(),(0,Z.n)(l=>this.fetchEntityInfos(l)),(0,Y.u)())}ngAfterViewInit(){}setDisabledState(l){this.disabled=l}writeValue(l){this.searchText="",(0,de.f1)(l)?(this.modelValue=l,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(l,{emitEvent:!0})):(this.modelValue=null,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!1}))}updateView(l){this.modelValue!==l&&(this.modelValue=l,this.propagateChange(this.modelValue))}displayEntityInfoFn(l){return l?l.name:void 0}fetchEntityInfos(l){return this.searchText=l,this.getEntityInfos(this.searchText).pipe((0,R.T)(d=>d.data))}getEntityInfos(l){return this.entityService.findEntityInfosByFilterAndName(this.entityFilter,l,{ignoreLoading:!0}).pipe((0,ge.W)(()=>(0,be.of)((0,ce.r)())))}clear(){this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!0}),setTimeout(()=>{this.entityInfoInput.nativeElement.blur(),this.entityInfoInput.nativeElement.focus()},0)}static{this.\u0275fac=function(d){return new(d||tt)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(re.TranslateService),a.\u0275\u0275directiveInject(J.T),a.\u0275\u0275directiveInject($.UntypedFormBuilder))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:tt,selectors:[["tb-aliases-entity-autocomplete"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(at,7),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.entityInfoInput=ae.first)}},inputs:{alias:"alias",entityFilter:"entityFilter",required:"required",disabled:"disabled"},features:[a.\u0275\u0275ProvidersFeature([{provide:$.NG_VALUE_ACCESSOR,useExisting:(0,a.forwardRef)(()=>tt),multi:!0}])],decls:12,vars:12,consts:[["entityInfoInput",""],["entityInfoAutocomplete","matAutocomplete"],[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","entityInfo",3,"required","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"]],template:function(d,x){if(1&d&&(a.\u0275\u0275elementStart(0,"mat-form-field",2)(1,"mat-label"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"input",3,0),a.\u0275\u0275template(5,Mt,3,0,"button",4),a.\u0275\u0275elementStart(6,"mat-autocomplete",5,1),a.\u0275\u0275template(8,ze,3,5,"mat-option",6),a.\u0275\u0275pipe(9,"async"),a.\u0275\u0275template(10,vt,4,6,"mat-option",7),a.\u0275\u0275pipe(11,"async"),a.\u0275\u0275elementEnd()()),2&d){let ae;const Ie=a.\u0275\u0275reference(7);a.\u0275\u0275property("formGroup",x.selectEntityInfoFormGroup),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(x.alias),a.\u0275\u0275advance(),a.\u0275\u0275property("required",x.required)("matAutocomplete",Ie),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.selectEntityInfoFormGroup.get("entityInfo").value&&!x.disabled),a.\u0275\u0275advance(),a.\u0275\u0275property("displayWith",x.displayEntityInfoFn),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(9,8,x.filteredEntityInfos)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!(null!=(ae=a.\u0275\u0275pipeBind1(11,10,x.filteredEntityInfos))&&ae.length))}},dependencies:[O.NgForOf,O.NgIf,ne.MatIconButton,ie.MatIcon,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pe.MatSuffix,Be.MatOption,Ke.MatAutocomplete,Ke.MatAutocompleteTrigger,$.DefaultValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormGroupDirective,$.FormControlName,O.AsyncPipe,Xe.HighlightPipe],encapsulation:2})}}function Ye(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",2)(1,"tb-aliases-entity-autocomplete",3),a.\u0275\u0275twoWayListener("ngModelChange",function(ae){const Ie=a.\u0275\u0275restoreView(d).$implicit;return a.\u0275\u0275twoWayBindingSet(Ie.value.currentEntity,ae)||(Ie.value.currentEntity=ae),a.\u0275\u0275resetView(ae)}),a.\u0275\u0275listener("ngModelChange",function(){const ae=a.\u0275\u0275restoreView(d).$implicit,Ie=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ie.currentAliasEntityChanged(ae.key,ae.value.currentEntity))}),a.\u0275\u0275elementEnd()()}if(2&fe){const d=l.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275property("alias",d.value.alias)("entityFilter",d.value.entityFilter),a.\u0275\u0275twoWayProperty("ngModel",d.value.currentEntity)}}const Qe=new a.InjectionToken("AliasesEntitySelectPanelData");class nt{constructor(l){this.data=l,this.entityAliasesInfo=this.data.entityAliasesInfo}currentAliasEntityChanged(l,d){d&&this.data.aliasController.updateCurrentAliasEntity(l,d)}static{this.\u0275fac=function(d){return new(d||nt)(a.\u0275\u0275directiveInject(Qe))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:nt,selectors:[["tb-aliases-entity-select-panel"]],decls:3,vars:3,consts:[[1,"mat-content","mat-padding","flex","flex-col"],["class","flex flex-row",4,"ngFor","ngForOf"],[1,"flex","flex-row"],["required","",1,"flex-1",3,"ngModelChange","alias","entityFilter","ngModel"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275template(1,Ye,2,3,"div",1),a.\u0275\u0275pipe(2,"keyvalue"),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(2,1,x.entityAliasesInfo)))},dependencies:[O.NgForOf,$.NgControlStatus,$.RequiredValidator,$.NgModel,tt,O.KeyValuePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px #0003,0 13px 19px 2px #00000024,0 5px 24px 4px #0000001f}@media (min-height: 350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}']})}}var ot=n(47987),gt=n(76939),rt=n(47169),Ze=n(99327),je=n(14823);const $e=["aliasEntitySelectPanelOrigin"];function Oe(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"section",2)(1,"button",3,0),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.openEditMode())}),a.\u0275\u0275elementStart(4,"mat-icon",4),a.\u0275\u0275text(5,"devices_other"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(6,"span",5),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.openEditMode())}),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd()()}if(2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(3,5,"entity.select-entities")),a.\u0275\u0275property("matTooltipPosition",d.tooltipPosition),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(7,7,"entity.select-entities")),a.\u0275\u0275property("matTooltipPosition",d.tooltipPosition),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",d.displayValue," ")}}class Fe{set aliasController(l){this.aliasControllerValue=l,this.setupAliasController(this.aliasControllerValue)}get aliasController(){return this.aliasControllerValue}constructor(l,d,x,ae,Ie){this.translate=l,this.overlay=d,this.cd=x,this.breakpointObserver=ae,this.viewContainerRef=Ie,this.aliasesEntitySelectClass="tb-hide",this.tooltipPosition="above",this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1,this.rxSubscriptions=new Array}setupAliasController(l){this.rxSubscriptions.forEach(d=>{d.unsubscribe()}),this.rxSubscriptions.length=0,l&&(this.rxSubscriptions.push(l.entityAliasesChanged.subscribe(()=>{setTimeout(()=>{this.updateDisplayValue(),this.updateEntityAliasesInfo()},0)})),this.rxSubscriptions.push(l.entityAliasResolved.subscribe(()=>{setTimeout(()=>{this.updateDisplayValue(),this.updateEntityAliasesInfo()},0)})))}ngOnInit(){}ngOnDestroy(){this.rxSubscriptions.forEach(l=>{l.unsubscribe()}),this.rxSubscriptions.length=0}openEditMode(){if(this.disabled||!this.hasSelectableAliasEntities)return;const l=this.overlay.position(),d=new ot.OverlayConfig({panelClass:"tb-aliases-entity-select-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0});d.positionStrategy=l.flexibleConnectedTo(this.aliasEntitySelectPanelOrigin.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]);const ae=this.overlay.create(d);ae.backdropClick().subscribe(()=>{ae.dispose()});const Ie=this._createAliasesEntitySelectPanelInjector(ae,{aliasController:this.aliasController,entityAliasesInfo:(0,de.Go)(this.entityAliasesInfo)});ae.attach(new gt.ComponentPortal(nt,this.viewContainerRef,Ie))}_createAliasesEntitySelectPanelInjector(l,d){const x=[{provide:Qe,useValue:d},{provide:ot.OverlayRef,useValue:l}];return a.Injector.create({parent:this.viewContainerRef.injector,providers:x})}updateDisplayValue(){let l,x,d=!0;const ae=this.aliasController.getEntityAliases();for(const Ie of Object.keys(ae))if(!ae[Ie].filter.resolveMultiple){const Je=this.aliasController.getInstantAliasInfo(Ie);if(Je&&Je.currentEntity){if(x){d=!1;break}x=Ie}}l=d&&x?this.aliasController.getInstantAliasInfo(x).currentEntity.name:this.translate.instant("entity.entities"),this.displayValue=l,this.cd.detectChanges()}updateEntityAliasesInfo(){const l=this.aliasController.getEntityAliases();this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1,this.aliasesEntitySelectClass="tb-hide";for(const d of Object.keys(l)){const x=this.aliasController.getInstantAliasInfo(d);x&&!x.resolveMultiple&&x.currentEntity&&x.entityFilter&&x.entityFilter.type!==rt.V6.singleEntity&&(this.entityAliasesInfo[d]=(0,de.Go)(x),this.hasSelectableAliasEntities=!0,this.aliasesEntitySelectClass="")}}static{this.\u0275fac=function(d){return new(d||Fe)(a.\u0275\u0275directiveInject(re.TranslateService),a.\u0275\u0275directiveInject(ot.Overlay),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(Ze.BreakpointObserver),a.\u0275\u0275directiveInject(a.ViewContainerRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Fe,selectors:[["tb-aliases-entity-select"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery($e,5),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.aliasEntitySelectPanelOrigin=ae.first)}},hostVars:2,hostBindings:function(d,x){2&d&&a.\u0275\u0275classMap(x.aliasesEntitySelectClass)},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:1,vars:1,consts:[["aliasEntitySelectPanelOrigin","cdkOverlayOrigin"],["class","tb-aliases-entity-select flex flex-row items-center justify-start",4,"ngIf"],[1,"tb-aliases-entity-select","flex","flex-row","items-center","justify-start"],["mat-icon-button","","cdkOverlayOrigin","",3,"click","matTooltip","matTooltipPosition"],[1,"material-icons"],[1,"lt-lg:!hidden",3,"click","matTooltip","matTooltipPosition"]],template:function(d,x){1&d&&a.\u0275\u0275template(0,Oe,9,9,"section",1),2&d&&a.\u0275\u0275property("ngIf",x.hasSelectableAliasEntities)},dependencies:[O.NgIf,ne.MatIconButton,ie.MatIcon,je.MatTooltip,ot.CdkOverlayOrigin,re.TranslatePipe],styles:['@charset "UTF-8";.tb-hide[_nghost-%COMP%]{display:none}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{min-width:52px;min-height:32px;padding:0 6px}@media screen and (max-width: 959px){[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}']})}}var le=n(40248),we=n(31648),qe=n(59248),lt=n(40500),Kt=n(25967),Jt=n(99321),Vt=n(18530),hn=n(13961),ut=n(56977),Zt=n(74209),He=n(44216),We=n(29207),he=n(12120),Me=n(61341),Ne=n(82798),it=n(30450),Ue=n(31635),Ce=n(69749),j=n(29225),q=n(87263),pe=n(36471);const xe=()=>["tb-inline-field"],Ge=()=>["tb-inline-field","tb-chips","flex"];function _t(fe,l){1&fe&&a.\u0275\u0275element(0,"div",10)}function Et(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-chip-listbox",17)(1,"mat-chip-option",18),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd()()),2&fe){const d=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("formControl",d.get("negate")),a.\u0275\u0275advance(),a.\u0275\u0275property("value",!0),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(3,3,"relation.not"))}}function Gt(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",11),a.\u0275\u0275template(1,Et,4,5,"mat-chip-listbox",12),a.\u0275\u0275element(2,"tb-relation-type-autocomplete",13)(3,"tb-entity-type-list",14),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementStart(5,"div",15)(6,"button",16),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275pipe(8,"async"),a.\u0275\u0275listener("click",function(){const ae=a.\u0275\u0275restoreView(d).index,Ie=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ie.removeFilter(ae))}),a.\u0275\u0275elementStart(9,"mat-icon"),a.\u0275\u0275text(10,"delete"),a.\u0275\u0275elementEnd()()()()}if(2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.enableNotOption),a.\u0275\u0275advance(),a.\u0275\u0275property("additionalClasses",a.\u0275\u0275pureFunction0(15,xe))("formControl",d.get("relationType")),a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("filledInputPlaceholder",a.\u0275\u0275pipeBind1(4,9,"entity.add-entity-type")),a.\u0275\u0275property("additionalClasses",a.\u0275\u0275pureFunction0(16,Ge))("allowedEntityTypes",x.allowedEntityTypes)("formControl",d.get("entityTypes")),a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(7,11,"relation.remove-filter")),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(8,13,x.isLoading$))}}class Ot extends Ce.H{constructor(l,d){super(l),this.store=l,this.fb=d,this.enableNotOption=!1,this.destroy$=new Vt.B,this.propagateChange=null}ngOnInit(){this.relationFiltersFormGroup=this.fb.group({relationFilters:this.fb.array([])}),this.relationFiltersFormGroup.valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get relationFiltersFormArray(){return this.relationFiltersFormGroup.get("relationFilters")}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){}setDisabledState(l){this.disabled=l}writeValue(l){if(l?.length===this.relationFiltersFormArray.length)this.relationFiltersFormArray.patchValue(l,{emitEvent:!1});else{const d=[];l&&l.length&&l.forEach(x=>{d.push(this.createRelationFilterFormGroup(x))}),this.relationFiltersFormGroup.setControl("relationFilters",this.fb.array(d),{emitEvent:!1})}}removeFilter(l){this.relationFiltersFormGroup.get("relationFilters").removeAt(l)}addFilter(){this.relationFiltersFormArray.push(this.createRelationFilterFormGroup({relationType:null,entityTypes:[]}))}createRelationFilterFormGroup(l){const d=this.fb.group({relationType:[l?l.relationType:null],entityTypes:[l?l.entityTypes:[]]});return this.enableNotOption&&(d.addControl("negate",this.fb.control({value:!!l&&l.negate,disabled:!0})),d.get("relationType").valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(x=>{x?d.get("negate").enable({emitEvent:!1}):d.get("negate").disable({emitEvent:!1})})),d}updateModel(){const l=this.relationFiltersFormGroup.get("relationFilters").value;this.propagateChange(l)}static{this.\u0275fac=function(d){return new(d||Ot)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject($.UntypedFormBuilder))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Ot,selectors:[["tb-relation-filters"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes",enableNotOption:"enableNotOption"},features:[a.\u0275\u0275ProvidersFeature([{provide:$.NG_VALUE_ACCESSOR,useExisting:(0,a.forwardRef)(()=>Ot),multi:!0}]),a.\u0275\u0275InheritDefinitionFeature],decls:20,vars:14,consts:[[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-table",3,"formGroup"],[1,"tb-form-table-header"],["class","tb-form-table-header-cell flex-18",4,"ngIf"],[1,"tb-form-table-header-cell","flex-50"],[1,"tb-form-table-header-cell","actions-header"],["formArrayName","relationFilters",1,"tb-form-table-body"],["class","tb-form-table-row align-start",4,"ngFor","ngForOf"],["translate","",1,"tb-prompt","flex","items-center","justify-center"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"tb-form-table-header-cell","flex-18"],[1,"tb-form-table-row","align-start"],["class","flex-18 center-stretch",3,"formControl",4,"ngIf"],["subscriptSizing","dynamic","showLabel","false","appearance","outline",1,"flex-50",3,"additionalClasses","formControl"],["subscriptSizing","dynamic","appearance","outline",1,"entity-type-list","flex-50",3,"additionalClasses","filledInputPlaceholder","allowedEntityTypes","formControl"],[1,"tb-form-table-row-cell-buttons"],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],[1,"flex-18","center-stretch",3,"formControl"],["color","primary",3,"value"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),a.\u0275\u0275template(3,_t,1,0,"div",3),a.\u0275\u0275elementStart(4,"div",4),a.\u0275\u0275text(5),a.\u0275\u0275pipe(6,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",4),a.\u0275\u0275text(8),a.\u0275\u0275pipe(9,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(10,"div",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",6),a.\u0275\u0275template(12,Gt,11,17,"div",7),a.\u0275\u0275elementStart(13,"div")(14,"span",8),a.\u0275\u0275text(15,"relation.any-relation"),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(16,"div")(17,"button",9),a.\u0275\u0275listener("click",function(){return x.addFilter()}),a.\u0275\u0275text(18),a.\u0275\u0275pipe(19,"translate"),a.\u0275\u0275elementEnd()()()),2&d&&(a.\u0275\u0275advance(),a.\u0275\u0275property("formGroup",x.relationFiltersFormGroup),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.enableNotOption),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(6,8,"relation.relation-type")),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(9,10,"entity.entity-types")),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngForOf",x.relationFiltersFormArray.controls),a.\u0275\u0275advance(),a.\u0275\u0275classProp("!hidden",x.relationFiltersFormArray.length),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(19,12,"filter.add")," "))},dependencies:[O.NgForOf,O.NgIf,q.EntityTypeListComponent,Me.RelationTypeAutocompleteComponent,ne.MatButton,ne.MatIconButton,ie.MatIcon,je.MatTooltip,pe.MatChipListbox,pe.MatChipOption,$.NgControlStatus,$.NgControlStatusGroup,$.FormControlDirective,$.FormGroupDirective,$.FormArrayName,re.TranslateDirective,O.AsyncPipe,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .flex-50[_ngcontent-%COMP%]{flex:1 1 50%}[_nghost-%COMP%]   .flex-18[_ngcontent-%COMP%]{flex:1 1 18%}[_nghost-%COMP%]   .actions-header[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   .entity-type-list[_ngcontent-%COMP%]{display:flex}']})}}function Wt(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",8),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,2,x.aliasFilterTypeTranslations.get(d))," ")}}function qt(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-error"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"alias.filter-type-required")," "))}function en(fe,l){1&fe&&a.\u0275\u0275element(0,"tb-entity-select",9)}function Tn(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-type-select",10)(1,"tb-entity-list",11),a.\u0275\u0275pipe(2,"translate")),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("allowedEntityTypes",d.listEntityTypes),a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("labelText",a.\u0275\u0275pipeBind1(2,3,"entity.entity-list")),a.\u0275\u0275property("entityType",d.filterFormGroup.get("entityType").value)}}function tn(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-error"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"entity.entity-name-filter-required")," "))}function Mn(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-type-select",10),a.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"entity.name-starts-with"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-icon",12),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275text(6,"help"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"input",13),a.\u0275\u0275template(8,tn,3,3,"mat-error",5),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("allowedEntityTypes",d.listEntityTypes),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(5,3,"entity.help-text")),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",d.filterFormGroup.get("entityNameFilter").hasError("required"))}}function bn(fe,l){if(1&fe&&a.\u0275\u0275element(0,"tb-entity-type-select",10),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("allowedEntityTypes",d.listEntityTypes)}}function rn(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-form-field",14)(1,"mat-label",2),a.\u0275\u0275text(2,"alias.state-entity-parameter-name"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"input",15),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",16)(6,"label",17),a.\u0275\u0275text(7),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(9,"tb-entity-select",18),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(4,2,"alias.default-entity-parameter-name")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(8,4,"alias.default-state-entity")))}function on(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-subtype-list",19),a.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"asset.name-starts-with"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-icon",12),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275text(6,"help"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"input",20),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("entityType",d.entityType.ASSET),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(5,2,"asset.help-text"))}}function Ta(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-subtype-list",21),a.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"device.name-starts-with"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-icon",12),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275text(6,"help"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"input",22),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("entityType",d.entityType.DEVICE),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(5,2,"device.help-text"))}}function go(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-subtype-list",23),a.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"entity-view.name-starts-with"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-icon",12),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275text(6,"help"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"input",24),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("entityType",d.entityType.ENTITY_VIEW),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(5,2,"entity-view.help-text"))}}function fo(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-entity-subtype-list",25),a.\u0275\u0275elementStart(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"edge.name-starts-with"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"input",26),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("entityType",d.entityType.EDGE)}}function Ma(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"div",41)(1,"mat-form-field")(2,"mat-label",2),a.\u0275\u0275text(3,"alias.state-entity-parameter-name"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"input",42),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(5,"tb-entity-select",43),a.\u0275\u0275elementEnd())}function Da(fe,l){1&fe&&a.\u0275\u0275element(0,"tb-entity-select",44)}function aa(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",8),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,2,x.directionTypeTranslations.get(x.directionTypeEnum[d]))," ")}}function _o(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-slide-toggle",45),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"alias.last-level-relation")," "))}function nn(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"section",27)(1,"div",28)(2,"div",29),a.\u0275\u0275text(3,"alias.root-entity"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-slide-toggle",30),a.\u0275\u0275text(5),a.\u0275\u0275pipe(6,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(7,Ma,6,0,"div",31)(8,Da,1,0,"tb-entity-select",32),a.\u0275\u0275elementStart(9,"div",33)(10,"mat-form-field",34)(11,"mat-label",2),a.\u0275\u0275text(12,"relation.direction"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"mat-select",35),a.\u0275\u0275template(14,aa,3,4,"mat-option",4),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(15,"mat-form-field",36)(16,"mat-label",2),a.\u0275\u0275text(17,"alias.max-relation-level"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(18,"input",37),a.\u0275\u0275pipe(19,"translate"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(20,_o,3,3,"mat-slide-toggle",38),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"div",39)(22,"div",29),a.\u0275\u0275text(23,"relation.relation-filters"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(24,"tb-relation-filters",40),a.\u0275\u0275elementEnd()()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(6,7,"alias.root-state-entity")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",d.filterFormGroup.get("rootStateEntity").value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!d.filterFormGroup.get("rootStateEntity").value),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngForOf",d.directionTypes),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(19,9,"alias.unlimited-level")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",d.filterFormGroup.get("maxLevel").value>1||!d.filterFormGroup.get("maxLevel").value),a.\u0275\u0275advance(4),a.\u0275\u0275property("allowedEntityTypes",d.allowedEntityTypes)}}function vs(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"div",51),a.\u0275\u0275element(1,"tb-entity-select",58),a.\u0275\u0275elementEnd())}function ys(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"div",59)(1,"mat-form-field",60)(2,"mat-label",2),a.\u0275\u0275text(3,"alias.state-entity-parameter-name"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"input",15),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",61)(7,"label",17),a.\u0275\u0275text(8),a.\u0275\u0275pipe(9,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(10,"tb-entity-select",18),a.\u0275\u0275elementEnd()()),2&fe&&(a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(5,2,"alias.default-entity-parameter-name")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(9,4,"alias.default-state-entity")))}function Es(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",8),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,2,x.directionTypeTranslations.get(x.directionTypeEnum[d]))," ")}}function Cs(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"label",17),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"section",46),a.\u0275\u0275element(4,"mat-slide-toggle",47),a.\u0275\u0275elementStart(5,"label",48),a.\u0275\u0275text(6,"alias.root-state-entity"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(7,vs,2,0,"div",49)(8,ys,11,6,"div",50),a.\u0275\u0275elementStart(9,"div",51)(10,"section",46),a.\u0275\u0275element(11,"mat-slide-toggle",52),a.\u0275\u0275elementStart(12,"label",48),a.\u0275\u0275text(13,"alias.last-level-relation"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(14,"div",53)(15,"mat-form-field",54)(16,"mat-label",2),a.\u0275\u0275text(17,"relation.direction"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"mat-select",35),a.\u0275\u0275template(19,Es,3,4,"mat-option",4),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(20,"mat-form-field",55)(21,"mat-label",2),a.\u0275\u0275text(22,"alias.max-relation-level"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(23,"input",37),a.\u0275\u0275pipe(24,"translate"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(25,"div",56),a.\u0275\u0275text(26,"relation.relation-type"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(27,"tb-relation-type-autocomplete",57)),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,5,"alias.root-entity")),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngIf",!d.filterFormGroup.get("rootStateEntity").value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",d.filterFormGroup.get("rootStateEntity").value),a.\u0275\u0275advance(11),a.\u0275\u0275property("ngForOf",d.directionTypes),a.\u0275\u0275advance(4),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(24,7,"alias.unlimited-level"))}}function xs(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",62),a.\u0275\u0275text(1,"asset.asset-types"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(2,"tb-entity-subtype-list",19)),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("entityType",d.entityType.ASSET)}}function Ts(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",62),a.\u0275\u0275text(1,"device.device-types"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(2,"tb-entity-subtype-list",21)),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("entityType",d.entityType.DEVICE)}}function Ms(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",62),a.\u0275\u0275text(1,"edge.edge-types"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(2,"tb-entity-subtype-list",25)),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("entityType",d.entityType.EDGE)}}function Ds(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",62),a.\u0275\u0275text(1,"entity-view.entity-view-types"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(2,"tb-entity-subtype-list",23)),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("entityType",d.entityType.ENTITY_VIEW)}}(0,Ue.__decorate)([(0,j.coerceBoolean)(),(0,Ue.__metadata)("design:type",Object)],Ot.prototype,"enableNotOption",void 0);class vn{constructor(l,d){this.entityService=l,this.fb=d,this.resolveMultipleChanged=new a.EventEmitter,this.aliasFilterType=rt.V6,this.aliasFilterTypeTranslations=rt.iR,this.entityType=Kt.ck,this.directionTypes=Object.keys(Jt.td),this.directionTypeTranslations=Jt.Bp,this.directionTypeEnum=Jt.td,this.propagateChange=null,this.destroy$=new Vt.B,this.subscriptions=new hn.yU}ngOnInit(){this.aliasFilterTypes=this.entityService.getAliasFilterTypesByEntityTypes(this.allowedEntityTypes),this.listEntityTypes=this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes,!1),(!this.allowedEntityTypes?.length||this.allowedEntityTypes.includes(Kt.ck.QUEUE_STATS))&&this.listEntityTypes.push(Kt.ck.QUEUE_STATS),this.entityFilterFormGroup=this.fb.group({type:[null,[$.Validators.required]]}),this.entityFilterFormGroup.get("type").valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(l=>{this.filterTypeChanged(l)}),this.entityFilterFormGroup.valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(()=>{this.updateModel()}),this.filterFormGroup=this.fb.group({})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.subscriptions.unsubscribe()}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){}setDisabledState(l){this.disabled=l}writeValue(l){l||(l={type:null,resolveMultiple:this.resolveMultiple}),this.entityFilterFormGroup.get("type").patchValue(l.type,{emitEvent:!1}),l&&l.type&&this.updateFilterFormGroup(l.type,l)}updateFilterFormGroup(l,d){switch(this.subscriptions.unsubscribe(),this.subscriptions=new hn.yU,l){case rt.V6.singleEntity:this.filterFormGroup=this.fb.group({singleEntity:[d?d.singleEntity:null,[$.Validators.required]]});break;case rt.V6.entityList:this.filterFormGroup=this.fb.group({entityType:[d?d.entityType:null,[$.Validators.required]],entityList:[{value:d?d.entityList:[],disabled:!d?.entityType},[$.Validators.required]]});const ae=this.filterFormGroup.get("entityType").valueChanges.subscribe(Ve=>{Ve&&this.filterFormGroup.get("entityList").disabled&&this.filterFormGroup.get("entityList").enable({emitEvent:!1})});this.subscriptions.add(ae);break;case rt.V6.entityName:this.filterFormGroup=this.fb.group({entityType:[d?d.entityType:null,[$.Validators.required]],entityNameFilter:[d?d.entityNameFilter:"",[$.Validators.required]]});break;case rt.V6.entityType:this.filterFormGroup=this.fb.group({entityType:[d?d.entityType:null,[$.Validators.required]]});break;case rt.V6.stateEntity:this.filterFormGroup=this.fb.group({stateEntityParamName:[d?d.stateEntityParamName:null,[]],defaultStateEntity:[d?d.defaultStateEntity:null,[]]});break;case rt.V6.assetType:this.filterFormGroup=this.fb.group({assetTypes:[d?d.assetTypes:null,[$.Validators.required]],assetNameFilter:[d?d.assetNameFilter:"",[]]});break;case rt.V6.deviceType:this.filterFormGroup=this.fb.group({deviceTypes:[d?d.deviceTypes:null,[$.Validators.required]],deviceNameFilter:[d?d.deviceNameFilter:"",[]]});break;case rt.V6.edgeType:this.filterFormGroup=this.fb.group({edgeTypes:[d?d.edgeTypes:null,[$.Validators.required]],edgeNameFilter:[d?d.edgeNameFilter:"",[]]});break;case rt.V6.entityViewType:this.filterFormGroup=this.fb.group({entityViewTypes:[d?d.entityViewTypes:null,[$.Validators.required]],entityViewNameFilter:[d?d.entityViewNameFilter:"",[]]});break;case rt.V6.apiUsageState:this.filterFormGroup=this.fb.group({});break;case rt.V6.relationsQuery:case rt.V6.assetSearchQuery:case rt.V6.deviceSearchQuery:case rt.V6.edgeSearchQuery:case rt.V6.entityViewSearchQuery:this.filterFormGroup=this.fb.group({rootStateEntity:[!!d&&d.rootStateEntity,[]],stateEntityParamName:[d?d.stateEntityParamName:null,[]],defaultStateEntity:[d?d.defaultStateEntity:null,[]],rootEntity:[d?d.rootEntity:null,d&&d.rootStateEntity?[]:[$.Validators.required]],direction:[d?d.direction:Jt.td.FROM,[$.Validators.required]],maxLevel:[d?d.maxLevel:1,[]],fetchLastLevelOnly:[!!d&&d.fetchLastLevelOnly,[]]});const Ie=this.filterFormGroup.get("rootStateEntity").valueChanges.subscribe(Ve=>{this.filterFormGroup.get("rootEntity").setValidators(Ve?[]:[$.Validators.required]),this.filterFormGroup.get("rootEntity").updateValueAndValidity()});this.subscriptions.add(Ie),l===rt.V6.relationsQuery?this.filterFormGroup.addControl("filters",this.fb.control(d?d.filters:[],[])):(this.filterFormGroup.addControl("relationType",this.fb.control(d?d.relationType:null,[])),l===rt.V6.assetSearchQuery?this.filterFormGroup.addControl("assetTypes",this.fb.control(d?d.assetTypes:[],[$.Validators.required])):l===rt.V6.deviceSearchQuery?this.filterFormGroup.addControl("deviceTypes",this.fb.control(d?d.deviceTypes:[],[$.Validators.required])):l===rt.V6.edgeSearchQuery?this.filterFormGroup.addControl("edgeTypes",this.fb.control(d?d.edgeTypes:[],[$.Validators.required])):l===rt.V6.entityViewSearchQuery&&this.filterFormGroup.addControl("entityViewTypes",this.fb.control(d?d.entityViewTypes:[],[$.Validators.required])))}const x=this.filterFormGroup.valueChanges.subscribe(()=>{this.updateModel()});this.subscriptions.add(x)}filterTypeChanged(l){let d=!0;(l===rt.V6.singleEntity||l===rt.V6.stateEntity||l===rt.V6.apiUsageState)&&(d=!1),this.resolveMultiple!==d&&this.resolveMultipleChanged.emit(d),this.updateFilterFormGroup(l)}updateModel(){let l=null;this.entityFilterFormGroup.valid&&this.filterFormGroup.valid&&(l={type:this.entityFilterFormGroup.get("type").value,resolveMultiple:this.resolveMultiple},l={...l,...this.filterFormGroup.value}),this.propagateChange(l)}static{this.\u0275fac=function(d){return new(d||vn)(a.\u0275\u0275directiveInject(J.T),a.\u0275\u0275directiveInject($.FormBuilder))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:vn,selectors:[["tb-entity-filter"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes",resolveMultiple:"resolveMultiple"},outputs:{resolveMultipleChanged:"resolveMultipleChanged"},features:[a.\u0275\u0275ProvidersFeature([{provide:$.NG_VALUE_ACCESSOR,useExisting:(0,a.forwardRef)(()=>vn),multi:!0}])],decls:23,vars:20,consts:[[1,"tb-entity-filter","flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","flex-col",3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["required","","useAliasEntityTypes","true","formControlName","singleEntity"],["required","","showLabel","","useAliasEntityTypes","true","formControlName","entityType",3,"allowedEntityTypes"],["required","","formControlName","entityList",3,"labelText","entityType"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-primary",2,"cursor","pointer",3,"matTooltip"],["matInput","","formControlName","entityNameFilter","required",""],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","stateEntityParamName",3,"placeholder"],[1,"flex","flex-col"],[1,"tb-small"],["useAliasEntityTypes","true","formControlName","defaultStateEntity",1,"flex-1"],["required","","formControlName","assetTypes",3,"entityType"],["matInput","","formControlName","assetNameFilter"],["required","","formControlName","deviceTypes",3,"entityType"],["matInput","","formControlName","deviceNameFilter"],["required","","formControlName","entityViewTypes",3,"entityType"],["matInput","","formControlName","entityViewNameFilter"],["required","","formControlName","edgeTypes",3,"entityType"],["matInput","","formControlName","edgeNameFilter"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-panel","stroked","no-gap"],["translate","",1,"tb-form-panel-title"],["formControlName","rootStateEntity",1,"mat-slide","margin"],["class","tb-form-panel no-border no-padding no-gap",4,"ngIf"],["required","","useAliasEntityTypes","true","formControlName","rootEntity",4,"ngIf"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["required","","formControlName","direction"],["floatLabel","always",1,"flex"],["matInput","","type","number","min","1","step","1","formControlName","maxLevel",3,"placeholder"],["class","mat-slide","formControlName","fetchLastLevelOnly",4,"ngIf"],[1,"tb-form-panel","stroked"],["enableNotOption","","formControlName","filters",3,"allowedEntityTypes"],[1,"tb-form-panel","no-border","no-padding","no-gap"],["matInput","","formControlName","stateEntityParamName"],["useAliasEntityTypes","true","formControlName","defaultStateEntity"],["required","","useAliasEntityTypes","true","formControlName","rootEntity"],["formControlName","fetchLastLevelOnly",1,"mat-slide"],[1,"tb-root-state-entity-switch","flex","flex-row","items-center","justify-start",2,"padding-left","0"],["formControlName","rootStateEntity",1,"root-state-entity-switch"],["translate","",1,"tb-small","root-state-entity-label"],["class","flex flex-1 flex-row",4,"ngIf"],["class","flex flex-1 flex-col gt-sm:flex-row",4,"ngIf"],[1,"flex","flex-1","flex-row"],["formControlName","fetchLastLevelOnly",1,"root-state-entity-switch"],[1,"flex","flex-1","flex-row","gap-2","xs:flex-col"],[1,"mat-block",2,"min-width","100px"],["floatLabel","always",1,"mat-block","flex-1"],["translate","",1,"mat-caption",2,"color","rgba(0,0,0,0.57)"],["formControlName","relationType",1,"flex-1"],["required","","useAliasEntityTypes","true","formControlName","rootEntity",1,"flex-1"],[1,"flex","flex-1","flex-col","gt-sm:flex-row"],["floatLabel","always",1,"mat-block",2,"margin-top","24px","padding-right","8px"],[1,"flex","flex-1","flex-col"],["translate","",1,"mat-caption","tb-required",2,"color","rgba(0,0,0,0.57)"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label",2),a.\u0275\u0275text(3,"alias.filter-type"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-select",3),a.\u0275\u0275template(5,Wt,3,4,"mat-option",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,qt,3,3,"mat-error",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"section",6),a.\u0275\u0275template(8,en,1,0,"ng-template",7)(9,Tn,3,5,"ng-template",7)(10,Mn,9,5,"ng-template",7)(11,bn,1,1,"ng-template",7)(12,rn,10,6,"ng-template",7)(13,on,8,4,"ng-template",7)(14,Ta,8,4,"ng-template",7)(15,go,8,4,"ng-template",7)(16,fo,5,1,"ng-template",7)(17,nn,25,11,"ng-template",7)(18,Cs,28,9,"ng-template",7)(19,xs,3,1,"ng-template",7)(20,Ts,3,1,"ng-template",7)(21,Ms,3,1,"ng-template",7)(22,Ds,3,1,"ng-template",7),a.\u0275\u0275elementEnd()()),2&d&&(a.\u0275\u0275property("formGroup",x.entityFilterFormGroup),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngForOf",x.aliasFilterTypes),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.entityFilterFormGroup.get("type").hasError("required")),a.\u0275\u0275advance(),a.\u0275\u0275property("formGroup",x.filterFormGroup)("ngSwitch",x.entityFilterFormGroup.get("type").value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.singleEntity),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.entityList),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.entityName),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.entityType),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.stateEntity),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.assetType),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.deviceType),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.entityViewType),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.edgeType),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.relationsQuery),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.entityFilterFormGroup.get("type").value===x.aliasFilterType.assetSearchQuery||x.entityFilterFormGroup.get("type").value===x.aliasFilterType.deviceSearchQuery||x.entityFilterFormGroup.get("type").value===x.aliasFilterType.edgeSearchQuery||x.entityFilterFormGroup.get("type").value===x.aliasFilterType.entityViewSearchQuery?x.entityFilterFormGroup.get("type").value:""),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.assetSearchQuery),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.deviceSearchQuery),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.edgeSearchQuery),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.aliasFilterType.entityViewSearchQuery))},dependencies:[O.NgForOf,O.NgIf,O.NgSwitch,O.NgSwitchCase,Zt.EntitySubTypeListComponent,He.EntityListComponent,We.EntityTypeSelectComponent,he.EntitySelectComponent,Me.RelationTypeAutocompleteComponent,ie.MatIcon,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pe.MatError,Pe.MatSuffix,Ne.MatSelect,Be.MatOption,je.MatTooltip,it.MatSlideToggle,$.DefaultValueAccessor,$.NumberValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.MinValidator,$.FormGroupDirective,$.FormControlName,re.TranslateDirective,Ot,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]   tb-entity-select[_ngcontent-%COMP%]{min-height:92px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:10px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-label[_ngcontent-%COMP%]{margin:5px 0 5px 10px}']})}}var Ps=n(80216),Ii=n(719),Oi=n(67496),ho=n(96695),Ya=n(2042),bo=n(33726),Dn=n(57786),Is=n(61594),_r=n(57665),dn=n(84412),Xa=n(92771),Os=n(89348),ws=n(99898);const wi=fe=>{const l=(0,de.Go)(fe);return delete l.actionSourceId,delete l.actionSourceName,delete l.typeName,l};class Bs{constructor(l,d){this.translate=l,this.utils=d,this.actionsSubject=new dn.t([]),this.pageDataSubject=new dn.t((0,ce.r)()),this.pageData$=this.pageDataSubject.asObservable()}connect(l){return this.actionsSubject.asObservable()}disconnect(l){this.actionsSubject.complete(),this.pageDataSubject.complete()}setActions(l){this.actionsMap=l.actionsMap,this.actionSources=l.actionSources}loadActions(l,d=!1){d&&(this.allActions=null);const x=new Xa.m;return this.fetchActions(l).pipe((0,ge.W)(()=>(0,be.of)((0,ce.r)()))).subscribe(ae=>{this.actionsSubject.next(ae.data),this.pageDataSubject.next(ae),x.next(ae)}),x}fetchActions(l){return this.getAllActions().pipe((0,R.T)(d=>l.filterData(d)))}getAllActions(){if(!this.allActions){const l=[];for(const d of Object.keys(this.actionsMap))this.actionsMap[d].forEach(ae=>{l.push(this.toWidgetActionDescriptorInfo(d,ae))});this.allActions=(0,be.of)(l).pipe((0,Os.H)(1),(0,ws.B)())}return this.allActions}toWidgetActionDescriptorInfo(l,d){const x=this.actionSources[l];return{actionSourceId:l,actionSourceName:x?this.utils.customTranslation(x.name,x.name):l,typeName:this.translate.instant(_r.yW.get(d.type)),...d}}isEmpty(){return this.actionsSubject.pipe((0,R.T)(l=>!l.length))}total(){return this.pageDataSubject.pipe((0,R.T)(l=>l.totalElements))}}var hr=n(15673),Lt=n(34006),ln=n(56542),Bi=n(22649),Si=n(19104),cn=n(7901),Li=n(93014),ra=n(67575),Pn=n(55911),In=n(9454),br=n(31302),Fi=n(78127);const Ss=["columnIndexSelect"],Ls=()=>["widgetContext","data"],zt=()=>[];function Fs(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-progress-bar",26)}function Pa(fe,l){1&fe&&a.\u0275\u0275element(0,"div",27)}function Us(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",28),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d.key),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",x.actionSourceName(d.value)," ")}}function Rs(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-icon",29),a.\u0275\u0275pipe(1,"translate"),a.\u0275\u0275text(2," warning "),a.\u0275\u0275elementEnd()),2&fe&&a.\u0275\u0275property("matTooltip",a.\u0275\u0275pipeBind1(1,1,"widget-config.action-source-required"))}function Ws(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",32),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=l.index,ae=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("value",x)("disabled",ae.usedCellClickColumns.includes(x)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",ae.getCellClickColumnInfo(x,d)," ")}}function Ks(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-icon",29),a.\u0275\u0275pipe(1,"translate"),a.\u0275\u0275text(2," warning "),a.\u0275\u0275elementEnd()),2&fe&&a.\u0275\u0275property("matTooltip",a.\u0275\u0275pipeBind1(1,1,"widget-config.column-index-required"))}function vr(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",11)(1,"div",12),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"mat-form-field",13)(5,"mat-select",30,0),a.\u0275\u0275template(7,Ws,2,3,"mat-option",31),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,Ks,3,3,"mat-icon",16),a.\u0275\u0275elementEnd()()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("",a.\u0275\u0275pipeBind1(3,4,"widget-config.column-index"),"*"),a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("placeholder",d.columnIndexPlaceholderText),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",d.configuredColumns),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",d.widgetActionFormGroup.get("columnIndex").hasError("required")&&d.widgetActionFormGroup.get("columnIndex").touched)}}function yr(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-icon",29),a.\u0275\u0275pipe(1,"translate"),a.\u0275\u0275text(2," warning "),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("matTooltip",a.\u0275\u0275pipeBind1(1,1,d.widgetActionFormGroup.get("name").hasError("required")?"widget-config.action-name-required":"widget-config.action-name-not-unique"))}}function Ui(fe,l){if(1&fe&&(a.\u0275\u0275element(0,"tb-js-func",38),a.\u0275\u0275pipe(1,"translate")),2&fe){const d=a.\u0275\u0275nextContext(2);a.\u0275\u0275propertyInterpolate("functionTitle",a.\u0275\u0275pipeBind1(1,7,"widget-config.show-action-function")),a.\u0275\u0275property("helpId",d.getWidgetActionFunctionHelpId())("functionArgs",a.\u0275\u0275pureFunction0(9,Ls))("globalVariables",d.functionScopeVariables)("validationArgs",a.\u0275\u0275pureFunction0(10,zt))("resultType","boolean")("editorCompleter",d.customActionEditorCompleter)}}function Ns(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",33)(1,"mat-expansion-panel",34)(2,"mat-expansion-panel-header",35)(3,"mat-panel-title")(4,"mat-slide-toggle",36),a.\u0275\u0275listener("click",function(ae){return a.\u0275\u0275restoreView(d),a.\u0275\u0275resetView(ae.stopPropagation())}),a.\u0275\u0275text(5),a.\u0275\u0275pipe(6,"translate"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(7,Ui,2,11,"ng-template",37),a.\u0275\u0275elementEnd()()}if(2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("expanded",d.widgetActionFormGroup.get("useShowWidgetActionFunction").value)("disabled",!d.widgetActionFormGroup.get("useShowWidgetActionFunction").value),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(6,3,"widget-config.show-hide-action-using-function")," ")}}class Xt extends ln.m{constructor(l,d,x,ae,Ie,Ve,Je,ht,xt){super(l,d,Je),this.store=l,this.router=d,this.utils=x,this.widgetService=ae,this.data=Ie,this.errorStateMatcher=Ve,this.dialogRef=Je,this.fb=ht,this.translate=xt,this.destroy$=new Vt.B,this.customActionEditorCompleter=Bi.m6,this.submitted=!1,this.configuredColumns=[],this.usedCellClickColumns=[],this.columnIndexPlaceholderText=this.translate.instant("widget-config.select-column-index"),this.isAdd=Ie.isAdd,this.isAdd?this.action={id:this.utils.guid(),name:"",icon:"more_horiz",...(0,_r.WO)(Ie.widgetType!==_r.t_.static)}:this.action=this.data.action,this.functionScopeVariables=this.widgetService.getWidgetScopeVariables(),"cellClick"===this.action.actionSourceId&&this.getCellClickColumnsInfo()}ngOnInit(){this.widgetActionFormGroup=this.fb.group({actionSourceId:[this.action.actionSourceId,$.Validators.required],columnIndex:[{value:this.checkColumnIndex(this.action.columnIndex),disabled:!0},$.Validators.required],name:[this.action.name,[this.validateActionName(),$.Validators.required]],icon:[this.action.icon,$.Validators.required],useShowWidgetActionFunction:[this.action.useShowWidgetActionFunction],showWidgetActionFunction:[this.action.showWidgetActionFunction||"return true;"],widgetAction:[(0,_r.Re)(wi(this.action)),$.Validators.required]}),this.updateShowWidgetActionForm(),this.widgetActionFormGroup.get("actionSourceId").valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(l=>{this.widgetActionFormGroup.get("name").updateValueAndValidity(),this.updateShowWidgetActionForm(),"cellClick"===l?(this.widgetActionFormGroup.get("columnIndex").enable(),this.getCellClickColumnsInfo()):this.widgetActionFormGroup.get("columnIndex").disable()}),this.widgetActionFormGroup.get("useShowWidgetActionFunction").valueChanges.pipe((0,ut.Q)(this.destroy$)).subscribe(()=>{this.updateShowWidgetActionForm()}),setTimeout(()=>{"cellClick"===this.action?.actionSourceId&&(this.widgetActionFormGroup.get("columnIndex").enable(),(0,de.f1)(this.action.columnIndex)&&null===this.widgetActionFormGroup.get("columnIndex").value&&(this.columnIndexPlaceholderText=`${this.action.columnIndex} (${this.translate.instant("widget-config.not-set")})`,this.columnIndexSelect.focus()))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),super.ngOnDestroy()}displayShowWidgetActionForm(){return!!this.data.actionsData.actionSources[this.widgetActionFormGroup.get("actionSourceId").value]?.hasShowCondition}getWidgetActionFunctionHelpId(){const l=this.widgetActionFormGroup.get("actionSourceId").value;return"headerButton"===l?"widget/action/show_widget_action_header_fn":"actionCellButton"===l?"widget/action/show_widget_action_cell_fn":void 0}updateShowWidgetActionForm(){const l=this.widgetActionFormGroup.get("actionSourceId").value,d=this.widgetActionFormGroup.get("useShowWidgetActionFunction").value;this.data.actionsData.actionSources[l]?.hasShowCondition&&d?this.widgetActionFormGroup.get("showWidgetActionFunction").setValidators([$.Validators.required]):this.widgetActionFormGroup.get("showWidgetActionFunction").clearValidators(),this.widgetActionFormGroup.get("showWidgetActionFunction").updateValueAndValidity()}checkColumnIndex(l){return(0,de.f1)(l)&&this.configuredColumns.length-1<l?null:l}getCellClickColumnsInfo(){this.configuredColumns.length||(this.configuredColumns=this.data.callbacks.fetchCellClickColumns(),this.data.actionsData.actionsMap.cellClick?.forEach(l=>{this.configuredColumns[l.columnIndex]&&l.columnIndex!==this.action.columnIndex&&this.usedCellClickColumns.push(l.columnIndex)}))}validateActionName(){return l=>{const d=l.value;return this.checkActionName(d,l.parent?.get("actionSourceId").value)?null:{actionNameNotUnique:!0}}}checkActionName(l,d){let x=!0;if(l&&d){const ae=this.data.actionsData.actionsMap[d];if(ae){const Ie=ae.filter(Ve=>Ve.name===l);Ie&&Ie.length&&Ie[0].id!==this.action.id&&(x=!1)}}return x}isErrorState(l,d){const x=this.errorStateMatcher.isErrorState(l,d),ae=!!(l&&l.invalid&&this.submitted);return x||ae}actionSourceName(l){return l?this.utils.customTranslation(l.name,l.name):""}getCellClickColumnInfo(l,d){return`${l} (${(0,de.Q8)(d.label)?d.label:d.name})`}cancel(){this.dialogRef.close(null)}save(){if(this.submitted=!0,this.widgetActionFormGroup.valid){const l={...this.widgetActionFormGroup.value,...this.widgetActionFormGroup.get("widgetAction").value};delete l.widgetAction,l.id=this.action.id,this.dialogRef.close(l)}}static{this.\u0275fac=function(d){return new(d||Xt)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(hr.T),a.\u0275\u0275directiveInject(Si.C),a.\u0275\u0275directiveInject(Lt.MAT_DIALOG_DATA),a.\u0275\u0275directiveInject(Be.ErrorStateMatcher,4),a.\u0275\u0275directiveInject(Lt.MatDialogRef),a.\u0275\u0275directiveInject($.FormBuilder),a.\u0275\u0275directiveInject(re.TranslateService))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Xt,selectors:[["tb-widget-action-dialog"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(Ss,5),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.columnIndexSelect=ae.first)}},features:[a.\u0275\u0275ProvidersFeature([{provide:Be.ErrorStateMatcher,useExisting:Xt}]),a.\u0275\u0275InheritDefinitionFeature],decls:52,vars:49,consts:[["columnIndexSelect",""],[2,"width","900px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-row"],[1,"fixed-title-width"],["appearance","outline","subscriptSizing","dynamic",1,"flex-1"],["required","","formControlName","actionSourceId",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip","class","tb-error",3,"matTooltip",4,"ngIf"],["class","tb-form-row",4,"ngIf"],["required","","matInput","","formControlName","name",3,"placeholder"],[1,"tb-form-row","space-between"],["asBoxInput","","formControlName","icon"],["class","tb-form-panel stroked tb-slide-toggle",4,"ngIf"],["formControlName","widgetAction",3,"callbacks","widgetType"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["matSuffix","","matTooltipPosition","above","matTooltipClass","tb-error-tooltip",1,"tb-error",3,"matTooltip"],["formControlName","columnIndex",3,"placeholder"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"tb-form-panel","stroked","tb-slide-toggle"],[1,"tb-settings",3,"expanded","disabled"],[1,"flex","flex-row","flex-wrap"],["formControlName","useShowWidgetActionFunction",1,"mat-slide","flex","items-stretch","justify-center",3,"click"],["matExpansionPanelContent",""],["formControlName","showWidgetActionFunction",3,"functionTitle","helpId","functionArgs","globalVariables","validationArgs","resultType","editorCompleter"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"form",1),a.\u0275\u0275listener("ngSubmit",function(){return x.save()}),a.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2"),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(5,"span",3),a.\u0275\u0275elementStart(6,"button",4),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275elementStart(7,"mat-icon",5),a.\u0275\u0275text(8,"close"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(9,Fs,1,0,"mat-progress-bar",6),a.\u0275\u0275pipe(10,"async"),a.\u0275\u0275template(11,Pa,1,0,"div",7),a.\u0275\u0275pipe(12,"async"),a.\u0275\u0275elementStart(13,"div",8)(14,"fieldset",9),a.\u0275\u0275pipe(15,"async"),a.\u0275\u0275elementStart(16,"div",10)(17,"div",11)(18,"div",12),a.\u0275\u0275text(19),a.\u0275\u0275pipe(20,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"mat-form-field",13)(22,"mat-select",14),a.\u0275\u0275pipe(23,"translate"),a.\u0275\u0275template(24,Us,2,2,"mat-option",15),a.\u0275\u0275pipe(25,"keyvalue"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(26,Rs,3,3,"mat-icon",16),a.\u0275\u0275elementEnd()(),a.\u0275\u0275template(27,vr,9,6,"div",17),a.\u0275\u0275elementStart(28,"div",11)(29,"div",12),a.\u0275\u0275text(30),a.\u0275\u0275pipe(31,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(32,"mat-form-field",13),a.\u0275\u0275element(33,"input",18),a.\u0275\u0275pipe(34,"translate"),a.\u0275\u0275template(35,yr,3,3,"mat-icon",16),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(36,"div",19)(37,"div"),a.\u0275\u0275text(38),a.\u0275\u0275pipe(39,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(40,"tb-material-icon-select",20),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(41,Ns,8,5,"div",21),a.\u0275\u0275element(42,"tb-widget-action",22),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(43,"div",23)(44,"button",24),a.\u0275\u0275pipe(45,"async"),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275text(46),a.\u0275\u0275pipe(47,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(48,"button",25),a.\u0275\u0275pipe(49,"async"),a.\u0275\u0275text(50),a.\u0275\u0275pipe(51,"translate"),a.\u0275\u0275elementEnd()()()),2&d&&(a.\u0275\u0275property("formGroup",x.widgetActionFormGroup),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(4,21,x.isAdd?"widget-config.add-action":"widget-config.edit-action")),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(10,23,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!1===a.\u0275\u0275pipeBind1(12,25,x.isLoading$)),a.\u0275\u0275advance(3),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(15,27,x.isLoading$)),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1("",a.\u0275\u0275pipeBind1(20,29,"widget-config.action-source"),"*"),a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(23,31,"widget-config.select-action-source")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(25,33,x.data.actionsData.actionSources)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.widgetActionFormGroup.get("actionSourceId").hasError("required")&&x.widgetActionFormGroup.get("actionSourceId").touched),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf","cellClick"===x.widgetActionFormGroup.get("actionSourceId").value),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1("",a.\u0275\u0275pipeBind1(31,35,"widget-config.action-name"),"*"),a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(34,37,"widget-config.set")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.widgetActionFormGroup.get("name").invalid&&(x.widgetActionFormGroup.get("name").touched||x.widgetActionFormGroup.get("name").hasError("actionNameNotUnique"))),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(39,39,"widget-config.icon")),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",x.displayShowWidgetActionForm()),a.\u0275\u0275advance(),a.\u0275\u0275property("callbacks",x.data.callbacks)("widgetType",x.data.widgetType),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(45,41,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(47,43,"action.cancel")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(49,45,x.isLoading$)||x.widgetActionFormGroup.invalid||!x.widgetActionFormGroup.dirty),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(51,47,x.isAdd?"action.add":"action.save")," "))},dependencies:[O.NgForOf,O.NgIf,Li.JsFuncComponent,ne.MatButton,ne.MatIconButton,ie.MatIcon,ra.MatProgressBar,Ae.MatInput,Pe.MatFormField,Pe.MatSuffix,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,Ne.MatSelect,Be.MatOption,je.MatTooltip,it.MatSlideToggle,In.MatExpansionPanel,In.MatExpansionPanelHeader,In.MatExpansionPanelTitle,In.MatExpansionPanelContent,$.\u0275NgNoValidate,$.DefaultValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormGroupDirective,$.FormControlName,br.MaterialIconSelectComponent,Fi.M,O.AsyncPipe,O.KeyValuePipe,re.TranslatePipe],encapsulation:2})}}var Ja=n(74972),oa=n(81391),yn=n(9159),Er=n(71997),vo=n(99691);const ks=["searchInput"],Vs=()=>[10,20,30];function Gs(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-header-cell",35)}function Qs(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-cell",36)(1,"div",37),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275listener("mousedown",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.dragDisabled=!1)})("mouseup",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.dragDisabled=!0)}),a.\u0275\u0275elementStart(3,"mat-icon"),a.\u0275\u0275text(4,"drag_handle"),a.\u0275\u0275elementEnd()()()}2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(2,1,"action.drag")))}function Hs(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-header-cell",38),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"widget-config.action-source")," "))}function js(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-cell",39),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",d.actionSourceName," ")}}function zs(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-header-cell",40),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"widget-config.action-name")," "))}function $s(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-cell",40),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",d.name," ")}}function Ys(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-header-cell",41),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"widget-config.action-icon")," "))}function Cr(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-cell",42)(1,"tb-icon"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()()),2&fe){const d=l.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(d.icon)}}function Xs(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-header-cell",43),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"widget-config.action-type")," "))}function Js(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-cell",43),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",d.typeName," ")}}function Zs(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-header-cell",44)}function qs(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-cell")(1,"div",45)(2,"button",7),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275pipe(4,"async"),a.\u0275\u0275listener("click",function(ae){const Ie=a.\u0275\u0275restoreView(d).$implicit,Ve=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ve.editAction(ae,Ie))}),a.\u0275\u0275elementStart(5,"mat-icon"),a.\u0275\u0275text(6,"edit"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(7,"button",7),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275pipe(9,"async"),a.\u0275\u0275listener("click",function(ae){const Ie=a.\u0275\u0275restoreView(d).$implicit,Ve=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ve.deleteAction(ae,Ie))}),a.\u0275\u0275elementStart(10,"mat-icon"),a.\u0275\u0275text(11,"delete"),a.\u0275\u0275elementEnd()()()()}if(2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(3,4,"widget-config.edit-action")),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(4,6,d.isLoading$)),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(8,8,"widget-config.delete-action")),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(9,10,d.isLoading$))}}function ed(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-header-row",46)}function td(fe,l){if(1&fe&&a.\u0275\u0275element(0,"mat-row",47),2&fe){const d=l.$implicit;a.\u0275\u0275property("cdkDragData",d)}}class Wn extends Ce.H{constructor(l,d,x,ae,Ie,Ve,Je,ht){super(l),this.store=l,this.translate=d,this.utils=x,this.dialog=ae,this.dialogs=Ie,this.cd=Ve,this.elementRef=Je,this.zone=ht,this.textSearchMode=!1,this.hidePageSize=!1,this.viewsInited=!1,this.dirtyValue=!1,this.dragDisabled=!0,this.destroyed=!1,this.propagateChange=Ft=>{};const xt={property:"actionSourceName",direction:Oi.O.ASC};this.pageLink=new Ii.Ek(10,0,null,xt),this.dataSource=new Bs(this.translate,this.utils),this.displayedColumns=["actionSourceId","actionSourceName","name","icon","typeName","actions"]}ngOnInit(){this.widgetResize$=new ResizeObserver(()=>{this.zone.run(()=>{const l=this.elementRef.nativeElement.offsetWidth<Ja.u3;l!==this.hidePageSize&&(this.hidePageSize=l,this.cd.markForCheck())})}),this.widgetResize$.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.destroyed=!0,this.widgetResize$&&this.widgetResize$.disconnect()}ngAfterViewInit(){(0,bo.R)(this.searchInputField.nativeElement,"keyup").pipe((0,Te.B)(150),(0,N.F)(),(0,oe.M)(()=>{this.paginator.pageIndex=0,this.updateData()})).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,Dn.h)(this.sort.sortChange,this.paginator.page).pipe((0,oe.M)(()=>this.updateData())).subscribe(),this.viewsInited=!0,this.dirtyValue&&(this.dirtyValue=!1,this.updateData(!0))}updateData(l=!1){this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=Oi.O[this.sort.direction.toUpperCase()],this.dataSource.loadActions(this.pageLink,l)}dropAction(l){this.dragDisabled=!0;const d=l.item.data;this.dataSource.pageData$.pipe((0,Is.$)()).subscribe(x=>{const ae=x.data;let Ie=ae.findIndex(Je=>Je.actionSourceId===d.actionSourceId);const Ve=this.getOrCreateTargetActions(d.actionSourceId);0===Ie&&(Ie-=Ve.findIndex(Je=>Je.id===ae[0].id)),(0,oa.moveItemInArray)(Ve,l.previousIndex-Ie,l.currentIndex-Ie),this.onActionsUpdated()})}addAction(l){this.openWidgetActionDialog(l)}editAction(l,d){this.openWidgetActionDialog(l,d)}openWidgetActionDialog(l,d=null){l&&l.stopPropagation();const x=null===d;let ae=null;x||(ae=d.actionSourceId);const Ie={};for(const Je of Object.keys(this.innerValue.actionSources)){const ht=this.innerValue.actionSources[Je];if(ht.multiple)Ie[Je]=ht;else if(x||d.actionSourceId!==Je){const xt=this.innerValue.actionsMap[Je];(!xt||!xt.length)&&(Ie[Je]=ht)}else Ie[Je]=ht}const Ve={actionsMap:this.innerValue.actionsMap,actionSources:Ie};this.dialog.open(Xt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:x,callbacks:this.callbacks,actionsData:Ve,action:(0,de.Go)(d),widgetType:this.widgetType}}).afterClosed().subscribe(Je=>{Je&&this.saveAction(Je,x,ae)})}saveAction(l,d,x){const ae=l.actionSourceId,Ie=wi(l);if(d)this.getOrCreateTargetActions(ae).push(Ie);else if(ae!==x){let Ve=this.getOrCreateTargetActions(x);const Je=Ve.findIndex(ht=>ht.id===Ie.id);Je>-1&&Ve.splice(Je,1),Ve=this.getOrCreateTargetActions(ae),Ve.push(Ie)}else{const Ve=this.getOrCreateTargetActions(ae),Je=Ve.findIndex(ht=>ht.id===Ie.id);Je>-1&&(Ve[Je]=Ie)}this.onActionsUpdated()}getOrCreateTargetActions(l){const d=this.innerValue.actionsMap;let x=d[l];return x||(x=[],d[l]=x),x}deleteAction(l,d){l&&l.stopPropagation();const x=this.translate.instant("widget-config.delete-action-title"),ae=this.translate.instant("widget-config.delete-action-text",{actionName:d.name});this.dialogs.confirm(x,ae,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(Ie=>{if(Ie){const Ve=this.getOrCreateTargetActions(d.actionSourceId),Je=Ve.findIndex(ht=>ht.id===d.id);Je>-1&&(Ve.splice(Je,1),this.onActionsUpdated())}})}enterFilterMode(){this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()}resetSortAndFilter(l=!0){this.pageLink.textSearch=null,this.paginator.pageIndex=0;const d=this.sort.sortables.get("actionSourceName");this.sort.active=d.id,this.sort.direction="asc",l&&this.updateData(!0)}registerOnChange(l){this.propagateChange=l}registerOnTouched(l){}setDisabledState(l){this.disabled=l}writeValue(l){this.innerValue={actionsMap:l||{},actionSources:this.actionSources||{}},setTimeout(()=>{this.destroyed||(this.dataSource.setActions(this.innerValue),this.viewsInited?this.resetSortAndFilter(!0):this.dirtyValue=!0)},0)}onActionsUpdated(){this.updateData(!0),this.propagateChange(this.innerValue.actionsMap)}static{this.\u0275fac=function(d){return new(d||Wn)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(re.TranslateService),a.\u0275\u0275directiveInject(hr.T),a.\u0275\u0275directiveInject(Lt.MatDialog),a.\u0275\u0275directiveInject(Ps.o),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.NgZone))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Wn,selectors:[["tb-manage-widget-actions"]],viewQuery:function(d,x){if(1&d&&(a.\u0275\u0275viewQuery(ks,5),a.\u0275\u0275viewQuery(ho.MatPaginator,5),a.\u0275\u0275viewQuery(Ya.MatSort,5)),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.searchInputField=ae.first),a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.paginator=ae.first),a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.sort=ae.first)}},inputs:{disabled:"disabled",widgetType:"widgetType",callbacks:"callbacks",actionSources:"actionSources"},features:[a.\u0275\u0275ProvidersFeature([{provide:$.NG_VALUE_ACCESSOR,useExisting:(0,a.forwardRef)(()=>Wn),multi:!0}]),a.\u0275\u0275InheritDefinitionFeature],decls:61,vars:47,consts:[["searchInput",""],[1,"tb-entity-table","tb-absolute-fill"],[1,"tb-entity-table-content","flex","flex-1","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],[1,"flex-1"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModelChange","ngModel","placeholder"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container","flex-1"],["mat-table","","matSort","","matSortDisableClear","","cdkDropList","","cdkDropListOrientation","vertical",1,"tb-drop-list",3,"cdkDropListDropped","dataSource","matSortActive","matSortDirection","cdkDropListData","cdkDropListDisabled"],["matColumnDef","actionSourceId"],["style","width: 36px",4,"matHeaderCellDef"],["class","tb-icon-cell",4,"matCellDef"],["matColumnDef","actionSourceName"],["mat-sort-header","","style","width: 20%",4,"matHeaderCellDef"],["style","width: 20%",4,"matCellDef"],["matColumnDef","name"],["style","width: 30%",4,"matHeaderCellDef"],["style","width: 30%",4,"matCellDef"],["matColumnDef","icon"],["style","width: 40px",4,"matHeaderCellDef"],["class","tb-icon-cell","style","width: 40px",4,"matCellDef"],["matColumnDef","typeName"],["style","width: 50%",4,"matHeaderCellDef"],["style","width: 50%",4,"matCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],[4,"matCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select tb-draggable","cdkDrag","",3,"cdkDragData",4,"matRowDef","matRowDefColumns"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize"],[2,"width","36px"],[1,"tb-icon-cell"],["cdkDragHandle","","matTooltipPosition","above",1,"tb-drag-handle",2,"min-width","36px",3,"mousedown","mouseup","matTooltip"],["mat-sort-header","",2,"width","20%"],[2,"width","20%"],[2,"width","30%"],[2,"width","40px"],[1,"tb-icon-cell",2,"width","40px"],[2,"width","50%"],[2,"min-width","80px","max-width","80px","width","80px"],[1,"flex","flex-1","flex-row","items-stretch","justify-end"],[1,"mat-row-select"],["cdkDrag","",1,"mat-row-select","tb-draggable",3,"cdkDragData"]],template:function(d,x){if(1&d){const ae=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"mat-toolbar",3)(3,"div",4)(4,"span",5),a.\u0275\u0275text(5,"widget-config.actions"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(6,"span",6),a.\u0275\u0275elementStart(7,"button",7),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275pipe(9,"async"),a.\u0275\u0275listener("click",function(Ve){return a.\u0275\u0275restoreView(ae),a.\u0275\u0275resetView(x.addAction(Ve))}),a.\u0275\u0275elementStart(10,"mat-icon"),a.\u0275\u0275text(11,"add"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(12,"button",7),a.\u0275\u0275pipe(13,"translate"),a.\u0275\u0275pipe(14,"async"),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(ae),a.\u0275\u0275resetView(x.enterFilterMode())}),a.\u0275\u0275elementStart(15,"mat-icon"),a.\u0275\u0275text(16,"search"),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(17,"mat-toolbar",3)(18,"div",4)(19,"button",8),a.\u0275\u0275pipe(20,"translate"),a.\u0275\u0275elementStart(21,"mat-icon"),a.\u0275\u0275text(22,"search"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(23,"mat-form-field",6)(24,"mat-label"),a.\u0275\u0275text(25,"\xa0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"input",9,0),a.\u0275\u0275pipe(28,"translate"),a.\u0275\u0275twoWayListener("ngModelChange",function(Ve){return a.\u0275\u0275restoreView(ae),a.\u0275\u0275twoWayBindingSet(x.pageLink.textSearch,Ve)||(x.pageLink.textSearch=Ve),a.\u0275\u0275resetView(Ve)}),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(29,"button",10),a.\u0275\u0275pipe(30,"translate"),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(ae),a.\u0275\u0275resetView(x.exitFilterMode())}),a.\u0275\u0275elementStart(31,"mat-icon"),a.\u0275\u0275text(32,"close"),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(33,"div",11)(34,"table",12),a.\u0275\u0275listener("cdkDropListDropped",function(Ve){return a.\u0275\u0275restoreView(ae),a.\u0275\u0275resetView(x.dropAction(Ve))}),a.\u0275\u0275elementContainerStart(35,13),a.\u0275\u0275template(36,Gs,1,0,"mat-header-cell",14)(37,Qs,5,3,"mat-cell",15),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(38,16),a.\u0275\u0275template(39,Hs,3,3,"mat-header-cell",17)(40,js,2,1,"mat-cell",18),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(41,19),a.\u0275\u0275template(42,zs,3,3,"mat-header-cell",20)(43,$s,2,1,"mat-cell",21),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(44,22),a.\u0275\u0275template(45,Ys,3,3,"mat-header-cell",23)(46,Cr,3,1,"mat-cell",24),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(47,25),a.\u0275\u0275template(48,Xs,3,3,"mat-header-cell",26)(49,Js,2,1,"mat-cell",27),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(50,28),a.\u0275\u0275template(51,Zs,1,0,"mat-header-cell",29)(52,qs,12,12,"mat-cell",30),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275template(53,ed,1,0,"mat-header-row",31)(54,td,1,1,"mat-row",32),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"span",33),a.\u0275\u0275pipe(56,"async"),a.\u0275\u0275text(57),a.\u0275\u0275elementEnd()(),a.\u0275\u0275element(58,"mat-divider")(59,"mat-paginator",34),a.\u0275\u0275pipe(60,"async"),a.\u0275\u0275elementEnd()()}2&d&&(a.\u0275\u0275advance(2),a.\u0275\u0275classProp("!hidden",x.textSearchMode),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(8,28,"widget-config.add-action")),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(9,30,x.isLoading$)),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(13,32,"action.search")),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(14,34,x.isLoading$)),a.\u0275\u0275advance(5),a.\u0275\u0275classProp("!hidden",!x.textSearchMode),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(20,36,"widget-config.search-actions")),a.\u0275\u0275advance(7),a.\u0275\u0275propertyInterpolate("placeholder",a.\u0275\u0275pipeBind1(28,38,"widget-config.search-actions")),a.\u0275\u0275twoWayProperty("ngModel",x.pageLink.textSearch),a.\u0275\u0275advance(3),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(30,40,"action.close")),a.\u0275\u0275advance(5),a.\u0275\u0275property("dataSource",x.dataSource)("matSortActive",x.pageLink.sortOrder.property)("matSortDirection",x.pageLink.sortDirection())("cdkDropListData",x.dataSource)("cdkDropListDisabled",x.dragDisabled),a.\u0275\u0275advance(19),a.\u0275\u0275property("matHeaderRowDef",x.displayedColumns)("matHeaderRowDefSticky",!0),a.\u0275\u0275advance(),a.\u0275\u0275property("matRowDefColumns",x.displayedColumns),a.\u0275\u0275advance(),a.\u0275\u0275classProp("!hidden",!1===a.\u0275\u0275pipeBind1(56,42,x.dataSource.isEmpty())),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate("widget-config.no-actions-text"),a.\u0275\u0275advance(2),a.\u0275\u0275property("length",a.\u0275\u0275pipeBind1(60,44,x.dataSource.total()))("pageIndex",x.pageLink.page)("pageSize",x.pageLink.pageSize)("pageSizeOptions",a.\u0275\u0275pureFunction0(46,Vs))("hidePageSize",x.hidePageSize))},dependencies:[ne.MatIconButton,ie.MatIcon,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pn.MatToolbar,je.MatTooltip,yn.MatTable,yn.MatHeaderCellDef,yn.MatHeaderRowDef,yn.MatColumnDef,yn.MatCellDef,yn.MatRowDef,yn.MatHeaderCell,yn.MatCell,yn.MatHeaderRow,yn.MatRow,ho.MatPaginator,Ya.MatSort,Ya.MatSortHeader,Er.MatDivider,oa.CdkDropList,oa.CdkDrag,oa.CdkDragHandle,$.DefaultValueAccessor,$.NgControlStatus,$.NgModel,re.TranslateDirective,vo.TbIconComponent,O.AsyncPipe,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     .mat-mdc-cell.tb-icon-cell .mat-icon{vertical-align:middle}[_nghost-%COMP%]     .tb-draggable.cdk-drag-placeholder{opacity:0}[_nghost-%COMP%]     .tb-draggable.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}']})}}var Ri=n(98186),Za=n(12508),yo=n(9611),Eo=n(74208),ia=n(60951),jn=n(98799),Pt=n(17358),Co=n(4452),qa=n(70581),xr=n(33349),zn=n(7148),pn=n(71635),Tr=n(90934),En=n(13792),Bt=n(93064);function Wi(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",15),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,2,x.complexOperationTranslations.get(x.complexOperationEnum[d]))," ")}}function jt(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"button",16),a.\u0275\u0275pipe(1,"async"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(1,2,d.isLoading$)||d.complexFilterFormGroup.invalid||!d.complexFilterFormGroup.dirty),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(3,4,d.isAdd?"action.add":"action.update")," ")}}class On extends ln.m{constructor(l,d,x,ae,Ie,Ve){super(l,d,Ie),this.store=l,this.router=d,this.data=x,this.errorStateMatcher=ae,this.dialogRef=Ie,this.fb=Ve,this.complexOperations=Object.keys(Bt.Ad),this.complexOperationEnum=Bt.Ad,this.complexOperationTranslations=Bt.Nj,this.submitted=!1,this.isAdd=this.data.isAdd,this.complexFilterFormGroup=this.fb.group({operation:[this.data.complexPredicate.operation,[$.Validators.required]],predicates:[this.data.complexPredicate.predicates,[$.Validators.required]]}),this.data.readonly&&this.complexFilterFormGroup.disable({emitEvent:!1})}ngOnInit(){}isErrorState(l,d){const x=this.errorStateMatcher.isErrorState(l,d),ae=!!(l&&l.invalid&&this.submitted);return x||ae}cancel(){this.dialogRef.close(null)}save(){if(this.submitted=!0,this.complexFilterFormGroup.valid){const l=this.complexFilterFormGroup.getRawValue();l.type=Bt.E1.COMPLEX,this.dialogRef.close(l)}}static{this.\u0275fac=function(d){return new(d||On)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(Lt.MAT_DIALOG_DATA),a.\u0275\u0275directiveInject(Be.ErrorStateMatcher,4),a.\u0275\u0275directiveInject(Lt.MatDialogRef),a.\u0275\u0275directiveInject($.UntypedFormBuilder))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:On,selectors:[["tb-complex-filter-predicate-dialog"]],features:[a.\u0275\u0275ProvidersFeature([{provide:Be.ErrorStateMatcher,useExisting:On}]),a.\u0275\u0275InheritDefinitionFeature],decls:23,vars:18,consts:[[2,"width","1200px",3,"ngSubmit","formGroup"],["color","primary"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"flex","flex-col",3,"disabled"],[1,"mat-block"],["required","","formControlName","operation"],[3,"value",4,"ngFor","ngForOf"],["formControlName","predicates",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","operation","key"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"form",0),a.\u0275\u0275listener("ngSubmit",function(){return x.save()}),a.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2",2),a.\u0275\u0275text(3,"filter.complex-filter"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"span",3),a.\u0275\u0275elementStart(5,"button",4),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275elementStart(6,"mat-icon",5),a.\u0275\u0275text(7,"close"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(8,"div",6)(9,"fieldset",7),a.\u0275\u0275pipe(10,"async"),a.\u0275\u0275elementStart(11,"mat-form-field",8)(12,"mat-label",2),a.\u0275\u0275text(13,"filter.operation.operation"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"mat-select",9),a.\u0275\u0275template(15,Wi,3,4,"mat-option",10),a.\u0275\u0275elementEnd()(),a.\u0275\u0275element(16,"tb-filter-predicate-list",11),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(17,"div",12)(18,"button",13),a.\u0275\u0275pipe(19,"async"),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275text(20),a.\u0275\u0275pipe(21,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(22,jt,4,6,"button",14),a.\u0275\u0275elementEnd()()),2&d&&(a.\u0275\u0275property("formGroup",x.complexFilterFormGroup),a.\u0275\u0275advance(9),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(10,12,x.isLoading$)),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngForOf",x.complexOperations),a.\u0275\u0275advance(),a.\u0275\u0275property("valueType",x.data.valueType)("displayUserParameters",x.data.displayUserParameters)("allowUserDynamicSource",x.data.allowUserDynamicSource)("onlyUserDynamicSource",x.data.onlyUserDynamicSource)("operation",x.complexFilterFormGroup.get("operation").value)("key",x.data.key),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(19,14,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(21,16,x.data.readonly?"action.close":"action.cancel")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!x.data.readonly))},dependencies:[O.NgForOf,O.NgIf,ne.MatButton,ne.MatIconButton,ie.MatIcon,Pe.MatFormField,Pe.MatLabel,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,Ne.MatSelect,Be.MatOption,$.\u0275NgNoValidate,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormGroupDirective,$.FormControlName,re.TranslateDirective,Tr.FilterPredicateListComponent,O.AsyncPipe,re.TranslatePipe],encapsulation:2})}}var wn=n(9224),la=n(6415),wt=n(67710),xo=n(51485),To=n(82765);function Ki(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-progress-bar",12)}function Ni(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"input",17),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(d.get("label").value),a.\u0275\u0275advance(),a.\u0275\u0275property("formControl",d.get("value"))}}function Mr(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"input",18),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(d.get("label").value),a.\u0275\u0275advance(),a.\u0275\u0275property("formControl",d.get("value"))}}function ki(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"label",19),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(2,"tb-datetime",20)),2&fe){const d=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(d.get("label").value),a.\u0275\u0275advance(),a.\u0275\u0275property("formControl",d.get("value"))("showLabel",!1)}}function Vi(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-checkbox",21),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("formControl",d.get("value")),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",d.get("label").value," ")}}function mn(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",13)(1,"div",14),a.\u0275\u0275template(2,Ni,4,2,"ng-template",15)(3,Mr,4,2,"ng-template",15)(4,ki,3,3,"ng-template",15)(5,Vi,2,2,"ng-template",15),a.\u0275\u0275elementEnd()()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitch",d.get("valueType").value),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.valueTypeEnum.STRING),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.valueTypeEnum.NUMERIC),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.valueTypeEnum.DATE_TIME),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitchCase",x.valueTypeEnum.BOOLEAN)}}class $t extends ln.m{constructor(l,d,x,ae,Ie,Ve,Je){super(l,d,Ie),this.store=l,this.router=d,this.data=x,this.errorStateMatcher=ae,this.dialogRef=Ie,this.fb=Ve,this.translate=Je,this.valueTypeEnum=Bt.w_,this.submitted=!1,this.filter=x.filter;const ht=(0,Bt.VJ)(this.filter,Je),xt=[];for(const Ft of ht)xt.push(this.createUserInputFormControl(Ft));this.userFilterFormGroup=this.fb.group({userInputs:this.fb.array(xt)})}createUserInputFormControl(l){const d=l.info.keyFilterPredicate.value,x=(0,de.f1)(d.userValue)?d.userValue:d.defaultValue,ae=this.fb.group({label:[l.label],valueType:[l.valueType],value:[x,l.valueType===Bt.w_.NUMERIC||l.valueType===Bt.w_.DATE_TIME?[$.Validators.required]:[]]});return ae.get("value").valueChanges.subscribe(Ie=>{l.info.keyFilterPredicate.value.userValue=Ie}),ae}userInputsFormArray(){return this.userFilterFormGroup.get("userInputs")}ngOnInit(){}isErrorState(l,d){const x=this.errorStateMatcher.isErrorState(l,d),ae=!!(l&&l.invalid&&this.submitted);return x||ae}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.dialogRef.close(this.filter)}static{this.\u0275fac=function(d){return new(d||$t)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(Lt.MAT_DIALOG_DATA),a.\u0275\u0275directiveInject(Be.ErrorStateMatcher,4),a.\u0275\u0275directiveInject(Lt.MatDialogRef),a.\u0275\u0275directiveInject($.UntypedFormBuilder),a.\u0275\u0275directiveInject(re.TranslateService))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:$t,selectors:[["tb-user-filter-dialog"]],features:[a.\u0275\u0275ProvidersFeature([{provide:Be.ErrorStateMatcher,useExisting:$t}]),a.\u0275\u0275InheritDefinitionFeature],decls:23,vars:21,consts:[[2,"width","400px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formArrayName","userInputs",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["formArrayName","userInputs"],[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","",3,"formControl"],["required","","type","number","matInput","",3,"formControl"],[1,"tb-title","no-padding","tb-required"],["dateText","filter.date","timeText","filter.time","required","",3,"formControl","showLabel"],["labelPosition","before",3,"formControl"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"form",0),a.\u0275\u0275listener("ngSubmit",function(){return x.save()}),a.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"span",2),a.\u0275\u0275elementStart(5,"button",3),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275elementStart(6,"mat-icon",4),a.\u0275\u0275text(7,"close"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(8,Ki,1,0,"mat-progress-bar",5),a.\u0275\u0275pipe(9,"async"),a.\u0275\u0275elementStart(10,"div",6)(11,"fieldset",7),a.\u0275\u0275pipe(12,"async"),a.\u0275\u0275template(13,mn,6,5,"div",8),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(14,"div",9)(15,"button",10),a.\u0275\u0275pipe(16,"async"),a.\u0275\u0275listener("click",function(){return x.cancel()}),a.\u0275\u0275text(17),a.\u0275\u0275pipe(18,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(19,"button",11),a.\u0275\u0275pipe(20,"async"),a.\u0275\u0275text(21),a.\u0275\u0275pipe(22,"translate"),a.\u0275\u0275elementEnd()()()),2&d&&(a.\u0275\u0275property("formGroup",x.userFilterFormGroup),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(x.filter.filter),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(9,9,x.isLoading$)),a.\u0275\u0275advance(3),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(12,11,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",x.userInputsFormArray().controls),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(16,13,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(18,15,"action.cancel")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(20,17,x.isLoading$)||x.userFilterFormGroup.invalid||!x.userFilterFormGroup.dirty),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(22,19,"action.update")," "))},dependencies:[O.NgForOf,O.NgIf,O.NgSwitch,O.NgSwitchCase,xo.DatetimeComponent,ne.MatButton,ne.MatIconButton,To.MatCheckbox,ie.MatIcon,ra.MatProgressBar,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,$.\u0275NgNoValidate,$.DefaultValueAccessor,$.NumberValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormControlDirective,$.FormGroupDirective,$.FormArrayName,O.AsyncPipe,re.TranslatePipe],encapsulation:2})}}function $n(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-divider")}function Qt(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div")(1,"div",2)(2,"mat-label",3),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"button",4),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275listener("click",function(){const ae=a.\u0275\u0275restoreView(d).$implicit,Ie=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(Ie.editFilter(ae.key,ae.value))}),a.\u0275\u0275elementStart(6,"mat-icon"),a.\u0275\u0275text(7,"edit"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(8,$n,1,0,"mat-divider",5),a.\u0275\u0275elementEnd()}if(2&fe){const d=l.$implicit,x=l.last;a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(d.value.filter),a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(5,3,"filter.edit")),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",!x)}}const Bn=new a.InjectionToken("FiltersEditPanelData");class sa{constructor(l,d){this.data=l,this.dialog=d,this.filtersInfo=this.data.filtersInfo}editFilter(l,d){const x={id:l,...(0,de.Go)(d)};this.dialog.open($t,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:x}}).afterClosed().subscribe(ae=>{ae&&(this.filtersInfo[ae.id]=ae,this.data.aliasController.updateUserFilter(ae))})}static{this.\u0275fac=function(d){return new(d||sa)(a.\u0275\u0275directiveInject(Bn),a.\u0275\u0275directiveInject(Lt.MatDialog))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:sa,selectors:[["tb-filters-edit-panel"]],decls:3,vars:3,consts:[[1,"mat-content","mat-padding","flex","flex-col"],[4,"ngFor","ngForOf"],[1,"flex","flex-row","items-center","justify-start"],[1,"flex-1"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],[4,"ngIf"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275template(1,Qt,9,5,"div",1),a.\u0275\u0275pipe(2,"keyvalue"),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(2,1,x.filtersInfo)))},dependencies:[O.NgForOf,O.NgIf,ne.MatIconButton,ie.MatIcon,Pe.MatLabel,je.MatTooltip,Er.MatDivider,O.KeyValuePipe,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px #0003,0 13px 19px 2px #00000024,0 5px 24px 4px #0000001f}@media (min-height: 350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}']})}}const Gi=["filtersEditPanelOrigin"];function Mo(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"section",2)(1,"button",3,0),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.openEditMode())}),a.\u0275\u0275elementStart(4,"mat-icon"),a.\u0275\u0275text(5,"filter_list"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(6,"span",4),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.openEditMode())}),a.\u0275\u0275text(8),a.\u0275\u0275pipe(9,"translate"),a.\u0275\u0275elementEnd()()}if(2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(3,5,"filter.filters")),a.\u0275\u0275property("matTooltipPosition",d.tooltipPosition),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("matTooltip",a.\u0275\u0275pipeBind1(7,7,"filter.filters")),a.\u0275\u0275property("matTooltipPosition",d.tooltipPosition),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(9,9,"filter.filters")," ")}}class Yn{set aliasController(l){this.aliasControllerValue=l,this.setupAliasController(this.aliasControllerValue)}get aliasController(){return this.aliasControllerValue}constructor(l,d,x,ae,Ie){this.translate=l,this.overlay=d,this.breakpointObserver=x,this.viewContainerRef=ae,this.dialog=Ie,this.filtersEditClass="tb-hide",this.tooltipPosition="above",this.filtersInfo={},this.hasEditableFilters=!1,this.rxSubscriptions=new Array}setupAliasController(l){this.rxSubscriptions.forEach(d=>{d.unsubscribe()}),this.rxSubscriptions.length=0,l&&(this.rxSubscriptions.push(l.filtersChanged.subscribe(()=>{setTimeout(()=>{this.updateFiltersInfo()},0)})),setTimeout(()=>{this.updateFiltersInfo()},0))}ngOnInit(){}ngOnDestroy(){this.rxSubscriptions.forEach(l=>{l.unsubscribe()}),this.rxSubscriptions.length=0}openEditMode(){if(this.disabled||!this.hasEditableFilters)return;const l=Object.entries(this.filtersInfo);if(1===l.length){const d={id:l[0][0],...(0,de.Go)(l[0][1])};this.dialog.open($t,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:d}}).afterClosed().subscribe(x=>{x&&(this.filtersInfo[x.id]=x,this.aliasController.updateUserFilter(x))})}else{const d=this.overlay.position(),x=new ot.OverlayConfig({panelClass:"tb-filters-edit-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0}),ae={originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"};x.positionStrategy=d.flexibleConnectedTo(this.filtersEditPanelOrigin.elementRef).withPositions([ae]);const Ie=this.overlay.create(x);Ie.backdropClick().subscribe(()=>{Ie.dispose()});const Ve=this._createFiltersEditPanelInjector(Ie,{aliasController:this.aliasController,filtersInfo:(0,de.Go)(this.filtersInfo)});Ie.attach(new gt.ComponentPortal(sa,this.viewContainerRef,Ve))}}_createFiltersEditPanelInjector(l,d){const x=[{provide:Bn,useValue:d},{provide:ot.OverlayRef,useValue:l}];return a.Injector.create({parent:this.viewContainerRef.injector,providers:x})}updateFiltersInfo(){const l=this.aliasController.getFilters();this.filtersInfo={},this.hasEditableFilters=!1,this.filtersEditClass="tb-hide";for(const d of Object.keys(l)){const x=this.aliasController.getFilterInfo(d);x&&(0,Bt.Vr)(x)&&(this.filtersInfo[d]=(0,de.Go)(x),this.hasEditableFilters=!0,this.filtersEditClass="")}}static{this.\u0275fac=function(d){return new(d||Yn)(a.\u0275\u0275directiveInject(re.TranslateService),a.\u0275\u0275directiveInject(ot.Overlay),a.\u0275\u0275directiveInject(Ze.BreakpointObserver),a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(Lt.MatDialog))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Yn,selectors:[["tb-filters-edit"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(Gi,5),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.filtersEditPanelOrigin=ae.first)}},hostVars:2,hostBindings:function(d,x){2&d&&a.\u0275\u0275classMap(x.filtersEditClass)},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:1,vars:1,consts:[["filtersEditPanelOrigin","cdkOverlayOrigin"],["class","tb-filters-edit flex flex-row items-center justify-start",4,"ngIf"],[1,"tb-filters-edit","flex","flex-row","items-center","justify-start"],["mat-icon-button","","cdkOverlayOrigin","",3,"click","matTooltip","matTooltipPosition"],[1,"lt-lg:!hidden",3,"click","matTooltip","matTooltipPosition"]],template:function(d,x){1&d&&a.\u0275\u0275template(0,Mo,10,11,"section",1),2&d&&a.\u0275\u0275property("ngIf",x.hasEditableFilters)},dependencies:[O.NgIf,ne.MatIconButton,ie.MatIcon,je.MatTooltip,ot.CdkOverlayOrigin,re.TranslatePipe],styles:['@charset "UTF-8";.tb-hide[_nghost-%COMP%]{display:none}[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}@media screen and (max-width: 959px){[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}']})}}var Qi=n(44032),Ia=n(15307),Sn=n(61219),Hi=n(34103),Do=n(26636),Oa=n(52359),Dr=n(23747),Po=n(93166),Io=n(28998),sn=n(98442),Pr=n(53294),Oo=n(14870),wo=n(10057),wa=n(19325),Bo=n(85009),Ir=n(25046),Or=n(23313),wr=n(57040),Br=n(61148),Sr=n(13768),Lr=n(56232),Fr=n(66317),Ur=n(34019),So=n(52874),Ba=n(62775),Lo=n(34467),Fo=n(85612),er=n(3826),Uo=n(47690),Rr=n(36148),Ro=n(90403),ji=n(57178),zi=n(70982),Wo=n(76010),Ko=n(28347),da=n(31369),No=n(33957),$i=n(13132),tr=n(58165),Yi=n(41483),Xi=n(18891),Ji=n(92587),Zi=n(9760),nr=n(30845),qi=n(97588),el=n(10512),tl=n(52280),nl=n(74026),ca=n(59780),al=n(18967),rl=n(61163);class Sa{static{this.\u0275fac=function(d){return new(d||Sa)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:Sa})}static{this.\u0275inj=a.\u0275\u0275defineInjector({imports:[O.CommonModule,P.G,ca.N]})}}(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(Sa,{declarations:[$i.f,tr.O,Yi.H,Xi._,Ji.A,Zi.Q,nr.X,al.f,qi.o,rl.X,el.t,tl.d,nl.h],imports:[O.CommonModule,P.G,ca.N],exports:[$i.f,tr.O,Yi.H,Xi._,Ji.A,Zi.Q,nr.X,al.f,qi.o,rl.X,el.t,tl.d,nl.h]});var pa=n(49764),ma=n(82153);const nd=["*"];function ad(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"mat-icon"),a.\u0275\u0275text(1,"close"),a.\u0275\u0275elementEnd())}class ua{constructor(){this.triggerClick=new a.EventEmitter}ngOnInit(){}onTriggerClick(){this.triggerClick.emit()}static{this.\u0275fac=function(d){return new(d||ua)}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ua,selectors:[["tb-dashboard-toolbar"]],inputs:{toolbarOpened:"toolbarOpened",forceFullscreen:"forceFullscreen"},outputs:{triggerClick:"triggerClick"},ngContentSelectors:nd,decls:10,vars:9,consts:[["color","primary","direction","left",3,"isOpen"],["mat-fab","","color","primary","matTooltipPosition","below",3,"click","matTooltip"],[4,"ngIf"],["color","primary"],[1,"mat-toolbar-tools"]],template:function(d,x){1&d&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"mat-fab-toolbar",0)(1,"mat-fab-trigger")(2,"button",1),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275listener("click",function(){return x.onTriggerClick()}),a.\u0275\u0275elementStart(4,"mat-icon"),a.\u0275\u0275text(5,"more_horiz"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,ad,2,0,"mat-icon",2),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(7,"mat-toolbar",3)(8,"mat-fab-actions",4),a.\u0275\u0275projection(9),a.\u0275\u0275elementEnd()()()),2&d&&(a.\u0275\u0275classProp("is-fullscreen",x.forceFullscreen)("mat-elevation-z1",x.forceFullscreen&&x.toolbarOpened),a.\u0275\u0275property("isOpen",x.toolbarOpened),a.\u0275\u0275advance(2),a.\u0275\u0275property("matTooltip",x.toolbarOpened?"":a.\u0275\u0275pipeBind1(3,7,"dashboard.open-toolbar")),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",x.toolbarOpened))},dependencies:[O.NgIf,ma.FabTriggerDirective,ma.FabActionsDirective,ma.FabToolbarComponent,ne.MatFabButton,ie.MatIcon,Pn.MatToolbar,je.MatTooltip,re.TranslatePipe],styles:['@charset "UTF-8";div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper{height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row{height:40px;min-height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row .mat-toolbar-tools{height:40px;min-height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions{height:40px;max-height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item{height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:40px}tb-dashboard-toolbar .mat-fab-toolbar mat-fab-trigger .mat-mdc-fab{width:36px;height:36px;margin:4px 0 0 4px}tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:64px}}tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row{height:80px;min-height:80px}tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row{height:64px;min-height:64px}tb-dashboard-toolbar .mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row .mat-toolbar-tools{height:64px;min-height:64px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper{height:50px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row{height:80px;min-height:80px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row{height:50px;min-height:50px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row .mat-toolbar-tools{height:50px;min-height:50px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions{margin-top:0;font-size:16px}@media screen and (max-width: 959px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions{height:80px;max-height:80px;padding:0 8px!important}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .close-action{margin-right:-18px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item{width:100%;height:80px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item{height:46px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:80px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:46px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{min-width:0;height:40px;flex:1 0 auto;display:flex;flex-direction:row-reverse;place-content:center space-between;align-items:center}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{flex:1 1 auto}@media screen and (max-width: 959px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{padding-left:12px}}@media screen and (max-width: 599px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{gap:3px;padding-left:0}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{padding-left:12px}}@media screen and (min-width: 600px) and (max-width: 959px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{gap:6px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{gap:3px}}@media screen and (min-width: 960px) and (max-width: 1279px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{gap:3px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{gap:1px}}@media screen and (min-width: 1280px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{gap:6px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{gap:3px}}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{place-content:center flex-start;height:46px}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel.tb-left-panel{place-content:center flex-end}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:40px}@media screen and (min-width: 960px){tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:46px}}tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel tb-states-component,tb-dashboard-toolbar .mat-fab-toolbar .mat-fab-toolbar-wrapper .mat-toolbar.mat-toolbar-single-row mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel tb-entity-state-controller{pointer-events:all}\n'],encapsulation:2})}}var La=n(10951),rd=n(27468);class ar{set isMobile(l){this.isMobileValue!==l&&(this.isMobileValue=l,this.inited&&this.onMobileChanged())}get isMobile(){return this.isMobileValue}set state(l){this.stateValue!==l&&(this.stateValue=l,this.inited&&this.onStateIdChanged())}get state(){return this.stateValue}set dashboardId(l){this.dashboardIdValue!==l&&(this.dashboardIdValue=l)}get dashboardId(){return this.dashboardIdValue}set states(l){this.statesValue!==l&&(this.statesValue=l,this.inited&&this.onStatesChanged())}get states(){return this.statesValue}constructor(l,d,x,ae){this.router=l,this.route=d,this.ngZone=x,this.statesControllerService=ae,this.stateChangedSubject=new Vt.B,this.stateIdSubject=new Vt.B,this.stateObject=[],this.rxSubscriptions=new Array,this.inited=!1}ngOnInit(){this.syncStateWithQueryParam&&this.rxSubscriptions.push(this.route.queryParamMap.subscribe(l=>{const d=this.route.snapshot.params.dashboardId||"";if(this.dashboardId===d){const x=this.decodeStateParam(l.get("state"));this.currentState!==x&&(this.currentState=x,this.stateChangedSubject.next(this.currentState),this.inited&&this.onStateChanged())}})),this.init(),this.inited=!0}ngOnDestroy(){this.rxSubscriptions.forEach(l=>{l.unsubscribe()}),this.rxSubscriptions.length=0,this.stateIdSubject.complete(),this.stateChangedSubject.complete()}updateStateParam(l,d=!1){if(this.currentState=l,this.syncStateWithQueryParam){const ae={state:this.currentState?encodeURIComponent(this.currentState):this.currentState};this.ngZone.run(()=>{this.router.navigate([],{relativeTo:this.route,queryParams:ae,queryParamsHandling:"merge",replaceUrl:d})})}this.stateChangedSubject.next(this.currentState)}stateChanged(){return this.stateChangedSubject.asObservable()}stateId(){return this.stateIdSubject.asObservable()}openRightLayout(){this.dashboardCtrl.openRightLayout()}preserveState(){this.statesControllerService.preserveStateControllerState(this.stateControllerInstanceId,this.stateObject)}cleanupPreservedStates(){this.statesControllerService.cleanupPreservedStates()}reInit(){this.preservedState=null,this.currentState=this.decodeStateParam(this.route.snapshot.queryParamMap.get("state")),this.stateChangedSubject.next(this.currentState),this.init()}decodeStateParam(l){return null!==l?decodeURIComponent(l):null}static{this.\u0275fac=function(d){return new(d||ar)(a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(cn.ActivatedRoute),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(La.C))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:ar})}}var ko=n(56508),ol=n(95462);function od(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"span",5),a.\u0275\u0275listener("click",function(){const ae=a.\u0275\u0275restoreView(d).index,Ie=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(Ie.navigatePrevState(ae))}),a.\u0275\u0275text(1),a.\u0275\u0275elementStart(2,"span",6),a.\u0275\u0275text(3," > "),a.\u0275\u0275elementEnd()()}if(2&fe){const d=l.index,x=l.last,ae=a.\u0275\u0275nextContext(2);a.\u0275\u0275styleProp("font-weight",x?"bold":"normal")("cursor",x?"default":"pointer"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",ae.getStateName(d)," "),a.\u0275\u0275advance(),a.\u0275\u0275classProp("!hidden",x)}}function id(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",3),a.\u0275\u0275template(1,od,4,7,"span",4),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",d.stateObject)}}function Wr(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",9),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.index,x=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("value",d),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",x.getStateName(d)," ")}}function ld(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"mat-select",7),a.\u0275\u0275twoWayListener("ngModelChange",function(ae){a.\u0275\u0275restoreView(d);const Ie=a.\u0275\u0275nextContext();return a.\u0275\u0275twoWayBindingSet(Ie.selectedStateIndex,ae)||(Ie.selectedStateIndex=ae),a.\u0275\u0275resetView(ae)}),a.\u0275\u0275listener("ngModelChange",function(){a.\u0275\u0275restoreView(d);const ae=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(ae.selectedStateIndexChanged())}),a.\u0275\u0275template(1,Wr,2,2,"mat-option",8),a.\u0275\u0275elementEnd()}if(2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275twoWayProperty("ngModel",d.selectedStateIndex),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",d.stateObject)}}class rr extends ar{constructor(l,d,x,ae,Ie,Ve,Je,ht){super(l,d,x,ae),this.router=l,this.route=d,this.ngZone=x,this.statesControllerService=ae,this.utils=Ie,this.entityService=Ve,this.mobileService=Je,this.dashboardUtils=ht,this.selectedStateIndex=-1}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}init(){if(this.preservedState)this.stateObject=this.preservedState,this.selectedStateIndex=this.stateObject.length-1,setTimeout(()=>{this.gotoState(this.stateObject[this.stateObject.length-1].id,!0)},1);else{const l=this.currentState;this.stateObject=this.parseState(l),this.selectedStateIndex=this.stateObject.length-1,setTimeout(()=>{this.gotoState(this.stateObject[this.stateObject.length-1].id,!1)},1)}}onMobileChanged(){}onStateIdChanged(){}onStatesChanged(){}onStateChanged(){this.stateObject=this.parseState(this.currentState),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!1)}stateControllerId(){return"entity"}getStateParams(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}}openState(l,d,x){this.states&&this.states[l]&&this.resolveEntity(d).subscribe(()=>{const ae={id:l,params:d};this.stateObject.push(ae),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!0,x)})}pushAndOpenState(l,d){if(this.states){for(const x of l)if(!this.states[x.id])return;(0,rd.p)(l.map(x=>this.resolveEntity(x.params))).subscribe(()=>{this.stateObject.push(...l),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!0,d)})}}updateState(l,d,x){l||(l=this.getStateId()),this.states&&this.states[l]&&this.resolveEntity(d).subscribe(()=>{this.stateObject[this.stateObject.length-1]={id:l,params:d},this.gotoState(this.stateObject[this.stateObject.length-1].id,!0,x)})}getEntityId(l){const d=this.getStateParams();return l&&l.length?d[l]?d[l].entityId:null:d.entityId}getStateId(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""}getStateIdAtIndex(l){return this.stateObject&&this.stateObject[l]?this.stateObject[l].id:""}getStateIndex(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1}getStateParamsByStateId(l){const d=this.getStateObjById(l);return d?d.params:null}navigatePrevState(l,d){l<this.stateObject.length-1&&(this.stateObject.splice(l+1,this.stateObject.length-l-1),this.selectedStateIndex=this.stateObject.length-1,d&&(this.stateObject[this.selectedStateIndex].params=d),this.gotoState(this.stateObject[this.selectedStateIndex].id,!0))}resetState(){const l=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:l,params:{}}],this.gotoState(l,!0)}getStateName(l){let d="";const x=this.stateObject[l];if(x){const ae=this.states[x.id];if(ae){let Ie=ae.name;Ie=this.utils.customTranslation(Ie,Ie);const Ve=this.stateObject[l].params,Je=Ve&&Ve.entityName?Ve.entityName:"",ht=Ve&&Ve.entityLabel?Ve.entityLabel:"";d=(0,de.ew)(Ie,"entityName",Je),d=(0,de.ew)(d,"entityLabel",ht);for(const xt of Object.keys(Ve))Ve[xt]&&Ve[xt].entityName&&(d=(0,de.ew)(d,xt+":entityName",Ve[xt].entityName)),Ve[xt]&&Ve[xt].entityLabel&&(d=(0,de.ew)(d,xt+":entityLabel",Ve[xt].entityLabel))}}return d}getCurrentStateName(){return this.getStateName(this.stateObject.length-1)}selectedStateIndexChanged(){this.navigatePrevState(this.selectedStateIndex)}parseState(l){let d;if(l)try{d=(0,de.i2)(l)}catch{d=[{id:null,params:{}}]}d||(d=[]),d.length||(d[0]={id:null,params:{}});const x=this.dashboardUtils.getRootStateId(this.states);d[0].id||(d[0].id=x),this.states[d[0].id]||(d[0].id=x);let ae=d.length;for(;ae--;)(!d[ae].id||!this.states[d[ae].id])&&d.splice(ae,1);return d}gotoState(l,d,x){const ae=this.dashboardCtrl.dashboardCtx.state!==l;this.dashboardCtrl.openDashboardState(l,x),ae&&this.stateIdSubject.next(l),this.syncStateWithQueryParam&&this.mobileService.handleDashboardStateName(this.getStateName(this.stateObject.length-1)),d&&this.updateLocation(ae)}updateLocation(l){if(this.stateObject[this.stateObject.length-1].id){let d;d=this.isDefaultState()?null:(0,de.AT)(this.stateObject),this.updateStateParam(d,!l)}}isDefaultState(){if(1===this.stateObject.length){const l=this.stateObject[0],d=this.dashboardUtils.getRootStateId(this.states);if(l.id===d&&(!l.params||(0,de.Im)(l.params)))return!0}return!1}resolveEntity(l){return l&&l.targetEntityParamName&&(l=l[l.targetEntityParamName]),l&&l.entityId&&l.entityId.id&&l.entityId.entityType?this.isEntityResolved(l)?(0,be.of)(null):this.entityService.getEntity(l.entityId.entityType,l.entityId.id,{ignoreLoading:!0,ignoreErrors:!0}).pipe((0,oe.M)(d=>{l.entityName=d.name,l.entityLabel=d.label}),(0,R.T)(()=>null)):(0,be.of)(null)}isEntityResolved(l){return!(!l.entityName||!l.entityName.length)}getStateObjById(l){return this.stateObject.find(d=>d.id===l)}static{this.\u0275fac=function(d){return new(d||rr)(a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(cn.ActivatedRoute),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(La.C),a.\u0275\u0275directiveInject(hr.T),a.\u0275\u0275directiveInject(J.T),a.\u0275\u0275directiveInject(ol.O),a.\u0275\u0275directiveInject(ko.N))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:rr,selectors:[["tb-entity-state-controller"]],features:[a.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"entity-state-controller"],["class","flex flex-row items-center justify-start",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex","flex-row","items-center","justify-start"],["class","state-entry",3,"font-weight","cursor","click",4,"ngFor","ngForOf"],[1,"state-entry",3,"click"],[1,"state-divider"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275template(1,id,2,1,"div",1)(2,ld,2,2,"mat-select",2),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!x.isMobile||1===x.stateObject.length),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",x.isMobile&&x.stateObject.length>1))},dependencies:[O.NgForOf,O.NgIf,Ne.MatSelect,Be.MatOption,$.NgControlStatus,$.NgModel],styles:['@charset "UTF-8";[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-divider[_ngcontent-%COMP%]{padding:0 15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-entry[_ngcontent-%COMP%]{pointer-events:all;overflow:hidden;font-size:18px;text-overflow:ellipsis;white-space:nowrap;outline:none}[_nghost-%COMP%]     .mat-mdc-select .mat-mdc-select-value{max-width:200px}[_nghost-%COMP%]     .mat-mdc-select .mat-mdc-select-value .mat-mdc-select-value-text{font-size:18px;font-weight:700}[_nghost-%COMP%]     .mat-mdc-select .mat-mdc-select-arrow{width:24px}']})}}class Aa{constructor(l,d){this.viewContainerRef=l,this.statesControllerService=d,this.stateChangedSubject=new Vt.B}ngOnInit(){this.stateIdSubject=new dn.t(this.dashboardCtrl.dashboardCtx.state),this.init()}ngOnDestroy(){this.destroy(),this.stateChangedSubject.complete(),this.stateIdSubject.complete()}ngOnChanges(l){let d=!1,x=!1;for(const ae of Object.keys(l)){const Ie=l[ae];!Ie.firstChange&&Ie.currentValue!==Ie.previousValue&&("statesControllerId"===ae?this.reInit():"states"===ae?this.stateControllerComponent.states=this.states:"dashboardId"===ae?(this.stateControllerComponent.dashboardId=this.dashboardId,d=!0):"isMobile"===ae?this.stateControllerComponent.isMobile=this.isMobile:"state"===ae?this.stateControllerComponent.state=this.state:"currentState"===ae?(this.stateControllerComponent.currentState=this.currentState,x=!0):"syncStateWithQueryParam"===ae&&(this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam))}x?this.stateControllerComponent.init():d&&this.stateControllerComponent.reInit()}reInit(){this.destroy(),this.init()}init(){this.viewContainerRef.clear();let l=this.statesControllerService.getStateController(this.statesControllerId);l||(l=this.statesControllerService.getStateController("default"));const d=this.dashboardCtrl.dashboardCtx.instanceId+"_"+this.statesControllerId,x=this.statesControllerService.withdrawStateControllerState(d);this.stateControllerComponentRef=this.viewContainerRef.createComponent(l.component),this.stateControllerComponent=this.stateControllerComponentRef.instance,this.dashboardCtrl.dashboardCtx.stateController=this.stateControllerComponent,this.dashboardCtrl.dashboardCtx.stateChanged=this.stateChangedSubject.asObservable(),this.dashboardCtrl.dashboardCtx.stateId=this.stateIdSubject.asObservable(),this.stateControllerComponent.stateChanged().subscribe(ae=>{this.stateChangedSubject.next(ae)}),this.stateControllerComponent.stateId().subscribe(ae=>{this.stateIdSubject.next(ae)}),this.stateControllerComponent.preservedState=x,this.stateControllerComponent.dashboardCtrl=this.dashboardCtrl,this.stateControllerComponent.stateControllerInstanceId=d,this.stateControllerComponent.state=this.state,this.stateControllerComponent.currentState=this.currentState,this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam,this.stateControllerComponent.isMobile=this.isMobile,this.stateControllerComponent.states=this.states,this.stateControllerComponent.dashboardId=this.dashboardId}destroy(){this.stateControllerComponentRef&&this.stateControllerComponentRef.destroy()}static{this.\u0275fac=function(d){return new(d||Aa)(a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(La.C))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Aa,selectors:[["tb-states-component"]],inputs:{statesControllerId:"statesControllerId",dashboardCtrl:"dashboardCtrl",dashboardId:"dashboardId",states:"states",state:"state",currentState:"currentState",syncStateWithQueryParam:"syncStateWithQueryParam",isMobile:"isMobile"},features:[a.\u0275\u0275NgOnChangesFeature]})}}var il=n(52627);function sd(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",2),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d.key),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",x.getStateName(d.key,d.value)," ")}}class ga extends ar{constructor(l,d,x,ae,Ie,Ve,Je,ht){super(l,d,x,ae),this.router=l,this.route=d,this.ngZone=x,this.statesControllerService=ae,this.utils=Ie,this.entityService=Ve,this.mobileService=Je,this.dashboardUtils=ht}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}init(){if(this.preservedState)this.stateObject=this.preservedState,setTimeout(()=>{this.gotoState(this.stateObject[0].id,!0)},1);else{const l=this.currentState;this.stateObject=this.parseState(l),setTimeout(()=>{this.gotoState(this.stateObject[0].id,!1)},1)}}onMobileChanged(){}onStateIdChanged(){}onStatesChanged(){}onStateChanged(){this.stateObject=this.parseState(this.currentState),this.gotoState(this.stateObject[0].id,!1)}stateControllerId(){return"default"}getStateParams(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}}openState(l,d,x){if(this.states&&this.states[l]){d||(d={});const ae={id:l,params:d};this.stateObject[0]=ae,this.gotoState(this.stateObject[0].id,!0,x)}}pushAndOpenState(l,d){const x=l[l.length-1];this.openState(x.id,x.params,d)}updateState(l,d,x){if(l||(l=this.getStateId()),this.states&&this.states[l]){d||(d={});const ae={id:l,params:d};this.stateObject[0]=ae,this.gotoState(this.stateObject[0].id,!0,x)}}getEntityId(l){return null}getStateId(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""}getStateIdAtIndex(l){return this.stateObject&&this.stateObject[l]?this.stateObject[l].id:""}getStateIndex(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1}getStateParamsByStateId(l){const d=this.getStateObjById(l);return d?d.params:null}navigatePrevState(l,d){const x=this.stateObject.length-1;if(l<x){this.stateObject.splice(l+1,x-l);const ae=this.stateObject.length-1;d&&(this.stateObject[ae].params=d),this.gotoState(this.stateObject[ae].id,!0)}}resetState(){const l=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:l,params:{}}],this.gotoState(l,!0)}getStateName(l,d){return this.utils.customTranslation(d.name,l)}getCurrentStateName(){return this.getStateName(this.stateObject[0].id,this.statesValue[this.stateObject[0].id])}displayStateSelection(){return this.states&&Object.keys(this.states).length>1}selectedStateIdChanged(){this.gotoState(this.stateObject[0].id,!0)}parseState(l){let d;if(l)try{d=(0,de.i2)(l)}catch{d=[{id:null,params:{}}]}if(d||(d=[]),d.length){if(d.length>1){const Ie=[];Ie.push(d[d.length-1]),d=Ie}}else d[0]={id:null,params:{}};const x=this.dashboardUtils.getRootStateId(this.states);d[0].id||(d[0].id=x),this.states[d[0].id]||(d[0].id=x);let ae=d.length;for(;ae--;)(!d[ae].id||!this.states[d[ae].id])&&d.splice(ae,1);return d}gotoState(l,d,x){this.dashboardCtrl.dashboardCtx.state!==l&&(this.dashboardCtrl.openDashboardState(l,x),this.stateIdSubject.next(l),this.syncStateWithQueryParam&&l&&this.statesValue[l]&&this.mobileService.handleDashboardStateName(this.getStateName(l,this.statesValue[l])),d&&this.updateLocation())}updateLocation(){if(this.stateObject[0].id){const l=(0,de.AT)(this.stateObject);this.updateStateParam(l)}}getStateObjById(l){return this.stateObject.find(d=>d.id===l)}static{this.\u0275fac=function(d){return new(d||ga)(a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(cn.ActivatedRoute),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(La.C),a.\u0275\u0275directiveInject(hr.T),a.\u0275\u0275directiveInject(J.T),a.\u0275\u0275directiveInject(ol.O),a.\u0275\u0275directiveInject(ko.N))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ga,selectors:[["tb-default-state-controller"]],features:[a.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[1,"default-state-controller",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"mat-select",0),a.\u0275\u0275twoWayListener("ngModelChange",function(Ie){return a.\u0275\u0275twoWayBindingSet(x.stateObject[0].id,Ie)||(x.stateObject[0].id=Ie),Ie}),a.\u0275\u0275listener("ngModelChange",function(){return x.selectedStateIdChanged()}),a.\u0275\u0275template(1,sd,2,2,"mat-option",1),a.\u0275\u0275pipe(2,"keyvalue"),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275classProp("!hidden",!x.displayStateSelection()),a.\u0275\u0275twoWayProperty("ngModel",x.stateObject[0].id),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(2,4,x.states)))},dependencies:[O.NgForOf,Ne.MatSelect,Be.MatOption,$.NgControlStatus,$.NgModel,O.KeyValuePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:all;width:min-content}[_nghost-%COMP%]     .mat-mdc-select.default-state-controller .mat-mdc-select-value{max-width:200px}[_nghost-%COMP%]     .mat-mdc-select.default-state-controller .mat-mdc-select-arrow{width:24px}']})}}class Kn{constructor(l){this.statesControllerService=l,this.statesControllerService.registerStatesController("default",ga),this.statesControllerService.registerStatesController("entity",rr)}static{this.\u0275fac=function(d){return new(d||Kn)(a.\u0275\u0275inject(La.C))}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:Kn})}static{this.\u0275inj=a.\u0275\u0275defineInjector({providers:[La.C],imports:[O.CommonModule,P.G,il.L]})}}(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(Kn,{declarations:[Aa,ga,rr],imports:[O.CommonModule,P.G,il.L],exports:[Aa]});n(11035);var or=n(60890),dd=n(77848),ll=n(9160),cd=n(90039),Vo=n(68762),fa=n(15753),sl=n(345),dl=n(61499),Go=n(9183);const pd=["dashboard"];function md(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"div",5),a.\u0275\u0275element(1,"mat-spinner",6),a.\u0275\u0275elementEnd())}function ud(fe,l){1&fe&&(a.\u0275\u0275elementStart(0,"span",10),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&fe&&(a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(2,1,"dashboard.no-widgets")," "))}function Ad(fe,l){if(1&fe){const d=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",11),a.\u0275\u0275listener("click",function(ae){a.\u0275\u0275restoreView(d);const Ie=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(Ie.addWidget(ae))}),a.\u0275\u0275elementStart(1,"mat-icon",12),a.\u0275\u0275text(2,"add"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"span"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275elementEnd()()}2&fe&&(a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(5,1,"dashboard.add-widget")))}function gd(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"section",7),a.\u0275\u0275template(1,ud,3,3,"span",8)(2,Ad,6,3,"button",9),a.\u0275\u0275elementEnd()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!d.isEdit),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",d.isEdit&&!d.widgetEditMode)}}class _a extends Ce.H{set layoutCtx(l){this.layoutCtxValue=l,this.layoutCtxValue&&(this.layoutCtxValue.ctrl=this,null==this.dashboardStyle&&this.loadDashboardStyle())}get layoutCtx(){return this.layoutCtxValue}get isScada(){return this.layoutCtx.gridSettings.layoutType===fa.p5.scada}get outerMargin(){return!this.isScada&&this.layoutCtx.gridSettings.outerMargin}get margin(){return this.isScada?0:this.layoutCtx.gridSettings.margin}get autoFillHeight(){return!this.isEdit&&!this.isScada&&this.layoutCtx.gridSettings.autoFillHeight}get mobileAutoFillHeight(){return!this.isEdit&&!this.isScada&&("default"!==this.layoutCtx.breakpoint&&this.layoutCtx.gridSettings.viewFormat===fa.LM.list?this.layoutCtx.gridSettings.autoFillHeight:this.layoutCtx.gridSettings.mobileAutoFillHeight)}get isMobileValue(){return this.isMobile||"default"!==this.layoutCtx.breakpoint&&this.layoutCtx.gridSettings.viewFormat===fa.LM.list}get isMobileDisabled(){return this.widgetEditMode||this.isScada||"default"!==this.layoutCtx.breakpoint&&!this.isMobileValue}get mobielRowHeigth(){return"default"!==this.layoutCtx.breakpoint&&this.layoutCtx.gridSettings.viewFormat===fa.LM.list?this.layoutCtx.gridSettings.rowHeight:this.layoutCtx.gridSettings.mobileRowHeight}get columns(){return this.layoutCtx.gridSettings.minColumns||this.layoutCtx.gridSettings.columns||24}get displayGrid(){return this.layoutCtx.displayGrid||"onDrag&Resize"}constructor(l,d,x,ae,Ie){super(l),this.store=l,this.translate=d,this.itembuffer=x,this.imagePipe=ae,this.sanitizer=Ie,this.dashboardStyle=null,this.hotKeys=[],this.parentDashboard=null,this.popoverComponent=null,this.rxSubscriptions=new Array,this.initHotKeys()}ngOnInit(){const l=this.parentDashboard?this.parentDashboard.dashboardTimewindowChanged:this.dashboard.dashboardTimewindowChanged;this.rxSubscriptions.push(l.subscribe(d=>{this.dashboardCtx.dashboardTimewindow=d,this.dashboardCtx.runChangeDetection()}))}ngOnDestroy(){this.rxSubscriptions.forEach(l=>{l.unsubscribe()}),this.rxSubscriptions.length=0}initHotKeys(){this.hotKeys.push(new or.t5("ctrl+c",l=>{if(this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode){const d=this.dashboard.getSelectedWidget();d&&(l.preventDefault(),this.copyWidget(l,d))}return!1},null,this.translate.instant("action.copy"))),this.hotKeys.push(new or.t5("ctrl+r",l=>{if(this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode){const d=this.dashboard.getSelectedWidget();d&&(l.preventDefault(),this.copyWidgetReference(l,d))}return!1},null,this.translate.instant("action.copy-reference"))),this.hotKeys.push(new or.t5("ctrl+v",l=>(this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode&&this.itembuffer.hasWidget()&&(l.preventDefault(),this.pasteWidget(l)),!1),null,this.translate.instant("action.paste"))),this.hotKeys.push(new or.t5("ctrl+i",l=>(this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode&&this.itembuffer.canPasteWidgetReference(this.dashboardCtx.getDashboard(),this.dashboardCtx.state,this.layoutCtx.id,this.layoutCtx.breakpoint)&&(l.preventDefault(),this.pasteWidgetReference(l)),!1),null,this.translate.instant("action.paste-reference"))),this.hotKeys.push(new or.t5("ctrl+x",l=>{if(this.isEdit&&!this.isEditingWidget&&!this.widgetEditMode){const d=this.dashboard.getSelectedWidget();d&&(l.preventDefault(),this.layoutCtx.dashboardCtrl.removeWidget(l,this.layoutCtx,d))}return!1},null,this.translate.instant("action.delete")))}loadDashboardStyle(){this.dashboardStyle={"background-color":this.layoutCtx.gridSettings.backgroundColor,"background-repeat":"no-repeat","background-attachment":"scroll","background-size":this.layoutCtx.gridSettings.backgroundSizeMode||"100%","background-position":"0% 0%"},this.backgroundImage$=this.layoutCtx.gridSettings.backgroundImageUrl?this.imagePipe.transform(this.layoutCtx.gridSettings.backgroundImageUrl,{asString:!0,ignoreLoadingImage:!0}).pipe((0,R.T)(l=>this.sanitizer.bypassSecurityTrustStyle("url("+l+")"))):(0,be.of)("none")}reload(){this.loadDashboardStyle(),this.dashboard.pauseChangeNotifications(),setTimeout(()=>{this.dashboard.resumeChangeNotifications(),this.dashboard.notifyLayoutUpdated()},0)}resetHighlight(){this.dashboard.resetHighlight()}highlightWidget(l,d){this.dashboard.highlightWidget(l,d)}selectWidget(l,d){this.dashboard.selectWidget(l,d)}addWidget(l){this.layoutCtx.dashboardCtrl.addWidget(l,this.layoutCtx)}onEditWidget(l,d){this.layoutCtx.dashboardCtrl.editWidget(l,this.layoutCtx,d)}replaceReferenceWithWidgetCopy(l,d){this.layoutCtx.dashboardCtrl.replaceReferenceWithWidgetCopy(l,this.layoutCtx,d)}onExportWidget(l,d,x){this.layoutCtx.dashboardCtrl.exportWidget(l,this.layoutCtx,d,x)}onRemoveWidget(l,d){return this.layoutCtx.dashboardCtrl.removeWidget(l,this.layoutCtx,d)}onWidgetMouseDown(l,d){this.layoutCtx.dashboardCtrl.widgetMouseDown(l,this.layoutCtx,d)}onDashboardMouseDown(l){this.layoutCtx.dashboardCtrl.dashboardMouseDown(l,this.layoutCtx)}onWidgetClicked(l,d){this.layoutCtx.dashboardCtrl.widgetClicked(l,this.layoutCtx,d)}prepareDashboardContextMenu(l){return this.layoutCtx.dashboardCtrl.prepareDashboardContextMenu(this.layoutCtx)}prepareWidgetContextMenu(l,d,x){return this.layoutCtx.dashboardCtrl.prepareWidgetContextMenu(this.layoutCtx,d,x)}copyWidget(l,d){this.layoutCtx.dashboardCtrl.copyWidget(l,this.layoutCtx,d)}copyWidgetReference(l,d){this.layoutCtx.dashboardCtrl.copyWidgetReference(l,this.layoutCtx,d)}pasteWidget(l){const d=this.dashboard.getEventGridPosition(l);this.layoutCtx.dashboardCtrl.pasteWidget(l,this.layoutCtx,d)}pasteWidgetReference(l){const d=this.dashboard.getEventGridPosition(l);this.layoutCtx.dashboardCtrl.pasteWidgetReference(l,this.layoutCtx,d)}static{this.\u0275fac=function(d){return new(d||_a)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(re.TranslateService),a.\u0275\u0275directiveInject(dd.Z),a.\u0275\u0275directiveInject(Vo.ImagePipe),a.\u0275\u0275directiveInject(sl.DomSanitizer))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:_a,selectors:[["tb-dashboard-layout"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(pd,7),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.dashboard=ae.first)}},inputs:{dashboardCheatSheet:"dashboardCheatSheet",layoutCtx:"layoutCtx",dashboardCtx:"dashboardCtx",isEdit:"isEdit",isEditingWidget:"isEditingWidget",isMobile:"isMobile",widgetEditMode:"widgetEditMode",parentDashboard:"parentDashboard",popoverComponent:"popoverComponent"},features:[a.\u0275\u0275InheritDefinitionFeature],decls:7,vars:38,consts:[["dashboard",""],["class","tb-progress-cover flex flex-col items-center justify-center",4,"ngIf"],[1,"mat-content",2,"position","relative","width","100%","height","100%",3,"tb-hotkeys","cheatSheet"],["style","z-index: 1; pointer-events: none;","class","mat-headline-5 tb-absolute-fill flex items-center justify-center",4,"ngIf"],[3,"dashboardStyle","backgroundImage","widgets","widgetLayouts","columns","displayGrid","outerMargin","margin","aliasController","stateController","dashboardTimewindow","isEdit","isEditingWidget","autofillHeight","mobileAutofillHeight","mobileRowHeight","isMobile","isMobileDisabled","disableWidgetInteraction","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","callbacks","ignoreLoading","parentDashboard","popoverComponent"],[1,"tb-progress-cover","flex","flex-col","items-center","justify-center"],["color","warn","mode","indeterminate","diameter","100"],[1,"mat-headline-5","tb-absolute-fill","flex","items-center","justify-center",2,"z-index","1","pointer-events","none"],["style","text-align: center;",4,"ngIf"],["mat-button","","class","tb-add-new-widget",3,"click",4,"ngIf"],[2,"text-align","center"],["mat-button","",1,"tb-add-new-widget",3,"click"],[1,"tb-mat-96"]],template:function(d,x){1&d&&(a.\u0275\u0275template(0,md,2,0,"div",1),a.\u0275\u0275elementStart(1,"div",2),a.\u0275\u0275pipe(2,"async"),a.\u0275\u0275template(3,gd,3,2,"section",3),a.\u0275\u0275element(4,"tb-dashboard",4,0),a.\u0275\u0275pipe(6,"async"),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275property("ngIf",x.layoutCtx.widgets.isLoading()),a.\u0275\u0275advance(),a.\u0275\u0275styleMap(x.dashboardStyle),a.\u0275\u0275styleProp("background-image",a.\u0275\u0275pipeBind1(2,34,x.backgroundImage$)),a.\u0275\u0275property("tb-hotkeys",x.hotKeys)("cheatSheet",x.dashboardCheatSheet),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",x.layoutCtx.widgets.isEmpty()),a.\u0275\u0275advance(),a.\u0275\u0275property("dashboardStyle",x.dashboardStyle)("backgroundImage",a.\u0275\u0275pipeBind1(6,36,x.backgroundImage$))("widgets",x.layoutCtx.widgets)("widgetLayouts",x.layoutCtx.widgetLayouts)("columns",x.columns)("displayGrid",x.displayGrid)("outerMargin",x.outerMargin)("margin",x.margin)("aliasController",x.dashboardCtx.aliasController)("stateController",x.dashboardCtx.stateController)("dashboardTimewindow",x.dashboardCtx.dashboardTimewindow)("isEdit",x.isEdit)("isEditingWidget",x.isEditingWidget)("autofillHeight",x.autoFillHeight)("mobileAutofillHeight",x.mobileAutoFillHeight)("mobileRowHeight",x.mobielRowHeigth)("isMobile",x.isMobileValue)("isMobileDisabled",x.isMobileDisabled)("disableWidgetInteraction",x.isEdit)("isEditActionEnabled",x.isEdit&&!x.isEditingWidget)("isExportActionEnabled",x.isEdit&&!x.widgetEditMode&&!x.isEditingWidget)("isRemoveActionEnabled",x.isEdit&&!x.widgetEditMode&&!x.isEditingWidget)("callbacks",x)("ignoreLoading",x.layoutCtx.ignoreLoading)("parentDashboard",x.parentDashboard)("popoverComponent",x.popoverComponent))},dependencies:[O.NgIf,dl.TbHotkeysDirective,ne.MatButton,ie.MatIcon,Go.MatProgressSpinner,_e.DashboardComponent,O.AsyncPipe,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]   button.tb-add-new-widget[_ngcontent-%COMP%]{height:auto;padding-right:12px;font-size:20px;border-style:dashed;border-width:2px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center}']})}}var Kr=n(57974),Nr=n(98679),Qo=n(67792),kr=n(13445),cl=n(25009),Ho=n(44495),jo=n(80240),ha=n(22669);const fd=["dashboardContent"];function _d(fe,l){1&fe&&a.\u0275\u0275element(0,"mat-progress-bar",11)}function pl(fe,l){1&fe&&a.\u0275\u0275element(0,"div",12)}class ba extends ln.m{constructor(l,d,x,ae){super(l,d,ae),this.store=l,this.router=d,this.data=x,this.dialogRef=ae,this.dashboard=this.data.dashboard,this.state=this.data.state,this.title=this.data.title,this.hideToolbar=this.data.hideToolbar,this.parentDashboard=this.data.parentDashboard,this.dialogStyle={},this.data.width&&(this.dialogStyle.width=this.data.width+"vw"),this.data.height&&(this.dialogStyle.height=this.data.height+"vh")}ngOnInit(){}close(){this.dialogRef.close(null)}static{this.\u0275fac=function(d){return new(d||ba)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(cn.Router),a.\u0275\u0275directiveInject(Lt.MAT_DIALOG_DATA),a.\u0275\u0275directiveInject(Lt.MatDialogRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:ba,selectors:[["tb-embed-dashboard-dialog"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(fd,7,a.ViewContainerRef),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x.dashboardContentContainer=ae.first)}},features:[a.\u0275\u0275InheritDefinitionFeature],decls:19,vars:21,consts:[[1,"dashboard-state-dialog","flex","flex-col"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","",1,"dashboard-state-dialog-content","flex","flex-1","flex-col",2,"padding","8px"],[2,"width","100%","height","100%",3,"embedded","syncStateWithQueryParam","hideToolbar","currentState","dashboard","parentDashboard"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"h2"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(4,"span",2),a.\u0275\u0275elementStart(5,"button",3),a.\u0275\u0275listener("click",function(){return x.close()}),a.\u0275\u0275elementStart(6,"mat-icon",4),a.\u0275\u0275text(7,"close"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(8,_d,1,0,"mat-progress-bar",5),a.\u0275\u0275pipe(9,"async"),a.\u0275\u0275template(10,pl,1,0,"div",6),a.\u0275\u0275pipe(11,"async"),a.\u0275\u0275elementStart(12,"div",7),a.\u0275\u0275element(13,"tb-dashboard-page",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"div",9)(15,"button",10),a.\u0275\u0275pipe(16,"async"),a.\u0275\u0275listener("click",function(){return x.close()}),a.\u0275\u0275text(17),a.\u0275\u0275pipe(18,"translate"),a.\u0275\u0275elementEnd()()()),2&d&&(a.\u0275\u0275styleMap(x.dialogStyle),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(x.title),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf",a.\u0275\u0275pipeBind1(9,13,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!a.\u0275\u0275pipeBind1(11,15,x.isLoading$)),a.\u0275\u0275advance(3),a.\u0275\u0275property("embedded",!0)("syncStateWithQueryParam",!1)("hideToolbar",x.hideToolbar)("currentState",x.state)("dashboard",x.dashboard)("parentDashboard",x.parentDashboard),a.\u0275\u0275advance(2),a.\u0275\u0275property("disabled",a.\u0275\u0275pipeBind1(16,17,x.isLoading$)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(18,19,"action.close")," "))},dependencies:[O.NgIf,ne.MatButton,ne.MatIconButton,ie.MatIcon,ra.MatProgressBar,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,pa.DashboardPageComponent,O.AsyncPipe,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]   .mat-mdc-dialog-content.dashboard-state-dialog-content[_ngcontent-%COMP%]{max-height:100%}@media screen and (max-width: 599px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:100%!important;height:100%!important}}@media screen and (min-width: 600px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:480px;height:600px}}@media screen and (min-width: 960px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:768px;height:600px}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:1000px;height:800px}}']})}}var hd=n(28462),zo=n(58512),$o=n(14109),Yo=n(2820),Xo=n(86486),Jo=n(65700),ir=n(70933),kt=n(23690),bd=n(79329),vd=n(11998);class Fa{static{this.\u0275fac=function(d){return new(d||Fa)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:Fa})}static{this.\u0275inj=a.\u0275\u0275defineInjector({imports:[O.CommonModule,P.G]})}}(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(Fa,{declarations:[kt.s,bd.d,vd.J],imports:[O.CommonModule,P.G],exports:[kt.s]});var ml=n(15003),Zo=n(20737),ul=n(87891);const yd=fe=>({stateId:fe});function Ed(fe,l){if(1&fe&&a.\u0275\u0275element(0,"tb-dashboard-page",2),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275property("embedded",!0)("syncStateWithQueryParam",!1)("hideToolbar",!0)("currentState",d.currentState)("dashboard",d.dashboard)("parentDashboard",d.parentDashboard)("parentAliasController",d.parentAliasController)}}function Cd(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"div",3)(1,"span"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275elementEnd()()),2&fe){const d=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind2(3,1,"dashboard.non-existent-dashboard-state-error",a.\u0275\u0275pureFunction1(4,yd,d.stateId)))}}class lr extends Ce.H{constructor(l,d){super(l),this.store=l,this.cd=d,this.syncParentStateParams=!1,this.defaultAutofillLayout=!0,this.stateExists=!0}ngOnInit(){this.dashboard=(0,de.Go)(this.ctx.stateController.dashboardCtrl.dashboardCtx.getDashboard());const l=this.dashboard.configuration.states[this.stateId];if(l){for(const d of Object.keys(l.layouts))this.defaultAutofillLayout&&(l.layouts[d].gridSettings.autoFillHeight=!0,l.layouts[d].gridSettings.mobileAutoFillHeight=!0),(0,de.f1)(this.defaultMargin)&&(l.layouts[d].gridSettings.margin=this.defaultMargin),(0,de.f1)(this.defaultOuterMargin)&&(l.layouts[d].gridSettings.outerMargin=this.defaultOuterMargin),(0,de.Q8)(this.defaultBackgroundColor)&&(l.layouts[d].gridSettings.backgroundColor=this.defaultBackgroundColor);this.updateCurrentState(),this.parentDashboard=this.ctx.parentDashboard?this.ctx.parentDashboard:this.ctx.dashboard,this.syncParentStateParams&&(this.parentAliasController=this.parentDashboard.aliasController,this.stateSubscription=this.ctx.stateController.dashboardCtrl.dashboardCtx.stateChanged.subscribe(()=>{this.updateCurrentState(),this.cd.markForCheck()}))}else this.stateExists=!1}ngOnDestroy(){this.stateSubscription&&this.stateSubscription.unsubscribe()}updateCurrentState(){const l={},d=(0,de.Go)(this.ctx.stateController.getStateParams());(0,ul.$d)(d,this.entityParamName,this.entityId),l.params=d,this.stateId&&(l.id=this.stateId),this.currentState=(0,de.AT)([l])}static{this.\u0275fac=function(d){return new(d||lr)(a.\u0275\u0275directiveInject(ye.Store),a.\u0275\u0275directiveInject(a.ChangeDetectorRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:lr,selectors:[["tb-dashboard-state"]],inputs:{ctx:"ctx",stateId:"stateId",syncParentStateParams:"syncParentStateParams",defaultAutofillLayout:"defaultAutofillLayout",defaultMargin:"defaultMargin",defaultOuterMargin:"defaultOuterMargin",defaultBackgroundColor:"defaultBackgroundColor",entityParamName:"entityParamName",entityId:"entityId"},features:[a.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"embedded","syncStateWithQueryParam","hideToolbar","currentState","dashboard","parentDashboard","parentAliasController",4,"ngIf"],["class","tb-absolute-fill tb-widget-error",4,"ngIf"],[3,"embedded","syncStateWithQueryParam","hideToolbar","currentState","dashboard","parentDashboard","parentAliasController"],[1,"tb-absolute-fill","tb-widget-error"]],template:function(d,x){1&d&&a.\u0275\u0275template(0,Ed,1,7,"tb-dashboard-page",0)(1,Cd,4,6,"div",1),2&d&&(a.\u0275\u0275property("ngIf",x.stateExists),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",!x.stateExists))},dependencies:[O.NgIf,pa.DashboardPageComponent,re.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{position:relative;display:block;width:100%;height:100%}']})}}var Al=n(99907),gl=n(75402),Vr=n(3059),pt=n(94158),fl=n(14192),_l=n(40810),Gr=n(27112),Cn=n(1375),hl=n(63103),qo=n(96964),Ua=n(26754),sr=n(20203),bl=n(81435),vl=n(28374),yl=n(97030),Xn=n(79093),Qr=n(11267),Hr=n(95084),El=n(96196),ei=n(58770),ti=n(96036),dr=n(76463),ni=n(831),Yt=n(49969),xd=n(728),Ra=n(45024),ai=n(67336),ri=n(28203),Td=n(36860),Md=n(1975),Wa=n(82529),jr=n(18617),cr=n(5964),Nn=n(96697);function Cl(fe,l){}const xl={bottomSheetState:(0,Yt.trigger)("state",[(0,Yt.state)("void, hidden",(0,Yt.style)({transform:"translateY(100%)"})),(0,Yt.state)("visible",(0,Yt.style)({transform:"translateY(0%)"})),(0,Yt.transition)("visible => void, visible => hidden",(0,Yt.group)([(0,Yt.animate)(`${Be.AnimationDurations.COMPLEX} ${Be.AnimationCurves.ACCELERATION_CURVE}`),(0,Yt.query)("@*",(0,Yt.animateChild)(),{optional:!0})])),(0,Yt.transition)("void => visible",(0,Yt.group)([(0,Yt.animate)(`${Be.AnimationDurations.EXITING} ${Be.AnimationCurves.DECELERATION_CURVE}`),(0,Yt.query)("@*",(0,Yt.animateChild)(),{optional:!0})]))])};class Ln extends Wa.sU{constructor(l,d,x,ae,Ie,Ve,Je,ht,xt){super(l,d,x,ae,Ie,Ve,Je,xt),this._animationState="void",this._animationStateChanged=new a.EventEmitter,this._breakpointSubscription=ht.observe([Ze.Breakpoints.Medium,Ze.Breakpoints.Large,Ze.Breakpoints.XLarge]).subscribe(()=>{const Ft=this._elementRef.nativeElement.classList;Ft.toggle("mat-bottom-sheet-container-medium",ht.isMatched(Ze.Breakpoints.Medium)),Ft.toggle("mat-bottom-sheet-container-large",ht.isMatched(Ze.Breakpoints.Large)),Ft.toggle("mat-bottom-sheet-container-xlarge",ht.isMatched(Ze.Breakpoints.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(l){"visible"===l.toState&&this._trapFocus(),this._animationStateChanged.emit(l)}_onAnimationStart(l){this._animationStateChanged.emit(l)}_captureInitialFocus(){}static{this.\u0275fac=function(d){return new(d||Ln)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(jr.GX),a.\u0275\u0275directiveInject(O.DOCUMENT,8),a.\u0275\u0275directiveInject(Wa.Pe),a.\u0275\u0275directiveInject(jr.Z7),a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(ot.OverlayRef),a.\u0275\u0275directiveInject(Ze.BreakpointObserver),a.\u0275\u0275directiveInject(jr.FN))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Ln,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(d,x){1&d&&a.\u0275\u0275syntheticHostListener("@state.start",function(Ie){return x._onAnimationStart(Ie)})("@state.done",function(Ie){return x._onAnimationDone(Ie)}),2&d&&(a.\u0275\u0275syntheticHostProperty("@state",x._animationState),a.\u0275\u0275attribute("role",x._config.role)("aria-modal",x._config.ariaModal)("aria-label",x._config.ariaLabel))},standalone:!0,features:[a.\u0275\u0275InheritDefinitionFeature,a.\u0275\u0275StandaloneFeature],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(d,x){1&d&&a.\u0275\u0275template(0,Cl,0,0,"ng-template",0)},dependencies:[gt.CdkPortalOutlet],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color, var(--mat-app-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-app-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-app-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-app-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-app-body-large-tracking))}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape);border-top-right-radius:var(--mat-bottom-sheet-container-shape)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[xl.bottomSheetState]}})}}const Tl=new a.InjectionToken("MatBottomSheetData");class zr{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class pr{get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}constructor(l,d,x){this._ref=l,this._afterOpened=new Vt.B,this.containerInstance=x,this.disableClose=d.disableClose,x._animationStateChanged.pipe((0,cr.p)(ae=>"done"===ae.phaseName&&"visible"===ae.toState),(0,Nn.s)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),x._animationStateChanged.pipe((0,cr.p)(ae=>"done"===ae.phaseName&&"hidden"===ae.toState),(0,Nn.s)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),l.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),(0,Dn.h)(this.backdropClick(),this.keydownEvents().pipe((0,cr.p)(ae=>ae.keyCode===ai.ESCAPE))).subscribe(ae=>{!this.disableClose&&("keydown"!==ae.type||!(0,ai.hasModifierKey)(ae))&&(ae.preventDefault(),this.dismiss())})}dismiss(l){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe((0,cr.p)(d=>"start"===d.phaseName),(0,Nn.s)(1)).subscribe(d=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},d.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=l,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const oi=new a.InjectionToken("mat-bottom-sheet-default-options");class Jn{get _openedBottomSheetRef(){const l=this._parentBottomSheet;return l?l._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(l){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=l:this._bottomSheetRefAtThisLevel=l}constructor(l,d,x,ae){this._overlay=l,this._parentBottomSheet=x,this._defaultOptions=ae,this._bottomSheetRefAtThisLevel=null,this._dialog=d.get(Wa.lG)}open(l,d){const x={...this._defaultOptions||new zr,...d};let ae;return this._dialog.open(l,{...x,disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:Ln,scrollStrategy:x.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:ae}),providers:(Ie,Ve,Je)=>(ae=new pr(Ie,x,Je),[{provide:pr,useValue:ae},{provide:Tl,useValue:x.data}])}),ae.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===ae&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>ae.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):ae.containerInstance.enter(),this._openedBottomSheetRef=ae,ae}dismiss(l){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(l)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static{this.\u0275fac=function(d){return new(d||Jn)(a.\u0275\u0275inject(ot.Overlay),a.\u0275\u0275inject(a.Injector),a.\u0275\u0275inject(Jn,12),a.\u0275\u0275inject(oi,8))}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:Jn,factory:Jn.\u0275fac,providedIn:"root"})}}class $r{static{this.\u0275fac=function(d){return new(d||$r)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:$r,imports:[Wa.Ph,Be.MatCommonModule,gt.PortalModule,Ln],exports:[Ln,Be.MatCommonModule]})}static{this.\u0275inj=a.\u0275\u0275defineInjector({providers:[Jn],imports:[Wa.Ph,Be.MatCommonModule,gt.PortalModule,Be.MatCommonModule]})}}var Ml=n(65571),ii=n(25596),li=n(25084),Dl=n(16195),Pl=n(3902),Il=n(59115),Ol=n(5951),Ka=n(90882),Dd=n(43881),Pd=n(95416),Id=n(76233),un=n(96850),Yr=n(74402),si=n(84572),Od=n(983),wl=n(92688),Bl=n(99172),Sl=n(19852),Ll=n(70274),di=n(8045);const Xr=new a.InjectionToken("CDK_TREE_NODE_OUTLET_NODE");class An{constructor(l,d){this.viewContainer=l,this._node=d}static{this.\u0275fac=function(d){return new(d||An)(a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(Xr,8))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:An,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0})}}class Ul{constructor(l){this.$implicit=l}}class Ut{constructor(l){this.template=l}static{this.\u0275fac=function(d){return new(d||Ut)(a.\u0275\u0275directiveInject(a.TemplateRef))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Ut,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]},standalone:!0})}}function ci(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}class an{get dataSource(){return this._dataSource}set dataSource(l){this._dataSource!==l&&this._switchDataSource(l)}constructor(l,d){this._differs=l,this._changeDetectorRef=d,this._dir=(0,a.inject)(ri.Directionality),this._onDestroy=new Vt.B,this._levels=new Map,this._parents=new Map,this._ariaSets=new Map,this.viewChange=new dn.t({start:0,end:Number.MAX_VALUE}),this._flattenedNodes=new dn.t([]),this._nodeType=new dn.t(null),this._nodes=new dn.t(new Map),this._keyManagerNodes=new dn.t([]),this._keyManagerFactory=(0,a.inject)(jr.Z2),this._viewInit=!1}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){const l=this._nodeDefs.filter(d=>!d.when);l.length,this._defaultNodeDef=l[0]}_setNodeTypeIfUnset(l){null===this._nodeType.value&&this._nodeType.next(l)}_switchDataSource(l){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),l||this._nodeOutlet.viewContainer.clear(),this._dataSource=l,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new Ra.SelectionModel(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let l;(0,Ra.isDataSource)(this._dataSource)?l=this._dataSource.connect(this):(0,Yr.A)(this._dataSource)?l=this._dataSource:Array.isArray(this._dataSource)&&(l=(0,be.of)(this._dataSource)),l&&(this._dataSubscription=this._getRenderData(l).pipe((0,ut.Q)(this._onDestroy)).subscribe(d=>{this._renderDataChanges(d)}))}_getRenderData(l){const d=this._getExpansionModel();return(0,si.z)([l,this._nodeType,d.changed.pipe((0,Bl.Z)(null),(0,oe.M)(x=>{this._emitExpansionChanges(x)}))]).pipe((0,Z.n)(([x,ae])=>null===ae?(0,be.of)({renderNodes:x,flattenedNodes:null,nodeType:ae}):this._computeRenderingData(x,ae).pipe((0,R.T)(Ie=>({...Ie,nodeType:ae})))))}_renderDataChanges(l){null!==l.nodeType?(this._updateCachedData(l.flattenedNodes),this.renderNodeChanges(l.renderNodes),this._updateKeyManagerItems(l.flattenedNodes)):this.renderNodeChanges(l.renderNodes)}_emitExpansionChanges(l){if(!l)return;const d=this._nodes.value;for(const x of l.added)d.get(x)?._emitExpansionState(!0);for(const x of l.removed)d.get(x)?._emitExpansionState(!1)}_initializeKeyManager(){const l=(0,si.z)([this._keyManagerNodes,this._nodes]).pipe((0,R.T)(([x,ae])=>x.reduce((Ie,Ve)=>{const Je=ae.get(this._getExpansionKey(Ve));return Je&&Ie.push(Je),Ie},[]))),d={trackBy:x=>this._getExpansionKey(x.data),skipPredicate:x=>!!x.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(l,d)}_initializeDataDiffer(){const l=this.trackBy??((d,x)=>this._getExpansionKey(x));this._dataDiffer=this._differs.find([]).create(l)}_checkTreeControlUsage(){}renderNodeChanges(l,d=this._dataDiffer,x=this._nodeOutlet.viewContainer,ae){const Ie=d.diff(l);!Ie&&!this._viewInit||(Ie?.forEachOperation((Ve,Je,ht)=>{if(null==Ve.previousIndex)this.insertNode(l[ht],ht,x,ae);else if(null==ht)x.remove(Je);else{const xt=x.get(Je);x.move(xt,ht)}}),Ie?.forEachIdentityChange(Ve=>{const Je=Ve.item;if(null!=Ve.currentIndex){x.get(Ve.currentIndex).context.$implicit=Je}}),ae?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(l,d){if(1===this._nodeDefs.length)return this._nodeDefs.first;return this._nodeDefs.find(ae=>ae.when&&ae.when(d,l))||this._defaultNodeDef}insertNode(l,d,x,ae){const Ie=this._getLevelAccessor(),Ve=this._getNodeDef(l,d),Je=this._getExpansionKey(l),ht=new Ul(l);ae??=this._parents.get(Je)??void 0,Ie?ht.level=Ie(l):void 0!==ae&&this._levels.has(this._getExpansionKey(ae))?ht.level=this._levels.get(this._getExpansionKey(ae))+1:ht.level=0,this._levels.set(Je,ht.level),(x||this._nodeOutlet.viewContainer).createEmbeddedView(Ve.template,ht,d),Ht.mostRecentTreeNode&&(Ht.mostRecentTreeNode.data=l)}isExpanded(l){return!(!this.treeControl?.isExpanded(l)&&!this._expansionModel?.isSelected(this._getExpansionKey(l)))}toggle(l){this.treeControl?this.treeControl.toggle(l):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(l))}expand(l){this.treeControl?this.treeControl.expand(l):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(l))}collapse(l){this.treeControl?this.treeControl.collapse(l):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(l))}toggleDescendants(l){this.treeControl?this.treeControl.toggleDescendants(l):this._expansionModel&&(this.isExpanded(l)?this.collapseDescendants(l):this.expandDescendants(l))}expandDescendants(l){if(this.treeControl)this.treeControl.expandDescendants(l);else if(this._expansionModel){const d=this._expansionModel;d.select(this._getExpansionKey(l)),this._getDescendants(l).pipe((0,Nn.s)(1),(0,ut.Q)(this._onDestroy)).subscribe(x=>{d.select(...x.map(ae=>this._getExpansionKey(ae)))})}}collapseDescendants(l){if(this.treeControl)this.treeControl.collapseDescendants(l);else if(this._expansionModel){const d=this._expansionModel;d.deselect(this._getExpansionKey(l)),this._getDescendants(l).pipe((0,Nn.s)(1),(0,ut.Q)(this._onDestroy)).subscribe(x=>{d.deselect(...x.map(ae=>this._getExpansionKey(ae)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._expansionModel.select(...this._flattenedNodes.value.map(d=>this._getExpansionKey(d)))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._expansionModel.deselect(...this._flattenedNodes.value.map(d=>this._getExpansionKey(d)))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(l){const d=this._getLevelAccessor(),x=this._expansionModel??this.treeControl?.expansionModel;if(!x)return(0,be.of)([]);const ae=this._getExpansionKey(l),Ie=x.changed.pipe((0,Z.n)(Je=>Je.added.includes(ae)?(0,be.of)(!0):Je.removed.includes(ae)?(0,be.of)(!1):Od.w),(0,Bl.Z)(this.isExpanded(l)));if(d)return(0,si.z)([Ie,this._flattenedNodes]).pipe((0,R.T)(([Je,ht])=>Je?this._findChildrenByLevel(d,ht,l,1):[]));const Ve=this._getChildrenAccessor();if(Ve)return(0,di.x)(Ve(l)??[]);throw ci()}_findChildrenByLevel(l,d,x,ae){const Ie=this._getExpansionKey(x),Ve=d.findIndex(Ft=>this._getExpansionKey(Ft)===Ie),Je=l(x),ht=Je+ae,xt=[];for(let Ft=Ve+1;Ft<d.length;Ft++){const ta=l(d[Ft]);if(ta<=Je)break;ta<=ht&&xt.push(d[Ft])}return xt}_registerNode(l){this._nodes.value.set(this._getExpansionKey(l.data),l),this._nodes.next(this._nodes.value)}_unregisterNode(l){this._nodes.value.delete(this._getExpansionKey(l.data)),this._nodes.next(this._nodes.value)}_getLevel(l){return this._levels.get(this._getExpansionKey(l))}_getSetSize(l){return this._getAriaSet(l).length}_getPositionInSet(l){const d=this._getAriaSet(l),x=this._getExpansionKey(l);return d.findIndex(ae=>this._getExpansionKey(ae)===x)+1}_getNodeParent(l){const d=this._parents.get(this._getExpansionKey(l.data));return d&&this._nodes.value.get(this._getExpansionKey(d))}_getNodeChildren(l){return this._getDirectChildren(l.data).pipe((0,R.T)(d=>d.reduce((x,ae)=>{const Ie=this._nodes.value.get(this._getExpansionKey(ae));return Ie&&x.push(Ie),x},[])))}_sendKeydownToKeyManager(l){this._keyManager.onKeydown(l)}_getDescendants(l){if(this.treeControl)return(0,be.of)(this.treeControl.getDescendants(l));if(this.levelAccessor){const d=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,l,1/0);return(0,be.of)(d)}if(this.childrenAccessor)return this._getAllChildrenRecursively(l).pipe((0,Sl.T)((d,x)=>(d.push(...x),d),[]));throw ci()}_getAllChildrenRecursively(l){return this.childrenAccessor?(0,di.x)(this.childrenAccessor(l)).pipe((0,Nn.s)(1),(0,Z.n)(d=>{for(const x of d)this._parents.set(this._getExpansionKey(x),l);return(0,be.of)(...d).pipe((0,Ll.H)(x=>(0,wl.x)((0,be.of)([x]),this._getAllChildrenRecursively(x))))})):(0,be.of)([])}_getExpansionKey(l){return this.expansionKey?.(l)??l}_getAriaSet(l){const d=this._getExpansionKey(l),x=this._parents.get(d),ae=x?this._getExpansionKey(x):null;return this._ariaSets.get(ae)??[l]}_findParentForNode(l,d,x){if(!x.length)return null;const ae=this._levels.get(this._getExpansionKey(l))??0;for(let Ie=d-1;Ie>=0;Ie--){const Ve=x[Ie];if((this._levels.get(this._getExpansionKey(Ve))??0)<ae)return Ve}return null}_flattenNestedNodesWithExpansion(l,d=0){const x=this._getChildrenAccessor();return x?(0,be.of)(...l).pipe((0,Ll.H)(ae=>{const Ie=this._getExpansionKey(ae);this._parents.has(Ie)||this._parents.set(Ie,null),this._levels.set(Ie,d);const Ve=(0,di.x)(x(ae));return(0,wl.x)((0,be.of)([ae]),Ve.pipe((0,Nn.s)(1),(0,oe.M)(Je=>{this._ariaSets.set(Ie,[...Je??[]]);for(const ht of Je??[]){const xt=this._getExpansionKey(ht);this._parents.set(xt,ae),this._levels.set(xt,d+1)}}),(0,Z.n)(Je=>Je?this._flattenNestedNodesWithExpansion(Je,d+1).pipe((0,R.T)(ht=>this.isExpanded(ae)?ht:[])):(0,be.of)([]))))}),(0,Sl.T)((ae,Ie)=>(ae.push(...Ie),ae),[])):(0,be.of)([...l])}_computeRenderingData(l,d){if(this.childrenAccessor&&"flat"===d)return this._ariaSets.set(null,[...l]),this._flattenNestedNodesWithExpansion(l).pipe((0,R.T)(x=>({renderNodes:x,flattenedNodes:x})));if(this.levelAccessor&&"nested"===d){const x=this.levelAccessor;return(0,be.of)(l.filter(ae=>0===x(ae))).pipe((0,R.T)(ae=>({renderNodes:ae,flattenedNodes:l})),(0,oe.M)(({flattenedNodes:ae})=>{this._calculateParents(ae)}))}return"flat"===d?(0,be.of)({renderNodes:l,flattenedNodes:l}).pipe((0,oe.M)(({flattenedNodes:x})=>{this._calculateParents(x)})):(this._ariaSets.set(null,[...l]),this._flattenNestedNodesWithExpansion(l).pipe((0,R.T)(x=>({renderNodes:l,flattenedNodes:x}))))}_updateCachedData(l){this._flattenedNodes.next(l)}_updateKeyManagerItems(l){this._keyManagerNodes.next(l)}_calculateParents(l){const d=this._getLevelAccessor();if(d){this._parents.clear(),this._ariaSets.clear();for(let x=0;x<l.length;x++){const ae=l[x],Ie=this._getExpansionKey(ae);this._levels.set(Ie,d(ae));const Ve=this._findParentForNode(ae,x,l);this._parents.set(Ie,Ve);const Je=Ve?this._getExpansionKey(Ve):null,ht=this._ariaSets.get(Je)??[];ht.splice(x,0,ae),this._ariaSets.set(Je,ht)}}}static{this.\u0275fac=function(d){return new(d||an)(a.\u0275\u0275directiveInject(a.IterableDiffers),a.\u0275\u0275directiveInject(a.ChangeDetectorRef))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:an,selectors:[["cdk-tree"]],contentQueries:function(d,x,ae){if(1&d&&a.\u0275\u0275contentQuery(ae,Ut,5),2&d){let Ie;a.\u0275\u0275queryRefresh(Ie=a.\u0275\u0275loadQuery())&&(x._nodeDefs=Ie)}},viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(An,7),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x._nodeOutlet=ae.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(d,x){1&d&&a.\u0275\u0275listener("keydown",function(Ie){return x._sendKeydownToKeyManager(Ie)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],standalone:!0,features:[a.\u0275\u0275StandaloneFeature],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(d,x){1&d&&a.\u0275\u0275elementContainer(0,0)},dependencies:[An],encapsulation:2})}}class Ht{get role(){return"treeitem"}set role(l){}get isExpandable(){return this._isExpandable()}set isExpandable(l){this._inputIsExpandable=l,(!this.data||this._isExpandable)&&this._inputIsExpandable&&(this._inputIsExpanded?this.expand():!1===this._inputIsExpanded&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(l){this._inputIsExpanded=l,l?this.expand():this.collapse()}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}static{this.mostRecentTreeNode=null}get data(){return this._data}set data(l){l!==this._data&&(this._data=l,this._dataChanges.next())}get isLeafNode(){return void 0!==this._tree.treeControl?.isExpandable&&!this._tree.treeControl.isExpandable(this._data)||void 0===this._tree.treeControl?.isExpandable&&0===this._tree.treeControl?.getDescendants(this._data).length}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}constructor(l,d){this._elementRef=l,this._tree=d,this._tabindex=-1,this.activation=new a.EventEmitter,this.expandedChange=new a.EventEmitter,this._destroyed=new Vt.B,this._dataChanges=new Vt.B,this._inputIsExpandable=!1,this._inputIsExpanded=void 0,this._shouldFocus=!0,this._changeDetectorRef=(0,a.inject)(a.ChangeDetectorRef),Ht.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=function Bd(fe){let l=fe.parentElement;for(;l&&!Sd(l);)l=l.parentElement;return l?l.classList.contains("cdk-nested-tree-node")?(0,a.numberAttribute)(l.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe((0,R.T)(()=>this.isExpanded),(0,N.F)()).subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._tree._setNodeTypeIfUnset("flat"),this._tree._registerNode(this)}ngOnDestroy(){Ht.mostRecentTreeNode===this&&(Ht.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(l){this.expandedChange.emit(l)}static{this.\u0275fac=function(d){return new(d||Ht)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(an))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Ht,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(d,x){1&d&&a.\u0275\u0275listener("click",function(){return x._setActiveItem()})("focus",function(){return x._focusItem()}),2&d&&(a.\u0275\u0275hostProperty("tabindex",x._tabindex),a.\u0275\u0275attribute("aria-expanded",x._getAriaExpanded())("aria-level",x.level+1)("aria-posinset",x._getPositionInSet())("aria-setsize",x._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",a.booleanAttribute],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",a.booleanAttribute],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"],standalone:!0,features:[a.\u0275\u0275InputTransformsFeature]})}}function Sd(fe){const l=fe.classList;return!(!l?.contains("cdk-nested-tree-node")&&!l?.contains("cdk-tree"))}class Fn extends Ht{constructor(l,d,x){super(l,d),this._differs=x}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree._getDirectChildren(this.data).pipe((0,ut.Q)(this._destroyed)).subscribe(l=>this.updateChildrenNodes(l)),this.nodeOutlet.changes.pipe((0,ut.Q)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){this._tree._setNodeTypeIfUnset("nested"),super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(l){const d=this._getNodeOutlet();if(l&&(this._children=l),d&&this._children){const x=d.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,x,this._data)}else this._dataDiffer.diff([])}_clear(){const l=this._getNodeOutlet();l&&(l.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const l=this.nodeOutlet;return l&&l.find(d=>!d._node||d._node===this)}static{this.\u0275fac=function(d){return new(d||Fn)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(an),a.\u0275\u0275directiveInject(a.IterableDiffers))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Fn,selectors:[["cdk-nested-tree-node"]],contentQueries:function(d,x,ae){if(1&d&&a.\u0275\u0275contentQuery(ae,An,5),2&d){let Ie;a.\u0275\u0275queryRefresh(Ie=a.\u0275\u0275loadQuery())&&(x.nodeOutlet=Ie)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:Ht,useExisting:Fn},{provide:Xr,useExisting:Fn}]),a.\u0275\u0275InheritDefinitionFeature]})}}const Ld=/([A-Za-z%]+)$/;class Zn{get level(){return this._level}set level(l){this._setLevelInput(l)}get indent(){return this._indent}set indent(l){this._setIndentInput(l)}constructor(l,d,x,ae){this._treeNode=l,this._tree=d,this._element=x,this._dir=ae,this._destroyed=new Vt.B,this.indentUnits="px",this._indent=40,this._setPadding(),ae&&ae.change.pipe((0,ut.Q)(this._destroyed)).subscribe(()=>this._setPadding(!0)),l._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const l=(this._treeNode.data&&this._tree._getLevel(this._treeNode.data))??null,d=null==this._level?l:this._level;return"number"==typeof d?`${d*this._indent}${this.indentUnits}`:null}_setPadding(l=!1){const d=this._paddingIndent();if(d!==this._currentPadding||l){const x=this._element.nativeElement,ae=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",Ie="paddingLeft"===ae?"paddingRight":"paddingLeft";x.style[ae]=d||"",x.style[Ie]="",this._currentPadding=d}}_setLevelInput(l){this._level=isNaN(l)?null:l,this._setPadding()}_setIndentInput(l){let d=l,x="px";if("string"==typeof l){const ae=l.split(Ld);d=ae[0],x=ae[1]||x}this.indentUnits=x,this._indent=(0,a.numberAttribute)(d),this._setPadding()}static{this.\u0275fac=function(d){return new(d||Zn)(a.\u0275\u0275directiveInject(Ht),a.\u0275\u0275directiveInject(an),a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(ri.Directionality,8))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Zn,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",a.numberAttribute],indent:[0,"cdkTreeNodePaddingIndent","indent"]},standalone:!0,features:[a.\u0275\u0275InputTransformsFeature]})}}class qn{constructor(l,d){this._tree=l,this._treeNode=d,this.recursive=!1}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static{this.\u0275fac=function(d){return new(d||qn)(a.\u0275\u0275directiveInject(an),a.\u0275\u0275directiveInject(Ht))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:qn,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(d,x){1&d&&a.\u0275\u0275listener("click",function(Ie){return x._toggle(),Ie.stopPropagation()})("keydown.Enter",function(Ie){return x._toggle(),Ie.preventDefault()})("keydown.Space",function(Ie){return x._toggle(),Ie.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",a.booleanAttribute]},standalone:!0,features:[a.\u0275\u0275InputTransformsFeature]})}}class Na{static{this.\u0275fac=function(d){return new(d||Na)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:Na,imports:[Fn,Ut,Zn,qn,an,Ht,An],exports:[Fn,Ut,Zn,qn,an,Ht,An]})}static{this.\u0275inj=a.\u0275\u0275defineInjector({})}}class kn extends Ht{get tabIndexInputBinding(){return this._tabIndexInputBinding}set tabIndexInputBinding(l){this._tabIndexInputBinding=l}_getTabindexAttribute(){return function Wl(fe){return!!fe._isNoopTreeKeyManager}(this._tree._keyManager)?this.tabIndexInputBinding:this._tabindex}get disabled(){return this.isDisabled}set disabled(l){this.isDisabled=l}constructor(l,d,x){super(l,d),this.defaultTabIndex=0,this.tabIndexInputBinding=Number(x)||this.defaultTabIndex}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static{this.\u0275fac=function(d){return new(d||kn)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(an),a.\u0275\u0275injectAttribute("tabindex"))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:kn,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:5,hostBindings:function(d,x){1&d&&a.\u0275\u0275listener("click",function(){return x._focusItem()}),2&d&&(a.\u0275\u0275hostProperty("tabindex",x._getTabindexAttribute()),a.\u0275\u0275attribute("aria-expanded",x._getAriaExpanded())("aria-level",x.level+1)("aria-posinset",x._getPositionInSet())("aria-setsize",x._getSetSize()))},inputs:{tabIndexInputBinding:[2,"tabIndex","tabIndexInputBinding",l=>null==l?0:(0,a.numberAttribute)(l)],disabled:[2,"disabled","disabled",a.booleanAttribute]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matTreeNode"],standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:Ht,useExisting:kn}]),a.\u0275\u0275InputTransformsFeature,a.\u0275\u0275InheritDefinitionFeature]})}}class xn extends Ut{static{this.\u0275fac=(()=>{let l;return function(x){return(l||(l=a.\u0275\u0275getInheritedFactory(xn)))(x||xn)}})()}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:xn,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:Ut,useExisting:xn}]),a.\u0275\u0275InheritDefinitionFeature]})}}class Un extends Fn{get disabled(){return this.isDisabled}set disabled(l){this.isDisabled=l}get tabIndex(){return this.isDisabled?-1:this._tabIndex}set tabIndex(l){this._tabIndex=l}constructor(l,d,x,ae){super(l,d,x)}ngOnInit(){super.ngOnInit()}ngAfterContentInit(){super.ngAfterContentInit()}ngOnDestroy(){super.ngOnDestroy()}static{this.\u0275fac=function(d){return new(d||Un)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(an),a.\u0275\u0275directiveInject(a.IterableDiffers),a.\u0275\u0275injectAttribute("tabindex"))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Un,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],inputs:{node:[0,"matNestedTreeNode","node"],disabled:[2,"disabled","disabled",a.booleanAttribute],tabIndex:[2,"tabIndex","tabIndex",l=>null==l?0:(0,a.numberAttribute)(l)]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matNestedTreeNode"],standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:Fn,useExisting:Un},{provide:Ht,useExisting:Un},{provide:Xr,useExisting:Un}]),a.\u0275\u0275InputTransformsFeature,a.\u0275\u0275InheritDefinitionFeature]})}}class Vn extends Zn{get level(){return this._level}set level(l){this._setLevelInput(l)}get indent(){return this._indent}set indent(l){this._setIndentInput(l)}static{this.\u0275fac=(()=>{let l;return function(x){return(l||(l=a.\u0275\u0275getInheritedFactory(Vn)))(x||Vn)}})()}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Vn,selectors:[["","matTreeNodePadding",""]],inputs:{level:[2,"matTreeNodePadding","level",a.numberAttribute],indent:[0,"matTreeNodePaddingIndent","indent"]},standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:Zn,useExisting:Vn}]),a.\u0275\u0275InputTransformsFeature,a.\u0275\u0275InheritDefinitionFeature]})}}class Rn{constructor(l,d){this.viewContainer=l,this._node=d}static{this.\u0275fac=function(d){return new(d||Rn)(a.\u0275\u0275directiveInject(a.ViewContainerRef),a.\u0275\u0275directiveInject(Xr,8))}}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:Rn,selectors:[["","matTreeNodeOutlet",""]],standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:An,useExisting:Rn}])]})}}class Gn extends an{constructor(){super(...arguments),this._nodeOutlet=void 0}static{this.\u0275fac=(()=>{let l;return function(x){return(l||(l=a.\u0275\u0275getInheritedFactory(Gn)))(x||Gn)}})()}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:Gn,selectors:[["mat-tree"]],viewQuery:function(d,x){if(1&d&&a.\u0275\u0275viewQuery(Rn,7),2&d){let ae;a.\u0275\u0275queryRefresh(ae=a.\u0275\u0275loadQuery())&&(x._nodeOutlet=ae.first)}},hostAttrs:[1,"mat-tree"],exportAs:["matTree"],standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:an,useExisting:Gn}]),a.\u0275\u0275InheritDefinitionFeature,a.\u0275\u0275StandaloneFeature],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(d,x){1&d&&a.\u0275\u0275elementContainer(0,0)},dependencies:[Rn],styles:[".mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-app-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-app-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-app-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-app-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height)}.mat-nested-tree-node{border-bottom-width:0}"],encapsulation:2})}}class gn extends qn{static{this.\u0275fac=(()=>{let l;return function(x){return(l||(l=a.\u0275\u0275getInheritedFactory(gn)))(x||gn)}})()}static{this.\u0275dir=a.\u0275\u0275defineDirective({type:gn,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},standalone:!0,features:[a.\u0275\u0275ProvidersFeature([{provide:qn,useExisting:gn}]),a.\u0275\u0275InheritDefinitionFeature]})}}class Zr{static{this.\u0275fac=function(d){return new(d||Zr)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:Zr,imports:[Na,Be.MatCommonModule,Un,xn,Vn,gn,Gn,kn,Rn],exports:[Be.MatCommonModule,Un,xn,Vn,gn,Gn,kn,Rn]})}static{this.\u0275inj=a.\u0275\u0275defineInjector({imports:[Na,Be.MatCommonModule,Be.MatCommonModule]})}}class Kl{constructor(l,d,x,ae){this.transformFunction=l,this.getLevel=d,this.isExpandable=x,this.getChildren=ae}_flattenNode(l,d,x,ae){const Ie=this.transformFunction(l,d);if(x.push(Ie),this.isExpandable(Ie)){const Ve=this.getChildren(l);Ve&&(Array.isArray(Ve)?this._flattenChildren(Ve,d,x,ae):Ve.pipe((0,Nn.s)(1)).subscribe(Je=>{this._flattenChildren(Je,d,x,ae)}))}return x}_flattenChildren(l,d,x,ae){l.forEach((Ie,Ve)=>{let Je=ae.slice();Je.push(Ve!=l.length-1),this._flattenNode(Ie,d+1,x,Je)})}flattenNodes(l){let d=[];return l.forEach(x=>this._flattenNode(x,0,d,[])),d}expandFlattenedNodes(l,d){let x=[],ae=[];return ae[0]=!0,l.forEach(Ie=>{let Ve=!0;for(let Je=0;Je<=this.getLevel(Ie);Je++)Ve=Ve&&ae[Je];Ve&&x.push(Ie),this.isExpandable(Ie)&&(ae[this.getLevel(Ie)+1]=d.isExpanded(Ie))}),x}}class mi extends Ra.DataSource{get data(){return this._data.value}set data(l){this._data.next(l),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}constructor(l,d,x){super(),this._treeControl=l,this._treeFlattener=d,this._flattenedData=new dn.t([]),this._expandedData=new dn.t([]),this._data=new dn.t([]),x&&(this.data=x)}connect(l){return(0,Dn.h)(l.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,R.T)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}class Nl extends Ra.DataSource{constructor(){super(...arguments),this._data=new dn.t([])}get data(){return this._data.value}set data(l){this._data.next(l)}connect(l){return(0,Dn.h)(l.viewChange,this._data).pipe((0,R.T)(()=>this.data))}disconnect(){}}var kl=n(21626),Vl=n(25231),Ud=n(77037),qr=n(39604),Gl=n(97586),Ql=n.n(Gl),Rd=n(772),Wd=n(45876),ka=n(12876),va=n(5681),eo=n(60392),ya=n(1421),Kd=n(22219),St=n(41553),Nd=n(14921),kd=n(39402),Hl=n(44685),ui=n(15571),jl=n(26597),zl=n(13572),to=n(20226),$l=n(45651),Yl=n(28197),Vd=n(68381),no=n(97435),ao=n(67729),Xl=n(63785),Jl=n(34687),Gd=n(36305),Zl=n(74329),ql=n(5297),Qd=n(84709),es=n(62901),Va=n(98711),ts=n(93938),Nt=n(61475),Ea=n(7732),Ga=n(74427),Qn=n(37441),ea=n(35213),mr=n(63950),Hn=n(37850),ro=n(915),Ai=n(50931),ns=n(87163),oo=n(2699),Qa=n(92369),as=n(70098),rs=n(95412),ur=n(97091),os=n(50961),Hd=n(75282),jd=n(49),zd=n(34522),$d=n(77674),gi=n(23593),Yd=n(65613),Xd=n(90429),Jd=n(39828),Zd=n(57451),qd=n(5655),fi=n(48676),_i=n(87591),hi=n(89183),ec=n(39574),tc=n(91648),is=n(35156),nc=n(2869),ac=n(83008),rc=n(84382),oc=n(52762),ic=n(52958),bi=n(85476),ls=n(62720),vi=n(77235),lc=n(27669),ct=n(76085),Ha=n(20011),io=n(35950),fn=n(92973),sc=n(61843),It=n(54292),Rt=n(3003),lo=n(81946),dc=n(5234),so=n(33186),cc=n(87029),co=n(60757),pc=n(91257),mc=n(70110),ss=n(94588),ds=n(20001),cs=n(9361),uc=n(19267),ps=n(40281),ms=n(30893),yi=n(77177),Ei=n(29772),Ci=n(18409),xi=n(25629),Ac=n(51076),Ti=n(86941),gc=n(44201),po=n(86763),_n=n(49546),us=n(42319),mo=n(65222),As=n(41384),gs=n(43116),Mi=n(95620),ja=n(17122),uo=n(15961),Di=n(84276),za=n(15988),fs=n(3979),_s=n(18856),hs=n(55091),fc=n(16146),bs=n(1292),_c=n(65129),hc=n(44304),bc=n(67285),vc=n(59187),yc=n(83636),Ec=n(23017),Cc=n(51963),xc=n(46107),Tc=n(9210),Mc=n(9231),Dc=n(68994),Pc=n(64102),Ic=n(63514),Oc=n(91739),o=n(43848),r=n(45845),s=n(68718);const M=new class i{constructor(){this.initialized=!1,this.modulesMap={"@angular/animations":Yt,"@angular/core":a,"@angular/common":O,"@angular/common/http":kl,"@angular/forms":$,"@angular/flex-layout":{},"@angular/flex-layout/flex":{},"@angular/flex-layout/grid":{},"@angular/flex-layout/extended":{},"@angular/platform-browser":sl,"@angular/platform-browser/animations":xd,"@angular/router":cn,"@angular/cdk/coercion":se,"@angular/cdk/collections":Ra,"@angular/cdk/keycodes":ai,"@angular/cdk/layout":Ze,"@angular/cdk/overlay":ot,"@angular/cdk/portal":gt,"@angular/cdk/bidi":ri,"@angular/cdk/platform":Td,"@angular/cdk/drag-drop":oa,"@angular/material/autocomplete":Ke,"@angular/material/badge":Md,"@angular/material/bottom-sheet":I,"@angular/material/button":ne,"@angular/material/button-toggle":Ml,"@angular/material/card":ii,"@angular/material/checkbox":To,"@angular/material/chips":pe,"@angular/material/core":Be,"@angular/material/datepicker":li,"@angular/material/dialog":Lt,"@angular/material/divider":Er,"@angular/material/expansion":In,"@angular/material/form-field":Pe,"@angular/material/grid-list":Dl,"@angular/material/icon":ie,"@angular/material/input":Ae,"@angular/material/list":Pl,"@angular/material/menu":Il,"@angular/material/paginator":ho,"@angular/material/progress-bar":ra,"@angular/material/progress-spinner":Go,"@angular/material/radio":Ol,"@angular/material/select":Ne,"@angular/material/sidenav":Ka,"@angular/material/slide-toggle":it,"@angular/material/slider":Dd,"@angular/material/snack-bar":Pd,"@angular/material/sort":Ya,"@angular/material/stepper":Id,"@angular/material/table":yn,"@angular/material/tabs":un,"@angular/material/toolbar":Pn,"@angular/material/tooltip":je,"@angular/material/tree":U,"@ngrx/store":ye,rxjs:Vl,"rxjs/operators":Ud,"@ngx-translate/core":re,"@mat-datetimepicker/core":qr,moment:Ql(),tslib:Ue,"@core/public-api":Rd,"@shared/public-api":Wd,"@home/components/public-api":F,"@shared/pipe/date-ago.pipe":Nd,"@shared/pipe/enum-to-array.pipe":kd,"@shared/pipe/file-size.pipe":Hl,"@shared/pipe/highlight.pipe":Xe,"@shared/pipe/keyboard-shortcut.pipe":ui,"@shared/pipe/milliseconds-to-time-string.pipe":jl,"@shared/pipe/nospace.pipe":zl,"@shared/pipe/safe.pipe":to,"@shared/pipe/selectable-columns.pipe":$l,"@shared/pipe/short-number.pipe":Yl,"@shared/pipe/tbJson.pipe":Vd,"@shared/pipe/truncate.pipe":no,"@shared/pipe/image.pipe":Vo,"@shared/directives/ellipsis-chip-list.directive":ao,"@shared/directives/truncate-with-tooltip.directive":Xl,"@shared/decorators/coercion":j,"@shared/decorators/enumerable":Jl,"@shared/decorators/tb-inject":Gd,"@shared/import-export/import-export.service":xc,"@shared/import-export/import-dialog.component":Tc,"@shared/import-export/import-dialog-csv.component":Mc,"@shared/import-export/table-columns-assignment.component":Dc,"@shared/components/footer.component":Zl,"@shared/components/logo.component":ql,"@shared/components/footer-fab-buttons.component":Qd,"@shared/components/fullscreen.directive":es,"@shared/components/circular-progress.directive":Va,"@shared/components/hotkeys.directive":dl,"@shared/components/tb-anchor.component":ts,"@shared/components/popover.component":cd,"@shared/components/directives/sring-template-outlet.directive":Nt,"@shared/components/directives/component-outlet.directive":Ea,"@shared/components/markdown.component":Ga,"@shared/components/help.component":Qn,"@shared/components/help-markdown.component":ea,"@shared/components/help-popup.component":mr,"@shared/components/tb-checkbox.component":Hn,"@shared/components/toast.directive":ro,"@shared/components/tb-error.component":Ai,"@shared/components/cheatsheet.component":ll,"@shared/components/breadcrumb.component":ns,"@shared/components/user-menu.component":oo,"@shared/components/time/timewindow.component":Qa,"@shared/components/time/timewindow-panel.component":as,"@shared/components/time/timeinterval.component":rs,"@shared/components/time/quick-time-interval.component":ur,"@shared/components/dashboard-select.component":os,"@shared/components/dashboard-select-panel.component":Hd,"@shared/components/rule-chain/rule-chain-select.component":Ic,"@shared/components/time/datetime-period.component":jd,"@shared/components/time/datetime.component":xo,"@shared/components/time/timezone-select.component":zd,"@shared/components/time/timezone.component":Oc.L,"@shared/components/time/timezone-panel.component":o.f,"@shared/components/time/datapoints-limit":r.O,"@shared/components/value-input.component":$d,"@shared/components/dashboard-autocomplete.component":gi,"@shared/components/entity/entity-subtype-autocomplete.component":Yd,"@shared/components/entity/entity-subtype-select.component":Xd,"@shared/components/entity/entity-subtype-list.component":Zt,"@shared/components/entity/entity-autocomplete.component":Jd,"@shared/components/entity/entity-list.component":He,"@shared/components/entity/entity-type-select.component":We,"@shared/components/entity/entity-select.component":he,"@shared/components/entity/entity-keys-list.component":Zd,"@shared/components/entity/entity-list-select.component":qd,"@shared/components/entity/entity-type-list.component":q,"@shared/components/queue/queue-autocomplete.component":fi,"@shared/components/relation/relation-type-autocomplete.component":Me,"@shared/components/socialshare-panel.component":_i,"@shared/components/json-object-edit.component":hi,"@shared/components/json-object-view.component":ec,"@shared/components/json-content.component":tc,"@shared/components/js-func.component":Li,"@shared/components/script-lang.component":is,"@shared/components/fab-toolbar.component":ma,"@shared/components/widgets-bundle-select.component":nc,"@shared/components/dialog/confirm-dialog.component":ac,"@shared/components/dialog/alert-dialog.component":rc,"@shared/components/dialog/todo-dialog.component":oc,"@shared/components/dialog/color-picker-dialog.component":ic,"@shared/components/dialog/material-icons-dialog.component":bi,"@shared/components/color-input.component":ls,"@shared/components/material-icon-select.component":br,"@shared/components/dialog/node-script-test-dialog.component":vi,"@shared/components/json-form/json-form.component":lc,"@shared/components/notification/notification.component":ct,"@shared/components/notification/template-autocomplete.component":Ha,"@shared/components/image-input.component":io,"@shared/components/file-input.component":fn,"@shared/components/message-type-autocomplete.component":sc,"@shared/components/kv-map.component":It,"@shared/components/multiple-image-input.component":Rt,"@shared/components/nav-tree.component":lo,"@shared/components/led-light.component":dc,"@shared/components/directives/tb-json-to-string.directive":so,"@shared/components/dialog/json-object-edit-dialog.component":cc,"@shared/components/time/history-selector/history-selector.component":co,"@shared/components/entity/entity-gateway-select.component":pc,"@shared/components/contact.component":mc,"@shared/components/ota-package/ota-package-autocomplete.component":ss,"@shared/components/widgets-bundle-search.component":ds,"@shared/components/button/copy-button.component":cs,"@shared/components/button/toggle-password.component":uc,"@shared/components/protobuf-content.component":ps,"@shared/components/slack-conversation-autocomplete.component":ms,"@shared/components/string-items-list.component":yi,"@shared/components/toggle-header.component":Ei,"@shared/components/toggle-select.component":Ci,"@shared/components/unit-input.component":xi,"@shared/components/material-icons.component":Ac,"@shared/components/icon.component":vo,"@shared/components/hint-tooltip-icon.component":Ti,"@shared/components/grid/scroll-grid.component":gc,"@shared/components/image/gallery-image-input.component":po,"@shared/components/image/multiple-gallery-image-input.component":_n,"@shared/components/popover.service":us,"@home/components/alarm/alarm-filter-config.component":fs,"@home/components/alarm/alarm-comment-dialog.component":za,"@home/components/alarm/alarm-assignee-panel.component":Di,"@home/components/alarm/alarm-details-dialog.component":uo,"@home/components/widget/lib/display-columns-panel.component":ja,"@home/components/widget/config/datasources.component":_s,"@home/components/widget/config/basic/common/data-keys-panel.component":hs,"@home/components/widget/lib/settings/common/color-settings.component":Mi,"@home/components/widget/lib/settings/common/font-settings.component":gs,"@home/components/widget/config/basic/common/widget-actions-panel.component":As,"@home/components/widget/lib/settings/common/css-unit-select.component":mo,"@home/components/entity/add-entity-dialog.component":A,"@home/components/entity/entities-table.component":u,"@home/components/details-panel.component":m,"@home/components/entity/entity-details-panel.component":p,"@home/components/audit-log/audit-log-details-dialog.component":v,"@home/components/audit-log/audit-log-table.component":T,"@home/components/event/event-table-header.component":C,"@home/components/event/event-table.component":_,"@home/components/event/event-filter-panel.component":E,"@home/components/relation/relation-table.component":f,"@home/components/relation/relation-dialog.component":g,"@home/components/alarm/alarm-table-header.component":y,"@home/components/alarm/alarm-table.component":b,"@home/components/attribute/attribute-table.component":D,"@home/components/attribute/add-attribute-dialog.component":w,"@home/components/attribute/edit-attribute-value-panel.component":ee,"@home/components/dashboard/dashboard.component":_e,"@home/components/widget/widget.component":ve,"@home/components/widget/lib/legend.component":fc,"@home/components/alias/aliases-entity-select-panel.component":t,"@home/components/alias/aliases-entity-select.component":c,"@home/components/widget/widget-config.component":le,"@home/components/alias/entity-aliases-dialog.component":we,"@home/components/entity/entity-filter-view.component":qe,"@home/components/alias/entity-alias-dialog.component":lt,"@home/components/entity/entity-filter.component":V,"@home/components/relation/relation-filters.component":h,"@home/components/alias/entity-alias-select.component":bs,"@home/components/widget/config/data-keys.component":_c,"@home/components/widget/config/data-key-config-dialog.component":hc,"@home/components/widget/config/data-key-config.component":bc,"@home/components/widget/lib/settings/common/legend-config.component":vc,"@home/components/widget/action/manage-widget-actions.component":G,"@home/components/widget/action/widget-action-dialog.component":S,"@home/components/widget/lib/settings/common/action/custom-action-pretty-resources-tabs.component":yc,"@home/components/widget/lib/settings/common/action/custom-action-pretty-editor.component":Ec,"@home/components/widget/lib/settings/common/action/mobile-action-editor.component":Cc,"@home/components/widget/dialog/custom-dialog.service":Ri,"@home/components/widget/dialog/custom-dialog-container.component":Za,"@home/components/attribute/add-widget-to-dashboard-dialog.component":yo,"@home/components/event/event-content-dialog.component":Eo,"@home/components/shared-home-components.module":ia,"@home/components/widget/config/widget-config-components.module":ya,"@home/components/widget/config/basic/basic-widget-config.module":ka,"@home/components/widget/lib/settings/common/widget-settings-common.module":va,"@home/components/widget/widget-components.module":eo,"@home/components/dashboard/select-target-layout-dialog.component":jn,"@home/components/dashboard/select-target-state-dialog.component":Pt,"@home/components/alias/aliases-entity-autocomplete.component":e,"@home/components/filter/boolean-filter-predicate.component":Co,"@home/components/filter/string-filter-predicate.component":qa,"@home/components/filter/numeric-filter-predicate.component":xr,"@home/components/filter/complex-filter-predicate.component":zn,"@home/components/filter/filter-predicate.component":pn,"@home/components/filter/filter-predicate-list.component":Tr,"@home/components/filter/key-filter-list.component":En,"@home/components/filter/complex-filter-predicate-dialog.component":K,"@home/components/filter/key-filter-dialog.component":wn,"@home/components/filter/filters-dialog.component":la,"@home/components/filter/filter-dialog.component":wt,"@home/components/filter/filter-select.component":Pc,"@home/components/filter/filters-edit.component":Q,"@home/components/filter/filters-edit-panel.component":k,"@home/components/filter/user-filter-dialog.component":H,"@home/components/filter/filter-user-info.component":Qi,"@home/components/filter/filter-user-info-dialog.component":Ia,"@home/components/filter/filter-predicate-value.component":Sn,"@home/components/profile/tenant-profile.component":Do,"@home/components/profile/tenant-profile-dialog.component":Oa,"@home/components/profile/tenant-profile-data.component":Dr,"@home/components/profile/device/default-device-profile-configuration.component":Po,"@home/components/profile/device/device-profile-configuration.component":Io,"@home/components/profile/device-profile.component":sn,"@home/components/profile/device/default-device-profile-transport-configuration.component":Pr,"@home/components/profile/device/device-profile-transport-configuration.component":Oo,"@home/components/profile/device-profile-dialog.component":wo,"@home/components/profile/device-profile-autocomplete.component":wa,"@home/components/profile/device/mqtt-device-profile-transport-configuration.component":Bo,"@home/components/profile/device/coap-device-profile-transport-configuration.component":Ir,"@home/components/profile/asset-profile.component":ti,"@home/components/profile/asset-profile-dialog.component":dr,"@home/components/profile/asset-profile-autocomplete.component":ni,"@home/components/profile/alarm/device-profile-alarms.component":Or,"@home/components/profile/alarm/device-profile-alarm.component":wr,"@home/components/profile/alarm/create-alarm-rules.component":Br,"@home/components/profile/alarm/alarm-rule.component":Sr,"@home/components/profile/alarm/alarm-rule-condition.component":Lr,"@home/components/filter/filter-text.component":Fr,"@home/components/profile/add-device-profile-dialog.component":Ur,"@home/components/rule-chain/rule-chain-autocomplete.component":So,"@home/components/profile/device-profile-provision-configuration.component":Ba,"@home/components/profile/alarm/alarm-schedule.component":Lo,"@home/components/wizard/device-wizard-dialog.component":Fo,"@home/components/profile/alarm/alarm-schedule-info.component":er,"@home/components/profile/alarm/alarm-schedule-dialog.component":Uo,"@home/components/profile/alarm/edit-alarm-details-dialog.component":Rr,"@home/components/profile/alarm/alarm-rule-condition-dialog.component":Ro,"@home/components/profile/tenant/default-tenant-profile-configuration.component":ji,"@home/components/profile/tenant/tenant-profile-configuration.component":zi,"@home/components/sms/sms-provider-configuration.component":Wo,"@home/components/sms/aws-sns-provider-configuration.component":Ko,"@home/components/sms/twilio-sms-provider-configuration.component":No,"@home/components/dashboard-page/dashboard-page.component":pa,"@home/components/dashboard-page/dashboard-toolbar.component":z,"@home/components/dashboard-page/layout/dashboard-layout.component":L,"@home/components/dashboard-page/edit-widget.component":Kr,"@home/components/dashboard-page/dashboard-widget-select.component":Nr,"@home/components/dashboard-page/add-widget-dialog.component":Qo,"@home/components/dashboard-page/layout/manage-dashboard-layouts-dialog.component":kr,"@home/components/dashboard-page/dashboard-settings-dialog.component":Ho,"@home/components/dashboard-page/states/manage-dashboard-states-dialog.component":jo,"@home/components/dashboard-page/states/dashboard-state-dialog.component":ha,"@home/components/widget/dialog/embed-dashboard-dialog.component":B,"@home/components/edge/edge-downlink-table.component":zo,"@home/components/edge/edge-downlink-table-header.component":$o,"@home/components/dashboard-page/widget-types-panel.component":Yo,"@home/components/profile/alarm/alarm-duration-predicate-value.component":Xo,"@home/components/dashboard-page/dashboard-image-dialog.component":Jo,"@home/components/widget/widget-container.component":ir,"@home/components/profile/queue/tenant-profile-queues.component":Vr,"@home/components/queue/queue-form.component":pt}}init(){return this.initialized?(0,be.of)(null):(0,s.e)().pipe((0,R.T)(l=>{this.modulesMap["@angular/flex-layout"]=l,this.modulesMap["@angular/flex-layout/flex"]=l,this.modulesMap["@angular/flex-layout/grid"]=l,this.modulesMap["@angular/flex-layout/extended"]=l,System.constructor.prototype.resolve=d=>{try{return this.modulesMap[d]?"app:"+d:d}catch{return d}};for(const d of Object.keys(this.modulesMap))System.set("app:"+d,this.modulesMap[d]);System.constructor.prototype.shouldFetch=d=>d.endsWith("/download"),System.constructor.prototype.fetch=(d,x)=>(x?.meta?.additionalHeaders&&(x.headers={...x.headers,...x.meta.additionalHeaders}),fetch(d,x)),this.initialized=!0}))}};var W=n(49554),te=n(98803),ue=n(8209),me=n(66951),De=n(89466),Se=n(6221),Le=n(89392),ke=n(57454);function mt(fe,l){if(1&fe&&(a.\u0275\u0275elementStart(0,"mat-option",2)(1,"mat-icon")(2,"tb-icon"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(4,"div"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",3),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd()()),2&fe){const d=l.$implicit,x=a.\u0275\u0275nextContext();a.\u0275\u0275property("value",d),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(x.getIcon(d)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(x.getName(d)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(x.getSizeDescription(d))}}class et{constructor(l){this.dashboardUtils=l,this.selectedBreakpoint="default",this.breakpointIds=["default"]}ngOnInit(){this.layoutDataChanged$=this.dashboardCtrl.layouts.main.layoutCtx.layoutDataChanged.subscribe(()=>{this.dashboardCtrl.layouts.main.layoutCtx.layoutData&&(this.breakpointIds=Object.keys(this.dashboardCtrl.layouts.main.layoutCtx?.layoutData),this.breakpointIds.sort((l,d)=>{const x=this.dashboardUtils.getBreakpointInfoById(l)?.maxWidth||1/0;return(this.dashboardUtils.getBreakpointInfoById(d)?.maxWidth||1/0)-x}),this.breakpointIds.indexOf(this.dashboardCtrl.layouts.main.layoutCtx.breakpoint)>-1?this.selectedBreakpoint=this.dashboardCtrl.layouts.main.layoutCtx.breakpoint:(this.selectedBreakpoint="default",this.dashboardCtrl.layouts.main.layoutCtx.breakpoint=this.selectedBreakpoint))})}ngOnDestroy(){this.layoutDataChanged$.unsubscribe()}selectLayoutChanged(){this.dashboardUtils.updatedLayoutForBreakpoint(this.dashboardCtrl.layouts.main,this.selectedBreakpoint),this.dashboardCtrl.updateLayoutSizes()}getName(l){return this.dashboardUtils.getBreakpointName(l)}getIcon(l){return this.dashboardUtils.getBreakpointIcon(l)}getSizeDescription(l){return this.dashboardUtils.getBreakpointSizeDescription(l)}static{this.\u0275fac=function(d){return new(d||et)(a.\u0275\u0275directiveInject(ko.N))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:et,selectors:[["tb-select-dashboard-breakpoint"]],inputs:{dashboardCtrl:"dashboardCtrl"},decls:4,vars:5,consts:[[1,"select-dashboard-breakpoint",3,"ngModelChange","ngModel"],["style","min-height:56px;",3,"value",4,"ngFor","ngForOf"],[2,"min-height","56px",3,"value"],[2,"font-size","12px","letter-spacing","0.4px","color","#9e9e9e"]],template:function(d,x){1&d&&(a.\u0275\u0275elementStart(0,"mat-select",0),a.\u0275\u0275twoWayListener("ngModelChange",function(Ie){return a.\u0275\u0275twoWayBindingSet(x.selectedBreakpoint,Ie)||(x.selectedBreakpoint=Ie),Ie}),a.\u0275\u0275listener("ngModelChange",function(){return x.selectLayoutChanged()}),a.\u0275\u0275elementStart(1,"mat-select-trigger"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,mt,8,4,"mat-option",1),a.\u0275\u0275elementEnd()),2&d&&(a.\u0275\u0275classProp("hidden",x.breakpointIds.length<2),a.\u0275\u0275twoWayProperty("ngModel",x.selectedBreakpoint),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(x.getName(x.selectedBreakpoint)),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",x.breakpointIds))},dependencies:[O.NgForOf,ie.MatIcon,Ne.MatSelect,Ne.MatSelectTrigger,Be.MatOption,$.NgControlStatus,$.NgModel,vo.TbIconComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]{pointer-events:all;width:min-content}[_nghost-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]     .mat-mdc-select.select-dashboard-breakpoint .mat-mdc-select-value{max-width:200px}[_nghost-%COMP%]     .mat-mdc-select.select-dashboard-breakpoint .mat-mdc-select-arrow{width:24px}']})}}var dt=n(6435),Ct=n(83103),ft=n(56877),At=n(18499),Dt=n(59776),Tt=n(94743),yt=n(61880);class st{static{this.\u0275fac=function(d){return new(d||st)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:st})}static{this.\u0275inj=a.\u0275\u0275defineInjector({providers:[Ee.j,Ri.CustomDialogService,{provide:hd.y,useValue:ba},{provide:Zo.X0,useValue:On},{provide:Zo.Hj,useValue:pa.DashboardPageComponent},{provide:Zo.sQ,useValue:st},{provide:Ja.d$,useValue:M}],imports:[O.CommonModule,P.G,ia.SharedHomeComponentsModule,ya.WidgetConfigComponentsModule,ka.BasicWidgetConfigModule,Sa,Fa,Kn,ml.R,ca.N]})}}(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(st,{declarations:[W.V,u.EntitiesTableComponent,A.AddEntityDialogComponent,m.DetailsPanelComponent,p.EntityDetailsPanelComponent,gl.i,T.AuditLogTableComponent,v.AuditLogDetailsDialogComponent,Eo.EventContentDialogComponent,C.EventTableHeaderComponent,_.EventTableComponent,E.EventFilterPanelComponent,$o.EdgeDownlinkTableHeaderComponent,zo.EdgeDownlinkTableComponent,f.RelationTableComponent,g.RelationDialogComponent,Ot,y.AlarmTableHeaderComponent,b.AlarmTableComponent,Di.AlarmAssigneePanelComponent,ue.E,D.AttributeTableComponent,w.AddAttributeDialogComponent,ee.EditAttributeValuePanelComponent,Le.d,nt,Fe,tt,we.EntityAliasesDialogComponent,lt.EntityAliasDialogComponent,_e.DashboardComponent,ir.WidgetContainerComponent,ir.EditWidgetActionsTooltipComponent,ve.WidgetComponent,le.WidgetConfigComponent,De.G,qe.EntityFilterViewComponent,vn,Wn,Xt,Se.c,Za.CustomDialogContainerComponent,jn.SelectTargetLayoutDialogComponent,Pt.SelectTargetStateDialogComponent,yo.AddWidgetToDashboardDialogComponent,Co.BooleanFilterPredicateComponent,qa.StringFilterPredicateComponent,xr.NumericFilterPredicateComponent,zn.ComplexFilterPredicateComponent,On,pn.FilterPredicateComponent,Tr.FilterPredicateListComponent,En.KeyFilterListComponent,wn.KeyFilterDialogComponent,wt.FilterDialogComponent,la.FiltersDialogComponent,Fr.FilterTextComponent,Yn,sa,$t,Qi.FilterUserInfoComponent,Ia.FilterUserInfoDialogComponent,Sn.FilterPredicateValueComponent,Hi.j,ji.DefaultTenantProfileConfigurationComponent,zi.TenantProfileConfigurationComponent,Dr.TenantProfileDataComponent,Do.TenantProfileComponent,Oa.TenantProfileDialogComponent,wa.DeviceProfileAutocompleteComponent,Po.DefaultDeviceProfileConfigurationComponent,Io.DeviceProfileConfigurationComponent,Pr.DefaultDeviceProfileTransportConfigurationComponent,Bo.MqttDeviceProfileTransportConfigurationComponent,Ir.CoapDeviceProfileTransportConfigurationComponent,Oo.DeviceProfileTransportConfigurationComponent,Br.CreateAlarmRulesComponent,Sr.AlarmRuleComponent,Ro.AlarmRuleConditionDialogComponent,Lr.AlarmRuleConditionComponent,wr.DeviceProfileAlarmComponent,Or.DeviceProfileAlarmsComponent,sn.DeviceProfileComponent,wo.DeviceProfileDialogComponent,Ur.AddDeviceProfileDialogComponent,me.S,ti.AssetProfileComponent,dr.AssetProfileDialogComponent,ni.AssetProfileAutocompleteComponent,So.RuleChainAutocompleteComponent,er.AlarmScheduleInfoComponent,Ba.DeviceProfileProvisionConfigurationComponent,Lo.AlarmScheduleComponent,Al.e,Xo.AlarmDurationPredicateValueComponent,Fo.DeviceWizardDialogComponent,Uo.AlarmScheduleDialogComponent,Rr.EditAlarmDetailsDialogComponent,Wo.SmsProviderConfigurationComponent,Ko.AwsSnsProviderConfigurationComponent,da.A,No.TwilioSmsProviderConfigurationComponent,ua,pa.DashboardPageComponent,lr,_a,et,Kr.EditWidgetComponent,Nr.DashboardWidgetSelectComponent,Qo.AddWidgetDialogComponent,ke.y,kr.ManageDashboardLayoutsDialogComponent,cl.O,Ho.DashboardSettingsDialogComponent,jo.ManageDashboardStatesDialogComponent,ha.DashboardStateDialogComponent,Jo.DashboardImageDialogComponent,ba,Yo.DisplayWidgetTypesPanelComponent,Vr.TenantProfileQueuesComponent,pt.QueueFormComponent,fl.h,_l.d,Gr.a,Cn.B,hl.V,qo.o,Ua.m,sr.E,bl.m,vl.S,yl.Z,Xn.F,Qr.I,Hr.S,El.F,ei.a,te.N,dt.I,Ct.n],imports:[O.CommonModule,P.G,ia.SharedHomeComponentsModule,ya.WidgetConfigComponentsModule,ka.BasicWidgetConfigModule,Sa,Fa,Kn,ml.R,ca.N],exports:[W.V,u.EntitiesTableComponent,A.AddEntityDialogComponent,m.DetailsPanelComponent,p.EntityDetailsPanelComponent,gl.i,T.AuditLogTableComponent,_.EventTableComponent,$o.EdgeDownlinkTableHeaderComponent,zo.EdgeDownlinkTableComponent,f.RelationTableComponent,Ot,b.AlarmTableComponent,Di.AlarmAssigneePanelComponent,ue.E,D.AttributeTableComponent,Fe,tt,we.EntityAliasesDialogComponent,lt.EntityAliasDialogComponent,_e.DashboardComponent,ir.WidgetContainerComponent,ir.EditWidgetActionsTooltipComponent,ve.WidgetComponent,le.WidgetConfigComponent,De.G,qe.EntityFilterViewComponent,vn,Wn,Xt,Se.c,Za.CustomDialogContainerComponent,jn.SelectTargetLayoutDialogComponent,Pt.SelectTargetStateDialogComponent,Co.BooleanFilterPredicateComponent,qa.StringFilterPredicateComponent,xr.NumericFilterPredicateComponent,zn.ComplexFilterPredicateComponent,On,pn.FilterPredicateComponent,Tr.FilterPredicateListComponent,En.KeyFilterListComponent,wn.KeyFilterDialogComponent,wt.FilterDialogComponent,la.FiltersDialogComponent,Fr.FilterTextComponent,Yn,$t,Hi.j,Dr.TenantProfileDataComponent,Do.TenantProfileComponent,Oa.TenantProfileDialogComponent,wa.DeviceProfileAutocompleteComponent,Po.DefaultDeviceProfileConfigurationComponent,Io.DeviceProfileConfigurationComponent,Pr.DefaultDeviceProfileTransportConfigurationComponent,Bo.MqttDeviceProfileTransportConfigurationComponent,Ir.CoapDeviceProfileTransportConfigurationComponent,Oo.DeviceProfileTransportConfigurationComponent,Br.CreateAlarmRulesComponent,Sr.AlarmRuleComponent,Ro.AlarmRuleConditionDialogComponent,Lr.AlarmRuleConditionComponent,wr.DeviceProfileAlarmComponent,Or.DeviceProfileAlarmsComponent,sn.DeviceProfileComponent,wo.DeviceProfileDialogComponent,Ur.AddDeviceProfileDialogComponent,me.S,So.RuleChainAutocompleteComponent,Fo.DeviceWizardDialogComponent,ti.AssetProfileComponent,dr.AssetProfileDialogComponent,ni.AssetProfileAutocompleteComponent,er.AlarmScheduleInfoComponent,Lo.AlarmScheduleComponent,Al.e,Uo.AlarmScheduleDialogComponent,Xo.AlarmDurationPredicateValueComponent,Rr.EditAlarmDetailsDialogComponent,Ba.DeviceProfileProvisionConfigurationComponent,Wo.SmsProviderConfigurationComponent,Ko.AwsSnsProviderConfigurationComponent,da.A,No.TwilioSmsProviderConfigurationComponent,ua,pa.DashboardPageComponent,lr,_a,et,Kr.EditWidgetComponent,Nr.DashboardWidgetSelectComponent,Qo.AddWidgetDialogComponent,ke.y,kr.ManageDashboardLayoutsDialogComponent,cl.O,Ho.DashboardSettingsDialogComponent,jo.ManageDashboardStatesDialogComponent,ha.DashboardStateDialogComponent,Jo.DashboardImageDialogComponent,ba,Yo.DisplayWidgetTypesPanelComponent,Vr.TenantProfileQueuesComponent,pt.QueueFormComponent,fl.h,_l.d,Gr.a,Cn.B,hl.V,qo.o,Ua.m,sr.E,bl.m,vl.S,yl.Z,Xn.F,Qr.I,Hr.S,El.F,ei.a,te.N,dt.I,Ct.n]}),a.\u0275\u0275setComponentScope(lt.EntityAliasDialogComponent,[O.NgIf,Ai.TbErrorComponent,ne.MatButton,ne.MatIconButton,ie.MatIcon,ra.MatProgressBar,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pe.MatError,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,it.MatSlideToggle,$.\u0275NgNoValidate,$.DefaultValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormGroupDirective,$.FormControlName,re.TranslateDirective,Ti.HintTooltipIconComponent,vn],[O.AsyncPipe,re.TranslatePipe]),a.\u0275\u0275setComponentScope(ve.WidgetComponent,[O.NgIf,ro.ToastDirective,Go.MatProgressSpinner],[to.SafePipe]),a.\u0275\u0275setComponentScope(le.WidgetConfigComponent,[O.NgIf,O.NgTemplateOutlet,hi.JsonObjectEditComponent,ft.v,ne.MatButton,Ae.MatInput,Pe.MatFormField,it.MatSlideToggle,In.MatExpansionPanel,In.MatExpansionPanelHeader,In.MatExpansionPanelDescription,In.MatExpansionPanelContent,$.DefaultValueAccessor,$.NumberValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.MinValidator,$.MaxValidator,$.NgModel,$.FormGroupDirective,$.FormControlName,ls.ColorInputComponent,br.MaterialIconSelectComponent,re.TranslateDirective,Ci.ToggleSelectComponent,xi.UnitInputComponent,Ti.HintTooltipIconComponent,fs.AlarmFilterConfigComponent,At.n,_s.DatasourcesComponent,Dt.Z,Tt.Jz,yt.F,gs.FontSettingsComponent,As.WidgetActionsPanelComponent,Wn],[re.TranslatePipe]),a.\u0275\u0275setComponentScope(Se.c,[O.NgIf,ne.MatButton,ne.MatIconButton,ie.MatIcon,ra.MatProgressBar,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,$.\u0275NgNoValidate,$.NgControlStatus,$.NgControlStatusGroup,$.FormGroupDirective,$.FormControlName,Wn],[O.AsyncPipe,re.TranslatePipe]),a.\u0275\u0275setComponentScope(wt.FilterDialogComponent,[O.NgIf,ne.MatButton,ne.MatIconButton,ie.MatIcon,ra.MatProgressBar,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Pe.MatError,Pn.MatToolbar,Lt.MatDialogActions,Lt.MatDialogContent,it.MatSlideToggle,$.\u0275NgNoValidate,$.DefaultValueAccessor,$.NgControlStatus,$.NgControlStatusGroup,$.RequiredValidator,$.FormGroupDirective,$.FormControlName,re.TranslateDirective,En.KeyFilterListComponent],[O.AsyncPipe,re.TranslatePipe]),a.\u0275\u0275setComponentScope(pa.DashboardPageComponent,[O.NgIf,ro.ToastDirective,es.FullscreenDirective,Qn.HelpComponent,ll.TbCheatSheetComponent,oo.UserMenuComponent,Qa.TimewindowComponent,os.DashboardSelectComponent,ne.MatButton,ne.MatIconButton,ne.MatMiniFabButton,ie.MatIcon,Ae.MatInput,Pe.MatFormField,Pe.MatLabel,Ka.MatDrawer,Ka.MatDrawerContainer,Ka.MatDrawerContent,je.MatTooltip,Er.MatDivider,$.DefaultValueAccessor,$.NgControlStatus,$.RequiredValidator,$.NgModel,re.TranslateDirective,ds.WidgetsBundleSearchComponent,Ei.ToggleOption,Ci.ToggleSelectComponent,Aa,m.DetailsPanelComponent,Fe,Yn,ua,_a,et,Kr.EditWidgetComponent,Nr.DashboardWidgetSelectComponent],[O.AsyncPipe,Vo.ImagePipe,re.TranslatePipe])},98803:(Re,X,n)=>{"use strict";n.d(X,{N:()=>I});var e=n(93953),t=n(50670),c=n(360),h=n(8968),V=n(25967),S=n(63729),G=n(9437),K=n(34006),H=n(9310),k=n(60177),Q=n(88834),z=n(99213),L=n(73955);function B(U,F){if(1&U){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"button",2),e.\u0275\u0275listener("click",function(P){e.\u0275\u0275restoreView(a);const A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.sendNotification(P))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"send"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",3),e.\u0275\u0275text(5,"notification.send-notification"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(P){e.\u0275\u0275restoreView(a);const A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.sendNotification(P))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"send"),e.\u0275\u0275elementEnd()()()}}class I{constructor(F,a,O){this.dialog=F,this.store=a,this.activeComponentService=O,this.authUser=(0,S.rx)(this.store)}sendNotification(F){F&&F.stopPropagation(),this.dialog.open(t.T,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!0}}).afterClosed().subscribe(a=>{if(a){const O=this.activeComponentService.getCurrentActiveComponent();if(O instanceof h.EntitiesTableComponent){const P=O;P.entitiesTableConfig.entityType===V.ck.NOTIFICATION_REQUEST&&P.entitiesTableConfig.updateData()}}})}show(){return this.authUser.authority!==G.s.CUSTOMER_USER}static{this.\u0275fac=function(a){return new(a||I)(e.\u0275\u0275directiveInject(K.MatDialog),e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(c.P))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["tb-send-notification-button"]],decls:1,vars:1,consts:[["class","flex flex-row items-end justify-end","style","height: 100%; padding: 0 16px;",4,"ngIf"],[1,"flex","flex-row","items-end","justify-end",2,"height","100%","padding","0 16px"],["mat-flat-button","","color","primary",1,"lt-md:!hidden",3,"click"],["translate",""],["mat-mini-fab","","color","primary",1,"mat-elevation-z0","gt-sm:!hidden",3,"click"]],template:function(a,O){1&a&&e.\u0275\u0275template(0,B,9,0,"div",0),2&a&&e.\u0275\u0275property("ngIf",O.show())},dependencies:[k.NgIf,Q.MatButton,Q.MatMiniFabButton,z.MatIcon,L.TranslateDirective],encapsulation:2})}}},34019:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AddDeviceProfileDialogComponent:()=>ie});var e=n(93953),t=n(34006),c=n(89417),h=n(56542),V=n(5095),S=n(14246),G=n(25967),K=n(88855),H=n(27997),k=n(44464),Q=n(57125),z=n(89815),L=n(74972),B=n(96354),I=n(9310),U=n(7901),F=n(99327),a=n(60177),O=n(37441),P=n(23593),A=n(48676),u=n(88834),m=n(99213),p=n(67575),v=n(59042),T=n(53719),C=n(55911),_=n(82798),E=n(86600),f=n(71997),g=n(76233),y=n(73955),b=n(86763),D=n(14870),w=n(23313),ee=n(52874),_e=n(62775);const ve=["addDeviceProfileStepper"],Ee=Ae=>({count:Ae}),$=Ae=>({label:Ae});function be(Ae,Pe){1&Ae&&e.\u0275\u0275element(0,"mat-progress-bar",42)}function Te(Ae,Pe){1&Ae&&e.\u0275\u0275element(0,"div",43)}function oe(Ae,Pe){1&Ae&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&Ae&&e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(1,1,"device-profile.device-profile-details"))}function R(Ae,Pe){1&Ae&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.name-required")," "))}function N(Ae,Pe){1&Ae&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.name-max-length")," "))}function Z(Ae,Pe){if(1&Ae&&(e.\u0275\u0275elementStart(0,"mat-option",44),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae){const Be=Pe.$implicit,Ke=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",Be),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,Ke.deviceProfileTypeTranslations.get(Be))," ")}}function Y(Ae,Pe){1&Ae&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.type-required")," "))}function ge(Ae,Pe){1&Ae&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&Ae&&e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(1,1,"device-profile.transport-configuration"))}function ce(Ae,Pe){if(1&Ae&&(e.\u0275\u0275elementStart(0,"mat-option",44),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae){const Be=Pe.$implicit,Ke=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",Be),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,Ke.deviceTransportTypeTranslations.get(Be))," ")}}function se(Ae,Pe){if(1&Ae&&(e.\u0275\u0275elementStart(0,"mat-hint"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae){const Be=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,Be.deviceTransportTypeHints.get(Be.transportConfigFormGroup.get("transportType").value))," ")}}function J(Ae,Pe){1&Ae&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ae&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.transport-type-required")," "))}function de(Ae,Pe){if(1&Ae&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&Ae){const Be=e.\u0275\u0275nextContext();e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(1,1,"device-profile.alarm-rules-with-count",e.\u0275\u0275pureFunction1(4,Ee,Be.alarmRulesFormGroup.get("alarms").value?Be.alarmRulesFormGroup.get("alarms").value.length:0)))}}function ye(Ae,Pe){1&Ae&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&Ae&&e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(1,1,"device-profile.device-provisioning"))}function re(Ae,Pe){if(1&Ae){const Be=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",45),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Be);const Xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Xe.previousStep())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&Ae){const Be=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,Be.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"action.back"))}}function ne(Ae,Pe){if(1&Ae){const Be=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",46),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Be);const Xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Xe.nextStep())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()}if(2&Ae){const Be=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,Be.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,6,"action.next-with-label",e.\u0275\u0275pureFunction1(9,$,e.\u0275\u0275pipeBind1(3,4,Be.getFormLabel(Be.selectedIndex+1)))))}}class ie extends h.m{constructor(Pe,Be,Ke,Xe,at,bt,Mt){super(Pe,Be,Xe),this.store=Pe,this.router=Be,this.data=Ke,this.dialogRef=Xe,this.breakpointObserver=at,this.deviceProfileService=bt,this.fb=Mt,this.selectedIndex=0,this.showNext=!0,this.entityType=G.ck,this.deviceProfileTypes=Object.values(V.IF),this.deviceProfileTypeTranslations=V.dx,this.deviceTransportTypeHints=V.dQ,this.deviceTransportTypes=Object.values(V.y0),this.deviceTransportTypeTranslations=V.Tk,this.serviceType=k.C0.TB_RULE_ENGINE,this.edgeRuleChainType=z.UR.EDGE,this.stepperOrientation=this.breakpointObserver.observe(L.zV["gt-sm"]).pipe((0,B.T)(({matches:ze})=>ze?"horizontal":"vertical")),this.stepperLabelPosition=this.breakpointObserver.observe(L.zV["gt-md"]).pipe((0,B.T)(({matches:ze})=>ze?"end":"bottom")),this.deviceProfileDetailsFormGroup=this.fb.group({name:[Ke.deviceProfileName,[c.Validators.required,c.Validators.maxLength(255)]],type:[V.IF.DEFAULT,[c.Validators.required]],image:[null,[]],defaultRuleChainId:[null,[]],defaultDashboardId:[null,[]],defaultQueueName:[null,[]],defaultEdgeRuleChainId:[null,[]],description:["",[]]}),this.transportConfigFormGroup=this.fb.group({transportType:[Ke.transportType?Ke.transportType:V.y0.DEFAULT,[c.Validators.required]],transportConfiguration:[(0,V.Z_)(V.y0.DEFAULT),[c.Validators.required]]}),this.transportConfigFormGroup.get("transportType").valueChanges.subscribe(()=>{this.deviceProfileTransportTypeChanged()}),this.alarmRulesFormGroup=this.fb.group({alarms:[null]}),this.provisionConfigFormGroup=this.fb.group({provisionConfiguration:[{type:V.kU.DISABLED},[c.Validators.required]]})}deviceProfileTransportTypeChanged(){const Pe=this.transportConfigFormGroup.get("transportType").value;this.transportConfigFormGroup.patchValue({transportConfiguration:(0,V.Z_)(Pe)})}cancel(){this.dialogRef.close(null)}previousStep(){this.addDeviceProfileStepper.previous()}nextStep(){this.selectedIndex<3?this.addDeviceProfileStepper.next():this.add()}selectedForm(){switch(this.selectedIndex){case 0:return this.deviceProfileDetailsFormGroup;case 1:return this.transportConfigFormGroup;case 2:return this.alarmRulesFormGroup;case 3:return this.provisionConfigFormGroup}}add(){if(this.allValid()){const Pe=this.provisionConfigFormGroup.get("provisionConfiguration").value,Be=Pe.provisionDeviceKey;delete Pe.provisionDeviceKey;const Ke={name:this.deviceProfileDetailsFormGroup.get("name").value,type:this.deviceProfileDetailsFormGroup.get("type").value,image:this.deviceProfileDetailsFormGroup.get("image").value,defaultQueueName:this.deviceProfileDetailsFormGroup.get("defaultQueueName").value,transportType:this.transportConfigFormGroup.get("transportType").value,provisionType:Pe.type,provisionDeviceKey:Be,description:this.deviceProfileDetailsFormGroup.get("description").value,profileData:{configuration:(0,V.IK)(V.IF.DEFAULT),transportConfiguration:this.transportConfigFormGroup.get("transportConfiguration").value,alarms:this.alarmRulesFormGroup.get("alarms").value,provisionConfiguration:Pe}};this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value&&(Ke.defaultRuleChainId=new K.p(this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value)),this.deviceProfileDetailsFormGroup.get("defaultDashboardId").value&&(Ke.defaultDashboardId=new Q.C(this.deviceProfileDetailsFormGroup.get("defaultDashboardId").value)),this.deviceProfileDetailsFormGroup.get("defaultEdgeRuleChainId").value&&(Ke.defaultEdgeRuleChainId=new K.p(this.deviceProfileDetailsFormGroup.get("defaultEdgeRuleChainId").value)),this.deviceProfileService.saveDeviceProfile((0,H.XU)(Ke)).subscribe(Xe=>{this.dialogRef.close(Xe)})}}getFormLabel(Pe){switch(Pe){case 0:return"device-profile.device-profile-details";case 1:return"device-profile.transport-configuration";case 2:return"device-profile.alarm-rules";case 3:return"device-profile.device-provisioning"}}changeStep(Pe){this.selectedIndex=Pe.selectedIndex,this.selectedIndex===this.maxStepperIndex?this.showNext=!1:this.showNext=!0}get maxStepperIndex(){return this.addDeviceProfileStepper?._steps?.length-1}allValid(){return!this.addDeviceProfileStepper.steps.find((Pe,Be)=>!!Pe.stepControl.invalid&&(Pe.interacted=!0,this.addDeviceProfileStepper.selectedIndex=Be,!0))}static{this.\u0275fac=function(Be){return new(Be||ie)(e.\u0275\u0275directiveInject(I.Store),e.\u0275\u0275directiveInject(U.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(F.BreakpointObserver),e.\u0275\u0275directiveInject(S.N),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["tb-add-device-profile-dialog"]],viewQuery:function(Be,Ke){if(1&Be&&e.\u0275\u0275viewQuery(ve,7),2&Be){let Xe;e.\u0275\u0275queryRefresh(Xe=e.\u0275\u0275loadQuery())&&(Ke.addDeviceProfileStepper=Xe.first)}},features:[e.\u0275\u0275ProvidersFeature([]),e.\u0275\u0275InheritDefinitionFeature],decls:85,vars:64,consts:[["addDeviceProfileStepper",""],["color","primary"],["translate",""],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"selectionChange","linear","labelPosition","orientation"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultDashboardId",3,"label"],["tb-hint",""],["formControlName","defaultQueueName",3,"queueType"],["labelText","device-profile.default-edge-rule-chain","formControlName","defaultEdgeRuleChainId",3,"ruleChainType"],[1,"mat-block","!hidden"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","image",1,"flex-1",3,"label"],["matInput","","formControlName","description","rows","2"],[3,"stepControl","optional"],[2,"padding-bottom","16px",3,"formGroup"],["formControlName","transportType","required",""],["formControlName","transportConfiguration","isAdd","true"],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"],["mat-dialog-actions","",2,"padding","0"],[1,"dialog-actions-row","flex","flex-1","flex-row","items-center","justify-end"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"disabled","click",4,"ngIf"],[2,"width","100%"],[1,"dialog-actions-row","flex","flex-1","flex-row","items-center","justify-end","gap-2"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["mat-stroked-button","",3,"click","disabled"],["mat-stroked-button","","color","primary",3,"click","disabled"]],template:function(Be,Ke){if(1&Be){const Xe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-toolbar",1)(1,"h2",2),e.\u0275\u0275text(2,"device-profile.add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",3)(4,"div",4),e.\u0275\u0275elementStart(5,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Xe),e.\u0275\u0275resetView(Ke.cancel())}),e.\u0275\u0275elementStart(6,"mat-icon",6),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,be,1,0,"mat-progress-bar",7),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275template(10,Te,1,0,"div",8),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementStart(12,"div",9)(13,"mat-horizontal-stepper",10,0),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275listener("selectionChange",function(bt){return e.\u0275\u0275restoreView(Xe),e.\u0275\u0275resetView(Ke.changeStep(bt))}),e.\u0275\u0275elementStart(17,"mat-step",11)(18,"form",12),e.\u0275\u0275template(19,oe,2,3,"ng-template",13),e.\u0275\u0275elementStart(20,"fieldset",14),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275elementStart(22,"mat-form-field",15)(23,"mat-label",2),e.\u0275\u0275text(24,"device-profile.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",16),e.\u0275\u0275template(26,R,3,3,"mat-error",17)(27,N,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"tb-rule-chain-autocomplete",18),e.\u0275\u0275elementStart(29,"tb-dashboard-autocomplete",19),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementStart(31,"span",20),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(34,"tb-queue-autocomplete",21),e.\u0275\u0275elementStart(35,"tb-rule-chain-autocomplete",22)(36,"span",20),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"mat-form-field",23)(40,"mat-label",2),e.\u0275\u0275text(41,"device-profile.type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"mat-select",24),e.\u0275\u0275template(43,Z,3,4,"mat-option",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(44,Y,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(45,"tb-gallery-image-input",26),e.\u0275\u0275pipe(46,"translate"),e.\u0275\u0275elementStart(47,"mat-form-field",15)(48,"mat-label",2),e.\u0275\u0275text(49,"device-profile.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(50,"textarea",27),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(51,"mat-step",28)(52,"form",29),e.\u0275\u0275template(53,ge,2,3,"ng-template",13),e.\u0275\u0275elementStart(54,"mat-form-field",15)(55,"mat-label",2),e.\u0275\u0275text(56,"device-profile.transport-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"mat-select",30),e.\u0275\u0275template(58,ce,3,4,"mat-option",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(59,se,3,3,"mat-hint",17)(60,J,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(61,"tb-device-profile-transport-configuration",31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"mat-step",28)(63,"form",29),e.\u0275\u0275template(64,de,2,6,"ng-template",13),e.\u0275\u0275element(65,"tb-device-profile-alarms",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(66,"mat-step",28)(67,"form",29),e.\u0275\u0275template(68,ye,2,3,"ng-template",13),e.\u0275\u0275element(69,"tb-device-profile-provision-configuration",33),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(70,"div",34)(71,"div",35),e.\u0275\u0275template(72,re,4,6,"button",36),e.\u0275\u0275element(73,"span",3),e.\u0275\u0275template(74,ne,5,11,"button",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(75,"mat-divider",38),e.\u0275\u0275elementStart(76,"div",39)(77,"button",40),e.\u0275\u0275pipe(78,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Xe),e.\u0275\u0275resetView(Ke.cancel())}),e.\u0275\u0275text(79),e.\u0275\u0275pipe(80,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"button",41),e.\u0275\u0275pipe(82,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Xe),e.\u0275\u0275resetView(Ke.add())}),e.\u0275\u0275text(83),e.\u0275\u0275pipe(84,"translate"),e.\u0275\u0275elementEnd()()()}2&Be&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("tb-help","deviceProfiles"),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,38,Ke.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(11,40,Ke.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("linear",!0)("labelPosition",e.\u0275\u0275pipeBind1(15,42,Ke.stepperLabelPosition))("orientation",e.\u0275\u0275pipeBind1(16,44,Ke.stepperOrientation)),e.\u0275\u0275advance(4),e.\u0275\u0275property("stepControl",Ke.deviceProfileDetailsFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",Ke.deviceProfileDetailsFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(21,46,Ke.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",Ke.deviceProfileDetailsFormGroup.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Ke.deviceProfileDetailsFormGroup.get("name").hasError("maxlength")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(30,48,"device-profile.mobile-dashboard")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,50,"device-profile.mobile-dashboard-hint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("queueType",Ke.serviceType),e.\u0275\u0275advance(),e.\u0275\u0275property("ruleChainType",Ke.edgeRuleChainType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(38,52,"device-profile.default-edge-rule-chain-hint")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",Ke.deviceProfileTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Ke.deviceProfileDetailsFormGroup.get("type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(46,54,"device-profile.image")),e.\u0275\u0275advance(6),e.\u0275\u0275property("stepControl",Ke.transportConfigFormGroup)("optional",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",Ke.transportConfigFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",Ke.deviceTransportTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Ke.transportConfigFormGroup.get("transportType").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Ke.transportConfigFormGroup.get("transportType").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("stepControl",Ke.alarmRulesFormGroup)("optional",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",Ke.alarmRulesFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("deviceProfileId",null),e.\u0275\u0275advance(),e.\u0275\u0275property("stepControl",Ke.provisionConfigFormGroup)("optional",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",Ke.provisionConfigFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Ke.selectedIndex>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Ke.showNext),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(78,56,Ke.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(80,58,"action.cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(82,60,Ke.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(84,62,"action.add")))},dependencies:[a.NgForOf,a.NgIf,O.HelpComponent,P.DashboardAutocompleteComponent,A.QueueAutocompleteComponent,u.MatButton,u.MatIconButton,m.MatIcon,p.MatProgressBar,v.MatInput,T.MatFormField,T.MatLabel,T.MatHint,T.MatError,C.MatToolbar,t.MatDialogActions,t.MatDialogContent,_.MatSelect,E.MatOption,f.MatDivider,g.MatStep,g.MatStepLabel,g.MatStepper,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,y.TranslateDirective,b.GalleryImageInputComponent,D.DeviceProfileTransportConfigurationComponent,w.DeviceProfileAlarmsComponent,ee.RuleChainAutocompleteComponent,_e.DeviceProfileProvisionConfigurationComponent,a.AsyncPipe,y.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%;display:grid}[_nghost-%COMP%]   .dialog-actions-row[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width: 599px){.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{max-height:75vh}}[_nghost-%COMP%]     .mat-mdc-dialog-content{display:flex;flex-direction:column;height:100%;padding:0!important}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal{overflow:hidden}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-wrapper{max-height:100%}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:680px;max-height:100%;width:100%;overflow-y:auto;scrollbar-gutter:stable}@media screen and (min-width: 960px){[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:500px}}']})}}},86486:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmDurationPredicateValueComponent:()=>A});var e=n(93953),t=n(89417),c=n(93064),h=n(5095),V=n(60177),S=n(88834),G=n(82765),K=n(59042),H=n(53719),k=n(82798),Q=n(86600),z=n(14823),L=n(99691),B=n(73955);function I(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,p.defaultValueRequiredError)," ")}}function U(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,p.defaultValueRangeError)," ")}}function F(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,p.defaultValueRangeError)," ")}}function a(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const p=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,p.defaultValuePatternError)," ")}}function O(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"mat-option",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const p=m.$implicit,v=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",p),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,v.dynamicValueSourceTypeTranslations.get(p))," ")}}function P(u,m){1&u&&(e.\u0275\u0275elementStart(0,"div",15)(1,"mat-checkbox",16),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&u&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"filter.inherit-owner")," "))}class A{set alarmConditionType(m){switch(m){case h.Vb.REPEATING:this.defaultValuePlaceholder="device-profile.condition-repeating-value-required",this.defaultValueRequiredError="device-profile.condition-repeating-value-range",this.defaultValueRangeError="device-profile.condition-repeating-value-range",this.defaultValuePatternError="device-profile.condition-repeating-value-pattern";break;case h.Vb.DURATION:this.defaultValuePlaceholder="device-profile.condition-duration-value",this.defaultValueRequiredError="device-profile.condition-duration-value-required",this.defaultValueRangeError="device-profile.condition-duration-value-range",this.defaultValuePatternError="device-profile.condition-duration-value-pattern"}}constructor(m){this.fb=m,this.inheritModeForSources=c.n3,this.defaultValuePlaceholder="",this.defaultValueRequiredError="",this.defaultValueRangeError="",this.defaultValuePatternError="",this.dynamicValueSourceTypes=(0,c.xm)(!1),this.dynamicValueSourceTypeTranslations=c.DP,this.dynamicMode=!1,this.inheritMode=!1,this.propagateChange=null}ngOnInit(){this.alarmDurationPredicateValueFormGroup=this.fb.group({defaultValue:[0,[t.Validators.required,t.Validators.min(1),t.Validators.max(2147483647),t.Validators.pattern("[0-9]*")]],dynamicValue:this.fb.group({sourceType:[null],sourceAttribute:[null],inherit:[!1]})}),this.alarmDurationPredicateValueFormGroup.get("dynamicValue").get("sourceType").valueChanges.subscribe(m=>{m||this.alarmDurationPredicateValueFormGroup.get("dynamicValue").get("sourceAttribute").patchValue(null,{emitEvent:!1}),this.updateShowInheritMode(m)}),this.alarmDurationPredicateValueFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(m){this.propagateChange=m}registerOnTouched(m){}setDisabledState(m){m?this.alarmDurationPredicateValueFormGroup.disable({emitEvent:!1}):this.alarmDurationPredicateValueFormGroup.enable({emitEvent:!1})}writeValue(m){this.alarmDurationPredicateValueFormGroup.patchValue({defaultValue:m?m.defaultValue:null,dynamicValue:{sourceType:m?.dynamicValue?m.dynamicValue.sourceType:null,sourceAttribute:m?.dynamicValue?m.dynamicValue.sourceAttribute:null,inherit:m?.dynamicValue?m.dynamicValue.inherit:null}},{emitEvent:!1}),this.updateShowInheritMode(this.alarmDurationPredicateValueFormGroup.get("dynamicValue").get("sourceType").value)}updateModel(){let m=null;this.alarmDurationPredicateValueFormGroup.valid&&(m=this.alarmDurationPredicateValueFormGroup.getRawValue(),m.dynamicValue&&(!m.dynamicValue.sourceType||!m.dynamicValue.sourceAttribute)&&(m.dynamicValue=null)),this.propagateChange(m)}updateShowInheritMode(m){this.inheritModeForSources.includes(m)?this.inheritMode=!0:(this.alarmDurationPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!1,{emitEvent:!1}),this.inheritMode=!1)}static{this.\u0275fac=function(p){return new(p||A)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["tb-alarm-duration-predicate-value"]],inputs:{alarmConditionType:"alarmConditionType"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>A),multi:!0}])],decls:28,vars:28,consts:[[1,"flex","flex-1","flex-row","items-center","justify-start","gap-2",3,"formGroup"],[1,"flex","flex-1","flex-col"],["subscriptSizing","dynamic",1,"mat-block"],["required","","type","number","matInput","","step","1","min","1","max","2147483647","formControlName","defaultValue",3,"placeholder"],[4,"ngIf"],["formGroupName","dynamicValue",1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"flex","max-w-40%","flex-full","flex-col"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["subscriptSizing","dynamic",1,"mat-block","source-attribute"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],["class","flex flex-col","style","padding-top: 6px",4,"ngIf"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"mat-elevation-z1","tb-mat-32",3,"click","matTooltip"],[1,"tb-mat-20"],[1,"flex","flex-col",2,"padding-top","6px"],["formControlName","inherit"]],template:function(p,v){1&p&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-form-field",2),e.\u0275\u0275element(3,"input",3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275template(5,I,3,3,"mat-error",4)(6,U,3,3,"mat-error",4)(7,F,3,3,"mat-error",4)(8,a,3,3,"mat-error",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",1)(10,"div",5)(11,"div",6)(12,"mat-form-field",2)(13,"mat-select",7),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementStart(15,"mat-option",8),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,O,3,4,"mat-option",9),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",1)(20,"mat-form-field",10),e.\u0275\u0275element(21,"input",11),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,P,4,3,"div",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"button",13),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275listener("click",function(){return v.dynamicMode=!v.dynamicMode}),e.\u0275\u0275elementStart(26,"tb-icon",14),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()()()),2&p&&(e.\u0275\u0275property("formGroup",v.alarmDurationPredicateValueFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",v.dynamicMode),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(4,18,v.defaultValuePlaceholder)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",v.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",v.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",v.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",v.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!v.dynamicMode),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(14,20,"filter.dynamic-source-type")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,22,"filter.no-dynamic-value")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",v.dynamicValueSourceTypes),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(22,24,"filter.source-attribute")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",v.inheritMode),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(25,26,v.dynamicMode?"filter.switch-to-default-value":"filter.switch-to-dynamic-value")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(v.dynamicMode?"mdi:numeric":"mdi:variable"))},dependencies:[V.NgForOf,V.NgIf,S.MatIconButton,G.MatCheckbox,K.MatInput,H.MatFormField,H.MatError,k.MatSelect,Q.MatOption,z.MatTooltip,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.MaxValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,L.TbIconComponent,B.TranslatePipe],encapsulation:2})}}},99907:(Re,X,n)=>{"use strict";n.d(X,{e:()=>B});var e=n(93953),t=n(89417),c=n(93064),h=n(60177),V=n(63950),S=n(59042),G=n(53719),K=n(82798),H=n(86600),k=n(9454),Q=n(73955);function z(I,U){if(1&I&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&I){const F=U.$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",F),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,a.dynamicValueSourceTypeTranslations.get(F))," ")}}function L(I,U){if(1&I&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"mat-form-field",7)(4,"mat-select",8),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementStart(6,"mat-option",9),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,z,3,4,"mat-option",10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",4)(11,"mat-form-field",11),e.\u0275\u0275element(12,"input",12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(14,"div",13),e.\u0275\u0275elementEnd()()),2&I){const F=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(5,6,"filter.dynamic-source-type")),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,8,"filter.no-dynamic-value")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",F.dynamicValueSourceTypes),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(13,10,"filter.source-attribute")),e.\u0275\u0275advance(2),e.\u0275\u0275property("tb-help-popup",F.helpId)}}class B{constructor(U){this.fb=U,this.dynamicValueSourceTypes=(0,c.xm)(!1),this.dynamicValueSourceTypeTranslations=c.DP,this.propagateChange=F=>{}}ngOnInit(){this.dynamicValue=this.fb.group({sourceType:[null,[]],sourceAttribute:[null]}),this.dynamicValue.get("sourceType").valueChanges.subscribe(U=>{U||this.dynamicValue.get("sourceAttribute").patchValue(null,{emitEvent:!1})}),this.dynamicValue.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(U){this.propagateChange=U}registerOnTouched(U){}writeValue(U){U&&this.dynamicValue.patchValue(U,{emitEvent:!1})}setDisabledState(U){this.disabled=U,this.disabled?this.dynamicValue.disable({emitEvent:!1}):this.dynamicValue.enable({emitEvent:!1})}updateModel(){this.propagateChange(this.dynamicValue.value)}static{this.\u0275fac=function(F){return new(F||B)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["tb-alarm-dynamic-value"]],inputs:{helpId:"helpId",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>B),multi:!0}])],decls:9,vars:4,consts:[[1,"device-profile-alarm","flex-1",2,"margin-bottom","26px",3,"formGroup"],[1,"flex","flex-1","flex-row","items-center","justify-start"],[1,"flex-1"],["matExpansionPanelContent",""],[1,"flex","flex-1","flex-col"],[1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"flex","max-w-40%","flex-full","flex-col"],[1,"mat-block"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"mat-block","source-attribute"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],[3,"tb-help-popup"]],template:function(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"div",1)(3,"mat-panel-title")(4,"div",1),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(7,"span",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,L,15,12,"ng-template",3),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275property("formGroup",a.dynamicValue),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,2,"filter.dynamic-value")," "))},dependencies:[h.NgForOf,V.HelpPopupComponent,S.MatInput,G.MatFormField,K.MatSelect,H.MatOption,k.MatExpansionPanel,k.MatExpansionPanelHeader,k.MatExpansionPanelTitle,k.MatExpansionPanelContent,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,Q.TranslatePipe],encapsulation:2})}}},90403:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmRuleConditionDialogComponent:()=>E});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(56542),S=n(93064),G=n(5095),K=n(53244),H=n(9310),k=n(7901),Q=n(73955),z=n(60177),L=n(88834),B=n(99213),I=n(67575),U=n(53719),F=n(55911),a=n(82798),O=n(13792),P=n(86486);function A(f,g){1&f&&e.\u0275\u0275element(0,"mat-progress-bar",20)}function u(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.alarmConditionTypeTranslation.get(y))," ")}}function m(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.condition-type-required")," "))}function p(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.timeUnitTranslations.get(y))," ")}}function v(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.condition-duration-time-unit-required")," "))}function T(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"div",25)(1,"mat-form-field",26)(2,"mat-select",27),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,p,3,4,"mat-option",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,v,3,3,"mat-error",15),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,3,"device-profile.condition-duration-time-unit")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",y.timeUnits),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.conditionFormGroup.get("spec.unit").hasError("required"))}}function C(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"tb-alarm-duration-predicate-value",23),e.\u0275\u0275template(2,T,6,5,"div",24),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("alarmConditionType",y.conditionFormGroup.get("spec.type").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.conditionFormGroup.get("spec.type").value==y.AlarmConditionType.DURATION)}}function _(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,y.isLoading$)||y.conditionFormGroup.invalid||!y.conditionFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"action.save")," ")}}class E extends V.m{constructor(g,y,b,D,w,ee,_e){super(g,y,w),this.store=g,this.router=y,this.data=b,this.errorStateMatcher=D,this.dialogRef=w,this.fb=ee,this.translate=_e,this.timeUnits=Object.values(K.yr),this.timeUnitTranslations=K.L9,this.alarmConditionTypes=Object.values(G.Vb),this.AlarmConditionType=G.Vb,this.alarmConditionTypeTranslation=G.cP,this.readonly=this.data.readonly,this.condition=this.data.condition,this.entityId=this.data.entityId,this.submitted=!1,this.conditionFormGroup=this.fb.group({keyFilters:[(0,S.c$)(this.condition?.condition),h.Validators.required],spec:this.fb.group({type:[G.Vb.SIMPLE,h.Validators.required],unit:[null,h.Validators.required],predicate:[null,h.Validators.required]})}),this.conditionFormGroup.patchValue({spec:this.condition?.spec}),this.conditionFormGroup.get("spec.type").valueChanges.subscribe(ve=>{this.updateValidators(ve,!0,!0)}),this.readonly?this.conditionFormGroup.disable({emitEvent:!1}):this.updateValidators(this.condition?.spec?.type)}ngOnInit(){}isErrorState(g,y){const b=this.errorStateMatcher.isErrorState(g,y),D=!!(g&&g.invalid&&this.submitted);return b||D}updateValidators(g,y=!1,b=!1){switch(g){case G.Vb.DURATION:this.conditionFormGroup.get("spec.unit").enable(),this.conditionFormGroup.get("spec.predicate").enable(),y&&this.conditionFormGroup.get("spec").patchValue({predicate:null});break;case G.Vb.REPEATING:this.conditionFormGroup.get("spec.predicate").enable(),this.conditionFormGroup.get("spec.unit").disable(),y&&this.conditionFormGroup.get("spec").patchValue({unit:null,predicate:null});break;case G.Vb.SIMPLE:this.conditionFormGroup.get("spec.unit").disable(),this.conditionFormGroup.get("spec.predicate").disable(),y&&this.conditionFormGroup.get("spec").patchValue({unit:null,predicate:null})}this.conditionFormGroup.get("spec.predicate").updateValueAndValidity({emitEvent:b}),this.conditionFormGroup.get("spec.unit").updateValueAndValidity({emitEvent:b})}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.condition={condition:(0,S.oN)(this.conditionFormGroup.get("keyFilters").value),spec:this.conditionFormGroup.get("spec").value},this.dialogRef.close(this.condition)}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(k.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder),e.\u0275\u0275directiveInject(Q.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-alarm-rule-condition-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:E}]),e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:24,consts:[[2,"width","900px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"flex","flex-1","flex-col"],["formControlName","keyFilters",3,"displayUserParameters","allowUserDynamicSource","telemetryKeysOnly","entityId"],["formGroupName","spec",2,"margin-top","1em"],["hideRequiredMarker","",1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","flex flex-row xs:flex-col gt-xs:gap-4",4,"ngIf"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],[3,"value"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-4"],["formControlName","predicate",1,"flex","flex-1","flex-row",3,"alarmConditionType"],["class","max-w-23% flex-full",4,"ngIf"],[1,"max-w-23%","flex-full"],["subscriptSizing","dynamic",1,"mat-block"],["formControlName","unit","required","",3,"placeholder"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(y,b){1&y&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return b.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return b.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,A,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",6)(12,"fieldset",7),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementStart(14,"div",8),e.\u0275\u0275element(15,"tb-key-filter-list",9),e.\u0275\u0275elementStart(16,"section",10)(17,"mat-form-field",11)(18,"mat-label",12),e.\u0275\u0275text(19,"device-profile.condition-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-select",13),e.\u0275\u0275template(21,u,3,4,"mat-option",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,m,3,3,"mat-error",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,C,3,2,"div",16),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(24,"div",17)(25,"button",18),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275listener("click",function(){return b.cancel()}),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,_,4,6,"button",19),e.\u0275\u0275elementEnd()()),2&y&&(e.\u0275\u0275property("formGroup",b.conditionFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,14,b.readonly?"device-profile.alarm-rule-condition":"device-profile.edit-alarm-rule-condition")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,16,b.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(13,18,b.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("displayUserParameters",!1)("allowUserDynamicSource",!1)("telemetryKeysOnly",!0)("entityId",b.entityId),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",b.alarmConditionTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.conditionFormGroup.get("spec.type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.conditionFormGroup.get("spec.type").value!=b.AlarmConditionType.SIMPLE),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,20,b.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,22,b.readonly?"action.close":"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!b.readonly))},dependencies:[z.NgForOf,z.NgIf,L.MatButton,L.MatIconButton,B.MatIcon,I.MatProgressBar,U.MatFormField,U.MatLabel,U.MatError,F.MatToolbar,c.MatDialogActions,c.MatDialogContent,a.MatSelect,t.MatOption,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,h.FormGroupName,Q.TranslateDirective,O.KeyFilterListComponent,P.AlarmDurationPredicateValueComponent,z.AsyncPipe,Q.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}']})}}},56232:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmRuleConditionComponent:()=>U});var e=n(93953),t=n(89417),c=n(27997),h=n(5095),V=n(90403),S=n(53244),G=n(93064),K=n(34006),H=n(73955),k=n(60177),Q=n(88834),z=n(99213),L=n(14823),B=n(66317);function I(F,a){if(1&F&&e.\u0275\u0275element(0,"span",6),2&F){const O=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("disabled",O.disabled),e.\u0275\u0275property("innerHTML",O.specText,e.\u0275\u0275sanitizeHtml)}}class U{constructor(a,O,P){this.dialog=a,this.fb=O,this.translate=P,this.specText="",this.propagateChange=A=>{}}registerOnChange(a){this.propagateChange=a}registerOnTouched(a){}ngOnInit(){this.alarmRuleConditionFormGroup=this.fb.group({condition:[null,t.Validators.required],spec:[null,t.Validators.required]})}setDisabledState(a){this.disabled=a,this.disabled?this.alarmRuleConditionFormGroup.disable({emitEvent:!1}):this.alarmRuleConditionFormGroup.enable({emitEvent:!1})}writeValue(a){this.modelValue=a,null!==this.modelValue&&!(0,c.f1)(this.modelValue?.spec?.predicate)&&(this.modelValue=Object.assign(this.modelValue,{spec:{type:h.Vb.SIMPLE}})),this.updateConditionInfo()}conditionSet(){return this.modelValue&&this.modelValue.condition.length}validate(a){return this.conditionSet()?null:{alarmRuleCondition:{valid:!1}}}openFilterDialog(a){a&&a.stopPropagation(),this.dialog.open(V.AlarmRuleConditionDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,condition:this.disabled?this.modelValue:(0,c.Go)(this.modelValue),entityId:this.deviceProfileId}}).afterClosed().subscribe(O=>{O&&(this.modelValue=O,this.updateModel())})}updateConditionInfo(){this.alarmRuleConditionFormGroup.patchValue({condition:this.modelValue?.condition,spec:this.modelValue?.spec}),this.updateSpecText()}updateSpecText(){if(this.specText="",this.modelValue&&this.modelValue.spec){const a=this.modelValue.spec;switch(a.type){case h.Vb.SIMPLE:break;case h.Vb.DURATION:let O="";switch(a.unit){case S.yr.SECONDS:O=this.translate.instant("timewindow.seconds",{seconds:a.predicate.defaultValue});break;case S.yr.MINUTES:O=this.translate.instant("timewindow.minutes",{minutes:a.predicate.defaultValue});break;case S.yr.HOURS:O=this.translate.instant("timewindow.hours",{hours:a.predicate.defaultValue});break;case S.yr.DAYS:O=this.translate.instant("timewindow.days",{days:a.predicate.defaultValue})}if(a.predicate.dynamicValue&&a.predicate.dynamicValue.sourceAttribute){const P=this.translate.instant(G.DP.get(a.predicate.dynamicValue.sourceType));this.specText=this.translate.instant("device-profile.condition-during-dynamic",{during:O,attribute:`${P}.${a.predicate.dynamicValue.sourceAttribute}`})}else this.specText=this.translate.instant("device-profile.condition-during",{during:O});break;case h.Vb.REPEATING:if(a.predicate.dynamicValue&&a.predicate.dynamicValue.sourceAttribute){const P=this.translate.instant(G.DP.get(a.predicate.dynamicValue.sourceType));this.specText=this.translate.instant("device-profile.condition-repeat-times-dynamic",{count:a.predicate.defaultValue,attribute:`${P}.${a.predicate.dynamicValue.sourceAttribute}`})}else this.specText=this.translate.instant("device-profile.condition-repeat-times",{count:a.predicate.defaultValue})}}}updateModel(){this.updateConditionInfo(),this.propagateChange(this.modelValue)}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(K.MatDialog),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(H.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-alarm-rule-condition"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>U),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>U),multi:!0}])],decls:12,vars:14,consts:[[1,"flex","flex-row","items-center","justify-start",2,"min-width","0",3,"click","formGroup"],[1,"tb-alarm-rule-condition","title"],[1,"tb-alarm-rule-condition","flex","flex-1","flex-col","items-stretch","justify-center"],["formControlName","condition","required","",3,"nowrap","addFilterPrompt"],["class","tb-alarm-rule-condition-spec",3,"disabled","innerHTML",4,"ngIf"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"click","color","matTooltip"],[1,"tb-alarm-rule-condition-spec",3,"innerHTML"]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("click",function(u){return P.openFilterDialog(u)}),e.\u0275\u0275elementStart(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275element(5,"tb-filter-text",3),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275template(7,I,1,3,"span",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",5),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275listener("click",function(u){return P.openFilterDialog(u)}),e.\u0275\u0275elementStart(10,"mat-icon"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()),2&O&&(e.\u0275\u0275property("formGroup",P.alarmRuleConditionFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,8,"device-profile.condition")+": "),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("addFilterPrompt",e.\u0275\u0275pipeBind1(6,10,"device-profile.enter-alarm-rule-condition-prompt")),e.\u0275\u0275property("nowrap",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",P.specText),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(9,12,P.disabled?"action.view":"action.edit")),e.\u0275\u0275property("color",P.conditionSet()?"primary":"warn"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(P.disabled?"visibility":P.conditionSet()?"edit":"add"))},dependencies:[k.NgIf,Q.MatIconButton,z.MatIcon,L.MatTooltip,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,B.FilterTextComponent,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a.mat-mdc-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   a.mat-mdc-button[_ngcontent-%COMP%]:focus{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]{cursor:pointer;min-width:0}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]   .tb-alarm-rule-condition-spec[_ngcontent-%COMP%]{opacity:.7;padding:4px}[_nghost-%COMP%]   .tb-alarm-rule-condition.title[_ngcontent-%COMP%]{padding:4px;opacity:.7;overflow:visible}[_nghost-%COMP%]     .tb-alarm-rule-condition .tb-filter-text{max-height:200px}']})}}},13768:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmRuleComponent:()=>P});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(36148),S=n(57125),G=n(15673),K=n(34006),H=n(60177),k=n(23593),Q=n(88834),z=n(99213),L=n(14823),B=n(56232),I=n(3826),U=n(73955);function F(A,u){if(1&A){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275listener("click",function(v){e.\u0275\u0275restoreView(m);const T=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(T.openEditDetailsDialog(v))}),e.\u0275\u0275elementEnd()}if(2&A){const m=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("innerHTML",m.alarmDetailsText,e.\u0275\u0275sanitizeHtml)}}function a(A,u){if(1&A){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"span",6),e.\u0275\u0275listener("click",function(v){e.\u0275\u0275restoreView(m);const T=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(T.openEditDetailsDialog(v))}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,F,1,1,"span",7),e.\u0275\u0275elementStart(5,"button",8),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(v){e.\u0275\u0275restoreView(m);const T=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(T.openEditDetailsDialog(v))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()()}if(2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"device-profile.alarm-rule-additional-info")+": "," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.alarmRuleFormGroup.get("alarmDetails").value),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,6,m.disabled?"action.view":"action.edit")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(m.disabled?"visibility":m.alarmRuleFormGroup.get("alarmDetails").value?"edit":"add")}}function O(A,u){1&A&&(e.\u0275\u0275elementStart(0,"div",10)(1,"span",11),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"tb-dashboard-autocomplete",12),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementStart(6,"span",13),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()()()),2&A&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"device-profile.alarm-rule-mobile-dashboard")+": "," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(5,5,"device-profile.alarm-rule-no-mobile-dashboard")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,7,"device-profile.alarm-rule-mobile-dashboard-hint")))}class P{get required(){return this.requiredValue}set required(u){this.requiredValue=(0,c.coerceBooleanProperty)(u)}constructor(u,m,p){this.dialog=u,this.utils=m,this.fb=p,this.expandAlarmDetails=!1,this.propagateChange=v=>{}}registerOnChange(u){this.propagateChange=u}registerOnTouched(u){}ngOnInit(){this.alarmRuleFormGroup=this.fb.group({condition:[null,[t.Validators.required]],schedule:[null],alarmDetails:[null],dashboardId:[null]}),this.alarmRuleFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(u){this.disabled=u,this.disabled?this.alarmRuleFormGroup.disable({emitEvent:!1}):this.alarmRuleFormGroup.enable({emitEvent:!1})}writeValue(u){this.modelValue=u;const m=this.modelValue?{...this.modelValue,dashboardId:this.modelValue.dashboardId?.id}:null;this.alarmRuleFormGroup.reset(m||void 0,{emitEvent:!1})}openEditDetailsDialog(u){u&&u.stopPropagation(),this.dialog.open(V.EditAlarmDetailsDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmDetails:this.alarmRuleFormGroup.get("alarmDetails").value,readonly:this.disabled}}).afterClosed().subscribe(m=>{(0,h.f1)(m)&&this.alarmRuleFormGroup.patchValue({alarmDetails:m})})}validate(u){return!this.required&&!this.modelValue||this.alarmRuleFormGroup.valid?null:{alarmRule:{valid:!1}}}get alarmDetailsText(){const u=this.alarmRuleFormGroup.get("alarmDetails").value;return this.utils.customTranslation(u,u)}updateModel(){const u=this.alarmRuleFormGroup.value;this.modelValue&&(this.modelValue={...this.modelValue,...u,dashboardId:u.dashboardId?new S.C(u.dashboardId):null},this.propagateChange(this.modelValue))}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(K.MatDialog),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-alarm-rule"]],inputs:{disabled:"disabled",required:"required",deviceProfileId:"deviceProfileId"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>P),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>P),multi:!0}])],decls:5,vars:4,consts:[[1,"flex","flex-col",3,"formGroup"],["formControlName","condition",3,"deviceProfileId"],["formControlName","schedule"],["class","flex flex-row items-center justify-start",4,"ngIf"],["class","flex flex-col items-start justify-start gt-sm:flex-row gt-sm:items-center",4,"ngIf"],[1,"flex","flex-row","items-center","justify-start"],[1,"tb-alarm-rule-details","title",3,"click"],["class","tb-alarm-rule-details",3,"innerHTML","click",4,"ngIf"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"tb-alarm-rule-details",3,"click","innerHTML"],[1,"flex","flex-col","items-start","justify-start","gt-sm:flex-row","gt-sm:items-center"],[1,"tb-alarm-rule-dashboard","title"],["label","","formControlName","dashboardId",1,"tb-alarm-rule-dashboard","dashboard",3,"placeholder"],["tb-hint",""]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"tb-alarm-rule-condition",1)(2,"tb-alarm-schedule-info",2),e.\u0275\u0275template(3,a,9,8,"div",3)(4,O,9,9,"div",4),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275property("formGroup",p.alarmRuleFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("deviceProfileId",p.deviceProfileId),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!p.disabled||p.alarmRuleFormGroup.get("alarmDetails").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!p.disabled||p.alarmRuleFormGroup.get("dashboardId").value))},dependencies:[H.NgIf,k.DashboardAutocompleteComponent,Q.MatIconButton,z.MatIcon,L.MatTooltip,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,B.AlarmRuleConditionComponent,I.AlarmScheduleInfoComponent,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{min-width:0}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .tb-alarm-rule-details[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-alarm-rule-dashboard[_ngcontent-%COMP%]{padding:4px}[_nghost-%COMP%]   .tb-alarm-rule-details.title[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-alarm-rule-dashboard.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}[_nghost-%COMP%]   .tb-alarm-rule-details[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}[_nghost-%COMP%]   .tb-alarm-rule-dashboard.dashboard[_ngcontent-%COMP%]{width:100%;max-width:400px}']})}}},47690:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmScheduleDialogComponent:()=>a});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(15673),S=n(9310),G=n(7901),K=n(89417),H=n(73955),k=n(60177),Q=n(88834),z=n(99213),L=n(67575),B=n(55911),I=n(34467);function U(O,P){1&O&&e.\u0275\u0275element(0,"mat-progress-bar",11)}function F(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,A.isLoading$)||A.alarmScheduleFormGroup.invalid||!A.alarmScheduleFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"action.save")," ")}}class a extends h.m{constructor(P,A,u,m,p,v,T,C){super(P,A,p),this.store=P,this.router=A,this.data=u,this.errorStateMatcher=m,this.dialogRef=p,this.fb=v,this.utils=T,this.translate=C,this.readonly=this.data.readonly,this.alarmSchedule=this.data.alarmSchedule,this.submitted=!1,this.alarmScheduleFormGroup=this.fb.group({alarmSchedule:[this.alarmSchedule]}),this.readonly&&this.alarmScheduleFormGroup.disable({emitEvent:!1})}ngOnInit(){}isErrorState(P,A){const u=this.errorStateMatcher.isErrorState(P,A),m=!!(P&&P.invalid&&this.submitted);return u||m}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.alarmSchedule=this.alarmScheduleFormGroup.get("alarmSchedule").value,this.dialogRef.close(this.alarmSchedule)}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(K.UntypedFormBuilder),e.\u0275\u0275directiveInject(V.T),e.\u0275\u0275directiveInject(H.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-alarm-schedule-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:a}]),e.\u0275\u0275InheritDefinitionFeature],decls:19,vars:14,consts:[[2,"width","900px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["formControlName","alarmSchedule"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return u.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,U,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",6),e.\u0275\u0275element(12,"tb-alarm-schedule",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8)(14,"button",9),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,F,4,6,"button",10),e.\u0275\u0275elementEnd()()),2&A&&(e.\u0275\u0275property("formGroup",u.alarmScheduleFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,u.readonly?"device-profile.schedule":"device-profile.edit-schedule")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,8,u.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,10,u.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,u.readonly?"action.close":"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!u.readonly))},dependencies:[k.NgIf,Q.MatButton,Q.MatIconButton,z.MatIcon,L.MatProgressBar,B.MatToolbar,c.MatDialogActions,c.MatDialogContent,K.\u0275NgNoValidate,K.NgControlStatus,K.NgControlStatusGroup,K.FormGroupDirective,K.FormControlName,I.AlarmScheduleComponent,k.AsyncPipe,H.TranslatePipe],encapsulation:2})}}},3826:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmScheduleInfoComponent:()=>Q});var e=n(93953),t=n(89417),c=n(5095),h=n(47690),V=n(27997),S=n(34006),G=n(73955),K=n(88834),H=n(99213),k=n(14823);class Q{constructor(L,B,I){this.dialog=L,this.translate=B,this.cd=I,this.scheduleText="",this.propagateChange=U=>{}}ngOnInit(){}registerOnChange(L){this.propagateChange=L}registerOnTouched(L){}setDisabledState(L){this.disabled=L}writeValue(L){this.modelValue=L,this.updateScheduleText()}updateScheduleText(){let L=this.modelValue;switch((0,V.f1)(L)||(L={type:c.JB.ANY_TIME}),this.scheduleText="",L.type){case c.JB.ANY_TIME:this.scheduleText=this.translate.instant("device-profile.schedule-any-time");break;case c.JB.SPECIFIC_TIME:for(const B of L.daysOfWeek)this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(c.WU[B-1]);this.scheduleText+=" <b>"+(0,c.R6)((0,c._k)(L.startsOn),(0,c._k)(L.endsOn))+"</b>";break;case c.JB.CUSTOM:for(const B of L.items)B.enabled&&(this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(c.WU[B.dayOfWeek-1]),this.scheduleText+=" <b>"+(0,c.R6)((0,c._k)(B.startsOn),(0,c._k)(B.endsOn))+"</b>")}}openScheduleDialog(L){L&&L.stopPropagation(),this.dialog.open(h.AlarmScheduleDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,alarmSchedule:this.disabled?this.modelValue:(0,V.Go)(this.modelValue)}}).afterClosed().subscribe(B=>{B&&(this.modelValue=B,this.propagateChange(this.modelValue),this.updateScheduleText(),this.cd.detectChanges())})}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(S.MatDialog),e.\u0275\u0275directiveInject(G.TranslateService),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-alarm-schedule-info"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Q),multi:!0}])],decls:9,vars:8,consts:[[1,"flex","flex-row","items-center","justify-start",2,"min-width","0"],[1,"tb-alarm-rule-schedule","title",3,"click"],[1,"tb-alarm-rule-schedule",3,"click","innerHTML"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span",1),e.\u0275\u0275listener("click",function(F){return I.openScheduleDialog(F)}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",2),e.\u0275\u0275listener("click",function(F){return I.openScheduleDialog(F)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(F){return I.openScheduleDialog(F)}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()()),2&B&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"device-profile.schedule")+": "),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",I.scheduleText,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,6,I.disabled?"action.view":"action.edit")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(I.disabled?"visibility":"edit"))},dependencies:[K.MatIconButton,H.MatIcon,k.MatTooltip,G.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a.mat-mdc-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   a.mat-mdc-button[_ngcontent-%COMP%]:focus{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-schedule[_ngcontent-%COMP%]{padding:4px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-alarm-rule-schedule.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}']})}}},34467:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AlarmScheduleComponent:()=>v});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(53244),S=n(60177),G=n(50931),K=n(34522),H=n(82765),k=n(59042),Q=n(53719),z=n(82798),L=n(86600),B=n(39604),I=n(73955),U=n(99907);function F(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T){const _=C.$implicit,E=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",_),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,E.alarmScheduleTypeTranslate.get(_))," ")}}function a(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.schedule-type-required")," "))}function O(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"mat-checkbox",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T){const _=C.$implicit,E=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formControl",E.weeklyRepeatControl(_)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,E.dayOfWeekTranslationsArray[_])," ")}}function P(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"mat-checkbox",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T){const _=C.$implicit,E=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("formControl",E.weeklyRepeatControl(_)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,E.dayOfWeekTranslationsArray[_])," ")}}function A(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275element(1,"tb-alarm-dynamic-value",9),e.\u0275\u0275elementStart(2,"div",10),e.\u0275\u0275text(3,"device-profile.schedule-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",11)(5,"div",12),e.\u0275\u0275template(6,O,3,4,"mat-checkbox",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",12),e.\u0275\u0275template(8,P,3,4,"mat-checkbox",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"tb-error",14),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementStart(11,"div",10),e.\u0275\u0275text(12,"device-profile.schedule-time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",15)(14,"div",16)(15,"mat-form-field",17)(16,"mat-label",18),e.\u0275\u0275text(17,"device-profile.schedule-time-from"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"mat-datetimepicker-toggle",19)(19,"mat-datetimepicker",20,0)(21,"input",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-form-field",17)(23,"mat-label",18),e.\u0275\u0275text(24,"device-profile.schedule-time-to"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"mat-datetimepicker-toggle",19)(26,"mat-datetimepicker",20,1)(28,"input",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",23),e.\u0275\u0275element(30,"div",24),e.\u0275\u0275elementEnd()()()),2&T){const _=e.\u0275\u0275reference(20),E=e.\u0275\u0275reference(27),f=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",f.firstRowDays),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",f.secondRowDays),e.\u0275\u0275advance(),e.\u0275\u0275property("error",f.alarmScheduleForm.get("daysOfWeek").hasError("dayOfWeeks")?e.\u0275\u0275pipeBind1(10,8,"device-profile.schedule-days-of-week-required"):""),e.\u0275\u0275advance(9),e.\u0275\u0275property("for",_),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",_),e.\u0275\u0275advance(4),e.\u0275\u0275property("for",E),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",E),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",f.getSchedulerRangeText(f.alarmScheduleForm),e.\u0275\u0275sanitizeHtml)}}function u(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",28)(1,"div",29)(2,"mat-checkbox",30),e.\u0275\u0275listener("change",function(f){const g=e.\u0275\u0275restoreView(_).$implicit,y=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(y.changeCustomScheduler(f,g))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",31)(6,"mat-form-field",32)(7,"mat-label",18),e.\u0275\u0275text(8,"device-profile.schedule-time-from"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"mat-datetimepicker-toggle",19)(10,"mat-datetimepicker",20,0)(12,"input",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",32)(14,"mat-label",18),e.\u0275\u0275text(15,"device-profile.schedule-time-to"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"mat-datetimepicker-toggle",19)(17,"mat-datetimepicker",20,1)(19,"input",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(20,"div",33),e.\u0275\u0275elementEnd()()}if(2&T){const _=C.$implicit,E=e.\u0275\u0275reference(11),f=e.\u0275\u0275reference(18),g=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",""+_),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,7,g.dayOfWeekTranslationsArray[_])," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("for",E),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",E),e.\u0275\u0275advance(4),e.\u0275\u0275property("for",f),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDatetimepicker",f),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",g.getSchedulerRangeText(g.itemsSchedulerForm.at(_)),e.\u0275\u0275sanitizeHtml)}}function m(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275element(1,"tb-alarm-dynamic-value",26),e.\u0275\u0275elementStart(2,"div",10),e.\u0275\u0275text(3,"device-profile.schedule-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,u,21,9,"div",27),e.\u0275\u0275element(5,"tb-error",14),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()),2&T){const _=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",_.allDays),e.\u0275\u0275advance(),e.\u0275\u0275property("error",_.alarmScheduleForm.get("items").hasError("dayOfWeeks")?e.\u0275\u0275pipeBind1(6,2,"device-profile.schedule-days-of-week-required"):"")}}function p(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"tb-timezone-select",8),e.\u0275\u0275template(2,A,31,10,"section",6)(3,m,7,4,"section",6),e.\u0275\u0275elementEnd()),2&T){const _=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.alarmScheduleForm.get("type").value===_.alarmScheduleType.SPECIFIC_TIME),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.alarmScheduleForm.get("type").value===_.alarmScheduleType.CUSTOM)}}class v{constructor(C){this.fb=C,this.alarmScheduleTypes=Object.keys(c.JB),this.alarmScheduleType=c.JB,this.alarmScheduleTypeTranslate=c.MR,this.dayOfWeekTranslationsArray=c.WU,this.allDays=Array(7).fill(0).map((_,E)=>E),this.firstRowDays=Array(4).fill(0).map((_,E)=>E),this.secondRowDays=Array(3).fill(0).map((_,E)=>E+4),this.defaultItems=Array.from({length:7},(_,E)=>({enabled:!0,dayOfWeek:E+1})),this.propagateChange=_=>{}}ngOnInit(){this.alarmScheduleForm=this.fb.group({type:[c.JB.ANY_TIME,t.Validators.required],timezone:[null,t.Validators.required],daysOfWeek:this.fb.array(new Array(7).fill(!1),this.validateDayOfWeeks),startsOn:[0,t.Validators.required],endsOn:[0,t.Validators.required],items:this.fb.array(Array.from({length:7},(C,_)=>this.defaultItemsScheduler(_)),this.validateItems),dynamicValue:[null]}),this.alarmScheduleForm.get("type").valueChanges.subscribe(C=>{const _=(0,V.VF)();this.alarmScheduleForm.reset({type:C,items:this.defaultItems,timezone:_},{emitEvent:!1}),this.updateValidators(C,!0),this.alarmScheduleForm.updateValueAndValidity()}),this.alarmScheduleForm.valueChanges.subscribe(()=>{this.updateModel()})}validateDayOfWeeks(C){const _=C.value;return _&&_.length&&_.find(E=>!0===E)?null:{dayOfWeeks:!0}}validateItems(C){const _=C.value;return _&&_.length&&_.find(E=>!0===E.enabled)?null:{dayOfWeeks:!0}}registerOnChange(C){this.propagateChange=C}registerOnTouched(C){}setDisabledState(C){this.disabled=C,this.disabled?this.alarmScheduleForm.disable({emitEvent:!1}):this.updateValidators(this.alarmScheduleForm.get("type").value)}writeValue(C){switch(this.modelValue=C,(0,h.f1)(this.modelValue)||(this.modelValue={type:c.JB.ANY_TIME}),this.modelValue.type){case c.JB.SPECIFIC_TIME:let _=new Array(7).fill(!1);(0,h.O9)(this.modelValue.daysOfWeek)&&(_=_.map((E,f)=>this.modelValue.daysOfWeek.indexOf(f+1)>-1)),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,daysOfWeek:_,startsOn:(0,c._k)(this.modelValue.startsOn),endsOn:(0,c._k)(this.modelValue.endsOn),dynamicValue:this.modelValue.dynamicValue},{emitEvent:!1});break;case c.JB.CUSTOM:if(this.modelValue.items){const E=[];this.modelValue.items.sort((f,g)=>f.dayOfWeek-g.dayOfWeek).forEach((f,g)=>{this.disabledSelectedTime(f.enabled,g),E.push({enabled:f.enabled,startsOn:(0,c._k)(f.startsOn),endsOn:(0,c._k)(f.endsOn)})}),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,items:E,dynamicValue:this.modelValue.dynamicValue},{emitEvent:!1})}break;default:this.alarmScheduleForm.patchValue(this.modelValue||void 0,{emitEvent:!1})}this.updateValidators(this.modelValue.type)}validate(C){return this.alarmScheduleForm.valid?null:{alarmScheduler:{valid:!1}}}weeklyRepeatControl(C){return this.alarmScheduleForm.get("daysOfWeek").at(C)}updateValidators(C,_=!1){switch(C){case c.JB.ANY_TIME:this.alarmScheduleForm.get("timezone").disable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case c.JB.SPECIFIC_TIME:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").enable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case c.JB.CUSTOM:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),_&&this.alarmScheduleForm.get("items").enable({emitEvent:!1})}}updateModel(){const C=this.alarmScheduleForm.value;this.modelValue&&((0,h.O9)(C.daysOfWeek)&&(C.daysOfWeek=C.daysOfWeek.map((_,E)=>_?E+1:null).filter(_=>!!_)),(0,h.O9)(C.startsOn)&&0!==C.startsOn&&(C.startsOn=(0,c.e7)(C.startsOn)),(0,h.O9)(C.endsOn)&&0!==C.endsOn&&(C.endsOn=(0,c.e7)(C.endsOn)),(0,h.O9)(C.items)&&(C.items=this.alarmScheduleForm.getRawValue().items,C.items=C.items.map(_=>({..._,startsOn:(0,c.e7)(_.startsOn),endsOn:(0,c.e7)(_.endsOn)}))),this.modelValue=C,this.propagateChange(this.modelValue))}defaultItemsScheduler(C){return this.fb.group({enabled:[!0],dayOfWeek:[C+1],startsOn:[0,t.Validators.required],endsOn:[0,t.Validators.required]})}changeCustomScheduler(C,_){const E=C.checked;this.disabledSelectedTime(E,_,!0)}disabledSelectedTime(C,_,E=!1){C?(this.itemsSchedulerForm.at(_).get("startsOn").enable({emitEvent:!1}),this.itemsSchedulerForm.at(_).get("endsOn").enable({emitEvent:E})):(this.itemsSchedulerForm.at(_).get("startsOn").disable({emitEvent:!1}),this.itemsSchedulerForm.at(_).get("endsOn").disable({emitEvent:E}))}getSchedulerRangeText(C){return(0,c.R6)(C.get("startsOn").value,C.get("endsOn").value)}get itemsSchedulerForm(){return this.alarmScheduleForm.get("items")}static{this.\u0275fac=function(_){return new(_||v)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["tb-alarm-schedule"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>v),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>v),multi:!0}])],decls:7,vars:7,consts:[["startTimePicker",""],["endTimePicker",""],[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["userTimezoneByDefault","","required","","formControlName","timezone"],["formControlName","dynamicValue","helpId","device-profile/alarm_specific_schedule_format"],["translate","",1,"tb-small",2,"margin-bottom","0.5em"],[1,"flex","flex-col","gap-2","gt-md:flex-row"],[1,"flex","flex-row","gap-2"],[3,"formControl",4,"ngFor","ngForOf"],[2,"display","block",3,"error"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-2"],[1,"flex","flex-row","gap-2","gt-md:flex-1"],[1,"flex-1","sm:min-w-37.5","sm:max-w-37.5","sm:basis-37.5","md:min-w-37.5","md:max-w-37.5","md:basis-37.5"],["translate",""],["matPrefix","",3,"for"],["type","time","openOnFocus","true"],["required","","matInput","","formControlName","startsOn",3,"matDatetimepicker"],["required","","matInput","","formControlName","endsOn",3,"matDatetimepicker"],[1,"flex","flex-1","items-center","justify-center",2,"margin","auto"],[2,"text-align","center",3,"innerHTML"],[3,"formControl"],["formControlName","dynamicValue","helpId","device-profile/alarm_custom_schedule_format"],["class","flex flex-col gap-4","formArrayName","items",4,"ngFor","ngForOf"],["formArrayName","items",1,"flex","flex-col","gap-4"],[1,"flex","flex-row","items-center","justify-start","gap-2","xs:flex-col","xs:items-start","xs:justify-center",3,"formGroupName"],["formControlName","enabled",1,"max-w-17%","flex-full",3,"change"],[1,"flex","flex-1","flex-row","gap-2"],[1,"xs:flex-1","sm:min-w-25","sm:max-w-25","sm:flex-1","sm:basis-25","md:min-w-25","md:max-w-25","md:flex-1","md:basis-25"],[1,"flex","flex-1","items-center","justify-center",2,"text-align","center",3,"innerHTML"]],template:function(_,E){1&_&&(e.\u0275\u0275elementStart(0,"section",2)(1,"mat-form-field",3)(2,"mat-select",4),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,F,3,4,"mat-option",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,a,3,3,"mat-error",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,p,4,2,"div",6),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275property("formGroup",E.alarmScheduleForm),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"device-profile.schedule-type")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",E.alarmScheduleTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.alarmScheduleForm.get("type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.alarmScheduleForm.get("type").value!==E.alarmScheduleType.ANY_TIME))},dependencies:[S.NgForOf,S.NgIf,G.TbErrorComponent,K.TimezoneSelectComponent,H.MatCheckbox,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatError,Q.MatPrefix,z.MatSelect,L.MatOption,B.MatDatetimepickerComponent,B.MatDatetimepickerToggleComponent,B.MatDatetimepickerInputDirective,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormControlDirective,t.FormGroupDirective,t.FormControlName,t.FormGroupName,t.FormArrayName,I.TranslateDirective,U.e,I.TranslatePipe],styles:['@charset "UTF-8";  .nowrap{white-space:nowrap}']})}}},61148:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{CreateAlarmRulesComponent:()=>p});var e=n(93953),t=n(89417),c=n(5095),h=n(18530),V=n(2446),S=n(56977),G=n(34006),K=n(60177),H=n(88834),k=n(99213),Q=n(53719),z=n(82798),L=n(86600),B=n(14823),I=n(71997),U=n(73955),F=n(13768);function a(v,T){if(1&v&&(e.\u0275\u0275elementStart(0,"mat-option",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&v){const C=T.$implicit,_=e.\u0275\u0275nextContext().index,E=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",C)("disabled",E.isDisabledSeverity(E.alarmSeverityEnum[C],_)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,E.alarmSeverityTranslationMap.get(E.alarmSeverityEnum[C]))," ")}}function O(v,T){1&v&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&v&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.alarm-severity-required")," "))}function P(v,T){if(1&v){const C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(C);const E=e.\u0275\u0275nextContext().index,f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.removeCreateAlarmRule(E))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"remove_circle_outline"),e.\u0275\u0275elementEnd()()}2&v&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function A(v,T){if(1&v&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label",6),e.\u0275\u0275text(4,"alarm.severity"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",7),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275template(7,a,3,5,"mat-option",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,O,3,3,"mat-error",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"mat-divider",9)(10,"tb-alarm-rule",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,P,4,3,"button",11),e.\u0275\u0275elementEnd()),2&v){const C=T.$implicit,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",C),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(6,6,"device-profile.select-alarm-severity")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",_.alarmSeverities),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C.get("severity").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("deviceProfileId",_.deviceProfileId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.disabled)}}function u(v,T){1&v&&(e.\u0275\u0275elementStart(0,"div")(1,"span",14),e.\u0275\u0275text(2,"device-profile.add-create-alarm-rule-prompt"),e.\u0275\u0275elementEnd()())}function m(v,T){if(1&v){const C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",15),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(C);const E=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(E.addCreateAlarmRule())}),e.\u0275\u0275elementStart(3,"mat-icon",16),e.\u0275\u0275text(4,"add_circle_outline"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}2&v&&(e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,2,"device-profile.add-create-alarm-rule")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,4,"device-profile.add-create-alarm-rule")," "))}class p{constructor(T,C){this.dialog=T,this.fb=C,this.alarmSeverities=Object.keys(V.lM),this.alarmSeverityEnum=V.lM,this.alarmSeverityTranslationMap=V.Fm,this.usedSeverities=[],this.destroy$=new h.B,this.propagateChange=_=>{}}registerOnChange(T){this.propagateChange=T}registerOnTouched(T){}ngOnInit(){this.createAlarmRulesFormGroup=this.fb.group({createAlarmRules:this.fb.array([])}),this.createAlarmRulesFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}createAlarmRulesFormArray(){return this.createAlarmRulesFormGroup.get("createAlarmRules")}setDisabledState(T){this.disabled=T,this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1})}writeValue(T){const C=[];T&&Object.keys(T).forEach(_=>{const E=T[_];"empty"===_&&(_=null),C.push(this.fb.group({severity:[_,t.Validators.required],alarmRule:[E,t.Validators.required]}))}),this.createAlarmRulesFormGroup.setControl("createAlarmRules",this.fb.array(C),{emitEvent:!1}),this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1}),this.updateUsedSeverities(),!this.disabled&&!this.createAlarmRulesFormGroup.valid&&this.updateModel()}removeCreateAlarmRule(T){this.createAlarmRulesFormGroup.get("createAlarmRules").removeAt(T)}addCreateAlarmRule(){this.createAlarmRulesFormGroup.get("createAlarmRules").push(this.fb.group({severity:[this.getFirstUnusedSeverity(),t.Validators.required],alarmRule:[{condition:{condition:[]}},c.IQ]})),this.createAlarmRulesFormGroup.updateValueAndValidity(),this.createAlarmRulesFormGroup.valid||this.updateModel()}getFirstUnusedSeverity(){for(const T of Object.keys(V.lM)){const C=V.lM[T];if(-1===this.usedSeverities.indexOf(C))return C}return null}validate(T){return this.createAlarmRulesFormGroup.valid?null:{createAlarmRules:{valid:!1}}}isDisabledSeverity(T,C){const _=this.usedSeverities.indexOf(T);return _>-1&&_!==C}updateUsedSeverities(){this.usedSeverities=[],this.createAlarmRulesFormGroup.get("createAlarmRules").value.forEach((C,_)=>{this.usedSeverities[_]=V.lM[C.severity]})}updateModel(){const T=this.createAlarmRulesFormGroup.get("createAlarmRules").value,C={};T.forEach(_=>{C[_.severity]=_.alarmRule}),this.updateUsedSeverities(),this.propagateChange(C)}static{this.\u0275fac=function(C){return new(C||p)(e.\u0275\u0275directiveInject(G.MatDialog),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["tb-create-alarm-rules"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>p),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>p),multi:!0}])],decls:4,vars:3,consts:[[1,"flex","flex-1","flex-col"],["class","flex flex-row items-center justify-start gap-2","style","padding-bottom: 8px;",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","flex-row","items-center","justify-start","gap-2",2,"padding-bottom","8px",3,"formGroup"],[1,"create-alarm-rule","flex","flex-1","flex-row","items-stretch","justify-start","gap-2"],["floatLabel","always","hideRequiredMarker","",1,"severity","mat-block"],["translate",""],["formControlName","severity","required","",3,"placeholder"],[3,"value","disabled",4,"ngFor","ngForOf"],["vertical",""],["formControlName","alarmRule","required","",1,"flex-1",3,"deviceProfileId"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["translate","",1,"tb-prompt","required",2,"margin","16px 0"],["mat-stroked-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"button-icon"]],template:function(C,_){1&C&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,A,12,8,"div",1)(2,u,3,0,"div",2)(3,m,7,6,"div",2),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",_.createAlarmRulesFormArray().controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.createAlarmRulesFormArray().controls.length&&!_.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.disabled))},dependencies:[K.NgForOf,K.NgIf,H.MatButton,H.MatIconButton,k.MatIcon,Q.MatFormField,Q.MatLabel,Q.MatError,z.MatSelect,L.MatOption,B.MatTooltip,I.MatDivider,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,U.TranslateDirective,F.AlarmRuleComponent,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .create-alarm-rule[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px;min-width:0}[_nghost-%COMP%]     .mat-mdc-form-field.severity .mat-mdc-form-field-infix{width:160px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}']})}}},57040:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileAlarmComponent:()=>g});var e=n(93953),t=n(89417),c=n(5095),h=n(67336),V=n(15673),S=n(34006),G=n(60177),K=n(88834),H=n(82765),k=n(99213),Q=n(59042),z=n(53719),L=n(14823),B=n(71997),I=n(9454),U=n(36471),F=n(73955),a=n(61148),O=n(13768);function P(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.removeAlarm.emit())}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"delete"),e.\u0275\u0275elementEnd()()}2&y&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function A(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.alarm-type-required")," "))}function u(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.alarm-type-unique")," "))}function m(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.alarm-type-max-length")," "))}function p(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-chip-row",31),e.\u0275\u0275listener("removed",function(){const ee=e.\u0275\u0275restoreView(D).$implicit,_e=e.\u0275\u0275nextContext(4);return e.\u0275\u0275resetView(_e.removeRelationType(ee))}),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"mat-icon",32),e.\u0275\u0275text(3,"close"),e.\u0275\u0275elementEnd()()}if(2&y){const D=b.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",D," ")}}function v(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section")(1,"mat-form-field",25)(2,"mat-label",26),e.\u0275\u0275text(3,"device-profile.alarm-rule-relation-types-list"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-chip-grid",27,0),e.\u0275\u0275template(6,p,4,1,"mat-chip-row",28),e.\u0275\u0275elementStart(7,"input",29),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275listener("matChipInputTokenEnd",function(ee){e.\u0275\u0275restoreView(D);const _e=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_e.addRelationType(ee))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"mat-hint",30),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd()()}if(2&y){const D=e.\u0275\u0275reference(5),w=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",w.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",w.alarmFormGroup.get("propagateRelationTypes").value),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(8,6,"device-profile.alarm-rule-relation-types-list")),e.\u0275\u0275property("matChipInputFor",D)("matChipInputSeparatorKeyCodes",w.separatorKeysCodes),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(10,8,"device-profile.alarm-rule-relation-types-list-hint"),e.\u0275\u0275sanitizeHtml)}}function T(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"mat-checkbox",22),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,v,11,10,"section",10),e.\u0275\u0275elementStart(4,"mat-checkbox",23),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-checkbox",24),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()),2&y){const D=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,"device-profile.propagate-alarm")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!0===D.alarmFormGroup.get("propagate").value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,6,"device-profile.propagate-alarm-to-owner")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,8,"device-profile.propagate-alarm-to-tenant")," ")}}function C(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",33),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ee.removeClearAlarmRule())}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"remove_circle_outline"),e.\u0275\u0275elementEnd()()}2&y&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function _(y,b){1&y&&(e.\u0275\u0275elementStart(0,"div")(1,"span",34),e.\u0275\u0275text(2,"device-profile.no-clear-alarm-rule"),e.\u0275\u0275elementEnd()())}function E(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",35),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ee.addClearAlarmRule())}),e.\u0275\u0275elementStart(3,"mat-icon",36),e.\u0275\u0275text(4,"add_circle_outline"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}if(2&y){const D=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("!hidden",D.alarmFormGroup.get("clearRule").value),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,4,"device-profile.add-clear-alarm-rule")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,6,"device-profile.add-clear-alarm-rule")," ")}}function f(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275element(1,"mat-divider"),e.\u0275\u0275elementStart(2,"mat-form-field",8)(3,"mat-label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",9),e.\u0275\u0275template(7,A,3,3,"mat-error",10)(8,u,3,3,"mat-error",10)(9,m,3,3,"mat-error",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"mat-expansion-panel",11)(11,"mat-expansion-panel-header")(12,"mat-panel-title")(13,"div",12)(14,"div",13),e.\u0275\u0275text(15,"device-profile.advanced-settings"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(16,T,10,10,"ng-template",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",14)(18,"div",15),e.\u0275\u0275text(19,"device-profile.create-alarm-rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"tb-create-alarm-rules",16),e.\u0275\u0275elementStart(21,"div",15),e.\u0275\u0275text(22,"device-profile.clear-alarm-rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",17)(24,"div",18),e.\u0275\u0275element(25,"tb-alarm-rule",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,C,4,3,"button",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,_,3,0,"div",10)(28,E,7,8,"div",21),e.\u0275\u0275elementEnd()),2&y){const D=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,12,"device-profile.alarm-type")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",D.alarmFormGroup.get("alarmType").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",D.alarmFormGroup.get("alarmType").hasError("unique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",D.alarmFormGroup.get("alarmType").hasError("maxlength")),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!1),e.\u0275\u0275advance(10),e.\u0275\u0275property("deviceProfileId",D.deviceProfileId),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",!D.alarmFormGroup.get("clearRule").value),e.\u0275\u0275advance(2),e.\u0275\u0275property("deviceProfileId",D.deviceProfileId),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!D.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",D.disabled&&!D.alarmFormGroup.get("clearRule").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!D.disabled)}}class g{constructor(b,D,w){this.dialog=b,this.utils=D,this.fb=w,this.removeAlarm=new e.EventEmitter,this.separatorKeysCodes=[h.ENTER,h.COMMA,h.SEMICOLON],this.expanded=!1,this.propagateChange=null,this.propagateChangePending=!1}registerOnChange(b){this.propagateChange=b,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(()=>{this.propagateChange(this.modelValue)},0))}registerOnTouched(b){}ngOnInit(){this.alarmFormGroup=this.fb.group({id:[null,t.Validators.required],alarmType:[null,[t.Validators.required,t.Validators.maxLength(255)]],createRules:[null],clearRule:[null],propagate:[null],propagateRelationTypes:[null],propagateToOwner:[null],propagateToTenant:[null]},{validators:c.rP}),this.alarmFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(b){this.disabled=b,this.disabled?this.alarmFormGroup.disable({emitEvent:!1}):this.alarmFormGroup.enable({emitEvent:!1})}writeValue(b){this.propagateChangePending=!1,this.modelValue=b,this.modelValue.alarmType||(this.expanded=!0),this.alarmFormGroup.reset(this.modelValue||void 0,{emitEvent:!1}),!this.disabled&&!this.alarmFormGroup.valid&&this.updateModel()}addClearAlarmRule(){this.alarmFormGroup.patchValue({clearRule:{condition:{condition:[]}}})}removeClearAlarmRule(){this.alarmFormGroup.patchValue({clearRule:null})}validate(b){if(b.parent){const D=b.value.alarmType,w=[];b.parent.getRawValue().forEach(ee=>{w.push(ee.alarmType)}),w.filter(ee=>ee===D).length>1&&this.alarmFormGroup.get("alarmType").setErrors({unique:!0})}return this.alarmFormGroup.valid?null:{alarm:{valid:!1}}}removeRelationType(b){const D=this.alarmFormGroup.get("propagateRelationTypes").value,w=D.indexOf(b);w>=0&&(D.splice(w,1),this.alarmFormGroup.get("propagateRelationTypes").setValue(D,{emitEvent:!0}))}addRelationType(b){const D=b.chipInput.inputElement;let w=b.value;if((w||"").trim()){w=w.trim();let ee=this.alarmFormGroup.get("propagateRelationTypes").value;(!ee||-1===ee.indexOf(w))&&(ee||(ee=[]),ee.push(w),this.alarmFormGroup.get("propagateRelationTypes").setValue(ee,{emitEvent:!0}))}D&&(D.value="")}get alarmTypeTitle(){const b=this.alarmFormGroup.get("alarmType").value;return this.utils.customTranslation(b,b)}updateModel(){const b=this.alarmFormGroup.value;this.modelValue={...this.modelValue,...b},this.propagateChange?this.propagateChange(this.modelValue):this.propagateChangePending=!0}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275directiveInject(S.MatDialog),e.\u0275\u0275directiveInject(V.T),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["tb-device-profile-alarm"]],inputs:{disabled:"disabled",expanded:"expanded",deviceProfileId:"deviceProfileId"},outputs:{removeAlarm:"removeAlarm"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>g),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>g),multi:!0}])],decls:9,vars:4,consts:[["relationTypesChipList",""],[1,"device-profile-alarm","flex-1",3,"expandedChange","formGroup","expanded"],[1,"flex","flex-1","flex-row","items-center","justify-start"],[1,"flex-1"],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],[1,"flex","flex-col","gap-2"],["floatLabel","always",1,"flex-1"],["required","","matInput","","formControlName","alarmType","placeholder","Enter alarm type"],[4,"ngIf"],[1,"advanced-settings",3,"expanded"],[1,"flex","flex-1","flex-row","items-center","justify-end"],["translate","",1,"tb-small"],[1,"flex","flex-1","flex-col"],["translate","",1,"tb-small",2,"padding-bottom","8px"],["formControlName","createRules",2,"padding-bottom","16px",3,"deviceProfileId"],[1,"flex","flex-row","items-center","justify-start","gap-2",2,"padding-bottom","8px"],[1,"clear-alarm-rule","flex","flex-1","flex-row"],["formControlName","clearRule",1,"flex-1",3,"deviceProfileId"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"!hidden",4,"ngIf"],["formControlName","propagate",2,"display","block"],["formControlName","propagateToOwner",2,"display","block"],["formControlName","propagateToTenant",2,"display","block"],["floatLabel","always",1,"mat-block"],["translate",""],[3,"disabled"],[3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text","matChipInputAddOnBlur","",3,"matChipInputTokenEnd","placeholder","matChipInputFor","matChipInputSeparatorKeyCodes"],[3,"innerHTML"],[3,"removed"],["matChipRemove",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["translate","",1,"tb-prompt","flex","items-center","justify-center",2,"margin","16px 0"],["mat-stroked-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],[1,"button-icon"]],template:function(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",1),e.\u0275\u0275twoWayListener("expandedChange",function(_e){return e.\u0275\u0275twoWayBindingSet(w.expanded,_e)||(w.expanded=_e),_e}),e.\u0275\u0275elementStart(1,"mat-expansion-panel-header")(2,"div",2)(3,"mat-panel-title")(4,"div",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"span",3),e.\u0275\u0275template(7,P,4,3,"button",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,f,29,14,"ng-template",5),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275property("formGroup",w.alarmFormGroup),e.\u0275\u0275twoWayProperty("expanded",w.expanded),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",w.alarmTypeTitle," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!w.disabled))},dependencies:[G.NgForOf,G.NgIf,K.MatButton,K.MatIconButton,H.MatCheckbox,k.MatIcon,Q.MatInput,z.MatFormField,z.MatLabel,z.MatHint,z.MatError,L.MatTooltip,B.MatDivider,I.MatExpansionPanel,I.MatExpansionPanelHeader,I.MatExpansionPanelTitle,I.MatExpansionPanelContent,U.MatChipGrid,U.MatChipInput,U.MatChipRemove,U.MatChipRow,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,F.TranslateDirective,a.CreateAlarmRulesComponent,O.AlarmRuleComponent,F.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .clear-alarm-rule[_ngcontent-%COMP%]{min-width:0;margin-right:8px;border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px}[_nghost-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]{border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]{border:none;padding:0}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-expansion-panel.device-profile-alarm .mat-expansion-panel-body{padding:0 8px 8px}[_nghost-%COMP%]     .mat-expansion-panel.advanced-settings .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel .button-icon{font-size:20px;width:20px;height:20px}']})}}},23313:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileAlarmsComponent:()=>U});var e=n(93953),t=n(89417),c=n(14085),h=n(5095),V=n(27997),S=n(18530),G=n(56977),K=n(9310),H=n(60177),k=n(88834),Q=n(73955),z=n(57040);function L(F,a){if(1&F){const O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"tb-device-profile-alarm",5),e.\u0275\u0275listener("removeAlarm",function(){const A=e.\u0275\u0275restoreView(O).index,u=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(u.removeAlarm(A))}),e.\u0275\u0275elementEnd()()}if(2&F){const O=a.$implicit,P=a.index,A=a.last,u=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pb-2",!A),e.\u0275\u0275advance(),e.\u0275\u0275property("formControl",O)("expanded",0===P)("deviceProfileId",u.deviceProfileId)}}function B(F,a){1&F&&(e.\u0275\u0275elementStart(0,"div")(1,"span",6),e.\u0275\u0275text(2,"device-profile.no-alarm-rules"),e.\u0275\u0275elementEnd()())}function I(F,a){if(1&F){const O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(O);const A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.addAlarm())}),e.\u0275\u0275elementStart(2,"span",9),e.\u0275\u0275text(3,"device-profile.add-alarm-rule"),e.\u0275\u0275elementEnd()()()}}class U{get required(){return this.requiredValue}set required(a){this.requiredValue=(0,c.coerceBooleanProperty)(a)}constructor(a,O){this.store=a,this.fb=O,this.destroy$=new S.B,this.propagateChange=P=>{}}registerOnChange(a){this.propagateChange=a}registerOnTouched(a){}ngOnInit(){this.deviceProfileAlarmsFormGroup=this.fb.group({alarms:this.fb.array([])}),this.deviceProfileAlarmsFormGroup.valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get alarmsFormArray(){return this.deviceProfileAlarmsFormGroup.get("alarms")}setDisabledState(a){this.disabled=a,this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1})}writeValue(a){if(a?.length===this.alarmsFormArray.length)this.alarmsFormArray.patchValue(a,{emitEvent:!1});else{const O=[];a&&a.forEach(P=>{O.push(this.fb.control(P,[t.Validators.required]))}),this.deviceProfileAlarmsFormGroup.setControl("alarms",this.fb.array(O),{emitEvent:!1}),this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1})}}trackByAlarm(a,O){return O?O.value.id:null}removeAlarm(a){this.deviceProfileAlarmsFormGroup.get("alarms").removeAt(a)}addAlarm(){const a={id:(0,V.Os)(),alarmType:"",createRules:{CRITICAL:{condition:{condition:[]}}}};this.deviceProfileAlarmsFormGroup.get("alarms").push(this.fb.control(a,[h.rP])),this.deviceProfileAlarmsFormGroup.updateValueAndValidity(),this.deviceProfileAlarmsFormGroup.valid||this.updateModel()}validate(a){return this.deviceProfileAlarmsFormGroup.valid?null:{alarms:{valid:!1}}}updateModel(){const a=this.deviceProfileAlarmsFormGroup.get("alarms").value;this.propagateChange(a)}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-device-profile-alarms"]],inputs:{required:"required",disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>U),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>U),multi:!0}])],decls:5,vars:4,consts:[[1,"flex","flex-col"],[1,"tb-device-profile-alarms"],["class","flex flex-col",3,"pb-2",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["style","padding-top: 16px;",4,"ngIf"],[3,"removeAlarm","formControl","expanded","deviceProfileId"],["translate","",1,"tb-prompt","flex","items-center","justify-center"],[2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click"],["translate",""]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,L,2,5,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,B,3,0,"div",3)(4,I,4,0,"div",4),e.\u0275\u0275elementEnd()),2&O&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",P.alarmsFormArray.controls)("ngForTrackBy",P.trackByAlarm),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!P.alarmsFormArray.controls.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!P.disabled))},dependencies:[H.NgForOf,H.NgIf,k.MatButton,t.NgControlStatus,t.FormControlDirective,Q.TranslateDirective,z.DeviceProfileAlarmComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-device-profile-alarms[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:8px}@media screen and (min-width: 960px){[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:16px}}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}']})}}},36148:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EditAlarmDetailsDialogComponent:()=>P});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(15673),S=n(9310),G=n(7901),K=n(89417),H=n(73955),k=n(60177),Q=n(88834),z=n(99213),L=n(67575),B=n(59042),I=n(53719),U=n(55911),F=n(20226);function a(A,u){1&A&&e.\u0275\u0275element(0,"mat-progress-bar",15)}function O(A,u){if(1&A&&(e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,m.isLoading$)||m.editDetailsFormGroup.invalid||!m.editDetailsFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"action.save")," ")}}class P extends h.m{constructor(u,m,p,v,T,C,_,E){super(u,m,T),this.store=u,this.router=m,this.data=p,this.errorStateMatcher=v,this.dialogRef=T,this.fb=C,this.utils=_,this.translate=E,this.alarmDetails=this.data.alarmDetails,this.submitted=!1,this.editDetailsFormGroup=this.fb.group({alarmDetails:[this.alarmDetails]}),this.data.readonly&&this.editDetailsFormGroup.disable()}ngOnInit(){}isErrorState(u,m){const p=this.errorStateMatcher.isErrorState(u,m),v=!!(u&&u.invalid&&this.submitted);return p||v}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.alarmDetails=this.editDetailsFormGroup.get("alarmDetails").value,this.dialogRef.close(this.alarmDetails)}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(K.UntypedFormBuilder),e.\u0275\u0275directiveInject(V.T),e.\u0275\u0275directiveInject(H.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-edit-alarm-details-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:P}]),e.\u0275\u0275InheritDefinitionFeature],decls:27,vars:26,consts:[[2,"width","800px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"flex","flex-1","flex-col"],[1,"mat-block"],["matInput","","formControlName","alarmDetails","rows","5",3,"placeholder"],[3,"innerHTML"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return p.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,a,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",6)(12,"fieldset",7),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementStart(14,"div",8)(15,"mat-form-field",9),e.\u0275\u0275element(16,"textarea",10),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275element(18,"mat-hint",11),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275pipe(20,"safe"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"div",12)(22,"button",13),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,O,4,6,"button",14),e.\u0275\u0275elementEnd()()),2&m&&(e.\u0275\u0275property("formGroup",p.editDetailsFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,9,"device-profile.edit-alarm-rule-additional-info")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,11,p.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(13,13,p.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(17,15,"device-profile.alarm-rule-additional-info-placeholder")),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(20,19,e.\u0275\u0275pipeBind1(19,17,"device-profile.alarm-rule-additional-info-hint"),"html"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,22,p.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,24,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!p.data.readonly))},dependencies:[k.NgIf,Q.MatButton,Q.MatIconButton,z.MatIcon,L.MatProgressBar,B.MatInput,I.MatFormField,I.MatHint,U.MatToolbar,c.MatDialogActions,c.MatDialogContent,K.\u0275NgNoValidate,K.DefaultValueAccessor,K.NgControlStatus,K.NgControlStatusGroup,K.FormGroupDirective,K.FormControlName,k.AsyncPipe,F.SafePipe,H.TranslatePipe],encapsulation:2})}}},831:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AssetProfileAutocompleteComponent:()=>de});var e=n(31635),t=n(93953),c=n(89417),h=n(7673),V=n(719),S=n(67496),G=n(88141),K=n(96354),H=n(70152),k=n(23294),Q=n(25558),z=n(97647),L=n(99437),B=n(33596),I=n(97435),U=n(67336),F=n(29543),a=n(27997),O=n(25967);class P{constructor(re){this.entityType=O.ck.ASSET_PROFILE,this.id=re}}var A=n(56564),u=n(76463),m=n(29225),p=n(63729),v=n(9437),T=n(9310),C=n(73955),_=n(34006),E=n(60177),f=n(88834),g=n(99213),y=n(59042),b=n(53719),D=n(86600),w=n(14823),ee=n(60850),_e=n(7901),ve=n(91009);const Ee=["assetProfileInput"],$=["assetProfileAutocomplete"],be=ye=>({entity:ye});function Te(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275nextContext();t.\u0275\u0275property("routerLink",ne.assetProfileURL),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",ne.displayAssetProfileFn(ne.selectAssetProfileFormGroup.get("assetProfile").value)," ")}}function oe(ye,re){if(1&ye){const ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ne);const Ae=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Ae.clear())}),t.\u0275\u0275elementStart(1,"mat-icon",15),t.\u0275\u0275text(2,"close"),t.\u0275\u0275elementEnd()()}}function R(ye,re){if(1&ye){const ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(Ae){t.\u0275\u0275restoreView(ne);const Pe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Pe.editAssetProfile(Ae))}),t.\u0275\u0275elementStart(2,"mat-icon",15),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}2&ye&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"asset-profile.edit"))}function N(ye,re){if(1&ye){const ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(Ae){t.\u0275\u0275restoreView(ne);const Pe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Pe.createAssetProfile(Ae,""))}),t.\u0275\u0275elementStart(1,"span",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&ye&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"notification.create-new")))}function Z(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-option",19),t.\u0275\u0275element(1,"span",20),t.\u0275\u0275pipe(2,"highlight"),t.\u0275\u0275elementEnd()),2&ye){const ne=re.$implicit,ie=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",ne),t.\u0275\u0275advance(),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind2(2,2,ne.name,ie.searchText),t.\u0275\u0275sanitizeHtml)}}function Y(ye,re){1&ye&&(t.\u0275\u0275elementStart(0,"div")(1,"span",24),t.\u0275\u0275text(2,"asset-profile.no-asset-profiles-found"),t.\u0275\u0275elementEnd()())}function ge(ye,re){if(1&ye){const ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span")(4,"a",25),t.\u0275\u0275listener("click",function(Ae){t.\u0275\u0275restoreView(ne);const Pe=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(Pe.createAssetProfile(Ae,Pe.searchText))}),t.\u0275\u0275text(5,"asset-profile.create-new-asset-profile"),t.\u0275\u0275elementEnd()()}if(2&ye){const ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,ne.translate.get("asset-profile.no-asset-profiles-matching",t.\u0275\u0275pureFunction1(3,be,ne.truncate.transform(ne.searchText,!0,6,"..."))))," ")}}function ce(ye,re){if(1&ye){const ne=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",21)(1,"div",22),t.\u0275\u0275listener("click",function(Ae){return t.\u0275\u0275restoreView(ne),t.\u0275\u0275resetView(Ae.stopPropagation())}),t.\u0275\u0275template(2,Y,3,0,"div",23)(3,ge,6,5,"ng-template",null,2,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&ye){const ne=t.\u0275\u0275reference(4),ie=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",null),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.textIsNotEmpty(ie.searchText)||!ie.addNewProfile)("ngIfElse",ne)}}function se(ye,re){1&ye&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"asset-profile.asset-profile-required")," "))}function J(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-hint"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,ne.hint))}}class de{constructor(re,ne,ie,Ae,Pe,Be,Ke){this.store=re,this.translate=ne,this.truncate=ie,this.assetProfileService=Ae,this.fb=Pe,this.zone=Be,this.dialog=Ke,this.subscriptSizing="fixed",this.selectDefaultProfile=!1,this.selectFirstProfile=!1,this.displayAllOnEmpty=!1,this.editProfileEnabled=!0,this.addNewProfile=!0,this.showDetailsPageLink=!1,this.required=!1,this.assetProfileUpdated=new t.EventEmitter,this.assetProfileChanged=new t.EventEmitter,this.searchText="",this.useAssetProfileLink=!0,this.dirty=!1,this.ignoreClosedPanel=!1,this.allAssetProfile={name:this.translate.instant("asset-profile.all-asset-profiles"),id:null},this.propagateChange=Xe=>{},this.authUser=(0,p.rx)(this.store),this.authUser.authority===v.s.CUSTOMER_USER&&(this.useAssetProfileLink=!1),this.selectAssetProfileFormGroup=this.fb.group({assetProfile:[null]})}registerOnChange(re){this.propagateChange=re}registerOnTouched(re){}ngOnInit(){this.filteredAssetProfiles=this.selectAssetProfileFormGroup.get("assetProfile").valueChanges.pipe((0,G.M)(re=>{let ne;ne="string"!=typeof re&&re?re:null,(!this.displayAllOnEmpty||ne)&&this.updateView(ne)}),(0,K.T)(re=>re?"string"==typeof re?re:this.displayAllOnEmpty&&re===this.allAssetProfile?"":re.name:""),(0,H.B)(150),(0,k.F)(),(0,Q.n)(re=>this.fetchAssetProfiles(re)),(0,z.u)())}selectDefaultAssetProfileIfNeeded(){this.selectDefaultProfile&&!this.modelValue?this.assetProfileService.getDefaultAssetProfileInfo().subscribe(re=>{re?(this.selectAssetProfileFormGroup.get("assetProfile").patchValue(re,{emitEvent:!1}),this.updateView(re)):this.selectFirstAssetProfileIfNeeded()}):this.selectFirstAssetProfileIfNeeded()}selectFirstAssetProfileIfNeeded(){if(this.selectFirstProfile&&!this.modelValue){const re=new V.Ek(1,0,null,{property:"createdTime",direction:S.O.DESC});this.assetProfileService.getAssetProfileInfos(re,{ignoreLoading:!0}).subscribe(ne=>{const ie=ne.data;ie.length&&(this.selectAssetProfileFormGroup.get("assetProfile").patchValue(ie[0],{emitEvent:!1}),this.updateView(ie[0]))})}}setDisabledState(re){this.disabled=re,this.disabled?this.selectAssetProfileFormGroup.disable({emitEvent:!1}):this.selectAssetProfileFormGroup.enable({emitEvent:!1})}writeValue(re){this.searchText="",null!=re?this.assetProfileService.getAssetProfileInfo(re.id).subscribe(ne=>{this.modelValue=new P(ne.id.id),this.useAssetProfileLink&&(this.assetProfileURL=(0,a.e9)(this.modelValue.id,this.modelValue.entityType)),this.selectAssetProfileFormGroup.get("assetProfile").patchValue(ne,{emitEvent:!1}),this.assetProfileChanged.emit(ne)}):this.displayAllOnEmpty?(this.modelValue=null,this.selectAssetProfileFormGroup.get("assetProfile").patchValue(this.allAssetProfile,{emitEvent:!1})):(this.modelValue=null,this.selectAssetProfileFormGroup.get("assetProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultAssetProfileIfNeeded()),this.dirty=!0}onFocus(){this.dirty&&(this.selectAssetProfileFormGroup.get("assetProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)}onPanelClosed(){this.ignoreClosedPanel?this.ignoreClosedPanel=!1:this.displayAllOnEmpty&&!this.selectAssetProfileFormGroup.get("assetProfile").value&&this.zone.run(()=>{this.selectAssetProfileFormGroup.get("assetProfile").patchValue(this.allAssetProfile,{emitEvent:!0})},0)}updateView(re){const ne=re&&re.id?new P(re.id.id):null;(0,B.s)(this.modelValue,ne)||(this.modelValue=ne,this.propagateChange(this.modelValue),this.assetProfileChanged.emit(re))}displayAssetProfileFn(re){return re?re.name:void 0}fetchAssetProfiles(re){this.searchText=re;const ne=new V.Ek(10,0,re,{property:"name",direction:S.O.ASC});return this.assetProfileService.getAssetProfileInfos(ne,{ignoreLoading:!0}).pipe((0,L.W)(()=>(0,h.of)((0,F.r)())),(0,K.T)(ie=>{let Ae=ie.data;return this.displayAllOnEmpty&&(Ae=[this.allAssetProfile,...Ae]),Ae}))}clear(){this.ignoreClosedPanel=!0,this.selectAssetProfileFormGroup.get("assetProfile").patchValue(null,{emitEvent:!0}),setTimeout(()=>{this.assetProfileInput.nativeElement.blur(),this.assetProfileInput.nativeElement.focus()},0)}textIsNotEmpty(re){return re&&re.length>0}assetProfileEnter(re){this.editProfileEnabled&&re.keyCode===U.ENTER&&(re.preventDefault(),this.modelValue||this.createAssetProfile(re,this.searchText))}createAssetProfile(re,ne){re.stopPropagation();const ie={name:ne};this.addNewProfile&&this.openAssetProfileDialog(ie,!0)}editAssetProfile(re){re.stopPropagation(),this.assetProfileService.getAssetProfile(this.modelValue.id).subscribe(ne=>{this.openAssetProfileDialog(ne,!1)})}openAssetProfileDialog(re,ne){this.dialog.open(u.AssetProfileDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:ne,assetProfile:re}}).afterClosed().subscribe(ie=>{ie?this.assetProfileService.getAssetProfileInfo(ie.id.id).subscribe(Ae=>{this.modelValue=new P(Ae.id.id),this.selectAssetProfileFormGroup.get("assetProfile").patchValue(Ae,{emitEvent:!0}),ne?this.propagateChange(this.modelValue):this.assetProfileUpdated.next(ie.id),this.assetProfileChanged.emit(Ae)}):setTimeout(()=>{this.assetProfileInput.nativeElement.blur(),this.assetProfileInput.nativeElement.focus()},0)})}static{this.\u0275fac=function(ne){return new(ne||de)(t.\u0275\u0275directiveInject(T.Store),t.\u0275\u0275directiveInject(C.TranslateService),t.\u0275\u0275directiveInject(I.TruncatePipe),t.\u0275\u0275directiveInject(A.h),t.\u0275\u0275directiveInject(c.UntypedFormBuilder),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(_.MatDialog))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:de,selectors:[["tb-asset-profile-autocomplete"]],viewQuery:function(ne,ie){if(1&ne&&(t.\u0275\u0275viewQuery(Ee,7),t.\u0275\u0275viewQuery($,7)),2&ne){let Ae;t.\u0275\u0275queryRefresh(Ae=t.\u0275\u0275loadQuery())&&(ie.assetProfileInput=Ae.first),t.\u0275\u0275queryRefresh(Ae=t.\u0275\u0275loadQuery())&&(ie.assetProfileAutocomplete=Ae.first)}},inputs:{subscriptSizing:"subscriptSizing",selectDefaultProfile:"selectDefaultProfile",selectFirstProfile:"selectFirstProfile",displayAllOnEmpty:"displayAllOnEmpty",editProfileEnabled:"editProfileEnabled",addNewProfile:"addNewProfile",showDetailsPageLink:"showDetailsPageLink",required:"required",disabled:"disabled",hint:"hint"},outputs:{assetProfileUpdated:"assetProfileUpdated",assetProfileChanged:"assetProfileChanged"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>de),multi:!0}])],decls:18,vars:22,consts:[["assetProfileInput",""],["assetProfileAutocomplete","matAutocomplete"],["searchNotEmpty",""],[1,"mat-block",3,"formGroup","subscriptSizing"],["matInput","","type","text","formControlName","assetProfile",3,"focusin","keydown","keypress","required","matAutocomplete"],["aria-label","Open asset profile",3,"routerLink",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","color","primary","matSuffix","",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"closed","displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["aria-label","Open asset profile",3,"routerLink"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"click","matTooltip"],["mat-button","","color","primary","matSuffix","",3,"click"],[2,"white-space","nowrap"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["translate",""],["translate","",3,"click"]],template:function(ne,ie){if(1&ne){const Ae=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"input",4,0),t.\u0275\u0275listener("focusin",function(){return t.\u0275\u0275restoreView(Ae),t.\u0275\u0275resetView(ie.onFocus())})("keydown",function(Be){return t.\u0275\u0275restoreView(Ae),t.\u0275\u0275resetView(ie.assetProfileEnter(Be))})("keypress",function(Be){return t.\u0275\u0275restoreView(Ae),t.\u0275\u0275resetView(ie.assetProfileEnter(Be))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,Te,2,2,"a",5)(7,oe,3,0,"button",6)(8,R,4,3,"button",7)(9,N,4,3,"button",8),t.\u0275\u0275elementStart(10,"mat-autocomplete",9,1),t.\u0275\u0275listener("closed",function(){return t.\u0275\u0275restoreView(Ae),t.\u0275\u0275resetView(ie.onPanelClosed())}),t.\u0275\u0275template(12,Z,3,5,"mat-option",10),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275template(14,ce,5,3,"mat-option",11),t.\u0275\u0275pipe(15,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,se,3,3,"mat-error",12)(17,J,3,3,"mat-hint",12),t.\u0275\u0275elementEnd()}if(2&ne){let Ae,Pe;const Be=t.\u0275\u0275reference(11);t.\u0275\u0275propertyInterpolate("subscriptSizing",ie.subscriptSizing),t.\u0275\u0275property("formGroup",ie.selectAssetProfileFormGroup),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,16,"asset-profile.asset-profile")),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("!hidden",ie.showDetailsPageLink&&ie.useAssetProfileLink&&ie.disabled&&ie.selectAssetProfileFormGroup.get("assetProfile").value),t.\u0275\u0275property("required",ie.required)("matAutocomplete",Be),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.showDetailsPageLink&&ie.useAssetProfileLink&&ie.selectAssetProfileFormGroup.get("assetProfile").value&&ie.disabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.selectAssetProfileFormGroup.get("assetProfile").value&&!ie.disabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",(null==(Ae=ie.selectAssetProfileFormGroup.get("assetProfile").value)?null:Ae.id)&&!ie.disabled&&ie.editProfileEnabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!ie.selectAssetProfileFormGroup.get("assetProfile").value&&!ie.disabled&&ie.addNewProfile),t.\u0275\u0275advance(),t.\u0275\u0275property("displayWith",ie.displayAssetProfileFn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(13,18,ie.filteredAssetProfiles)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(null!=(Pe=t.\u0275\u0275pipeBind1(15,20,ie.filteredAssetProfiles))&&Pe.length)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.selectAssetProfileFormGroup.get("assetProfile").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.hint&&!ie.disabled)}},dependencies:[E.NgForOf,E.NgIf,f.MatButton,f.MatIconButton,g.MatIcon,y.MatInput,b.MatFormField,b.MatLabel,b.MatHint,b.MatError,b.MatSuffix,D.MatOption,w.MatTooltip,ee.MatAutocomplete,ee.MatAutocompleteTrigger,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,_e.RouterLink,C.TranslateDirective,E.AsyncPipe,ve.HighlightPipe,C.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none;color:inherit}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}']})}}(0,e.__decorate)([(0,m.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],de.prototype,"required",void 0)},76463:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AssetProfileDialogComponent:()=>O});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(96036),S=n(56564),G=n(9310),K=n(7901),H=n(60177),k=n(88834),Q=n(99213),z=n(67575),L=n(55911),B=n(89417),I=n(73955);const U=["assetProfileComponent"];function F(P,A){1&P&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function a(P,A){1&P&&e.\u0275\u0275element(0,"div",14)}class O extends h.m{constructor(A,u,m,p,v,T){super(A,u,p),this.store=A,this.router=u,this.data=m,this.dialogRef=p,this.errorStateMatcher=v,this.assetProfileService=T,this.submitted=!1,this.isAdd=this.data.isAdd,this.assetProfile=this.data.assetProfile}ngAfterViewInit(){this.isAdd&&setTimeout(()=>{this.assetProfileComponent.entityForm.markAsDirty()},0)}isErrorState(A,u){const m=this.errorStateMatcher.isErrorState(A,u),p=!!(A&&A.invalid&&this.submitted);return m||p}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.assetProfileComponent.entityForm.valid&&(this.assetProfile={...this.assetProfile,...this.assetProfileComponent.entityFormValue()},this.assetProfileService.saveAssetProfile(this.assetProfile).subscribe(A=>{this.dialogRef.close(A)}))}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(S.h))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-asset-profile-dialog"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(U,7),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.assetProfileComponent=p.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:O}]),e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:24,consts:[["assetProfileComponent",""],[2,"width","600px",3,"ngSubmit"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",3),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,F,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,a,1,0,"div",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"tb-asset-profile",9,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",10)(17,"button",11),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",12),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()}if(2&u){const p=e.\u0275\u0275reference(15);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,10,m.isAdd?"asset-profile.add":"asset-profile.edit")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,12,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,14,m.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("standalone",!0)("entity",m.assetProfile)("isEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,16,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,18,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,20,m.isLoading$)||(null==p.entityForm?null:p.entityForm.invalid)||!(null!=p.entityForm&&p.entityForm.dirty)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,22,m.isAdd?"action.add":"action.save")," ")}},dependencies:[H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatProgressBar,L.MatToolbar,c.MatDialogActions,c.MatDialogContent,B.\u0275NgNoValidate,B.NgControlStatusGroup,B.NgForm,V.AssetProfileComponent,H.AsyncPipe,I.TranslatePipe],encapsulation:2})}}},96036:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AssetProfileComponent:()=>T});var e=n(93953),t=n(89417),c=n(78502),V=(n(12054),n(81365)),S=n(25967),G=n(88855),K=n(44464),H=n(57125),k=n(89815),Q=n(9310),z=n(73955),L=n(60177),B=n(23593),I=n(48676),U=n(88834),F=n(99213),a=n(59042),O=n(53719),P=n(89692),A=n(86763),u=n(52874);function m(C,_){if(1&C){const E=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"button",16),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(g){e.\u0275\u0275restoreView(E);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onEntityAction(g,"open"))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",16),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275listener("click",function(g){e.\u0275\u0275restoreView(E);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onEntityAction(g,"export"))}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",16),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("click",function(g){e.\u0275\u0275restoreView(E);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onEntityAction(g,"setDefault"))}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",16),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(g){e.\u0275\u0275restoreView(E);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onEntityAction(g,"delete"))}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",17)(18,"button",18),e.\u0275\u0275listener("cbOnSuccess",function(g){e.\u0275\u0275restoreView(E);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onAssetProfileIdCopied(g))}),e.\u0275\u0275element(19,"mat-icon",19),e.\u0275\u0275elementStart(20,"span",5),e.\u0275\u0275text(21,"asset-profile.copyId"),e.\u0275\u0275elementEnd()()()()}if(2&C){const E=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",E.isEdit||E.isDetailsPage),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,19,E.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,21,"common.open-details-page")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",E.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,23,E.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,25,"asset-profile.export")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",E.isEdit||(null==E.entity?null:E.entity.default)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,27,E.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,29,"asset-profile.set-default")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",E.hideDelete()||E.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,31,E.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,33,"asset-profile.delete")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",E.isEdit),e.\u0275\u0275property("cbContent",null==E.entity||null==E.entity.id?null:E.entity.id.id)}}function p(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"asset-profile.name-required")," "))}function v(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"asset-profile.name-max-length")," "))}class T extends V.l{constructor(_,E,f,g,y,b){super(_,y,f,g,b),this.store=_,this.translate=E,this.entityValue=f,this.entitiesTableConfigValue=g,this.fb=y,this.cd=b,this.standalone=!1,this.entityType=S.ck,this.serviceType=K.C0.TB_RULE_ENGINE,this.edgeRuleChainType=k.UR.EDGE}hideDelete(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)}buildForm(_){return this.assetProfileId=_?.id?_.id:null,this.fb.group({name:[_?_.name:"",[t.Validators.required,t.Validators.maxLength(255)]],image:[_?_.image:null],defaultRuleChainId:[_&&_.defaultRuleChainId?_.defaultRuleChainId.id:null,[]],defaultDashboardId:[_&&_.defaultDashboardId?_.defaultDashboardId.id:null,[]],defaultQueueName:[_?_.defaultQueueName:null,[]],defaultEdgeRuleChainId:[_&&_.defaultEdgeRuleChainId?_.defaultEdgeRuleChainId.id:null,[]],description:[_?_.description:"",[]]})}updateForm(_){this.assetProfileId=_.id,this.entityForm.patchValue({name:_.name}),this.entityForm.patchValue({image:_.image},{emitEvent:!1}),this.entityForm.patchValue({defaultRuleChainId:_.defaultRuleChainId?_.defaultRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultDashboardId:_.defaultDashboardId?_.defaultDashboardId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultQueueName:_.defaultQueueName},{emitEvent:!1}),this.entityForm.patchValue({defaultEdgeRuleChainId:_.defaultEdgeRuleChainId?_.defaultEdgeRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({description:_.description},{emitEvent:!1})}prepareFormValue(_){return _.defaultRuleChainId&&(_.defaultRuleChainId=new G.p(_.defaultRuleChainId)),_.defaultDashboardId&&(_.defaultDashboardId=new H.C(_.defaultDashboardId)),_.defaultEdgeRuleChainId&&(_.defaultEdgeRuleChainId=new G.p(_.defaultEdgeRuleChainId)),super.prepareFormValue(_)}onAssetProfileIdCopied(_){this.store.dispatch(new c.xo({message:this.translate.instant("asset-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}static{this.\u0275fac=function(E){return new(E||T)(e.\u0275\u0275directiveInject(Q.Store),e.\u0275\u0275directiveInject(z.TranslateService),e.\u0275\u0275directiveInject("entity",8),e.\u0275\u0275directiveInject("entitiesTableConfig",8),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["tb-asset-profile"]],inputs:{standalone:"standalone"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:28,vars:23,consts:[["class","tb-details-buttons xs:flex xs:flex-col",4,"ngIf"],[1,"flex","flex-col"],[3,"formGroup"],[2,"min-width","0",3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","asset-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultDashboardId",3,"label"],["tb-hint",""],["formControlName","defaultQueueName",3,"queueType"],["labelText","asset-profile.default-edge-rule-chain","formControlName","defaultEdgeRuleChainId",3,"ruleChainType"],["formControlName","image",1,"flex-1",3,"label"],["matInput","","formControlName","description","rows","2"],[1,"tb-details-buttons","xs:flex","xs:flex-col"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"flex","flex-row","xs:flex-col"],["mat-raised-button","","ngxClipboard","",3,"cbOnSuccess","cbContent"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(E,f){1&E&&(e.\u0275\u0275template(0,m,22,35,"div",0),e.\u0275\u0275elementStart(1,"div",1)(2,"form",2)(3,"fieldset",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"mat-form-field",4)(6,"mat-label",5),e.\u0275\u0275text(7,"asset-profile.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",6),e.\u0275\u0275template(9,p,3,3,"mat-error",7)(10,v,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"tb-rule-chain-autocomplete",8),e.\u0275\u0275elementStart(12,"tb-dashboard-autocomplete",9),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementStart(14,"span",10),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(17,"tb-queue-autocomplete",11),e.\u0275\u0275elementStart(18,"tb-rule-chain-autocomplete",12)(19,"span",10),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"tb-gallery-image-input",13),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementStart(24,"mat-form-field",4)(25,"mat-label",5),e.\u0275\u0275text(26,"asset-profile.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"textarea",14),e.\u0275\u0275elementEnd()()()()),2&E&&(e.\u0275\u0275property("ngIf",!f.standalone),e.\u0275\u0275advance(),e.\u0275\u0275classProp("mat-padding",!f.standalone),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",f.entityForm),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,13,f.isLoading$)||!f.isEdit),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",f.entityForm.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",f.entityForm.get("name").hasError("maxlength")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(13,15,"asset-profile.mobile-dashboard")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,17,"asset-profile.mobile-dashboard-hint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("queueType",f.serviceType),e.\u0275\u0275advance(),e.\u0275\u0275property("ruleChainType",f.edgeRuleChainType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,19,"asset-profile.default-edge-rule-chain-hint")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(23,21,"asset-profile.image")))},dependencies:[L.NgIf,B.DashboardAutocompleteComponent,I.QueueAutocompleteComponent,U.MatButton,F.MatIcon,a.MatInput,O.MatFormField,O.MatLabel,O.MatError,P.Uo,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,z.TranslateDirective,A.GalleryImageInputComponent,u.RuleChainAutocompleteComponent,L.AsyncPipe,z.TranslatePipe],encapsulation:2})}}},19325:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileAutocompleteComponent:()=>ye});var e=n(31635),t=n(93953),c=n(89417),h=n(7673),V=n(719),S=n(67496),G=n(88141),K=n(96354),H=n(70152),k=n(23294),Q=n(25558),z=n(97647),L=n(99437),B=n(33596),I=n(97435),U=n(67336),F=n(37955),a=n(5095),O=n(14246),P=n(10057),A=n(34019),u=n(29543),m=n(27997),p=n(29225),v=n(63729),T=n(9437),C=n(9310),_=n(73955),E=n(34006),f=n(60177),g=n(88834),y=n(99213),b=n(59042),D=n(53719),w=n(86600),ee=n(14823),_e=n(60850),ve=n(7901),Ee=n(91009);const $=["deviceProfileInput"],be=["deviceProfileAutocomplete"],Te=re=>({entity:re});function oe(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&re){const ie=t.\u0275\u0275nextContext();t.\u0275\u0275property("routerLink",ie.deviceProfileURL),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",ie.displayDeviceProfileFn(ie.selectDeviceProfileFormGroup.get("deviceProfile").value)," ")}}function R(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ie);const Pe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Pe.clear())}),t.\u0275\u0275elementStart(1,"mat-icon",15),t.\u0275\u0275text(2,"close"),t.\u0275\u0275elementEnd()()}}function N(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(Pe){t.\u0275\u0275restoreView(ie);const Be=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Be.editDeviceProfile(Pe))}),t.\u0275\u0275elementStart(2,"mat-icon",15),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device-profile.edit"))}function Z(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(Pe){t.\u0275\u0275restoreView(ie);const Be=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Be.createDeviceProfile(Pe,""))}),t.\u0275\u0275elementStart(1,"span",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}2&re&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"notification.create-new")))}function Y(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-option",19),t.\u0275\u0275element(1,"span",20),t.\u0275\u0275pipe(2,"highlight"),t.\u0275\u0275elementEnd()),2&re){const ie=ne.$implicit,Ae=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",ie),t.\u0275\u0275advance(),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind2(2,2,ie.name,Ae.searchText),t.\u0275\u0275sanitizeHtml)}}function ge(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"div")(1,"span",24),t.\u0275\u0275text(2,"device-profile.no-device-profiles-found"),t.\u0275\u0275elementEnd()())}function ce(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span")(4,"a",25),t.\u0275\u0275listener("click",function(Pe){t.\u0275\u0275restoreView(ie);const Be=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(Be.createDeviceProfile(Pe,Be.searchText))}),t.\u0275\u0275text(5,"device-profile.create-new-device-profile"),t.\u0275\u0275elementEnd()()}if(2&re){const ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,ie.translate.get("device-profile.no-device-profiles-matching",t.\u0275\u0275pureFunction1(3,Te,ie.truncate.transform(ie.searchText,!0,6,"..."))))," ")}}function se(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",21)(1,"div",22),t.\u0275\u0275listener("click",function(Pe){return t.\u0275\u0275restoreView(ie),t.\u0275\u0275resetView(Pe.stopPropagation())}),t.\u0275\u0275template(2,ge,3,0,"div",23)(3,ce,6,5,"ng-template",null,2,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()()}if(2&re){const ie=t.\u0275\u0275reference(4),Ae=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",null),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!Ae.textIsNotEmpty(Ae.searchText)||!Ae.addNewProfile)("ngIfElse",ie)}}function J(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.device-profile-required")," "))}function de(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-hint"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re){const ie=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,ie.hint))}}class ye{constructor(ne,ie,Ae,Pe,Be,Ke,Xe){this.store=ne,this.translate=ie,this.truncate=Ae,this.deviceProfileService=Pe,this.fb=Be,this.zone=Ke,this.dialog=Xe,this.subscriptSizing="fixed",this.selectDefaultProfile=!1,this.selectFirstProfile=!1,this.displayAllOnEmpty=!1,this.editProfileEnabled=!0,this.addNewProfile=!0,this.showDetailsPageLink=!1,this.transportType=null,this.required=!1,this.deviceProfileUpdated=new t.EventEmitter,this.deviceProfileChanged=new t.EventEmitter,this.searchText="",this.useDeviceProfileLink=!0,this.dirty=!1,this.ignoreClosedPanel=!1,this.allDeviceProfile={name:this.translate.instant("device-profile.all-device-profiles"),type:a.IF.DEFAULT,transportType:a.y0.DEFAULT,id:null},this.propagateChange=at=>{},this.authUser=(0,v.rx)(this.store),this.authUser.authority===T.s.CUSTOMER_USER&&(this.useDeviceProfileLink=!1),this.selectDeviceProfileFormGroup=this.fb.group({deviceProfile:[null]})}registerOnChange(ne){this.propagateChange=ne}registerOnTouched(ne){}ngOnInit(){this.filteredDeviceProfiles=this.selectDeviceProfileFormGroup.get("deviceProfile").valueChanges.pipe((0,G.M)(ne=>{let ie;ie="string"!=typeof ne&&ne?ne:null,(!this.displayAllOnEmpty||ie)&&this.updateView(ie)}),(0,K.T)(ne=>ne?"string"==typeof ne?ne:this.displayAllOnEmpty&&ne===this.allDeviceProfile?"":ne.name:""),(0,H.B)(150),(0,k.F)(),(0,Q.n)(ne=>this.fetchDeviceProfiles(ne)),(0,z.u)())}ngOnChanges(ne){for(const ie of Object.keys(ne)){const Ae=ne[ie];!Ae.firstChange&&Ae.currentValue!==Ae.previousValue&&"transportType"===ie&&this.writeValue(null)}}selectDefaultDeviceProfileIfNeeded(){this.selectDefaultProfile&&!this.modelValue?this.deviceProfileService.getDefaultDeviceProfileInfo().subscribe(ne=>{!ne||this.transportType&&ne.transportType!==this.transportType?this.selectFirstDeviceProfileIfNeeded():(this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(ne,{emitEvent:!1}),this.updateView(ne))}):this.selectFirstDeviceProfileIfNeeded()}selectFirstDeviceProfileIfNeeded(){if(this.selectFirstProfile&&!this.modelValue){const ne=new V.Ek(1,0,null,{property:"createdTime",direction:S.O.DESC});this.deviceProfileService.getDeviceProfileInfos(ne,this.transportType,{ignoreLoading:!0}).subscribe(ie=>{const Ae=ie.data;Ae.length&&(this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(Ae[0],{emitEvent:!1}),this.updateView(Ae[0]))})}}setDisabledState(ne){this.disabled=ne,this.disabled?this.selectDeviceProfileFormGroup.disable({emitEvent:!1}):this.selectDeviceProfileFormGroup.enable({emitEvent:!1})}writeValue(ne){this.searchText="",null!=ne?this.deviceProfileService.getDeviceProfileInfo(ne.id).subscribe(ie=>{this.modelValue=new F.T(ie.id.id),this.useDeviceProfileLink&&(this.deviceProfileURL=(0,m.e9)(this.modelValue.id,this.modelValue.entityType)),this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(ie,{emitEvent:!1}),this.deviceProfileChanged.emit(ie)}):this.displayAllOnEmpty?(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(this.allDeviceProfile,{emitEvent:!1})):(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultDeviceProfileIfNeeded()),this.dirty=!0}onFocus(){this.dirty&&(this.selectDeviceProfileFormGroup.get("deviceProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)}onPanelClosed(){this.ignoreClosedPanel?this.ignoreClosedPanel=!1:this.displayAllOnEmpty&&!this.selectDeviceProfileFormGroup.get("deviceProfile").value&&this.zone.run(()=>{this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(this.allDeviceProfile,{emitEvent:!0})},0)}updateView(ne){const ie=ne&&ne.id?new F.T(ne.id.id):null;(0,B.s)(this.modelValue,ie)||(this.modelValue=ie,this.propagateChange(this.modelValue),this.deviceProfileChanged.emit(ne))}displayDeviceProfileFn(ne){return ne?ne.name:void 0}fetchDeviceProfiles(ne){this.searchText=ne;const ie=new V.Ek(10,0,ne,{property:"name",direction:S.O.ASC});return this.deviceProfileService.getDeviceProfileInfos(ie,this.transportType,{ignoreLoading:!0}).pipe((0,L.W)(()=>(0,h.of)((0,u.r)())),(0,K.T)(Ae=>{let Pe=Ae.data;return this.displayAllOnEmpty&&(Pe=[this.allDeviceProfile,...Pe]),Pe}))}clear(){this.ignoreClosedPanel=!0,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!0}),setTimeout(()=>{this.deviceProfileInput.nativeElement.blur(),this.deviceProfileInput.nativeElement.focus()},0)}textIsNotEmpty(ne){return ne&&ne.length>0}deviceProfileEnter(ne){this.editProfileEnabled&&ne.keyCode===U.ENTER&&(ne.preventDefault(),this.modelValue||this.createDeviceProfile(ne,this.searchText))}createDeviceProfile(ne,ie){ne.stopPropagation();const Ae={name:ie,transportType:this.transportType};this.addNewProfile&&this.openDeviceProfileDialog(Ae,!0)}editDeviceProfile(ne){ne.stopPropagation(),this.deviceProfileService.getDeviceProfile(this.modelValue.id).subscribe(ie=>{this.openDeviceProfileDialog(ie,!1)})}openDeviceProfileDialog(ne,ie){let Ae;Ae=ie?this.dialog.open(A.AddDeviceProfileDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceProfileName:ne.name,transportType:ne.transportType}}).afterClosed():this.dialog.open(P.DeviceProfileDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!1,deviceProfile:ne}}).afterClosed(),Ae.subscribe(Pe=>{Pe?this.deviceProfileService.getDeviceProfileInfo(Pe.id.id).subscribe(Be=>{this.modelValue=new F.T(Be.id.id),this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(Be,{emitEvent:!0}),ie?this.propagateChange(this.modelValue):this.deviceProfileUpdated.next(Pe.id),this.deviceProfileChanged.emit(Be)}):setTimeout(()=>{this.deviceProfileInput.nativeElement.blur(),this.deviceProfileInput.nativeElement.focus()},0)})}static{this.\u0275fac=function(ie){return new(ie||ye)(t.\u0275\u0275directiveInject(C.Store),t.\u0275\u0275directiveInject(_.TranslateService),t.\u0275\u0275directiveInject(I.TruncatePipe),t.\u0275\u0275directiveInject(O.N),t.\u0275\u0275directiveInject(c.UntypedFormBuilder),t.\u0275\u0275directiveInject(t.NgZone),t.\u0275\u0275directiveInject(E.MatDialog))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:ye,selectors:[["tb-device-profile-autocomplete"]],viewQuery:function(ie,Ae){if(1&ie&&(t.\u0275\u0275viewQuery($,7),t.\u0275\u0275viewQuery(be,7)),2&ie){let Pe;t.\u0275\u0275queryRefresh(Pe=t.\u0275\u0275loadQuery())&&(Ae.deviceProfileInput=Pe.first),t.\u0275\u0275queryRefresh(Pe=t.\u0275\u0275loadQuery())&&(Ae.deviceProfileAutocomplete=Pe.first)}},inputs:{subscriptSizing:"subscriptSizing",selectDefaultProfile:"selectDefaultProfile",selectFirstProfile:"selectFirstProfile",displayAllOnEmpty:"displayAllOnEmpty",editProfileEnabled:"editProfileEnabled",addNewProfile:"addNewProfile",showDetailsPageLink:"showDetailsPageLink",transportType:"transportType",required:"required",disabled:"disabled",hint:"hint"},outputs:{deviceProfileUpdated:"deviceProfileUpdated",deviceProfileChanged:"deviceProfileChanged"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>ye),multi:!0}]),t.\u0275\u0275NgOnChangesFeature],decls:18,vars:22,consts:[["deviceProfileInput",""],["deviceProfileAutocomplete","matAutocomplete"],["searchNotEmpty",""],[1,"mat-block",3,"formGroup","subscriptSizing"],["matInput","","type","text","formControlName","deviceProfile",3,"focusin","keydown","keypress","required","matAutocomplete"],["aria-label","Open device profile",3,"routerLink",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","color","primary","matSuffix","",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"closed","displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["aria-label","Open device profile",3,"routerLink"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"click","matTooltip"],["mat-button","","color","primary","matSuffix","",3,"click"],[2,"white-space","nowrap"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["translate",""],["translate","",3,"click"]],template:function(ie,Ae){if(1&ie){const Pe=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"input",4,0),t.\u0275\u0275listener("focusin",function(){return t.\u0275\u0275restoreView(Pe),t.\u0275\u0275resetView(Ae.onFocus())})("keydown",function(Ke){return t.\u0275\u0275restoreView(Pe),t.\u0275\u0275resetView(Ae.deviceProfileEnter(Ke))})("keypress",function(Ke){return t.\u0275\u0275restoreView(Pe),t.\u0275\u0275resetView(Ae.deviceProfileEnter(Ke))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,oe,2,2,"a",5)(7,R,3,0,"button",6)(8,N,4,3,"button",7)(9,Z,4,3,"button",8),t.\u0275\u0275elementStart(10,"mat-autocomplete",9,1),t.\u0275\u0275listener("closed",function(){return t.\u0275\u0275restoreView(Pe),t.\u0275\u0275resetView(Ae.onPanelClosed())}),t.\u0275\u0275template(12,Y,3,5,"mat-option",10),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275template(14,se,5,3,"mat-option",11),t.\u0275\u0275pipe(15,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,J,3,3,"mat-error",12)(17,de,3,3,"mat-hint",12),t.\u0275\u0275elementEnd()}if(2&ie){let Pe,Be;const Ke=t.\u0275\u0275reference(11);t.\u0275\u0275propertyInterpolate("subscriptSizing",Ae.subscriptSizing),t.\u0275\u0275property("formGroup",Ae.selectDeviceProfileFormGroup),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,16,"device-profile.device-profile")),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("!hidden",Ae.showDetailsPageLink&&Ae.useDeviceProfileLink&&Ae.disabled&&Ae.selectDeviceProfileFormGroup.get("deviceProfile").value),t.\u0275\u0275property("required",Ae.required)("matAutocomplete",Ke),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Ae.showDetailsPageLink&&Ae.useDeviceProfileLink&&Ae.selectDeviceProfileFormGroup.get("deviceProfile").value&&Ae.disabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",Ae.selectDeviceProfileFormGroup.get("deviceProfile").value&&!Ae.disabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",(null==(Pe=Ae.selectDeviceProfileFormGroup.get("deviceProfile").value)?null:Pe.id)&&!Ae.disabled&&Ae.editProfileEnabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!Ae.selectDeviceProfileFormGroup.get("deviceProfile").value&&!Ae.disabled&&Ae.addNewProfile),t.\u0275\u0275advance(),t.\u0275\u0275property("displayWith",Ae.displayDeviceProfileFn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(13,18,Ae.filteredDeviceProfiles)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(null!=(Be=t.\u0275\u0275pipeBind1(15,20,Ae.filteredDeviceProfiles))&&Be.length)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Ae.selectDeviceProfileFormGroup.get("deviceProfile").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",Ae.hint&&!Ae.disabled)}},dependencies:[f.NgForOf,f.NgIf,g.MatButton,g.MatIconButton,y.MatIcon,b.MatInput,D.MatFormField,D.MatLabel,D.MatHint,D.MatError,D.MatSuffix,w.MatOption,ee.MatTooltip,_e.MatAutocomplete,_e.MatAutocompleteTrigger,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,ve.RouterLink,_.TranslateDirective,f.AsyncPipe,Ee.HighlightPipe,_.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none;color:inherit}[_nghost-%COMP%]     .mat-mdc-form-field-icon-suffix{display:flex}']})}}(0,e.__decorate)([(0,p.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],ye.prototype,"selectDefaultProfile",void 0),(0,e.__decorate)([(0,p.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],ye.prototype,"editProfileEnabled",void 0),(0,e.__decorate)([(0,p.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],ye.prototype,"addNewProfile",void 0),(0,e.__decorate)([(0,p.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],ye.prototype,"required",void 0)},10057:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileDialogComponent:()=>O});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(98442),S=n(14246),G=n(9310),K=n(7901),H=n(60177),k=n(88834),Q=n(99213),z=n(67575),L=n(55911),B=n(89417),I=n(73955);const U=["deviceProfileComponent"];function F(P,A){1&P&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function a(P,A){1&P&&e.\u0275\u0275element(0,"div",14)}class O extends h.m{constructor(A,u,m,p,v,T){super(A,u,p),this.store=A,this.router=u,this.data=m,this.dialogRef=p,this.errorStateMatcher=v,this.deviceProfileService=T,this.submitted=!1,this.isAdd=this.data.isAdd,this.deviceProfile=this.data.deviceProfile}ngAfterViewInit(){this.isAdd&&setTimeout(()=>{this.deviceProfileComponent.entityForm.markAsDirty()},0)}isErrorState(A,u){const m=this.errorStateMatcher.isErrorState(A,u),p=!!(A&&A.invalid&&this.submitted);return m||p}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.deviceProfileComponent.entityForm.valid&&(this.deviceProfile={...this.deviceProfile,...this.deviceProfileComponent.entityFormValue()},this.deviceProfileService.saveDeviceProfileAndConfirmOtaChange(this.deviceProfile,this.deviceProfile).subscribe(A=>{this.dialogRef.close(A)}))}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(S.N))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-device-profile-dialog"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(U,7),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.deviceProfileComponent=p.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:O}]),e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:24,consts:[["deviceProfileComponent",""],[2,"width","1000px",3,"ngSubmit"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",3),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,F,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,a,1,0,"div",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"tb-device-profile",9,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",10)(17,"button",11),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",12),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()}if(2&u){const p=e.\u0275\u0275reference(15);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,10,m.isAdd?"device-profile.add":"device-profile.edit")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,12,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,14,m.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("standalone",!0)("entity",m.deviceProfile)("isEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,16,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,18,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,20,m.isLoading$)||(null==p.entityForm?null:p.entityForm.invalid)||!(null!=p.entityForm&&p.entityForm.dirty)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,22,m.isAdd?"action.add":"action.save")," ")}},dependencies:[H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatProgressBar,L.MatToolbar,c.MatDialogActions,c.MatDialogContent,B.\u0275NgNoValidate,B.NgControlStatusGroup,B.NgForm,V.DeviceProfileComponent,H.AsyncPipe,I.TranslatePipe],encapsulation:2})}}},62775:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileProvisionConfigurationComponent:()=>b});var e=n(93953),t=n(89417),c=n(14085),h=n(5095),V=n(27997),S=n(78502),G=n(9310),K=n(73955),H=n(60177),k=n(63950),Q=n(88834),z=n(99213),L=n(59042),B=n(53719),I=n(82798),U=n(86600),F=n(14823),a=n(30450),O=n(89692);const P=()=>({maxWidth:"820px"});function A(D,w){if(1&D&&(e.\u0275\u0275elementStart(0,"mat-option",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D){const ee=w.$implicit,_e=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",ee),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,_e.deviceProvisionTypeTranslateMap.get(ee))," ")}}function u(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.provision-strategy-required")," "))}function m(D,w){1&D&&e.\u0275\u0275elementContainer(0)}function p(D,w){if(1&D&&e.\u0275\u0275template(0,m,1,0,"ng-container",10),2&D){e.\u0275\u0275nextContext();const ee=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",ee)}}function v(D,w){1&D&&e.\u0275\u0275elementContainer(0)}function T(D,w){if(1&D&&e.\u0275\u0275template(0,v,1,0,"ng-container",10),2&D){e.\u0275\u0275nextContext();const ee=e.\u0275\u0275reference(12);e.\u0275\u0275property("ngTemplateOutlet",ee)}}function C(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.provision-strategy-x509.certificate-value-required")," "))}function _(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.provision-strategy-x509.cn-regex-variable-required")," "))}function E(D,w){if(1&D&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275element(1,"span",12),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"span",13),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-slide-toggle",14),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"div",15),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementStart(10,"mat-form-field",2)(11,"mat-label",3),e.\u0275\u0275text(12,"device-profile.provision-strategy-x509.certificate-value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"textarea",16),e.\u0275\u0275template(14,C,3,3,"mat-error",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-form-field",2)(16,"mat-label",3),e.\u0275\u0275text(17,"device-profile.provision-strategy-x509.cn-regex-variable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",17)(19,"span",18),e.\u0275\u0275template(20,_,3,3,"mat-error",6),e.\u0275\u0275elementStart(21,"mat-hint",3),e.\u0275\u0275text(22,"device-profile.provision-strategy-x509.cn-regex-variable-hint"),e.\u0275\u0275elementEnd()()),2&D){const ee=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(2,8,"device-profile.provision-strategy-x509.certificate-chain-hint"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("trigger-text",e.\u0275\u0275pipeBind1(4,10,"action.more")),e.\u0275\u0275property("tb-help-popup-style",e.\u0275\u0275pureFunction0(16,P)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,12,"device-profile.provision-strategy-x509.allow-create-new-devices")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(9,14,"device-profile.provision-strategy-x509.allow-create-new-devices-hint"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",ee.provisionConfigurationFormGroup.get("certificateValue").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("tb-help-popup-style",e.\u0275\u0275pureFunction0(17,P)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ee.provisionConfigurationFormGroup.get("certificateRegExPattern").hasError("required"))}}function f(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.provision-device-key-required")," "))}function g(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.provision-device-secret-required")," "))}function y(D,w){if(1&D){const ee=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",19)(1,"mat-form-field",20)(2,"mat-label",3),e.\u0275\u0275text(3,"device-profile.provision-device-key"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",21),e.\u0275\u0275elementStart(5,"button",22),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("cbOnSuccess",function(){e.\u0275\u0275restoreView(ee);const ve=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ve.onProvisionCopied(!0))}),e.\u0275\u0275element(7,"mat-icon",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,f,3,3,"mat-error",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",20)(10,"mat-label",3),e.\u0275\u0275text(11,"device-profile.provision-device-secret"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",24),e.\u0275\u0275elementStart(13,"button",22),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275listener("cbOnSuccess",function(){e.\u0275\u0275restoreView(ee);const ve=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ve.onProvisionCopied(!1))}),e.\u0275\u0275element(15,"mat-icon",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(16,g,3,3,"mat-error",6),e.\u0275\u0275elementEnd()()}if(2&D){const ee=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,6,"device-profile.copy-provision-key")),e.\u0275\u0275property("cbContent",ee.provisionConfigurationFormGroup.get("provisionDeviceKey").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ee.provisionConfigurationFormGroup.get("provisionDeviceKey").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(14,8,"device-profile.copy-provision-secret")),e.\u0275\u0275property("cbContent",ee.provisionConfigurationFormGroup.get("provisionDeviceSecret").value),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ee.provisionConfigurationFormGroup.get("provisionDeviceSecret").hasError("required"))}}class b{get required(){return this.requiredValue}set required(w){this.requiredValue=(0,c.coerceBooleanProperty)(w)}constructor(w,ee,_e){this.store=w,this.fb=ee,this.translate=_e,this.deviceProvisionType=h.kU,this.deviceProvisionTypes=Object.keys(h.kU),this.deviceProvisionTypeTranslateMap=h.lC,this.propagateChange=ve=>{}}ngOnInit(){this.provisionConfigurationFormGroup=this.fb.group({type:[h.kU.DISABLED,t.Validators.required],provisionDeviceSecret:[{value:null,disabled:!0},t.Validators.required],provisionDeviceKey:[{value:null,disabled:!0},t.Validators.required],certificateValue:[{value:null,disabled:!0},t.Validators.required],certificateRegExPattern:[{value:null,disabled:!0},t.Validators.required],allowCreateNewDevicesByX509Certificate:[{value:null,disabled:!0},t.Validators.required]}),this.provisionConfigurationFormGroup.get("type").valueChanges.subscribe(w=>{if(w===h.kU.DISABLED){for(const ee in this.provisionConfigurationFormGroup.controls)if("type"!==ee){const _e=this.provisionConfigurationFormGroup.get(ee);_e.disable({emitEvent:!1}),_e.patchValue(null,{emitEvent:!1})}}else if(w===h.kU.X509_CERTIFICATE_CHAIN){const ee=this.provisionConfigurationFormGroup.get("certificateValue").value;(!ee||!ee.length)&&this.provisionConfigurationFormGroup.get("certificateValue").patchValue(null,{emitEvent:!1});const _e=this.provisionConfigurationFormGroup.get("certificateRegExPattern").value;(!_e||!_e.length)&&this.provisionConfigurationFormGroup.get("certificateRegExPattern").patchValue("(.*)",{emitEvent:!1});const ve=this.provisionConfigurationFormGroup.get("allowCreateNewDevicesByX509Certificate").value;(0,V.Lm)(ve)||this.provisionConfigurationFormGroup.get("allowCreateNewDevicesByX509Certificate").patchValue(!0,{emitEvent:!1}),this.provisionConfigurationFormGroup.get("certificateValue").enable({emitEvent:!1}),this.provisionConfigurationFormGroup.get("certificateRegExPattern").enable({emitEvent:!1}),this.provisionConfigurationFormGroup.get("allowCreateNewDevicesByX509Certificate").enable({emitEvent:!1})}else{const ee=this.provisionConfigurationFormGroup.get("provisionDeviceSecret").value;(!ee||!ee.length)&&this.provisionConfigurationFormGroup.get("provisionDeviceSecret").patchValue((0,V.Kl)(20),{emitEvent:!1});const _e=this.provisionConfigurationFormGroup.get("provisionDeviceKey").value;(!_e||!_e.length)&&this.provisionConfigurationFormGroup.get("provisionDeviceKey").patchValue((0,V.Kl)(20),{emitEvent:!1}),this.provisionConfigurationFormGroup.get("provisionDeviceSecret").enable({emitEvent:!1}),this.provisionConfigurationFormGroup.get("provisionDeviceKey").enable({emitEvent:!1})}}),this.provisionConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(w){this.propagateChange=w}registerOnTouched(w){}writeValue(w){(0,V.f1)(w)?(w.type===h.kU.X509_CERTIFICATE_CHAIN&&(w.certificateValue=w.provisionDeviceSecret),this.provisionConfigurationFormGroup.patchValue(w,{emitEvent:!1})):this.provisionConfigurationFormGroup.patchValue({type:h.kU.DISABLED})}setDisabledState(w){this.disabled=w,this.disabled?this.provisionConfigurationFormGroup.disable({emitEvent:!1}):this.provisionConfigurationFormGroup.get("type").value!==h.kU.DISABLED?this.provisionConfigurationFormGroup.enable({emitEvent:!1}):this.provisionConfigurationFormGroup.get("type").enable({emitEvent:!1})}validate(w){return this.provisionConfigurationFormGroup.valid?null:{provisionConfiguration:{valid:!1}}}updateModel(){let w=null;this.resetFormControls(this.provisionConfigurationFormGroup.value),this.provisionConfigurationFormGroup.valid&&(w=this.provisionConfigurationFormGroup.getRawValue(),w.type===h.kU.X509_CERTIFICATE_CHAIN&&(w.provisionDeviceSecret=w.certificateValue)),this.propagateChange(w)}onProvisionCopied(w){this.store.dispatch(new S.xo({message:this.translate.instant(w?"device-profile.provision-key-copied-message":"device-profile.provision-secret-copied-message"),type:"success",duration:1200,verticalPosition:"bottom",horizontalPosition:"right"}))}resetFormControls(w){w.type===h.kU.CHECK_PRE_PROVISIONED_DEVICES||w.type===h.kU.ALLOW_CREATE_NEW_DEVICES?(this.provisionConfigurationFormGroup.get("certificateValue").reset({value:null,disabled:!0},{emitEvent:!1}),this.provisionConfigurationFormGroup.get("certificateRegExPattern").reset({value:null,disabled:!0},{emitEvent:!1}),this.provisionConfigurationFormGroup.get("allowCreateNewDevicesByX509Certificate").reset({value:null,disabled:!0},{emitEvent:!1})):w.type===h.kU.X509_CERTIFICATE_CHAIN&&(this.provisionConfigurationFormGroup.get("provisionDeviceSecret").reset({value:null,disabled:!0},{emitEvent:!1}),this.provisionConfigurationFormGroup.get("provisionDeviceKey").reset({value:null,disabled:!0},{emitEvent:!1}))}static{this.\u0275fac=function(ee){return new(ee||b)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(K.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["tb-device-profile-provision-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>b),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>b),multi:!0}])],decls:13,vars:7,consts:[["default",""],[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],[4,"ngTemplateOutlet"],[1,"tb-hint","flex","flex-1","items-center","justify-start"],[3,"innerHTML"],["tb-help-popup","device-profile/x509-chain-hint","tb-help-popup-placement","top","trigger-style","letter-spacing:0.25px; font-size: 12px",3,"tb-help-popup-style","trigger-text"],["formControlName","allowCreateNewDevicesByX509Certificate"],[1,"tb-hint",2,"padding","0 40px 16px",3,"innerHTML"],["matInput","","formControlName","certificateValue","cols","15","rows","5","required",""],["matInput","","type","text","formControlName","certificateRegExPattern","required",""],["matSuffix","","tb-help-popup","device-profile/x509-chain-regex-examples","tb-help-popup-placement","top","trigger-style","letter-spacing:0.25px",3,"tb-help-popup-style"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-2"],[1,"mat-block","flex-1"],["matInput","","formControlName","provisionDeviceKey","required",""],["matSuffix","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbOnSuccess","cbContent","matTooltip"],["svgIcon","mdi:clipboard-arrow-left",2,"font-size","20px"],["matInput","","formControlName","provisionDeviceSecret","required",""]],template:function(ee,_e){1&ee&&(e.\u0275\u0275elementStart(0,"div",1)(1,"mat-form-field",2)(2,"mat-label",3),e.\u0275\u0275text(3,"device-profile.provision-strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",4),e.\u0275\u0275template(5,A,3,4,"mat-option",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,u,3,3,"mat-error",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",7),e.\u0275\u0275template(8,p,1,1,"ng-template",8)(9,T,1,1,"ng-template",8)(10,E,23,18,"ng-template",8)(11,y,17,10,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()),2&ee&&(e.\u0275\u0275property("formGroup",_e.provisionConfigurationFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",_e.deviceProvisionTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_e.provisionConfigurationFormGroup.get("type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",_e.provisionConfigurationFormGroup.get("type").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",_e.deviceProvisionType.ALLOW_CREATE_NEW_DEVICES),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",_e.deviceProvisionType.CHECK_PRE_PROVISIONED_DEVICES),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",_e.deviceProvisionType.X509_CERTIFICATE_CHAIN))},dependencies:[H.NgForOf,H.NgIf,H.NgTemplateOutlet,H.NgSwitch,H.NgSwitchCase,k.HelpPopupComponent,Q.MatIconButton,z.MatIcon,L.MatInput,B.MatFormField,B.MatLabel,B.MatHint,B.MatError,B.MatSuffix,I.MatSelect,U.MatOption,F.MatTooltip,a.MatSlideToggle,O.Uo,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,K.TranslateDirective,K.TranslatePipe],encapsulation:2})}}},98442:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileComponent:()=>ce});var e=n(93953),t=n(89417),c=n(78502),V=(n(12054),n(81365)),S=n(5095),G=n(25967),K=n(88855),H=n(44464),k=n(93160),Q=n(57125),z=n(89815),L=n(9310),B=n(73955),I=n(60177),U=n(23593),F=n(48676),a=n(88834),O=n(99213),P=n(59042),A=n(53719),u=n(82798),m=n(86600),p=n(9454),v=n(89692),T=n(94588),C=n(86763),_=n(28998),E=n(14870),f=n(23313),g=n(52874),y=n(62775);const b=se=>({count:se});function D(se,J){if(1&se){const de=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"button",23),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(re){e.\u0275\u0275restoreView(de);const ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onEntityAction(re,"open"))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",23),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275listener("click",function(re){e.\u0275\u0275restoreView(de);const ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onEntityAction(re,"export"))}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",23),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("click",function(re){e.\u0275\u0275restoreView(de);const ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onEntityAction(re,"setDefault"))}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",23),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(re){e.\u0275\u0275restoreView(de);const ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onEntityAction(re,"delete"))}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",24)(18,"button",25),e.\u0275\u0275listener("cbOnSuccess",function(re){e.\u0275\u0275restoreView(de);const ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onDeviceProfileIdCopied(re))}),e.\u0275\u0275element(19,"mat-icon",26),e.\u0275\u0275elementStart(20,"span",5),e.\u0275\u0275text(21,"device-profile.copyId"),e.\u0275\u0275elementEnd()()()()}if(2&se){const de=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",de.isEdit||de.isDetailsPage),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,19,de.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,21,"common.open-details-page")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",de.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,23,de.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,25,"device-profile.export")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",de.isEdit||(null==de.entity?null:de.entity.default)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,27,de.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,29,"device-profile.set-default")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",de.hideDelete()||de.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,31,de.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,33,"device-profile.delete")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",de.isEdit),e.\u0275\u0275property("cbContent",null==de.entity||null==de.entity.id?null:de.entity.id.id)}}function w(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.name-required")," "))}function ee(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.name-max-length")," "))}function _e(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-option",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se){const de=J.$implicit,ye=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",de),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,ye.deviceProfileTypeTranslations.get(de))," ")}}function ve(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.type-required")," "))}function Ee(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-option",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se){const de=J.$implicit,ye=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",de),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,ye.deviceTransportTypeTranslations.get(de))," ")}}function $(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&se&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.transport-type-required")," "))}function be(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"mat-label",5),e.\u0275\u0275text(2,"device-profile.transport-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",28),e.\u0275\u0275template(4,Ee,3,4,"mat-option",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,$,3,3,"mat-error",7),e.\u0275\u0275elementEnd()),2&se){const de=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",de.deviceTransportTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",de.entityForm.get("transportType").hasError("required"))}}function Te(se,J){1&se&&e.\u0275\u0275element(0,"tb-device-profile-configuration",34)}function oe(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",32)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"div",5),e.\u0275\u0275text(4,"device-profile.profile-configuration"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(5,Te,1,0,"ng-template",33),e.\u0275\u0275elementEnd()),2&se&&e.\u0275\u0275property("expanded",!0)}function R(se,J){if(1&se&&e.\u0275\u0275element(0,"tb-device-profile-transport-configuration",35),2&se){const de=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("isAdd",de.isTransportTypeChanged)}}function N(se,J){1&se&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",32)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"div",5),e.\u0275\u0275text(4,"device-profile.transport-configuration"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(5,R,1,1,"ng-template",33),e.\u0275\u0275elementEnd()),2&se&&e.\u0275\u0275property("expanded",!0)}function Z(se,J){if(1&se&&e.\u0275\u0275element(0,"tb-device-profile-alarms",36),2&se){const de=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("deviceProfileId",de.deviceProfileId)}}function Y(se,J){1&se&&e.\u0275\u0275element(0,"tb-device-profile-provision-configuration",37)}function ge(se,J){if(1&se&&(e.\u0275\u0275elementStart(0,"div",29)(1,"mat-accordion",30),e.\u0275\u0275template(2,oe,6,1,"mat-expansion-panel",31)(3,N,6,1,"mat-expansion-panel",31),e.\u0275\u0275elementStart(4,"mat-expansion-panel",32)(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"div"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,Z,1,1,"ng-template",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-expansion-panel",32)(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"div",5),e.\u0275\u0275text(15,"device-profile.device-provisioning"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(16,Y,1,0,"ng-template",33),e.\u0275\u0275elementEnd()()()),2&se){const de=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",de.displayProfileConfiguration),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",de.displayTransportConfiguration),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!1),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(9,5,"device-profile.alarm-rules-with-count",e.\u0275\u0275pureFunction1(8,b,de.entityForm.get("profileData.alarms").value?de.entityForm.get("profileData.alarms").value.length:0))),e.\u0275\u0275advance(3),e.\u0275\u0275property("expanded",!0)}}class ce extends V.l{constructor(J,de,ye,re,ne,ie){super(J,ne,ye,re,ie),this.store=J,this.translate=de,this.entityValue=ye,this.entitiesTableConfigValue=re,this.fb=ne,this.cd=ie,this.standalone=!1,this.entityType=G.ck,this.deviceProfileTypes=Object.values(S.IF),this.deviceProfileTypeTranslations=S.dx,this.deviceTransportTypes=Object.values(S.y0),this.deviceTransportTypeTranslations=S.Tk,this.isTransportTypeChanged=!1,this.serviceType=H.C0.TB_RULE_ENGINE,this.edgeRuleChainType=z.UR.EDGE,this.otaUpdateType=k.Mj}hideDelete(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)}buildForm(J){this.deviceProfileId=J?.id?J.id:null,this.displayProfileConfiguration=J&&J.type&&S.SI.get(J.type).hasProfileConfiguration,this.displayTransportConfiguration=J&&J.transportType&&S.qA.get(J.transportType).hasProfileConfiguration;const de={type:J?.provisionType?J.provisionType:S.kU.DISABLED,provisionDeviceKey:J?.provisionDeviceKey,provisionDeviceSecret:J?.profileData?.provisionConfiguration?.provisionDeviceSecret,certificateRegExPattern:J?.profileData?.provisionConfiguration?.certificateRegExPattern,allowCreateNewDevicesByX509Certificate:J?.profileData?.provisionConfiguration?.allowCreateNewDevicesByX509Certificate},ye=this.fb.group({name:[J?J.name:"",[t.Validators.required,t.Validators.maxLength(255)]],type:[J?J.type:null,[t.Validators.required]],image:[J?J.image:null],transportType:[J?J.transportType:null,[t.Validators.required]],profileData:this.fb.group({configuration:[J&&!this.isAdd?J.profileData?.configuration:{},t.Validators.required],transportConfiguration:[J&&!this.isAdd?J.profileData?.transportConfiguration:{},t.Validators.required],alarms:[J&&!this.isAdd?J.profileData?.alarms:[]],provisionConfiguration:[de,t.Validators.required]}),defaultRuleChainId:[J&&J.defaultRuleChainId?J.defaultRuleChainId.id:null,[]],defaultDashboardId:[J&&J.defaultDashboardId?J.defaultDashboardId.id:null,[]],defaultQueueName:[J?J.defaultQueueName:null,[]],defaultEdgeRuleChainId:[J&&J.defaultEdgeRuleChainId?J.defaultEdgeRuleChainId.id:null,[]],firmwareId:[J?J.firmwareId:null],softwareId:[J?J.softwareId:null],description:[J?J.description:"",[]]});return ye.get("type").valueChanges.subscribe(()=>{this.deviceProfileTypeChanged(ye)}),ye.get("transportType").valueChanges.subscribe(()=>{this.deviceProfileTransportTypeChanged(ye)}),this.checkIsNewDeviceProfile(J,ye),ye}checkIsNewDeviceProfile(J,de){J&&!J.id&&(de.get("type").patchValue(S.IF.DEFAULT,{emitEvent:!0}),de.get("transportType").patchValue(S.y0.DEFAULT,{emitEvent:!0}),de.get("provisionType").patchValue(S.kU.DISABLED,{emitEvent:!0}))}deviceProfileTypeChanged(J){const de=J.get("type").value;this.displayProfileConfiguration=de&&S.SI.get(de).hasProfileConfiguration;let ye=J.getRawValue().profileData;ye||(ye={configuration:null,transportConfiguration:null}),ye.configuration=(0,S.IK)(de),J.patchValue({profileData:ye})}deviceProfileTransportTypeChanged(J){const de=J.get("transportType").value;this.displayTransportConfiguration=de&&S.qA.get(de).hasProfileConfiguration,this.isTransportTypeChanged=!0;let ye=J.getRawValue().profileData;ye||(ye={configuration:null,transportConfiguration:null}),ye.transportConfiguration=(0,S.Z_)(de),J.patchValue({profileData:ye})}updateForm(J){this.deviceProfileId=J.id,this.displayProfileConfiguration=J.type&&S.SI.get(J.type).hasProfileConfiguration,this.displayTransportConfiguration=J.transportType&&S.qA.get(J.transportType).hasProfileConfiguration;const de={type:J?.provisionType?J.provisionType:S.kU.DISABLED,provisionDeviceKey:J?.provisionDeviceKey,provisionDeviceSecret:J?.profileData?.provisionConfiguration?.provisionDeviceSecret,certificateRegExPattern:J?.profileData?.provisionConfiguration?.certificateRegExPattern,allowCreateNewDevicesByX509Certificate:J?.profileData?.provisionConfiguration?.allowCreateNewDevicesByX509Certificate};this.entityForm.patchValue({name:J.name}),this.entityForm.patchValue({type:J.type},{emitEvent:!1}),this.entityForm.patchValue({image:J.image},{emitEvent:!1}),this.entityForm.patchValue({transportType:J.transportType},{emitEvent:!1}),this.entityForm.patchValue({provisionType:J.provisionType},{emitEvent:!1}),this.entityForm.patchValue({provisionDeviceKey:J.provisionDeviceKey},{emitEvent:!1}),this.entityForm.patchValue({profileData:{configuration:J.profileData?.configuration,transportConfiguration:J.profileData?.transportConfiguration,alarms:J.profileData?.alarms,provisionConfiguration:de}},{emitEvent:!1}),this.entityForm.patchValue({defaultRuleChainId:J.defaultRuleChainId?J.defaultRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultDashboardId:J.defaultDashboardId?J.defaultDashboardId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultQueueName:J.defaultQueueName},{emitEvent:!1}),this.entityForm.patchValue({defaultEdgeRuleChainId:J.defaultEdgeRuleChainId?J.defaultEdgeRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({firmwareId:J.firmwareId},{emitEvent:!1}),this.entityForm.patchValue({softwareId:J.softwareId},{emitEvent:!1}),this.entityForm.patchValue({description:J.description},{emitEvent:!1})}prepareFormValue(J){J.defaultRuleChainId&&(J.defaultRuleChainId=new K.p(J.defaultRuleChainId)),J.defaultDashboardId&&(J.defaultDashboardId=new Q.C(J.defaultDashboardId)),J.defaultEdgeRuleChainId&&(J.defaultEdgeRuleChainId=new K.p(J.defaultEdgeRuleChainId));const de=J.profileData.provisionConfiguration;return J.provisionType=de.type,J.provisionDeviceKey=de.provisionDeviceKey,delete de.provisionDeviceKey,super.prepareFormValue(J)}onDeviceProfileIdCopied(J){this.store.dispatch(new c.xo({message:this.translate.instant("device-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}static{this.\u0275fac=function(de){return new(de||ce)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.TranslateService),e.\u0275\u0275directiveInject("entity",8),e.\u0275\u0275directiveInject("entitiesTableConfig",8),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ce,selectors:[["tb-device-profile"]],inputs:{standalone:"standalone"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:38,vars:35,consts:[["class","tb-details-buttons xs:flex xs:flex-col",4,"ngIf"],[1,"flex","flex-col"],[3,"formGroup"],[2,"min-width","0",3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultDashboardId",3,"label"],["tb-hint",""],["formControlName","defaultQueueName",3,"queueType"],["labelText","device-profile.default-edge-rule-chain","formControlName","defaultEdgeRuleChainId",3,"ruleChainType"],["formControlName","firmwareId",3,"useFullEntityId","showDetailsPageLink","type","deviceProfileId"],["formControlName","softwareId",3,"useFullEntityId","showDetailsPageLink","type","deviceProfileId"],[1,"mat-block","!hidden"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","image",1,"flex-1",3,"label"],["matInput","","formControlName","description","rows","2"],["class","mat-block",4,"ngIf"],["formGroupName","profileData","style","padding-bottom: 16px;",4,"ngIf"],[1,"tb-details-buttons","xs:flex","xs:flex-col"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"flex","flex-row","xs:flex-col"],["mat-raised-button","","ngxClipboard","",3,"cbOnSuccess","cbContent"],["svgIcon","mdi:clipboard-arrow-left"],[3,"value"],["formControlName","transportType","required",""],["formGroupName","profileData",2,"padding-bottom","16px"],["multi","true"],[3,"expanded",4,"ngIf"],[3,"expanded"],["matExpansionPanelContent",""],["formControlName","configuration"],["formControlName","transportConfiguration",3,"isAdd"],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"]],template:function(de,ye){1&de&&(e.\u0275\u0275template(0,D,22,35,"div",0),e.\u0275\u0275elementStart(1,"div",1)(2,"form",2)(3,"fieldset",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"mat-form-field",4)(6,"mat-label",5),e.\u0275\u0275text(7,"device-profile.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",6),e.\u0275\u0275template(9,w,3,3,"mat-error",7)(10,ee,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"tb-rule-chain-autocomplete",8),e.\u0275\u0275elementStart(12,"tb-dashboard-autocomplete",9),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementStart(14,"span",10),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(17,"tb-queue-autocomplete",11),e.\u0275\u0275elementStart(18,"tb-rule-chain-autocomplete",12)(19,"span",10),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"tb-ota-package-autocomplete",13)(23,"tb-ota-package-autocomplete",14),e.\u0275\u0275elementStart(24,"mat-form-field",15)(25,"mat-label",5),e.\u0275\u0275text(26,"device-profile.type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"mat-select",16),e.\u0275\u0275template(28,_e,3,4,"mat-option",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(29,ve,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"tb-gallery-image-input",18),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275elementStart(32,"mat-form-field",4)(33,"mat-label",5),e.\u0275\u0275text(34,"device-profile.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"textarea",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(36,be,6,2,"mat-form-field",20)(37,ge,17,10,"div",21),e.\u0275\u0275elementEnd()()()),2&de&&(e.\u0275\u0275property("ngIf",!ye.standalone),e.\u0275\u0275advance(),e.\u0275\u0275classProp("mat-padding",!ye.standalone),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",ye.entityForm),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,25,ye.isLoading$)||!ye.isEdit),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",ye.entityForm.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ye.entityForm.get("name").hasError("maxlength")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(13,27,"device-profile.mobile-dashboard")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,29,"device-profile.mobile-dashboard-hint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("queueType",ye.serviceType),e.\u0275\u0275advance(),e.\u0275\u0275property("ruleChainType",ye.edgeRuleChainType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,31,"device-profile.default-edge-rule-chain-hint")),e.\u0275\u0275advance(2),e.\u0275\u0275property("useFullEntityId",!0)("showDetailsPageLink",!0)("type",ye.otaUpdateType.FIRMWARE)("deviceProfileId",null==ye.deviceProfileId?null:ye.deviceProfileId.id),e.\u0275\u0275advance(),e.\u0275\u0275property("useFullEntityId",!0)("showDetailsPageLink",!0)("type",ye.otaUpdateType.SOFTWARE)("deviceProfileId",null==ye.deviceProfileId?null:ye.deviceProfileId.id),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",ye.deviceProfileTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ye.entityForm.get("type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(31,33,"device-profile.image")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",ye.standalone),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ye.standalone))},dependencies:[I.NgForOf,I.NgIf,U.DashboardAutocompleteComponent,F.QueueAutocompleteComponent,a.MatButton,O.MatIcon,P.MatInput,A.MatFormField,A.MatLabel,A.MatError,u.MatSelect,m.MatOption,p.MatAccordion,p.MatExpansionPanel,p.MatExpansionPanelHeader,p.MatExpansionPanelTitle,p.MatExpansionPanelContent,v.Uo,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,B.TranslateDirective,T.OtaPackageAutocompleteComponent,C.GalleryImageInputComponent,_.DeviceProfileConfigurationComponent,E.DeviceProfileTransportConfigurationComponent,f.DeviceProfileAlarmsComponent,g.RuleChainAutocompleteComponent,y.DeviceProfileProvisionConfigurationComponent,I.AsyncPipe,B.TranslatePipe],encapsulation:2})}}},25046:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{CoapDeviceProfileTransportConfigurationComponent:()=>T});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(18530),S=n(56977),G=n(68488),K=n(9310),H=n(60177),k=n(53719),Q=n(82798),z=n(86600),L=n(73955),B=n(40281),I=n(84469);function U(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"mat-option",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C){const E=_.$implicit,f=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",E),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,f.coapTransportDeviceTypeTranslations.get(E))," ")}}function F(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.coap-device-type-required")," "))}function a(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"mat-option",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C){const E=_.$implicit,f=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",E),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,f.transportPayloadTypeTranslations.get(E))," ")}}function O(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.mqtt-payload-type-required")," "))}function P(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.telemetry-proto-schema-required")," "))}function A(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.attributes-proto-schema-required")," "))}function u(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.rpc-request-proto-schema-required")," "))}function m(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.rpc-response-proto-schema-required")," "))}function p(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275element(2,"tb-protobuf-content",17),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,P,3,3,"mat-error",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5),e.\u0275\u0275element(6,"tb-protobuf-content",18),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275template(8,A,3,3,"mat-error",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(9),e.\u0275\u0275element(10,"tb-protobuf-content",19),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275template(12,u,3,3,"mat-error",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13),e.\u0275\u0275element(14,"tb-protobuf-content",20),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275template(16,m,3,3,"mat-error",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&C){const E=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(3,12,"device-profile.telemetry-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(7,14,"device-profile.attributes-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(11,16,"device-profile.rpc-request-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceRpcRequestProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(15,18,"device-profile.rpc-response-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",E.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceRpcResponseProtoSchema").hasError("required"))}}function v(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"div",13)(1,"fieldset",2)(2,"legend",3),e.\u0275\u0275text(3,"device-profile.coap-device-payload-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4)(5,"mat-form-field",5)(6,"mat-select",14),e.\u0275\u0275template(7,a,3,4,"mat-option",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,O,3,3,"mat-error",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,p,17,20,"div",15),e.\u0275\u0275elementEnd()()()),2&C){const E=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",E.transportPayloadTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.protoPayloadType)}}class T{constructor(_,E){this.store=_,this.fb=E,this.coapTransportDeviceTypes=Object.values(c.Bm),this.coapTransportDeviceTypeTranslations=c.jO,this.transportPayloadTypes=Object.values(c.mU),this.transportPayloadTypeTranslations=c.p$,this.destroy$=new V.B,this.transportPayloadTypeConfiguration=this.fb.group({transportPayloadType:[c.mU.JSON,t.Validators.required],deviceTelemetryProtoSchema:[c._f,t.Validators.required],deviceAttributesProtoSchema:[c.sd,t.Validators.required],deviceRpcRequestProtoSchema:[c.vF,t.Validators.required],deviceRpcResponseProtoSchema:[c.JG,t.Validators.required]}),this.propagateChange=f=>{}}registerOnChange(_){this.propagateChange=_}registerOnTouched(_){}ngOnInit(){this.coapTransportConfigurationFormGroup=this.fb.group({coapDeviceTypeConfiguration:this.fb.group({coapDeviceType:[c.Bm.DEFAULT,t.Validators.required],transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration}),clientSettings:this.fb.group({powerMode:[G.xO.DRX,t.Validators.required],edrxCycle:[{disabled:!0,value:0},t.Validators.required],psmActivityTimer:[{disabled:!0,value:0},t.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},t.Validators.required]})}),this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(_=>{this.updateCoapDeviceTypeBasedControls(_,!0)}),this.coapTransportConfigurationFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get coapDeviceTypeDefault(){return this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").value===c.Bm.DEFAULT}get protoPayloadType(){return this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").value===c.mU.PROTOBUF}get clientSettingsFormGroup(){return this.coapTransportConfigurationFormGroup.get("clientSettings")}updateCoapDeviceTypeBasedControls(_,E=!1){const f=this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration");E&&f.patchValue({transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration},{emitEvent:!1}),_!==c.Bm.DEFAULT||this.disabled?f.get("transportPayloadTypeConfiguration").disable({emitEvent:!1}):f.get("transportPayloadTypeConfiguration").enable({emitEvent:!1})}setDisabledState(_){this.disabled=_,this.disabled?this.coapTransportConfigurationFormGroup.disable({emitEvent:!1}):(this.coapTransportConfigurationFormGroup.enable({emitEvent:!1}),this.coapTransportConfigurationFormGroup.get("clientSettings.powerMode").updateValueAndValidity({onlySelf:!0}))}writeValue(_){(0,h.f1)(_)&&(_.clientSettings||(_.clientSettings={powerMode:G.xO.DRX}),this.coapTransportConfigurationFormGroup.patchValue(_,{emitEvent:!1}),this.disabled||this.coapTransportConfigurationFormGroup.get("clientSettings.powerMode").updateValueAndValidity({onlySelf:!0}),this.updateCoapDeviceTypeBasedControls(_.coapDeviceTypeConfiguration?.coapDeviceType))}validate(_){return this.coapTransportConfigurationFormGroup.valid?null:{valid:!1}}updateModel(){const _=this.coapTransportConfigurationFormGroup.value;_.type=c.y0.COAP,this.propagateChange(_)}static{this.\u0275fac=function(E){return new(E||T)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["tb-coap-device-profile-transport-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>T),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>T),multi:!0}])],decls:16,vars:5,consts:[[2,"padding-bottom","16px",3,"formGroup"],["formGroupName","coapDeviceTypeConfiguration"],[1,"fields-group"],["translate","",1,"group-title"],[1,"flex","flex-col","gap-2"],[1,"mat-block"],["formControlName","coapDeviceType","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","transportPayloadTypeConfiguration",4,"ngIf"],["formGroupName","clientSettings"],[3,"parentForm"],[3,"value"],["formGroupName","transportPayloadTypeConfiguration"],["formControlName","transportPayloadType","required",""],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["formControlName","deviceTelemetryProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceAttributesProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceRpcRequestProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceRpcResponseProtoSchema",1,"flex-1",3,"label","fillHeight"]],template:function(E,f){1&E&&(e.\u0275\u0275elementStart(0,"form",0)(1,"section",1)(2,"fieldset",2)(3,"legend",3),e.\u0275\u0275text(4,"device-profile.coap-device-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4)(6,"mat-form-field",5)(7,"mat-select",6),e.\u0275\u0275template(8,U,3,4,"mat-option",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,F,3,3,"mat-error",8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(10,v,10,3,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"section",10)(12,"fieldset",2)(13,"legend",3),e.\u0275\u0275text(14,"device-profile.power-saving-mode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"tb-power-mode-settings",11),e.\u0275\u0275elementEnd()()()),2&E&&(e.\u0275\u0275property("formGroup",f.coapTransportConfigurationFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",f.coapTransportDeviceTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",f.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",f.coapDeviceTypeDefault),e.\u0275\u0275advance(5),e.\u0275\u0275property("parentForm",f.clientSettingsFormGroup))},dependencies:[H.NgForOf,H.NgIf,k.MatFormField,k.MatError,Q.MatSelect,z.MatOption,t.\u0275NgNoValidate,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,L.TranslateDirective,B.ProtobufContentComponent,I.I,L.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0}']})}}},59780:(Re,X,n)=>{"use strict";n.d(X,{N:()=>S});var e=n(93953),t=n(84469),c=n(19440),h=n(60177),V=n(10074);class S{static{this.\u0275fac=function(H){return new(H||S)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:S})}static{this.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.CommonModule,c.G]})}}(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(S,{declarations:[t.I,V.L],imports:[h.CommonModule,c.G],exports:[t.I]})},84469:(Re,X,n)=>{"use strict";n.d(X,{I:()=>F});var e=n(93953),t=n(68488),c=n(56977),h=n(18530),V=n(60177),S=n(53719),G=n(82798),K=n(86600),H=n(89417),k=n(10074),Q=n(73955);function z(a,O){1&a&&(e.\u0275\u0275elementStart(0,"mat-label"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"device-profile.power-saving-mode")))}function L(a,O){1&a&&(e.\u0275\u0275elementStart(0,"mat-option",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275property("value",null),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,2,"device-profile.power-saving-mode-type.default")))}function B(a,O){if(1&a&&(e.\u0275\u0275elementStart(0,"mat-option",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&a){const P=O.$implicit,A=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",P),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,A.powerModeTranslationMap.get(P))," ")}}function I(a,O){1&a&&(e.\u0275\u0275elementStart(0,"section",1),e.\u0275\u0275element(1,"tb-time-unit-select",9)(2,"tb-time-unit-select",10),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(),e.\u0275\u0275property("labelText","device-profile.edrx-cycle")("requiredText","device-profile.edrx-cycle-required")("patternText","device-profile.edrx-cycle-pattern")("minTime",5120)("minText","device-profile.edrx-cycle-min"),e.\u0275\u0275advance(),e.\u0275\u0275property("labelText","device-profile.paging-transmission-window")("requiredText","device-profile.paging-transmission-window-required")("patternText","device-profile.paging-transmission-window-pattern")("minTime",1280)("minText","device-profile.paging-transmission-window-min"))}function U(a,O){1&a&&e.\u0275\u0275element(0,"tb-time-unit-select",11),2&a&&e.\u0275\u0275property("labelText","device-profile.psm-activity-timer")("requiredText","device-profile.psm-activity-timer-required")("patternText","device-profile.psm-activity-timer-pattern")("minTime",1280)("minText","device-profile.psm-activity-timer-min")}class F{constructor(){this.powerMods=Object.values(t.xO),this.powerModeTranslationMap=t.yP,this.destroy$=new h.B,this.isDeviceSetting=!1}ngOnInit(){this.parentForm.get("powerMode").valueChanges.pipe((0,c.Q)(this.destroy$)).subscribe(O=>{O===t.xO.E_DRX?(this.parentForm.get("edrxCycle").enable({emitEvent:!1}),this.parentForm.get("pagingTransmissionWindow").enable({emitEvent:!1}),this.disablePSKMode()):O===t.xO.PSM?(this.parentForm.get("psmActivityTimer").enable({emitEvent:!1}),this.disableEdrxMode()):(this.disableEdrxMode(),this.disablePSKMode())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}disablePSKMode(){this.parentForm.get("psmActivityTimer").disable({emitEvent:!1}),this.parentForm.get("psmActivityTimer").reset(t.Tj,{emitEvent:!1})}disableEdrxMode(){this.parentForm.get("edrxCycle").disable({emitEvent:!1}),this.parentForm.get("edrxCycle").reset(t.TX,{emitEvent:!1}),this.parentForm.get("pagingTransmissionWindow").disable({emitEvent:!1}),this.parentForm.get("pagingTransmissionWindow").reset(t.tE,{emitEvent:!1})}static{this.\u0275fac=function(P){return new(P||F)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["tb-power-mode-settings"]],inputs:{parentForm:"parentForm",isDeviceSetting:"isDeviceSetting"},decls:8,vars:6,consts:[[3,"formGroup"],[1,"mat-block","flex-1"],[4,"ngIf"],["formControlName","powerMode"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block flex-1",4,"ngIf"],["formControlName","psmActivityTimer",3,"labelText","requiredText","patternText","minTime","minText",4,"ngIf"],[3,"value"],["formControlName","edrxCycle",3,"labelText","requiredText","patternText","minTime","minText"],["formControlName","pagingTransmissionWindow",3,"labelText","requiredText","patternText","minTime","minText"],["formControlName","psmActivityTimer",3,"labelText","requiredText","patternText","minTime","minText"]],template:function(P,A){1&P&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-form-field",1),e.\u0275\u0275template(2,z,3,3,"mat-label",2),e.\u0275\u0275elementStart(3,"mat-select",3),e.\u0275\u0275template(4,L,3,4,"mat-option",4)(5,B,3,4,"mat-option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,I,3,10,"section",6)(7,U,1,5,"tb-time-unit-select",7),e.\u0275\u0275elementEnd()),2&P&&(e.\u0275\u0275property("formGroup",A.parentForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",A.isDeviceSetting),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",A.isDeviceSetting),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",A.powerMods),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","E_DRX"===A.parentForm.get("powerMode").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf","PSM"===A.parentForm.get("powerMode").value))},dependencies:[V.NgForOf,V.NgIf,S.MatFormField,S.MatLabel,G.MatSelect,K.MatOption,H.NgControlStatus,H.NgControlStatusGroup,H.FormGroupDirective,H.FormControlName,k.L,Q.TranslatePipe],encapsulation:2})}}},10074:(Re,X,n)=>{"use strict";n.d(X,{L:()=>a});var e=n(93953),t=n(89417),c=n(18530),h=n(56977),V=n(53244),S=n(27997),G=n(60177),K=n(59042),H=n(53719),k=n(82798),Q=n(86600),z=n(73955);const L=O=>({min:O});function B(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,A.requiredText)," ")}}function I(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,A.patternText)," ")}}function U(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,A.minText||A.patternText,e.\u0275\u0275pureFunction1(4,L,A.minTime/1e3))," ")}}function F(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=P.$implicit,u=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",A),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,u.timeUnitTranslations.get(A))," ")}}class a{constructor(P){this.fb=P,this.timeUnits=Object.values({...V.hz,...V.yr}).filter(A=>A!==V.yr.DAYS),this.timeUnitTranslations=V.L9,this.destroy$=new c.B,this.timeUnitToTimeMap=new Map([[V.hz.MILLISECONDS,1],[V.yr.SECONDS,V.Z2],[V.yr.MINUTES,V.pY],[V.yr.HOURS,V.dp]]),this.timeToTimeUnitMap=new Map([[V.Z2,V.hz.MILLISECONDS],[V.pY,V.yr.SECONDS],[V.dp,V.yr.MINUTES]]),this.minTime=0,this.propagateChange=A=>{}}ngOnInit(){this.timeUnitSelectFormGroup=this.fb.group({time:[0,[t.Validators.required,t.Validators.min(this.minTime),t.Validators.pattern("[0-9]*")]],unit:[V.hz.MILLISECONDS]}),this.timeUnitSelectFormGroup.valueChanges.pipe((0,h.Q)(this.destroy$)).subscribe(P=>{this.updateModel(P)}),this.timeUnitSelectFormGroup.get("unit").valueChanges.pipe((0,h.Q)(this.destroy$)).subscribe(P=>{if(this.minTime>0){const A=this.timeUnitToTimeMap.get(P),u=Math.ceil(this.minTime/A);this.timeUnitSelectFormGroup.get("time").setValidators([t.Validators.required,t.Validators.min(u),t.Validators.pattern("[0-9]*")]),this.timeUnitSelectFormGroup.get("time").updateValueAndValidity({emitEvent:!1})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(P){this.propagateChange=P}registerOnTouched(P){}setDisabledState(P){this.disabled=P,this.disabled?this.timeUnitSelectFormGroup.disable({emitEvent:!1}):this.timeUnitSelectFormGroup.enable({emitEvent:!1})}writeValue(P){const A={time:0,unit:V.hz.MILLISECONDS};(0,S.f1)(P)&&(0,S.Et)(P)&&P>=0&&(A.unit=this.calculateTimeUnit(P),A.time=P/this.timeUnitToTimeMap.get(A.unit)),this.timeUnitSelectFormGroup.reset(A,{emitEvent:!1}),this.timeUnitSelectFormGroup.get("unit").updateValueAndValidity({onlySelf:!0})}validate(){return this.timeUnitSelectFormGroup.valid?null:{timeUnitSelect:!1}}updateModel(P){const A=P.time*this.timeUnitToTimeMap.get(P.unit);this.propagateChange(A)}calculateTimeUnit(P){if(0===P)return V.hz.MILLISECONDS;const A=this.timeToTimeUnitMap[Symbol.iterator]();let u=A.next();for(;!u.done;){if(!Number.isInteger(P/u.value[0]))return u.value[1];u=A.next()}return V.yr.HOURS}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-time-unit-select"]],inputs:{disabled:"disabled",labelText:"labelText",requiredText:"requiredText",patternText:"patternText",minTime:"minTime",minText:"minText"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>a),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>a),multi:!0}])],decls:14,vars:8,consts:[[1,"flex","flex-row","xs:flex-col","gt-xs:gap-2",3,"formGroup"],[1,"mat-block","flex-1"],["matInput","","type","number","min","0","formControlName","time","required",""],[4,"ngIf"],["translate",""],["formControlName","unit"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-form-field",1)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",2),e.\u0275\u0275template(6,B,3,3,"mat-error",3)(7,I,3,3,"mat-error",3)(8,U,3,6,"mat-error",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",1)(10,"mat-label",4),e.\u0275\u0275text(11,"device-profile.condition-duration-time-unit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",5),e.\u0275\u0275template(13,F,3,4,"mat-option",6),e.\u0275\u0275elementEnd()()()),2&A&&(e.\u0275\u0275property("formGroup",u.timeUnitSelectFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,u.labelText)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",u.timeUnitSelectFormGroup.get("time").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",u.timeUnitSelectFormGroup.get("time").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",u.timeUnitSelectFormGroup.get("time").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",u.timeUnits))},dependencies:[G.NgForOf,G.NgIf,K.MatInput,H.MatFormField,H.MatLabel,H.MatError,k.MatSelect,Q.MatOption,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.FormGroupDirective,t.FormControlName,z.TranslateDirective,z.TranslatePipe],encapsulation:2})}}},93166:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DefaultDeviceProfileConfigurationComponent:()=>V});var e=n(93953),t=n(89417),c=n(5095),h=n(9310);class V{constructor(G,K){this.store=G,this.fb=K,this.propagateChange=H=>{}}registerOnChange(G){this.propagateChange=G}registerOnTouched(G){}ngOnInit(){this.defaultDeviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,t.Validators.required]}),this.defaultDeviceProfileConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(G){this.disabled=G,this.disabled?this.defaultDeviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileConfigurationFormGroup.enable({emitEvent:!1})}writeValue(G){this.defaultDeviceProfileConfigurationFormGroup.patchValue({configuration:G},{emitEvent:!1})}updateModel(){let G=null;this.defaultDeviceProfileConfigurationFormGroup.valid&&(G=this.defaultDeviceProfileConfigurationFormGroup.getRawValue().configuration,G.type=c.IF.DEFAULT),this.propagateChange(G)}static{this.\u0275fac=function(K){return new(K||V)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["tb-default-device-profile-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>V),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(K,H){1&K&&e.\u0275\u0275element(0,"form",0),2&K&&e.\u0275\u0275property("formGroup",H.defaultDeviceProfileConfigurationFormGroup)},dependencies:[t.\u0275NgNoValidate,t.NgControlStatusGroup,t.FormGroupDirective],encapsulation:2})}}},53294:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DefaultDeviceProfileTransportConfigurationComponent:()=>V});var e=n(93953),t=n(89417),c=n(5095),h=n(9310);class V{constructor(G,K){this.store=G,this.fb=K,this.propagateChange=H=>{}}registerOnChange(G){this.propagateChange=G}registerOnTouched(G){}ngOnInit(){this.defaultDeviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,t.Validators.required]}),this.defaultDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(G){this.disabled=G,this.disabled?this.defaultDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})}writeValue(G){this.defaultDeviceProfileTransportConfigurationFormGroup.patchValue({configuration:G},{emitEvent:!1})}validate(G){return this.defaultDeviceProfileTransportConfigurationFormGroup.valid?null:{configuration:{valid:!1}}}updateModel(){const G=this.defaultDeviceProfileTransportConfigurationFormGroup.getRawValue().configuration;G.type=c.y0.DEFAULT,this.propagateChange(G)}static{this.\u0275fac=function(K){return new(K||V)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["tb-default-device-profile-transport-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>V),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>V),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(K,H){1&K&&e.\u0275\u0275element(0,"form",0),2&K&&e.\u0275\u0275property("formGroup",H.defaultDeviceProfileTransportConfigurationFormGroup)},dependencies:[t.\u0275NgNoValidate,t.NgControlStatusGroup,t.FormGroupDirective],encapsulation:2})}}},28998:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileConfigurationComponent:()=>Q});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(18530),S=n(56977),G=n(9310),K=n(60177),H=n(93166);function k(z,L){1&z&&e.\u0275\u0275element(0,"tb-default-device-profile-configuration",3)}class Q{constructor(L,B){this.store=L,this.fb=B,this.deviceProfileType=c.IF,this.destroy$=new V.B,this.propagateChange=I=>{}}registerOnChange(L){this.propagateChange=L}registerOnTouched(L){}ngOnInit(){this.deviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,t.Validators.required]}),this.deviceProfileConfigurationFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setDisabledState(L){this.disabled=L,this.disabled?this.deviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileConfigurationFormGroup.enable({emitEvent:!1})}writeValue(L){this.type=L?.type;const B=(0,h.Go)(L);B&&delete B.type,this.deviceProfileConfigurationFormGroup.patchValue({configuration:B},{emitEvent:!1})}updateModel(){let L=null;this.deviceProfileConfigurationFormGroup.valid&&(L=this.deviceProfileConfigurationFormGroup.getRawValue().configuration,L.type=this.type),this.propagateChange(L)}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-device-profile-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Q),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,k,1,0,"ng-template",2),e.\u0275\u0275elementEnd()()),2&B&&(e.\u0275\u0275property("formGroup",I.deviceProfileConfigurationFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",I.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",I.deviceProfileType.DEFAULT))},dependencies:[K.NgSwitch,K.NgSwitchCase,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,H.DefaultDeviceProfileConfigurationComponent],encapsulation:2})}}},14870:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceProfileTransportConfigurationComponent:()=>F});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(9310),S=n(60177),G=n(13132),K=n(23690),H=n(53294),k=n(85009),Q=n(25046);function z(a,O){1&a&&e.\u0275\u0275element(0,"tb-default-device-profile-transport-configuration",3)}function L(a,O){1&a&&e.\u0275\u0275element(0,"tb-mqtt-device-profile-transport-configuration",3)}function B(a,O){1&a&&e.\u0275\u0275element(0,"tb-coap-device-profile-transport-configuration",3)}function I(a,O){if(1&a&&e.\u0275\u0275element(0,"tb-profile-lwm2m-device-transport-configuration",4),2&a){const P=e.\u0275\u0275nextContext();e.\u0275\u0275property("isAdd",P.isAdd)}}function U(a,O){1&a&&e.\u0275\u0275element(0,"tb-snmp-device-profile-transport-configuration",3)}class F{constructor(O,P){this.store=O,this.fb=P,this.deviceTransportType=c.y0,this.propagateChange=A=>{}}registerOnChange(O){this.propagateChange=O}registerOnTouched(O){}ngOnInit(){this.deviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null]}),this.deviceProfileTransportConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(O){this.disabled=O,this.disabled?this.deviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})}writeValue(O){this.transportType=O?.type;const P=(0,h.Go)(O);P&&delete P.type,setTimeout(()=>{this.deviceProfileTransportConfigurationFormGroup.patchValue({configuration:P})},0)}updateModel(){const O=this.deviceProfileTransportConfigurationFormGroup.getRawValue().configuration;O.type=this.transportType,this.propagateChange(O)}validate(O){return this.deviceProfileTransportConfigurationFormGroup.valid?null:{configuration:{valid:!1}}}static{this.\u0275fac=function(P){return new(P||F)(e.\u0275\u0275directiveInject(V.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:F,selectors:[["tb-device-profile-transport-configuration"]],inputs:{disabled:"disabled",isAdd:"isAdd"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>F),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>F),multi:!0}])],decls:7,vars:7,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration"],["formControlName","configuration",3,"isAdd"]],template:function(P,A){1&P&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,z,1,0,"ng-template",2)(3,L,1,0,"ng-template",2)(4,B,1,0,"ng-template",2)(5,I,1,1,"ng-template",2)(6,U,1,0,"ng-template",2),e.\u0275\u0275elementEnd()()),2&P&&(e.\u0275\u0275property("formGroup",A.deviceProfileTransportConfigurationFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",A.transportType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",A.deviceTransportType.DEFAULT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",A.deviceTransportType.MQTT),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",A.deviceTransportType.COAP),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",A.deviceTransportType.LWM2M),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",A.deviceTransportType.SNMP))},dependencies:[S.NgSwitch,S.NgSwitchCase,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,G.f,K.s,H.DefaultDeviceProfileTransportConfigurationComponent,k.MqttDeviceProfileTransportConfigurationComponent,Q.CoapDeviceProfileTransportConfigurationComponent],encapsulation:2})}}},92587:(Re,X,n)=>{"use strict";n.d(X,{A:()=>a});var e=n(93953),t=n(86600),c=n(56542),h=n(34006),V=n(9310),S=n(7901),G=n(89417),K=n(60177),H=n(88834),k=n(99213),Q=n(67575),z=n(55911),L=n(30845),B=n(73955);const I=O=>({name:O});function U(O,P){1&O&&e.\u0275\u0275element(0,"mat-progress-bar",11)}function F(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&O){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,A.isLoading$)||A.attributeFormGroup.invalid||!A.attributeFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"action.save")," ")}}class a extends c.m{constructor(P,A,u,m,p,v){super(P,A,p),this.store=P,this.router=A,this.data=u,this.errorStateMatcher=m,this.dialogRef=p,this.fb=v,this.submitted=!1,this.readonly=u.readonly,this.name=u.modelName,this.isResource=u.isResource,this.attributeFormGroup=this.fb.group({attributes:[u.attributes]}),this.readonly&&this.attributeFormGroup.disable({emitEvent:!1})}isErrorState(P,A){const u=this.errorStateMatcher.isErrorState(P,A),m=!!(P&&P.invalid&&this.submitted);return u||m}save(){this.submitted=!0,this.dialogRef.close(this.attributeFormGroup.get("attributes").value)}cancel(){this.dialogRef.close(null)}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(V.Store),e.\u0275\u0275directiveInject(S.Router),e.\u0275\u0275directiveInject(h.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(h.MatDialogRef),e.\u0275\u0275directiveInject(G.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-lwm2m-attributes-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:a}]),e.\u0275\u0275InheritDefinitionFeature],decls:19,vars:18,consts:[[2,"min-width","500px",3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["formControlName","attributes",3,"isResource"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return u.save()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,U,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",6),e.\u0275\u0275element(12,"tb-lwm2m-attributes-key-list",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",8)(14,"button",9),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275listener("click",function(){return u.cancel()}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,F,4,6,"button",10),e.\u0275\u0275elementEnd()()),2&A&&(e.\u0275\u0275property("formGroup",u.attributeFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,7,u.readonly?"device-profile.lwm2m.view-attributes":"device-profile.lwm2m.edit-attributes",e.\u0275\u0275pureFunction1(16,I,u.name))," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,10,u.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("isResource",u.isResource),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,12,u.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,14,u.readonly?"action.close":"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!u.readonly))},dependencies:[K.NgIf,H.MatButton,H.MatIconButton,k.MatIcon,Q.MatProgressBar,z.MatToolbar,h.MatDialogActions,h.MatDialogContent,G.\u0275NgNoValidate,G.NgControlStatus,G.NgControlStatusGroup,G.FormGroupDirective,G.FormControlName,L.X,K.AsyncPipe,B.TranslatePipe],encapsulation:2})}}},30845:(Re,X,n)=>{"use strict";n.d(X,{X:()=>v});var e=n(93953),t=n(89417),c=n(18530),h=n(68488),V=n(27997),S=n(69749),G=n(56977),K=n(9310),H=n(60177),k=n(88834),Q=n(99213),z=n(59042),L=n(53719),B=n(82798),I=n(86600),U=n(14823),F=n(73955);function a(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"mat-option",18),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T){const _=C.$implicit,E=e.\u0275\u0275nextContext().index,f=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",_)("disabled",f.isDisabledAttributeName(_,E)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,f.attributeNameTranslationMap.get(_))," ")}}function O(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.attribute-name-required")," "))}function P(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-error",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.attribute-value-required")," "))}function A(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-error",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.attribute-value-pattern")," "))}function u(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext().index,g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.removeKeyVal(f))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"close"),e.\u0275\u0275elementEnd()()}2&T&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.remove-attribute"))}function m(T,C){if(1&T&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-select",11),e.\u0275\u0275template(4,a,3,5,"mat-option",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,O,3,3,"mat-error",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",14),e.\u0275\u0275element(7,"input",15),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275template(9,P,3,3,"mat-error",16)(10,A,3,3,"mat-error",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,u,4,3,"button",17),e.\u0275\u0275elementEnd()()),2&T){const _=C.$implicit,E=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",_),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",E.attributeNames),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.get("name").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(8,7,"key-val.value")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.get("value").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",_.get("value").hasError("min")||_.get("value").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!E.disabled)}}function p(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",21)(1,"button",22),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.addKeyVal())}),e.\u0275\u0275elementStart(3,"mat-icon",23),e.\u0275\u0275text(4,"add_circle_outline"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()}if(2&T){const _=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,_.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,4,"device-profile.lwm2m.add-attribute")," ")}}class v extends S.H{constructor(C,_){super(C),this.store=C,this.fb=_,this.attributeNameTranslationMap=h.Vr,this.isResource=!1,this.propagateChange=null,this.destroy$=new c.B,this.usedAttributesName=[],this.attributesValueFormGroup=this.fb.group({attributesValue:this.fb.array([])}),this.attributesValueFormGroup.valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnInit(){this.isResource?this.attributeNames=Object.values(h.SC):this.attributeNames=Object.values(h.SC).filter(C=>![h.SC.lt,h.SC.gt,h.SC.st].includes(C))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(C){this.propagateChange=C}registerOnTouched(C){}setDisabledState(C){this.disabled=C,this.disabled?this.attributesValueFormGroup.disable({emitEvent:!1}):this.attributesValueFormGroup.enable({emitEvent:!1})}writeValue(C){const _=[];C&&Object.keys(C).forEach(E=>{_.push(this.createdFormGroup({name:E,value:C[E]}))}),this.attributesValueFormGroup.setControl("attributesValue",this.fb.array(_),{emitEvent:!1}),this.disabled?this.attributesValueFormGroup.disable({emitEvent:!1}):this.attributesValueFormGroup.enable({emitEvent:!1}),this.updateUsedAttributesName()}attributesValueFormArray(){return this.attributesValueFormGroup.get("attributesValue")}removeKeyVal(C){this.attributesValueFormArray().removeAt(C)}addKeyVal(){this.attributesValueFormArray().push(this.createdFormGroup()),this.attributesValueFormGroup.updateValueAndValidity({emitEvent:!1}),this.attributesValueFormGroup.invalid&&this.updateModel()}createdFormGroup(C){(0,V.z)(C)&&(C={name:this.getFirstUnusedAttributesName(),value:null});const _=this.fb.group({name:[C.name,t.Validators.required],value:[C.value,(0,h.e8)(C.name)]});return _.get("name").valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(E=>{_.get("value").setValidators((0,h.e8)(E)),_.get("value").updateValueAndValidity()}),_}validate(){return this.attributesValueFormGroup.valid?null:{attributesValue:{valid:!1}}}updateModel(){const C=this.attributesValueFormGroup.get("attributesValue").value,_={};C.forEach(E=>{_[E.name]=E.value}),this.updateUsedAttributesName(),this.propagateChange(_)}isDisabledAttributeName(C,_){const E=this.usedAttributesName.indexOf(C);return E>-1&&E!==_}getFirstUnusedAttributesName(){for(const C of this.attributeNames)if(-1===this.usedAttributesName.indexOf(C))return C;return null}updateUsedAttributesName(){this.usedAttributesName=[],this.attributesValueFormGroup.get("attributesValue").value.forEach((_,E)=>{this.usedAttributesName[E]=_.name})}get isAddEnabled(){return this.attributesValueFormArray().length!==this.attributeNames.length}static{this.\u0275fac=function(_){return new(_||v)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["tb-lwm2m-attributes-key-list"]],inputs:{disabled:"disabled",isResource:"isResource"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>v),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>v),multi:!0}]),e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[[1,"name-value-map","flex","flex-col",3,"formGroup"],[1,"flex","flex-row","gap-2",2,"max-height","40px","margin-top","8px"],["translate","",1,"tb-title","no-padding","max-w-40%","flex-full",2,"min-width","230px"],["translate","",1,"tb-title","no-padding","max-w-60%","flex-full"],[2,"width","40px"],["class","map-list flex flex-col",3,"formGroup",4,"ngFor","ngForOf"],["translate","",1,"map-list","flex","items-center","justify-center"],["style","margin-top: 9px;",4,"ngIf"],[1,"map-list","flex","flex-col",3,"formGroup"],[1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"max-w-40%","flex-full"],["formControlName","name","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"max-w-60%","flex-full"],["formControlName","value","matInput","","required","","type","number",3,"placeholder"],["class","flex flex-row",4,"ngIf"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],[1,"flex","flex-row"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],[2,"margin-top","9px"],["mat-stroked-button","","color","primary","type","button",3,"click","disabled"],[1,"button-icon"]],template:function(_,E){1&_&&(e.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"label",2),e.\u0275\u0275text(3,"device-profile.lwm2m.attribute-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",3),e.\u0275\u0275text(5,"device-profile.lwm2m.attribute-value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"span",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,m,12,9,"div",5),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275text(9,"device-profile.lwm2m.no-attributes-set"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,p,7,6,"div",7),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275property("formGroup",E.attributesValueFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275classProp("!hidden",E.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",E.attributesValueFormArray().controls),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",E.attributesValueFormArray().length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!E.disabled&&E.isAddEnabled))},dependencies:[H.NgForOf,H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatInput,L.MatFormField,L.MatError,B.MatSelect,I.MatOption,U.MatTooltip,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,F.TranslateDirective,H.AsyncPipe,F.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:relative;display:flex;height:40px}[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   span.no-data-found.disabled[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   .map-list[_ngcontent-%COMP%]{height:80px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}']})}}},9760:(Re,X,n)=>{"use strict";n.d(X,{Q:()=>L});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(92587),S=n(18530),G=n(56977),K=n(34006),H=n(88834),k=n(99213),Q=n(14823),z=n(73955);class L{set required(I){this.requiredValue=(0,c.coerceBooleanProperty)(I)}constructor(I,U){this.dialog=I,this.fb=U,this.destroy$=new S.B,this.isResource=!1,this.propagateChange=F=>{},this.editAttributesLwm2m=F=>{F&&F.stopPropagation(),this.dialog.open(V.A,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,attributes:this.attributesValueMap,modelName:this.modelName,isResource:this.isResource}}).afterClosed().subscribe(a=>{a&&this.attributesFormGroup.patchValue({attributes:a})})},this.attributesFormGroup=this.fb.group({attributes:[{}]}),this.attributesFormGroup.get("attributes").valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(F=>{this.propagateChange(F)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(I){this.propagateChange=I}registerOnTouched(I){}setDisabledState(I){this.disabled=I,I?this.attributesFormGroup.disable({emitEvent:!1}):this.attributesFormGroup.enable({emitEvent:!1})}writeValue(I){this.attributesFormGroup.patchValue({attributes:I},{emitEvent:!1})}get attributesValueMap(){return this.attributesFormGroup.get("attributes").value}isDisableBtn(){return!this.disabled&&this.isAttributeTelemetry}isEmpty(){const I=this.attributesValueMap;return(0,h.z)(I)||(0,h.Im)(I)}get tooltipSetAttributesTelemetry(){return this.isDisableBtn()?"device-profile.lwm2m.edit-attributes-select":""}get tooltipButton(){return this.disabled?"device-profile.lwm2m.view-attribute":this.isEmpty()?"device-profile.lwm2m.add-attribute":"device-profile.lwm2m.edit-attribute"}get iconButton(){return this.disabled?"visibility":this.isEmpty()?"add":"edit"}static{this.\u0275fac=function(U){return new(U||L)(e.\u0275\u0275directiveInject(K.MatDialog),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:L,selectors:[["tb-profile-lwm2m-attributes"]],inputs:{isAttributeTelemetry:"isAttributeTelemetry",modelName:"modelName",disabled:"disabled",isResource:"isResource",required:"required"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>L),multi:!0}])],decls:6,vars:10,consts:[["matTooltipPosition","above",3,"matTooltip"],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],[1,"material-icons"]],template:function(U,F){1&U&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"button",1),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275listener("click",function(O){return F.editAttributesLwm2m(O)}),e.\u0275\u0275elementStart(4,"mat-icon",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()()),2&U&&(e.\u0275\u0275classProp("!hidden",F.disabled&&F.isEmpty()),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,6,F.tooltipSetAttributesTelemetry)),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(3,8,F.tooltipButton)),e.\u0275\u0275property("disabled",F.isDisableBtn()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(F.iconButton))},dependencies:[H.MatIconButton,k.MatIcon,Q.MatTooltip,z.TranslatePipe],encapsulation:2})}}},61163:(Re,X,n)=>{"use strict";n.d(X,{X:()=>P});var e=n(93953),t=n(56542),c=n(68488),h=n(9310),V=n(7901),S=n(89417),G=n(34006),K=n(60177),H=n(88834),k=n(99213),Q=n(67575),z=n(53719),L=n(55911),B=n(82798),I=n(86600),U=n(73955);function F(A,u){1&A&&e.\u0275\u0275element(0,"mat-progress-bar",14)}function a(A,u){1&A&&e.\u0275\u0275element(0,"div",15)}function O(A,u){if(1&A&&(e.\u0275\u0275elementStart(0,"mat-option",16),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&A){const m=u.$implicit,p=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",m),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,p.serverConfigTypeNamesMap.get(m))," ")}}class P extends t.m{constructor(u,m,p,v){super(u,m,v),this.store=u,this.router=m,this.fb=p,this.dialogRef=v,this.serverTypes=Object.values(c.cF),this.serverConfigTypeNamesMap=c.Zp,this.addConfigServerFormGroup=this.fb.group({serverType:[c.cF.LWM2M]})}addServerConfig(){this.dialogRef.close(this.addConfigServerFormGroup.get("serverType").value===c.cF.BOOTSTRAP)}cancel(){this.dialogRef.close(null)}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(V.Router),e.\u0275\u0275directiveInject(S.UntypedFormBuilder),e.\u0275\u0275directiveInject(G.MatDialogRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-profile-lwm2m-bootstrap-add-config-server-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:23,consts:[[2,"width","400px",3,"formGroup"],["color","primary",1,"flex","flex-row"],["translate",""],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","",1,"flex","flex-col"],["formControlName","serverType"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-button","","mat-raised-button","","color","primary","type","button",3,"click","disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-toolbar",1)(2,"h2",2),e.\u0275\u0275text(3,"device-profile.lwm2m.add-new-server-title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",3),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275elementStart(6,"mat-icon",5),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,F,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275template(10,a,1,0,"div",7),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementStart(12,"div",8)(13,"mat-form-field")(14,"mat-label"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-select",9),e.\u0275\u0275template(18,O,3,4,"mat-option",10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",11),e.\u0275\u0275element(20,"span",3),e.\u0275\u0275elementStart(21,"button",12),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",13),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275listener("click",function(){return p.addServerConfig()}),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd()()()),2&m&&(e.\u0275\u0275property("formGroup",p.addConfigServerFormGroup),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,9,p.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!1===e.\u0275\u0275pipeBind1(11,11,p.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,13,"device-profile.lwm2m.server-type")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",p.serverTypes),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,15,p.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,17,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,19,p.isLoading$)||p.addConfigServerFormGroup.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,21,"action.add")," "))},dependencies:[K.NgForOf,K.NgIf,H.MatButton,H.MatIconButton,k.MatIcon,Q.MatProgressBar,z.MatFormField,z.MatLabel,L.MatToolbar,G.MatDialogActions,G.MatDialogContent,B.MatSelect,I.MatOption,S.\u0275NgNoValidate,S.NgControlStatus,S.NgControlStatusGroup,S.FormGroupDirective,S.FormControlName,U.TranslateDirective,K.AsyncPipe,U.TranslatePipe],encapsulation:2})}}},18967:(Re,X,n)=>{"use strict";n.d(X,{f:()=>P});var e=n(93953),t=n(89417),c=n(18530),h=n(7673),V=n(80216),S=n(61163),G=n(56977),K=n(73028),H=n(14246),k=n(91284),Q=n(73955),z=n(34006),L=n(60177),B=n(88834),I=n(9454),U=n(97588);function F(A,u){if(1&A){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"tb-profile-lwm2m-device-config-server",5),e.\u0275\u0275listener("removeServer",function(v){const T=e.\u0275\u0275restoreView(m).index,C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.removeServerConfig(v,T))})("isTransportWasRunWithBootstrapChange",function(v){e.\u0275\u0275restoreView(m);const T=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(T.updateIsTransportWasRunWithBootstrap(v))}),e.\u0275\u0275elementEnd()()}if(2&A){const m=u.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("formControl",m)("isBootstrap",m.value.bootstrapServerIs)}}function a(A,u){1&A&&(e.\u0275\u0275elementStart(0,"div",6)(1,"span",7),e.\u0275\u0275text(2,"device-profile.lwm2m.no-config-servers"),e.\u0275\u0275elementEnd()())}function O(A,u){if(1&A){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(m);const v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.addServerConfig())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()()}if(2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,m.isBootstrapServerNotAvailable()?"device-profile.lwm2m.add-lwm2m-server-config":"device-profile.lwm2m.add-server-config"))}}class P{set isBootstrapServerUpdateEnable(u){this.isBootstrapServerUpdateEnableValue=u,u||this.removeBootstrapServerConfig()}constructor(u,m,p,v,T){this.translate=u,this.matDialog=m,this.dialogService=p,this.deviceProfileService=v,this.fb=T,this.isTransportWasRunWithBootstrapChange=new e.EventEmitter,this.destroy$=new c.B,this.propagateChange=C=>{}}registerOnChange(u){this.propagateChange=u}registerOnTouched(u){}ngOnInit(){this.bootstrapConfigServersFormGroup=this.fb.group({serverConfigs:this.fb.array([])}),this.bootstrapConfigServersFormGroup.valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get serverConfigsFromArray(){return this.bootstrapConfigServersFormGroup.get("serverConfigs")}setDisabledState(u){this.disabled=u,this.disabled?this.bootstrapConfigServersFormGroup.disable({emitEvent:!1}):this.bootstrapConfigServersFormGroup.enable({emitEvent:!1})}writeValue(u){if(u?.length===this.serverConfigsFromArray.length)this.serverConfigsFromArray.patchValue(u,{emitEvent:!1});else{const m=[];u&&u.forEach(p=>{m.push(this.fb.control(p))}),this.bootstrapConfigServersFormGroup.setControl("serverConfigs",this.fb.array(m),{emitEvent:!1}),this.disabled?this.bootstrapConfigServersFormGroup.disable({emitEvent:!1}):this.bootstrapConfigServersFormGroup.enable({emitEvent:!1})}}trackByParams(u){return u}removeServerConfig(u,m){u&&(u.stopPropagation(),u.preventDefault()),this.dialogService.confirm(this.translate.instant("device-profile.lwm2m.delete-server-title"),this.translate.instant("device-profile.lwm2m.delete-server-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(p=>{p&&this.serverConfigsFromArray.removeAt(m)})}addServerConfig(){(this.isBootstrapServerNotAvailable()?(0,h.of)(!1):this.matDialog.open(S.X,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed()).pipe((0,K.Z)(p=>null===p?(0,h.of)(null):this.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(p,k.Km.NO_SEC))).subscribe(p=>{p?(p.securityMode=k.Km.NO_SEC,this.serverConfigsFromArray.push(this.fb.control(p)),this.updateModel()):(this.isTransportWasRunWithBootstrap=!1,this.isTransportWasRunWithBootstrapChange.emit(this.isTransportWasRunWithBootstrap))})}updateIsTransportWasRunWithBootstrap(u){this.isTransportWasRunWithBootstrap=u,this.isTransportWasRunWithBootstrapChange.emit(this.isTransportWasRunWithBootstrap)}validate(u){return this.bootstrapConfigServersFormGroup.valid?null:{serverConfigs:{valid:!1}}}isBootstrapServerNotAvailable(){return this.isBootstrapAdded()||!this.isBootstrapServerUpdateEnableValue||!this.isTransportWasRunWithBootstrap}isBootstrapAdded(){const u=this.serverConfigsFromArray.getRawValue();for(let m=0;m<u.length;m++)if(u[m].bootstrapServerIs)return!0;return!1}removeBootstrapServerConfig(){if(this.bootstrapConfigServersFormGroup){const u=this.serverConfigsFromArray.getRawValue().findIndex(m=>!0===m.bootstrapServerIs);-1!==u&&this.serverConfigsFromArray.removeAt(u)}}updateModel(){const u=this.serverConfigsFromArray.value;this.propagateChange(u)}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(Q.TranslateService),e.\u0275\u0275directiveInject(z.MatDialog),e.\u0275\u0275directiveInject(V.o),e.\u0275\u0275directiveInject(H.N),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-profile-lwm2m-bootstrap-config-servers"]],inputs:{disabled:"disabled",isTransportWasRunWithBootstrap:"isTransportWasRunWithBootstrap",isBootstrapServerUpdateEnable:"isBootstrapServerUpdateEnable"},outputs:{isTransportWasRunWithBootstrapChange:"isTransportWasRunWithBootstrapChange"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>P),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>P),multi:!0}])],decls:5,vars:4,consts:[[1,"flex","flex-col"],["multi","true"],[4,"ngFor","ngForOf","ngForTrackBy"],["style","margin:32px 0",4,"ngIf"],["style","padding-top: 16px;",4,"ngIf"],[3,"removeServer","isTransportWasRunWithBootstrapChange","formControl","isBootstrap"],[2,"margin","32px 0"],["translate","",1,"tb-prompt","flex","items-center","justify-center"],[2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-accordion",1),e.\u0275\u0275template(2,F,2,2,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,a,3,0,"div",3)(4,O,5,3,"div",4),e.\u0275\u0275elementEnd()),2&m&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",p.serverConfigsFromArray.controls)("ngForTrackBy",p.trackByParams),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!p.serverConfigsFromArray.controls.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!p.disabled))},dependencies:[L.NgForOf,L.NgIf,B.MatButton,I.MatAccordion,t.NgControlStatus,t.FormControlDirective,Q.TranslateDirective,U.o,Q.TranslatePipe],encapsulation:2})}}},97588:(Re,X,n)=>{"use strict";n.d(X,{o:()=>ye});var e=n(31635),t=n(93953),c=n(89417),h=n(68488),V=n(14246),S=n(18530),G=n(88141),K=n(73028),H=n(56977),k=n(91284),Q=n(29225),z=n(60177),L=n(88834),B=n(82765),I=n(99213),U=n(59042),F=n(53719),a=n(37403),O=n(82798),P=n(86600),A=n(14823),u=n(9454),m=n(73955);const p=(re,ne)=>({min:re,max:ne});function v(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"div",8)(1,"div",9),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"span",10),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",9),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementStart(9,"span",10),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()()),2&re){const ie=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(3,4,"device-profile.lwm2m.short-id")+": "," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(ie.serverFormGroup.get("shortServerId").value),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(8,6,"device-profile.lwm2m.mode")+": "," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(ie.credentialTypeLwM2MNamesMap.get(ie.securityConfigLwM2MType[ie.serverFormGroup.get("securityMode").value]))}}function T(re,ne){if(1&re){const ie=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(Pe){t.\u0275\u0275restoreView(ie);const Be=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Be.removeServer.emit(Pe))}),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"delete"),t.\u0275\u0275elementEnd()()}2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"action.remove"))}function C(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-option",28),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&re){const ie=ne.$implicit,Ae=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",ie),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",Ae.credentialTypeLwM2MNamesMap.get(Ae.securityConfigLwM2MType[ie])," ")}}function _(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re){const ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,ie.isBootstrap?"device-profile.lwm2m.short-id-tooltip-bootstrap":"device-profile.lwm2m.short-id-tooltip"))}}function E(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.short-id-required")," "))}function f(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.short-id-pattern")," "))}function g(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re){const ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"device-profile.lwm2m.short-id-range",t.\u0275\u0275pureFunction2(4,p,ie.shortServerIdMin,ie.shortServerIdMax))," ")}}function y(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.server-host-required")," "))}function b(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.server-port-required")," "))}function D(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.server-port-pattern")," "))}function w(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.server-port-range")," "))}function ee(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.client-hold-off-time-tooltip"))}function _e(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.client-hold-off-time-required")," "))}function ve(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.client-hold-off-time-pattern")," "))}function Ee(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.account-after-timeout-tooltip"))}function $(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.account-after-timeout-required")," "))}function be(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.account-after-timeout-pattern")," "))}function Te(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re){const ie=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,ie.publicKeyOrIdTooltipNamesMap.get(ie.serverFormGroup.get("securityMode").value)))}}function oe(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.server-public-key-required")," "))}function R(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"div")(1,"mat-form-field",25)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Te,3,3,"mat-icon",16),t.\u0275\u0275elementStart(6,"textarea",30),t.\u0275\u0275text(7,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,oe,3,3,"mat-error",18),t.\u0275\u0275elementEnd()()),2&re){const ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,3,"device-profile.lwm2m.server-public-key")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("serverPublicKey").hasError("required"))}}function N(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.lifetime-required")," "))}function Z(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.lifetime-pattern")," "))}function Y(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.default-min-period-tooltip"))}function ge(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.default-min-period-required")," "))}function ce(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.default-min-period-pattern")," "))}function se(re,ne){1&re&&(t.\u0275\u0275elementStart(0,"mat-icon",29),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"help"),t.\u0275\u0275elementEnd()),2&re&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.binding-tooltip"))}function J(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"mat-option",28),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&re){const ie=ne.$implicit,Ae=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",ie),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,Ae.bindingModeTypeNamesMap.get(ie))," ")}}function de(re,ne){if(1&re&&(t.\u0275\u0275elementStart(0,"section")(1,"div",12)(2,"mat-form-field",13)(3,"mat-label"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-select",14),t.\u0275\u0275template(7,C,2,2,"mat-option",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"mat-form-field",13)(9,"mat-label"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(12,_,3,3,"mat-icon",16),t.\u0275\u0275element(13,"input",17),t.\u0275\u0275template(14,E,3,3,"mat-error",18)(15,f,3,3,"mat-error",18)(16,g,3,7,"mat-error",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),t.\u0275\u0275text(20),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(22,"input",19),t.\u0275\u0275template(23,y,3,3,"mat-error",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"mat-form-field",13)(25,"mat-label"),t.\u0275\u0275text(26),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(28,"input",20),t.\u0275\u0275template(29,b,3,3,"mat-error",18)(30,D,3,3,"mat-error",18)(31,w,3,3,"mat-error",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(32,"div",12)(33,"mat-form-field",13)(34,"mat-label"),t.\u0275\u0275text(35),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(37,ee,3,3,"mat-icon",16),t.\u0275\u0275element(38,"input",21),t.\u0275\u0275template(39,_e,3,3,"mat-error",18)(40,ve,3,3,"mat-error",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"mat-form-field",13)(42,"mat-label"),t.\u0275\u0275text(43),t.\u0275\u0275pipe(44,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(45,Ee,3,3,"mat-icon",16),t.\u0275\u0275element(46,"input",22),t.\u0275\u0275template(47,$,3,3,"mat-error",18)(48,be,3,3,"mat-error",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(49,R,9,5,"div",18),t.\u0275\u0275elementStart(50,"div",12)(51,"mat-form-field",13)(52,"mat-label"),t.\u0275\u0275text(53),t.\u0275\u0275pipe(54,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(55,"input",23),t.\u0275\u0275template(56,N,3,3,"mat-error",18)(57,Z,3,3,"mat-error",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(58,"mat-form-field",13)(59,"mat-label"),t.\u0275\u0275text(60),t.\u0275\u0275pipe(61,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(62,Y,3,3,"mat-icon",16),t.\u0275\u0275element(63,"input",24),t.\u0275\u0275template(64,ge,3,3,"mat-error",18)(65,ce,3,3,"mat-error",18),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(66,"mat-form-field",25)(67,"mat-label"),t.\u0275\u0275text(68),t.\u0275\u0275pipe(69,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(70,se,3,3,"mat-icon",16),t.\u0275\u0275elementStart(71,"mat-select",26),t.\u0275\u0275template(72,J,3,4,"mat-option",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(73,"mat-checkbox",27),t.\u0275\u0275text(74),t.\u0275\u0275pipe(75,"translate"),t.\u0275\u0275elementEnd()()),2&re){const ie=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,35,"device-profile.lwm2m.mode")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",ie.securityConfigLwM2MTypes),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(11,37,"device-profile.lwm2m.short-id")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(),t.\u0275\u0275property("min",ie.shortServerIdMin)("max",ie.shortServerIdMax),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("shortServerId").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("shortServerId").hasError("pattern")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("shortServerId").hasError("min")||ie.serverFormGroup.get("shortServerId").hasError("max")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(21,39,"device-profile.lwm2m.server-host")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("host").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(27,41,"device-profile.lwm2m.server-port")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("port").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("port").hasError("pattern")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("port").hasError("min")||ie.serverFormGroup.get("port").hasError("max")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(36,43,"device-profile.lwm2m.client-hold-off-time")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("clientHoldOffTime").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("clientHoldOffTime").hasError("min")||ie.serverFormGroup.get("clientHoldOffTime").hasError("pattern")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(44,45,"device-profile.lwm2m.account-after-timeout")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("min")||ie.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("pattern")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("securityMode").value===ie.securityConfigLwM2MType.RPK||ie.serverFormGroup.get("securityMode").value===ie.securityConfigLwM2MType.X509),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(54,47,"device-profile.lwm2m.lifetime")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("lifetime").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("lifetime").hasError("pattern")||ie.serverFormGroup.get("lifetime").hasError("min")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(61,49,"device-profile.lwm2m.default-min-period")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("defaultMinPeriod").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.serverFormGroup.get("defaultMinPeriod").hasError("pattern")||ie.serverFormGroup.get("defaultMinPeriod").hasError("min")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(69,51,"device-profile.lwm2m.binding")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!ie.disabled),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",ie.bindingModeTypes),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(75,53,"device-profile.lwm2m.notification-storing")," ")}}class ye{constructor(ne,ie){this.fb=ne,this.deviceProfileService=ie,this.disabled=!1,this.destroy$=new S.B,this.isDataLoadedIntoCache=!1,this.bindingModeTypes=Object.values(h.E4),this.bindingModeTypeNamesMap=h.IZ,this.securityConfigLwM2MType=k.Km,this.securityConfigLwM2MTypes=Object.keys(k.Km),this.credentialTypeLwM2MNamesMap=k.dh,this.publicKeyOrIdTooltipNamesMap=k.fJ,this.currentSecurityMode=null,this.bootstrapDisabled=!1,this.shortServerIdMin=1,this.shortServerIdMax=65534,this.isBootstrap=!1,this.removeServer=new t.EventEmitter,this.isTransportWasRunWithBootstrapChange=new t.EventEmitter,this.propagateChange=Ae=>{},this.propagateChangeState=Ae=>{void 0!==Ae&&this.propagateChange(Ae)}}ngOnInit(){this.isBootstrap&&(this.shortServerIdMin=0,this.shortServerIdMax=65535),this.serverFormGroup=this.fb.group({host:["",c.Validators.required],port:["",[c.Validators.required,c.Validators.min(1),c.Validators.max(65535),c.Validators.pattern("[0-9]*")]],securityMode:[k.Km.NO_SEC],serverPublicKey:[""],clientHoldOffTime:["",[c.Validators.required,c.Validators.min(0),c.Validators.pattern("[0-9]*")]],shortServerId:["",[c.Validators.required,c.Validators.min(this.shortServerIdMin),c.Validators.max(this.shortServerIdMax),c.Validators.pattern("[0-9]*")]],bootstrapServerAccountTimeout:["",[c.Validators.required,c.Validators.min(0),c.Validators.pattern("[0-9]*")]],binding:[""],lifetime:[null,[c.Validators.required,c.Validators.min(0),c.Validators.pattern("[0-9]*")]],notifIfDisabled:[],defaultMinPeriod:[null,[c.Validators.required,c.Validators.min(0),c.Validators.pattern("[0-9]*")]],bootstrapServerIs:[]}),this.serverFormGroup.get("securityMode").valueChanges.pipe((0,G.M)(ne=>{this.currentSecurityMode=ne,this.updateValidate(ne)}),(0,K.Z)(ne=>this.getLwm2mBootstrapSecurityInfo(ne)),(0,H.Q)(this.destroy$)).subscribe(ne=>{this.currentSecurityMode!==k.Km.NO_SEC&&this.changeSecurityHostPortFields(ne),this.serverFormGroup.patchValue(ne,{emitEvent:!1}),this.currentSecurityMode===k.Km.X509&&this.serverFormGroup.get("serverPublicKey").patchValue(ne.serverCertificate,{emitEvent:!1})}),this.serverFormGroup.valueChanges.pipe((0,H.Q)(this.destroy$)).subscribe(ne=>{this.propagateChangeState(ne)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(ne){ne&&(this.serverFormGroup.patchValue(ne,{emitEvent:!1}),this.updateValidate(ne.securityMode),ne.securityHost&&ne.securityPort&&(delete ne.securityHost,delete ne.securityPort,this.propagateChangeState(this.serverFormGroup.getRawValue()))),this.isDataLoadedIntoCache||this.getLwm2mBootstrapSecurityInfo().subscribe(ie=>{ne||this.serverFormGroup.patchValue(ie),!ie&&!0===this.serverFormGroup.get("bootstrapServerIs").value&&(this.isTransportWasRunWithBootstrapChange.emit(!1),this.bootstrapDisabled=!0,this.serverFormGroup.get("securityMode").disable({emitEvent:!1}))})}registerOnChange(ne){this.propagateChange=ne}setDisabledState(ne){this.disabled=ne,ne?this.serverFormGroup.disable({emitEvent:!1}):(this.serverFormGroup.enable({emitEvent:!1}),this.bootstrapDisabled&&this.serverFormGroup.get("securityMode").disable({emitEvent:!1}))}registerOnTouched(ne){}updateValidate(ne){switch(ne){case k.Km.NO_SEC:case k.Km.PSK:this.clearValidators();break;case k.Km.RPK:case k.Km.X509:this.setValidators()}this.serverFormGroup.get("serverPublicKey").updateValueAndValidity({emitEvent:!1})}clearValidators(){this.serverFormGroup.get("serverPublicKey").clearValidators()}setValidators(){this.serverFormGroup.get("serverPublicKey").setValidators([c.Validators.required])}getLwm2mBootstrapSecurityInfo(ne=k.Km.NO_SEC){return this.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(this.serverFormGroup.get("bootstrapServerIs").value,ne).pipe((0,G.M)(()=>this.isDataLoadedIntoCache=!0))}changeSecurityHostPortFields(ne){ne.port=ne.securityPort,ne.host=ne.securityHost}validate(){return this.serverFormGroup.valid?null:{serverFormGroup:!0}}static{this.\u0275fac=function(ie){return new(ie||ye)(t.\u0275\u0275directiveInject(c.UntypedFormBuilder),t.\u0275\u0275directiveInject(V.N))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:ye,selectors:[["tb-profile-lwm2m-device-config-server"]],inputs:{isBootstrap:"isBootstrap"},outputs:{removeServer:"removeServer",isTransportWasRunWithBootstrapChange:"isTransportWasRunWithBootstrapChange"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>ye),multi:!0},{provide:c.NG_VALIDATORS,useExisting:(0,t.forwardRef)(()=>ye),multi:!0}])],decls:13,vars:6,consts:[["serverPanel",""],[3,"formGroup"],[1,"flex","flex-1","flex-row","items-center","justify-start"],[2,"min-width","150px"],["style","font-size:14px","class","no-wrap flex flex-row",4,"ngIf"],[1,"flex-full"],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],[1,"no-wrap","flex","flex-row",2,"font-size","14px"],[2,"margin-left","32px"],[2,"font-style","italic"],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],[1,"flex","flex-row","gap-2","xs:flex-col","xs:gap-0"],[1,"flex-1"],["formControlName","securityMode"],[3,"value",4,"ngFor","ngForOf"],["class","mat-primary","aria-hidden","false","aria-label","help-icon","matSuffix","","style","cursor:pointer;",3,"matTooltip",4,"ngIf"],["matInput","","type","number","formControlName","shortServerId","required","",3,"min","max"],[4,"ngIf"],["matInput","","type","text","formControlName","host","required",""],["matInput","","type","number","formControlName","port","required","","min","0","max","65535","readonly",""],["matInput","","type","number","formControlName","clientHoldOffTime","required","","min","0"],["matInput","","type","number","formControlName","bootstrapServerAccountTimeout","required","","min","0"],["matInput","","type","number","min","0","formControlName","lifetime","required",""],["matInput","","type","number","min","0","formControlName","defaultMinPeriod","required",""],[1,"mat-block"],["formControlName","binding"],["formControlName","notifIfDisabled","color","primary"],[3,"value"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-primary",2,"cursor","pointer",3,"matTooltip"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","required","","formControlName","serverPublicKey","required",""]],template:function(ie,Ae){if(1&ie&&(t.\u0275\u0275elementStart(0,"mat-expansion-panel",1,0)(2,"mat-expansion-panel-header")(3,"div",2)(4,"mat-panel-title")(5,"div",2)(6,"div",3),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,v,11,8,"div",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(10,"span",5),t.\u0275\u0275template(11,T,4,3,"button",6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(12,de,76,55,"ng-template",7),t.\u0275\u0275elementEnd()),2&ie){const Pe=t.\u0275\u0275reference(1);t.\u0275\u0275property("formGroup",Ae.serverFormGroup),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,4,Ae.serverFormGroup.get("bootstrapServerIs").value?"device-profile.lwm2m.bootstrap-server":"device-profile.lwm2m.lwm2m-server")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!Pe.expanded),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!Ae.disabled)}},dependencies:[z.NgForOf,z.NgIf,L.MatIconButton,B.MatCheckbox,I.MatIcon,U.MatInput,F.MatFormField,F.MatLabel,F.MatError,F.MatSuffix,a.xb,O.MatSelect,P.MatOption,A.MatTooltip,u.MatExpansionPanel,u.MatExpansionPanelHeader,u.MatExpansionPanelTitle,u.MatExpansionPanelContent,c.DefaultValueAccessor,c.NumberValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.MinValidator,c.MaxValidator,c.FormGroupDirective,c.FormControlName,m.TranslatePipe],encapsulation:2})}}(0,e.__decorate)([(0,Q.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],ye.prototype,"isBootstrap",void 0)},13132:(Re,X,n)=>{"use strict";n.d(X,{f:()=>_e});var e=n(74523),t=n(93953),c=n(89417),h=n(68488),V=n(14246),S=n(27997),G=n(67496),K=n(67376),H=n.n(K),k=n(18530),Q=n(56977),z=n(91284),L=n(80216),B=n(73955),I=n(60177),U=n(89183),F=n(82765),a=n(99213),O=n(59042),P=n(53719),A=n(82798),u=n(86600),m=n(96850),p=n(84469),v=n(58165),T=n(41483),C=n(18967);function _(ve,Ee){if(1&ve){const $=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"section",4)(1,"tb-profile-lwm2m-object-list",10),t.\u0275\u0275listener("addList",function(Te){t.\u0275\u0275restoreView($);const oe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(oe.addObjectsList(Te))})("removeList",function(Te){t.\u0275\u0275restoreView($);const oe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(oe.removeObjectsList(Te))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(2,"tb-profile-lwm2m-observe-attr-telemetry",11),t.\u0275\u0275elementEnd()}if(2&ve){const $=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",$.lwm2mDeviceProfileFormGroup)}}function E(ve,Ee){1&ve&&(t.\u0275\u0275elementStart(0,"div",12)(1,"mat-icon",13),t.\u0275\u0275text(2,"warning"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",14),t.\u0275\u0275text(4,"LwM2M transport was run without bootstrap server"),t.\u0275\u0275elementEnd()())}function f(ve,Ee){1&ve&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ve&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.fw-update-resource-required")," "))}function g(ve,Ee){if(1&ve&&(t.\u0275\u0275elementStart(0,"mat-form-field",18)(1,"mat-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"input",27),t.\u0275\u0275template(5,f,3,3,"mat-error",28),t.\u0275\u0275elementEnd()),2&ve){const $=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"device-profile.lwm2m.fw-update-resource")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",$.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").hasError("required"))}}function y(ve,Ee){1&ve&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ve&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.sw-update-resource-required")," "))}function b(ve,Ee){if(1&ve&&(t.\u0275\u0275elementStart(0,"mat-form-field",18)(1,"mat-label"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"input",29),t.\u0275\u0275template(5,y,3,3,"mat-error",28),t.\u0275\u0275elementEnd()),2&ve){const $=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"device-profile.lwm2m.sw-update-resource")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",$.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").hasError("required"))}}function D(ve,Ee){if(1&ve&&(t.\u0275\u0275elementStart(0,"mat-option",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ve){const $=Ee.$implicit,be=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",$),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,be.objectIDVerTranslationMap.get($))," ")}}function w(ve,Ee){if(1&ve&&(t.\u0275\u0275elementStart(0,"section",15)(1,"fieldset",16)(2,"legend",17),t.\u0275\u0275text(3,"device-profile.lwm2m.fw-update"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-form-field",18)(5,"mat-label"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"mat-select",19)(9,"mat-option",20),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"mat-option",20),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"mat-option",20),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(18,g,6,4,"mat-form-field",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"fieldset",16)(20,"legend",17),t.\u0275\u0275text(21,"device-profile.lwm2m.sw-update"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"mat-form-field",18)(23,"mat-label"),t.\u0275\u0275text(24),t.\u0275\u0275pipe(25,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"mat-select",22)(27,"mat-option",20),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"mat-option",20),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(33,b,6,4,"mat-form-field",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"fieldset",16)(35,"legend",17),t.\u0275\u0275text(36,"device-profile.power-saving-mode"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(37,"tb-power-mode-settings",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"fieldset",16)(39,"legend",17),t.\u0275\u0275text(40,"device-profile.lwm2m.default-object-id"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"mat-form-field",24)(42,"mat-select",25),t.\u0275\u0275template(43,D,3,4,"mat-option",26),t.\u0275\u0275elementEnd()()()()),2&ve){const $=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,16,"device-profile.lwm2m.fw-update-strategy")),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",1),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(11,18,"device-profile.lwm2m.fw-update-strategy-package")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",2),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(14,20,"device-profile.lwm2m.fw-update-strategy-package-uri")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",3),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,22,"device-profile.lwm2m.fw-update-strategy-data")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",2===$.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").value),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(25,24,"device-profile.lwm2m.sw-update-strategy")),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",1),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(29,26,"device-profile.lwm2m.sw-update-strategy-package")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",2),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(32,28,"device-profile.lwm2m.sw-update-strategy-package-uri")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",2===$.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").value),t.\u0275\u0275advance(4),t.\u0275\u0275property("parentForm",$.clientSettingsFormGroup),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",$.objectIDVers)}}function ee(ve,Ee){if(1&ve&&(t.\u0275\u0275elementStart(0,"section",30),t.\u0275\u0275element(1,"tb-json-object-edit",31),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ve){const $=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,3,"device-profile.transport-type-lwm2m")),t.\u0275\u0275property("sort",$.sortFunction)("ngModel",$.configurationValue)}}class _e{constructor(Ee,$,be,Te,oe){this.translate=Ee,this.fb=$,this.cd=be,this.dialogService=Te,this.deviceProfileService=oe,this.disabled=!1,this.isTransportWasRunWithBootstrap=!0,this.destroy$=new k.B,this.objectIDVers=Object.values(h.gx),this.objectIDVerTranslationMap=h.jy,this.propagateChange=R=>{},this.initWriteValue=()=>{const R=this.getObjectsFromJsonAllConfig();if(R.length>0){const N={property:"id",direction:G.O.ASC};this.deviceProfileService.getLwm2mObjects(N,R,null).subscribe(Z=>{this.updateWriteValue(Z)})}else this.updateWriteValue([])},this.updateWriteValue=R=>{this.lwm2mDeviceProfileFormGroup.patchValue({objectIds:R,observeAttrTelemetry:this.getObserveAttrTelemetryObjects(R),bootstrap:this.configurationValue.bootstrap,bootstrapServerUpdateEnable:this.configurationValue.bootstrapServerUpdateEnable||!1,clientLwM2mSettings:{clientOnlyObserveAfterConnect:this.configurationValue.clientLwM2mSettings.clientOnlyObserveAfterConnect,fwUpdateStrategy:this.configurationValue.clientLwM2mSettings.fwUpdateStrategy||1,swUpdateStrategy:this.configurationValue.clientLwM2mSettings.swUpdateStrategy||1,fwUpdateResource:this.configurationValue.clientLwM2mSettings.fwUpdateResource||"",swUpdateResource:this.configurationValue.clientLwM2mSettings.swUpdateResource||"",powerMode:this.configurationValue.clientLwM2mSettings.powerMode||h.xO.DRX,edrxCycle:this.configurationValue.clientLwM2mSettings.edrxCycle||h.TX,pagingTransmissionWindow:this.configurationValue.clientLwM2mSettings.pagingTransmissionWindow||h.tE,psmActivityTimer:this.configurationValue.clientLwM2mSettings.psmActivityTimer||h.Tj,defaultObjectIDVer:this.configurationValue.clientLwM2mSettings.defaultObjectIDVer||h.gx.V1_0}},{emitEvent:!1}),this.isBootstrapServerUpdateEnable=this.configurationValue.bootstrapServerUpdateEnable||!1,this.disabled||(this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.powerMode").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").updateValueAndValidity({onlySelf:!0})),this.cd.markForCheck()},this.updateModel=()=>{this.propagateChange(this.configurationValue)},this.updateObserveAttrTelemetryObjectFormGroup=R=>{this.lwm2mDeviceProfileFormGroup.patchValue({observeAttrTelemetry:(0,S.Go)(this.getObserveAttrTelemetryObjects(R))},{emitEvent:!1})},this.getObserveAttrTelemetryObjects=R=>{const N=(0,S.Go)(R);if(this.configurationValue.observeAttr&&N.length>0){const Z=this.configurationValue.observeAttr.attribute,Y=this.configurationValue.observeAttr.telemetry,ge=this.configurationValue.observeAttr.keyName;this.includesNotZeroInstance(Z,Y)&&this.addInstances(Z,Y,N),(0,S.f1)(this.configurationValue.observeAttr.observe)&&this.configurationValue.observeAttr.observe.length>0&&this.updateObserveAttrTelemetryObjects(this.configurationValue.observeAttr.observe,N,h.d3),(0,S.f1)(Z)&&Z.length>0&&this.updateObserveAttrTelemetryObjects(Z,N,h.bc),(0,S.f1)(Y)&&Y.length>0&&this.updateObserveAttrTelemetryObjects(Y,N,h.Gy),(0,S.f1)(this.configurationValue.observeAttr.attributeLwm2m)&&this.updateAttributes(N),(0,S.f1)(ge)&&(this.configurationValue.observeAttr.keyName=this.validateKeyNameObjects(ge,Z,Y),this.updateKeyNameObjects(N))}return N},this.includesNotZeroInstance=(R,N)=>{const Z=Y=>!Y.includes("/0/");return R.some(Z)||N.some(Z)},this.addInstances=(R,N,Z)=>{const Y=R.concat(N).filter(ge=>!ge.includes("/0/")).map(ge=>ge.slice(1,ge.lastIndexOf("/"))).sort(this.sortPath);new Set(Y).forEach(ge=>{const ce=Array.from(ge.split("/"),String),se=Z.find(J=>J.keyId===ce[0]);if(se){const J=this.updateInInstanceKeyName(se.instances[0],+ce[1]);se.instances.push(J)}})},this.updateInInstanceKeyName=(R,N)=>{const Z=(0,S.Go)(R);return Z.id=N,Z.resources.forEach(Y=>{Y.keyName=H().camelCase(Y.name+Z.id)}),Z},this.updateObserveAttrTelemetryObjects=(R,N,Z)=>{R.forEach(Y=>{const[ge,ce,se]=Array.from(Y.substring(1).split("/"),String),J=N.find(de=>de.keyId===ge);J&&(J.instances.find(de=>de.id===+ce).resources.find(de=>de.id===+se)[Z]=!0)})},this.updateAttributes=R=>{Object.keys(this.configurationValue.observeAttr.attributeLwm2m).forEach(N=>{const[Z,Y,ge]=Array.from(N.substring(1).split("/"),String),ce=R.find(se=>se.keyId===Z);if(ce&&Y){const se=ce.instances.find(J=>J.id===+Y);se&&ge?se.resources.find(J=>J.id===+ge).attributes=this.configurationValue.observeAttr.attributeLwm2m[N]:se&&(se.attributes=this.configurationValue.observeAttr.attributeLwm2m[N])}else ce&&(ce.attributes=this.configurationValue.observeAttr.attributeLwm2m[N])})},this.updateKeyNameObjects=R=>{Object.keys(this.configurationValue.observeAttr.keyName).forEach(N=>{const[Z,Y,ge]=Array.from(N.substring(1).split("/"),String),ce=R.find(se=>se.keyId===Z);ce&&(ce.instances.find(se=>se.id===+Y).resources.find(se=>se.id===+ge).keyName=this.configurationValue.observeAttr.keyName[N])})},this.validateKeyNameObjects=(R,N,Z)=>{const Y=JSON.parse(JSON.stringify(R)),ge={},ce=N.concat(Z);return Object.keys(Y).forEach(se=>{ce.includes(se)&&(ge[se]=Y[se])}),ge},this.updateObserveAttrTelemetryFromGroupToJson=R=>{const N=[],Z=[],Y=[],ge={},ce={};JSON.parse(JSON.stringify(R)).forEach(J=>{if((0,S.f1)(J.attributes)&&!(0,S.Im)(J.attributes)){const de=`/${J.keyId}`;ge[de]=J.attributes}J.hasOwnProperty(h.j4)&&Array.isArray(J.instances)&&J.instances.forEach(de=>{if((0,S.f1)(de.attributes)&&!(0,S.Im)(de.attributes)){const ye=`/${J.keyId}/${de.id}`;ge[ye]=de.attributes}de.hasOwnProperty(h.eZ)&&Array.isArray(de.resources)&&de.resources.forEach(ye=>{if(ye.attribute||ye.telemetry){const re=`/${J.keyId}/${de.id}/${ye.id}`;ye.observe&&N.push(re),ye.attribute&&Z.push(re),ye.telemetry&&Y.push(re),ce[re]=ye.keyName,(0,S.f1)(ye.attributes)&&!(0,S.Im)(ye.attributes)&&(ge[re]=ye.attributes)}})})}),this.configurationValue.observeAttr={observe:N,attribute:Z,telemetry:Y,keyName:this.sortObjectKeyPathJson(h.GX,ce),attributeLwm2m:ge}},this.sortObjectKeyPathJson=(R,N)=>R===h.GX?Object.keys(N).sort(this.sortPath).reduce((Z,Y)=>(Z[Y]=N[Y],Z),{}):R===h.d3||R===h.bc||R===h.Gy?Object.values(N).sort(this.sortPath).reduce((Z,Y)=>(Z.push(Y),Z),[]):N,this.sortPath=(R,N)=>R.localeCompare(N,void 0,{numeric:!0,sensitivity:"base"}),this.getObjectsFromJsonAllConfig=()=>{const R=new Set;return this.configurationValue.observeAttr&&(this.configurationValue.observeAttr.observe&&this.configurationValue.observeAttr.observe.forEach(N=>{R.add(Array.from(N.substring(1).split("/"),String)[0])}),this.configurationValue.observeAttr.attribute&&this.configurationValue.observeAttr.attribute.forEach(N=>{R.add(Array.from(N.substring(1).split("/"),String)[0])}),this.configurationValue.observeAttr.telemetry&&this.configurationValue.observeAttr.telemetry.forEach(N=>{R.add(Array.from(N.substring(1).split("/"),String)[0])})),R.size>0?Array.from(R):[]},this.addObjectsList=R=>{this.updateObserveAttrTelemetryObjectFormGroup(R)},this.removeObjectsList=R=>{const N=this.lwm2mDeviceProfileFormGroup.get("observeAttrTelemetry").value,Y=N.findIndex(ge=>ge.keyId===R.keyId);Y>=0&&N.splice(Y,1),this.removeObserveAttrTelemetryFromJson(h.d3,R.keyId),this.removeObserveAttrTelemetryFromJson(h.Gy,R.keyId),this.removeObserveAttrTelemetryFromJson(h.bc,R.keyId),this.removeKeyNameFromJson(R.keyId),this.removeAttributesFromJson(R.keyId),this.lwm2mDeviceProfileFormGroup.patchValue({observeAttrTelemetry:(0,S.Go)(N)},{emitEvent:!1})},this.removeObserveAttrTelemetryFromJson=(R,N)=>{const Z=ge=>ge.startsWith(`/${N}`);let Y=this.configurationValue.observeAttr[R].findIndex(Z);for(;Y>=0;)this.configurationValue.observeAttr[R].splice(Y,1),Y=this.configurationValue.observeAttr[R].findIndex(Z,Y)},this.removeKeyNameFromJson=R=>{const N=this.configurationValue.observeAttr.keyName;Object.keys(N).forEach(Z=>{Z.startsWith(`/${R}`)&&delete N[Z]})},this.removeAttributesFromJson=R=>{const N=this.configurationValue.observeAttr.attributeLwm2m;Object.keys(N).forEach(Z=>{Z.startsWith(`/${R}`)&&delete N[Z]})},this.lwm2mDeviceProfileFormGroup=this.fb.group({objectIds:[null],observeAttrTelemetry:[null],bootstrapServerUpdateEnable:[!1],bootstrap:[[]],clientLwM2mSettings:this.fb.group({clientOnlyObserveAfterConnect:[1,[]],fwUpdateStrategy:[1,[]],swUpdateStrategy:[1,[]],fwUpdateResource:[{value:"",disabled:!0},[]],swUpdateResource:[{value:"",disabled:!0},[]],powerMode:[h.xO.DRX,c.Validators.required],edrxCycle:[{disabled:!0,value:0},c.Validators.required],psmActivityTimer:[{disabled:!0,value:0},c.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},c.Validators.required],defaultObjectIDVer:[h.gx.V1_0,c.Validators.required]})}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").valueChanges.pipe((0,Q.Q)(this.destroy$)).subscribe(R=>{2===R?this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").enable({emitEvent:!1}):(this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").disable({emitEvent:!1}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").reset(h.pU,{emitEvent:!1}))}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").valueChanges.pipe((0,Q.Q)(this.destroy$)).subscribe(R=>{2===R?this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").enable({emitEvent:!1}):(this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").disable({emitEvent:!1}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").reset(h.Wg,{emitEvent:!1}))}),this.lwm2mDeviceProfileFormGroup.get("bootstrapServerUpdateEnable").valueChanges.pipe((0,Q.Q)(this.destroy$)).subscribe(R=>{R?this.isBootstrapServerUpdateEnable=R:this.lwm2mDeviceProfileFormGroup.get("bootstrap").value.filter(Y=>!0===Y.bootstrapServerIs).length?this.dialogService.confirm(this.translate.instant("device-profile.lwm2m.bootstrap-update-title"),this.translate.instant("device-profile.lwm2m.bootstrap-update-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).pipe((0,Q.Q)(this.destroy$)).subscribe(Y=>{Y?this.isBootstrapServerUpdateEnable=R:this.lwm2mDeviceProfileFormGroup.patchValue({bootstrapServerUpdateEnable:!0},{emitEvent:!0}),this.cd.markForCheck()}):this.isBootstrapServerUpdateEnable=R}),this.lwm2mDeviceProfileFormGroup.valueChanges.pipe((0,Q.Q)(this.destroy$)).subscribe(R=>{this.updateDeviceProfileValue(R)}),this.sortFunction=this.sortObjectKeyPathJson}registerOnChange(Ee){this.propagateChange=Ee}registerOnTouched(Ee){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setDisabledState(Ee){this.disabled=Ee,Ee?this.lwm2mDeviceProfileFormGroup.disable({emitEvent:!1}):(this.lwm2mDeviceProfileFormGroup.enable({emitEvent:!1}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.powerMode").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").updateValueAndValidity({onlySelf:!0}))}writeValue(Ee){var $=this;return(0,e.A)(function*(){(0,S.f1)(Ee)&&(Ee?.clientLwM2mSettings||Ee?.observeAttr||Ee?.bootstrap)&&($.configurationValue=Ee,$.isAdd&&(yield $.defaultProfileConfig()),$.initWriteValue())})()}validate(){return this.lwm2mDeviceProfileFormGroup.valid?null:{lwm2mDeviceProfile:!1}}defaultProfileConfig(){var Ee=this;return(0,e.A)(function*(){let $,be;[be,$]=yield Promise.all([Ee.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(!0).toPromise(),Ee.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(!1).toPromise()]),$&&($.securityMode=z.Km.NO_SEC),Ee.isTransportWasRunWithBootstrap=!!be,Ee.configurationValue.bootstrap=[$],Ee.lwm2mDeviceProfileFormGroup.patchValue({bootstrap:Ee.configurationValue.bootstrap},{emitEvent:!0})})()}updateDeviceProfileValue(Ee){this.lwm2mDeviceProfileFormGroup.valid&&Ee.observeAttrTelemetry&&this.updateObserveAttrTelemetryFromGroupToJson(Ee.observeAttrTelemetry),this.configurationValue.bootstrap=Ee.bootstrap,this.configurationValue.clientLwM2mSettings=Ee.clientLwM2mSettings,this.configurationValue.bootstrapServerUpdateEnable=Ee.bootstrapServerUpdateEnable,this.updateModel()}get clientSettingsFormGroup(){return this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings")}static{this.\u0275fac=function($){return new($||_e)(t.\u0275\u0275directiveInject(B.TranslateService),t.\u0275\u0275directiveInject(c.UntypedFormBuilder),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(L.o),t.\u0275\u0275directiveInject(V.N))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:_e,selectors:[["tb-profile-lwm2m-device-transport-configuration"]],inputs:{isAdd:"isAdd"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>_e),multi:!0},{provide:c.NG_VALIDATORS,useExisting:(0,t.forwardRef)(()=>_e),multi:!0}])],decls:20,vars:20,consts:[[2,"padding-bottom","16px","margin","0"],["dynamicHeight",""],[3,"label"],["matTabContent",""],[3,"formGroup"],["style","padding:16px 0 0 8px;","class","flex flex-row items-end justify-start",4,"ngIf"],["formControlName","bootstrapServerUpdateEnable",2,"margin-left","8px","margin-top","20px"],[2,"padding","20px 2px"],["formControlName","bootstrap",3,"isTransportWasRunWithBootstrapChange","isBootstrapServerUpdateEnable","isTransportWasRunWithBootstrap"],["matTabContent","",3,"formGroup"],["formControlName","objectIds",3,"addList","removeList"],["formControlName","observeAttrTelemetry"],[1,"flex","flex-row","items-end","justify-start",2,"padding","16px 0 0 8px"],["color","warn",1,"material-icons",2,"margin-right","8px"],[2,"font-weight","500"],["formGroupName","clientLwM2mSettings"],[1,"fields-group"],["translate","",1,"group-title"],[1,"mat-block","flex-1"],["formControlName","fwUpdateStrategy"],[3,"value"],["class","mat-block flex-1",4,"ngIf"],["formControlName","swUpdateStrategy"],[3,"parentForm"],[1,"flex-1"],["formControlName","defaultObjectIDVer"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","fwUpdateResource","required",""],[4,"ngIf"],["matInput","","formControlName","swUpdateResource","required",""],[2,"padding","8px 0"],["readonly","",3,"sort","label","ngModel"]],template:function($,be){1&$&&(t.\u0275\u0275elementStart(0,"section",0)(1,"mat-tab-group",1)(2,"mat-tab",2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275template(4,_,3,1,"ng-template",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-tab",2),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"section",4),t.\u0275\u0275template(8,E,5,0,"div",5),t.\u0275\u0275elementStart(9,"mat-checkbox",6),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"section",7)(13,"tb-profile-lwm2m-bootstrap-config-servers",8),t.\u0275\u0275twoWayListener("isTransportWasRunWithBootstrapChange",function(oe){return t.\u0275\u0275twoWayBindingSet(be.isTransportWasRunWithBootstrap,oe)||(be.isTransportWasRunWithBootstrap=oe),oe}),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(14,"mat-tab",2),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275template(16,w,44,30,"ng-template",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"mat-tab",2),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275template(19,ee,3,5,"ng-template",3),t.\u0275\u0275elementEnd()()()),2&$&&(t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(3,10,"device-profile.lwm2m.model-tab")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(6,12,"device-profile.lwm2m.bootstrap-tab")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",be.lwm2mDeviceProfileFormGroup),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!be.isTransportWasRunWithBootstrap),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,14,"device-profile.lwm2m.include-bootstrap-server")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("isBootstrapServerUpdateEnable",be.isBootstrapServerUpdateEnable),t.\u0275\u0275twoWayProperty("isTransportWasRunWithBootstrap",be.isTransportWasRunWithBootstrap),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(15,16,"device-profile.lwm2m.others-tab")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",be.lwm2mDeviceProfileFormGroup),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(18,18,"device-profile.lwm2m.config-json-tab")))},dependencies:[I.NgForOf,I.NgIf,U.JsonObjectEditComponent,F.MatCheckbox,a.MatIcon,O.MatInput,P.MatFormField,P.MatLabel,P.MatError,A.MatSelect,u.MatOption,m.MatTabContent,m.MatTab,m.MatTabGroup,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.NgModel,c.FormGroupDirective,c.FormControlName,c.FormGroupName,B.TranslateDirective,p.I,v.O,T.H,C.f,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3}[_nghost-%COMP%]   .mat-mdc-slider[_ngcontent-%COMP%]{margin:8px 0 8px 10px}']})}}},10512:(Re,X,n)=>{"use strict";n.d(X,{t:()=>U});var e=n(93953),t=n(56542),c=n(34006),h=n(9310),V=n(7901),S=n(89417),G=n(60177),K=n(88834),H=n(99213),k=n(67575),Q=n(55911),z=n(52280),L=n(73955);function B(F,a){1&F&&e.\u0275\u0275element(0,"mat-progress-bar",14)}function I(F,a){1&F&&e.\u0275\u0275element(0,"div",15)}class U extends t.m{constructor(a,O,P,A,u){super(a,O,A),this.store=a,this.router=O,this.data=P,this.dialogRef=A,this.fb=u,this.submitted=!1}ngOnInit(){this.instancesFormGroup=this.fb.group({instancesIds:[this.data.instancesId]})}cancel(){this.dialogRef.close(null)}add(){this.dialogRef.close(this.instancesFormGroup.get("instancesIds").value)}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(V.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(S.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-lwm2m-object-add-instances"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:26,vars:24,consts:[[2,"min-width","400px",3,"ngSubmit","formGroup"],["color","primary",1,"flex","flex-row"],[2,"font-weight","500"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["required","","formControlName","instancesIds"],["mat-dialog-actions","",1,"flex","flex-row","items-center","justify-end"],["mat-button","","color","primary","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return P.add()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"span",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275element(5,"span",3),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return P.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,B,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,I,1,0,"div",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8)(14,"fieldset",9),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275element(16,"tb-profile-lwm2m-object-add-instances-list",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",11)(18,"button",12),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275listener("click",function(){return P.cancel()}),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",13),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd()()()),2&O&&(e.\u0275\u0275property("formGroup",P.instancesFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(P.data.objectName),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("\xa0#",P.data.objectId," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,10,P.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,12,P.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,14,P.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(19,16,P.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,18,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,20,P.isLoading$)||P.instancesFormGroup.invalid||!P.instancesFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,22,"action.save")," "))},dependencies:[G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatProgressBar,Q.MatToolbar,c.MatDialogActions,c.MatDialogContent,S.\u0275NgNoValidate,S.NgControlStatus,S.NgControlStatusGroup,S.RequiredValidator,S.FormGroupDirective,S.FormControlName,z.d,G.AsyncPipe,L.TranslatePipe],encapsulation:2})}}},52280:(Re,X,n)=>{"use strict";n.d(X,{d:()=>O});var e=n(93953),t=n(89417),c=n(68488),h=n(14085),V=n(67336),S=n(60177),G=n(99213),K=n(59042),H=n(53719),k=n(36471),Q=n(73955);const z=["instanceId"],L=P=>({max:P});function B(P,A){1&P&&(e.\u0275\u0275elementStart(0,"mat-icon",10),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd())}function I(P,A){if(1&P){const u=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-chip-row",8),e.\u0275\u0275listener("removed",function(){const p=e.\u0275\u0275restoreView(u).$implicit,v=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(v.remove(p))}),e.\u0275\u0275text(1),e.\u0275\u0275template(2,B,2,0,"mat-icon",9),e.\u0275\u0275elementEnd()}if(2&P){const u=A.$implicit,m=e.\u0275\u0275nextContext();e.\u0275\u0275property("removable",!m.disabled),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",u," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!m.disabled)}}function U(P,A){1&P&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&P&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.instances-list-required")," "))}function F(P,A){1&P&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&P&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.instance-id-pattern")," "))}function a(P,A){if(1&P&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&P){const u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,"device-profile.lwm2m.instance-id-max",e.\u0275\u0275pureFunction1(4,L,u.instanceIdValueMax))," ")}}class O{get required(){return this.requiredValue}set required(A){this.requiredValue=(0,h.coerceBooleanProperty)(A),this.updateValidators()}constructor(A){this.fb=A,this.instancesId=new Set,this.separatorKeysCodes=[V.ENTER,V.COMMA,V.SEMICOLON],this.instanceIdValueMax=c.Qo,this.propagateChange=u=>{},this.add=u=>{const m=u.value;this.instancesListFormGroup.get("instanceId").valid&&""!==m&&Number.isFinite(Number(m))&&(this.instancesId.add(Number(m)),this.instancesListFormGroup.patchValue({instanceList:Array.from(this.instancesId)},{emitEvent:!1}),this.instancesListFormGroup.get("instanceId").setValue(null,{emitEvent:!1}),this.propagateChange(this.instancesId))},this.remove=u=>{this.instancesId.delete(u),this.instancesListFormGroup.patchValue({instanceList:Array.from(this.instancesId)},{emitEvent:!1}),this.propagateChange(this.instancesId)},this.instancesListFormGroup=this.fb.group({instanceList:[null],instanceId:[null,[t.Validators.min(c.w$),t.Validators.max(c.Qo),t.Validators.pattern("[0-9]*")]]}),this.instancesListFormGroup.get("instanceId").statusChanges.subscribe(u=>{if("INVALID"===u){const m=this.instancesListFormGroup.get("instanceId").errors;this.instancesListFormGroup.get("instanceList").setErrors(m)}else this.instancesListFormGroup.get("instanceList").updateValueAndValidity({onlySelf:!0})})}registerOnChange(A){this.propagateChange=A}registerOnTouched(A){}setDisabledState(A){this.disabled=A,A?this.instancesListFormGroup.disable({emitEvent:!1}):this.instancesListFormGroup.enable({emitEvent:!1})}writeValue(A){A&&A.size&&(this.instancesId=A,this.instancesListFormGroup.patchValue({instanceList:Array.from(this.instancesId)},{emitEvent:!1}))}validate(){return this.instancesListFormGroup.valid?null:{instancesListForm:!1}}onFocus(){setTimeout(()=>{this.instanceId.nativeElement.blur(),this.instanceId.nativeElement.focus()},0)}updateValidators(){this.instancesListFormGroup.get("instanceList").setValidators(this.required?[t.Validators.required]:[]),this.instancesListFormGroup.get("instanceList").updateValueAndValidity({emitEvent:!1})}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-profile-lwm2m-object-add-instances-list"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(z,5),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.instanceId=p.first)}},inputs:{disabled:"disabled",required:"required"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>O),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>O),multi:!0}])],decls:13,vars:11,consts:[["chipList",""],["instanceId",""],[1,"lwm2m-instances-list",3,"formGroup"],[1,"mat-block"],["formControlName","instanceList",3,"focus","required"],[3,"removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","instanceId","matChipInputAddOnBlur","",2,"max-width","70px",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes"],[4,"ngIf"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",2)(1,"mat-form-field",3)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-chip-grid",4,0),e.\u0275\u0275listener("focus",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.onFocus())}),e.\u0275\u0275template(7,I,3,3,"mat-chip-row",5),e.\u0275\u0275elementStart(8,"input",6,1),e.\u0275\u0275listener("matChipInputTokenEnd",function(T){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.add(T))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,U,3,3,"mat-error",7)(11,F,3,3,"mat-error",7)(12,a,3,6,"mat-error",7),e.\u0275\u0275elementEnd()()}if(2&u){const p=e.\u0275\u0275reference(6);e.\u0275\u0275property("formGroup",m.instancesListFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,9,"device-profile.lwm2m.instances-list")),e.\u0275\u0275advance(2),e.\u0275\u0275property("required",m.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",m.instancesId),e.\u0275\u0275advance(),e.\u0275\u0275property("matChipInputFor",p)("matChipInputSeparatorKeyCodes",m.separatorKeysCodes),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.instancesListFormGroup.get("instanceList").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",m.instancesListFormGroup.get("instanceId").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",m.instancesListFormGroup.get("instanceId").hasError("max"))}},dependencies:[S.NgForOf,S.NgIf,G.MatIcon,K.MatInput,H.MatFormField,H.MatLabel,H.MatError,k.MatChipGrid,k.MatChipInput,k.MatChipRemove,k.MatChipRow,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,Q.TranslatePipe],encapsulation:2})}}},58165:(Re,X,n)=>{"use strict";n.d(X,{O:()=>b});var e=n(93953),t=n(89417),c=n(14085),h=n(88141),V=n(5964),S=n(23294),G=n(73028),K=n(97647),H=n(68488),k=n(14246),Q=n(67496),z=n(27997),L=n(719),B=n(97435),I=n(60177),U=n(99213),F=n(59042),a=n(53719),O=n(86600),P=n(60850),A=n(36471),u=n(73955),m=n(91009);const p=["objectInput"],v=D=>({object:D});function T(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-icon",15),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd())}function C(D,w){if(1&D){const ee=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-chip-row",13),e.\u0275\u0275listener("removed",function(){const ve=e.\u0275\u0275restoreView(ee).$implicit,Ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ee.remove(ve))}),e.\u0275\u0275text(1),e.\u0275\u0275template(2,T,2,0,"mat-icon",14),e.\u0275\u0275elementEnd()}if(2&D){const ee=w.$implicit,_e=e.\u0275\u0275nextContext();e.\u0275\u0275property("removable",!_e.disabled),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",ee.name," #",ee.keyId," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_e.disabled)}}function _(D,w){if(1&D&&(e.\u0275\u0275elementStart(0,"mat-option",16),e.\u0275\u0275element(1,"span",17),e.\u0275\u0275pipe(2,"highlight"),e.\u0275\u0275elementEnd()),2&D){const ee=w.$implicit,_e=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",ee),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",ee.keyId+": "+e.\u0275\u0275pipeBind2(2,2,ee.name,_e.searchText),e.\u0275\u0275sanitizeHtml)}}function E(D,w){1&D&&(e.\u0275\u0275elementStart(0,"div")(1,"span",5),e.\u0275\u0275text(2,"device-profile.lwm2m.no-objects-found"),e.\u0275\u0275elementEnd()())}function f(D,w){if(1&D&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D){const ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,"device-profile.lwm2m.no-objects-matching",e.\u0275\u0275pureFunction1(4,v,ee.truncate.transform(ee.searchText,!0,6,"...")))," ")}}function g(D,w){if(1&D&&(e.\u0275\u0275elementStart(0,"mat-option",16),e.\u0275\u0275template(1,E,3,0,"div",18)(2,f,3,6,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&D){const ee=e.\u0275\u0275reference(3),_e=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",null),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_e.textIsNotEmpty(_e.searchText))("ngIfElse",ee)}}function y(D,w){1&D&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.object-list-empty")," "))}class b{get required(){return this.requiredValue}set required(w){this.requiredValue=(0,c.coerceBooleanProperty)(w),this.updateValidators()}constructor(w,ee,_e){this.truncate=w,this.deviceProfileService=ee,this.fb=_e,this.dirty=!1,this.objectsList=[],this.disabled=!1,this.searchText="",this.addList=new e.EventEmitter,this.removeList=new e.EventEmitter,this.propagateChange=ve=>{},this.updateValidators=()=>{this.lwm2mListFormGroup.get("objectsList").setValidators(this.required?[t.Validators.required]:[]),this.lwm2mListFormGroup.get("objectsList").updateValueAndValidity()},this.remove=ve=>{const Ee=this.objectsList.indexOf(ve);Ee>=0&&(this.objectsList.splice(Ee,1),this.lwm2mListFormGroup.get("objectsList").setValue(this.objectsList),this.removeList.next(ve),this.clear())},this.displayObjectLwm2mFn=ve=>ve?ve.name:"",this.fetchListObjects=ve=>{this.searchText=ve;const Ee=new L.Ek(H.Cd,0,this.searchText,{property:"id",direction:Q.O.ASC});return this.deviceProfileService.getLwm2mObjectsPage(Ee)},this.onFocus=()=>{this.dirty||(this.lwm2mListFormGroup.get("objectLwm2m").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!0)},this.lwm2mListFormGroup=this.fb.group({objectsList:[this.objectsList],objectLwm2m:[""]}),this.lwm2mListFormGroup.get("objectsList").valueChanges.subscribe(ve=>{if(!ve.length||ve.length&&(0,z.Gv)(ve[0])){let Ee=null;this.lwm2mListFormGroup.valid&&(Ee=ve),this.propagateChange(Ee)}})}registerOnChange(w){this.propagateChange=w}registerOnTouched(w){}ngOnInit(){this.filteredObjectsList=this.lwm2mListFormGroup.get("objectLwm2m").valueChanges.pipe((0,h.M)(w=>{w&&!(0,z.Kg)(w)?this.add(w):null===w&&this.clear(this.objectInput.nativeElement.value)}),(0,V.p)(w=>(0,z.Kg)(w)),(0,S.F)(),(0,G.Z)(w=>this.fetchListObjects(w)),(0,K.u)())}setDisabledState(w){this.disabled=w,w?(this.lwm2mListFormGroup.disable({emitEvent:!1}),(0,z.O9)(this.objectInput)&&this.clear("",!1)):this.lwm2mListFormGroup.enable({emitEvent:!1})}writeValue(w){this.searchText="",(0,z.f1)(w)&&(Array.isArray(w)?this.objectsList=w:this.objectsList=[],this.lwm2mListFormGroup.patchValue({objectsList:this.objectsList},{emitEvent:!1}),this.dirty=!1)}validate(){return this.lwm2mListFormGroup.valid?null:{lwm2mListObj:!1}}add(w){(0,z.f1)(this.objectsList)&&-1===this.objectsList.findIndex(ee=>ee.keyId===w.keyId)&&(this.objectsList.push(w),this.lwm2mListFormGroup.get("objectsList").setValue(this.objectsList),this.addList.next(this.objectsList)),this.clear()}textIsNotEmpty(w){return w&&w.length>0}clear(w="",ee=!0){this.objectInput.nativeElement.value=w,this.lwm2mListFormGroup.get("objectLwm2m").patchValue(w,{emitEvent:ee}),ee&&setTimeout(()=>{this.objectInput.nativeElement.blur(),this.objectInput.nativeElement.focus()},0)}static{this.\u0275fac=function(ee){return new(ee||b)(e.\u0275\u0275directiveInject(B.TruncatePipe),e.\u0275\u0275directiveInject(k.N),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["tb-profile-lwm2m-object-list"]],viewQuery:function(ee,_e){if(1&ee&&e.\u0275\u0275viewQuery(p,5),2&ee){let ve;e.\u0275\u0275queryRefresh(ve=e.\u0275\u0275loadQuery())&&(_e.objectInput=ve.first)}},inputs:{required:"required"},outputs:{addList:"addList",removeList:"removeList"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>b),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>b),multi:!0}])],decls:16,vars:14,consts:[["chipList",""],["objectInput","","origin","matAutocompleteOrigin"],["objectAutocomplete","matAutocomplete"],["searchNotEmpty",""],[1,"mat-block",3,"formGroup"],["translate",""],["formControlName","objectsList",3,"required"],[3,"removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","objectLwm2m","matAutocompleteOrigin","",2,"max-width","200px",3,"focusin","matAutocompleteConnectedTo","matAutocomplete","matChipInputFor"],[1,"tb-autocomplete",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],[4,"ngIf"],[3,"removed","removable"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],[4,"ngIf","ngIfElse"]],template:function(ee,_e){if(1&ee){const ve=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",4)(1,"mat-label",5),e.\u0275\u0275text(2,"device-profile.lwm2m.object-list"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-chip-grid",6,0),e.\u0275\u0275template(5,C,3,4,"mat-chip-row",7),e.\u0275\u0275elementStart(6,"input",8,1),e.\u0275\u0275listener("focusin",function(){return e.\u0275\u0275restoreView(ve),e.\u0275\u0275resetView(_e.onFocus())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"mat-autocomplete",9,2),e.\u0275\u0275template(11,_,3,5,"mat-option",10),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275template(13,g,4,3,"mat-option",11),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,y,3,3,"mat-error",12),e.\u0275\u0275elementEnd()}if(2&ee){let ve;const Ee=e.\u0275\u0275reference(4),$=e.\u0275\u0275reference(8),be=e.\u0275\u0275reference(10);e.\u0275\u0275property("formGroup",_e.lwm2mListFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275property("required",_e.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",_e.objectsList),e.\u0275\u0275advance(),e.\u0275\u0275property("matAutocompleteConnectedTo",$)("matAutocomplete",be)("matChipInputFor",Ee),e.\u0275\u0275advance(3),e.\u0275\u0275property("displayWith",_e.displayObjectLwm2mFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(12,10,_e.filteredObjectsList)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=(ve=e.\u0275\u0275pipeBind1(14,12,_e.filteredObjectsList))&&ve.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_e.lwm2mListFormGroup.get("objectsList").hasError("required"))}},dependencies:[I.NgForOf,I.NgIf,U.MatIcon,F.MatInput,a.MatFormField,a.MatLabel,a.MatError,O.MatOption,P.MatAutocomplete,P.MatAutocompleteTrigger,P.MatAutocompleteOrigin,A.MatChipGrid,A.MatChipInput,A.MatChipRemove,A.MatChipRow,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,u.TranslateDirective,I.AsyncPipe,m.HighlightPipe,u.TranslatePipe],encapsulation:2})}}},74026:(Re,X,n)=>{"use strict";n.d(X,{h:()=>L});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(73955),S=n(60177),G=n(82765),K=n(9454),H=n(18891),k=n(9760);function Q(B,I){1&B&&e.\u0275\u0275element(0,"tb-profile-lwm2m-observe-attr-telemetry-resource",13)}function z(B,I){if(1&B){const U=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title",4)(3,"div",5)(4,"span",6),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",7)(9,"mat-checkbox",8),e.\u0275\u0275listener("click",function(a){return e.\u0275\u0275restoreView(U),e.\u0275\u0275resetView(a.stopPropagation())})("change",function(a){const O=e.\u0275\u0275restoreView(U).$implicit,P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.changeInstanceResourcesCheckBox(a.checked,O,"attribute"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7)(11,"mat-checkbox",9),e.\u0275\u0275listener("click",function(a){return e.\u0275\u0275restoreView(U),e.\u0275\u0275resetView(a.stopPropagation())})("change",function(a){const O=e.\u0275\u0275restoreView(U).$implicit,P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.changeInstanceResourcesCheckBox(a.checked,O,"telemetry"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",7)(13,"mat-checkbox",9),e.\u0275\u0275listener("click",function(a){return e.\u0275\u0275restoreView(U),e.\u0275\u0275resetView(a.stopPropagation())})("change",function(a){const O=e.\u0275\u0275restoreView(U).$implicit,P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.changeInstanceResourcesCheckBox(a.checked,O,"observe"))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(14,"span",10)(15,"tb-profile-lwm2m-attributes",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,Q,1,0,"ng-template",12),e.\u0275\u0275elementEnd()}if(2&B){const U=I.$implicit,F=I.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroupName",F)("expanded",a.isExpend)("disabled",a.isExpend),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,16,"device-profile.lwm2m.instance")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\xa0#",U.get("id").value," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",a.disabled)("checked",a.getChecked(U,"attribute"))("indeterminate",a.getIndeterminate(U,"attribute")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",a.disabled)("checked",a.getChecked(U,"telemetry"))("indeterminate",a.getIndeterminate(U,"telemetry")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",a.disableObserve(U))("checked",a.getChecked(U,"observe"))("indeterminate",a.getIndeterminate(U,"observe")),e.\u0275\u0275advance(2),e.\u0275\u0275property("isAttributeTelemetry",a.disableObserveInstance(U))("modelName",a.getNameInstance(U.value))}}class L{get required(){return this.requiredValue}set required(I){const U=(0,c.coerceBooleanProperty)(I);this.requiredValue!==U&&(this.requiredValue=U,this.updateValidators())}constructor(I,U){this.fb=I,this.translate=U,this.valueChange$=null,this.propagateChange=F=>{},this.changeInstanceResourcesCheckBox=(F,a,O)=>{const P=(0,h.Go)(a.get("resources").value);F&&"observe"===O?P.forEach(A=>A[O]=A.telemetry||A.attribute):F||"observe"===O?P.forEach(A=>A[O]=F):P.forEach(A=>{A[O]=F,A.observe&&!A.telemetry&&!A.attribute&&(A.observe=!1)}),a.get("resources").patchValue(P)},this.trackByParams=(F,a)=>a.id,this.getIndeterminate=(F,a)=>{const O=F.get("resources").value;if((0,h.f1)(O)){const P=O.filter(A=>A[a]);return 0!==P.length&&P.length!==O.length}return!1},this.getChecked=(F,a)=>{const O=F.get("resources").value;return(0,h.f1)(O)&&O.every(P=>P[a])},this.disableObserveInstance=F=>{const a=this.observeInstance(F);return a&&F.get("attributes").patchValue(null,{emitEvent:!1}),a},this.observeInstance=F=>{const a=F.get("resources").value;if((0,h.f1)(a)){const O=a.filter(A=>A.attribute),P=a.filter(A=>A.telemetry);return 0===O.length&&0===P.length}return!1},this.instancesFormGroup=this.fb.group({instances:this.fb.array([])}),this.valueChange$=this.instancesFormGroup.valueChanges.subscribe(F=>this.updateModel(F.instances))}ngOnDestroy(){this.valueChange$&&this.valueChange$.unsubscribe()}registerOnChange(I){this.propagateChange=I}registerOnTouched(I){}setDisabledState(I){this.disabled=I,I?this.instancesFormGroup.disable({emitEvent:!1}):this.instancesFormGroup.enable({emitEvent:!1})}writeValue(I){this.updateInstances(I)}validate(I){return this.instancesFormGroup.valid?null:{instancesForm:!1}}get instancesFormArray(){return this.instancesFormGroup.get("instances")}updateInstances(I){if(I.length===this.instancesFormArray.length)this.instancesFormArray.patchValue(I,{emitEvent:!1});else{const U=[];I&&I.forEach(F=>{U.push(this.createInstanceFormGroup(F))}),this.instancesFormGroup.setControl("instances",this.fb.array(U),{emitEvent:!1}),this.disabled&&this.instancesFormGroup.disable({emitEvent:!1})}}createInstanceFormGroup(I){return this.fb.group({id:[I.id],attributes:[I.attributes],resources:[I.resources]})}updateModel(I){I&&this.instancesFormGroup.valid?this.propagateChange(I):this.propagateChange(null)}updateValidators(){this.instancesFormArray.setValidators(this.required?t.Validators.required:[]),this.instancesFormArray.updateValueAndValidity()}disableObserve(I){return this.disabled||!(this.getIndeterminate(I,"telemetry")||this.getIndeterminate(I,"attribute")||this.getChecked(I,"telemetry")||this.getChecked(I,"attribute"))}get isExpend(){return 1===this.instancesFormArray.length}getNameInstance(I){return`${this.translate.instant("device-profile.lwm2m.instance")} #${I.id}`}static{this.\u0275fac=function(U){return new(U||L)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(V.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:L,selectors:[["tb-profile-lwm2m-observe-attr-telemetry-instances"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>L),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>L),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],["multi","true","formArrayName","instances"],["class","instance-row",3,"formGroupName","expanded","disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"instance-row",3,"formGroupName","expanded","disabled"],[1,"tb-panel","flex","flex-row"],[1,"flex","max-w-30%","flex-full","items-center","justify-start"],[1,"tb-panel-title"],[1,"flex","max-w-10%","flex-full","items-center","justify-center"],["color","warn",3,"click","change","disabled","checked","indeterminate"],["color","primary",3,"click","change","disabled","checked","indeterminate"],[1,"flex-1"],["formControlName","attributes",3,"isAttributeTelemetry","modelName"],["matExpansionPanelContent",""],["formControlName","resources"]],template:function(U,F){1&U&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-accordion",1),e.\u0275\u0275template(2,z,17,18,"mat-expansion-panel",2),e.\u0275\u0275elementEnd()()),2&U&&(e.\u0275\u0275property("formGroup",F.instancesFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",F.instancesFormArray.controls)("ngForTrackBy",F.trackByParams))},dependencies:[S.NgForOf,G.MatCheckbox,K.MatAccordion,K.MatExpansionPanel,K.MatExpansionPanelHeader,K.MatExpansionPanelTitle,K.MatExpansionPanelContent,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,t.FormGroupName,t.FormArrayName,H._,k.Q,V.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-panel[_ngcontent-%COMP%]{min-height:42px}[_nghost-%COMP%]   .tb-panel[_ngcontent-%COMP%]   .tb-panel-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .instance-row[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{color:inherit}[_nghost-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{margin-right:0}']})}}},18891:(Re,X,n)=>{"use strict";n.d(X,{_:()=>a});var e=n(93953),t=n(89417),c=n(14085),h=n(18530),V=n(84572),S=n(56977),G=n(99172),K=n(60177),H=n(82765),k=n(59042),Q=n(53719),z=n(14823),L=n(71997),B=n(73955),I=n(9760);function U(O,P){1&O&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&O&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.lwm2m.key-name-required")," "))}function F(O,P){if(1&O&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"div",9),e.\u0275\u0275text(3),e.\u0275\u0275elementStart(4,"span",10),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",11),e.\u0275\u0275element(7,"mat-checkbox",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",11),e.\u0275\u0275element(9,"mat-checkbox",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",11),e.\u0275\u0275element(11,"mat-checkbox",14),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",15),e.\u0275\u0275element(14,"input",16),e.\u0275\u0275template(15,U,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"span",5)(17,"tb-profile-lwm2m-attributes",18),e.\u0275\u0275elementEnd()()),2&O){const A=P.$implicit,u=P.index,m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("formGroupName",u),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" #",A.get("id").value," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.get("name").value),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(12,8,"device-profile.lwm2m.edit-observe-select")),e.\u0275\u0275property("matTooltipDisabled",m.disabled||!m.isDisabledObserve(u)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",A.get("keyName").hasError("required")||A.get("keyName").hasError("pattern")),e.\u0275\u0275advance(2),e.\u0275\u0275property("isAttributeTelemetry",m.isDisabledObserve(u))("modelName",m.getNameResourceLwm2m(A.value))}}class a{get required(){return this.requiredValue}set required(P){const A=(0,c.coerceBooleanProperty)(P);this.requiredValue!==A&&(this.requiredValue=A)}constructor(P){this.fb=P,this.disabled=!1,this.destroy$=new h.B,this.propagateChange=A=>{},this.resourcesFormGroup=this.fb.group({resources:this.fb.array([])}),this.resourcesFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>this.updateModel(this.resourcesFormGroup.getRawValue().resources))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnTouched(P){}registerOnChange(P){this.propagateChange=P}writeValue(P){this.updatedResources(P)}setDisabledState(P){this.disabled=P,P?this.resourcesFormGroup.disable({emitEvent:!1}):this.resourcesFormArray.controls.forEach(A=>{A.get("id").enable({emitEvent:!1}),A.get("name").enable({emitEvent:!1}),A.get("keyName").enable({emitEvent:!1}),A.get("attribute").enable({emitEvent:!1}),A.get("telemetry").enable({onlySelf:!0}),A.get("attributes").enable({emitEvent:!1})})}validate(){return this.resourcesFormGroup.valid?null:{resources:!1}}get resourcesFormArray(){return this.resourcesFormGroup.get("resources")}getNameResourceLwm2m(P){return`#${P.id} ${P.name}`}updatedResources(P){if(P.length===this.resourcesFormArray.length)this.resourcesFormArray.patchValue(P,{onlySelf:!0,emitEvent:!1});else{const A=[];P&&P.forEach(u=>{A.push(this.createdResourceFormGroup(u))}),this.resourcesFormGroup.setControl("resources",this.fb.array(A),{emitEvent:!1}),this.disabled&&this.resourcesFormGroup.disable({emitEvent:!1})}}createdResourceFormGroup(P){const A=this.fb.group({id:[P.id],name:[P.name],attribute:[P.attribute],telemetry:[P.telemetry],observe:[P.observe],keyName:[P.keyName,[t.Validators.required,t.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],attributes:[P.attributes]});return(0,V.z)([A.get("attribute").valueChanges.pipe((0,G.Z)(P.attribute),(0,S.Q)(this.destroy$)),A.get("telemetry").valueChanges.pipe((0,G.Z)(P.telemetry),(0,S.Q)(this.destroy$))]).subscribe(([u,m])=>{this.disabled||(u||m?A.get("observe").enable({emitEvent:!1}):(A.get("observe").disable({emitEvent:!1}),A.get("observe").patchValue(!1,{emitEvent:!1}),A.get("attributes").patchValue({},{emitEvent:!1})))}),A}updateModel(P){P&&this.resourcesFormGroup.valid?this.propagateChange(P):this.propagateChange(null)}trackByParams(P,A){return A.id}isDisabledObserve(P){return this.resourcesFormArray.at(P).get("observe").disabled}static{this.\u0275fac=function(A){return new(A||a)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["tb-profile-lwm2m-observe-attr-telemetry-resource"]],inputs:{disabled:"disabled",required:"required"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>a),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>a),multi:!0}])],decls:19,vars:3,consts:[[3,"formGroup"],[1,"flex","flex-row","items-center","justify-start"],[1,"max-w-30%","flex-full"],["translate",""],[1,"checkbox-column-title","max-w-10%","flex-full"],[1,"flex-1"],["formArrayName","resources",4,"ngFor","ngForOf","ngForTrackBy"],["formArrayName","resources"],[1,"resource-list","flex","flex-row","items-center","justify-start",3,"formGroupName"],[1,"resource-name","max-w-30%","flex-full"],[1,"name"],[1,"flex","max-w-10%","flex-full","items-center","justify-center"],["formControlName","attribute","color","warn"],["formControlName","telemetry","color","primary"],["formControlName","observe","color","primary","matTooltipPosition","above",1,"max-w-10%","flex-full",3,"matTooltip","matTooltipDisabled"],[1,"max-w-33%","flex-full"],["matInput","","type","text","formControlName","keyName","required",""],[4,"ngIf"],["formControlName","attributes","isResource","true",3,"isAttributeTelemetry","modelName"]],template:function(A,u){1&A&&(e.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2)(3,"mat-label",3),e.\u0275\u0275text(4,"device-profile.lwm2m.resource-label"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"mat-label",3),e.\u0275\u0275text(7,"device-profile.lwm2m.attribute-label"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",4)(9,"mat-label",3),e.\u0275\u0275text(10,"device-profile.lwm2m.telemetry-label"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",4)(12,"mat-label",3),e.\u0275\u0275text(13,"device-profile.lwm2m.observe-label"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",5)(15,"mat-label",3),e.\u0275\u0275text(16,"device-profile.lwm2m.key-name"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(17,"mat-divider"),e.\u0275\u0275template(18,F,18,10,"div",6),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",u.resourcesFormGroup),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngForOf",u.resourcesFormArray.controls)("ngForTrackBy",u.trackByParams))},dependencies:[K.NgForOf,K.NgIf,H.MatCheckbox,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatError,z.MatTooltip,L.MatDivider,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,t.FormArrayName,B.TranslateDirective,I.Q,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .resource-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .resource-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .checkbox-column-title[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]   .resource-list[_ngcontent-%COMP%]{padding-bottom:8px}']})}}},41483:(Re,X,n)=>{"use strict";n.d(X,{H:()=>P});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(10512),S=n(67376),G=n.n(S),K=n(34006),H=n(60177),k=n(88834),Q=n(99213),z=n(14823),L=n(9454),B=n(9760),I=n(74026),U=n(73955);function F(A,u){if(1&A){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(v){e.\u0275\u0275restoreView(m);const T=e.\u0275\u0275nextContext().$implicit,C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.addInstances(v,T))}),e.\u0275\u0275elementStart(2,"mat-icon",11),e.\u0275\u0275text(3,"note_add"),e.\u0275\u0275elementEnd()()}2&A&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"device-profile.lwm2m.add-new-instances"))}function a(A,u){1&A&&e.\u0275\u0275element(0,"tb-profile-lwm2m-observe-attr-telemetry-instances",12)}function O(A,u){if(1&A&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title",4)(3,"span",5),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275element(6,"span",6)(7,"tb-profile-lwm2m-attributes",7),e.\u0275\u0275template(8,F,4,3,"button",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(9,a,1,0,"ng-template",9),e.\u0275\u0275elementEnd()),2&A){const m=u.$implicit,p=u.index,v=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroupName",p),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(m.get("name").value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1("\xa0#",m.get("keyId").value," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("modelName",v.getNameObject(m.value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!v.disabled&&m.get("multiple").value)}}class P{get required(){return this.requiredValue}set required(u){const m=(0,c.coerceBooleanProperty)(u);this.requiredValue!==m&&(this.requiredValue=m,this.updateValidators())}constructor(u,m,p){this.fb=u,this.dialog=m,this.cd=p,this.valueChange$=null,this.propagateChange=v=>{},this.updateModel=v=>{v&&this.modelsFormGroup.valid?this.propagateChange(v):this.propagateChange(null)},this.updateValidators=()=>{this.modelsFormArray.setValidators(this.required?t.Validators.required:[]),this.modelsFormArray.updateValueAndValidity()},this.trackByParams=(v,T)=>T.id,this.addInstances=(v,T)=>{v&&(v.stopPropagation(),v.preventDefault());const C=T.value,_=this.instancesToSetId(C.instances);this.dialog.open(V.t,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{instancesId:new Set(_),objectName:C.name,objectId:C.id}}).afterClosed().subscribe(E=>{(0,h.f1)(E)&&this.updateInstancesIds(E,T,_)})},this.getNameObject=v=>`${v.name} #${v.keyId}`,this.modelsFormGroup=this.fb.group({models:this.fb.array([])}),this.valueChange$=this.modelsFormGroup.valueChanges.subscribe(v=>this.updateModel(v.models))}ngOnDestroy(){this.valueChange$&&this.valueChange$.unsubscribe()}registerOnChange(u){this.propagateChange=u}registerOnTouched(u){}setDisabledState(u){this.disabled=u,u?this.modelsFormGroup.disable({emitEvent:!1}):this.modelsFormGroup.enable({emitEvent:!1})}writeValue(u){(0,h.f1)(u)&&this.updateModels(u)}validate(){return this.modelsFormGroup.valid?null:{modelsFormGroup:!1}}get modelsFormArray(){return this.modelsFormGroup.get("models")}updateModels(u){if(u.length===this.modelsFormArray.length)this.modelsFormArray.patchValue(u,{emitEvent:!1});else{const m=[];u.forEach(p=>{m.push(this.createModelFormGroup(p))}),this.modelsFormGroup.setControl("models",this.fb.array(m),{emitEvent:!1}),this.disabled&&this.modelsFormGroup.disable({emitEvent:!1})}}createModelFormGroup(u){return this.fb.group({id:[u.id],keyId:[u.keyId],name:[u.name],multiple:[u.multiple],mandatory:[u.mandatory],attributes:[u.attributes],instances:[u.instances]})}updateInstancesIds(u,m,p){let v=m.get("instances").value;const T=(0,h.Go)(v[0]);if(T.attributes={},T.resources.forEach(C=>{C.attribute=!1,C.telemetry=!1,C.observe=!1,C.keyName=G().camelCase(C.name),C.attributes={}}),!(0,h.n4)(p,u)){const C=this.diffBetweenSet(p,u),_=this.diffBetweenSet(u,p);_.size&&_.forEach(E=>{const f=(0,h.Go)(T);f.resources.forEach(g=>g.keyName+=E),f.id=E,v.push(f)}),C.size&&(v=v.filter(E=>!C.has(E.id)),0===v.length&&(T.id=0,v.push(T))),(_.size||C.size)&&(v.sort((E,f)=>E.id-f.id),m.get("instances").patchValue(v),this.cd.markForCheck())}}diffBetweenSet(u,m){return new Set([...Array.from(u)].filter(p=>!m.has(p)))}instancesToSetId(u){return new Set(u.map(m=>m.id))}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(K.MatDialog),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-profile-lwm2m-observe-attr-telemetry"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>P),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>P),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],["multi","true","formArrayName","models"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],[1,"flex","items-center","justify-start"],[1,"tb-panel-title"],[1,"flex-1"],["formControlName","attributes",3,"modelName"],["type","button","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"material-icons"],["formControlName","instances"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"section",0)(1,"mat-accordion",1),e.\u0275\u0275template(2,O,10,5,"mat-expansion-panel",2),e.\u0275\u0275elementEnd()()),2&m&&(e.\u0275\u0275property("formGroup",p.modelsFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",p.modelsFormArray.controls)("ngForTrackBy",p.trackByParams))},dependencies:[H.NgForOf,H.NgIf,k.MatIconButton,Q.MatIcon,z.MatTooltip,L.MatAccordion,L.MatExpansionPanel,L.MatExpansionPanelHeader,L.MatExpansionPanelTitle,L.MatExpansionPanelContent,t.NgControlStatus,t.NgControlStatusGroup,t.FormGroupDirective,t.FormControlName,t.FormGroupName,t.FormArrayName,B.Q,I.h,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   section[_ngcontent-%COMP%]{padding:2px}[_nghost-%COMP%]   .tb-panel-title[_ngcontent-%COMP%]{font-weight:500}']})}}},85009:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{MqttDeviceProfileTransportConfigurationComponent:()=>Ee});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(18530),S=n(56977),G=n(9310),K=n(60177),H=n(77177),k=n(82765),Q=n(59042),z=n(53719),L=n(82798),B=n(86600),I=n(73955),U=n(40281);function F($,be){1&$&&(e.\u0275\u0275element(0,"div",5),e.\u0275\u0275pipe(1,"translate")),2&$&&e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(1,1,"device-profile.mqtt-device-topic-filters-spark-plug-hint"),e.\u0275\u0275sanitizeHtml)}function a($,be){1&$&&(e.\u0275\u0275element(0,"tb-string-items-list",6),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate")),2&$&&(e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(1,3,"device-profile.mqtt-device-topic-filters-spark-plug-attribute-metric-names")),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(2,5,"device-profile.mqtt-device-topic-filters-spark-plug-attribute-metric-names")),e.\u0275\u0275propertyInterpolate("hint",e.\u0275\u0275pipeBind1(3,7,"device-profile.mqtt-device-topic-filters-spark-plug-attribute-metric-names-hint")))}function O($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.telemetry-topic-filter-required")," "))}function P($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-single-character")," "))}function A($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-multi-character")," "))}function u($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.attributes-topic-filter-required")," "))}function m($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-single-character")," "))}function p($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-multi-character")," "))}function v($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.attributes-subscribe-topic-filter-required")," "))}function T($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-single-character")," "))}function C($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.not-valid-multi-character")," "))}function _($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.mqtt-device-topic-filters-unique")," "))}function E($,be){if(1&$&&(e.\u0275\u0275elementStart(0,"mat-option",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$){const Te=be.$implicit,oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",Te),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,oe.transportPayloadTypeTranslations.get(Te))," ")}}function f($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.mqtt-payload-type-required")," "))}function g($,be){1&$&&(e.\u0275\u0275elementStart(0,"div")(1,"mat-checkbox",29),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",5),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,2,"device-profile.mqtt-use-json-format-for-default-downlink-topics")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(5,4,"device-profile.mqtt-use-json-format-for-default-downlink-topics-hint"),e.\u0275\u0275sanitizeHtml))}function y($,be){if(1&$&&(e.\u0275\u0275elementStart(0,"div",24)(1,"mat-checkbox",28),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",5),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275template(6,g,6,6,"div",15),e.\u0275\u0275elementEnd()),2&$){const Te=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"device-profile.mqtt-enable-compatibility-with-json-payload-format")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(5,5,"device-profile.mqtt-enable-compatibility-with-json-payload-format-hint"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Te.compatibilityWithJsonPayloadFormatEnabled)}}function b($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.telemetry-proto-schema-required")," "))}function D($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.attributes-proto-schema-required")," "))}function w($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.rpc-request-proto-schema-required")," "))}function ee($,be){1&$&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.rpc-response-proto-schema-required")," "))}function _e($,be){if(1&$&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275element(2,"tb-protobuf-content",31),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,b,3,3,"mat-error",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(5),e.\u0275\u0275element(6,"tb-protobuf-content",32),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275template(8,D,3,3,"mat-error",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(9),e.\u0275\u0275element(10,"tb-protobuf-content",33),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275template(12,w,3,3,"mat-error",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13),e.\u0275\u0275element(14,"tb-protobuf-content",34),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275template(16,ee,3,3,"mat-error",15),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&$){const Te=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(3,12,"device-profile.telemetry-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(7,14,"device-profile.attributes-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(11,16,"device-profile.rpc-request-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceRpcRequestProtoSchema").hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(15,18,"device-profile.rpc-response-proto-schema")),e.\u0275\u0275property("fillHeight",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceRpcResponseProtoSchema").hasError("required"))}}function ve($,be){if(1&$&&(e.\u0275\u0275elementStart(0,"form",7)(1,"fieldset",8)(2,"legend",9),e.\u0275\u0275text(3,"device-profile.mqtt-device-topic-filters"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10)(5,"div",11)(6,"mat-form-field",12)(7,"mat-label",13),e.\u0275\u0275text(8,"device-profile.telemetry-topic-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",14),e.\u0275\u0275template(10,O,3,3,"mat-error",15)(11,P,3,3,"mat-error",15)(12,A,3,3,"mat-error",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",12)(14,"mat-label",13),e.\u0275\u0275text(15,"device-profile.attributes-topic-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",16),e.\u0275\u0275template(17,u,3,3,"mat-error",15)(18,m,3,3,"mat-error",15)(19,p,3,3,"mat-error",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-form-field",12)(21,"mat-label",13),e.\u0275\u0275text(22,"device-profile.attributes-subscribe-topic-filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"input",17),e.\u0275\u0275template(24,v,3,3,"mat-error",15)(25,T,3,3,"mat-error",15)(26,C,3,3,"mat-error",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(27,_,3,3,"mat-error",15),e.\u0275\u0275element(28,"div",5),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275element(30,"div",5),e.\u0275\u0275pipe(31,"translate"),e.\u0275\u0275element(32,"div",5),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"section",18)(35,"fieldset",8)(36,"legend",9),e.\u0275\u0275text(37,"device-profile.mqtt-device-payload-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",10)(39,"mat-form-field",19)(40,"mat-select",20),e.\u0275\u0275template(41,E,3,4,"mat-option",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(42,f,3,3,"mat-error",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(43,y,7,7,"div",22)(44,_e,17,20,"div",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(45,"div",24)(46,"mat-checkbox",25),e.\u0275\u0275text(47),e.\u0275\u0275pipe(48,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(49,"div",26),e.\u0275\u0275pipe(50,"translate"),e.\u0275\u0275elementEnd()()),2&$){const Te=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",Te.mqttDeviceProfileTransportConfigurationFormGroup),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidSingleTopicCharacter")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidMultiTopicCharacter")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidSingleTopicCharacter")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidMultiTopicCharacter")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesSubscribeTopic").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesSubscribeTopic").hasError("invalidSingleTopicCharacter")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesSubscribeTopic").hasError("invalidMultiTopicCharacter")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.hasError("unique")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(29,20,"device-profile.support-level-wildcards"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(31,22,"device-profile.single-level-wildcards-hint"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(33,24,"device-profile.multi-level-wildcards-hint"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",Te.transportPayloadTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.protoPayloadType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Te.protoPayloadType),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(48,26,"device-profile.mqtt-send-ack-on-validation-exception")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(50,28,"device-profile.mqtt-send-ack-on-validation-exception-hint"),e.\u0275\u0275sanitizeHtml)}}class Ee{constructor(be,Te){this.store=be,this.fb=Te,this.transportPayloadTypes=Object.keys(c.mU),this.transportPayloadTypeTranslations=c.p$,this.destroy$=new V.B,this.propagateChange=oe=>{}}registerOnChange(be){this.propagateChange=be}registerOnTouched(be){}ngOnInit(){this.mqttDeviceProfileTransportConfigurationFormGroup=this.fb.group({deviceAttributesTopic:[null,[t.Validators.required,this.validationMQTTTopic()]],deviceAttributesSubscribeTopic:[null,[t.Validators.required,this.validationMQTTTopic()]],deviceTelemetryTopic:[null,[t.Validators.required,this.validationMQTTTopic()]],sparkplug:[!1],sparkplugAttributesMetricNames:[null],sendAckOnValidationException:[!1,t.Validators.required],transportPayloadTypeConfiguration:this.fb.group({transportPayloadType:[c.mU.JSON,t.Validators.required],deviceTelemetryProtoSchema:[c._f,t.Validators.required],deviceAttributesProtoSchema:[c.sd,t.Validators.required],deviceRpcRequestProtoSchema:[c.vF,t.Validators.required],deviceRpcResponseProtoSchema:[c.JG,t.Validators.required],enableCompatibilityWithJsonPayloadFormat:[!1,t.Validators.required],useJsonPayloadFormatForDefaultDownlinkTopics:[!1,t.Validators.required]})},{validators:this.uniqueDeviceTopicValidator}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(be=>{this.updateTransportPayloadBasedControls(be,!0)}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.enableCompatibilityWithJsonPayloadFormat").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(be=>{be||this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.useJsonPayloadFormatForDefaultDownlinkTopics").patchValue(!1,{emitEvent:!1})}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(be=>{be?(this.mqttDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").enable({emitEvent:!1}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplugAttributesMetricNames").enable({emitEvent:!1})):this.mqttDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})}),this.mqttDeviceProfileTransportConfigurationFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setDisabledState(be){this.disabled=be,this.disabled?this.mqttDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):(this.mqttDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").updateValueAndValidity({onlySelf:!0}))}get protoPayloadType(){return this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").value===c.mU.PROTOBUF}get compatibilityWithJsonPayloadFormatEnabled(){return this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.enableCompatibilityWithJsonPayloadFormat").value}writeValue(be){(0,h.f1)(be)&&(this.mqttDeviceProfileTransportConfigurationFormGroup.patchValue(be,{emitEvent:!1}),this.updateTransportPayloadBasedControls(be.transportPayloadTypeConfiguration?.transportPayloadType),this.disabled||this.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").updateValueAndValidity({onlySelf:!0}))}validate(be){return this.mqttDeviceProfileTransportConfigurationFormGroup.valid?null:{valid:!1}}updateModel(){const be=this.mqttDeviceProfileTransportConfigurationFormGroup.getRawValue();be.type=c.y0.MQTT,this.propagateChange(be)}updateTransportPayloadBasedControls(be,Te=!1){const oe=this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration");Te&&oe.patchValue({deviceTelemetryProtoSchema:c._f,deviceAttributesProtoSchema:c.sd,deviceRpcRequestProtoSchema:c.vF,deviceRpcResponseProtoSchema:c.JG,enableCompatibilityWithJsonPayloadFormat:!1,useJsonPayloadFormatForDefaultDownlinkTopics:!1},{emitEvent:!1}),be!==c.mU.PROTOBUF||this.disabled?(oe.get("deviceTelemetryProtoSchema").disable({emitEvent:!1}),oe.get("deviceAttributesProtoSchema").disable({emitEvent:!1}),oe.get("deviceRpcRequestProtoSchema").disable({emitEvent:!1}),oe.get("deviceRpcResponseProtoSchema").disable({emitEvent:!1}),oe.get("enableCompatibilityWithJsonPayloadFormat").disable({emitEvent:!1}),oe.get("useJsonPayloadFormatForDefaultDownlinkTopics").disable({emitEvent:!1})):(oe.get("deviceTelemetryProtoSchema").enable({emitEvent:!1}),oe.get("deviceAttributesProtoSchema").enable({emitEvent:!1}),oe.get("deviceRpcRequestProtoSchema").enable({emitEvent:!1}),oe.get("deviceRpcResponseProtoSchema").enable({emitEvent:!1}),oe.get("enableCompatibilityWithJsonPayloadFormat").enable({emitEvent:!1}),oe.get("useJsonPayloadFormatForDefaultDownlinkTopics").enable({emitEvent:!1}))}validationMQTTTopic(){return be=>{const Te=be.value,oe=/[#+]/g;let R=oe.exec(Te);for(;R;){const N=R.index,Z=R[0],Y=N>0?Te[N-1]:null,ge=N<Te.length-1?Te[N+1]:null;if("#"===Z&&(N!==Te.length-1||null!==Y&&"/"!==Y))return{invalidMultiTopicCharacter:{valid:!1}};if("+"===Z&&(null!==Y&&"/"!==Y||null!==ge&&"/"!==ge))return{invalidSingleTopicCharacter:{valid:!1}};R=oe.exec(Te)}return null}}uniqueDeviceTopicValidator(be){if(be.getRawValue()){const Te=be.getRawValue();if(Te.deviceAttributesTopic===Te.deviceTelemetryTopic)return{unique:!0}}return null}static{this.\u0275fac=function(Te){return new(Te||Ee)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Ee,selectors:[["tb-mqtt-device-profile-transport-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Ee),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>Ee),multi:!0}])],decls:7,vars:7,consts:[[2,"padding-top","8px",3,"formGroup"],["formControlName","sparkplug"],["class","tb-hint",3,"innerHTML",4,"ngIf"],["editable","","floatLabel","always","subscriptSizing","dynamic","formControlName","sparkplugAttributesMetricNames",3,"label","placeholder","hint",4,"ngIf"],["style","padding-bottom: 16px;",3,"formGroup",4,"ngIf"],[1,"tb-hint",3,"innerHTML"],["editable","","floatLabel","always","subscriptSizing","dynamic","formControlName","sparkplugAttributesMetricNames",3,"label","placeholder","hint"],[2,"padding-bottom","16px",3,"formGroup"],[1,"fields-group"],["translate","",1,"group-title"],[1,"flex","flex-col","gap-2"],[1,"flex","flex-row","gap-2","xs:flex-col"],[1,"flex-1"],["translate",""],["matInput","","required","","formControlName","deviceTelemetryTopic","type","text"],[4,"ngIf"],["matInput","","required","","formControlName","deviceAttributesTopic","type","text"],["matInput","","required","","formControlName","deviceAttributesSubscribeTopic","type","text"],["formGroupName","transportPayloadTypeConfiguration"],[1,"mat-block"],["formControlName","transportPayloadType","required",""],[3,"value",4,"ngFor","ngForOf"],["style","padding-bottom: 20px",4,"ngIf"],["class","flex flex-col",4,"ngIf"],[2,"padding-bottom","20px"],["formControlName","sendAckOnValidationException"],[1,"tb-hint",2,"max-width","800px",3,"innerHTML"],[3,"value"],["formControlName","enableCompatibilityWithJsonPayloadFormat"],["formControlName","useJsonPayloadFormatForDefaultDownlinkTopics"],[1,"flex","flex-col"],["formControlName","deviceTelemetryProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceAttributesProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceRpcRequestProtoSchema",1,"flex-1",3,"label","fillHeight"],["formControlName","deviceRpcResponseProtoSchema",1,"flex-1",3,"label","fillHeight"]],template:function(Te,oe){1&Te&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-checkbox",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,F,2,3,"div",2)(5,a,4,9,"tb-string-items-list",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,ve,51,30,"form",4)),2&Te&&(e.\u0275\u0275property("formGroup",oe.mqttDeviceProfileTransportConfigurationFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,5,"device-profile.mqtt-device-topic-filters-spark-plug")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",oe.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",oe.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!oe.mqttDeviceProfileTransportConfigurationFormGroup.get("sparkplug").value))},dependencies:[K.NgForOf,K.NgIf,H.StringItemsListComponent,k.MatCheckbox,Q.MatInput,z.MatFormField,z.MatLabel,z.MatError,L.MatSelect,B.MatOption,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,I.TranslateDirective,U.ProtobufContentComponent,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0;max-width:fit-content}']})}}},79329:(Re,X,n)=>{"use strict";n.d(X,{d:()=>C});var e=n(93953),t=n(89417),c=n(5095),h=n(18530),V=n(27997),S=n(56977),G=n(60177),K=n(88834),H=n(99213),k=n(59042),Q=n(53719),z=n(82798),L=n(86600),B=n(14823),I=n(71997),U=n(73955),F=n(11998);function a(_,E){if(1&_&&(e.\u0275\u0275elementStart(0,"mat-option",13),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&_){const f=E.$implicit,g=e.\u0275\u0275nextContext().index,y=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",f)("disabled",y.isDisabledSeverity(f,g)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",y.snmpSpecTypeTranslationMap.get(f)," ")}}function O(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.scope-required")," "))}function P(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.querying-frequency-required")," "))}function A(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.querying-frequency-invalid-format")," "))}function u(_,E){if(1&_&&(e.\u0275\u0275elementStart(0,"mat-form-field")(1,"mat-label",6),e.\u0275\u0275text(2,"device-profile.snmp.querying-frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",14),e.\u0275\u0275template(4,P,3,3,"mat-error",2)(5,A,3,3,"mat-error",2),e.\u0275\u0275elementEnd()),2&_){const f=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",f.get("queryingFrequencyMs").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",f.get("queryingFrequencyMs").hasError("pattern")||f.get("queryingFrequencyMs").hasError("min"))}}function m(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(f);const y=e.\u0275\u0275nextContext().index,b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.removeCommunicationConfig(y))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"remove_circle_outline"),e.\u0275\u0275elementEnd()()}2&_&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function p(_,E){if(1&_&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"mat-form-field",5)(3,"mat-label",6),e.\u0275\u0275text(4,"device-profile.snmp.scope"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",7),e.\u0275\u0275template(6,a,2,3,"mat-option",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,O,3,3,"mat-error",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"mat-divider",9),e.\u0275\u0275elementStart(9,"section",10),e.\u0275\u0275template(10,u,6,2,"mat-form-field",2),e.\u0275\u0275element(11,"tb-snmp-device-profile-mapping",11),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,m,4,3,"button",12),e.\u0275\u0275elementEnd()),2&_){const f=E.$implicit,g=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",f),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",g.snmpSpecTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",f.get("spec").hasError("required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",g.isShowFrequency(f.get("spec").value)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!g.disabled)}}function v(_,E){1&_&&(e.\u0275\u0275elementStart(0,"div")(1,"span",16),e.\u0275\u0275text(2,"device-profile.snmp.please-add-communication-config"),e.\u0275\u0275elementEnd()())}function T(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(f);const y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.addCommunicationConfig())}),e.\u0275\u0275elementStart(2,"mat-icon",18),e.\u0275\u0275text(3,"add_circle_outline"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()()}2&_&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,1,"device-profile.snmp.add-communication-config")," "))}class C{constructor(E){this.fb=E,this.snmpSpecTypes=Object.values(c.w4),this.snmpSpecTypeTranslationMap=c.Je,this.usedSpecType=[],this.destroy$=new h.B,this.propagateChange=f=>{}}ngOnInit(){this.deviceProfileCommunicationConfig=this.fb.group({communicationConfig:this.fb.array([])}),this.deviceProfileCommunicationConfig.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get communicationConfigFormArray(){return this.deviceProfileCommunicationConfig.get("communicationConfig")}registerOnChange(E){this.propagateChange=E}registerOnTouched(E){}setDisabledState(E){this.disabled=E,this.disabled?this.deviceProfileCommunicationConfig.disable({emitEvent:!1}):this.deviceProfileCommunicationConfig.enable({emitEvent:!1})}writeValue(E){if(E?.length===this.communicationConfigFormArray.length)this.communicationConfigFormArray.patchValue(E,{emitEvent:!1});else{const f=[];E&&E.forEach(g=>{f.push(this.createdFormGroup(g))}),this.deviceProfileCommunicationConfig.setControl("communicationConfig",this.fb.array(f),{emitEvent:!1}),(!E||!E.length)&&this.addCommunicationConfig(),this.disabled?this.deviceProfileCommunicationConfig.disable({emitEvent:!1}):this.deviceProfileCommunicationConfig.enable({emitEvent:!1})}this.updateUsedSpecType(),!this.disabled&&!this.deviceProfileCommunicationConfig.valid&&this.updateModel()}validate(){return this.deviceProfileCommunicationConfig.valid&&this.deviceProfileCommunicationConfig.value.communicationConfig.length?null:{communicationConfig:!1}}removeCommunicationConfig(E){this.communicationConfigFormArray.removeAt(E)}get isAddEnabled(){return this.communicationConfigFormArray.length!==Object.keys(c.w4).length}addCommunicationConfig(){this.communicationConfigFormArray.push(this.createdFormGroup()),this.deviceProfileCommunicationConfig.updateValueAndValidity(),this.deviceProfileCommunicationConfig.valid||this.updateModel()}getFirstUnusedSeverity(){for(const E of Object.values(c.w4))if(-1===this.usedSpecType.indexOf(E))return E;return null}isDisabledSeverity(E,f){const g=this.usedSpecType.indexOf(E);return g>-1&&g!==f}isShowFrequency(E){return E===c.w4.TELEMETRY_QUERYING||E===c.w4.CLIENT_ATTRIBUTES_QUERYING}updateUsedSpecType(){this.usedSpecType=[],this.deviceProfileCommunicationConfig.get("communicationConfig").value.forEach((f,g)=>{this.usedSpecType[g]=f.spec})}createdFormGroup(E){(0,V.z)(E)&&(E={spec:this.getFirstUnusedSeverity(),queryingFrequencyMs:5e3,mappings:null});const f=this.fb.group({spec:[E.spec,t.Validators.required],mappings:[E.mappings]});return this.isShowFrequency(E.spec)&&f.addControl("queryingFrequencyMs",this.fb.control(E.queryingFrequencyMs,[t.Validators.required,t.Validators.min(0),t.Validators.pattern("[0-9]*")])),f.get("spec").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(g=>{this.isShowFrequency(g)?f.addControl("queryingFrequencyMs",this.fb.control(5e3,[t.Validators.required,t.Validators.min(0),t.Validators.pattern("[0-9]*")])):f.removeControl("queryingFrequencyMs")}),f}updateModel(){const E=this.deviceProfileCommunicationConfig.get("communicationConfig").value;E.forEach(f=>{this.isShowFrequency(f.spec)||delete f.queryingFrequencyMs}),this.updateUsedSpecType(),this.propagateChange(E)}static{this.\u0275fac=function(f){return new(f||C)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["tb-snmp-device-profile-communication-config"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>C),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>C),multi:!0}])],decls:4,vars:3,consts:[[1,"flex","flex-col"],["class","scope-row flex flex-row items-center justify-start gap-2",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"scope-row","flex","flex-row","items-center","justify-start","gap-2",3,"formGroup"],[1,"communication-config"],["floatLabel","always","hideRequiredMarker","",1,"spec","mat-block"],["translate",""],["formControlName","spec","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],["vertical",""],[1,"flex","flex-1","flex-col"],["formControlName","mappings"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["matInput","","formControlName","queryingFrequencyMs","type","number","min","0","required",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["translate","",1,"tb-prompt","required","required-text","flex","items-center","justify-center"],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"button-icon"]],template:function(f,g){1&f&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,p,13,5,"div",1)(2,v,3,0,"div",2)(3,T,6,3,"div",2),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",g.communicationConfigFormArray.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!g.communicationConfigFormArray.controls.length&&!g.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!g.disabled&&g.isAddEnabled))},dependencies:[G.NgForOf,G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatError,z.MatSelect,L.MatOption,B.MatTooltip,I.MatDivider,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.FormGroupDirective,t.FormControlName,U.TranslateDirective,F.J,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .communication-config[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.25);border-radius:4px;padding:8px;min-width:0;flex-direction:column;display:flex;place-content:stretch flex-start;align-items:stretch;flex:1;gap:0}[_nghost-%COMP%]   .scope-row[_ngcontent-%COMP%]{padding-bottom:8px}[_nghost-%COMP%]   .required-text[_ngcontent-%COMP%]{margin:16px 0}@media screen and (min-width: 1600px){[_nghost-%COMP%]   .communication-config[_ngcontent-%COMP%]{flex-direction:row;gap:8px}}[_nghost-%COMP%]     .mat-mdc-form-field.spec .mat-mdc-form-field-infix{width:160px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}']})}}},11998:(Re,X,n)=>{"use strict";n.d(X,{J:()=>T});var e=n(93953),t=n(89417),c=n(18530),h=n(74972),V=n(27997),S=n(56977),G=n(60177),K=n(88834),H=n(99213),k=n(59042),Q=n(53719),z=n(82798),L=n(86600),B=n(14823),I=n(71997),U=n(73955);function F(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"mat-option",17),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C){const E=_.$implicit,f=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",E),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,f.dataTypesTranslationMap.get(E))," ")}}function a(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.data-type-required")," "))}function O(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.data-key-required")," "))}function P(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.oid-required")," "))}function A(C,_){1&C&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.oid-pattern")," "))}function u(C,_){if(1&C){const E=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(E);const g=e.\u0275\u0275nextContext().index,y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.removeMappingConfig(g))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"close"),e.\u0275\u0275elementEnd()()}2&C&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function m(C,_){if(1&C&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-select",11),e.\u0275\u0275template(4,F,3,4,"mat-option",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,a,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",13),e.\u0275\u0275element(7,"input",14),e.\u0275\u0275template(8,O,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",13),e.\u0275\u0275element(10,"input",15),e.\u0275\u0275template(11,P,3,3,"mat-error",7)(12,A,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,u,4,3,"button",16),e.\u0275\u0275elementEnd()()),2&C){const E=_.$implicit,f=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",E),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",f.dataTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.get("dataType").hasError("required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",E.get("key").hasError("required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",E.get("oid").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",E.get("oid").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!f.disabled)}}function p(C,_){1&C&&(e.\u0275\u0275elementStart(0,"div")(1,"span",19),e.\u0275\u0275text(2,"device-profile.snmp.please-add-mapping-config"),e.\u0275\u0275elementEnd()())}function v(C,_){if(1&C){const E=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(E);const g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.addMappingConfig())}),e.\u0275\u0275elementStart(2,"mat-icon",21),e.\u0275\u0275text(3,"add_circle_outline"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()()}2&C&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,1,"device-profile.snmp.add-mapping")," "))}class T{constructor(_){this.fb=_,this.dataTypes=Object.values(h.pe),this.dataTypesTranslationMap=h.oy,this.oidPattern=/^\.?([0-2])((\.0)|(\.[1-9][0-9]*))*$/,this.destroy$=new c.B,this.propagateChange=E=>{}}ngOnInit(){this.mappingsConfigForm=this.fb.group({mappings:this.fb.array([])}),this.mappingsConfigForm.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(_){this.propagateChange=_}registerOnTouched(_){}setDisabledState(_){this.disabled=_,this.disabled?this.mappingsConfigForm.disable({emitEvent:!1}):this.mappingsConfigForm.enable({emitEvent:!1})}validate(){return this.mappingsConfigForm.valid&&this.mappingsConfigForm.value.mappings.length?null:{mapping:!1}}writeValue(_){if(_?.length===this.mappingsConfigFormArray.length)this.mappingsConfigFormArray.patchValue(_,{emitEvent:!1});else{const E=[];_&&_.forEach(f=>{E.push(this.createdFormGroup(f))}),this.mappingsConfigForm.setControl("mappings",this.fb.array(E),{emitEvent:!1}),(!_||!_.length)&&this.addMappingConfig(),this.disabled?this.mappingsConfigForm.disable({emitEvent:!1}):this.mappingsConfigForm.enable({emitEvent:!1})}!this.disabled&&!this.mappingsConfigForm.valid&&this.updateModel()}get mappingsConfigFormArray(){return this.mappingsConfigForm.get("mappings")}addMappingConfig(){this.mappingsConfigFormArray.push(this.createdFormGroup()),this.mappingsConfigForm.updateValueAndValidity(),this.mappingsConfigForm.valid||this.updateModel()}removeMappingConfig(_){this.mappingsConfigFormArray.removeAt(_)}createdFormGroup(_){return(0,V.z)(_)&&(_={dataType:h.pe.STRING,key:"",oid:""}),this.fb.group({dataType:[_.dataType,t.Validators.required],key:[_.key,t.Validators.required],oid:[_.oid,[t.Validators.required,t.Validators.pattern(this.oidPattern)]]})}updateModel(){const _=this.mappingsConfigForm.get("mappings").value;this.propagateChange(_)}static{this.\u0275fac=function(E){return new(E||T)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["tb-snmp-device-profile-mapping"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>T),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>T),multi:!0}])],decls:14,vars:5,consts:[[1,"mapping-config","flex","flex-1","flex-col"],[1,"flex","flex-full","flex-row","items-center","justify-start","gap-2"],[1,"flex","flex-1","flex-row","gap-2"],["translate","",1,"tb-title","no-padding","max-w-26%","flex-full"],["translate","",1,"tb-title","tb-required","no-padding","max-w-37%","flex-full"],[2,"min-width","40px"],["class","mapping-list flex flex-row items-center justify-start gap-2",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mapping-list","flex","flex-row","items-center","justify-start","gap-2",3,"formGroup"],[1,"tb-layout-fill","flex","flex-1","flex-row","items-stretch","justify-start","gap-2"],[1,"max-w-26%","flex-full"],["formControlName","dataType","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"max-w-37%","flex-full"],["matInput","","formControlName","key","required",""],["matInput","","formControlName","oid","required",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","matTooltip"],["translate","",1,"tb-prompt","required","required-text","flex","items-center","justify-center"],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"button-icon"]],template:function(E,f){1&E&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e.\u0275\u0275text(4,"device-profile.snmp.data-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",4),e.\u0275\u0275text(6,"device-profile.snmp.data-key"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",4),e.\u0275\u0275text(8,"device-profile.snmp.oid"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"span",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"mat-divider"),e.\u0275\u0275template(11,m,14,7,"div",6)(12,p,3,0,"div",7)(13,v,6,3,"div",7),e.\u0275\u0275elementEnd()),2&E&&(e.\u0275\u0275advance(9),e.\u0275\u0275classProp("!hidden",f.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",f.mappingsConfigFormArray.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!f.mappingsConfigFormArray.controls.length&&!f.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!f.disabled))},dependencies:[G.NgForOf,G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatInput,Q.MatFormField,Q.MatError,z.MatSelect,L.MatOption,B.MatTooltip,I.MatDivider,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,U.TranslateDirective,U.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mapping-config[_ngcontent-%COMP%]   .required-text[_ngcontent-%COMP%]{margin:14px 0}']})}}},23690:(Re,X,n)=>{"use strict";n.d(X,{s:()=>U});var e=n(93953),t=n(89417),c=n(5095),h=n(27997),V=n(18530),S=n(56977),G=n(60177),K=n(59042),H=n(53719),k=n(73955),Q=n(79329);function z(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.timeout-ms-required")," "))}function L(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.timeout-ms-invalid-format")," "))}function B(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.retries-required")," "))}function I(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device-profile.snmp.retries-invalid-format")," "))}class U{constructor(a){this.fb=a,this.destroy$=new V.B,this.propagateChange=O=>{}}ngOnInit(){this.snmpDeviceProfileTransportConfigurationFormGroup=this.fb.group({timeoutMs:[500,[t.Validators.required,t.Validators.min(0),t.Validators.pattern("[0-9]*")]],retries:[0,[t.Validators.required,t.Validators.min(0),t.Validators.pattern("[0-9]*")]],communicationConfigs:[null,t.Validators.required]}),this.snmpDeviceProfileTransportConfigurationFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(a){this.propagateChange=a}registerOnTouched(a){}setDisabledState(a){this.disabled=a,this.disabled?this.snmpDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.snmpDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})}writeValue(a){(0,h.f1)(a)&&this.snmpDeviceProfileTransportConfigurationFormGroup.patchValue(a,{emitEvent:!a.communicationConfigs})}updateModel(){const a=this.snmpDeviceProfileTransportConfigurationFormGroup.getRawValue();a.type=c.y0.SNMP,this.propagateChange(a)}validate(){return this.snmpDeviceProfileTransportConfigurationFormGroup.valid?null:{snmpDeviceProfileTransportConfiguration:!1}}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-snmp-device-profile-transport-configuration"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>U),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>U),multi:!0}])],decls:17,vars:5,consts:[[2,"padding","8px 0 16px",3,"formGroup"],[1,"flex","flex-row","gap-2","xs:flex-col"],[1,"flex-1"],["translate",""],["matInput","","formControlName","timeoutMs","type","number","min","0","required",""],[4,"ngIf"],["matInput","","formControlName","retries","type","number","min","0","required",""],["translate","",1,"tb-small",2,"padding-bottom","8px"],["formControlName","communicationConfigs"]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"form",0)(1,"section",1)(2,"mat-form-field",2)(3,"mat-label",3),e.\u0275\u0275text(4,"device-profile.snmp.timeout-ms"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",4),e.\u0275\u0275template(6,z,3,3,"mat-error",5)(7,L,3,3,"mat-error",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",2)(9,"mat-label",3),e.\u0275\u0275text(10,"device-profile.snmp.retries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",6),e.\u0275\u0275template(12,B,3,3,"mat-error",5)(13,I,3,3,"mat-error",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",7),e.\u0275\u0275text(15,"device-profile.snmp.communication-configs"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"tb-snmp-device-profile-communication-config",8),e.\u0275\u0275elementEnd()),2&O&&(e.\u0275\u0275property("formGroup",P.snmpDeviceProfileTransportConfigurationFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",P.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",P.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("pattern")||P.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",P.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",P.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("pattern")||P.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("min")))},dependencies:[G.NgIf,K.MatInput,H.MatFormField,H.MatLabel,H.MatError,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.FormGroupDirective,t.FormControlName,k.TranslateDirective,Q.d,k.TranslatePipe],encapsulation:2})}}},3059:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TenantProfileQueuesComponent:()=>A});var e=n(93953),t=n(89417),c=n(14085),h=n(18530),V=n(15673),S=n(27997),G=n(56977),K=n(9310),H=n(60177),k=n(88834),Q=n(99213),z=n(14823),L=n(9454),B=n(73955),I=n(94158);function U(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(p);const T=e.\u0275\u0275nextContext().index,C=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(C.removeQueue(T))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"delete"),e.\u0275\u0275elementEnd()()}2&u&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function F(u,m){if(1&u&&e.\u0275\u0275element(0,"tb-queue-form",11),2&u){const p=e.\u0275\u0275nextContext().$implicit,v=e.\u0275\u0275nextContext();e.\u0275\u0275property("formControl",p)("newQueue",v.newQueue)}}function a(u,m){if(1&u&&(e.\u0275\u0275elementStart(0,"div",4)(1,"mat-expansion-panel",5)(2,"mat-expansion-panel-header")(3,"div",6)(4,"mat-panel-title"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"span",7),e.\u0275\u0275template(7,U,4,3,"button",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,F,1,2,"ng-template",9),e.\u0275\u0275elementEnd()()),2&u){const p=m.$implicit,v=m.index,T=m.last,C=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pb-2",!T),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",C.getTitle(p.value.name)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0!==v&&!C.disabled)}}function O(u,m){1&u&&(e.\u0275\u0275elementStart(0,"div")(1,"span",12),e.\u0275\u0275text(2,"tenant-profile.no-queue"),e.\u0275\u0275elementEnd()())}function P(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"button",14),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(p);const T=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(T.addQueue())}),e.\u0275\u0275elementStart(2,"span",15),e.\u0275\u0275text(3,"tenant-profile.add-queue"),e.\u0275\u0275elementEnd()()()}}class A{get required(){return this.requiredValue}set required(m){this.requiredValue=(0,c.coerceBooleanProperty)(m)}constructor(m,p,v){this.store=m,this.utils=p,this.fb=v,this.newQueue=!1,this.idMap=[],this.destroy$=new h.B,this.propagateChange=T=>{}}registerOnChange(m){this.propagateChange=m}registerOnTouched(m){}ngOnInit(){this.tenantProfileQueuesFormGroup=this.fb.group({queues:this.fb.array([])}),this.tenantProfileQueuesFormGroup.valueChanges.pipe((0,G.Q)(this.destroy$)).subscribe(()=>this.updateModel())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get queuesFormArray(){return this.tenantProfileQueuesFormGroup.get("queues")}setDisabledState(m){this.disabled=m,this.newQueue=!1,this.disabled?this.tenantProfileQueuesFormGroup.disable({emitEvent:!1}):this.tenantProfileQueuesFormGroup.enable({emitEvent:!1})}writeValue(m){if(m?.length===this.queuesFormArray.length)this.queuesFormArray.patchValue(m,{emitEvent:!1});else{const p=[];m&&m.forEach((v,T)=>{v.id||(this.idMap[T]||this.idMap.push((0,S.Os)()),v.id=this.idMap[T]),p.push(this.fb.control(v,[t.Validators.required]))}),this.tenantProfileQueuesFormGroup.setControl("queues",this.fb.array(p),{emitEvent:!1}),this.disabled?this.tenantProfileQueuesFormGroup.disable({emitEvent:!1}):this.tenantProfileQueuesFormGroup.enable({emitEvent:!1})}}trackByQueue(m,p){return p?p.value.id:null}removeQueue(m){this.tenantProfileQueuesFormGroup.get("queues").removeAt(m),this.idMap.splice(m,1)}addQueue(){const m={id:(0,S.Os)(),consumerPerPartition:!1,name:"",packProcessingTimeout:2e3,partitions:10,pollInterval:25,processingStrategy:{failurePercentage:0,maxPauseBetweenRetries:3,pauseBetweenRetries:3,retries:3,type:""},submitStrategy:{batchSize:0,type:""},topic:"",additionalInfo:{description:"",customProperties:"",duplicateMsgToAllPartitions:!1}};this.idMap.push(m.id),this.newQueue=!0,this.tenantProfileQueuesFormGroup.get("queues").push(this.fb.control(m,[])),this.tenantProfileQueuesFormGroup.updateValueAndValidity(),this.tenantProfileQueuesFormGroup.valid||this.updateModel()}getTitle(m){return this.utils.customTranslation(m,m)}validate(m){return this.tenantProfileQueuesFormGroup.valid?null:{queues:{valid:!1}}}updateModel(){const m=this.tenantProfileQueuesFormGroup.get("queues").value;this.propagateChange(m)}static{this.\u0275fac=function(p){return new(p||A)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(V.T),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["tb-tenant-profile-queues"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>A),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>A),multi:!0}])],decls:4,vars:4,consts:[[1,"flex","flex-col"],["class","tb-tenant-profile-queues",3,"pb-2",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["style","padding-top: 16px;",4,"ngIf"],[1,"tb-tenant-profile-queues"],[1,"flex-1",3,"expanded"],[1,"flex","flex-1","flex-row","items-center","justify-start"],[1,"flex-1"],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],[3,"formControl","newQueue"],["translate","",1,"tb-prompt","flex","items-center","justify-center"],[2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click"],["translate",""]],template:function(p,v){1&p&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,a,9,5,"div",1)(2,O,3,0,"div",2)(3,P,4,0,"div",3),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",v.queuesFormArray.controls)("ngForTrackBy",v.trackByQueue),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!v.queuesFormArray.controls.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!v.disabled))},dependencies:[H.NgForOf,H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatTooltip,L.MatExpansionPanel,L.MatExpansionPanelHeader,L.MatExpansionPanelTitle,L.MatExpansionPanelContent,t.NgControlStatus,t.FormControlDirective,B.TranslateDirective,I.QueueFormComponent,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-tenant-profile-queues[_ngcontent-%COMP%]   .mat-expansion-panel-body[_ngcontent-%COMP%]{padding-bottom:0!important}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}']})}}},34103:(Re,X,n)=>{"use strict";n.d(X,{j:()=>Z});var e=n(93953),t=n(89417),c=n(7673),h=n(719),V=n(67496),S=n(70152),G=n(88141),K=n(96354),H=n(23294),k=n(25558),Q=n(97647),z=n(99437),L=n(14085),B=n(52281),I=n(37324),U=n(33596),F=n(97435),a=n(67336),O=n(52359),P=n(29543),A=n(27997),u=n(9310),m=n(73955),p=n(34006),v=n(60177),T=n(88834),C=n(99213),_=n(59042),E=n(53719),f=n(86600),g=n(14823),y=n(60850),b=n(7901),D=n(91009);const w=["tenantProfileInput"],ee=Y=>({entity:Y});function _e(Y,ge){if(1&Y&&(e.\u0275\u0275elementStart(0,"a",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Y){const ce=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",ce.tenantProfileURL),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",ce.displayTenantProfileFn(ce.selectTenantProfileFormGroup.get("tenantProfile").value)," ")}}function ve(Y,ge){if(1&Y){const ce=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(ce);const J=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(J.clear())}),e.\u0275\u0275elementStart(1,"mat-icon",16),e.\u0275\u0275text(2,"close"),e.\u0275\u0275elementEnd()()}}function Ee(Y,ge){if(1&Y){const ce=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(J){e.\u0275\u0275restoreView(ce);const de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.editTenantProfile(J))}),e.\u0275\u0275elementStart(2,"mat-icon",16),e.\u0275\u0275text(3,"edit"),e.\u0275\u0275elementEnd()()}2&Y&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"tenant-profile.edit"))}function $(Y,ge){if(1&Y){const ce=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18),e.\u0275\u0275listener("click",function(J){e.\u0275\u0275restoreView(ce);const de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.createTenantProfile(J,""))}),e.\u0275\u0275elementStart(1,"span",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()}2&Y&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"notification.create-new")))}function be(Y,ge){if(1&Y&&(e.\u0275\u0275elementStart(0,"mat-option",20),e.\u0275\u0275element(1,"span",21),e.\u0275\u0275pipe(2,"highlight"),e.\u0275\u0275elementEnd()),2&Y){const ce=ge.$implicit,se=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",ce),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(2,2,ce.name,se.searchText),e.\u0275\u0275sanitizeHtml)}}function Te(Y,ge){1&Y&&(e.\u0275\u0275elementStart(0,"div")(1,"span",4),e.\u0275\u0275text(2,"tenant-profile.no-tenant-profiles-found"),e.\u0275\u0275elementEnd()())}function oe(Y,ge){if(1&Y&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&Y){const ce=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,ce.translate.get("tenant-profile.no-tenant-profiles-matching",e.\u0275\u0275pureFunction1(3,ee,ce.truncate.transform(ce.searchText,!0,6,"..."))))," ")}}function R(Y,ge){if(1&Y){const ce=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",22)(1,"div",23),e.\u0275\u0275listener("click",function(J){return e.\u0275\u0275restoreView(ce),e.\u0275\u0275resetView(J.stopPropagation())}),e.\u0275\u0275template(2,Te,3,0,"div",24)(3,oe,3,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"span")(6,"a",25),e.\u0275\u0275listener("click",function(J){e.\u0275\u0275restoreView(ce);const de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.createTenantProfile(J,de.searchText))}),e.\u0275\u0275text(7,"tenant-profile.create-new-tenant-profile"),e.\u0275\u0275elementEnd()()()()}if(2&Y){const ce=e.\u0275\u0275reference(4),se=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!se.textIsNotEmpty(se.searchText))("ngIfElse",ce)}}function N(Y,ge){1&Y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.tenant-profile-required")," "))}class Z{get required(){return this.requiredValue}set required(ge){this.requiredValue=(0,L.coerceBooleanProperty)(ge)}constructor(ge,ce,se,J,de,ye){this.store=ge,this.translate=ce,this.truncate=se,this.tenantProfileService=J,this.fb=de,this.dialog=ye,this.selectDefaultProfile=!1,this.showDetailsPageLink=!1,this.tenantProfileUpdated=new e.EventEmitter,this.searchText="",this.dirty=!1,this.propagateChange=re=>{},this.selectTenantProfileFormGroup=this.fb.group({tenantProfile:[null]})}registerOnChange(ge){this.propagateChange=ge}registerOnTouched(ge){}ngOnInit(){this.filteredTenantProfiles=this.selectTenantProfileFormGroup.get("tenantProfile").valueChanges.pipe((0,S.B)(150),(0,G.M)(ge=>{let ce;ce="string"!=typeof ge&&ge?new B.J(ge.id.id):null,this.updateView(ce)}),(0,K.T)(ge=>ge?"string"==typeof ge?ge:ge.name:""),(0,H.F)(),(0,k.n)(ge=>this.fetchTenantProfiles(ge)),(0,Q.u)())}selectDefaultTenantProfileIfNeeded(){this.selectDefaultProfile&&!this.modelValue&&this.tenantProfileService.getDefaultTenantProfileInfo().subscribe(ge=>{ge&&(this.modelValue=new B.J(ge.id.id),this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(ge,{emitEvent:!1}),this.propagateChange(this.modelValue))})}setDisabledState(ge){this.disabled=ge,this.disabled?this.selectTenantProfileFormGroup.disable({emitEvent:!1}):this.selectTenantProfileFormGroup.enable({emitEvent:!1})}writeValue(ge){this.searchText="",null!=ge?this.tenantProfileService.getTenantProfileInfo(ge.id).subscribe(ce=>{this.modelValue=new B.J(ce.id.id),this.tenantProfileURL=(0,A.e9)(this.modelValue.id,this.modelValue.entityType),this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(ce,{emitEvent:!1})}):(this.modelValue=null,this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultTenantProfileIfNeeded()),this.dirty=!0}onFocus(){this.dirty&&(this.selectTenantProfileFormGroup.get("tenantProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)}updateView(ge){(0,U.s)(this.modelValue,ge)||(this.modelValue=ge,this.propagateChange(this.modelValue))}displayTenantProfileFn(ge){return ge?ge.name:void 0}fetchTenantProfiles(ge){this.searchText=ge;const ce=new h.Ek(10,0,ge,{property:"name",direction:V.O.ASC});return this.tenantProfileService.getTenantProfileInfos(ce,{ignoreLoading:!0}).pipe((0,z.W)(()=>(0,c.of)((0,P.r)())),(0,K.T)(se=>se.data))}clear(){this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!0}),setTimeout(()=>{this.tenantProfileInput.nativeElement.blur(),this.tenantProfileInput.nativeElement.focus()},0)}textIsNotEmpty(ge){return ge&&ge.length>0}tenantProfileEnter(ge){ge.keyCode===a.ENTER&&(ge.preventDefault(),this.modelValue||this.createTenantProfile(ge,this.searchText))}createTenantProfile(ge,ce){ge.preventDefault();const se={name:ce};this.openTenantProfileDialog(se,!0)}editTenantProfile(ge){ge.preventDefault(),this.tenantProfileService.getTenantProfile(this.modelValue.id).subscribe(ce=>{this.openTenantProfileDialog(ce,!1)})}openTenantProfileDialog(ge,ce){this.dialog.open(O.TenantProfileDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:ce,tenantProfile:ge}}).afterClosed().subscribe(se=>{se?this.tenantProfileService.getTenantProfileInfo(se.id.id).subscribe(J=>{this.modelValue=new B.J(J.id.id),this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(J,{emitEvent:!0}),ce?this.propagateChange(this.modelValue):this.tenantProfileUpdated.next(se.id)}):setTimeout(()=>{this.tenantProfileInput.nativeElement.blur(),this.tenantProfileInput.nativeElement.focus()},0)})}static{this.\u0275fac=function(ce){return new(ce||Z)(e.\u0275\u0275directiveInject(u.Store),e.\u0275\u0275directiveInject(m.TranslateService),e.\u0275\u0275directiveInject(F.TruncatePipe),e.\u0275\u0275directiveInject(I.H),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(p.MatDialog))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Z,selectors:[["tb-tenant-profile-autocomplete"]],viewQuery:function(ce,se){if(1&ce&&e.\u0275\u0275viewQuery(w,7),2&ce){let J;e.\u0275\u0275queryRefresh(J=e.\u0275\u0275loadQuery())&&(se.tenantProfileInput=J.first)}},inputs:{selectDefaultProfile:"selectDefaultProfile",required:"required",disabled:"disabled",showDetailsPageLink:"showDetailsPageLink"},outputs:{tenantProfileUpdated:"tenantProfileUpdated"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Z),multi:!0}])],decls:16,vars:17,consts:[["tenantProfileInput",""],["tenantProfileAutocomplete","matAutocomplete"],["searchNotEmpty",""],[1,"mat-block",3,"formGroup"],["translate",""],["matInput","","type","text","formControlName","tenantProfile",3,"focusin","keydown","keypress","required","matAutocomplete"],["aria-label","Open tenant profile",3,"routerLink",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","color","primary","matSuffix","",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["aria-label","Open tenant profile",3,"routerLink"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"click","matTooltip"],["mat-button","","color","primary","matSuffix","",3,"click"],[2,"white-space","nowrap"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["translate","",3,"click"]],template:function(ce,se){if(1&ce){const J=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label",4),e.\u0275\u0275text(2,"tenant-profile.tenant-profile"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"input",5,0),e.\u0275\u0275listener("focusin",function(){return e.\u0275\u0275restoreView(J),e.\u0275\u0275resetView(se.onFocus())})("keydown",function(ye){return e.\u0275\u0275restoreView(J),e.\u0275\u0275resetView(se.tenantProfileEnter(ye))})("keypress",function(ye){return e.\u0275\u0275restoreView(J),e.\u0275\u0275resetView(se.tenantProfileEnter(ye))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,_e,2,2,"a",6)(6,ve,3,0,"button",7)(7,Ee,4,3,"button",8)(8,$,4,3,"button",9),e.\u0275\u0275elementStart(9,"mat-autocomplete",10,1),e.\u0275\u0275template(11,be,3,5,"mat-option",11),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275template(13,R,8,3,"mat-option",12),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,N,3,3,"mat-error",13),e.\u0275\u0275elementEnd()}if(2&ce){let J,de;const ye=e.\u0275\u0275reference(10);e.\u0275\u0275property("formGroup",se.selectTenantProfileFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",se.showDetailsPageLink&&se.disabled&&se.selectTenantProfileFormGroup.get("tenantProfile").value),e.\u0275\u0275property("required",se.required)("matAutocomplete",ye),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",se.showDetailsPageLink&&se.selectTenantProfileFormGroup.get("tenantProfile").value&&se.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",se.selectTenantProfileFormGroup.get("tenantProfile").value&&!se.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(J=se.selectTenantProfileFormGroup.get("tenantProfile").value)?null:J.id)&&!se.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!se.selectTenantProfileFormGroup.get("tenantProfile").value&&!se.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("displayWith",se.displayTenantProfileFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(12,13,se.filteredTenantProfiles)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=(de=e.\u0275\u0275pipeBind1(14,15,se.filteredTenantProfiles))&&de.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",se.selectTenantProfileFormGroup.get("tenantProfile").hasError("required"))}},dependencies:[v.NgForOf,v.NgIf,T.MatButton,T.MatIconButton,C.MatIcon,_.MatInput,E.MatFormField,E.MatLabel,E.MatError,E.MatSuffix,f.MatOption,g.MatTooltip,y.MatAutocomplete,y.MatAutocompleteTrigger,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,b.RouterLink,m.TranslateDirective,v.AsyncPipe,D.HighlightPipe,m.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none;color:inherit}']})}}},23747:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TenantProfileDataComponent:()=>S});var e=n(93953),t=n(89417),c=n(14085),h=n(9310),V=n(70982);class S{get required(){return this.requiredValue}set required(K){this.requiredValue=(0,c.coerceBooleanProperty)(K)}constructor(K,H){this.store=K,this.fb=H,this.valueChange$=null,this.propagateChange=k=>{}}registerOnChange(K){this.propagateChange=K}registerOnTouched(K){}ngOnInit(){this.tenantProfileDataFormGroup=this.fb.group({configuration:[null,t.Validators.required]}),this.valueChange$=this.tenantProfileDataFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}ngOnDestroy(){this.valueChange$&&this.valueChange$.unsubscribe()}setDisabledState(K){this.disabled=K,this.disabled?this.tenantProfileDataFormGroup.disable({emitEvent:!1}):this.tenantProfileDataFormGroup.enable({emitEvent:!1})}writeValue(K){this.tenantProfileDataFormGroup.patchValue({configuration:K},{emitEvent:!1})}updateModel(){let K=null;this.tenantProfileDataFormGroup.valid&&(K=this.tenantProfileDataFormGroup.getRawValue()),this.propagateChange(K?.configuration)}static{this.\u0275fac=function(H){return new(H||S)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["tb-tenant-profile-data"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>S),multi:!0}])],decls:2,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"],["formControlName","configuration","required",""]],template:function(H,k){1&H&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275element(1,"tb-tenant-profile-configuration",1),e.\u0275\u0275elementEnd()),2&H&&e.\u0275\u0275property("formGroup",k.tenantProfileDataFormGroup)},dependencies:[t.\u0275NgNoValidate,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,V.TenantProfileConfigurationComponent],encapsulation:2})}}},52359:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TenantProfileDialogComponent:()=>O});var e=n(93953),t=n(86600),c=n(34006),h=n(56542),V=n(26636),S=n(37324),G=n(9310),K=n(7901),H=n(60177),k=n(88834),Q=n(99213),z=n(67575),L=n(55911),B=n(89417),I=n(73955);const U=["tenantProfileComponent"];function F(P,A){1&P&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function a(P,A){1&P&&e.\u0275\u0275element(0,"div",14)}class O extends h.m{constructor(A,u,m,p,v,T){super(A,u,p),this.store=A,this.router=u,this.data=m,this.dialogRef=p,this.errorStateMatcher=v,this.tenantProfileService=T,this.submitted=!1,this.isAdd=this.data.isAdd,this.tenantProfile=this.data.tenantProfile}ngAfterViewInit(){this.isAdd&&setTimeout(()=>{this.tenantProfileComponent.entityForm.markAsDirty()},0)}isErrorState(A,u){const m=this.errorStateMatcher.isErrorState(A,u),p=!!(A&&A.invalid&&this.submitted);return m||p}cancel(){this.dialogRef.close(null)}save(){this.submitted=!0,this.tenantProfileComponent.entityForm.valid&&(this.tenantProfile={...this.tenantProfile,...this.tenantProfileComponent.entityFormValue()},this.tenantProfileService.saveTenantProfile(this.tenantProfile).subscribe(A=>{this.dialogRef.close(A)}))}static{this.\u0275fac=function(u){return new(u||O)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(S.H))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["tb-tenant-profile-dialog"]],viewQuery:function(u,m){if(1&u&&e.\u0275\u0275viewQuery(U,7),2&u){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(m.tenantProfileComponent=p.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:O}]),e.\u0275\u0275InheritDefinitionFeature],decls:25,vars:24,consts:[["tenantProfileComponent",""],[2,"width","650px",3,"ngSubmit"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(u,m){if(1&u){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",3),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,F,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,a,1,0,"div",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"tb-tenant-profile",9,0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",10)(17,"button",11),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(p),e.\u0275\u0275resetView(m.cancel())}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",12),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()}if(2&u){const p=e.\u0275\u0275reference(15);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,10,m.isAdd?"tenant-profile.add":"tenant-profile.edit")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,12,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,14,m.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("standalone",!0)("entity",m.tenantProfile)("isEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,16,m.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,18,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,20,m.isLoading$)||(null==p.entityForm?null:p.entityForm.invalid)||!(null!=p.entityForm&&p.entityForm.dirty)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,22,m.isAdd?"action.add":"action.save")," ")}},dependencies:[H.NgIf,k.MatButton,k.MatIconButton,Q.MatIcon,z.MatProgressBar,L.MatToolbar,c.MatDialogActions,c.MatDialogContent,B.\u0275NgNoValidate,B.NgControlStatusGroup,B.NgForm,V.TenantProfileComponent,H.AsyncPipe,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]     tb-tenant-profile .mat-padding{padding:0}']})}}},26636:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TenantProfileComponent:()=>C});var e=n(93953),t=n(89417),c=n(37078),h=n(78502),S=(n(12054),n(81365)),G=n(27997),K=n(9310),H=n(73955),k=n(60177),Q=n(88834),z=n(82765),L=n(99213),B=n(59042),I=n(53719),U=n(9454),F=n(89692),a=n(23747),O=n(3059);const P=_=>({count:_});function A(_,E){if(1&_){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",17)(1,"button",18),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(f);const b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.onEntityAction(y,"open"))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",18),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(f);const b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.onEntityAction(y,"setDefault"))}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",18),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(f);const b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.onEntityAction(y,"delete"))}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",19)(14,"button",20),e.\u0275\u0275listener("cbOnSuccess",function(y){e.\u0275\u0275restoreView(f);const b=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(b.onTenantProfileIdCopied(y))}),e.\u0275\u0275element(15,"mat-icon",21),e.\u0275\u0275elementStart(16,"span",5),e.\u0275\u0275text(17,"tenant-profile.copyId"),e.\u0275\u0275elementEnd()()()()}if(2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",f.isEdit||f.isDetailsPage),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,15,f.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,17,"common.open-details-page")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",f.isEdit||(null==f.entity?null:f.entity.default)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,19,f.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,21,"tenant-profile.set-default")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",f.hideDelete()||f.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,23,f.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,25,"tenant-profile.delete")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",f.isEdit),e.\u0275\u0275property("cbContent",null==f.entity||null==f.entity.id?null:f.entity.id.id)}}function u(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.name-required")," "))}function m(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.name-max-length")," "))}function p(_,E){1&_&&e.\u0275\u0275element(0,"tb-tenant-profile-queues",22)}function v(_,E){if(1&_&&(e.\u0275\u0275elementStart(0,"mat-expansion-panel",14)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,p,1,0,"ng-template",15),e.\u0275\u0275elementEnd()),2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,2,"tenant-profile.queues-with-count",e.\u0275\u0275pureFunction1(5,P,f.entityForm.get("profileData").get("queueConfiguration").value?f.entityForm.get("profileData").get("queueConfiguration").value.length:0))," ")}}function T(_,E){1&_&&e.\u0275\u0275element(0,"tb-tenant-profile-data",23)}class C extends S.l{constructor(E,f,g,y,b,D){super(E,b,g,y,D),this.store=E,this.translate=f,this.entityValue=g,this.entitiesTableConfigValue=y,this.fb=b,this.cd=D,this.standalone=!1}hideDelete(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)}buildForm(E){const f=[{id:(0,G.Os)(),consumerPerPartition:!1,name:"Main",packProcessingTimeout:1e4,partitions:1,pollInterval:2e3,processingStrategy:{failurePercentage:0,maxPauseBetweenRetries:3,pauseBetweenRetries:3,retries:3,type:"SKIP_ALL_FAILURES"},submitStrategy:{batchSize:1e3,type:"BURST"},topic:"tb_rule_engine.main",additionalInfo:{description:"",customProperties:"",duplicateMsgToAllPartitions:!1}},{id:(0,G.Os)(),name:"HighPriority",topic:"tb_rule_engine.hp",pollInterval:2e3,partitions:1,consumerPerPartition:!1,packProcessingTimeout:1e4,submitStrategy:{type:"BURST",batchSize:100},processingStrategy:{type:"RETRY_FAILED_AND_TIMED_OUT",retries:0,failurePercentage:0,pauseBetweenRetries:5,maxPauseBetweenRetries:5},additionalInfo:{description:"",customProperties:"",duplicateMsgToAllPartitions:!1}},{id:(0,G.Os)(),name:"SequentialByOriginator",topic:"tb_rule_engine.sq",pollInterval:2e3,partitions:1,consumerPerPartition:!1,packProcessingTimeout:1e4,submitStrategy:{type:"SEQUENTIAL_BY_ORIGINATOR",batchSize:100},processingStrategy:{type:"RETRY_FAILED_AND_TIMED_OUT",retries:3,failurePercentage:0,pauseBetweenRetries:5,maxPauseBetweenRetries:5},additionalInfo:{description:"",customProperties:"",duplicateMsgToAllPartitions:!1}}],g=this.fb.group({name:[E?E.name:"",[t.Validators.required,t.Validators.maxLength(255)]],isolatedTbRuleEngine:[!!E&&E.isolatedTbRuleEngine,[]],profileData:this.fb.group({configuration:[E&&!this.isAdd?E?.profileData.configuration:(0,c.c)(c.i.DEFAULT),[]],queueConfiguration:[E&&!this.isAdd?E?.profileData.queueConfiguration:null,[]]}),description:[E?E.description:"",[]]});return g.get("isolatedTbRuleEngine").valueChanges.subscribe(y=>{y?g.get("profileData").patchValue({queueConfiguration:f},{emitEvent:!1}):g.get("profileData").patchValue({queueConfiguration:null},{emitEvent:!1})}),g}updateForm(E){this.entityForm.patchValue({name:E.name},{emitEvent:!1}),this.entityForm.patchValue({isolatedTbRuleEngine:E.isolatedTbRuleEngine},{emitEvent:!1}),this.entityForm.get("profileData").patchValue({configuration:this.isAdd?(0,c.c)(c.i.DEFAULT):E.profileData?.configuration},{emitEvent:!1}),this.entityForm.get("profileData").patchValue({queueConfiguration:E.profileData?.queueConfiguration},{emitEvent:!1}),this.entityForm.patchValue({description:E.description},{emitEvent:!1})}updateFormState(){this.entityForm&&(this.isEditValue?this.entityForm.enable({emitEvent:!1}):this.entityForm.disable({emitEvent:!1}))}onTenantProfileIdCopied(E){this.store.dispatch(new h.xo({message:this.translate.instant("tenant-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}static{this.\u0275fac=function(f){return new(f||C)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(H.TranslateService),e.\u0275\u0275directiveInject("entity",8),e.\u0275\u0275directiveInject("entitiesTableConfig",8),e.\u0275\u0275directiveInject(t.UntypedFormBuilder),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["tb-tenant-profile"]],inputs:{standalone:"standalone"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:32,vars:15,consts:[["class","tb-details-buttons xs:flex xs:flex-col",4,"ngIf"],[1,"mat-padding","flex","flex-col"],[3,"formGroup"],[3,"disabled"],["appearance","fill",1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"flex","flex-col"],["formControlName","isolatedTbRuleEngine",1,"hinted-checkbox"],[1,"tb-hint"],[1,"expansion-panel-block"],["formGroupName","profileData","multi",""],[3,"expanded",4,"ngIf"],[3,"expanded"],["matExpansionPanelContent",""],["matInput","","formControlName","description","rows","2"],[1,"tb-details-buttons","xs:flex","xs:flex-col"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"flex","flex-row","xs:flex-col"],["mat-raised-button","","ngxClipboard","",3,"cbOnSuccess","cbContent"],["svgIcon","mdi:clipboard-arrow-left"],["formControlName","queueConfiguration"],["formControlName","configuration","required",""]],template:function(f,g){1&f&&(e.\u0275\u0275template(0,A,18,27,"div",0),e.\u0275\u0275elementStart(1,"div",1)(2,"form",2)(3,"fieldset",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"mat-form-field",4)(6,"mat-label",5),e.\u0275\u0275text(7,"tenant-profile.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",6),e.\u0275\u0275template(9,u,3,3,"mat-error",7)(10,m,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8)(12,"mat-checkbox",9)(13,"div"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",10),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",11)(20,"mat-accordion",12),e.\u0275\u0275template(21,v,6,7,"mat-expansion-panel",13),e.\u0275\u0275elementStart(22,"mat-expansion-panel",14)(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"div",5),e.\u0275\u0275text(26,"tenant-profile.profile-configuration"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(27,T,1,0,"ng-template",15),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"mat-form-field",4)(29,"mat-label",5),e.\u0275\u0275text(30,"tenant-profile.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"textarea",16),e.\u0275\u0275elementEnd()()()()),2&f&&(e.\u0275\u0275property("ngIf",!g.standalone),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",g.entityForm),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,9,g.isLoading$)||!g.isEdit),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",g.entityForm.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",g.entityForm.get("name").hasError("maxlength")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,11,"tenant.isolated-tb-rule-engine")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,13,"tenant.isolated-tb-rule-engine-details")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",g.entityForm.get("isolatedTbRuleEngine").value),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!0))},dependencies:[k.NgIf,Q.MatButton,z.MatCheckbox,L.MatIcon,B.MatInput,I.MatFormField,I.MatLabel,I.MatError,U.MatAccordion,U.MatExpansionPanel,U.MatExpansionPanelHeader,U.MatExpansionPanelTitle,U.MatExpansionPanelContent,F.Uo,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,H.TranslateDirective,a.TenantProfileDataComponent,O.TenantProfileQueuesComponent,k.AsyncPipe,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]     .mat-mdc-form-field-infix{width:100%!important}[_nghost-%COMP%]     .mat-mdc-checkbox.hinted-checkbox .mdc-checkbox{margin-top:-28px}[_nghost-%COMP%]     .mat-mdc-checkbox .mdc-form-field{white-space:normal}[_nghost-%COMP%]     .fields-group{padding:0 16px 8px;margin-bottom:10px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]     .fields-group legend{color:#000000b3;width:fit-content}[_nghost-%COMP%]     .mat-expansion-panel-header{height:48px}[_nghost-%COMP%]     .mat-expansion-panel-header.mat-expanded{height:48px}[_nghost-%COMP%]     .expansion-panel-block{padding-bottom:16px}']})}}},57178:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DefaultTenantProfileConfigurationComponent:()=>Fe});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(62785),S=n(56977),G=n(18530),K=n(9310),H=n(60177),k=n(59042),Q=n(53719),z=n(30450),L=n(9454),B=n(73955),I=n(95084);function U(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-devices-required")," "))}function F(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-devices-range")," "))}function a(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-dashboards-required")," "))}function O(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-dashboards-range")," "))}function P(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-assets-required")," "))}function A(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-assets-range")," "))}function u(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-users-required")," "))}function m(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-users-range")," "))}function p(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-customers-required")," "))}function v(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-customers-range")," "))}function T(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-rule-chains-required")," "))}function C(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-rule-chains-range")," "))}function _(le,we){if(1&le&&(e.\u0275\u0275elementStart(0,"div",9)(1,"mat-form-field",5)(2,"mat-label",3),e.\u0275\u0275text(3,"tenant-profile.maximum-customers"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",44),e.\u0275\u0275template(5,p,3,3,"mat-error",7)(6,v,3,3,"mat-error",7),e.\u0275\u0275element(7,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",5)(9,"mat-label",3),e.\u0275\u0275text(10,"tenant-profile.maximum-rule-chains"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",45),e.\u0275\u0275template(12,T,3,3,"mat-error",7)(13,C,3,3,"mat-error",7),e.\u0275\u0275element(14,"mat-hint"),e.\u0275\u0275elementEnd()()),2&le){const qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("min"))}}function E(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-r-e-executions-required")," "))}function f(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-r-e-executions-range")," "))}function g(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-transport-messages-range")," "))}function y(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-transport-messages-required")," "))}function b(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-j-s-executions-required")," "))}function D(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-j-s-executions-range")," "))}function w(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-tbel-executions-required")," "))}function ee(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-tbel-executions-range")," "))}function _e(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-rule-node-executions-per-message-required")," "))}function ve(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-rule-node-executions-per-message-range")," "))}function Ee(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-transport-data-points-required")," "))}function $(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-transport-data-points-range")," "))}function be(le,we){if(1&le&&(e.\u0275\u0275elementStart(0,"div",9)(1,"mat-form-field",5)(2,"mat-label",3),e.\u0275\u0275text(3,"tenant-profile.max-j-s-executions"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",46),e.\u0275\u0275template(5,b,3,3,"mat-error",7)(6,D,3,3,"mat-error",7),e.\u0275\u0275element(7,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",5)(9,"mat-label",3),e.\u0275\u0275text(10,"tenant-profile.max-tbel-executions"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",47),e.\u0275\u0275template(12,w,3,3,"mat-error",7)(13,ee,3,3,"mat-error",7),e.\u0275\u0275element(14,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",9)(16,"mat-form-field",5)(17,"mat-label",3),e.\u0275\u0275text(18,"tenant-profile.max-rule-node-executions-per-message"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",48),e.\u0275\u0275template(20,_e,3,3,"mat-error",7)(21,ve,3,3,"mat-error",7),e.\u0275\u0275element(22,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",5)(24,"mat-label",3),e.\u0275\u0275text(25,"tenant-profile.max-transport-data-points"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",49),e.\u0275\u0275template(27,Ee,3,3,"mat-error",7)(28,$,3,3,"mat-error",7),e.\u0275\u0275element(29,"mat-hint"),e.\u0275\u0275elementEnd()()),2&le){const qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxTbelExecutions").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxTbelExecutions").hasError("min")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("min"))}}function Te(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-d-p-storage-days-required")," "))}function oe(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-d-p-storage-days-range")," "))}function R(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.alarms-ttl-days-required")," "))}function N(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.alarms-ttl-days-days-range")," "))}function Z(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.default-storage-ttl-days-required")," "))}function Y(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.default-storage-ttl-days-range")," "))}function ge(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rpc-ttl-days-required")," "))}function ce(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rpc-ttl-days-days-range")," "))}function se(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.queue-stats-ttl-days-required")," "))}function J(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.queue-stats-ttl-days-range")," "))}function de(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rule-engine-exceptions-ttl-days-required")," "))}function ye(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rule-engine-exceptions-ttl-days-range")," "))}function re(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-sms-required")," "))}function ne(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-sms-range")," "))}function ie(le,we){if(1&le&&(e.\u0275\u0275elementStart(0,"mat-form-field",5)(1,"mat-label",3),e.\u0275\u0275text(2,"tenant-profile.max-sms"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",50),e.\u0275\u0275template(4,re,3,3,"mat-error",7)(5,ne,3,3,"mat-error",7),e.\u0275\u0275elementEnd()),2&le){const qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("min"))}}function Ae(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-emails-required")," "))}function Pe(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-emails-range")," "))}function Be(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-created-alarms-required")," "))}function Ke(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.max-created-alarms-range")," "))}function Xe(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-resources-sum-data-size-required")," "))}function at(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-resources-sum-data-size-range")," "))}function bt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-ota-package-sum-data-size-required")," "))}function Mt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-ota-package-sum-data-size-range")," "))}function ze(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-resource-size-required")," "))}function vt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.maximum-resource-size-range")," "))}function tt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function Ye(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function Qe(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function nt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function ot(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function gt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function rt(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function Ze(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-zero")," "))}function je(le,we){1&le&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&le&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.too-small-value-one")," "))}function $e(le,we){if(1&le&&(e.\u0275\u0275elementStart(0,"div",9)(1,"mat-form-field",29)(2,"mat-label",3),e.\u0275\u0275text(3,"tenant-profile.ws-limit-max-sessions-per-public-user"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",51),e.\u0275\u0275template(5,ot,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",29)(7,"mat-label",3),e.\u0275\u0275text(8,"tenant-profile.ws-limit-max-subscriptions-per-public-user"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",52),e.\u0275\u0275template(10,gt,3,3,"mat-error",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",9)(12,"mat-form-field",29)(13,"mat-label",3),e.\u0275\u0275text(14,"tenant-profile.ws-limit-max-sessions-per-regular-user"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"input",53),e.\u0275\u0275template(16,rt,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-form-field",29)(18,"mat-label",3),e.\u0275\u0275text(19,"tenant-profile.ws-limit-max-subscriptions-per-regular-user"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"input",54),e.\u0275\u0275template(21,Ze,3,3,"mat-error",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",9)(23,"mat-form-field",29)(24,"mat-label",3),e.\u0275\u0275text(25,"tenant-profile.ws-limit-queue-per-session"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",55),e.\u0275\u0275template(27,je,3,3,"mat-error",7),e.\u0275\u0275elementStart(28,"mat-hint"),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(31,"div",31),e.\u0275\u0275elementEnd()),2&le){const qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxWsSessionsPerPublicUser").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxWsSubscriptionsPerPublicUser").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxWsSessionsPerRegularUser").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("maxWsSubscriptionsPerRegularUser").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",qe.defaultTenantProfileConfigurationFormGroup.get("wsMsgQueueLimitPerSession").hasError("min")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(30,6,"tenant-profile.queue-size-is-limited-by-system-configuration")," ")}}function Oe(le,we){if(1&le&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275element(1,"tb-rate-limits",56)(2,"tb-rate-limits",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",9),e.\u0275\u0275element(4,"tb-rate-limits",58)(5,"tb-rate-limits",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",9),e.\u0275\u0275element(7,"tb-rate-limits",60)(8,"tb-rate-limits",61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9),e.\u0275\u0275element(10,"tb-rate-limits",62)(11,"tb-rate-limits",63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9),e.\u0275\u0275element(13,"tb-rate-limits",64)(14,"tb-rate-limits",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",9),e.\u0275\u0275element(16,"tb-rate-limits",66)(17,"tb-rate-limits",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",9),e.\u0275\u0275element(19,"tb-rate-limits",68)(20,"tb-rate-limits",69),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",9),e.\u0275\u0275element(22,"tb-rate-limits",70)(23,"tb-rate-limits",71),e.\u0275\u0275elementEnd()),2&le){const qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_TELEMETRY_DATA_POINTS),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.DEVICE_TELEMETRY_DATA_POINTS),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.GATEWAY_TELEMETRY_DATA_POINTS),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.GATEWAY_DEVICE_TELEMETRY_DATA_POINTS),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_SERVER_REST_LIMITS_CONFIGURATION),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.CUSTOMER_SERVER_REST_LIMITS_CONFIGURATION),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_ENTITY_EXPORT_RATE_LIMIT),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_ENTITY_IMPORT_RATE_LIMIT),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.WS_UPDATE_PER_SESSION_RATE_LIMIT),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.CASSANDRA_QUERY_TENANT_RATE_LIMITS_CONFIGURATION),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_NOTIFICATION_REQUEST_RATE_LIMIT),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.TENANT_NOTIFICATION_REQUESTS_PER_RULE_RATE_LIMIT),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.EDGE_EVENTS_RATE_LIMIT),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.EDGE_EVENTS_PER_EDGE_RATE_LIMIT),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",qe.rateLimitsType.EDGE_UPLINK_MESSAGES_RATE_LIMIT),e.\u0275\u0275advance(),e.\u0275\u0275property("type",qe.rateLimitsType.EDGE_UPLINK_MESSAGES_PER_EDGE_RATE_LIMIT)}}class Fe{get required(){return this.requiredValue}set required(we){this.requiredValue=(0,c.coerceBooleanProperty)(we)}constructor(we,qe){this.store=we,this.fb=qe,this.destroy$=new G.B,this.rateLimitsType=V.RP,this.propagateChange=lt=>{},this.defaultTenantProfileConfigurationFormGroup=this.fb.group({maxDevices:[null,[t.Validators.required,t.Validators.min(0)]],maxAssets:[null,[t.Validators.required,t.Validators.min(0)]],maxCustomers:[null,[t.Validators.required,t.Validators.min(0)]],maxUsers:[null,[t.Validators.required,t.Validators.min(0)]],maxDashboards:[null,[t.Validators.required,t.Validators.min(0)]],maxRuleChains:[null,[t.Validators.required,t.Validators.min(0)]],maxResourcesInBytes:[null,[t.Validators.required,t.Validators.min(0)]],maxOtaPackagesInBytes:[null,[t.Validators.required,t.Validators.min(0)]],maxResourceSize:[null,[t.Validators.required,t.Validators.min(0)]],transportTenantMsgRateLimit:[null,[]],transportTenantTelemetryMsgRateLimit:[null,[]],transportTenantTelemetryDataPointsRateLimit:[null,[]],transportDeviceMsgRateLimit:[null,[]],transportDeviceTelemetryMsgRateLimit:[null,[]],transportDeviceTelemetryDataPointsRateLimit:[null,[]],transportGatewayMsgRateLimit:[null,[]],transportGatewayTelemetryMsgRateLimit:[null,[]],transportGatewayTelemetryDataPointsRateLimit:[null,[]],transportGatewayDeviceMsgRateLimit:[null,[]],transportGatewayDeviceTelemetryMsgRateLimit:[null,[]],transportGatewayDeviceTelemetryDataPointsRateLimit:[null,[]],tenantEntityExportRateLimit:[null,[]],tenantEntityImportRateLimit:[null,[]],tenantNotificationRequestsRateLimit:[null,[]],tenantNotificationRequestsPerRuleRateLimit:[null,[]],maxTransportMessages:[null,[t.Validators.required,t.Validators.min(0)]],maxTransportDataPoints:[null,[t.Validators.required,t.Validators.min(0)]],maxREExecutions:[null,[t.Validators.required,t.Validators.min(0)]],maxJSExecutions:[null,[t.Validators.required,t.Validators.min(0)]],maxTbelExecutions:[null,[t.Validators.required,t.Validators.min(0)]],maxDPStorageDays:[null,[t.Validators.required,t.Validators.min(0)]],maxRuleNodeExecutionsPerMessage:[null,[t.Validators.required,t.Validators.min(0)]],maxEmails:[null,[t.Validators.required,t.Validators.min(0)]],maxSms:[null,[]],smsEnabled:[null,[]],maxCreatedAlarms:[null,[t.Validators.required,t.Validators.min(0)]],defaultStorageTtlDays:[null,[t.Validators.required,t.Validators.min(0)]],alarmsTtlDays:[null,[t.Validators.required,t.Validators.min(0)]],rpcTtlDays:[null,[t.Validators.required,t.Validators.min(0)]],queueStatsTtlDays:[null,[t.Validators.required,t.Validators.min(0)]],ruleEngineExceptionsTtlDays:[null,[t.Validators.required,t.Validators.min(0)]],tenantServerRestLimitsConfiguration:[null,[]],customerServerRestLimitsConfiguration:[null,[]],maxWsSessionsPerTenant:[null,[t.Validators.min(0)]],maxWsSessionsPerCustomer:[null,[t.Validators.min(0)]],maxWsSessionsPerRegularUser:[null,[t.Validators.min(0)]],maxWsSessionsPerPublicUser:[null,[t.Validators.min(0)]],wsMsgQueueLimitPerSession:[null,[t.Validators.min(0)]],maxWsSubscriptionsPerTenant:[null,[t.Validators.min(0)]],maxWsSubscriptionsPerCustomer:[null,[t.Validators.min(0)]],maxWsSubscriptionsPerRegularUser:[null,[t.Validators.min(0)]],maxWsSubscriptionsPerPublicUser:[null,[t.Validators.min(0)]],wsUpdatesPerSessionRateLimit:[null,[]],cassandraQueryTenantRateLimitsConfiguration:[null,[]],edgeEventRateLimits:[null,[]],edgeEventRateLimitsPerEdge:[null,[]],edgeUplinkMessagesRateLimits:[null,[]],edgeUplinkMessagesRateLimitsPerEdge:[null,[]]}),this.defaultTenantProfileConfigurationFormGroup.get("smsEnabled").valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(lt=>{this.maxSmsValidation(lt)}),this.defaultTenantProfileConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}maxSmsValidation(we){we?this.defaultTenantProfileConfigurationFormGroup.get("maxSms").addValidators([t.Validators.required,t.Validators.min(0)]):this.defaultTenantProfileConfigurationFormGroup.get("maxSms").clearValidators(),this.defaultTenantProfileConfigurationFormGroup.get("maxSms").updateValueAndValidity({emitEvent:!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(we){this.propagateChange=we}registerOnTouched(we){}ngOnInit(){}setDisabledState(we){this.disabled=we,this.disabled?this.defaultTenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultTenantProfileConfigurationFormGroup.enable({emitEvent:!1})}writeValue(we){(0,h.f1)(we)&&(this.maxSmsValidation(we.smsEnabled),this.defaultTenantProfileConfigurationFormGroup.patchValue(we,{emitEvent:!1}))}updateModel(){let we=null;this.defaultTenantProfileConfigurationFormGroup.valid&&(we=this.defaultTenantProfileConfigurationFormGroup.getRawValue()),this.propagateChange(we)}static{this.\u0275fac=function(qe){return new(qe||Fe)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Fe,selectors:[["tb-default-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Fe),multi:!0}])],decls:228,vars:72,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"fields-group"],[1,"group-title"],["translate",""],[1,"fields-element","flex","flex-1","flex-row","xs:flex-col","gt-xs:gap-4"],["appearance","fill","subscriptSizing","dynamic",1,"mat-block","flex-1"],["matInput","","required","","min","0","step","1","formControlName","maxDevices","type","number"],[4,"ngIf"],["matInput","","required","","min","0","step","1","formControlName","maxDashboards","type","number"],[1,"flex","flex-1","flex-row","xs:flex-col","gt-xs:gap-4"],["matInput","","required","","min","0","step","1","formControlName","maxAssets","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxUsers","type","number"],[1,"configuration-panel"],["translate","",1,"flex","items-stretch","justify-end"],["matExpansionPanelContent",""],["matInput","","required","","min","0","step","1","formControlName","maxREExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportMessages","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxDPStorageDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","alarmsTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","defaultStorageTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","rpcTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","queueStatsTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","ruleEngineExceptionsTtlDays","type","number"],["formControlName","smsEnabled",1,"slide-toggle-element","flex-1"],["class","mat-block flex-1","appearance","fill","subscriptSizing","dynamic",4,"ngIf"],["matInput","","required","","min","0","step","1","formControlName","maxEmails","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxCreatedAlarms","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxResourcesInBytes","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxOtaPackagesInBytes","type","number"],["appearance","fill",1,"mat-block","flex-1"],["matInput","","required","","min","0","step","1","formControlName","maxResourceSize","type","number"],[1,"flex-1"],["matInput","","type","number","formControlName","maxWsSessionsPerTenant"],["matInput","","type","number","formControlName","maxWsSubscriptionsPerTenant"],["matInput","","type","number","formControlName","maxWsSessionsPerCustomer"],["matInput","","type","number","formControlName","maxWsSubscriptionsPerCustomer"],["formControlName","transportTenantMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportDeviceMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportTenantTelemetryMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportDeviceTelemetryMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayDeviceMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayTelemetryMsgRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayDeviceTelemetryMsgRateLimit",1,"flex-1",3,"type"],["matInput","","required","","min","0","step","1","formControlName","maxCustomers","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleChains","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxJSExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTbelExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleNodeExecutionsPerMessage","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportDataPoints","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxSms","type","number"],["matInput","","type","number","formControlName","maxWsSessionsPerPublicUser"],["matInput","","type","number","formControlName","maxWsSubscriptionsPerPublicUser"],["matInput","","type","number","formControlName","maxWsSessionsPerRegularUser"],["matInput","","type","number","formControlName","maxWsSubscriptionsPerRegularUser"],["matInput","","type","number","formControlName","wsMsgQueueLimitPerSession"],["formControlName","transportTenantTelemetryDataPointsRateLimit",1,"flex-1",3,"type"],["formControlName","transportDeviceTelemetryDataPointsRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayTelemetryDataPointsRateLimit",1,"flex-1",3,"type"],["formControlName","transportGatewayDeviceTelemetryDataPointsRateLimit",1,"flex-1",3,"type"],["formControlName","tenantServerRestLimitsConfiguration",1,"flex-1",3,"type"],["formControlName","customerServerRestLimitsConfiguration",1,"flex-1",3,"type"],["formControlName","tenantEntityExportRateLimit",1,"flex-1",3,"type"],["formControlName","tenantEntityImportRateLimit",1,"flex-1",3,"type"],["formControlName","wsUpdatesPerSessionRateLimit",1,"flex-1",3,"type"],["formControlName","cassandraQueryTenantRateLimitsConfiguration",1,"flex-1",3,"type"],["formControlName","tenantNotificationRequestsRateLimit",1,"flex-1",3,"type"],["formControlName","tenantNotificationRequestsPerRuleRateLimit",1,"flex-1",3,"type"],["formControlName","edgeEventRateLimits",1,"flex-1",3,"type"],["formControlName","edgeEventRateLimitsPerEdge",1,"flex-1",3,"type"],["formControlName","edgeUplinkMessagesRateLimits",1,"flex-1",3,"type"],["formControlName","edgeUplinkMessagesRateLimitsPerEdge",1,"flex-1",3,"type"]],template:function(qe,lt){1&qe&&(e.\u0275\u0275elementStart(0,"section",0)(1,"fieldset",1)(2,"legend",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",4)(8,"mat-form-field",5)(9,"mat-label",3),e.\u0275\u0275text(10,"tenant-profile.maximum-devices"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",6),e.\u0275\u0275template(12,U,3,3,"mat-error",7)(13,F,3,3,"mat-error",7),e.\u0275\u0275element(14,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-form-field",5)(16,"mat-label",3),e.\u0275\u0275text(17,"tenant-profile.maximum-dashboards"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",8),e.\u0275\u0275template(19,a,3,3,"mat-error",7)(20,O,3,3,"mat-error",7),e.\u0275\u0275element(21,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"div",9)(23,"mat-form-field",5)(24,"mat-label",3),e.\u0275\u0275text(25,"tenant-profile.maximum-assets"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",10),e.\u0275\u0275template(27,P,3,3,"mat-error",7)(28,A,3,3,"mat-error",7),e.\u0275\u0275element(29,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"mat-form-field",5)(31,"mat-label",3),e.\u0275\u0275text(32,"tenant-profile.maximum-users"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"input",11),e.\u0275\u0275template(34,u,3,3,"mat-error",7)(35,m,3,3,"mat-error",7),e.\u0275\u0275element(36,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"mat-expansion-panel",12)(38,"mat-expansion-panel-header")(39,"mat-panel-description",13),e.\u0275\u0275text(40," tenant-profile.advanced-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(41,_,15,4,"ng-template",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"fieldset",1)(43,"legend",2),e.\u0275\u0275text(44),e.\u0275\u0275pipe(45,"translate"),e.\u0275\u0275elementStart(46,"span",3),e.\u0275\u0275text(47,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",4)(49,"mat-form-field",5)(50,"mat-label",3),e.\u0275\u0275text(51,"tenant-profile.max-r-e-executions"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(52,"input",15),e.\u0275\u0275template(53,E,3,3,"mat-error",7)(54,f,3,3,"mat-error",7),e.\u0275\u0275element(55,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"mat-form-field",5)(57,"mat-label",3),e.\u0275\u0275text(58,"tenant-profile.max-transport-messages"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(59,"input",16),e.\u0275\u0275template(60,g,3,3,"mat-error",7)(61,y,3,3,"mat-error",7),e.\u0275\u0275element(62,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"mat-expansion-panel",12)(64,"mat-expansion-panel-header")(65,"mat-panel-description",13),e.\u0275\u0275text(66," tenant-profile.advanced-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(67,be,30,8,"ng-template",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"fieldset",1)(69,"legend",2),e.\u0275\u0275text(70),e.\u0275\u0275pipe(71,"translate"),e.\u0275\u0275elementStart(72,"span",3),e.\u0275\u0275text(73,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",4)(75,"mat-form-field",5)(76,"mat-label",3),e.\u0275\u0275text(77,"tenant-profile.max-d-p-storage-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(78,"input",17),e.\u0275\u0275template(79,Te,3,3,"mat-error",7)(80,oe,3,3,"mat-error",7),e.\u0275\u0275element(81,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"mat-form-field",5)(83,"mat-label",3),e.\u0275\u0275text(84,"tenant-profile.alarms-ttl-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(85,"input",18),e.\u0275\u0275template(86,R,3,3,"mat-error",7)(87,N,3,3,"mat-error",7),e.\u0275\u0275element(88,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(89,"div",9)(90,"mat-form-field",5)(91,"mat-label",3),e.\u0275\u0275text(92,"tenant-profile.default-storage-ttl-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(93,"input",19),e.\u0275\u0275template(94,Z,3,3,"mat-error",7)(95,Y,3,3,"mat-error",7),e.\u0275\u0275element(96,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(97,"mat-form-field",5)(98,"mat-label",3),e.\u0275\u0275text(99,"tenant-profile.rpc-ttl-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(100,"input",20),e.\u0275\u0275template(101,ge,3,3,"mat-error",7)(102,ce,3,3,"mat-error",7),e.\u0275\u0275element(103,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(104,"div",9)(105,"mat-form-field",5)(106,"mat-label",3),e.\u0275\u0275text(107,"tenant-profile.queue-stats-ttl-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(108,"input",21),e.\u0275\u0275template(109,se,3,3,"mat-error",7)(110,J,3,3,"mat-error",7),e.\u0275\u0275element(111,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(112,"mat-form-field",5)(113,"mat-label",3),e.\u0275\u0275text(114,"tenant-profile.rule-engine-exceptions-ttl-days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(115,"input",22),e.\u0275\u0275template(116,de,3,3,"mat-error",7)(117,ye,3,3,"mat-error",7),e.\u0275\u0275element(118,"mat-hint"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(119,"fieldset",1)(120,"legend",2),e.\u0275\u0275text(121),e.\u0275\u0275pipe(122,"translate"),e.\u0275\u0275elementStart(123,"span",3),e.\u0275\u0275text(124,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"mat-slide-toggle",23),e.\u0275\u0275text(126),e.\u0275\u0275pipe(127,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(128,ie,6,2,"mat-form-field",24),e.\u0275\u0275elementStart(129,"div",4)(130,"mat-form-field",5)(131,"mat-label",3),e.\u0275\u0275text(132,"tenant-profile.max-emails"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(133,"input",25),e.\u0275\u0275template(134,Ae,3,3,"mat-error",7)(135,Pe,3,3,"mat-error",7),e.\u0275\u0275element(136,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(137,"mat-form-field",5)(138,"mat-label",3),e.\u0275\u0275text(139,"tenant-profile.max-created-alarms"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(140,"input",26),e.\u0275\u0275template(141,Be,3,3,"mat-error",7)(142,Ke,3,3,"mat-error",7),e.\u0275\u0275element(143,"mat-hint"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(144,"fieldset",1)(145,"legend",2),e.\u0275\u0275text(146),e.\u0275\u0275pipe(147,"translate"),e.\u0275\u0275elementStart(148,"span",3),e.\u0275\u0275text(149,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(150,"div",4)(151,"mat-form-field",5)(152,"mat-label",3),e.\u0275\u0275text(153,"tenant-profile.maximum-resources-sum-data-size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(154,"input",27),e.\u0275\u0275template(155,Xe,3,3,"mat-error",7)(156,at,3,3,"mat-error",7),e.\u0275\u0275element(157,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(158,"mat-form-field",5)(159,"mat-label",3),e.\u0275\u0275text(160,"tenant-profile.maximum-ota-packages-sum-data-size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(161,"input",28),e.\u0275\u0275template(162,bt,3,3,"mat-error",7)(163,Mt,3,3,"mat-error",7),e.\u0275\u0275element(164,"mat-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(165,"div",9)(166,"mat-form-field",29)(167,"mat-label",3),e.\u0275\u0275text(168,"tenant-profile.maximum-resource-size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(169,"input",30),e.\u0275\u0275template(170,ze,3,3,"mat-error",7)(171,vt,3,3,"mat-error",7),e.\u0275\u0275element(172,"mat-hint"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(173,"div",31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(174,"fieldset",1)(175,"legend",2),e.\u0275\u0275text(176),e.\u0275\u0275pipe(177,"translate"),e.\u0275\u0275elementStart(178,"span",3),e.\u0275\u0275text(179,"tenant-profile.unlimited"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(180,"div",4)(181,"mat-form-field",29)(182,"mat-label",3),e.\u0275\u0275text(183,"tenant-profile.ws-limit-max-sessions-per-tenant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(184,"input",32),e.\u0275\u0275template(185,tt,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(186,"mat-form-field",29)(187,"mat-label",3),e.\u0275\u0275text(188,"tenant-profile.ws-limit-max-subscriptions-per-tenant"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(189,"input",33),e.\u0275\u0275template(190,Ye,3,3,"mat-error",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(191,"div",9)(192,"mat-form-field",29)(193,"mat-label",3),e.\u0275\u0275text(194,"tenant-profile.ws-limit-max-sessions-per-customer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(195,"input",34),e.\u0275\u0275template(196,Qe,3,3,"mat-error",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(197,"mat-form-field",29)(198,"mat-label",3),e.\u0275\u0275text(199,"tenant-profile.ws-limit-max-subscriptions-per-customer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(200,"input",35),e.\u0275\u0275template(201,nt,3,3,"mat-error",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(202,"mat-expansion-panel",12)(203,"mat-expansion-panel-header")(204,"mat-panel-description",13),e.\u0275\u0275text(205," tenant-profile.advanced-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(206,$e,32,8,"ng-template",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(207,"fieldset",1)(208,"legend",2),e.\u0275\u0275text(209),e.\u0275\u0275pipe(210,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(211,"div",9),e.\u0275\u0275element(212,"tb-rate-limits",36)(213,"tb-rate-limits",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(214,"div",9),e.\u0275\u0275element(215,"tb-rate-limits",38)(216,"tb-rate-limits",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(217,"div",9),e.\u0275\u0275element(218,"tb-rate-limits",40)(219,"tb-rate-limits",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(220,"div",9),e.\u0275\u0275element(221,"tb-rate-limits",42)(222,"tb-rate-limits",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(223,"mat-expansion-panel",12)(224,"mat-expansion-panel-header")(225,"mat-panel-description",13),e.\u0275\u0275text(226," tenant-profile.advanced-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(227,Oe,24,16,"ng-template",14),e.\u0275\u0275elementEnd()()()),2&qe&&(e.\u0275\u0275property("formGroup",lt.defaultTenantProfileConfigurationFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,56,"tenant-profile.entities")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("min")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("min")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(45,58,"tenant-profile.rule-engine")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("min")),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(71,60,"tenant-profile.time-to-live")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("alarmsTtlDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("alarmsTtlDays").hasError("min")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("rpcTtlDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("rpcTtlDays").hasError("min")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("queueStatsTtlDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("queueStatsTtlDays").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("ruleEngineExceptionsTtlDays").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("ruleEngineExceptionsTtlDays").hasError("min")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(122,62,"tenant-profile.alarms-and-notifications")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(127,64,"tenant-profile.sms-enabled")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("smsEnabled").value),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxCreatedAlarms").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxCreatedAlarms").hasError("min")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(147,66,"tenant-profile.ota-files-in-bytes")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxResourcesInBytes").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxResourcesInBytes").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxOtaPackagesInBytes").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxOtaPackagesInBytes").hasError("min")),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxResourceSize").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxResourceSize").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(177,68,"tenant-profile.ws-title")," "),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxWsSessionsPerTenant").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxWsSubscriptionsPerTenant").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxWsSessionsPerCustomer").hasError("min")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",lt.defaultTenantProfileConfigurationFormGroup.get("maxWsSubscriptionsPerCustomer").hasError("min")),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(210,70,"tenant-profile.rate-limits.rate-limits")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("type",lt.rateLimitsType.TENANT_MESSAGES),e.\u0275\u0275advance(),e.\u0275\u0275property("type",lt.rateLimitsType.DEVICE_MESSAGES),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",lt.rateLimitsType.TENANT_TELEMETRY_MESSAGES),e.\u0275\u0275advance(),e.\u0275\u0275property("type",lt.rateLimitsType.DEVICE_TELEMETRY_MESSAGES),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",lt.rateLimitsType.GATEWAY_MESSAGES),e.\u0275\u0275advance(),e.\u0275\u0275property("type",lt.rateLimitsType.GATEWAY_DEVICE_MESSAGES),e.\u0275\u0275advance(2),e.\u0275\u0275property("type",lt.rateLimitsType.GATEWAY_TELEMETRY_MESSAGES),e.\u0275\u0275advance(),e.\u0275\u0275property("type",lt.rateLimitsType.GATEWAY_DEVICE_TELEMETRY_MESSAGES))},dependencies:[H.NgIf,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatHint,Q.MatError,z.MatSlideToggle,L.MatExpansionPanel,L.MatExpansionPanelHeader,L.MatExpansionPanelDescription,L.MatExpansionPanelContent,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.FormGroupDirective,t.FormControlName,B.TranslateDirective,I.S,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fields-element[_ngcontent-%COMP%]{padding-top:15px}[_nghost-%COMP%]   .slide-toggle-element[_ngcontent-%COMP%]{margin:7px 0 13px}[_nghost-%COMP%]   .group-title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#0000008a}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel{box-shadow:none}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel .mat-expansion-panel-header{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel .mat-expansion-panel-header:hover{background:none!important}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel .mat-expansion-panel-header .mat-expansion-indicator{padding:2px}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel>.mat-expansion-panel-content>.mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.configuration-panel .mat-expansion-panel-header-description{align-items:center}']})}}},58770:(Re,X,n)=>{"use strict";n.d(X,{a:()=>B});var e=n(93953),t=n(34006),c=n(56542),h=n(9310),V=n(7901),S=n(89417),G=n(60177),K=n(88834),H=n(99213),k=n(55911),Q=n(11267),z=n(73955);function L(I,U){if(1&I){const F=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(F);const O=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(O.save())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&I){const F=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",F.editDetailsFormGroup.invalid||!F.editDetailsFormGroup.dirty),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"action.save")," ")}}class B extends c.m{constructor(U,F,a,O,P){super(U,F,O),this.store=U,this.router=F,this.data=a,this.dialogRef=O,this.fb=P,this.rateLimits=this.data.rateLimits,this.title=this.data.title,this.editDetailsFormGroup=this.fb.group({rateLimits:[this.rateLimits,[]]}),this.data.readonly&&this.editDetailsFormGroup.disable()}save(){this.dialogRef.close(this.editDetailsFormGroup.get("rateLimits").value)}static{this.\u0275fac=function(F){return new(F||B)(e.\u0275\u0275directiveInject(h.Store),e.\u0275\u0275directiveInject(V.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(S.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["ng-component"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:16,vars:10,consts:[[3,"formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"matDialogClose"],[1,"material-icons"],["mat-dialog-content",""],["formControlName","rateLimits"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"matDialogClose"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(F,a){1&F&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3)(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",5),e.\u0275\u0275element(10,"tb-rate-limits-list",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",7)(12,"button",8),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,L,3,4,"button",9),e.\u0275\u0275elementEnd()()),2&F&&(e.\u0275\u0275property("formGroup",a.editDetailsFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,a.title)),e.\u0275\u0275advance(3),e.\u0275\u0275property("matDialogClose",void 0),e.\u0275\u0275advance(6),e.\u0275\u0275property("matDialogClose",void 0),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,8,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.data.readonly))},dependencies:[G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatToolbar,t.MatDialogClose,t.MatDialogActions,t.MatDialogContent,S.\u0275NgNoValidate,S.NgControlStatus,S.NgControlStatusGroup,S.FormGroupDirective,S.FormControlName,Q.I,z.TranslatePipe],encapsulation:2})}}},11267:(Re,X,n)=>{"use strict";n.d(X,{I:()=>m});var e=n(93953),t=n(89417),c=n(18530),h=n(62785),V=n(27997),S=n(56977),G=n(60177),K=n(88834),H=n(99213),k=n(59042),Q=n(53719),z=n(14823),L=n(73955),B=n(96196);function I(p,v){1&p&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275text(1," tenant-profile.rate-limits.but-less-than "),e.\u0275\u0275elementEnd())}function U(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rate-limits.number-of-messages-required")," "))}function F(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rate-limits.number-of-messages-min")," "))}function a(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rate-limits.per-seconds-required")," "))}function O(p,v){1&p&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&p&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"tenant-profile.rate-limits.per-seconds-min")," "))}function P(p,v){if(1&p){const T=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(T);const _=e.\u0275\u0275nextContext().index,E=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(E.removeRateLimits(_))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"remove_circle_outline"),e.\u0275\u0275elementEnd()()}if(2&p){const T=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",T.disabled)("matTooltip",e.\u0275\u0275pipeBind1(1,2,"tenant-profile.rate-limits.remove-limit"))}}function A(p,v){if(1&p&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,I,2,0,"div",7),e.\u0275\u0275elementStart(2,"div",8)(3,"mat-form-field",9)(4,"mat-label",4),e.\u0275\u0275text(5,"tenant-profile.rate-limits.number-of-messages"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",10),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275template(8,U,3,3,"mat-error",11)(9,F,3,3,"mat-error",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field",9)(11,"mat-label",4),e.\u0275\u0275text(12,"tenant-profile.rate-limits.per-seconds"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"input",12),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275template(15,a,3,3,"mat-error",11)(16,O,3,3,"mat-error",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,P,4,4,"button",13),e.\u0275\u0275elementEnd()()),2&p){const T=v.$implicit,C=v.index,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",T),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",C>0&&_.rateLimitsFormArray.controls.length>1),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(7,9,"tenant-profile.rate-limits.number-of-messages")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",T.get("value").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",T.get("value").hasError("min")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(14,11,"tenant-profile.rate-limits.per-seconds")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",T.get("time").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",T.get("time").hasError("min")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!_.rateLimitsFormArray.disabled)}}function u(p,v){if(1&p){const T=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(T);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.addRateLimits())}),e.\u0275\u0275elementStart(2,"span",4),e.\u0275\u0275text(3,"tenant-profile.rate-limits.add-limit"),e.\u0275\u0275elementEnd()()}if(2&p){const T=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",T.disabled)("matTooltip",e.\u0275\u0275pipeBind1(1,2,"tenant-profile.rate-limits.add-limit"))}}class m{constructor(v){this.fb=v,this.valueChangeSubscription=null,this.destroy$=new c.B,this.propagateChange=T=>{}}ngOnInit(){this.rateLimitsListFormGroup=this.fb.group({rateLimits:this.fb.array([])}),this.valueChangeSubscription=this.rateLimitsListFormGroup.valueChanges.pipe((0,S.Q)(this.destroy$)).subscribe(v=>{this.updateView(v?.rateLimits)})}removeRateLimits(v){this.rateLimitsListFormGroup.get("rateLimits").removeAt(v)}addRateLimits(){this.rateLimitsFormArray.push(this.fb.group({value:[null,[t.Validators.required]],time:[null,[t.Validators.required]]}))}get rateLimitsFormArray(){return this.rateLimitsListFormGroup.get("rateLimits")}registerOnChange(v){this.propagateChange=v}registerOnTouched(v){}setDisabledState(v){this.disabled=v,this.disabled?this.rateLimitsListFormGroup.disable({emitEvent:!1}):this.rateLimitsListFormGroup.enable({emitEvent:!1})}validate(){return this.rateLimitsListFormGroup.valid?null:{rateLimitsList:{valid:!1}}}writeValue(v){const T=[];if(v){const C=v.split(",");for(let _=0;_<C.length;_++){const[E,f]=C[_].split(":"),g=this.fb.group({value:[E,[t.Validators.required]],time:[f,[t.Validators.required]]});this.disabled&&g.disable(),T.push(g)}}this.rateLimitsListFormGroup.setControl("rateLimits",this.fb.array(T),{emitEvent:!1}),this.rateLimitsArray=(0,h.aY)(v)}updateView(v){if(v.length>0){const T=v.filter(_=>(0,V.f1)(_.value)&&(0,V.f1)(_.time)),C=(0,h.EX)(T);this.propagateChange(C),this.rateLimitsArray=(0,h.aY)(C)}else this.propagateChange(null),this.rateLimitsArray=null}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-rate-limits-list"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>m),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>m),multi:!0}])],decls:7,vars:7,consts:[[1,"tb-rate-limits-form",3,"formGroup"],["class","flex-1",3,"formGroup",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],[1,"tb-rate-limits-preview","flex","flex-1","flex-col","gap-2"],["translate",""],[3,"rateLimitsArray","disabled"],[1,"flex-1",3,"formGroup"],["class","tb-rate-limits-operation","translate","",4,"ngIf"],[1,"flex","flex-1","flex-row","gap-2"],["hideRequiredMarker","","appearance","fill",1,"mat-block","flex-1"],["matInput","","type","number","min","1","step","1","formControlName","value","required","",3,"placeholder"],[4,"ngIf"],["matInput","","type","number","min","1","step","1","formControlName","time","required","",3,"placeholder"],["mat-icon-button","","type","button","color","primary","class","tb-rate-limits-button","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["translate","",1,"tb-rate-limits-operation"],["mat-icon-button","","type","button","color","primary","matTooltipPosition","above",1,"tb-rate-limits-button",3,"click","disabled","matTooltip"],["mat-raised-button","","color","primary","matTooltipPosition","above",3,"click","disabled","matTooltip"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275template(1,A,18,13,"div",1)(2,u,4,4,"button",2),e.\u0275\u0275elementStart(3,"div",3)(4,"span",4),e.\u0275\u0275text(5,"tenant-profile.rate-limits.preview"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"tb-rate-limits-text",5),e.\u0275\u0275elementEnd()()),2&T&&(e.\u0275\u0275property("formGroup",C.rateLimitsListFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",C.rateLimitsFormArray.controls),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!C.rateLimitsFormArray.disabled),e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-rate-limits-preview-short",!C.disabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("rateLimitsArray",C.rateLimitsArray)("disabled",C.disabled))},dependencies:[G.NgForOf,G.NgIf,K.MatButton,K.MatIconButton,H.MatIcon,k.MatInput,Q.MatFormField,Q.MatLabel,Q.MatError,z.MatTooltip,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.MinValidator,t.FormGroupDirective,t.FormControlName,L.TranslateDirective,B.F,L.TranslatePipe],styles:['@charset "UTF-8";@media screen and (min-width: 960px){[_nghost-%COMP%]   .tb-rate-limits-form[_ngcontent-%COMP%]{min-width:600px}}[_nghost-%COMP%]   .tb-rate-limits-preview[_ngcontent-%COMP%]{margin-top:1.5em}[_nghost-%COMP%]   .tb-rate-limits-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:1em}[_nghost-%COMP%]   .tb-rate-limits-preview[_ngcontent-%COMP%]   tb-rate-limits-text[_ngcontent-%COMP%]{border:1px groove rgba(0,0,0,.25);border-radius:4px;padding:1em}[_nghost-%COMP%]   .tb-rate-limits-operation[_ngcontent-%COMP%]{font-size:12px;color:#0000008a;margin-bottom:16px}[_nghost-%COMP%]   .tb-rate-limits-button[_ngcontent-%COMP%]{margin-top:.5em}']})}}},96196:(Re,X,n)=>{"use strict";n.d(X,{F:()=>h});var e=n(93953),t=n(62785),c=n(73955);class h{constructor(S){this.translate=S}ngOnChanges(S){for(const G of Object.keys(S))if("rateLimitsArray"===G){const K=S[G];this.updateView(K.currentValue)}}updateView(S){this.rateLimitsText=S?.length?(0,t.I$)(this.translate,S):this.translate.instant("tenant-profile.rate-limits.not-set")}static{this.\u0275fac=function(G){return new(G||h)(e.\u0275\u0275directiveInject(c.TranslateService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["tb-rate-limits-text"]],inputs:{rateLimitsArray:"rateLimitsArray",disabled:"disabled"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:3,consts:[[1,"tb-rate-limits-text",3,"innerHTML"]],template:function(G,K){1&G&&e.\u0275\u0275element(0,"div",0),2&G&&(e.\u0275\u0275classProp("disabled",K.disabled),e.\u0275\u0275property("innerHTML",K.rateLimitsText,e.\u0275\u0275sanitizeHtml))},styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-rate-limits-text[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-rate-limits-text.disabled[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]     .tb-rate-limits-text span{font-size:14px;line-height:1.8em}[_nghost-%COMP%]     .tb-rate-limits-text .tb-rate-limits-value{font-weight:700;border:1px groove rgba(0,0,0,.25);border-radius:4px;padding-left:4px;padding-right:4px;color:#305680}']})}}},95084:(Re,X,n)=>{"use strict";n.d(X,{S:()=>B});var e=n(93953),t=n(89417),c=n(58770),h=n(62785),V=n(27997),S=n(34006),G=n(60177),K=n(88834),H=n(99213),k=n(14823),Q=n(96196),z=n(73955);function L(I,U){if(1&I){const F=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",6),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(O){e.\u0275\u0275restoreView(F);const P=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(P.onClick(O))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"add_circle_outline"),e.\u0275\u0275elementEnd()()}2&I&&e.\u0275\u0275property("matTooltip",e.\u0275\u0275pipeBind1(1,1,"tenant-profile.rate-limits.add-limit"))}class B{get rateLimitsArray(){return this.rateLimitsFormGroup.get("rateLimits").value}constructor(U,F){this.dialog=U,this.fb=F,this.propagateChange=null}registerOnChange(U){this.propagateChange=U}registerOnTouched(U){}ngOnInit(){this.label=h._u.get(this.type),this.rateLimitsFormGroup=this.fb.group({rateLimits:[null,[]]})}setDisabledState(U){this.disabled=U,this.disabled?this.rateLimitsFormGroup.disable({emitEvent:!1}):this.rateLimitsFormGroup.enable({emitEvent:!1})}writeValue(U){this.modelValue=U,this.updateRateLimitsInfo()}validate(U){return null}onClick(U){U&&U.stopPropagation();const F=h.cb.get(this.type);this.dialog.open(c.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{rateLimits:this.modelValue,title:F,readonly:this.disabled}}).afterClosed().subscribe(a=>{(0,V.O9)(a)&&(this.modelValue=a,this.updateModel())})}updateRateLimitsInfo(){this.rateLimitsFormGroup.patchValue({rateLimits:(0,h.aY)(this.modelValue)})}updateModel(){this.updateRateLimitsInfo(),this.propagateChange(this.modelValue)}static{this.\u0275fac=function(F){return new(F||B)(e.\u0275\u0275directiveInject(S.MatDialog),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["tb-rate-limits"]],inputs:{disabled:"disabled",type:"type"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>B),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>B),multi:!0}])],decls:9,vars:10,consts:[[1,"flex","flex-1","flex-row","gap-2"],[1,"fieldset-element"],[1,"legend-element"],["matTooltipPosition","above",1,"flex","flex-1","flex-row","gap-2",3,"click","formGroup","matTooltip"],[3,"rateLimitsArray","disabled"],["mat-icon-button","","color","primary","type","button","class","tb-rate-limits-button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"tb-rate-limits-button",3,"click","matTooltip"]],template:function(F,a){1&F&&(e.\u0275\u0275elementStart(0,"div",0)(1,"fieldset",1)(2,"legend",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(P){return a.onClick(P)}),e.\u0275\u0275element(7,"tb-rate-limits-text",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,L,4,3,"button",5),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,a.label)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",a.rateLimitsFormGroup)("matTooltip",e.\u0275\u0275pipeBind1(6,8,"tenant-profile.rate-limits.edit-limit")),e.\u0275\u0275advance(2),e.\u0275\u0275property("rateLimitsArray",a.rateLimitsArray)("disabled",a.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!a.disabled))},dependencies:[G.NgIf,K.MatIconButton,H.MatIcon,k.MatTooltip,t.NgControlStatusGroup,t.FormGroupDirective,Q.F,z.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{padding:12px 0}[_nghost-%COMP%]   .fieldset-element[_ngcontent-%COMP%]{cursor:pointer;padding:.5em;border:1px groove rgba(0,0,0,.25);border-radius:4px;width:100%}[_nghost-%COMP%]   .fieldset-element[_ngcontent-%COMP%]   .legend-element[_ngcontent-%COMP%]{color:#0000008a;font-size:12px}[_nghost-%COMP%]   .tb-rate-limits-button[_ngcontent-%COMP%]{margin-top:.5em}']})}}},62785:(Re,X,n)=>{"use strict";var e,K;n.d(X,{EX:()=>V,I$:()=>S,RP:()=>e,_u:()=>t,aY:()=>h,cb:()=>c}),(K=e||(e={})).DEVICE_MESSAGES="DEVICE_MESSAGES",K.DEVICE_TELEMETRY_MESSAGES="DEVICE_TELEMETRY_MESSAGES",K.DEVICE_TELEMETRY_DATA_POINTS="DEVICE_TELEMETRY_DATA_POINTS",K.TENANT_MESSAGES="TENANT_MESSAGES",K.GATEWAY_MESSAGES="GATEWAY_MESSAGES",K.GATEWAY_TELEMETRY_MESSAGES="GATEWAY_TELEMETRY_MESSAGES",K.GATEWAY_TELEMETRY_DATA_POINTS="GATEWAY_TELEMETRY_DATA_POINTS",K.GATEWAY_DEVICE_MESSAGES="GATEWAY_DEVICE_MESSAGES",K.GATEWAY_DEVICE_TELEMETRY_MESSAGES="GATEWAY_DEVICE_TELEMETRY_MESSAGES",K.GATEWAY_DEVICE_TELEMETRY_DATA_POINTS="GATEWAY_DEVICE_TELEMETRY_DATA_POINTS",K.TENANT_TELEMETRY_MESSAGES="TENANT_TELEMETRY_MESSAGES",K.TENANT_TELEMETRY_DATA_POINTS="TENANT_TELEMETRY_DATA_POINTS",K.TENANT_SERVER_REST_LIMITS_CONFIGURATION="TENANT_SERVER_REST_LIMITS_CONFIGURATION",K.CUSTOMER_SERVER_REST_LIMITS_CONFIGURATION="CUSTOMER_SERVER_REST_LIMITS_CONFIGURATION",K.WS_UPDATE_PER_SESSION_RATE_LIMIT="WS_UPDATE_PER_SESSION_RATE_LIMIT",K.CASSANDRA_QUERY_TENANT_RATE_LIMITS_CONFIGURATION="CASSANDRA_QUERY_TENANT_RATE_LIMITS_CONFIGURATION",K.TENANT_ENTITY_EXPORT_RATE_LIMIT="TENANT_ENTITY_EXPORT_RATE_LIMIT",K.TENANT_ENTITY_IMPORT_RATE_LIMIT="TENANT_ENTITY_IMPORT_RATE_LIMIT",K.TENANT_NOTIFICATION_REQUEST_RATE_LIMIT="TENANT_NOTIFICATION_REQUEST_RATE_LIMIT",K.TENANT_NOTIFICATION_REQUESTS_PER_RULE_RATE_LIMIT="TENANT_NOTIFICATION_REQUESTS_PER_RULE_RATE_LIMIT",K.EDGE_EVENTS_RATE_LIMIT="EDGE_EVENTS_RATE_LIMIT",K.EDGE_EVENTS_PER_EDGE_RATE_LIMIT="EDGE_EVENTS_PER_EDGE_RATE_LIMIT",K.EDGE_UPLINK_MESSAGES_RATE_LIMIT="EDGE_UPLINK_MESSAGES_RATE_LIMIT",K.EDGE_UPLINK_MESSAGES_PER_EDGE_RATE_LIMIT="EDGE_UPLINK_MESSAGES_PER_EDGE_RATE_LIMIT";const t=new Map([[e.TENANT_MESSAGES,"tenant-profile.rate-limits.transport-tenant-msg"],[e.TENANT_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.transport-tenant-telemetry-msg"],[e.TENANT_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.transport-tenant-telemetry-data-points"],[e.DEVICE_MESSAGES,"tenant-profile.rate-limits.transport-device-msg"],[e.DEVICE_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.transport-device-telemetry-msg"],[e.DEVICE_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.transport-device-telemetry-data-points"],[e.GATEWAY_MESSAGES,"tenant-profile.rate-limits.transport-gateway-msg"],[e.GATEWAY_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.transport-gateway-telemetry-msg"],[e.GATEWAY_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.transport-gateway-telemetry-data-points"],[e.GATEWAY_DEVICE_MESSAGES,"tenant-profile.rate-limits.transport-gateway-device-msg"],[e.GATEWAY_DEVICE_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.transport-gateway-device-telemetry-msg"],[e.GATEWAY_DEVICE_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.transport-gateway-device-telemetry-data-points"],[e.TENANT_SERVER_REST_LIMITS_CONFIGURATION,"tenant-profile.rest-requests-for-tenant"],[e.CUSTOMER_SERVER_REST_LIMITS_CONFIGURATION,"tenant-profile.customer-rest-limits"],[e.WS_UPDATE_PER_SESSION_RATE_LIMIT,"tenant-profile.ws-limit-updates-per-session"],[e.CASSANDRA_QUERY_TENANT_RATE_LIMITS_CONFIGURATION,"tenant-profile.cassandra-tenant-limits-configuration"],[e.TENANT_ENTITY_EXPORT_RATE_LIMIT,"tenant-profile.tenant-entity-export-rate-limit"],[e.TENANT_ENTITY_IMPORT_RATE_LIMIT,"tenant-profile.tenant-entity-import-rate-limit"],[e.TENANT_NOTIFICATION_REQUEST_RATE_LIMIT,"tenant-profile.tenant-notification-request-rate-limit"],[e.TENANT_NOTIFICATION_REQUESTS_PER_RULE_RATE_LIMIT,"tenant-profile.tenant-notification-requests-per-rule-rate-limit"],[e.EDGE_EVENTS_RATE_LIMIT,"tenant-profile.rate-limits.edge-events-rate-limit"],[e.EDGE_EVENTS_PER_EDGE_RATE_LIMIT,"tenant-profile.rate-limits.edge-events-per-edge-rate-limit"],[e.EDGE_UPLINK_MESSAGES_RATE_LIMIT,"tenant-profile.rate-limits.edge-uplink-messages-rate-limit"],[e.EDGE_UPLINK_MESSAGES_PER_EDGE_RATE_LIMIT,"tenant-profile.rate-limits.edge-uplink-messages-per-edge-rate-limit"]]),c=new Map([[e.TENANT_MESSAGES,"tenant-profile.rate-limits.edit-transport-tenant-msg-title"],[e.TENANT_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.edit-transport-tenant-telemetry-msg-title"],[e.TENANT_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.edit-transport-tenant-telemetry-data-points-title"],[e.DEVICE_MESSAGES,"tenant-profile.rate-limits.edit-transport-device-msg-title"],[e.DEVICE_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.edit-transport-device-telemetry-msg-title"],[e.DEVICE_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.edit-transport-device-telemetry-data-points-title"],[e.TENANT_SERVER_REST_LIMITS_CONFIGURATION,"tenant-profile.rate-limits.edit-tenant-rest-limits-title"],[e.GATEWAY_MESSAGES,"tenant-profile.rate-limits.edit-transport-gateway-msg-title"],[e.GATEWAY_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.edit-transport-gateway-telemetry-msg-title"],[e.GATEWAY_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.edit-transport-gateway-telemetry-data-points-title"],[e.GATEWAY_DEVICE_MESSAGES,"tenant-profile.rate-limits.edit-transport-gateway-device-msg-title"],[e.GATEWAY_DEVICE_TELEMETRY_MESSAGES,"tenant-profile.rate-limits.edit-transport-gateway-device-telemetry-msg-title"],[e.GATEWAY_DEVICE_TELEMETRY_DATA_POINTS,"tenant-profile.rate-limits.edit-transport-gateway-device-telemetry-data-points-title"],[e.CUSTOMER_SERVER_REST_LIMITS_CONFIGURATION,"tenant-profile.rate-limits.edit-customer-rest-limits-title"],[e.WS_UPDATE_PER_SESSION_RATE_LIMIT,"tenant-profile.rate-limits.edit-ws-limit-updates-per-session-title"],[e.CASSANDRA_QUERY_TENANT_RATE_LIMITS_CONFIGURATION,"tenant-profile.rate-limits.edit-cassandra-tenant-limits-configuration-title"],[e.TENANT_ENTITY_EXPORT_RATE_LIMIT,"tenant-profile.rate-limits.edit-tenant-entity-export-rate-limit-title"],[e.TENANT_ENTITY_IMPORT_RATE_LIMIT,"tenant-profile.rate-limits.edit-tenant-entity-import-rate-limit-title"],[e.TENANT_NOTIFICATION_REQUEST_RATE_LIMIT,"tenant-profile.rate-limits.edit-tenant-notification-request-rate-limit-title"],[e.TENANT_NOTIFICATION_REQUESTS_PER_RULE_RATE_LIMIT,"tenant-profile.rate-limits.edit-tenant-notification-requests-per-rule-rate-limit-title"],[e.EDGE_EVENTS_RATE_LIMIT,"tenant-profile.rate-limits.edit-edge-events-rate-limit"],[e.EDGE_EVENTS_PER_EDGE_RATE_LIMIT,"tenant-profile.rate-limits.edit-edge-events-per-edge-rate-limit"],[e.EDGE_UPLINK_MESSAGES_RATE_LIMIT,"tenant-profile.rate-limits.edit-edge-uplink-messages-rate-limit"],[e.EDGE_UPLINK_MESSAGES_PER_EDGE_RATE_LIMIT,"tenant-profile.rate-limits.edit-edge-uplink-messages-per-edge-rate-limit"]]);function h(K){const H=[];if(K?.length>0){const k=K.split(",");for(let Q=0;Q<k.length;Q++){const[z,L]=k[Q].split(":"),B={value:z,time:L};H.push(B)}}return H}function V(K){let H="";for(let k=0;k<K.length;k++)H=H.concat(K[k].value,":",K[k].time),K.length>1&&k!==K.length-1&&(H=H.concat(","));return H}function S(K,H){const k=H.map((z,L)=>{const B=L===H.length-1;return function G(K,H,k){const Q=H.value,z=H.time,L=K.instant("tenant-profile.rate-limits.messages-per"),B=K.instant("tenant-profile.rate-limits.sec");return`<span class="tb-rate-limits-value">${Q}</span>\n          <span>${L}</span>\n          <span class="tb-rate-limits-value"> ${z}</span>\n          <span>${B}${k?"":","}</span><br>`}(K,z,B)});let Q;if(k.length>1){const z=K.instant("tenant-profile.rate-limits.but-less-than");Q=k.join(' <span class="disabled">'+z+"</span> ")}else Q=k[0];return Q}},70982:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TenantProfileConfigurationComponent:()=>k});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(37078),S=n(9310),G=n(60177),K=n(57178);function H(Q,z){if(1&Q&&e.\u0275\u0275element(0,"tb-default-tenant-profile-configuration",3),2&Q){const L=e.\u0275\u0275nextContext();e.\u0275\u0275property("required",L.required)}}class k{get required(){return this.requiredValue}set required(z){this.requiredValue=(0,c.coerceBooleanProperty)(z)}constructor(z,L){this.store=z,this.fb=L,this.tenantProfileType=V.i,this.propagateChange=B=>{}}registerOnChange(z){this.propagateChange=z}registerOnTouched(z){}ngOnInit(){this.tenantProfileConfigurationFormGroup=this.fb.group({configuration:[null,t.Validators.required]}),this.tenantProfileConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(z){this.disabled=z,this.disabled?this.tenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.tenantProfileConfigurationFormGroup.enable({emitEvent:!1})}writeValue(z){this.type=z?.type;const L=(0,h.Go)(z);L&&delete L.type,this.tenantProfileConfigurationFormGroup.patchValue({configuration:L},{emitEvent:!1})}updateModel(){let z=null;this.tenantProfileConfigurationFormGroup.valid&&(z=this.tenantProfileConfigurationFormGroup.getRawValue().configuration,z.type=this.type),this.propagateChange(z)}static{this.\u0275fac=function(L){return new(L||k)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:k,selectors:[["tb-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>k),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(L,B){1&L&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,H,1,1,"ng-template",2),e.\u0275\u0275elementEnd()()),2&L&&(e.\u0275\u0275property("formGroup",B.tenantProfileConfigurationFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",B.type),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",B.tenantProfileType.DEFAULT))},dependencies:[G.NgSwitch,G.NgSwitchCase,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,K.DefaultTenantProfileConfigurationComponent],encapsulation:2})}}},94158:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{QueueFormComponent:()=>Te});var e=n(93953),t=n(89417),c=n(15673),h=n(44464),V=n(27997),S=n(60177),G=n(82765),K=n(99213),H=n(59042),k=n(53719),Q=n(37403),z=n(14823),L=n(5951),B=n(9454),I=n(73955);function U(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.name-required")," "))}function F(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.name-unique")," "))}function a(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.name-pattern")," "))}function O(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"mat-radio-button",20),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"mat-icon",21),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&oe){const N=R.$implicit,Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",N),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,Z.queueSubmitStrategyTypesMap.get(Z.queueSubmitStrategyTypes[N]).label)," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,5,Z.queueSubmitStrategyTypesMap.get(Z.queueSubmitStrategyTypes[N]).hint))}}function P(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.batch-size-required")," "))}function A(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.batch-size-min-value")," "))}function u(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"div",15)(1,"label",16),e.\u0275\u0275text(2,"queue.grouping-parameter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",22)(4,"mat-label",2),e.\u0275\u0275text(5,"queue.batch-size"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"input",23),e.\u0275\u0275template(7,P,3,3,"mat-error",4)(8,A,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()),2&oe){const N=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("submitStrategy.batchSize").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("submitStrategy.batchSize").hasError("min")&&!N.queueFormGroup.get("submitStrategy.batchSize").hasError("required"))}}function m(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15)(2,"label",16),e.\u0275\u0275text(3,"queue.submit-strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-radio-group",17),e.\u0275\u0275template(5,O,5,7,"mat-radio-button",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,u,9,2,"div",19),e.\u0275\u0275elementEnd()),2&oe){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",N.submitStrategies),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.hideBatchSize)}}function p(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"mat-radio-button",20),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"mat-icon",21),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&oe){const N=R.$implicit,Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",N),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,Z.queueProcessingStrategyTypesMap.get(Z.queueProcessingStrategyTypes[N]).label)," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,5,Z.queueProcessingStrategyTypesMap.get(Z.queueProcessingStrategyTypes[N]).hint))}}function v(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.retries-required")," "))}function T(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.retries-min-value")," "))}function C(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.failure-percentage-required")," "))}function _(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.failure-percentage-min-value")," "))}function E(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.failure-percentage-max-value")," "))}function f(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.pause-between-retries-required")," "))}function g(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.pause-between-retries-min-value")," "))}function y(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.max-pause-between-retries-required")," "))}function b(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.max-pause-between-retries-min-value")," "))}function D(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"div",24)(1,"div",15)(2,"label",16),e.\u0275\u0275text(3,"queue.processing-strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-radio-group",17),e.\u0275\u0275template(5,p,5,7,"mat-radio-button",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",15)(7,"label",16),e.\u0275\u0275text(8,"queue.retries-settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",11)(10,"mat-label",2),e.\u0275\u0275text(11,"queue.retries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",25)(13,"mat-hint"),e.\u0275\u0275template(14,v,3,3,"mat-error",4)(15,T,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"mat-form-field",11)(17,"mat-label",2),e.\u0275\u0275text(18,"queue.failure-percentage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",26)(20,"mat-hint"),e.\u0275\u0275template(21,C,3,3,"mat-error",4)(22,_,3,3,"mat-error",4)(23,E,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-form-field",11)(25,"mat-label",2),e.\u0275\u0275text(26,"queue.pause-between-retries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",27)(28,"mat-hint"),e.\u0275\u0275template(29,f,3,3,"mat-error",4)(30,g,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-form-field",11)(32,"mat-label",2),e.\u0275\u0275text(33,"queue.max-pause-between-retries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(34,"input",28)(35,"mat-hint"),e.\u0275\u0275template(36,y,3,3,"mat-error",4)(37,b,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()()),2&oe){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",N.processingStrategies),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.retries").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.retries").hasError("min")&&!N.queueFormGroup.get("processingStrategy.retries").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("min")&&!N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("required")&&!N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("max")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("max")&&!N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("required")&&!N.queueFormGroup.get("processingStrategy.failurePercentage").hasError("min")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.pauseBetweenRetries").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.pauseBetweenRetries").hasError("min")&&!N.queueFormGroup.get("processingStrategy.pauseBetweenRetries").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.maxPauseBetweenRetries").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("processingStrategy.maxPauseBetweenRetries").hasError("min")&&!N.queueFormGroup.get("processingStrategy.maxPauseBetweenRetries").hasError("required"))}}function w(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.poll-interval-required")," "))}function ee(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.poll-interval-min-value")," "))}function _e(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.partitions-required")," "))}function ve(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.partitions-min-value")," "))}function Ee(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.pack-processing-timeout-required")," "))}function $(oe,R){1&oe&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"queue.pack-processing-timeout-min-value")," "))}function be(oe,R){if(1&oe&&(e.\u0275\u0275elementStart(0,"div",29)(1,"div",15)(2,"label",16),e.\u0275\u0275text(3,"queue.batch-processing"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",30)(5,"mat-form-field",31)(6,"mat-label",2),e.\u0275\u0275text(7,"queue.poll-interval"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"input",32),e.\u0275\u0275template(9,w,3,3,"mat-error",4)(10,ee,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-form-field",31)(12,"mat-label",2),e.\u0275\u0275text(13,"queue.partitions"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",33),e.\u0275\u0275template(15,_e,3,3,"mat-error",4)(16,ve,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",15)(18,"label",16),e.\u0275\u0275text(19,"queue.immediate-processing"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",30)(21,"mat-checkbox",34),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-form-field",31)(25,"mat-label",2),e.\u0275\u0275text(26,"queue.processing-timeout"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",35),e.\u0275\u0275template(28,Ee,3,3,"mat-error",4)(29,$,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()()()),2&oe){const N=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("pollInterval").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("pollInterval").hasError("min")&&!N.queueFormGroup.get("pollInterval").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("partitions").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("partitions").hasError("min")&&!N.queueFormGroup.get("partitions").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,7,"queue.consumer-per-partition")," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("packProcessingTimeout").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",N.queueFormGroup.get("packProcessingTimeout").hasError("min")&&!N.queueFormGroup.get("packProcessingTimeout").hasError("required"))}}class Te{constructor(R,N){this.utils=R,this.fb=N,this.newQueue=!1,this.systemQueue=!1,this.hideBatchSize=!1,this.queueSubmitStrategyTypes=h.oG,this.queueProcessingStrategyTypes=h.vO,this.submitStrategies=Object.values(this.queueSubmitStrategyTypes),this.processingStrategies=Object.values(this.queueProcessingStrategyTypes),this.queueSubmitStrategyTypesMap=h.YN,this.queueProcessingStrategyTypesMap=h.pH,this.propagateChange=null,this.propagateChangePending=!1,this.valueChange$=null}registerOnChange(R){this.propagateChange=R,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(()=>{this.propagateChange(this.modelValue)},0))}registerOnTouched(R){}ngOnInit(){this.queueFormGroup=this.fb.group({name:["",[t.Validators.required,t.Validators.pattern(/^[a-zA-Z0-9_.\-]+$/)]],pollInterval:[25,[t.Validators.min(1),t.Validators.required]],partitions:[10,[t.Validators.min(1),t.Validators.required]],consumerPerPartition:[!1,[]],packProcessingTimeout:[2e3,[t.Validators.min(1),t.Validators.required]],submitStrategy:this.fb.group({type:[null,[t.Validators.required]],batchSize:[null]}),processingStrategy:this.fb.group({type:[null,[t.Validators.required]],retries:[3,[t.Validators.min(0),t.Validators.required]],failurePercentage:[0,[t.Validators.min(0),t.Validators.required,t.Validators.max(100)]],pauseBetweenRetries:[3,[t.Validators.min(1),t.Validators.required]],maxPauseBetweenRetries:[3,[t.Validators.min(1),t.Validators.required]]}),topic:[""],additionalInfo:this.fb.group({description:[""],customProperties:[""],duplicateMsgToAllPartitions:[!1]})}),this.valueChange$=this.queueFormGroup.valueChanges.subscribe(()=>{this.updateModel()}),this.queueFormGroup.get("name").valueChanges.subscribe(R=>{this.queueFormGroup.patchValue({topic:`tb_rule_engine.${R}`})}),this.queueFormGroup.get("submitStrategy").get("type").valueChanges.subscribe(()=>{this.submitStrategyTypeChanged()})}ngOnDestroy(){this.valueChange$&&(this.valueChange$.unsubscribe(),this.valueChange$=null)}setDisabledState(R){this.disabled=R,this.disabled?this.queueFormGroup.disable({emitEvent:!1}):(this.queueFormGroup.enable({emitEvent:!1}),this.newQueue?this.queueFormGroup.get("name").enable({emitEvent:!1}):this.queueFormGroup.get("name").disable({emitEvent:!1}))}writeValue(R){this.propagateChangePending=!1,this.modelValue=R,(0,V.f1)(this.modelValue)&&(this.queueFormGroup.patchValue(this.modelValue,{emitEvent:!1}),this.queueFormGroup.get("additionalInfo").get("description").patchValue(this.modelValue.additionalInfo?.description,{emitEvent:!1}),this.queueFormGroup.get("additionalInfo").get("customProperties").patchValue(this.modelValue.additionalInfo?.customProperties,{emitEvent:!1}),this.queueFormGroup.get("additionalInfo").get("duplicateMsgToAllPartitions").patchValue(this.modelValue.additionalInfo?.duplicateMsgToAllPartitions,{emitEvent:!1}),this.submitStrategyTypeChanged(),!this.disabled&&!this.queueFormGroup.valid&&this.updateModel())}validate(R){if(R.parent&&!this.systemQueue){const N=R.value.name,Z=[];R.parent.getRawValue().forEach(Y=>{Z.push(Y.name)}),Z.filter(Y=>Y===N).length>1&&this.queueFormGroup.get("name").setErrors({unique:!0})}return this.queueFormGroup.valid?null:{queue:{valid:!1}}}updateModel(){const R=this.queueFormGroup.value;this.modelValue={...this.modelValue,...R},this.propagateChange?this.propagateChange(this.modelValue):this.propagateChangePending=!0}submitStrategyTypeChanged(){const R=this.queueFormGroup.get("submitStrategy"),N=R.get("type").value,Z=R.get("batchSize");N===h.oG.BATCH?(Z.patchValue(Z.value??1e3,{emitEvent:!1}),Z.setValidators([t.Validators.min(1),t.Validators.required]),Z.updateValueAndValidity({emitEvent:!1}),this.hideBatchSize=!0):(Z.patchValue(null,{emitEvent:!1}),Z.clearValidators(),Z.updateValueAndValidity({emitEvent:!1}),this.hideBatchSize=!1)}static{this.\u0275fac=function(N){return new(N||Te)(e.\u0275\u0275directiveInject(c.T),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Te,selectors:[["tb-queue-form"]],inputs:{disabled:"disabled",newQueue:"newQueue",systemQueue:"systemQueue"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>Te),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>Te),multi:!0}])],decls:40,vars:11,consts:[[1,"flex","flex-col",3,"formGroup"],["appearance","fill",1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"queue-strategy",3,"multi"],[3,"expanded"],["translate","",1,"panel-title"],["matExpansionPanelContent",""],["formGroupName","additionalInfo"],["formControlName","duplicateMsgToAllPartitions",1,"flex-1",2,"padding-bottom","16px"],["subscriptSizing","dynamic",1,"mat-block"],["matInput","","formControlName","customProperties","cdkTextareaAutosize","","cdkAutosizeMinRows","1"],["matInput","","formControlName","description","rows","2"],["formGroupName","submitStrategy",1,"flex","flex-1","flex-row","gap-4","lt-md:flex-col"],[1,"flex-1"],["translate","",1,"group-label"],["formControlName","type","required","",1,"flex","flex-1","flex-col"],[3,"value",4,"ngFor","ngForOf"],["class","flex-1",4,"ngIf"],[3,"value"],["svgIcon","mdi:information-outline",1,"hint-icon",3,"matTooltip"],[1,"mat-block"],["type","number","matInput","","formControlName","batchSize","required",""],["formGroupName","processingStrategy",1,"flex","flex-1","flex-row","gap-4","lt-md:flex-col"],["type","number","matInput","","formControlName","retries","required",""],["type","number","matInput","","formControlName","failurePercentage","required",""],["type","number","matInput","","formControlName","pauseBetweenRetries","required",""],["type","number","matInput","","formControlName","maxPauseBetweenRetries","required",""],[1,"flex","flex-1","flex-col","gap-2.5"],[1,"flex","flex-1","flex-row","gap-2.5","xs:flex-col"],[1,"mat-block","flex-1"],["type","number","matInput","","formControlName","pollInterval","required",""],["type","number","matInput","","formControlName","partitions","required",""],["formControlName","consumerPerPartition",1,"flex-1","gt-xs:flex","gt-xs:items-stretch","gt-xs:justify-center"],["type","number","matInput","","formControlName","packProcessingTimeout","required",""]],template:function(N,Z){1&N&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-label",2),e.\u0275\u0275text(3,"admin.queue-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",3),e.\u0275\u0275template(5,U,3,3,"mat-error",4)(6,F,3,3,"mat-error",4)(7,a,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-accordion",5)(9,"mat-expansion-panel",6)(10,"mat-expansion-panel-header")(11,"mat-panel-title",7),e.\u0275\u0275text(12," queue.submit-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,m,7,2,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-expansion-panel",6)(15,"mat-expansion-panel-header")(16,"mat-panel-title",7),e.\u0275\u0275text(17," queue.processing-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,D,38,10,"ng-template",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"mat-expansion-panel",6)(20,"mat-expansion-panel-header")(21,"mat-panel-title",7),e.\u0275\u0275text(22," queue.polling-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,be,30,9,"ng-template",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",9)(25,"mat-checkbox",10),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-form-field",11)(29,"mat-label",2),e.\u0275\u0275text(30,"queue.custom-properties"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"textarea",12),e.\u0275\u0275elementStart(32,"mat-hint",2),e.\u0275\u0275text(33,"queue.custom-properties-hint"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"mat-form-field",1)(35,"mat-label",2),e.\u0275\u0275text(36,"queue.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(37,"textarea",13),e.\u0275\u0275elementStart(38,"mat-hint",2),e.\u0275\u0275text(39,"queue.description-hint"),e.\u0275\u0275elementEnd()()()()),2&N&&(e.\u0275\u0275property("formGroup",Z.queueFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Z.queueFormGroup.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Z.queueFormGroup.get("name").hasError("unique")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Z.queueFormGroup.get("name").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("multi",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(5),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(5),e.\u0275\u0275property("expanded",!0),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,9,"queue.duplicate-msg-to-all-partitions")," "))},dependencies:[S.NgForOf,S.NgIf,G.MatCheckbox,K.MatIcon,H.MatInput,k.MatFormField,k.MatLabel,k.MatHint,k.MatError,Q.xb,z.MatTooltip,L.MatRadioGroup,L.MatRadioButton,B.MatAccordion,B.MatExpansionPanel,B.MatExpansionPanelHeader,B.MatExpansionPanelTitle,B.MatExpansionPanelContent,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,I.TranslateDirective,I.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .queue-strategy[_ngcontent-%COMP%]{padding-bottom:16px}[_nghost-%COMP%]   .queue-strategy[_ngcontent-%COMP%]   .group-label[_ngcontent-%COMP%]{display:block;padding-bottom:10px}[_nghost-%COMP%]   .queue-strategy[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .queue-strategy[_ngcontent-%COMP%]   .hint-icon[_ngcontent-%COMP%]{width:15px;height:15px;vertical-align:top}[_nghost-%COMP%]     .queue-strategy .mat-expansion-panel-header{height:50px}']})}}},65197:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{RelationDialogComponent:()=>p});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(99321),S=n(20506),G=n(27468),K=n(89183),H=n(56542),k=n(9310),Q=n(7901),z=n(60177),L=n(5655),B=n(61341),I=n(88834),U=n(99213),F=n(67575),a=n(55911),O=n(73955);const P=["additionalInfoEdit"];function A(v,T){1&v&&e.\u0275\u0275element(0,"mat-progress-bar",17)}function u(v,T){1&v&&e.\u0275\u0275element(0,"div",18)}function m(v,T){1&v&&(e.\u0275\u0275elementStart(0,"div",19)(1,"div",20),e.\u0275\u0275text(2,"relation.invalid-additional-info"),e.\u0275\u0275elementEnd()())}class p extends H.m{constructor(T,C,_,E,f,g,y){super(T,C,g),this.store=T,this.router=C,this.data=_,this.entityRelationService=E,this.errorStateMatcher=f,this.dialogRef=g,this.fb=y,this.entitySearchDirection=V.td,this.submitted=!1,this.isAdd=_.isAdd,this.direction=_.direction}ngOnInit(){this.relationFormGroup=this.fb.group({type:[this.isAdd?V.XH:this.data.relation.type,[h.Validators.required]],targetEntityIds:[this.isAdd?null:[this.direction===V.td.FROM?this.data.relation.to:this.data.relation.from],[h.Validators.required]]}),this.additionalInfo=new h.UntypedFormControl(this.data.relation.additionalInfo?{...this.data.relation.additionalInfo}:null),this.isAdd||(this.relationFormGroup.get("type").disable(),this.relationFormGroup.get("targetEntityIds").disable()),this.additionalInfo.valueChanges.subscribe(()=>{this.submitted=!1})}isErrorState(T,C){const _=this.errorStateMatcher.isErrorState(T,C),E=!!(T&&T.invalid&&this.submitted);return _||E}cancel(){this.dialogRef.close(!1)}save(){if(this.submitted=!0,this.additionalInfoEdit.validateOnSubmit(),!this.relationFormGroup.invalid&&!this.additionalInfo.invalid)if(this.isAdd){const T=[],C=this.relationFormGroup.get("type").value;this.relationFormGroup.get("targetEntityIds").value.forEach(E=>{const f={type:C,additionalInfo:this.additionalInfo.value,typeGroup:V.GO.COMMON};this.direction===V.td.FROM?(f.from=this.data.relation.from,f.to=E):(f.from=E,f.to=this.data.relation.to),T.push(this.entityRelationService.saveRelation(f))}),(0,G.p)(T).subscribe(()=>{this.dialogRef.close(!0)})}else{const T={...this.data.relation};T.additionalInfo=this.additionalInfo.value,this.entityRelationService.saveRelation(T).subscribe(()=>{this.dialogRef.close(!0)})}}static{this.\u0275fac=function(C){return new(C||p)(e.\u0275\u0275directiveInject(k.Store),e.\u0275\u0275directiveInject(Q.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(S.Z),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["tb-relation-dialog"]],viewQuery:function(C,_){if(1&C&&e.\u0275\u0275viewQuery(P,7),2&C){let E;e.\u0275\u0275queryRefresh(E=e.\u0275\u0275loadQuery())&&(_.additionalInfoEdit=E.first)}},features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:p}]),e.\u0275\u0275InheritDefinitionFeature],decls:35,vars:33,consts:[["additionalInfoEdit",""],[2,"min-width","600px",3,"ngSubmit","formGroup"],["color","primary",1,"flex","flex-row"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","type","required","true"],["formControlName","targetEntityIds","required","true"],[3,"formControl","label"],["class","tb-error-messages","role","alert",4,"ngIf"],["mat-dialog-actions","",1,"flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["role","alert",1,"tb-error-messages"],["translate","",1,"tb-error-message"]],template:function(C,_){if(1&C){const E=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",1),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(E),e.\u0275\u0275resetView(_.save())}),e.\u0275\u0275elementStart(1,"mat-toolbar",2)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",3),e.\u0275\u0275elementStart(6,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(E),e.\u0275\u0275resetView(_.cancel())}),e.\u0275\u0275elementStart(7,"mat-icon",5),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,A,1,0,"mat-progress-bar",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,u,1,0,"div",7),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",8)(14,"fieldset",9),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275element(16,"tb-relation-type-autocomplete",10),e.\u0275\u0275elementStart(17,"small"),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"tb-entity-list-select",11)(21,"tb-json-object-edit",12,0),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275template(24,m,3,0,"div",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",14),e.\u0275\u0275element(26,"span",3),e.\u0275\u0275elementStart(27,"button",15),e.\u0275\u0275pipe(28,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(E),e.\u0275\u0275resetView(_.cancel())}),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"button",16),e.\u0275\u0275pipe(32,"async"),e.\u0275\u0275text(33),e.\u0275\u0275pipe(34,"translate"),e.\u0275\u0275elementEnd()()()}2&C&&(e.\u0275\u0275property("formGroup",_.relationFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,13,_.isAdd?"relation.add":"relation.edit")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,15,_.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,17,_.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,19,_.isLoading$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,21,_.direction===_.entitySearchDirection.FROM?"relation.to-entity":"relation.from-entity")),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(23,23,"relation.additional-info")),e.\u0275\u0275property("formControl",_.additionalInfo),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.submitted&&_.additionalInfo.invalid),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(28,25,_.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(30,27,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(32,29,_.isLoading$)||_.relationFormGroup.invalid||!(_.relationFormGroup.dirty||_.additionalInfo.dirty)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(34,31,_.isAdd?"action.add":"action.save")," "))},dependencies:[z.NgIf,L.EntityListSelectComponent,B.RelationTypeAutocompleteComponent,K.JsonObjectEditComponent,I.MatButton,I.MatIconButton,U.MatIcon,F.MatProgressBar,a.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormControlDirective,h.FormGroupDirective,h.FormControlName,O.TranslateDirective,z.AsyncPipe,O.TranslatePipe],styles:['@charset "UTF-8";']})}}},59948:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{RelationTableComponent:()=>rt});var e=n(93953),t=n(69749),c=n(719),h=n(96695),V=n(2042),S=n(80216),G=n(20506),K=n(67496),H=n(18530),k=n(57786),Q=n(27468),z=n(70152),L=n(23294),B=n(56977),I=n(99321),U=n(45024),F=n(84412),a=n(92771),O=n(7673),P=n(29543),A=n(88141),u=n(99437),m=n(96354),p=n(89348),v=n(99898),T=n(96697),C=n(25967),_=n(27997);class E{constructor(je,$e){this.entityRelationService=je,this.translate=$e,this.relationsSubject=new F.t([]),this.pageDataSubject=new F.t((0,P.r)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new U.SelectionModel(!0,[])}connect(je){return this.relationsSubject.asObservable()}disconnect(je){this.relationsSubject.complete(),this.pageDataSubject.complete()}loadRelations(je,$e,Oe,Fe=!1){Fe&&(this.allRelations=null);const le=new a.m;return this.fetchRelations(je,$e,Oe).pipe((0,A.M)(()=>{this.selection.clear()}),(0,u.W)(()=>(0,O.of)((0,P.r)()))).subscribe(we=>{this.relationsSubject.next(we.data),this.pageDataSubject.next(we),le.next(we)}),le}fetchRelations(je,$e,Oe){return this.getAllRelations(je,$e).pipe((0,m.T)(Fe=>Oe.filterData(Fe)))}getAllRelations(je,$e){if(!this.allRelations){let Oe;switch(je){case I.td.FROM:Oe=this.entityRelationService.findInfoByFrom($e);break;case I.td.TO:Oe=this.entityRelationService.findInfoByTo($e)}this.allRelations=Oe.pipe((0,m.T)(Fe=>(Fe.forEach(le=>{je===I.td.FROM?(le.toEntityTypeName=this.translate.instant(C.Mi.get(le.to.entityType).type),le.entityURL=(0,_.e9)(le.to.id,le.to.entityType)):(le.fromEntityTypeName=this.translate.instant(C.Mi.get(le.from.entityType).type),le.entityURL=(0,_.e9)(le.from.id,le.from.entityType))}),Fe)),(0,p.H)(1),(0,v.B)())}return this.allRelations}isAllSelected(){const je=this.selection.selected.length;return this.relationsSubject.pipe((0,m.T)($e=>je===$e.length))}isEmpty(){return this.relationsSubject.pipe((0,m.T)(je=>!je.length))}total(){return this.pageDataSubject.pipe((0,m.T)(je=>je.totalElements))}masterToggle(){this.relationsSubject.pipe((0,A.M)(je=>{this.selection.selected.length===je.length?this.selection.clear():je.forEach(Oe=>{this.selection.select(Oe)})}),(0,T.s)(1)).subscribe()}}var f=n(65197),g=n(74972),y=n(9310),b=n(73955),D=n(34006),w=n(89417),ee=n(60177),_e=n(88834),ve=n(82765),Ee=n(99213),$=n(59042),be=n(53719),Te=n(55911),oe=n(82798),R=n(86600),N=n(14823),Z=n(9159),Y=n(71997),ge=n(7901);const ce=["searchInput"],se=Ze=>({count:Ze}),J=()=>[10,20,30];function de(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-option",36),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze){const $e=je.$implicit,Oe=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",$e),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,Oe.directionTypeTranslations.get(Oe.directions[$e]))," ")}}function ye(Ze,je){if(1&Ze){const $e=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-header-cell",37)(1,"mat-checkbox",38),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("change",function(Fe){e.\u0275\u0275restoreView($e);const le=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Fe?le.dataSource.masterToggle():null)}),e.\u0275\u0275elementEnd()()}if(2&Ze){const $e=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("checked",$e.dataSource.selection.hasValue()&&e.\u0275\u0275pipeBind1(2,2,$e.dataSource.isAllSelected()))("indeterminate",$e.dataSource.selection.hasValue()&&!e.\u0275\u0275pipeBind1(3,4,$e.dataSource.isAllSelected()))}}function re(Ze,je){if(1&Ze){const $e=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"mat-checkbox",39),e.\u0275\u0275listener("click",function(Fe){return e.\u0275\u0275restoreView($e),e.\u0275\u0275resetView(Fe.stopPropagation())})("change",function(Fe){const le=e.\u0275\u0275restoreView($e).$implicit,we=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Fe?we.dataSource.selection.toggle(le):null)}),e.\u0275\u0275elementEnd()()}if(2&Ze){const $e=je.$implicit,Oe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("checked",Oe.dataSource.selection.isSelected($e))}}function ne(Ze,je){1&Ze&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"relation.type")," "))}function ie(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Ze){const $e=je.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",$e.type," ")}}function Ae(Ze,je){1&Ze&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"relation.to-entity-type")," "))}function Pe(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Ze){const $e=je.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",$e.toEntityTypeName," ")}}function Be(Ze,je){1&Ze&&(e.\u0275\u0275elementContainerStart(0,41),e.\u0275\u0275template(1,Ae,3,3,"mat-header-cell",25)(2,Pe,2,1,"mat-cell",23),e.\u0275\u0275elementContainerEnd())}function Ke(Ze,je){1&Ze&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"relation.to-entity-name")," "))}function Xe(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-cell")(1,"a",43),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&Ze){const $e=je.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("routerLink",$e.entityURL),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",$e.toName," ")}}function at(Ze,je){1&Ze&&(e.\u0275\u0275elementContainerStart(0,42),e.\u0275\u0275template(1,Ke,3,3,"mat-header-cell",25)(2,Xe,3,2,"mat-cell",23),e.\u0275\u0275elementContainerEnd())}function bt(Ze,je){1&Ze&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"relation.from-entity-type")," "))}function Mt(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Ze){const $e=je.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",$e.fromEntityTypeName," ")}}function ze(Ze,je){1&Ze&&(e.\u0275\u0275elementContainerStart(0,44),e.\u0275\u0275template(1,bt,3,3,"mat-header-cell",25)(2,Mt,2,1,"mat-cell",23),e.\u0275\u0275elementContainerEnd())}function vt(Ze,je){1&Ze&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&Ze&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"relation.from-entity-name")," "))}function tt(Ze,je){if(1&Ze&&(e.\u0275\u0275elementStart(0,"mat-cell")(1,"a",43),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&Ze){const $e=je.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275property("routerLink",$e.entityURL),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",$e.fromName," ")}}function Ye(Ze,je){1&Ze&&(e.\u0275\u0275elementContainerStart(0,45),e.\u0275\u0275template(1,vt,3,3,"mat-header-cell",25)(2,tt,3,2,"mat-cell",23),e.\u0275\u0275elementContainerEnd())}function Qe(Ze,je){1&Ze&&e.\u0275\u0275element(0,"mat-header-cell",46)}function nt(Ze,je){if(1&Ze){const $e=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"div",47)(2,"button",12),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275listener("click",function(Fe){const le=e.\u0275\u0275restoreView($e).$implicit,we=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(we.editRelation(Fe,le))}),e.\u0275\u0275elementStart(5,"mat-icon"),e.\u0275\u0275text(6,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",12),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275listener("click",function(Fe){const le=e.\u0275\u0275restoreView($e).$implicit,we=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(we.deleteRelation(Fe,le))}),e.\u0275\u0275elementStart(10,"mat-icon"),e.\u0275\u0275text(11,"delete"),e.\u0275\u0275elementEnd()()()()}if(2&Ze){const $e=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(3,4,"relation.edit")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,6,$e.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(8,8,"relation.delete")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(9,10,$e.isLoading$))}}function ot(Ze,je){1&Ze&&e.\u0275\u0275element(0,"mat-header-row",48)}function gt(Ze,je){if(1&Ze){const $e=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-row",49),e.\u0275\u0275listener("click",function(){const Fe=e.\u0275\u0275restoreView($e).$implicit,le=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(le.dataSource.selection.toggle(Fe))}),e.\u0275\u0275elementEnd()}if(2&Ze){const $e=je.$implicit,Oe=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("mat-selected",Oe.dataSource.selection.isSelected($e))}}class rt extends t.H{set active(je){this.activeValue!==je&&(this.activeValue=je,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))}set entityId(je){this.entityIdValue!==je&&(this.entityIdValue=je,this.viewsInited&&(this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0)))}constructor(je,$e,Oe,Fe,le,we,qe,lt,Kt){super(je),this.store=je,this.entityRelationService=$e,this.translate=Oe,this.dialog=Fe,this.dialogService=le,this.cd=we,this.elementRef=qe,this.fb=lt,this.zone=Kt,this.directions=I.td,this.directionTypes=Object.keys(I.td),this.directionTypeTranslations=I.Bp,this.hidePageSize=!1,this.textSearchMode=!1,this.activeValue=!1,this.dirtyValue=!1,this.viewsInited=!1,this.textSearch=this.fb.control("",{nonNullable:!0}),this.destroy$=new H.B,this.dirtyValue=!this.activeValue;const Jt={property:"type",direction:K.O.ASC};this.direction=I.td.FROM,this.pageLink=new c.Ek(10,0,null,Jt),this.dataSource=new E(this.entityRelationService,this.translate),this.updateColumns()}ngOnInit(){this.widgetResize$=new ResizeObserver(()=>{this.zone.run(()=>{const je=this.elementRef.nativeElement.offsetWidth<g.u3;je!==this.hidePageSize&&(this.hidePageSize=je,this.cd.markForCheck())})}),this.widgetResize$.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.widgetResize$&&this.widgetResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()}updateColumns(){this.direction===I.td.FROM?this.displayedColumns=["select","type","toEntityTypeName","toName","actions"]:this.displayedColumns=["select","type","fromEntityTypeName","fromName","actions"]}directionChanged(je){this.direction=je,this.updateColumns(),this.paginator.pageIndex=0,this.updateData(!0)}ngAfterViewInit(){this.textSearch.valueChanges.pipe((0,z.B)(150),(0,L.F)((je,$e)=>(this.pageLink.textSearch??"")===$e.trim()),(0,B.Q)(this.destroy$)).subscribe(je=>{this.paginator.pageIndex=0,this.pageLink.textSearch=je.trim(),this.updateData()}),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,k.h)(this.sort.sortChange,this.paginator.page).pipe((0,B.Q)(this.destroy$)).subscribe(()=>this.updateData()),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)}updateData(je=!1){this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=K.O[this.sort.direction.toUpperCase()],this.dataSource.loadRelations(this.direction,this.entityIdValue,this.pageLink,je)}enterFilterMode(){this.textSearchMode=!0,setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.textSearch.reset()}resetSortAndFilter(je=!0){this.direction=I.td.FROM,this.updateColumns(),this.pageLink.textSearch=null,this.textSearch.reset("",{emitEvent:!1}),this.paginator.pageIndex=0;const $e=this.sort.sortables.get("type");this.sort.active=$e.id,this.sort.direction="asc",je&&this.updateData(!0)}reloadRelations(){this.updateData(!0)}addRelation(je){this.openRelationDialog(je)}editRelation(je,$e){this.openRelationDialog(je,$e)}deleteRelation(je,$e){let Oe,Fe;je&&je.stopPropagation(),this.direction===I.td.FROM?(Oe=this.translate.instant("relation.delete-to-relation-title",{entityName:$e.toName}),Fe=this.translate.instant("relation.delete-to-relation-text",{entityName:$e.toName})):(Oe=this.translate.instant("relation.delete-from-relation-title",{entityName:$e.fromName}),Fe=this.translate.instant("relation.delete-from-relation-text",{entityName:$e.fromName})),this.dialogService.confirm(Oe,Fe,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(le=>{le&&this.entityRelationService.deleteRelation($e.from,$e.type,$e.to).subscribe(()=>{this.reloadRelations()})})}deleteRelations(je){if(je&&je.stopPropagation(),this.dataSource.selection.selected.length>0){let $e,Oe;this.direction===I.td.FROM?($e=this.translate.instant("relation.delete-to-relations-title",{count:this.dataSource.selection.selected.length}),Oe=this.translate.instant("relation.delete-to-relations-text")):($e=this.translate.instant("relation.delete-from-relations-title",{count:this.dataSource.selection.selected.length}),Oe=this.translate.instant("relation.delete-from-relations-text")),this.dialogService.confirm($e,Oe,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(Fe=>{if(Fe){const le=[];this.dataSource.selection.selected.forEach(we=>{le.push(this.entityRelationService.deleteRelation(we.from,we.type,we.to))}),(0,Q.p)(le).subscribe(()=>{this.reloadRelations()})}})}}openRelationDialog(je,$e=null){je&&je.stopPropagation();let Oe=!1;$e||(Oe=!0,$e={from:null,to:null,type:null,typeGroup:I.GO.COMMON},this.direction===I.td.FROM?$e.from=this.entityIdValue:$e.to=this.entityIdValue),this.dialog.open(f.RelationDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:Oe,direction:this.direction,relation:{...$e}}}).afterClosed().subscribe(Fe=>{Fe&&this.reloadRelations()})}static{this.\u0275fac=function($e){return new($e||rt)(e.\u0275\u0275directiveInject(y.Store),e.\u0275\u0275directiveInject(G.Z),e.\u0275\u0275directiveInject(b.TranslateService),e.\u0275\u0275directiveInject(D.MatDialog),e.\u0275\u0275directiveInject(S.o),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(w.FormBuilder),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:rt,selectors:[["tb-relation-table"]],viewQuery:function($e,Oe){if(1&$e&&(e.\u0275\u0275viewQuery(ce,5),e.\u0275\u0275viewQuery(h.MatPaginator,5),e.\u0275\u0275viewQuery(V.MatSort,5)),2&$e){let Fe;e.\u0275\u0275queryRefresh(Fe=e.\u0275\u0275loadQuery())&&(Oe.searchInputField=Fe.first),e.\u0275\u0275queryRefresh(Fe=e.\u0275\u0275loadQuery())&&(Oe.paginator=Fe.first),e.\u0275\u0275queryRefresh(Fe=e.\u0275\u0275loadQuery())&&(Oe.sort=Fe.first)}},inputs:{active:"active",entityId:"entityId"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:78,vars:74,consts:[["searchInput",""],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],[1,"tb-entity-table-content","tb-outlined-border","flex","flex-1","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],[1,"title-container","flex","flex-row","items-center","justify-start","xs:flex-col","xs:items-start","xs:justify-center"],[1,"tb-entity-table-title"],[1,"mat-block","tb-relation-direction"],["translate",""],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["color","primary",1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools","flex","items-center","justify-between"],[1,"tb-entity-table-info"],[1,"table-container","flex-1"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","type"],["mat-sort-header","","style","width: 33%",4,"matHeaderCellDef"],["matColumnDef","toEntityTypeName",4,"ngIf"],["matColumnDef","toName",4,"ngIf"],["matColumnDef","fromEntityTypeName",4,"ngIf"],["matColumnDef","fromName",4,"ngIf"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",3,"mat-selected","click",4,"matRowDef","matRowDefColumns"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize"],[3,"value"],[2,"width","30px"],[3,"change","checked","indeterminate"],[3,"click","change","checked"],["mat-sort-header","",2,"width","33%"],["matColumnDef","toEntityTypeName"],["matColumnDef","toName"],[1,"link",3,"routerLink"],["matColumnDef","fromEntityTypeName"],["matColumnDef","fromName"],[2,"min-width","80px","max-width","80px","width","80px"],[1,"flex","flex-1","flex-row","items-stretch","justify-end"],[1,"mat-row-select"],[1,"mat-row-select",3,"click"]],template:function($e,Oe){if(1&$e){const Fe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"mat-toolbar",3)(3,"div",4)(4,"div",5)(5,"span",6),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field",7)(9,"mat-label",8),e.\u0275\u0275text(10,"relation.direction"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-select",9),e.\u0275\u0275listener("ngModelChange",function(we){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.directionChanged(we))}),e.\u0275\u0275template(12,de,3,4,"mat-option",10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(13,"span",11),e.\u0275\u0275elementStart(14,"button",12),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275listener("click",function(we){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.addRelation(we))}),e.\u0275\u0275elementStart(17,"mat-icon"),e.\u0275\u0275text(18,"add"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"button",12),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.reloadRelations())}),e.\u0275\u0275elementStart(22,"mat-icon"),e.\u0275\u0275text(23,"refresh"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"button",12),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.enterFilterMode())}),e.\u0275\u0275elementStart(27,"mat-icon"),e.\u0275\u0275text(28,"search"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(29,"mat-toolbar",3)(30,"div",4)(31,"button",13),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementStart(33,"mat-icon"),e.\u0275\u0275text(34,"search"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"mat-form-field",11)(36,"mat-label"),e.\u0275\u0275text(37,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"input",14,0),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"button",15),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.exitFilterMode())}),e.\u0275\u0275elementStart(43,"mat-icon"),e.\u0275\u0275text(44,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(45,"mat-toolbar",16)(46,"div",17)(47,"span",18),e.\u0275\u0275text(48),e.\u0275\u0275pipe(49,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"button",12),e.\u0275\u0275pipe(51,"translate"),e.\u0275\u0275pipe(52,"async"),e.\u0275\u0275listener("click",function(we){return e.\u0275\u0275restoreView(Fe),e.\u0275\u0275resetView(Oe.deleteRelations(we))}),e.\u0275\u0275elementStart(53,"mat-icon"),e.\u0275\u0275text(54,"delete"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(55,"div",19)(56,"table",20),e.\u0275\u0275elementContainerStart(57,21),e.\u0275\u0275template(58,ye,4,6,"mat-header-cell",22)(59,re,2,1,"mat-cell",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(60,24),e.\u0275\u0275template(61,ne,3,3,"mat-header-cell",25)(62,ie,2,1,"mat-cell",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(63,Be,3,0,"ng-container",26)(64,at,3,0,"ng-container",27)(65,ze,3,0,"ng-container",28)(66,Ye,3,0,"ng-container",29),e.\u0275\u0275elementContainerStart(67,30),e.\u0275\u0275template(68,Qe,1,0,"mat-header-cell",31)(69,nt,12,12,"mat-cell",23),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(70,ot,1,0,"mat-header-row",32)(71,gt,1,2,"mat-row",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"span",34),e.\u0275\u0275pipe(73,"async"),e.\u0275\u0275text(74),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(75,"mat-divider")(76,"mat-paginator",35),e.\u0275\u0275pipe(77,"async"),e.\u0275\u0275elementEnd()()}2&$e&&(e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",Oe.textSearchMode||!Oe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,40,Oe.direction==Oe.directions.FROM?"relation.from-relations":"relation.to-relations")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngModel",Oe.direction),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",Oe.directionTypes),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(15,42,"action.add")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(16,44,Oe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(20,46,"action.refresh")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(21,48,Oe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(25,50,"action.search")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,52,Oe.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",!Oe.textSearchMode||!Oe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(32,54,"action.search")),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(40,56,"common.enter-search")),e.\u0275\u0275property("formControl",Oe.textSearch),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(42,58,"action.close")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",Oe.dataSource.selection.isEmpty()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(49,60,"relation.selected-relations",e.\u0275\u0275pureFunction1(71,se,Oe.dataSource.selection.selected.length))," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(51,63,"action.delete")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(52,65,Oe.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("dataSource",Oe.dataSource)("matSortActive",Oe.pageLink.sortOrder.property)("matSortDirection",Oe.pageLink.sortDirection()),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",Oe.direction===Oe.directions.FROM),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Oe.direction===Oe.directions.FROM),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Oe.direction===Oe.directions.TO),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Oe.direction===Oe.directions.TO),e.\u0275\u0275advance(4),e.\u0275\u0275property("matHeaderRowDef",Oe.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("matRowDefColumns",Oe.displayedColumns),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!1===e.\u0275\u0275pipeBind1(73,67,Oe.dataSource.isEmpty())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("relation.no-relations-text"),e.\u0275\u0275advance(2),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(77,69,Oe.dataSource.total()))("pageIndex",Oe.pageLink.page)("pageSize",Oe.pageLink.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction0(73,J))("hidePageSize",Oe.hidePageSize))},dependencies:[ee.NgForOf,ee.NgIf,_e.MatIconButton,ve.MatCheckbox,Ee.MatIcon,$.MatInput,be.MatFormField,be.MatLabel,Te.MatToolbar,oe.MatSelect,R.MatOption,N.MatTooltip,Z.MatTable,Z.MatHeaderCellDef,Z.MatHeaderRowDef,Z.MatColumnDef,Z.MatCellDef,Z.MatRowDef,Z.MatHeaderCell,Z.MatCell,Z.MatHeaderRow,Z.MatRow,h.MatPaginator,V.MatSort,V.MatSortHeader,Y.MatDivider,w.DefaultValueAccessor,w.NgControlStatus,w.NgModel,w.FormControlDirective,ge.RouterLink,b.TranslateDirective,ee.AsyncPipe,b.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content.tb-outlined-border[_ngcontent-%COMP%]{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{border-bottom:none}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}'],changeDetection:0})}}},52874:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{RuleChainAutocompleteComponent:()=>$});var e=n(93953),t=n(89417),c=n(7673),h=n(70152),V=n(88141),S=n(96354),G=n(23294),K=n(25558),H=n(97647),k=n(99437),Q=n(14085),z=n(25967),L=n(78911),B=n(97435),I=n(16450),U=n(60850),F=n(89815),a=n(27997),O=n(9310),P=n(73955),A=n(60177),u=n(88834),m=n(99213),p=n(59042),v=n(53719),T=n(86600),C=n(7901),_=n(91009);const E=["ruleChainInput"],f=[[["","tb-hint",""]]],g=["[tb-hint]"],y=be=>({entity:be});function b(be,Te){if(1&be&&(e.\u0275\u0275elementStart(0,"a",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&be){const oe=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",oe.ruleChainURL),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",oe.displayRuleChainFn(oe.selectRuleChainFormGroup.get("ruleChainId").value)," ")}}function D(be,Te){if(1&be){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(oe);const N=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(N.clear())}),e.\u0275\u0275elementStart(1,"mat-icon",13),e.\u0275\u0275text(2,"close"),e.\u0275\u0275elementEnd()()}}function w(be,Te){if(1&be&&(e.\u0275\u0275elementStart(0,"mat-option",14),e.\u0275\u0275element(1,"span",15),e.\u0275\u0275pipe(2,"highlight"),e.\u0275\u0275elementEnd()),2&be){const oe=Te.$implicit,R=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",oe),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(2,2,oe.name,R.searchText),e.\u0275\u0275sanitizeHtml)}}function ee(be,Te){1&be&&(e.\u0275\u0275elementStart(0,"div")(1,"span",20),e.\u0275\u0275text(2,"rulechain.no-rulechains-text"),e.\u0275\u0275elementEnd()())}function _e(be,Te){if(1&be&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&be){const oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,oe.translate.get("rulechain.no-rulechains-matching",e.\u0275\u0275pureFunction1(3,y,oe.truncate.transform(oe.searchText,!0,6,"..."))))," ")}}function ve(be,Te){if(1&be){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",16)(1,"div",17),e.\u0275\u0275listener("click",function(N){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275resetView(N.stopPropagation())}),e.\u0275\u0275template(2,ee,3,0,"div",18)(3,_e,3,5,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"span")(6,"a",19),e.\u0275\u0275listener("click",function(N){e.\u0275\u0275restoreView(oe);const Z=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Z.createDefaultRuleChain(N,Z.searchText))}),e.\u0275\u0275text(7,"rulechain.create-new-rulechain"),e.\u0275\u0275elementEnd()()()()}if(2&be){const oe=e.\u0275\u0275reference(4),R=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!R.textIsNotEmpty(R.searchText))("ngIfElse",oe)}}function Ee(be,Te){1&be&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&be&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"rulechain.rulechain-required")," "))}class ${get required(){return this.requiredValue}set required(Te){this.requiredValue=(0,Q.coerceBooleanProperty)(Te)}constructor(Te,oe,R,N,Z,Y){this.store=Te,this.translate=oe,this.truncate=R,this.entityService=N,this.ruleChainService=Z,this.fb=Y,this.labelText="rulechain.rulechain",this.ruleChainType=F.UR.CORE,this.searchText="",this.dirty=!1,this.propagateChange=ge=>{},this.selectRuleChainFormGroup=this.fb.group({ruleChainId:[null]})}registerOnChange(Te){this.propagateChange=Te}registerOnTouched(Te){}ngOnInit(){this.filteredRuleChains=this.selectRuleChainFormGroup.get("ruleChainId").valueChanges.pipe((0,h.B)(150),(0,V.M)(Te=>{let oe;oe="string"!=typeof Te&&Te?Te.id.id:null,this.updateView(oe),null===Te&&this.clear()}),(0,S.T)(Te=>Te?"string"==typeof Te?Te:Te.name:""),(0,G.F)(),(0,K.n)(Te=>this.fetchRuleChain(Te)),(0,H.u)())}ngAfterViewInit(){}getCurrentEntity(){const Te=this.selectRuleChainFormGroup.get("ruleChainId").value;return Te&&"string"!=typeof Te?Te:null}setDisabledState(Te){this.disabled=Te,this.disabled?this.selectRuleChainFormGroup.disable({emitEvent:!1}):this.selectRuleChainFormGroup.enable({emitEvent:!1})}textIsNotEmpty(Te){return Te&&Te.length>0}writeValue(Te){if(this.searchText="",null!=Te){const oe=z.ck.RULE_CHAIN;this.entityService.getEntity(oe,Te,{ignoreLoading:!0,ignoreErrors:!0}).subscribe(R=>{this.modelValue=R.id.id,this.ruleChainURL=(0,a.e9)(this.modelValue,z.ck.RULE_CHAIN),this.ruleChainType===F.UR.EDGE&&(this.ruleChainURL="/edgeManagement"+this.ruleChainURL),this.selectRuleChainFormGroup.get("ruleChainId").patchValue(R,{emitEvent:!1})},()=>{this.modelValue=null,this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1}),null!==Te&&this.propagateChange(this.modelValue)})}else this.modelValue=null,this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1});this.dirty=!0}onFocus(){this.dirty&&(this.selectRuleChainFormGroup.get("ruleChainId").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)}reset(){this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1})}updateView(Te){this.modelValue!==Te&&(this.modelValue=Te,this.propagateChange(this.modelValue))}displayRuleChainFn(Te){return Te?Te.name:void 0}fetchRuleChain(Te){return this.searchText=Te,this.entityService.getEntitiesByNameFilter(z.ck.RULE_CHAIN,Te,50,this.ruleChainType,{ignoreLoading:!0}).pipe((0,k.W)(()=>(0,c.of)([])))}clear(){this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!0}),setTimeout(()=>{this.ruleChainInput.nativeElement.blur(),this.ruleChainInput.nativeElement.focus()},0)}createDefaultRuleChain(Te,oe){Te.preventDefault(),this.ruleChainAutocomplete.closePanel(),this.ruleChainService.createDefaultRuleChain(oe.trim()).subscribe(R=>{this.selectRuleChainFormGroup.get("ruleChainId").patchValue(R)})}static{this.\u0275fac=function(oe){return new(oe||$)(e.\u0275\u0275directiveInject(O.Store),e.\u0275\u0275directiveInject(P.TranslateService),e.\u0275\u0275directiveInject(B.TruncatePipe),e.\u0275\u0275directiveInject(L.T),e.\u0275\u0275directiveInject(I.P),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:$,selectors:[["tb-rule-chain-autocomplete"]],viewQuery:function(oe,R){if(1&oe&&(e.\u0275\u0275viewQuery(E,7),e.\u0275\u0275viewQuery(E,5,U.MatAutocompleteTrigger)),2&oe){let N;e.\u0275\u0275queryRefresh(N=e.\u0275\u0275loadQuery())&&(R.ruleChainInput=N.first),e.\u0275\u0275queryRefresh(N=e.\u0275\u0275loadQuery())&&(R.ruleChainAutocomplete=N.first)}},inputs:{labelText:"labelText",requiredText:"requiredText",ruleChainType:"ruleChainType",required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>$),multi:!0}])],ngContentSelectors:g,decls:17,vars:18,consts:[["ruleChainInput",""],["ruleChainAutocomplete","matAutocomplete"],["searchNotEmpty",""],[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","ruleChainId",3,"focusin","required","matAutocomplete"],["aria-label","Open device profile",3,"routerLink",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["aria-label","Open device profile",3,"routerLink"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["translate","",3,"click"],["translate",""]],template:function(oe,R){if(1&oe){const N=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(f),e.\u0275\u0275elementStart(0,"mat-form-field",3)(1,"mat-label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"input",4,0),e.\u0275\u0275listener("focusin",function(){return e.\u0275\u0275restoreView(N),e.\u0275\u0275resetView(R.onFocus())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,b,2,2,"a",5)(7,D,3,0,"button",6),e.\u0275\u0275elementStart(8,"mat-autocomplete",7,1),e.\u0275\u0275template(10,w,3,5,"mat-option",8),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275template(12,ve,8,3,"mat-option",9),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,Ee,3,3,"mat-error",10),e.\u0275\u0275elementStart(15,"mat-hint"),e.\u0275\u0275projection(16),e.\u0275\u0275elementEnd()()}if(2&oe){let N;const Z=e.\u0275\u0275reference(9);e.\u0275\u0275property("formGroup",R.selectRuleChainFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,12,R.labelText)),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",R.disabled&&R.selectRuleChainFormGroup.get("ruleChainId").value),e.\u0275\u0275property("required",R.required)("matAutocomplete",Z),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",R.selectRuleChainFormGroup.get("ruleChainId").value&&R.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",R.selectRuleChainFormGroup.get("ruleChainId").value&&!R.disabled),e.\u0275\u0275advance(),e.\u0275\u0275property("displayWith",R.displayRuleChainFn),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(11,14,R.filteredRuleChains)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null!=(N=e.\u0275\u0275pipeBind1(13,16,R.filteredRuleChains))&&N.length)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",R.selectRuleChainFormGroup.get("ruleChainId").hasError("required"))}},dependencies:[A.NgForOf,A.NgIf,u.MatIconButton,m.MatIcon,p.MatInput,v.MatFormField,v.MatLabel,v.MatHint,v.MatError,v.MatSuffix,T.MatOption,U.MatAutocomplete,U.MatAutocompleteTrigger,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,C.RouterLink,P.TranslateDirective,A.AsyncPipe,_.HighlightPipe,P.TranslatePipe],encapsulation:2})}}},28347:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{AwsSnsProviderConfigurationComponent:()=>I});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(52734),S=n(9310),G=n(60177),K=n(59042),H=n(53719),k=n(73955),Q=n(19267);function z(U,F){1&U&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&U&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.aws-access-key-id-required")," "))}function L(U,F){1&U&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&U&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.aws-secret-access-key-required")," "))}function B(U,F){1&U&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&U&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.aws-region-required")," "))}class I{get required(){return this.requiredValue}set required(F){this.requiredValue=(0,c.coerceBooleanProperty)(F)}constructor(F,a){this.store=F,this.fb=a,this.propagateChange=O=>{}}registerOnChange(F){this.propagateChange=F}registerOnTouched(F){}ngOnInit(){this.awsSnsProviderConfigurationFormGroup=this.fb.group({accessKeyId:[null,[t.Validators.required]],secretAccessKey:[null,[t.Validators.required]],region:[null,[t.Validators.required]]}),this.awsSnsProviderConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(F){this.disabled=F,this.disabled?this.awsSnsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.awsSnsProviderConfigurationFormGroup.enable({emitEvent:!1})}writeValue(F){(0,h.f1)(F)&&this.awsSnsProviderConfigurationFormGroup.patchValue(F,{emitEvent:!1})}updateModel(){let F=null;this.awsSnsProviderConfigurationFormGroup.valid&&(F=this.awsSnsProviderConfigurationFormGroup.value,F.type=V.dx.AWS_SNS),this.propagateChange(F)}static{this.\u0275fac=function(a){return new(a||I)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["tb-aws-sns-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>I),multi:!0}])],decls:17,vars:4,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","matInput","","formControlName","accessKeyId"],[4,"ngIf"],["required","","type","password","matInput","","formControlName","secretAccessKey"],["matSuffix",""],["required","","matInput","","formControlName","region"]],template:function(a,O){1&a&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-label",2),e.\u0275\u0275text(3,"admin.aws-access-key-id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",3),e.\u0275\u0275template(5,z,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field",1)(7,"mat-label",2),e.\u0275\u0275text(8,"admin.aws-secret-access-key"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"input",5)(10,"tb-toggle-password",6),e.\u0275\u0275template(11,L,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-form-field",1)(13,"mat-label",2),e.\u0275\u0275text(14,"admin.aws-region"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"input",7),e.\u0275\u0275template(16,B,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()),2&a&&(e.\u0275\u0275property("formGroup",O.awsSnsProviderConfigurationFormGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",O.awsSnsProviderConfigurationFormGroup.get("accessKeyId").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",O.awsSnsProviderConfigurationFormGroup.get("secretAccessKey").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",O.awsSnsProviderConfigurationFormGroup.get("region").hasError("required")))},dependencies:[G.NgIf,K.MatInput,H.MatFormField,H.MatLabel,H.MatError,H.MatSuffix,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,k.TranslateDirective,Q.TogglePasswordComponent,k.TranslatePipe],encapsulation:2})}}},31369:(Re,X,n)=>{"use strict";n.d(X,{A:()=>E});var e=n(93953),t=n(89417),c=n(52734),h=n(27997),V=n(14085),S=n(60177),G=n(59042),K=n(53719),H=n(82798),k=n(86600),Q=n(9454),z=n(73955),L=n(19267);function B(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit;e.\u0275\u0275property("value",y.value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",y.value," ")}}function I(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.smpp-provider.smpp-host-required")," "))}function U(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.smpp-provider.smpp-port-required")," "))}function F(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.smpp-provider.system-id-required")," "))}function a(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.smpp-provider.password-required")," "))}function O(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.bindTypesTranslation.get(y))," ")}}function P(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label",3),e.\u0275\u0275text(2,"admin.smpp-provider.system-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-form-field",16)(5,"mat-label",3),e.\u0275\u0275text(6,"admin.smpp-provider.bind-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-select",18),e.\u0275\u0275template(8,O,3,4,"mat-option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"mat-form-field",16)(10,"mat-label",3),e.\u0275\u0275text(11,"admin.smpp-provider.service-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",19),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",y.bindTypes)}}function A(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",b.typeOfNumberMap.get(y).value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.typeOfNumberMap.get(y).name)," ")}}function u(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",b.numberingPlanIdentificationMap.get(y).value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.numberingPlanIdentificationMap.get(y).name)," ")}}function m(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label",3),e.\u0275\u0275text(2,"admin.smpp-provider.source-address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-form-field",16)(5,"mat-label",3),e.\u0275\u0275text(6,"admin.smpp-provider.source-ton"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-select",21),e.\u0275\u0275template(8,A,3,4,"mat-option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"mat-form-field",16)(10,"mat-label",3),e.\u0275\u0275text(11,"admin.smpp-provider.source-npi"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-select",22),e.\u0275\u0275template(13,u,3,4,"mat-option",5),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",y.typeOfNumber),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",y.numberingPlanIdentification)}}function p(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",b.typeOfNumberMap.get(y).value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.typeOfNumberMap.get(y).name)," ")}}function v(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",b.numberingPlanIdentificationMap.get(y).value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.numberingPlanIdentificationMap.get(y).name)," ")}}function T(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label",3),e.\u0275\u0275text(2,"admin.smpp-provider.destination-ton"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",23),e.\u0275\u0275template(4,p,3,4,"mat-option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"mat-form-field",16)(6,"mat-label",3),e.\u0275\u0275text(7,"admin.smpp-provider.destination-npi"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-select",24),e.\u0275\u0275template(9,v,3,4,"mat-option",5),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",y.typeOfNumber),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",y.numberingPlanIdentification)}}function C(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",b.codingSchemesMap.get(y).value),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.codingSchemesMap.get(y).name)," ")}}function _(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label",3),e.\u0275\u0275text(2,"admin.smpp-provider.address-range"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"input",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-form-field",16)(5,"mat-label",3),e.\u0275\u0275text(6,"admin.smpp-provider.coding-scheme"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-select",26),e.\u0275\u0275template(8,C,3,4,"mat-option",5),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",y.codingSchemes)}}class E{constructor(g){this.fb=g,this.smppVersions=c.Os,this.bindTypes=Object.keys(c.l$),this.bindTypesTranslation=c.i4,this.typeOfNumber=Object.keys(c.Vg),this.typeOfNumberMap=c.nx,this.numberingPlanIdentification=Object.keys(c.bb),this.numberingPlanIdentificationMap=c.xw,this.codingSchemes=Object.keys(c.nd),this.codingSchemesMap=c.V2,this.propagateChange=y=>{}}get required(){return this.requiredValue}set required(g){this.requiredValue=(0,V.coerceBooleanProperty)(g)}ngOnInit(){this.smppSmsProviderConfigurationFormGroup=this.fb.group({protocolVersion:[null,[t.Validators.required]],host:[null,[t.Validators.required]],port:[null,[t.Validators.required]],systemId:[null,[t.Validators.required]],password:[null,[t.Validators.required]],systemType:[null],bindType:[null,[]],serviceType:[null,[]],sourceAddress:[null,[]],sourceTon:[null,[]],sourceNpi:[null,[]],destinationTon:[null,[]],destinationNpi:[null,[]],addressRange:[null,[]],codingScheme:[null,[]]}),this.smppSmsProviderConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateValue()})}registerOnChange(g){this.propagateChange=g}registerOnTouched(g){}setDisabledState(g){this.disabled=g,this.disabled?this.smppSmsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.smppSmsProviderConfigurationFormGroup.enable({emitEvent:!1})}writeValue(g){(0,h.f1)(g)&&this.smppSmsProviderConfigurationFormGroup.patchValue(g,{emitEvent:!1})}updateValue(){let g=null;this.smppSmsProviderConfigurationFormGroup.valid&&(g=this.smppSmsProviderConfigurationFormGroup.value,g.type=c.dx.SMPP),this.propagateChange(g)}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-smpp-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>E),multi:!0}])],decls:50,vars:6,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"flex","flex-row","flex-wrap","gap-1.5"],[1,"mat-block","lt-sm:flex-full","gt-xs:max-w-25%","gt-xs:flex-full"],["translate",""],["formControlName","protocolVersion"],[3,"value",4,"ngFor","ngForOf"],[1,"mat-block","flex-1"],["required","","matInput","","formControlName","host"],[4,"ngIf"],["required","","matInput","","type","number","formControlName","port"],["required","","matInput","","formControlName","systemId"],["required","","matInput","","type","password","autocomplete","new-password","formControlName","password"],["matSuffix",""],["multi",""],["matExpansionPanelContent",""],[3,"value"],[1,"mat-block"],["matInput","","formControlName","systemType"],["formControlName","bindType"],["matInput","","formControlName","serviceType"],["matInput","","formControlName","sourceAddress"],["formControlName","sourceTon"],["formControlName","sourceNpi"],["formControlName","destinationTon"],["formControlName","destinationNpi"],["matInput","","formControlName","addressRange"],["formControlName","codingScheme"]],template:function(y,b){1&y&&(e.\u0275\u0275elementStart(0,"form",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label",3),e.\u0275\u0275text(4,"admin.smpp-provider.smpp-version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",4),e.\u0275\u0275template(6,B,2,2,"mat-option",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"mat-form-field",6)(8,"mat-label",3),e.\u0275\u0275text(9,"admin.smpp-provider.smpp-host"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"input",7),e.\u0275\u0275template(11,I,3,3,"mat-error",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-form-field",2)(13,"mat-label",3),e.\u0275\u0275text(14,"admin.smpp-provider.smpp-port"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"input",9),e.\u0275\u0275template(16,U,3,3,"mat-error",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",1)(18,"mat-form-field",6)(19,"mat-label",3),e.\u0275\u0275text(20,"admin.smpp-provider.system-id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"input",10),e.\u0275\u0275template(22,F,3,3,"mat-error",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-form-field",6)(24,"mat-label",3),e.\u0275\u0275text(25,"admin.smpp-provider.password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(26,"input",11)(27,"tb-toggle-password",12),e.\u0275\u0275template(28,a,3,3,"mat-error",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"mat-accordion",13)(30,"mat-expansion-panel")(31,"mat-expansion-panel-header")(32,"mat-panel-title",3),e.\u0275\u0275text(33," admin.smpp-provider.type-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(34,P,13,1,"ng-template",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"mat-expansion-panel")(36,"mat-expansion-panel-header")(37,"mat-panel-title",3),e.\u0275\u0275text(38," admin.smpp-provider.source-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(39,m,14,2,"ng-template",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title",3),e.\u0275\u0275text(43," admin.smpp-provider.destination-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(44,T,10,2,"ng-template",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"mat-expansion-panel")(46,"mat-expansion-panel-header")(47,"mat-panel-title",3),e.\u0275\u0275text(48," admin.smpp-provider.additional-settings "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,_,9,1,"ng-template",14),e.\u0275\u0275elementEnd()()()),2&y&&(e.\u0275\u0275property("formGroup",b.smppSmsProviderConfigurationFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",b.smppVersions),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",b.smppSmsProviderConfigurationFormGroup.get("host").hasError("required")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",b.smppSmsProviderConfigurationFormGroup.get("port").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",b.smppSmsProviderConfigurationFormGroup.get("systemId").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",b.smppSmsProviderConfigurationFormGroup.get("password").hasError("required")))},dependencies:[S.NgForOf,S.NgIf,G.MatInput,K.MatFormField,K.MatLabel,K.MatError,K.MatSuffix,H.MatSelect,k.MatOption,Q.MatAccordion,Q.MatExpansionPanel,Q.MatExpansionPanelHeader,Q.MatExpansionPanelTitle,Q.MatExpansionPanelContent,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NumberValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,z.TranslateDirective,L.TogglePasswordComponent,z.TranslatePipe],encapsulation:2})}}},76010:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{SmsProviderConfigurationComponent:()=>P});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(52734),S=n(9310),G=n(60177),K=n(53719),H=n(82798),k=n(86600),Q=n(73955),z=n(28347),L=n(31369),B=n(33957);function I(A,u){if(1&A&&(e.\u0275\u0275elementStart(0,"mat-option",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&A){const m=u.$implicit,p=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",m),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,p.smsProviderTypeTranslations.get(m))," ")}}function U(A,u){1&A&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.sms-provider-type-required")," "))}function F(A,u){if(1&A&&e.\u0275\u0275element(0,"tb-aws-sns-provider-configuration",9),2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275property("required",m.required)}}function a(A,u){if(1&A&&e.\u0275\u0275element(0,"tb-twilio-sms-provider-configuration",9),2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275property("required",m.required)}}function O(A,u){if(1&A&&e.\u0275\u0275element(0,"tb-smpp-sms-provider-configuration",9),2&A){const m=e.\u0275\u0275nextContext();e.\u0275\u0275property("required",m.required)}}class P{get required(){return this.requiredValue}set required(u){this.requiredValue=(0,c.coerceBooleanProperty)(u)}constructor(u,m){this.store=u,this.fb=m,this.smsProviderType=V.dx,this.smsProviderTypes=Object.keys(V.dx),this.smsProviderTypeTranslations=V.wF,this.propagateChange=p=>{}}registerOnChange(u){this.propagateChange=u}registerOnTouched(u){}ngOnInit(){this.smsProviderConfigurationFormGroup=this.fb.group({type:[null,t.Validators.required],configuration:[null,(0,V.by)(!0)]}),this.smsProviderConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()}),this.smsProviderConfigurationFormGroup.get("type").valueChanges.subscribe(()=>{this.smsProviderTypeChanged()})}setDisabledState(u){this.disabled=u,this.disabled?this.smsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.smsProviderConfigurationFormGroup.enable({emitEvent:!1})}writeValue(u){const m=(0,h.Go)(u),p=m?.type;m&&delete m.type,this.smsProviderConfigurationFormGroup.patchValue({type:p},{emitEvent:!1}),this.smsProviderConfigurationFormGroup.patchValue({configuration:m},{emitEvent:!1})}smsProviderTypeChanged(){const u=this.smsProviderConfigurationFormGroup.get("type").value;this.smsProviderConfigurationFormGroup.patchValue({configuration:(0,V.x5)(u)},{emitEvent:!1})}updateModel(){let u=null;this.smsProviderConfigurationFormGroup.valid&&(u=this.smsProviderConfigurationFormGroup.getRawValue().configuration,u.type=this.smsProviderConfigurationFormGroup.getRawValue().type),this.propagateChange(u)}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>P),multi:!0}])],decls:11,vars:8,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type",3,"required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["formControlName","configuration",3,"required"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label",2),e.\u0275\u0275text(3,"admin.sms-provider-type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",3),e.\u0275\u0275template(5,I,3,4,"mat-option",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,U,3,3,"mat-error",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275template(8,F,1,1,"ng-template",7)(9,a,1,1,"ng-template",7)(10,O,1,1,"ng-template",7),e.\u0275\u0275elementEnd()()),2&m&&(e.\u0275\u0275property("formGroup",p.smsProviderConfigurationFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("required",p.required),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",p.smsProviderTypes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",p.smsProviderConfigurationFormGroup.get("type").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitch",p.smsProviderConfigurationFormGroup.get("type").value),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",p.smsProviderType.AWS_SNS),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",p.smsProviderType.TWILIO),e.\u0275\u0275advance(),e.\u0275\u0275property("ngSwitchCase",p.smsProviderType.SMPP))},dependencies:[G.NgForOf,G.NgIf,G.NgSwitch,G.NgSwitchCase,K.MatFormField,K.MatLabel,K.MatError,H.MatSelect,k.MatOption,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,Q.TranslateDirective,z.AwsSnsProviderConfigurationComponent,L.A,B.TwilioSmsProviderConfigurationComponent,Q.TranslatePipe],encapsulation:2})}}},33957:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{TwilioSmsProviderConfigurationComponent:()=>U});var e=n(93953),t=n(89417),c=n(14085),h=n(27997),V=n(52734),S=n(9310),G=n(60177),K=n(59042),H=n(53719),k=n(73955),Q=n(19267);function z(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.number-from-required")," "))}function L(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.phone-number-pattern-twilio")," "))}function B(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.twilio-account-sid-required")," "))}function I(F,a){1&F&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"admin.twilio-account-token-required")," "))}class U{get required(){return this.requiredValue}set required(a){this.requiredValue=(0,c.coerceBooleanProperty)(a)}constructor(a,O){this.store=a,this.fb=O,this.phoneNumberPatternTwilio=V.wL,this.propagateChange=P=>{}}registerOnChange(a){this.propagateChange=a}registerOnTouched(a){}ngOnInit(){this.twilioSmsProviderConfigurationFormGroup=this.fb.group({numberFrom:[null,[t.Validators.required,t.Validators.pattern(V.wL)]],accountSid:[null,t.Validators.required],accountToken:[null,t.Validators.required]}),this.twilioSmsProviderConfigurationFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}setDisabledState(a){this.disabled=a,this.disabled?this.twilioSmsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.twilioSmsProviderConfigurationFormGroup.enable({emitEvent:!1})}writeValue(a){(0,h.f1)(a)&&this.twilioSmsProviderConfigurationFormGroup.patchValue(a,{emitEvent:!1})}updateModel(){let a=null;this.twilioSmsProviderConfigurationFormGroup.valid&&(a=this.twilioSmsProviderConfigurationFormGroup.value,a.type=V.dx.TWILIO),this.propagateChange(a)}static{this.\u0275fac=function(O){return new(O||U)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["tb-twilio-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>U),multi:!0}])],decls:20,vars:9,consts:[[2,"padding-bottom","16px",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["type","tel","required","","matInput","","formControlName","numberFrom",3,"pattern"],[4,"ngIf"],[3,"innerHTML"],[1,"mat-block"],["required","","matInput","","formControlName","accountSid"],["required","","type","password","autocomplete","new-password","matInput","","formControlName","accountToken"],["matSuffix",""]],template:function(O,P){1&O&&(e.\u0275\u0275elementStart(0,"form",0)(1,"mat-form-field",1)(2,"mat-label",2),e.\u0275\u0275text(3,"admin.number-from"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",3),e.\u0275\u0275template(5,z,3,3,"mat-error",4)(6,L,3,3,"mat-error",4),e.\u0275\u0275element(7,"mat-hint",5),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field",6)(10,"mat-label",2),e.\u0275\u0275text(11,"admin.twilio-account-sid"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",7),e.\u0275\u0275template(13,B,3,3,"mat-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-form-field",6)(15,"mat-label",2),e.\u0275\u0275text(16,"admin.twilio-account-token"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",8)(18,"tb-toggle-password",9),e.\u0275\u0275template(19,I,3,3,"mat-error",4),e.\u0275\u0275elementEnd()()),2&O&&(e.\u0275\u0275property("formGroup",P.twilioSmsProviderConfigurationFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("pattern",P.phoneNumberPatternTwilio),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",P.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",P.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(8,7,"admin.phone-number-hint-twilio"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",P.twilioSmsProviderConfigurationFormGroup.get("accountSid").hasError("required")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",P.twilioSmsProviderConfigurationFormGroup.get("accountToken").hasError("required")))},dependencies:[G.NgIf,K.MatInput,H.MatFormField,H.MatLabel,H.MatHint,H.MatError,H.MatSuffix,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.PatternValidator,t.FormGroupDirective,t.FormControlName,k.TranslateDirective,Q.TogglePasswordComponent,k.TranslatePipe],encapsulation:2})}}},79093:(Re,X,n)=>{"use strict";n.d(X,{F:()=>D});var e=n(93953),t=n(69749),c=n(89417),h=n(96955),V=n(80216),S=n(99437),G=n(73028),K=n(96354),H=n(7673),k=n(26700),Q=n(25967),z=n(9310),L=n(345),B=n(73955),I=n(60177),U=n(37441),F=n(29207),a=n(88834),O=n(82765),P=n(99213),A=n(25596),u=n(67575),m=n(14823),p=n(71997),v=n(9454),T=n(85893);function C(w,ee){1&w&&e.\u0275\u0275element(0,"mat-progress-bar",21)}function _(w,ee){1&w&&e.\u0275\u0275element(0,"div",22)}function E(w,ee){1&w&&(e.\u0275\u0275elementStart(0,"mat-checkbox",39),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&w&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.export-credentials")," "))}function f(w,ee){if(1&w&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275element(1,"mat-divider"),e.\u0275\u0275elementStart(2,"div",30)(3,"div",31),e.\u0275\u0275element(4,"tb-entity-type-select",32),e.\u0275\u0275elementStart(5,"div",33),e.\u0275\u0275element(6,"tb-branch-autocomplete",34),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",35),e.\u0275\u0275template(9,E,3,3,"mat-checkbox",36),e.\u0275\u0275elementStart(10,"mat-checkbox",37),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-checkbox",38),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()()()),2&w){const _e=e.\u0275\u0275nextContext().$implicit,ve=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("filterAllowedEntityTypes",!1)("allowedEntityTypes",ve.allowedEntityTypes(_e)),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("emptyPlaceholder",e.\u0275\u0275pipeBind1(7,7,"version-control.default")),e.\u0275\u0275property("selectDefaultBranch",!1),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_e.get("entityType").value===ve.entityTypes.DEVICE),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,9,"version-control.export-attributes")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,11,"version-control.export-relations")," ")}}function g(w,ee){if(1&w){const _e=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23)(1,"mat-expansion-panel",24)(2,"mat-expansion-panel-header")(3,"div",25)(4,"mat-panel-title")(5,"div",25),e.\u0275\u0275element(6,"div",26),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(7,"span",3),e.\u0275\u0275elementStart(8,"button",27),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275listener("click",function(){const Ee=e.\u0275\u0275restoreView(_e).index,$=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView($.removeEntityType(Ee))}),e.\u0275\u0275elementStart(10,"mat-icon"),e.\u0275\u0275text(11,"delete"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(12,f,16,13,"ng-template",28),e.\u0275\u0275elementEnd()()}if(2&w){const _e=ee.$implicit,ve=ee.last,Ee=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pb-2",!ve),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",_e)("expanded",Ee.entityTypesFormGroupExpanded(_e)),e.\u0275\u0275advance(5),e.\u0275\u0275property("innerHTML",Ee.entityTypeText(_e),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(9,6,"action.remove"))}}function y(w,ee){1&w&&(e.\u0275\u0275elementStart(0,"div")(1,"span",40),e.\u0275\u0275text(2,"admin.no-auto-commit-entities-prompt"),e.\u0275\u0275elementEnd()())}function b(w,ee){1&w&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275text(1,"version-control.auto-commit-settings-read-only-hint"),e.\u0275\u0275elementEnd())}class D extends t.H{constructor(ee,_e,ve,Ee,$,be){super(ee),this.store=ee,this.adminService=_e,this.dialogService=ve,this.sanitizer=Ee,this.translate=$,this.fb=be,this.settings=null,this.entityTypes=Q.ck}ngOnInit(){this.autoCommitSettingsForm=this.fb.group({entityTypes:this.fb.array([],[])}),this.adminService.autoCommitSettingsExists().pipe((0,S.W)(()=>(0,H.of)(!1)),(0,G.Z)(ee=>ee?this.adminService.getAutoCommitSettings({ignoreErrors:!0}).pipe((0,S.W)(()=>(0,H.of)(null))):(0,H.of)(null))).subscribe(ee=>{this.settings=ee,this.autoCommitSettingsForm.setControl("entityTypes",this.prepareEntityTypesFormArray(ee),{emitEvent:!1})}),this.isReadOnly=this.adminService.getRepositorySettingsInfo().pipe((0,K.T)(ee=>ee.readOnly))}entityTypesFormGroupArray(){return this.autoCommitSettingsForm.get("entityTypes").controls}entityTypesFormGroupExpanded(ee){return!!ee.expanded}trackByEntityType(ee,_e){return _e}removeEntityType(ee){this.autoCommitSettingsForm.get("entityTypes").removeAt(ee),this.autoCommitSettingsForm.markAsDirty()}addEnabled(){return this.autoCommitSettingsForm.get("entityTypes").length<k.hw.length}addEntityType(){const ee=this.autoCommitSettingsForm.get("entityTypes"),ve=this.allowedEntityTypes();let Ee=null;ve.length&&(Ee=ve[0]);const $=this.createEntityTypeControl(Ee,{branch:null,saveAttributes:!0,saveRelations:!1,saveCredentials:!0});$.expanded=!0,ee.push($),this.autoCommitSettingsForm.updateValueAndValidity(),this.autoCommitSettingsForm.markAsDirty()}removeAll(){this.autoCommitSettingsForm.get("entityTypes").clear(),this.autoCommitSettingsForm.updateValueAndValidity(),this.autoCommitSettingsForm.markAsDirty()}entityTypeText(ee){const _e=ee.get("entityType").value,ve=ee.get("config").value;let $,Ee=_e?this.translate.instant(Q.Mi.get(_e).typePlural):"Undefined";return $=ve.branch?ve.branch:this.translate.instant("version-control.default"),Ee+=` (<small>${this.translate.instant("version-control.auto-commit-to-branch",{branch:$})}</small>)`,this.sanitizer.bypassSecurityTrustHtml(Ee)}allowedEntityTypes(ee){let _e=[...k.hw];const ve=ee?.get("entityType")?.value,$=(this.autoCommitSettingsForm.get("entityTypes").value||[]).map(be=>be.entityType).filter(be=>be);return _e=_e.filter(be=>!$.includes(be)||be===ve),_e}save(){const ee=this.autoCommitSettingsForm.get("entityTypes").value||[],_e={};ee&&ee.length&&ee.forEach(ve=>{_e[ve.entityType]=ve.config}),this.adminService.saveAutoCommitSettings(_e).subscribe(ve=>{this.settings=ve,this.autoCommitSettingsForm.setControl("entityTypes",this.prepareEntityTypesFormArray(ve),{emitEvent:!1}),this.autoCommitSettingsForm.markAsPristine()})}delete(ee){this.dialogService.confirm(this.translate.instant("admin.delete-auto-commit-settings-title"),this.translate.instant("admin.delete-auto-commit-settings-text"),null,this.translate.instant("action.delete")).subscribe(_e=>{_e&&this.adminService.deleteAutoCommitSettings().subscribe(()=>{this.settings=null,this.autoCommitSettingsForm.setControl("entityTypes",this.prepareEntityTypesFormArray(this.settings),{emitEvent:!1}),this.autoCommitSettingsForm.markAsPristine()})})}prepareEntityTypesFormArray(ee){const _e=[];if(ee)for(const ve of Object.keys(ee)){const Ee=ee[ve];_e.push(this.createEntityTypeControl(ve,Ee))}return this.fb.array(_e)}createEntityTypeControl(ee,_e){return this.fb.group({entityType:[ee,[c.Validators.required]],config:this.fb.group({branch:[_e.branch,[]],saveRelations:[_e.saveRelations,[]],saveAttributes:[_e.saveAttributes,[]],saveCredentials:[_e.saveCredentials,[]]})})}static{this.\u0275fac=function(_e){return new(_e||D)(e.\u0275\u0275directiveInject(z.Store),e.\u0275\u0275directiveInject(h.z),e.\u0275\u0275directiveInject(V.o),e.\u0275\u0275directiveInject(L.DomSanitizer),e.\u0275\u0275directiveInject(B.TranslateService),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:D,selectors:[["tb-auto-commit-settings"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:45,vars:38,consts:[["formDirective","ngForm"],["appearance","outlined",1,"auto-commit-settings","settings-card"],["translate","",1,"mat-headline-5"],[1,"flex-1"],["tb-help","autoCommitSettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"ngSubmit","formGroup"],[1,"fields-group",3,"disabled"],["translate","",1,"group-title"],[1,"flex","flex-col"],["class","flex flex-row items-center justify-start",3,"pb-2",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"flex","flex-row",2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["translate",""],["class","tb-hint","translate","",4,"ngIf"],[1,"flex","flex-row","items-center","justify-end","gap-4","xs:flex-col","xs:items-stretch","xs:justify-end"],["mat-raised-button","","color","warn","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[1,"flex","flex-row","items-center","justify-start"],[1,"entity-type-config","flex-1",3,"formGroup","expanded"],[1,"flex","flex-1","flex-row","items-center","justify-start"],[3,"innerHTML"],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["matExpansionPanelContent",""],[1,"entity-type-config-content","flex","flex-col","gap-2"],[1,"flex","flex-col","gt-lg:flex-row","gt-lg:gap-4"],[1,"flex","flex-row","gap-4","xs:flex-col","xs:gap-0"],["showLabel","","formControlName","entityType","required","",3,"filterAllowedEntityTypes","allowedEntityTypes"],["formGroupName","config"],["formControlName","branch",3,"emptyPlaceholder","selectDefaultBranch"],["formGroupName","config",1,"flex","flex-1","flex-row","items-center","justify-start","gap-4","xs:flex-col","xs:items-start","xs:justify-start","xs:gap-0"],["formControlName","saveCredentials",4,"ngIf"],["formControlName","saveAttributes"],["formControlName","saveRelations"],["formControlName","saveCredentials"],["translate","",1,"tb-prompt","flex","items-center","justify-center"],["translate","",1,"tb-hint"]],template:function(_e,ve){if(1&_e){const Ee=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"span",2),e.\u0275\u0275text(5,"admin.auto-commit-settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"span",3)(7,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,C,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275template(10,_,1,0,"div",6),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementStart(12,"mat-card-content",7)(13,"form",8,0),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(Ee),e.\u0275\u0275resetView(ve.save())}),e.\u0275\u0275elementStart(15,"fieldset",9),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275elementStart(18,"legend",10),e.\u0275\u0275text(19,"admin.auto-commit-entities"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",11),e.\u0275\u0275template(21,g,13,8,"div",12)(22,y,3,0,"div",13),e.\u0275\u0275elementStart(23,"div",14)(24,"button",15),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ee),e.\u0275\u0275resetView(ve.addEntityType())}),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"version-control.add-entity-type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(27,"span",3),e.\u0275\u0275elementStart(28,"button",15),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(Ee),e.\u0275\u0275resetView(ve.removeAll())}),e.\u0275\u0275elementStart(29,"span",16),e.\u0275\u0275text(30,"version-control.remove-all"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(31,b,2,0,"div",17),e.\u0275\u0275pipe(32,"async"),e.\u0275\u0275elementStart(33,"div",18)(34,"button",19),e.\u0275\u0275pipe(35,"async"),e.\u0275\u0275pipe(36,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Ee);const be=e.\u0275\u0275reference(14);return e.\u0275\u0275resetView(ve.delete(be))}),e.\u0275\u0275text(37),e.\u0275\u0275pipe(38,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(39,"span",3),e.\u0275\u0275elementStart(40,"button",20),e.\u0275\u0275pipe(41,"async"),e.\u0275\u0275pipe(42,"async"),e.\u0275\u0275text(43),e.\u0275\u0275pipe(44,"translate"),e.\u0275\u0275elementEnd()()()()()()}2&_e&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,16,ve.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(11,18,ve.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",ve.autoCommitSettingsForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(16,20,ve.isLoading$)||e.\u0275\u0275pipeBind1(17,22,ve.isReadOnly)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",ve.entityTypesFormGroupArray())("ngForTrackBy",ve.trackByEntityType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!ve.entityTypesFormGroupArray().length),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!ve.addEnabled()),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!ve.entityTypesFormGroupArray().length),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(32,24,ve.isReadOnly)),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",!ve.settings),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(35,26,ve.isLoading$)||e.\u0275\u0275pipeBind1(36,28,ve.isReadOnly)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(38,30,"action.delete")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(41,32,ve.isLoading$)||e.\u0275\u0275pipeBind1(42,34,ve.isReadOnly)||ve.autoCommitSettingsForm.invalid||!ve.autoCommitSettingsForm.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(44,36,"action.save")," "))},dependencies:[I.NgForOf,I.NgIf,U.HelpComponent,F.EntityTypeSelectComponent,a.MatButton,a.MatIconButton,O.MatCheckbox,P.MatIcon,A.MatCard,A.MatCardContent,A.MatCardHeader,A.MatCardTitle,u.MatProgressBar,m.MatTooltip,p.MatDivider,v.MatExpansionPanel,v.MatExpansionPanelHeader,v.MatExpansionPanelTitle,v.MatExpansionPanelContent,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,c.FormGroupName,B.TranslateDirective,T.m,I.AsyncPipe,B.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-card.auto-commit-settings[_ngcontent-%COMP%]{margin:8px}[_nghost-%COMP%]   .mat-mdc-card.auto-commit-settings[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 16px 8px;margin-bottom:10px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3;width:fit-content}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{display:block;margin-top:16px}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]{box-shadow:none;border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px;height:48px}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .entity-type-config-content[_ngcontent-%COMP%]{padding:0 8px 8px}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .entity-type-config-content[_ngcontent-%COMP%]   tb-branch-autocomplete[_ngcontent-%COMP%]{min-width:200px;max-width:200px;display:block}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config .mat-expansion-panel-body{padding:0}','@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{margin:8px}[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 16px 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3}@media screen and (min-width: 960px) and (max-width: 1279px){[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{width:60%}}']})}}},26754:(Re,X,n)=>{"use strict";n.d(X,{m:()=>g});var e=n(93953),t=n(69749),c=n(89417),h=n(26700),V=n(81554),G=(n(90039),n(97647)),K=n(27997),H=n(9310),k=n(345),Q=n(73955),z=n(60177),L=n(88834),B=n(67575),I=n(59042),U=n(53719),F=n(55911),a=n(82798),O=n(86600),P=n(85893),A=n(20203),u=n(20226);function m(y,b){1&y&&e.\u0275\u0275element(0,"mat-progress-bar",20)}function p(y,b){1&y&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.version-name-required")," "))}function v(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&y){const D=b.$implicit,w=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",D),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,w.syncStrategyTranslations.get(D))," ")}}function T(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",3)(1,"mat-toolbar")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,m,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"form",6)(9,"div",7),e.\u0275\u0275element(10,"tb-branch-autocomplete",8),e.\u0275\u0275elementStart(11,"mat-form-field",9)(12,"mat-label",10),e.\u0275\u0275text(13,"version-control.version-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"input",11),e.\u0275\u0275template(15,p,3,3,"mat-error",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"mat-form-field",12)(17,"mat-label",10),e.\u0275\u0275text(18,"version-control.default-sync-strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"mat-select",13),e.\u0275\u0275template(20,v,3,4,"mat-option",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(21,"mat-hint",15),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275pipe(23,"safe"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"tb-entity-types-version-create",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",17)(26,"button",18),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.cancel())}),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"button",19),e.\u0275\u0275pipe(31,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.export())}),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()()()}if(2&y){const D=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,10,"version-control.create-entities-version")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,12,D.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",D.createVersionFormGroup),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",D.createVersionFormGroup.get("versionName").hasError("required")||D.createVersionFormGroup.get("versionName").hasError("pattern")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",D.syncStrategies),e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind2(23,16,e.\u0275\u0275pipeBind1(22,14,D.syncStrategyHints.get(D.createVersionFormGroup.get("syncStrategy").value)),"html"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(27,19,D.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,21,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(31,23,D.isLoading$)||D.createVersionFormGroup.invalid||!D.createVersionFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,25,"action.create")," ")}}function C(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275element(1,"div",23),e.\u0275\u0275elementEnd()),2&y){const D=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("innerHtml",D.resultMessage,e.\u0275\u0275sanitizeHtml)}}function _(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",24)(1,"button",18),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(D);const ee=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(ee.cancel())}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&y){const D=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,D.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,"action.close")," ")}}function E(y,b){1&y&&(e.\u0275\u0275elementStart(0,"section",25)(1,"div",26)(2,"span",10),e.\u0275\u0275text(3,"version-control.creating-version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-progress-bar",27),e.\u0275\u0275elementEnd()())}function f(y,b){if(1&y&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,C,2,1,"section",2)(2,_,5,6,"div",22),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,E,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&y){let D;const w=e.\u0275\u0275reference(5),ee=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ee.resultMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(D=e.\u0275\u0275pipeBind1(3,3,ee.versionCreateResult$))?null:D.done)||ee.hasError)("ngIfElse",w)}}class g extends t.H{constructor(b,D,w,ee,_e,ve){super(b),this.store=b,this.entitiesVersionControlService=D,this.cd=w,this.sanitizer=ee,this.translate=_e,this.fb=ve,this.syncStrategies=Object.values(h.db),this.syncStrategyTranslations=h.Id,this.syncStrategyHints=h.QV,this.hasError=!1,this.versionCreateResult=null,this.versionCreateBranch=null}ngOnInit(){this.createVersionFormGroup=this.fb.group({branch:[this.branch,[c.Validators.required]],versionName:[null,[c.Validators.required,c.Validators.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],syncStrategy:[h.db.MERGE,c.Validators.required],entityTypes:[(0,h.uZ)(),[]]})}ngOnDestroy(){super.ngOnDestroy(),this.versionCreateResultSubscription&&this.versionCreateResultSubscription.unsubscribe()}cancel(){this.onClose&&this.onClose(this.versionCreateResult,this.versionCreateBranch)}export(){const b={branch:this.createVersionFormGroup.get("branch").value,versionName:this.createVersionFormGroup.get("versionName").value,syncStrategy:this.createVersionFormGroup.get("syncStrategy").value,entityTypes:this.createVersionFormGroup.get("entityTypes").value,type:h.Sk.COMPLEX};this.versionCreateResult$=this.entitiesVersionControlService.saveEntitiesVersion(b,{ignoreErrors:!0}).pipe((0,G.u)()),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition(),this.versionCreateResultSubscription=this.versionCreateResult$.subscribe({next:D=>{let w;w=D.error?D.error:!D.done||D.added||D.modified||D.removed?this.translate.instant("version-control.version-create-result",{added:D.added,modified:D.modified,removed:D.removed}):this.translate.instant("version-control.nothing-to-commit"),this.resultMessage=this.sanitizer.bypassSecurityTrustHtml(w),this.versionCreateResult=D,this.versionCreateBranch=b.branch,this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()},error:D=>{this.hasError=!0,this.resultMessage=this.sanitizer.bypassSecurityTrustHtml((0,K.JG)(D,this.translate).message),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()}})}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(V.k),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(k.DomSanitizer),e.\u0275\u0275directiveInject(Q.TranslateService),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["tb-complex-version-create"]],inputs:{branch:"branch",onClose:"onClose",popoverComponent:"popoverComponent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["progress",""],["class","flex flex-col","style","height: 100%;",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col",2,"height","100%"],[1,"flex-1"],["color","warn","style","z-index: 10; width: 100%; margin-bottom: -4px;","mode","indeterminate",4,"ngIf"],[1,"flex","flex-col",2,"flex","1","padding-top","16px","overflow","auto",3,"formGroup"],[1,"flex","flex-col","gt-sm:flex-row","gt-sm:gap-2"],["required","","formControlName","branch",1,"flex-1"],[1,"mat-block","flex-1"],["translate",""],["required","","matInput","","formControlName","versionName"],[1,"mat-block",2,"margin-bottom","24px"],["required","","formControlName","syncStrategy"],[3,"value",4,"ngFor","ngForOf"],[3,"innerHTML"],["formControlName","entityTypes"],[1,"flex","items-center","justify-end","gap-2",2,"padding-top","16px"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["color","warn","mode","indeterminate",2,"z-index","10","width","100%","margin-bottom","-4px"],[3,"value"],["class","flex items-center justify-end gap-2",4,"ngIf","ngIfElse"],[1,"mat-headline-6","vc-result-message",3,"innerHtml"],[1,"flex","items-center","justify-end","gap-2"],[1,"flex","flex-col","items-center","justify-center"],[1,"mat-headline-6","vc-result-message","progress"],["mode","indeterminate"]],template:function(D,w){1&D&&e.\u0275\u0275template(0,T,34,27,"section",1)(1,f,6,5,"section",2),2&D&&(e.\u0275\u0275property("ngIf",!w.versionCreateResult$),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.versionCreateResult$))},dependencies:[z.NgForOf,z.NgIf,L.MatButton,B.MatProgressBar,I.MatInput,U.MatFormField,U.MatLabel,U.MatHint,U.MatError,F.MatToolbar,a.MatSelect,O.MatOption,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,Q.TranslateDirective,P.m,A.E,z.AsyncPipe,u.SafePipe,Q.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]{max-width:65vw;padding:0 8px;text-align:center;word-wrap:break-word}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:first-child{padding-top:48px}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:nth-last-child(2){padding-bottom:8px}[_nghost-%COMP%]   .vc-result-message.error[_ngcontent-%COMP%]{text-align:start;font-weight:400}[_nghost-%COMP%]   .vc-result-message.progress[_ngcontent-%COMP%]{padding-bottom:32px}']})}}},28374:(Re,X,n)=>{"use strict";n.d(X,{S:()=>E});var e=n(93953),t=n(69749),c=n(26700),h=n(81554),V=n(25967),G=(n(90039),n(97647)),K=n(27997),H=n(9310),k=n(73955),Q=n(345),z=n(89417),L=n(60177),B=n(88834),I=n(67575),U=n(55911),F=n(30450),a=n(86941),O=n(81435);const P=f=>({versionName:f});function A(f,g){1&f&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function u(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",3)(1,"mat-toolbar")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,A,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"form",6),e.\u0275\u0275element(9,"tb-entity-types-version-load",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementStart(12,"mat-slide-toggle",9),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"div",10)(16,"button",11),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.cancel())}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"button",12),e.\u0275\u0275pipe(21,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.restore())}),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd()()()}if(2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,10,"version-control.restore-entities-from-version",e.\u0275\u0275pureFunction1(27,P,y.versionName))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,13,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",y.loadVersionFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("tb-hint-tooltip-icon",e.\u0275\u0275pipeBind1(11,15,"version-control.rollback-on-error-hint")),e.\u0275\u0275property("formGroup",y.loadVersionFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,17,"version-control.rollback-on-error")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(17,19,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,21,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(21,23,y.isLoading$)||y.loadVersionFormGroup.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(23,25,"action.restore")," ")}}function m(f,g){1&f&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.no-entities-restored")," "))}function p(f,g){if(1&f&&e.\u0275\u0275element(0,"div",19),2&f){const y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("innerHTML",y.errorMessage,e.\u0275\u0275sanitizeHtml)}}function v(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(b.entityTypeLoadResultMessage(y))}}function T(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20)(1,"button",11),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(D.cancel())}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&f){const y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,"action.close")," ")}}function C(f,g){1&f&&(e.\u0275\u0275elementStart(0,"section",21)(1,"div",22)(2,"span",23),e.\u0275\u0275text(3,"version-control.restoring-entities-from-version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-progress-bar",24),e.\u0275\u0275elementEnd()())}function _(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,m,3,3,"div",14),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,p,1,1,"div",15)(4,v,2,1,"div",16)(5,T,5,6,"div",17),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275template(7,C,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&f){let y,b;const D=e.\u0275\u0275reference(8),w=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(y=e.\u0275\u0275pipeBind1(2,5,w.versionLoadResult$))?null:y.done)&&!(null!=w.entityTypeLoadResults&&w.entityTypeLoadResults.length)&&!w.errorMessage),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",w.errorMessage),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",w.entityTypeLoadResults),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(b=e.\u0275\u0275pipeBind1(6,7,w.versionLoadResult$))?null:b.done)||w.hasError)("ngIfElse",D)}}class E extends t.H{constructor(g,y,b,D,w,ee){super(g),this.store=g,this.entitiesVersionControlService=y,this.cd=b,this.translate=D,this.sanitizer=w,this.fb=ee,this.versionLoadResult=null,this.entityTypeLoadResults=null,this.hasError=!1}ngOnInit(){this.loadVersionFormGroup=this.fb.group({entityTypes:[(0,c._1)(),[]],rollbackOnError:[!0]})}ngOnDestroy(){super.ngOnDestroy(),this.versionLoadResultSubscription&&this.versionLoadResultSubscription.unsubscribe()}entityTypeLoadResultMessage(g){const y=g.entityType;let b=this.translate.instant(V.Mi.get(y).typePlural)+": ";const D=[];return g.created&&D.push(this.translate.instant("version-control.created",{created:g.created})),g.updated&&D.push(this.translate.instant("version-control.updated",{updated:g.updated})),g.deleted&&D.push(this.translate.instant("version-control.deleted",{deleted:g.deleted})),b+=D.join(", ")+".",b}cancel(){this.onClose&&this.onClose(this.versionLoadResult)}restore(){const g={versionId:this.versionId,entityTypes:this.loadVersionFormGroup.get("entityTypes").value,rollbackOnError:this.loadVersionFormGroup.get("rollbackOnError").value,type:c.k1.ENTITY_TYPE};this.versionLoadResult$=this.entitiesVersionControlService.loadEntitiesVersion(g,{ignoreErrors:!0}).pipe((0,G.u)()),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition(),this.versionLoadResultSubscription=this.versionLoadResult$.subscribe(y=>{this.versionLoadResult=y,this.entityTypeLoadResults=(y.result||[]).filter(b=>b.created||b.updated||b.deleted),y.error&&(this.errorMessage=this.entitiesVersionControlService.entityLoadErrorToMessage(y.error)),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()},y=>{this.hasError=!0,this.errorMessage=this.sanitizer.bypassSecurityTrustHtml((0,K.JG)(y,this.translate).message),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()})}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(h.k),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(k.TranslateService),e.\u0275\u0275directiveInject(Q.DomSanitizer),e.\u0275\u0275directiveInject(z.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-complex-version-load"]],inputs:{versionName:"versionName",versionId:"versionId",onClose:"onClose",popoverComponent:"popoverComponent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["progress",""],["class","flex flex-col","style","height: 100%;",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col",2,"height","100%"],[1,"flex-1"],["color","warn","style","z-index: 10; width: 100%; margin-bottom: -4px;","mode","indeterminate",4,"ngIf"],[1,"flex","flex-col",2,"flex","1","padding","16px 0","overflow-y","auto","overflow-x","hidden",3,"formGroup"],["formControlName","entityTypes"],[3,"tb-hint-tooltip-icon","formGroup"],["formControlName","rollbackOnError"],[1,"flex","items-center","justify-end","gap-2",2,"padding-top","16px"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["color","warn","mode","indeterminate",2,"z-index","10","width","100%","margin-bottom","-4px"],["class","mat-headline-6 vc-result-message",4,"ngIf"],["class","mat-headline-6 vc-result-message error",3,"innerHTML",4,"ngIf"],["class","mat-headline-6 vc-result-message",4,"ngFor","ngForOf"],["class","flex items-center justify-end gap-2",4,"ngIf","ngIfElse"],[1,"mat-headline-6","vc-result-message"],[1,"mat-headline-6","vc-result-message","error",3,"innerHTML"],[1,"flex","items-center","justify-end","gap-2"],[1,"flex","flex-col","items-center","justify-center"],[1,"mat-headline-6","vc-result-message","progress"],["translate",""],["mode","indeterminate"]],template:function(y,b){1&y&&e.\u0275\u0275template(0,u,24,29,"section",1)(1,_,9,9,"section",2),2&y&&(e.\u0275\u0275property("ngIf",!b.versionLoadResult$),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.versionLoadResult$))},dependencies:[L.NgForOf,L.NgIf,B.MatButton,I.MatProgressBar,U.MatToolbar,F.MatSlideToggle,z.\u0275NgNoValidate,z.NgControlStatus,z.NgControlStatusGroup,z.FormGroupDirective,z.FormControlName,k.TranslateDirective,a.HintTooltipIconComponent,O.m,L.AsyncPipe,k.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]{max-width:65vw;padding:0 8px;text-align:center;word-wrap:break-word}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:first-child{padding-top:48px}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:nth-last-child(2){padding-bottom:8px}[_nghost-%COMP%]   .vc-result-message.error[_ngcontent-%COMP%]{text-align:start;font-weight:400}[_nghost-%COMP%]   .vc-result-message.progress[_ngcontent-%COMP%]{padding-bottom:32px}']})}}},20203:(Re,X,n)=>{"use strict";n.d(X,{E:()=>E});var e=n(93953),t=n(89417),c=n(69749),h=n(26700),V=n(25967),S=n(27997),G=n(9310),K=n(73955),H=n(60177),k=n(44216),Q=n(29207),z=n(88834),L=n(82765),B=n(99213),I=n(53719),U=n(82798),F=n(86600),a=n(14823),O=n(71997),P=n(30450),A=n(9454);function u(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext().index,w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.removeEntityType(D))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"delete"),e.\u0275\u0275elementEnd()()}2&f&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function m(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"mat-option",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f){const y=g.$implicit,b=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("value",y),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,b.syncStrategyTranslations.get(y))," ")}}function p(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-checkbox",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.export-credentials")," "))}function v(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-checkbox",30),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.export-attributes")," "))}function T(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-checkbox",31),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.export-relations")," "))}function C(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"mat-expansion-panel",10),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.loading=!1)}),e.\u0275\u0275elementStart(2,"mat-expansion-panel-header")(3,"div",11)(4,"mat-panel-title")(5,"div",11)(6,"div"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(8,"span",8),e.\u0275\u0275template(9,u,4,3,"button",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",13),e.\u0275\u0275element(11,"mat-divider"),e.\u0275\u0275elementStart(12,"div",14),e.\u0275\u0275element(13,"tb-entity-type-select",15),e.\u0275\u0275elementStart(14,"div",16)(15,"mat-form-field",17)(16,"mat-label",7),e.\u0275\u0275text(17,"version-control.sync-strategy"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-select",18)(19,"mat-option",19),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,m,3,4,"mat-option",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",21),e.\u0275\u0275template(24,p,3,3,"mat-checkbox",22)(25,v,3,3,"mat-checkbox",23)(26,T,3,3,"mat-checkbox",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",25)(28,"mat-slide-toggle",26),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(31,"tb-entity-list",27),e.\u0275\u0275elementEnd()()()()}if(2&f){const y=g.$implicit,b=g.last,D=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pb-2",!b),e.\u0275\u0275advance(),e.\u0275\u0275classProp("load",D.loading),e.\u0275\u0275property("formGroup",y)("expanded",D.entityTypesFormGroupExpanded(y)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(D.entityTypeText(y)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!D.disabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("filterAllowedEntityTypes",!1)("allowedEntityTypes",D.allowedEntityTypes(y)),e.\u0275\u0275advance(6),e.\u0275\u0275property("value","default"),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,20,"version-control.default")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",D.syncStrategies),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",y.get("entityType").value===D.entityTypes.DEVICE),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!D.entityTypesWithoutRelatedData.has(y.get("entityType").value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!D.entityTypesWithoutRelatedData.has(y.get("entityType").value)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(30,22,"version-control.all-entities")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",y.get("config").get("allEntities").value),e.\u0275\u0275property("entityType",y.get("entityType").value)}}function _(f,g){1&f&&(e.\u0275\u0275elementStart(0,"div")(1,"span",32),e.\u0275\u0275text(2,"version-control.no-entities-to-export-prompt"),e.\u0275\u0275elementEnd()())}class E extends c.H{constructor(g,y,b){super(g),this.store=g,this.translate=y,this.fb=b,this.propagateChange=null,this.syncStrategies=Object.values(h.db),this.syncStrategyTranslations=h.Id,this.entityTypes=V.ck,this.entityTypesWithoutRelatedData=h.WW,this.loading=!0}ngOnInit(){this.entityTypesVersionCreateFormGroup=this.fb.group({entityTypes:this.fb.array([],[])}),this.entityTypesVersionCreateFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(g){this.propagateChange=g}registerOnTouched(g){}setDisabledState(g){this.disabled=g,g?this.entityTypesVersionCreateFormGroup.disable({emitEvent:!1}):(this.entityTypesVersionCreateFormGroup.enable({emitEvent:!1}),this.entityTypesVersionCreateFormGroup.get("entityTypes").controls.forEach(y=>this.updateEntityTypeValidators(y)))}writeValue(g){this.modelValue=g,this.entityTypesVersionCreateFormGroup.setControl("entityTypes",this.prepareEntityTypesFormArray(g),{emitEvent:!1})}validate(g){return this.entityTypesVersionCreateFormGroup.valid&&this.entityTypesFormGroupArray().length?null:{entityTypes:{valid:!1}}}prepareEntityTypesFormArray(g){const y=[];if(g)for(const b of Object.keys(g)){const D=g[b];y.push(this.createEntityTypeControl(b,D))}return this.fb.array(y)}createEntityTypeControl(g,y){const b=this.fb.group({entityType:[g,[t.Validators.required]],config:this.fb.group({syncStrategy:[null===y.syncStrategy?"default":y.syncStrategy,[]],saveRelations:[y.saveRelations,[]],saveAttributes:[y.saveAttributes,[]],saveCredentials:[y.saveCredentials,[]],allEntities:[y.allEntities,[]],entityIds:[y.entityIds,[t.Validators.required]]})});return this.updateEntityTypeValidators(b),b.get("config.allEntities").valueChanges.subscribe(()=>{this.updateEntityTypeValidators(b)}),b}updateEntityTypeValidators(g){g.get("config").get("allEntities").value?g.get("config").get("entityIds").disable({emitEvent:!1}):g.get("config").get("entityIds").enable({emitEvent:!1}),g.get("config").get("entityIds").updateValueAndValidity({emitEvent:!1})}entityTypesFormGroupArray(){return this.entityTypesVersionCreateFormGroup.get("entityTypes").controls}entityTypesFormGroupExpanded(g){return!!g.expanded}trackByEntityType(g,y){return y}removeEntityType(g){this.entityTypesVersionCreateFormGroup.get("entityTypes").removeAt(g)}addEnabled(){return this.entityTypesVersionCreateFormGroup.get("entityTypes").length<h.hw.length}addEntityType(){const g=this.entityTypesVersionCreateFormGroup.get("entityTypes"),b=this.allowedEntityTypes();let D=null;b.length&&(D=b[0]);const w=this.createEntityTypeControl(D,{syncStrategy:null,saveAttributes:!0,saveRelations:!0,saveCredentials:!0,allEntities:!0,entityIds:[]});w.expanded=!0,g.push(w),this.entityTypesVersionCreateFormGroup.updateValueAndValidity()}removeAll(){this.entityTypesVersionCreateFormGroup.get("entityTypes").clear(),this.entityTypesVersionCreateFormGroup.updateValueAndValidity()}entityTypeText(g){const y=g.get("entityType").value,b=g.get("config").value;let D=b?.entityIds?.length;return(0,S.f1)(D)||(D=0),y?this.translate.instant(b?.allEntities?V.Mi.get(y).typePlural:V.Mi.get(y).list,{count:D}):"Undefined"}allowedEntityTypes(g){let y=[...h.hw];const b=g?.get("entityType")?.value,w=(this.entityTypesVersionCreateFormGroup.get("entityTypes").value||[]).map(ee=>ee.entityType).filter(ee=>ee);return y=y.filter(ee=>!w.includes(ee)||ee===b),y}updateModel(){const g=this.entityTypesVersionCreateFormGroup.get("entityTypes").value||[];let y=null;g&&g.length&&(y={},g.forEach(b=>{y[b.entityType]=b.config,"default"===y[b.entityType].syncStrategy&&(y[b.entityType].syncStrategy=null)})),this.modelValue=y,this.propagateChange(this.modelValue)}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(G.Store),e.\u0275\u0275directiveInject(K.TranslateService),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-entity-types-version-create"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>E),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>E),multi:!0}]),e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:6,consts:[[1,"fields-group","flex","flex-col",3,"formGroup"],["translate","",1,"group-title"],[1,"flex","flex-col",2,"flex","1","overflow","auto"],["class","flex flex-row items-center justify-start",3,"pb-2",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"flex","flex-row",2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["translate",""],[1,"flex-1"],[1,"flex","flex-row","items-center","justify-start"],[1,"entity-type-config","flex-1",3,"opened","formGroup","expanded"],[1,"flex","flex-1","flex-row","items-center","justify-start"],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"entity-type-config-content","flex","flex-col","gap-2"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-4"],["showLabel","","formControlName","entityType","required","",3,"filterAllowedEntityTypes","allowedEntityTypes"],["formGroupName","config",1,"flex","flex-1","flex-row","xs:flex-col","gt-xs:gap-4"],[1,"mat-block","flex-1"],["formControlName","syncStrategy"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-1","flex-col"],["formControlName","saveCredentials",4,"ngIf"],["formControlName","saveAttributes",4,"ngIf"],["formControlName","saveRelations",4,"ngIf"],["formGroupName","config",1,"flex","flex-row","xs:flex-col","gt-xs:min-h-19","gt-xs:items-center","gt-xs:justify-start","gt-xs:gap-4"],["formControlName","allEntities"],["required","","formControlName","entityIds",1,"flex-1",3,"entityType"],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["formControlName","saveCredentials"],["formControlName","saveAttributes"],["formControlName","saveRelations"],["translate","",1,"tb-prompt","flex","items-center","justify-center"]],template:function(y,b){1&y&&(e.\u0275\u0275elementStart(0,"fieldset",0)(1,"legend",1),e.\u0275\u0275text(2,"version-control.entities-to-export"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275template(4,C,32,24,"div",3)(5,_,3,0,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5)(7,"button",6),e.\u0275\u0275listener("click",function(){return b.addEntityType()}),e.\u0275\u0275elementStart(8,"span",7),e.\u0275\u0275text(9,"version-control.add-entity-type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"span",8),e.\u0275\u0275elementStart(11,"button",6),e.\u0275\u0275listener("click",function(){return b.removeAll()}),e.\u0275\u0275elementStart(12,"span",7),e.\u0275\u0275text(13,"version-control.remove-all"),e.\u0275\u0275elementEnd()()()()),2&y&&(e.\u0275\u0275property("formGroup",b.entityTypesVersionCreateFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",b.entityTypesFormGroupArray())("ngForTrackBy",b.trackByEntityType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!b.entityTypesFormGroupArray().length),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!b.addEnabled()),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!b.entityTypesFormGroupArray().length))},dependencies:[H.NgForOf,H.NgIf,k.EntityListComponent,Q.EntityTypeSelectComponent,z.MatButton,z.MatIconButton,L.MatCheckbox,B.MatIcon,I.MatFormField,I.MatLabel,U.MatSelect,F.MatOption,a.MatTooltip,O.MatDivider,P.MatSlideToggle,A.MatExpansionPanel,A.MatExpansionPanelHeader,A.MatExpansionPanelTitle,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,K.TranslateDirective,K.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{min-height:200px;min-width:300px}@media screen and (min-width: 600px){[_nghost-%COMP%]{min-width:550px}}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{height:100%;padding:0 16px 8px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3;width:fit-content}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{display:block;margin-top:16px}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]{box-shadow:none;border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px;height:48px}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .entity-type-config-content[_ngcontent-%COMP%]{padding:0 8px 8px}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config.load .mat-expansion-panel-content{height:0;visibility:hidden}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config .entity-type-config-content .mat-mdc-checkbox label{white-space:nowrap}']})}}},81435:(Re,X,n)=>{"use strict";n.d(X,{m:()=>v});var e=n(93953),t=n(89417),c=n(69749),h=n(26700),V=n(25967),S=n(42319),G=n(97030),K=n(9310),H=n(73955),k=n(60177),Q=n(29207),z=n(88834),L=n(82765),B=n(99213),I=n(14823),U=n(71997),F=n(9454),a=n(42415);function O(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",24),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext().index,g=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(g.removeEntityType(f))}),e.\u0275\u0275elementStart(2,"mat-icon"),e.\u0275\u0275text(3,"delete"),e.\u0275\u0275elementEnd()()}2&T&&e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,1,"action.remove"))}function P(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-checkbox",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-credentials")," "))}function A(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-checkbox",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-attributes")," "))}function u(T,C){1&T&&(e.\u0275\u0275elementStart(0,"mat-checkbox",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-relations")," "))}function m(T,C){if(1&T){const _=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"mat-expansion-panel",11),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(_);const f=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(f.loading=!1)}),e.\u0275\u0275elementStart(2,"mat-expansion-panel-header")(3,"div",12)(4,"mat-panel-title")(5,"div",12)(6,"div"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(8,"span",9),e.\u0275\u0275template(9,O,4,3,"button",13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",14),e.\u0275\u0275element(11,"mat-divider"),e.\u0275\u0275elementStart(12,"div",15),e.\u0275\u0275element(13,"tb-entity-type-select",16),e.\u0275\u0275elementStart(14,"div",17)(15,"div",18)(16,"mat-checkbox",19,0),e.\u0275\u0275listener("change",function(){const f=e.\u0275\u0275restoreView(_).$implicit,g=e.\u0275\u0275reference(17),y=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(y.onRemoveOtherEntities(g,f))}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-checkbox",20),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",18),e.\u0275\u0275template(24,P,3,3,"mat-checkbox",21)(25,A,3,3,"mat-checkbox",22)(26,u,3,3,"mat-checkbox",23),e.\u0275\u0275elementEnd()()()()()()}if(2&T){const _=C.$implicit,E=C.last,f=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pb-2",!E),e.\u0275\u0275advance(),e.\u0275\u0275classProp("load",f.loading),e.\u0275\u0275property("formGroup",_)("expanded",f.entityTypesFormGroupExpanded(_)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(f.entityTypeText(_)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!f.disabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("filterAllowedEntityTypes",!1)("allowedEntityTypes",f.allowedEntityTypes(_)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,15,"version-control.remove-other-entities")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,17,"version-control.find-existing-entity-by-name")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",_.get("entityType").value===f.entityTypes.DEVICE),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!f.entityTypesWithoutRelatedData.has(_.get("entityType").value)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!f.entityTypesWithoutRelatedData.has(_.get("entityType").value))}}function p(T,C){1&T&&(e.\u0275\u0275elementStart(0,"div")(1,"span",28),e.\u0275\u0275text(2,"version-control.no-entities-to-restore-prompt"),e.\u0275\u0275elementEnd()())}class v extends c.H{constructor(C,_,E,f,g,y){super(C),this.store=C,this.translate=_,this.popoverService=E,this.renderer=f,this.viewContainerRef=g,this.fb=y,this.propagateChange=null,this.entityTypes=V.ck,this.entityTypesWithoutRelatedData=h.WW,this.loading=!0}ngOnInit(){this.entityTypesVersionLoadFormGroup=this.fb.group({entityTypes:this.fb.array([],[])}),this.entityTypesVersionLoadFormGroup.valueChanges.subscribe(()=>{this.updateModel()})}registerOnChange(C){this.propagateChange=C}registerOnTouched(C){}setDisabledState(C){this.disabled=C,C?this.entityTypesVersionLoadFormGroup.disable({emitEvent:!1}):this.entityTypesVersionLoadFormGroup.enable({emitEvent:!1})}writeValue(C){this.modelValue=C,this.entityTypesVersionLoadFormGroup.setControl("entityTypes",this.prepareEntityTypesFormArray(C),{emitEvent:!1})}validate(C){return this.entityTypesVersionLoadFormGroup.valid&&this.entityTypesFormGroupArray().length?null:{entityTypes:{valid:!1}}}prepareEntityTypesFormArray(C){const _=[];if(C)for(const E of Object.keys(C)){const f=C[E];_.push(this.createEntityTypeControl(E,f))}return this.fb.array(_)}createEntityTypeControl(C,_){return this.fb.group({entityType:[C,[t.Validators.required]],config:this.fb.group({loadRelations:[_.loadRelations,[]],loadAttributes:[_.loadAttributes,[]],loadCredentials:[_.loadCredentials,[]],removeOtherEntities:[_.removeOtherEntities,[]],findExistingEntityByName:[_.findExistingEntityByName,[]]})})}entityTypesFormGroupArray(){return this.entityTypesVersionLoadFormGroup.get("entityTypes").controls}entityTypesFormGroupExpanded(C){return!!C.expanded}trackByEntityType(C,_){return _}removeEntityType(C){this.entityTypesVersionLoadFormGroup.get("entityTypes").removeAt(C)}addEnabled(){return this.entityTypesVersionLoadFormGroup.get("entityTypes").length<h.hw.length}addEntityType(){const C=this.entityTypesVersionLoadFormGroup.get("entityTypes"),E=this.allowedEntityTypes();let f=null;E.length&&(f=E[0]);const g=this.createEntityTypeControl(f,{loadAttributes:!0,loadRelations:!0,loadCredentials:!0,removeOtherEntities:!1,findExistingEntityByName:!0});g.expanded=!0,C.push(g),this.entityTypesVersionLoadFormGroup.updateValueAndValidity()}removeAll(){this.entityTypesVersionLoadFormGroup.get("entityTypes").clear(),this.entityTypesVersionLoadFormGroup.updateValueAndValidity()}entityTypeText(C){const _=C.get("entityType").value;return _?this.translate.instant(V.Mi.get(_).typePlural):"Undefined"}allowedEntityTypes(C){let _=[...h.hw];const E=C?.get("entityType")?.value,g=(this.entityTypesVersionLoadFormGroup.get("entityTypes").value||[]).map(y=>y.entityType).filter(y=>y);return _=_.filter(y=>!g.includes(y)||y===E),_}onRemoveOtherEntities(C,_){if(_.get("config.removeOtherEntities").value){_.get("config").get("removeOtherEntities").patchValue(!1,{emitEvent:!0});const f=a(".mdc-checkbox__background",C._elementRef.nativeElement)[0];if(this.popoverService.hasPopover(f))this.popoverService.hidePopover(f);else{const g=this.popoverService.displayPopover(f,this.renderer,this.viewContainerRef,G.Z,"bottom",!0,null,{onClose:y=>{g.hide(),y&&_.get("config").get("removeOtherEntities").patchValue(!0,{emitEvent:!0})}},{},{},{},!1)}}}updateModel(){const C=this.entityTypesVersionLoadFormGroup.get("entityTypes").value||[];let _=null;C&&C.length&&(_={},C.forEach(E=>{_[E.entityType]=E.config})),this.modelValue=_,this.propagateChange(this.modelValue)}static{this.\u0275fac=function(_){return new(_||v)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(H.TranslateService),e.\u0275\u0275directiveInject(S.TbPopoverService),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(t.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["tb-entity-types-version-load"]],inputs:{disabled:"disabled"},features:[e.\u0275\u0275ProvidersFeature([{provide:t.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>v),multi:!0},{provide:t.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>v),multi:!0}]),e.\u0275\u0275InheritDefinitionFeature],decls:14,vars:6,consts:[["removeOtherEntitiesCheckbox",""],[1,"fields-group","flex","flex-col",3,"formGroup"],["translate","",1,"group-title"],[1,"flex","flex-col",2,"flex","1","overflow","auto"],["class","flex flex-row items-center justify-start",3,"pb-2",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"flex","flex-row",2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["translate",""],[1,"flex-1"],[1,"flex","flex-row","items-center","justify-start"],[1,"entity-type-config","flex-1",3,"opened","formGroup","expanded"],[1,"flex","flex-1","flex-row","items-center","justify-start"],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"entity-type-config-content","flex","flex-col","gap-2"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-8"],["showLabel","","formControlName","entityType","required","",1,"flex-1",3,"filterAllowedEntityTypes","allowedEntityTypes"],["formGroupName","config",1,"flex","flex-1","flex-row","xs:flex-col","xs:gap-2","gt-xs:gap-4"],[1,"flex","flex-1","flex-col"],["formControlName","removeOtherEntities",3,"change"],["formControlName","findExistingEntityByName"],["formControlName","loadCredentials",4,"ngIf"],["formControlName","loadAttributes",4,"ngIf"],["formControlName","loadRelations",4,"ngIf"],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["formControlName","loadCredentials"],["formControlName","loadAttributes"],["formControlName","loadRelations"],["translate","",1,"tb-prompt","flex","items-center","justify-center"]],template:function(_,E){1&_&&(e.\u0275\u0275elementStart(0,"fieldset",1)(1,"legend",2),e.\u0275\u0275text(2,"version-control.entities-to-restore"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275template(4,m,27,19,"div",4)(5,p,3,0,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",6)(7,"button",7),e.\u0275\u0275listener("click",function(){return E.addEntityType()}),e.\u0275\u0275elementStart(8,"span",8),e.\u0275\u0275text(9,"version-control.add-entity-type"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(10,"span",9),e.\u0275\u0275elementStart(11,"button",7),e.\u0275\u0275listener("click",function(){return E.removeAll()}),e.\u0275\u0275elementStart(12,"span",8),e.\u0275\u0275text(13,"version-control.remove-all"),e.\u0275\u0275elementEnd()()()()),2&_&&(e.\u0275\u0275property("formGroup",E.entityTypesVersionLoadFormGroup),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",E.entityTypesFormGroupArray())("ngForTrackBy",E.trackByEntityType),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!E.entityTypesFormGroupArray().length),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!E.addEnabled()),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!E.entityTypesFormGroupArray().length))},dependencies:[k.NgForOf,k.NgIf,Q.EntityTypeSelectComponent,z.MatButton,z.MatIconButton,L.MatCheckbox,B.MatIcon,I.MatTooltip,U.MatDivider,F.MatExpansionPanel,F.MatExpansionPanelHeader,F.MatExpansionPanelTitle,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,t.FormGroupName,H.TranslateDirective,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{min-height:200px;min-width:300px}@media screen and (min-width: 600px){[_nghost-%COMP%]{min-width:550px}}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{height:100%;padding:0 16px 8px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3;width:fit-content}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{display:block;margin-top:16px}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]{box-shadow:none;border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px;height:48px}[_nghost-%COMP%]   mat-expansion-panel.entity-type-config[_ngcontent-%COMP%]   .entity-type-config-content[_ngcontent-%COMP%]{padding:0 8px 8px}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config.load .mat-expansion-panel-content{height:0;visibility:hidden}[_nghost-%COMP%]     .mat-expansion-panel.entity-type-config .entity-type-config-content .mat-mdc-checkbox label{white-space:nowrap}']})}}},1375:(Re,X,n)=>{"use strict";n.d(X,{B:()=>E});var e=n(93953),t=n(69749),c=n(89417),h=n(26700),V=n(81554),S=n(7673),G=n(25967),H=(n(90039),n(97647)),k=n(27997),Q=n(9310),z=n(73955),L=n(60177),B=n(88834),I=n(82765),U=n(67575),F=n(59042),a=n(53719),O=n(55911),P=n(85893);function A(f,g){1&f&&e.\u0275\u0275element(0,"mat-progress-bar",17)}function u(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.version-name-required")," "))}function m(f,g){1&f&&(e.\u0275\u0275elementStart(0,"mat-checkbox",18),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.export-credentials")," "))}function p(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section")(1,"mat-toolbar")(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,A,1,0,"mat-progress-bar",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"form",4)(9,"fieldset",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",6),e.\u0275\u0275element(12,"tb-branch-autocomplete",7),e.\u0275\u0275elementStart(13,"mat-form-field",8)(14,"mat-label",9),e.\u0275\u0275text(15,"version-control.version-name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"input",10),e.\u0275\u0275template(17,u,3,3,"mat-error",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,m,3,3,"mat-checkbox",11),e.\u0275\u0275elementStart(19,"mat-checkbox",12),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-checkbox",13),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(25,"div",14)(26,"button",15),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.cancel())}),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"button",16),e.\u0275\u0275pipe(31,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.export())}),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()()()}if(2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,12,"version-control.create-entity-version")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,14,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",y.createVersionFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,16,y.isLoading$)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",y.createVersionFormGroup.get("versionName").hasError("required")||y.createVersionFormGroup.get("versionName").hasError("pattern")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.entityId.entityType===y.entityTypes.DEVICE),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,18,"version-control.export-attributes")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,20,"version-control.export-relations")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(27,22,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,24,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(31,26,y.isLoading$)||y.createVersionFormGroup.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,28,"action.create")," ")}}function v(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section")(1,"div",20),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",14)(4,"button",15),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(D.cancel())}),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()()()}if(2&f){const y=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(y.resultMessage),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(5,3,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,5,"action.close")," ")}}function T(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,v,8,7,"section",1),e.\u0275\u0275elementEnd()),2&f){const y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.resultMessage)}}function C(f,g){1&f&&(e.\u0275\u0275elementStart(0,"section",21)(1,"div",22)(2,"span",9),e.\u0275\u0275text(3,"version-control.creating-version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-progress-bar",23),e.\u0275\u0275elementEnd()())}function _(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,T,2,1,"section",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,C,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&f){let y;const b=e.\u0275\u0275reference(4),D=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(y=e.\u0275\u0275pipeBind1(2,2,D.versionCreateResult$))?null:y.done)||D.resultMessage)("ngIfElse",b)}}class E extends t.H{constructor(g,y,b,D,w){super(g),this.store=g,this.entitiesVersionControlService=y,this.cd=b,this.translate=D,this.fb=w,this.entityTypes=G.ck}ngOnInit(){this.createVersionFormGroup=this.fb.group({branch:[this.branch,[c.Validators.required]],versionName:[this.translate.instant("version-control.default-create-entity-version-name",{entityName:this.entityName}),[c.Validators.required,c.Validators.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],saveRelations:[!1,[]],saveAttributes:[!0,[]],saveCredentials:[!0,[]]})}ngOnDestroy(){super.ngOnDestroy(),this.versionCreateResultSubscription&&this.versionCreateResultSubscription.unsubscribe()}cancel(){this.onClose&&this.onClose(null,null)}export(){(this.onBeforeCreateVersion?this.onBeforeCreateVersion():(0,S.of)(null)).subscribe(()=>{const y={entityId:this.entityId,branch:this.createVersionFormGroup.get("branch").value,versionName:this.createVersionFormGroup.get("versionName").value,config:{saveRelations:this.createVersionFormGroup.get("saveRelations").value,saveAttributes:this.createVersionFormGroup.get("saveAttributes").value,saveCredentials:this.entityId.entityType===G.ck.DEVICE&&this.createVersionFormGroup.get("saveCredentials").value},type:h.Sk.SINGLE_ENTITY};this.versionCreateResult$=this.entitiesVersionControlService.saveEntitiesVersion(y,{ignoreErrors:!0}).pipe((0,H.u)()),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition(),this.versionCreateResultSubscription=this.versionCreateResult$.subscribe(b=>{b.done&&(!b.added&&!b.modified||b.error?(this.resultMessage=b.error?b.error:this.translate.instant("version-control.nothing-to-commit"),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()):this.onClose&&this.onClose(b,y.branch))},b=>{this.resultMessage=(0,k.JG)(b,this.translate).message,this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()})})}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(Q.Store),e.\u0275\u0275directiveInject(V.k),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(z.TranslateService),e.\u0275\u0275directiveInject(c.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-entity-version-create"]],inputs:{branch:"branch",entityId:"entityId",entityName:"entityName",onClose:"onClose",onBeforeCreateVersion:"onBeforeCreateVersion",popoverComponent:"popoverComponent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["progress",""],[4,"ngIf"],[1,"flex-1"],["color","warn","style","z-index: 10; width: 100%; margin-bottom: -4px;","mode","indeterminate",4,"ngIf"],[2,"padding-top","16px",3,"formGroup"],[3,"disabled"],[1,"flex","flex-1","flex-col"],["required","","formControlName","branch"],[1,"mat-block","flex-1"],["translate",""],["required","","matInput","","formControlName","versionName"],["formControlName","saveCredentials","style","margin-bottom: 16px;",4,"ngIf"],["formControlName","saveAttributes",2,"margin-bottom","16px"],["formControlName","saveRelations",2,"margin-bottom","16px"],[1,"flex","items-center","justify-end","gap-2"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["color","warn","mode","indeterminate",2,"z-index","10","width","100%","margin-bottom","-4px"],["formControlName","saveCredentials",2,"margin-bottom","16px"],[4,"ngIf","ngIfElse"],[1,"mat-headline-6","vc-result-message"],[1,"flex","flex-col","items-center","justify-center"],[1,"mat-headline-6","vc-result-message","progress"],["mode","indeterminate"]],template:function(y,b){1&y&&e.\u0275\u0275template(0,p,34,30,"section",1)(1,_,5,4,"section",1),2&y&&(e.\u0275\u0275property("ngIf",!b.versionCreateResult$),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.versionCreateResult$))},dependencies:[L.NgIf,B.MatButton,I.MatCheckbox,U.MatProgressBar,F.MatInput,a.MatFormField,a.MatLabel,a.MatError,O.MatToolbar,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,z.TranslateDirective,P.m,L.AsyncPipe,z.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]{max-width:65vw;padding:0 8px;text-align:center;word-wrap:break-word}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:first-child{padding-top:48px}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:nth-last-child(2){padding-bottom:8px}[_nghost-%COMP%]   .vc-result-message.error[_ngcontent-%COMP%]{text-align:start;font-weight:400}[_nghost-%COMP%]   .vc-result-message.progress[_ngcontent-%COMP%]{padding-bottom:32px}']})}}},96964:(Re,X,n)=>{"use strict";n.d(X,{o:()=>E});var e=n(93953),t=n(69749),c=n(81554),h=n(3408),S=(n(90039),n(26700)),G=n(42319),K=n(63103),H=n(9310),k=n(60177),Q=n(62901),z=n(88834),L=n(99213),B=n(55911),I=n(14823),U=n(9183),F=n(71997),a=n(73955),O=n(42415);const P=["diffViewer"],A=()=>({}),u=f=>({height:f}),m=f=>({versionName:f}),p=f=>({count:f});function v(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-toolbar")(1,"h2"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",8),e.\u0275\u0275elementStart(5,"button",9),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275listener("click",function(D){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.prevDifference(D))}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"arrow_upward"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"button",9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275listener("click",function(D){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.nextDifference(D))}),e.\u0275\u0275elementStart(11,"mat-icon"),e.\u0275\u0275text(12,"arrow_downward"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(13,"mat-divider",10),e.\u0275\u0275elementStart(14,"span",11),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"mat-divider",10),e.\u0275\u0275elementStart(18,"button",12,1),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275listener("click",function(D){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275reference(19),ee=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ee.toggleRestoreEntityVersion(D,w))}),e.\u0275\u0275elementStart(21,"mat-icon"),e.\u0275\u0275text(22,"restore"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",13),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.isFullscreen=!D.isFullscreen)}),e.\u0275\u0275elementStart(27,"mat-icon"),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()()}if(2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,10,"version-control.diff-entity-with-version",e.\u0275\u0275pureFunction1(26,m,y.versionName))),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(6,13,"version-control.previous-difference")),e.\u0275\u0275property("disabled",!y.hasPrevious),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(10,15,"version-control.next-difference")),e.\u0275\u0275property("disabled",!y.hasNext),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(16,17,"version-control.differences",e.\u0275\u0275pureFunction1(28,p,y.diffCount))),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,20,y.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,22,"version-control.restore-version")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(26,24,y.isFullscreen?"fullscreen.exit":"fullscreen.expand")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(y.isFullscreen?"fullscreen_exit":"fullscreen")}}function T(f,g){if(1&f&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"div",16),e.\u0275\u0275elementStart(5,"div",15),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"version-control.current")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(y.versionIdContent())}}function C(f,g){1&f&&e.\u0275\u0275element(0,"mat-spinner",17)}function _(f,g){if(1&f){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"button",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.close())}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&f){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,"action.close")," ")}}class E extends t.H{constructor(g,y,b,D,w,ee,_e){super(g),this.store=g,this.entitiesVersionControlService=y,this.cd=b,this.renderer=D,this.elementRef=w,this.viewContainerRef=ee,this.popoverService=_e,this.versionRestored=new e.EventEmitter,this.contentReady=!1,this.preferredDiffHeight="332px",this.isFullscreen=!1,this.hasNext=!1,this.hasPrevious=!1,this.diffCount=0}ngOnInit(){this.entitiesVersionControlService.compareEntityDataToVersion(this.entityId,this.versionId).subscribe(g=>{const y=(0,S.M4)(g.currentVersion),b=(0,S.M4)(g.otherVersion),D=y.split("\n").length,w=y.split("\n").length,ee=Math.max(D,w);let _e=Math.max(10,ee);_e=Math.min(40,_e),this.preferredDiffHeight=132+16*_e+"px",(0,h.vr)().subscribe(ve=>{this.contentReady=!0,this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition(),setTimeout(()=>{this.differ=new ve.default({element:this.diffViewerElmRef.nativeElement,mode:"ace/mode/json",left:{copyLinkEnabled:!1,editable:!1,content:y},right:{copyLinkEnabled:!1,editable:!1,content:b}});const Ee=this.differ.getEditors().left,$=this.differ.getEditors().right;Ee.setShowFoldWidgets(!1),$.setShowFoldWidgets(!1),O(".acediff__left .ace_scrollbar-v",this.elementRef.nativeElement).on("scroll",()=>{$.getSession().setScrollTop(Ee.getSession().getScrollTop())}),O(".acediff__right .ace_scrollbar-v",this.elementRef.nativeElement).on("scroll",()=>{Ee.getSession().setScrollTop($.getSession().getScrollTop())}),O(".acediff__left .ace_scrollbar-h",this.elementRef.nativeElement).on("scroll",()=>{$.getSession().setScrollLeft(Ee.getSession().getScrollLeft())}),O(".acediff__right .ace_scrollbar-h",this.elementRef.nativeElement).on("scroll",()=>{Ee.getSession().setScrollLeft($.getSession().getScrollLeft())}),Ee.getSession().getSelection().on("changeCursor",()=>this.updateHasNextAndPrevious()),$.getSession().getSelection().on("changeCursor",()=>this.updateHasNextAndPrevious()),setTimeout(()=>{this.diffCount=this.differ.getNumDiffs(),this.updateHasNextAndPrevious()},2)})})})}versionIdContent(){let g=this.versionId;return g.length>7&&(g=g.slice(0,7)),g+" ("+this.versionName+")"}prevDifference(g){g&&g.stopPropagation(),this.moveToDiff(!1)}nextDifference(g){g&&g.stopPropagation(),this.moveToDiff(!0)}moveToDiff(g){const y=this.getCurrentRow(),b=g?this.findNextLine(y):this.findPrevLine(y);if(b){const D=this.differ.getEditors().left,w=this.differ.getEditors().right;D.scrollToLine(b.leftStartLine+1,!0,!0,()=>{}),D.gotoLine(b.leftStartLine+1,0,!0),w.scrollToLine(b.rightStartLine+1,!0,!0,()=>{}),w.gotoLine(b.rightStartLine+1,0,!0)}}onFullscreenChanged(g){g?this.resizeEditors():setTimeout(()=>{this.resizeEditors()})}getDiffs(){return this.differ&&this.differ.diffs||[]}getCurrentRow(){const g=this.differ.getEditors().left,y=this.differ.getEditors().right;let b=0,D=!0;const w=g.getSession().getSelection().getCursor().row,ee=y.getSession().getSelection().getCursor().row;return w>=g.getFirstVisibleRow()&&w<=g.getLastVisibleRow()?b=w:ee>=y.getFirstVisibleRow()&&ee<=y.getLastVisibleRow()?(b=ee,D=!1):b=w,{row:b,left:D}}nextDiff(g){return this.getDiffs().find(b=>(g.left?b.leftStartLine:b.rightStartLine)>g.row)}prevDiff(g){return[...this.getDiffs()].reverse().find(b=>(g.left?b.leftEndLine:b.rightEndLine)<g.row)}findNextLine(g){let y=this.nextDiff(g);const b=this.getDiffs();return!y&&b.length&&(y=b[b.length-1]),y}findPrevLine(g){let y=this.prevDiff(g);const b=this.getDiffs();return!y&&b.length&&(y=b[0]),y}updateHasNextAndPrevious(){const g=this.getCurrentRow();this.hasNext=!!this.nextDiff(g),this.hasPrevious=!!this.prevDiff(g),this.cd.markForCheck()}resizeEditors(){if(this.differ){this.differ.diff();const g=this.differ.getEditors().left,y=this.differ.getEditors().right;g.resize(),g.renderer.updateFull(),y.resize(),y.renderer.updateFull()}}ngOnDestroy(){this.differ&&(this.differ.destroy(),this.differ=null)}close(){this.popoverComponent&&this.popoverComponent.hide()}toggleRestoreEntityVersion(g,y){g&&g.stopPropagation();const b=y._elementRef.nativeElement;if(this.popoverService.hasPopover(b))this.popoverService.hidePopover(b);else{const D=this.popoverService.displayPopover(b,this.renderer,this.viewContainerRef,K.V,"leftTop",!0,null,{versionName:this.versionName,versionId:this.versionId,externalEntityId:this.externalEntityId,onClose:w=>{D.hide(),w&&!w.error&&w.result.length&&(this.close(),this.versionRestored.emit())}},{},{},{},!1);D.tbComponentRef.instance.popoverComponent=D}}static{this.\u0275fac=function(y){return new(y||E)(e.\u0275\u0275directiveInject(H.Store),e.\u0275\u0275directiveInject(c.k),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(G.TbPopoverService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["tb-entity-version-diff"]],viewQuery:function(y,b){if(1&y&&e.\u0275\u0275viewQuery(P,7),2&y){let D;e.\u0275\u0275queryRefresh(D=e.\u0275\u0275loadQuery())&&(b.diffViewerElmRef=D.first)}},inputs:{versionName:"versionName",versionId:"versionId",entityId:"entityId",externalEntityId:"externalEntityId",onClose:"onClose",popoverComponent:"popoverComponent"},outputs:{versionRestored:"versionRestored"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:14,consts:[["diffViewer",""],["restoreVersionButton",""],["tb-fullscreen","",1,"entity-version-diff-view","flex","flex-col",3,"fullscreenChanged","fullscreen"],[4,"ngIf"],["class","flex flex-row",4,"ngIf"],["mode","indeterminate","diameter","80",4,"ngIf"],[1,"diff-viewer","flex-1"],["class","bottom-panel flex items-center justify-end gap-2",4,"ngIf"],[1,"flex-1"],["mat-icon-button","","matTooltipPosition","below",3,"click","matTooltip","disabled"],["vertical",""],[1,"diff-count"],["mat-stroked-button","","color","primary",2,"min-width","150px",3,"click","disabled"],["mat-icon-button","","matTooltipPosition","below",3,"click","matTooltip"],[1,"flex","flex-row"],[1,"version-title","flex-1"],[2,"width","58px"],["mode","indeterminate","diameter","80"],[1,"bottom-panel","flex","items-center","justify-end","gap-2"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"]],template:function(y,b){if(1&y){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",2),e.\u0275\u0275listener("fullscreenChanged",function(ee){return e.\u0275\u0275restoreView(D),e.\u0275\u0275resetView(b.onFullscreenChanged(ee))}),e.\u0275\u0275template(1,v,29,30,"mat-toolbar",3)(2,T,7,4,"div",4)(3,C,1,0,"mat-spinner",5),e.\u0275\u0275element(4,"div",6,0),e.\u0275\u0275template(6,_,5,6,"div",7),e.\u0275\u0275elementEnd()}2&y&&(e.\u0275\u0275styleMap(b.isFullscreen||!b.contentReady?e.\u0275\u0275pureFunction0(11,A):e.\u0275\u0275pureFunction1(12,u,b.preferredDiffHeight)),e.\u0275\u0275classProp("content-ready",b.contentReady),e.\u0275\u0275property("fullscreen",b.isFullscreen),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.contentReady),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",b.contentReady),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!b.contentReady),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!b.contentReady),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",b.contentReady))},dependencies:[k.NgIf,Q.FullscreenDirective,z.MatButton,z.MatIconButton,L.MatIcon,B.MatToolbar,I.MatTooltip,U.MatProgressSpinner,F.MatDivider,k.AsyncPipe,a.TranslatePipe],styles:['@charset "UTF-8";.entity-version-diff-view{position:relative}.entity-version-diff-view:not(.tb-fullscreen){max-height:95vh}.entity-version-diff-view:not(.tb-fullscreen).content-ready{width:600px}@media screen and (min-width: 960px){.entity-version-diff-view:not(.tb-fullscreen).content-ready{width:800px}}@media screen and (min-width: 1280px){.entity-version-diff-view:not(.tb-fullscreen).content-ready{width:1000px}}@media screen and (min-width: 1600px){.entity-version-diff-view:not(.tb-fullscreen).content-ready{width:1200px}}.entity-version-diff-view.tb-fullscreen{height:100%;background:#fff}.entity-version-diff-view.tb-fullscreen .bottom-panel{margin-bottom:16px}.entity-version-diff-view .mat-toolbar{background:#fff}.entity-version-diff-view .mat-toolbar .mat-divider-vertical{height:40px;margin-right:16px;margin-left:16px}@media screen and (max-width: 599px){.entity-version-diff-view .mat-toolbar .mat-divider-vertical{margin-right:8px;margin-left:8px}}.entity-version-diff-view .mat-toolbar .diff-count{font-size:16px;overflow:hidden;text-overflow:ellipsis}.entity-version-diff-view .version-title{margin-left:4px}.entity-version-diff-view .diff-viewer{position:relative;border:1px solid #c0c0c0;margin-top:4px;margin-bottom:16px}.entity-version-diff-view .diff-viewer .acediff__diffLine{z-index:1}\n'],encapsulation:2})}}},63103:(Re,X,n)=>{"use strict";n.d(X,{V:()=>y});var e=n(93953),t=n(69749),c=n(26700),h=n(81554),S=(n(90039),n(97647)),G=n(27997),K=n(9310),H=n(73955),k=n(345),Q=n(89417),z=n(60177),L=n(88834),B=n(82765),I=n(67575),U=n(55911),F=n(9183);const a=b=>({versionName:b});function O(b,D){if(1&b&&(e.\u0275\u0275elementStart(0,"mat-toolbar")(1,"h2"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"span",6),e.\u0275\u0275elementEnd()),2&b){const w=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,"version-control.restore-entity-from-version",e.\u0275\u0275pureFunction1(4,a,w.versionName)))}}function P(b,D){1&b&&e.\u0275\u0275element(0,"mat-progress-bar",7)}function A(b,D){1&b&&e.\u0275\u0275element(0,"mat-spinner",8)}function u(b,D){1&b&&(e.\u0275\u0275elementStart(0,"mat-checkbox",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&b&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-credentials")," "))}function m(b,D){1&b&&(e.\u0275\u0275elementStart(0,"mat-checkbox",16),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&b&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-attributes")," "))}function p(b,D){1&b&&(e.\u0275\u0275elementStart(0,"mat-checkbox",17),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&b&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.load-relations")," "))}function v(b,D){if(1&b&&(e.\u0275\u0275elementStart(0,"form",9)(1,"fieldset",10),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",11),e.\u0275\u0275template(4,u,3,3,"mat-checkbox",12)(5,m,3,3,"mat-checkbox",13)(6,p,3,3,"mat-checkbox",14),e.\u0275\u0275elementEnd()()()),2&b){const w=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",w.restoreFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,5,w.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",w.entityDataInfo.hasCredentials),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo.hasAttributes),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo.hasRelations)}}function T(b,D){if(1&b){const w=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"button",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(w);const _e=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_e.cancel())}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",20),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(w);const _e=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_e.restore())}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()()}if(2&b){const w=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,4,w.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,6,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,8,w.isLoading$)||w.restoreFormGroup.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,10,"action.restore")," ")}}function C(b,D){if(1&b&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,O,5,6,"mat-toolbar",1)(2,P,1,0,"mat-progress-bar",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,A,1,0,"mat-spinner",3)(5,v,7,7,"form",4)(6,T,9,12,"div",5),e.\u0275\u0275elementEnd()),2&b){const w=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo&&e.\u0275\u0275pipeBind1(3,5,w.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!w.entityDataInfo),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.entityDataInfo)}}function _(b,D){if(1&b){const w=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275element(1,"div",22),e.\u0275\u0275elementStart(2,"div",18)(3,"button",19),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(w);const _e=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(_e.cancel())}),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()()}if(2&b){const w=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",w.errorMessage,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,3,w.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,5,"action.close")," ")}}function E(b,D){if(1&b&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,_,7,7,"section",1),e.\u0275\u0275elementEnd()),2&b){const w=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",w.errorMessage)}}function f(b,D){1&b&&(e.\u0275\u0275elementStart(0,"section",23)(1,"div",24)(2,"span",25),e.\u0275\u0275text(3,"version-control.restoring-entity-version"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"mat-progress-bar",26),e.\u0275\u0275elementEnd()())}function g(b,D){if(1&b&&(e.\u0275\u0275elementStart(0,"section"),e.\u0275\u0275template(1,E,2,1,"section",21),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,f,5,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&b){let w;const ee=e.\u0275\u0275reference(4),_e=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",(null==(w=e.\u0275\u0275pipeBind1(2,2,_e.versionLoadResult$))?null:w.done)||_e.errorMessage)("ngIfElse",ee)}}class y extends t.H{constructor(D,w,ee,_e,ve,Ee){super(D),this.store=D,this.entitiesVersionControlService=w,this.cd=ee,this.translate=_e,this.sanitizer=ve,this.fb=Ee,this.entityDataInfo=null}ngOnInit(){this.restoreFormGroup=this.fb.group({loadAttributes:[!0,[]],loadRelations:[!0,[]],loadCredentials:[!0,[]]}),this.entitiesVersionControlService.getEntityDataInfo(this.externalEntityId,this.versionId).subscribe(D=>{this.entityDataInfo=D,this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()})}ngOnDestroy(){super.ngOnDestroy(),this.versionLoadResultSubscription&&this.versionLoadResultSubscription.unsubscribe()}cancel(){this.onClose&&this.onClose(null)}restore(){const D={versionId:this.versionId,externalEntityId:this.externalEntityId,config:{loadRelations:!!this.entityDataInfo.hasRelations&&this.restoreFormGroup.get("loadRelations").value,loadAttributes:!!this.entityDataInfo.hasAttributes&&this.restoreFormGroup.get("loadAttributes").value,loadCredentials:!!this.entityDataInfo.hasCredentials&&this.restoreFormGroup.get("loadCredentials").value},type:c.k1.SINGLE_ENTITY};this.versionLoadResult$=this.entitiesVersionControlService.loadEntitiesVersion(D,{ignoreErrors:!0}).pipe((0,S.u)()),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition(),this.versionLoadResultSubscription=this.versionLoadResult$.subscribe(w=>{w.done&&(w.error?(this.errorMessage=this.entitiesVersionControlService.entityLoadErrorToMessage(w.error),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()):this.onClose&&this.onClose(w))},w=>{this.errorMessage=this.sanitizer.bypassSecurityTrustHtml((0,G.JG)(w,this.translate).message),this.cd.detectChanges(),this.popoverComponent&&this.popoverComponent.updatePosition()})}static{this.\u0275fac=function(w){return new(w||y)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(h.k),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(H.TranslateService),e.\u0275\u0275directiveInject(k.DomSanitizer),e.\u0275\u0275directiveInject(Q.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["tb-entity-version-restore"]],inputs:{versionName:"versionName",versionId:"versionId",externalEntityId:"externalEntityId",onClose:"onClose",popoverComponent:"popoverComponent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["progress",""],[4,"ngIf"],["color","warn","style","z-index: 10; width: 100%; margin-bottom: -4px;","mode","indeterminate",4,"ngIf"],["mode","indeterminate","diameter","80",4,"ngIf"],["style","padding-top: 16px;",3,"formGroup",4,"ngIf"],["class","flex items-center justify-end gap-2",4,"ngIf"],[1,"flex-1"],["color","warn","mode","indeterminate",2,"z-index","10","width","100%","margin-bottom","-4px"],["mode","indeterminate","diameter","80"],[2,"padding-top","16px",3,"formGroup"],[3,"disabled"],[1,"flex","flex-1","flex-col"],["formControlName","loadCredentials","style","margin-bottom: 16px;",4,"ngIf"],["formControlName","loadAttributes","style","margin-bottom: 16px;",4,"ngIf"],["formControlName","loadRelations","style","margin-bottom: 16px;",4,"ngIf"],["formControlName","loadCredentials",2,"margin-bottom","16px"],["formControlName","loadAttributes",2,"margin-bottom","16px"],["formControlName","loadRelations",2,"margin-bottom","16px"],[1,"flex","items-center","justify-end","gap-2"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],[4,"ngIf","ngIfElse"],[1,"mat-headline-6","vc-result-message","error",3,"innerHTML"],[1,"flex","flex-col","items-center","justify-center"],[1,"mat-headline-6","vc-result-message","progress"],["translate",""],["mode","indeterminate"]],template:function(w,ee){1&w&&e.\u0275\u0275template(0,C,7,7,"section",1)(1,g,5,4,"section",1),2&w&&(e.\u0275\u0275property("ngIf",!ee.versionLoadResult$),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",ee.versionLoadResult$))},dependencies:[z.NgIf,L.MatButton,B.MatCheckbox,I.MatProgressBar,U.MatToolbar,F.MatProgressSpinner,Q.\u0275NgNoValidate,Q.NgControlStatus,Q.NgControlStatusGroup,Q.FormGroupDirective,Q.FormControlName,H.TranslateDirective,z.AsyncPipe,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]{max-width:65vw;padding:0 8px;text-align:center;word-wrap:break-word}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:first-child{padding-top:48px}[_nghost-%COMP%]   .vc-result-message[_ngcontent-%COMP%]:nth-last-child(2){padding-bottom:8px}[_nghost-%COMP%]   .vc-result-message.error[_ngcontent-%COMP%]{text-align:start;font-weight:400}[_nghost-%COMP%]   .vc-result-message.progress[_ngcontent-%COMP%]{padding-bottom:32px}']})}}},27112:(Re,X,n)=>{"use strict";n.d(X,{a:()=>ze});var e=n(93953),t=n(69749),c=n(33596),h=n(18530),V=n(57786),S=n(84412),G=n(92771),K=n(7673),H=n(29543),k=n(719),Q=n(96354),z=n(70152),L=n(23294),B=n(56977),I=n(99437),U=n(81554),F=n(96695),a=n(2042),O=n(74972),P=n(67496),A=n(85893),u=n(27997),m=n(42319),p=n(1375),v=n(63103),T=n(96964),C=n(26754),_=n(28374),f=(n(90039),n(96955)),g=n(9310),y=n(89417),b=n(60177),D=n(88834),w=n(99213),ee=n(59042),_e=n(53719),ve=n(55911),Ee=n(14823),$=n(9159),be=n(71997),Te=n(73955),oe=n(9361);const R=["branchAutocompleteComponent"],N=["searchInput"],Z=()=>[10,20,30],Y=()=>({padding:"4px","font-size":"16px",color:"rgba(0,0,0,.87)"});function ge(tt,Ye){if(1&tt){const Qe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39,2),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(ot){e.\u0275\u0275restoreView(Qe);const gt=e.\u0275\u0275reference(1),rt=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(rt.toggleCreateVersion(ot,gt))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"update"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()}if(2&tt){const Qe=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,Qe.isLoading$)||e.\u0275\u0275pipeBind1(3,4,Qe.isReadOnly)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,6,"version-control.create-version")," ")}}function ce(tt,Ye){if(1&tt){const Qe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",39,3),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(ot){e.\u0275\u0275restoreView(Qe);const gt=e.\u0275\u0275reference(1),rt=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(rt.toggleComplexCreateVersion(ot,gt))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"update"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()}if(2&tt){const Qe=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,2,Qe.isLoading$)||e.\u0275\u0275pipeBind1(3,4,Qe.isReadOnly)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,6,"version-control.create-entities-version")," ")}}function se(tt,Ye){1&tt&&(e.\u0275\u0275elementStart(0,"mat-header-cell",40),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&tt&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.created-time")," "))}function J(tt,Ye){if(1&tt&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"date"),e.\u0275\u0275elementEnd()),2&tt){const Qe=Ye.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,1,Qe.timestamp,"yyyy-MM-dd HH:mm:ss")," ")}}function de(tt,Ye){1&tt&&(e.\u0275\u0275elementStart(0,"mat-header-cell",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&tt&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.version-id")," "))}function ye(tt,Ye){if(1&tt&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275element(1,"span",42)(2,"tb-copy-button",43),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd()),2&tt){const Qe=Ye.$implicit,nt=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("innerHTML",nt.versionIdContent(Qe),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(),e.\u0275\u0275styleMap(e.\u0275\u0275pureFunction0(10,Y)),e.\u0275\u0275propertyInterpolate("tooltipText",e.\u0275\u0275pipeBind1(3,6,"version-control.copy-full-version-id")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(4,8,nt.isLoading$))("copyText",Qe.id)}}function re(tt,Ye){1&tt&&(e.\u0275\u0275elementStart(0,"mat-header-cell",44),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&tt&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.version-name")," "))}function ne(tt,Ye){if(1&tt&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&tt){const Qe=Ye.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Qe.name," ")}}function ie(tt,Ye){1&tt&&(e.\u0275\u0275elementStart(0,"mat-header-cell",44),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&tt&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"version-control.author")," "))}function Ae(tt,Ye){if(1&tt&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&tt){const Qe=Ye.$implicit;e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",Qe.author," ")}}function Pe(tt,Ye){if(1&tt&&e.\u0275\u0275element(0,"mat-header-cell"),2&tt){const Qe=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("min-w-20",Qe.singleEntityMode)("max-w-20",Qe.singleEntityMode)("w-20",Qe.singleEntityMode)("min-w-10",!Qe.singleEntityMode)("max-w-10",!Qe.singleEntityMode)("w-10",!Qe.singleEntityMode)}}function Be(tt,Ye){if(1&tt){const Qe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18,4),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(ot){e.\u0275\u0275restoreView(Qe);const gt=e.\u0275\u0275reference(1),rt=e.\u0275\u0275nextContext().$implicit,Ze=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ze.toggleShowVersionDiff(ot,gt,rt))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"difference"),e.\u0275\u0275elementEnd()()}if(2&tt){const Qe=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,2,"version-control.compare-with-current")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,4,Qe.isLoading$))}}function Ke(tt,Ye){if(1&tt){const Qe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18,5),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(ot){e.\u0275\u0275restoreView(Qe);const gt=e.\u0275\u0275reference(1),rt=e.\u0275\u0275nextContext().$implicit,Ze=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ze.toggleRestoreEntityVersion(ot,gt,rt))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"restore"),e.\u0275\u0275elementEnd()()}if(2&tt){const Qe=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,2,"version-control.restore-version")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,4,Qe.isLoading$))}}function Xe(tt,Ye){if(1&tt){const Qe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",18,6),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275listener("click",function(ot){e.\u0275\u0275restoreView(Qe);const gt=e.\u0275\u0275reference(1),rt=e.\u0275\u0275nextContext().$implicit,Ze=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ze.toggleRestoreEntitiesVersion(ot,gt,rt))}),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"restore"),e.\u0275\u0275elementEnd()()}if(2&tt){const Qe=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(2,2,"version-control.restore-version")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,4,Qe.isLoading$))}}function at(tt,Ye){if(1&tt&&(e.\u0275\u0275elementStart(0,"mat-cell")(1,"div",45),e.\u0275\u0275template(2,Be,6,6,"button",46)(3,Ke,6,6,"button",46)(4,Xe,6,6,"button",46),e.\u0275\u0275elementEnd()()),2&tt){const Qe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Qe.singleEntityMode),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Qe.singleEntityMode),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!Qe.singleEntityMode)}}function bt(tt,Ye){1&tt&&e.\u0275\u0275element(0,"mat-header-row")}function Mt(tt,Ye){if(1&tt&&e.\u0275\u0275element(0,"mat-row"),2&tt){const Qe=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("!hidden",Qe.dataSource.dataLoading)}}class ze extends t.H{set active(Ye){this.activeValue!==Ye&&(this.activeValue=Ye,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.initFromDefaultBranch()))}set externalEntityId(Ye){(0,c.s)(this.externalEntityIdValue,Ye)||(this.externalEntityIdValue=Ye,this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))}constructor(Ye,Qe,nt,ot,gt,rt,Ze,je,$e,Oe){super(Ye),this.store=Ye,this.entitiesVersionControlService=Qe,this.adminService=nt,this.popoverService=ot,this.renderer=gt,this.cd=rt,this.viewContainerRef=Ze,this.elementRef=je,this.fb=$e,this.zone=Oe,this.singleEntityMode=!1,this.displayedColumns=["timestamp","id","name","author","actions"],this.textSearchMode=!1,this.hidePageSize=!1,this.branch=null,this.activeValue=!1,this.dirtyValue=!1,this.viewsInited=!1,this.textSearch=this.fb.control("",{nonNullable:!0}),this.destroy$=new h.B,this.versionRestored=new e.EventEmitter,this.dirtyValue=!this.activeValue;const Fe={property:"timestamp",direction:P.O.DESC};this.pageLink=new k.Ek(10,0,null,Fe),this.dataSource=new vt(this.entitiesVersionControlService)}ngOnInit(){this.componentResize$=new ResizeObserver(()=>{this.zone.run(()=>{const Ye=this.elementRef.nativeElement.offsetWidth<O.u3;Ye!==this.hidePageSize&&(this.hidePageSize=Ye,this.cd.markForCheck())})}),this.componentResize$.observe(this.elementRef.nativeElement),this.isReadOnly=this.adminService.getRepositorySettingsInfo().pipe((0,Q.T)(Ye=>Ye.readOnly))}ngOnDestroy(){this.componentResize$&&this.componentResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()}branchChanged(Ye){(0,u.Q8)(Ye)&&this.branch!==Ye&&(this.branch=Ye,this.paginator.pageIndex=0,this.activeValue&&this.updateData())}ngAfterViewInit(){this.textSearch.valueChanges.pipe((0,z.B)(400),(0,L.F)((Ye,Qe)=>(this.pageLink.textSearch??"")===Qe.trim()),(0,B.Q)(this.destroy$)).subscribe(Ye=>{this.paginator.pageIndex=0,this.pageLink.textSearch=Ye.trim(),this.updateData()}),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,V.h)(this.sort.sortChange,this.paginator.page).pipe((0,B.Q)(this.destroy$)).subscribe(()=>this.updateData()),this.viewsInited=!0,(!this.singleEntityMode||this.activeValue&&this.externalEntityIdValue)&&this.initFromDefaultBranch()}toggleCreateVersion(Ye,Qe){Ye&&Ye.stopPropagation();const nt=Qe._elementRef.nativeElement;if(this.popoverService.hasPopover(nt))this.popoverService.hidePopover(nt);else{const ot=this.popoverService.displayPopover(nt,this.renderer,this.viewContainerRef,p.B,"leftTop",!0,null,{branch:this.branch,entityId:this.entityId,entityName:this.entityName,onBeforeCreateVersion:this.onBeforeCreateVersion,onClose:(gt,rt)=>{ot.hide(),gt&&(this.branch!==rt?this.branchChanged(rt):this.updateData())}},{maxHeight:"100vh",height:"100%",padding:"10px"},{width:"400px",minWidth:"100%",maxWidth:"100%"},{},!1);ot.tbComponentRef.instance.popoverComponent=ot}}toggleComplexCreateVersion(Ye,Qe){Ye&&Ye.stopPropagation();const nt=Qe._elementRef.nativeElement;if(this.popoverService.hasPopover(nt))this.popoverService.hidePopover(nt);else{const ot=this.popoverService.displayPopover(nt,this.renderer,this.viewContainerRef,C.m,"leftTop",!0,null,{branch:this.branch,onClose:(gt,rt)=>{ot.hide(),gt&&(this.branch!==rt?this.branchChanged(rt):this.updateData())}},{maxHeight:"90vh",height:"100%",padding:"10px"},{},{},!1);ot.tbComponentRef.instance.popoverComponent=ot}}toggleShowVersionDiff(Ye,Qe,nt){Ye&&Ye.stopPropagation();const ot=Qe._elementRef.nativeElement;if(this.popoverService.hasPopover(ot))this.popoverService.hidePopover(ot);else{const gt=this.popoverService.displayPopover(ot,this.renderer,this.viewContainerRef,T.o,"leftTop",!0,null,{versionName:nt.name,versionId:nt.id,entityId:this.entityId,externalEntityId:this.externalEntityIdValue},{},{},{},!1);gt.tbComponentRef.instance.popoverComponent=gt,gt.tbComponentRef.instance.versionRestored.subscribe(()=>{this.versionRestored.emit()})}}toggleRestoreEntityVersion(Ye,Qe,nt){Ye&&Ye.stopPropagation();const ot=Qe._elementRef.nativeElement;if(this.popoverService.hasPopover(ot))this.popoverService.hidePopover(ot);else{const gt=this.popoverService.displayPopover(ot,this.renderer,this.viewContainerRef,v.V,"leftTop",!0,null,{versionName:nt.name,versionId:nt.id,externalEntityId:this.externalEntityIdValue,onClose:rt=>{gt.hide(),rt&&!rt.error&&rt.result.length&&this.versionRestored.emit()}},{maxHeight:"100vh",height:"100%",padding:"10px"},{width:"400px",minWidth:"100%",maxWidth:"100%"},{},!1);gt.tbComponentRef.instance.popoverComponent=gt}}toggleRestoreEntitiesVersion(Ye,Qe,nt){Ye&&Ye.stopPropagation();const ot=Qe._elementRef.nativeElement;if(this.popoverService.hasPopover(ot))this.popoverService.hidePopover(ot);else{const gt=this.popoverService.displayPopover(ot,this.renderer,this.viewContainerRef,_.S,"leftTop",!0,null,{versionName:nt.name,versionId:nt.id,onClose:rt=>{gt.hide()}},{maxHeight:"80vh",height:"100%",padding:"10px"},{},{},!1);gt.tbComponentRef.instance.popoverComponent=gt}}versionIdContent(Ye){let Qe=Ye.id;return Qe.length>7&&(Qe=Qe.slice(0,7)),Qe}enterFilterMode(){this.textSearchMode=!0,setTimeout(()=>{this.searchInputField.nativeElement.focus(),this.searchInputField.nativeElement.setSelectionRange(0,0)},10)}exitFilterMode(){this.textSearchMode=!1,this.textSearch.reset()}initFromDefaultBranch(){this.branchAutocompleteComponent.isDefaultBranchSelected()?(this.paginator.pageIndex=0,this.activeValue&&this.updateData()):this.branchAutocompleteComponent.selectDefaultBranchIfNeeded(!0)}updateData(){this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=P.O[this.sort.direction.toUpperCase()],this.dataSource.loadEntityVersions(this.singleEntityMode,this.branch,this.externalEntityIdValue,this.pageLink)}resetSortAndFilter(Ye){if(this.textSearchMode=!1,this.pageLink.textSearch=null,this.textSearch.reset("",{emitEvent:!1}),this.viewsInited){this.paginator.pageIndex=0;const Qe=this.sort.sortables.get("timestamp");this.sort.active=Qe.id,this.sort.direction="desc",Ye&&this.initFromDefaultBranch()}}static{this.\u0275fac=function(Qe){return new(Qe||ze)(e.\u0275\u0275directiveInject(g.Store),e.\u0275\u0275directiveInject(U.k),e.\u0275\u0275directiveInject(f.z),e.\u0275\u0275directiveInject(m.TbPopoverService),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(y.FormBuilder),e.\u0275\u0275directiveInject(e.NgZone))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ze,selectors:[["tb-entity-versions-table"]],viewQuery:function(Qe,nt){if(1&Qe&&(e.\u0275\u0275viewQuery(R,5),e.\u0275\u0275viewQuery(N,5),e.\u0275\u0275viewQuery(F.MatPaginator,5),e.\u0275\u0275viewQuery(a.MatSort,5)),2&Qe){let ot;e.\u0275\u0275queryRefresh(ot=e.\u0275\u0275loadQuery())&&(nt.branchAutocompleteComponent=ot.first),e.\u0275\u0275queryRefresh(ot=e.\u0275\u0275loadQuery())&&(nt.searchInputField=ot.first),e.\u0275\u0275queryRefresh(ot=e.\u0275\u0275loadQuery())&&(nt.paginator=ot.first),e.\u0275\u0275queryRefresh(ot=e.\u0275\u0275loadQuery())&&(nt.sort=ot.first)}},inputs:{singleEntityMode:"singleEntityMode",popoverComponent:"popoverComponent",onBeforeCreateVersion:"onBeforeCreateVersion",active:"active",externalEntityId:"externalEntityId",entityId:"entityId",entityName:"entityName"},outputs:{versionRestored:"versionRestored"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:71,vars:67,consts:[["branchAutocompleteComponent",""],["searchInput",""],["createVersionButton",""],["complexCreateVersionButton",""],["diffVersionButton",""],["restoreVersionButton",""],["restoreEntitiesVersionButton",""],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],[1,"tb-entity-table-content","flex","flex-1","flex-col"],[1,"mat-mdc-table-toolbar"],[1,"mat-toolbar-tools"],[1,"title-container","flex","flex-row","items-center","justify-start","xs:flex-col","xs:items-start","xs:justify-center"],[1,"tb-entity-table-title"],["subscriptSizing","dynamic",3,"ngModelChange","selectionMode","selectDefaultBranch","disabled","ngModel"],[1,"flex-1"],[1,"flex","flex-row","items-center","justify-center","xs:flex-col","xs:items-end","xs:justify-center"],["mat-stroked-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"flex","flex-row"],["mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"formControl","placeholder"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],[1,"table-container","flex-1"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","timestamp"],["mat-sort-header","","style","min-width: 150px; max-width: 150px; width: 150px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["style","min-width: 100px; max-width: 100px; width: 100px;",4,"matHeaderCellDef"],["matColumnDef","name"],["style","width: 50%",4,"matHeaderCellDef"],["matColumnDef","author"],["matColumnDef","actions","stickyEnd",""],[3,"min-w-20","max-w-20","w-20","min-w-10","max-w-10","w-10",4,"matHeaderCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"!hidden",4,"matRowDef","matRowDefColumns"],["translate","",1,"no-data-found","flex","items-center","justify-center"],[1,"no-data-found","flex","items-center","justify-center"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","hidePageSize"],["mat-stroked-button","","color","primary",3,"click","disabled"],["mat-sort-header","",2,"min-width","150px","max-width","150px","width","150px"],[2,"min-width","100px","max-width","100px","width","100px"],[2,"display","inline-block","width","54px",3,"innerHTML"],["tooltipPosition","above","icon","content_paste",3,"disabled","copyText","tooltipText"],[2,"width","50%"],[1,"flex","flex-1","flex-row","items-stretch","justify-end"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"]],template:function(Qe,nt){if(1&Qe){const ot=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"mat-toolbar",9)(3,"div",10)(4,"div",11)(5,"span",12),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"tb-branch-autocomplete",13,0),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("ngModelChange",function(rt){return e.\u0275\u0275restoreView(ot),e.\u0275\u0275resetView(nt.branchChanged(rt))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(11,"span",14),e.\u0275\u0275elementStart(12,"div",15),e.\u0275\u0275template(13,ge,8,8,"button",16)(14,ce,8,8,"button",16),e.\u0275\u0275elementStart(15,"div",17)(16,"button",18),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ot),e.\u0275\u0275resetView(nt.updateData())}),e.\u0275\u0275elementStart(19,"mat-icon"),e.\u0275\u0275text(20,"refresh"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"button",18),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ot),e.\u0275\u0275resetView(nt.enterFilterMode())}),e.\u0275\u0275elementStart(24,"mat-icon"),e.\u0275\u0275text(25,"search"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(26,"mat-toolbar",9)(27,"div",10)(28,"button",19),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementStart(30,"mat-icon"),e.\u0275\u0275text(31,"search"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"mat-form-field",14)(33,"mat-label"),e.\u0275\u0275text(34,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"input",20,1),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"button",21),e.\u0275\u0275pipe(39,"translate"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ot),e.\u0275\u0275resetView(nt.exitFilterMode())}),e.\u0275\u0275elementStart(40,"mat-icon"),e.\u0275\u0275text(41,"close"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(42,"div",22)(43,"table",23),e.\u0275\u0275elementContainerStart(44,24),e.\u0275\u0275template(45,se,3,3,"mat-header-cell",25)(46,J,3,4,"mat-cell",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(47,27),e.\u0275\u0275template(48,de,3,3,"mat-header-cell",28)(49,ye,5,11,"mat-cell",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(50,29),e.\u0275\u0275template(51,re,3,3,"mat-header-cell",30)(52,ne,2,1,"mat-cell",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(53,31),e.\u0275\u0275template(54,ie,3,3,"mat-header-cell",30)(55,Ae,2,1,"mat-cell",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(56,32),e.\u0275\u0275template(57,Pe,1,12,"mat-header-cell",33)(58,at,5,3,"mat-cell",26),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(59,bt,1,0,"mat-header-row",34)(60,Mt,1,2,"mat-row",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"span",36),e.\u0275\u0275pipe(62,"async"),e.\u0275\u0275pipe(63,"async"),e.\u0275\u0275text(64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"span",37),e.\u0275\u0275text(66),e.\u0275\u0275pipe(67,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(68,"mat-divider")(69,"mat-paginator",38),e.\u0275\u0275pipe(70,"async"),e.\u0275\u0275elementEnd()()}2&Qe&&(e.\u0275\u0275classProp("tb-popover-mode",nt.popoverComponent),e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-outlined-border",!nt.popoverComponent),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",nt.textSearchMode),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,40,nt.singleEntityMode?"version-control.entity-versions":"version-control.versions")),e.\u0275\u0275advance(2),e.\u0275\u0275property("selectionMode",!0)("selectDefaultBranch",!1)("disabled",e.\u0275\u0275pipeBind1(10,42,nt.isLoading$))("ngModel",nt.branch),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",nt.singleEntityMode),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!nt.singleEntityMode),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(17,44,"action.refresh")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,46,nt.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(22,48,"action.search")),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,50,nt.isLoading$)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",!nt.textSearchMode),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(29,52,"action.search")),e.\u0275\u0275advance(7),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(37,54,"version-control.search")),e.\u0275\u0275property("formControl",nt.textSearch),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(39,56,"action.close")),e.\u0275\u0275advance(5),e.\u0275\u0275property("dataSource",nt.dataSource)("matSortActive",nt.pageLink.sortOrder.property)("matSortDirection",nt.pageLink.sortDirection()),e.\u0275\u0275advance(16),e.\u0275\u0275property("matHeaderRowDef",nt.displayedColumns)("matHeaderRowDefSticky",!0),e.\u0275\u0275advance(),e.\u0275\u0275property("matRowDefColumns",nt.displayedColumns),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",e.\u0275\u0275pipeBind1(62,58,nt.isLoading$)||!1===e.\u0275\u0275pipeBind1(63,60,nt.dataSource.isEmpty())||nt.dataSource.dataLoading),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(nt.singleEntityMode?"version-control.no-entity-versions-text":"version-control.no-versions-text"),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",!nt.dataSource.dataLoading),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(67,62,"common.loading")),e.\u0275\u0275advance(3),e.\u0275\u0275property("length",e.\u0275\u0275pipeBind1(70,64,nt.dataSource.total()))("pageIndex",nt.pageLink.page)("pageSize",nt.pageLink.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction0(66,Z))("hidePageSize",nt.hidePageSize))},dependencies:[b.NgIf,D.MatButton,D.MatIconButton,w.MatIcon,ee.MatInput,_e.MatFormField,_e.MatLabel,ve.MatToolbar,Ee.MatTooltip,$.MatTable,$.MatHeaderCellDef,$.MatHeaderRowDef,$.MatColumnDef,$.MatCellDef,$.MatRowDef,$.MatHeaderCell,$.MatCell,$.MatHeaderRow,$.MatRow,F.MatPaginator,a.MatSort,a.MatSortHeader,be.MatDivider,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,y.FormControlDirective,Te.TranslateDirective,oe.CopyButtonComponent,A.m,b.AsyncPipe,b.DatePipe,Te.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .tb-entity-table.tb-popover-mode[_ngcontent-%COMP%]{position:relative;width:800px;height:600px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content.tb-outlined-border[_ngcontent-%COMP%]{box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border:solid 1px #e0e0e0;border-radius:4px}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .button-widget-action[_ngcontent-%COMP%]{margin-left:auto;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width: 599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}']})}}class vt{constructor(Ye){this.entitiesVersionControlService=Ye,this.entityVersionsSubject=new S.t([]),this.pageDataSubject=new S.t((0,H.r)()),this.pageData$=this.pageDataSubject.asObservable(),this.dataLoading=!0}connect(Ye){return this.entityVersionsSubject.asObservable()}disconnect(Ye){this.entityVersionsSubject.complete(),this.pageDataSubject.complete()}loadEntityVersions(Ye,Qe,nt,ot){this.dataLoading=!0;const gt=new G.m;return this.fetchEntityVersions(Ye,Qe,nt,ot).pipe((0,I.W)(()=>(0,K.of)((0,H.r)()))).subscribe(rt=>{this.entityVersionsSubject.next(rt.data),this.pageDataSubject.next(rt),gt.next(rt),this.dataLoading=!1}),gt}fetchEntityVersions(Ye,Qe,nt,ot){return Qe?Ye?nt?this.entitiesVersionControlService.listEntityVersions(ot,Qe,nt,{ignoreErrors:!0}):(0,K.of)((0,H.r)()):this.entitiesVersionControlService.listVersions(ot,Qe,{ignoreErrors:!0}):(0,K.of)((0,H.r)())}isEmpty(){return this.entityVersionsSubject.pipe((0,Q.T)(Ye=>!Ye.length))}total(){return this.pageDataSubject.pipe((0,Q.T)(Ye=>Ye.totalElements))}}},97030:(Re,X,n)=>{"use strict";n.d(X,{Z:()=>Q});var e=n(93953),t=n(69749),c=n(9310),h=n(73955),V=n(345),S=n(89417),G=n(88834),K=n(59042),H=n(53719),k=n(60177);class Q extends t.H{constructor(L,B,I,U){super(L),this.store=L,this.translate=B,this.sanitizer=I,this.fb=U,this.removeOtherEntitiesVerificationText="remove other entities",this.removeOtherEntitiesConfirmText=this.sanitizer.bypassSecurityTrustHtml(this.translate.instant("version-control.remove-other-entities-confirm-text"))}ngOnInit(){this.confirmFormGroup=this.fb.group({verification:[null,[]]})}cancel(){this.onClose&&this.onClose(null)}confirm(){this.onClose&&this.onClose(!0)}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(c.Store),e.\u0275\u0275directiveInject(h.TranslateService),e.\u0275\u0275directiveInject(V.DomSanitizer),e.\u0275\u0275directiveInject(S.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-remove-other-entities-confirm"]],inputs:{onClose:"onClose"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:16,vars:17,consts:[[2,"min-width","300px"],[2,"padding-top","16px",3,"formGroup"],[3,"disabled"],[2,"user-select","none",3,"innerHTML"],[1,"mat-block"],["matInput","","formControlName","verification"],[1,"flex","items-center","justify-end","gap-2"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"]],template:function(B,I){1&B&&(e.\u0275\u0275elementStart(0,"section",0)(1,"form",1)(2,"fieldset",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275element(4,"div",3),e.\u0275\u0275elementStart(5,"mat-form-field",4),e.\u0275\u0275element(6,"input",5),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",6)(8,"button",7),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275listener("click",function(){return I.cancel()}),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"button",8),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275listener("click",function(){return I.confirm()}),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()()),2&B&&(e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",I.confirmFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,7,I.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("innerHTML",I.removeOtherEntitiesConfirmText,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(9,9,I.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,11,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(13,13,I.isLoading$)||I.confirmFormGroup.invalid||I.confirmFormGroup.get("verification").value!==I.removeOtherEntitiesVerificationText),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(15,15,"action.confirm")," "))},dependencies:[G.MatButton,K.MatInput,H.MatFormField,S.\u0275NgNoValidate,S.DefaultValueAccessor,S.NgControlStatus,S.NgControlStatusGroup,S.FormGroupDirective,S.FormControlName,k.AsyncPipe,h.TranslatePipe],encapsulation:2})}}},14192:(Re,X,n)=>{"use strict";n.d(X,{h:()=>oe});var e=n(31635),t=n(93953),c=n(69749),h=n(89417),V=n(9310),S=n(96955),G=n(52734),K=n(78502),H=n(27997),k=n(80216),Q=n(37140),z=n(63729),L=n(96697),B=n(73028),I=n(99437),U=n(7673),a=(n(90039),n(29225)),O=n(73955),P=n(60177),A=n(37441),u=n(88834),m=n(82765),p=n(25596),v=n(67575),T=n(59042),C=n(53719),_=n(82798),E=n(86600),f=n(92973),g=n(19267);const y=()=>({boxShadow:"none",maxWidth:"100%",minWidth:"100%",width:"800px"}),b=()=>({}),D=()=>({standalone:!0});function w(R,N){1&R&&t.\u0275\u0275element(0,"mat-progress-bar",32)}function ee(R,N){1&R&&t.\u0275\u0275element(0,"div",33)}function _e(R,N){1&R&&(t.\u0275\u0275elementStart(0,"mat-error",12),t.\u0275\u0275text(1," admin.repository-url-required "),t.\u0275\u0275elementEnd())}function ve(R,N){if(1&R&&(t.\u0275\u0275elementStart(0,"mat-option",34),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&R){const Z=N.$implicit,Y=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",Z),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,Y.repositoryAuthMethodTranslations.get(Z))," ")}}function Ee(R,N){if(1&R){const Z=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-checkbox",35),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(Z);const ge=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(ge.changePasswordChanged())}),t.\u0275\u0275twoWayListener("ngModelChange",function(ge){t.\u0275\u0275restoreView(Z);const ce=t.\u0275\u0275nextContext();return t.\u0275\u0275twoWayBindingSet(ce.changePassword,ge)||(ce.changePassword=ge),t.\u0275\u0275resetView(ge)}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&R){const Z=t.\u0275\u0275nextContext();t.\u0275\u0275twoWayProperty("ngModel",Z.changePassword),t.\u0275\u0275property("ngModelOptions",t.\u0275\u0275pureFunction0(5,D)),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"admin.change-password-access-token")," ")}}function $(R,N){1&R&&(t.\u0275\u0275elementStart(0,"mat-form-field",11)(1,"mat-label",12),t.\u0275\u0275text(2,"admin.password-access-token"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",36),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275element(5,"tb-toggle-password",37)(6,"mat-hint",38),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()),2&R&&(t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(4,2,"common.enter-password")),t.\u0275\u0275advance(3),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind1(7,4,"admin.auth-method-username-password-hint"),t.\u0275\u0275sanitizeHtml))}function be(R,N){if(1&R){const Z=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-checkbox",35),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(Z);const ge=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(ge.changePrivateKeyPasswordChanged())}),t.\u0275\u0275twoWayListener("ngModelChange",function(ge){t.\u0275\u0275restoreView(Z);const ce=t.\u0275\u0275nextContext();return t.\u0275\u0275twoWayBindingSet(ce.changePrivateKeyPassword,ge)||(ce.changePrivateKeyPassword=ge),t.\u0275\u0275resetView(ge)}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&R){const Z=t.\u0275\u0275nextContext();t.\u0275\u0275twoWayProperty("ngModel",Z.changePrivateKeyPassword),t.\u0275\u0275property("ngModelOptions",t.\u0275\u0275pureFunction0(5,D)),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"admin.change-passphrase")," ")}}function Te(R,N){1&R&&(t.\u0275\u0275elementStart(0,"mat-form-field",11)(1,"mat-label",12),t.\u0275\u0275text(2,"admin.passphrase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",39),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275element(5,"tb-toggle-password",37),t.\u0275\u0275elementEnd()),2&R&&(t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(4,1,"admin.enter-passphrase")))}class oe extends c.H{constructor(N,Z,Y,ge,ce,se){super(N),this.store=N,this.adminService=Z,this.dialogService=Y,this.translate=ge,this.cd=ce,this.fb=se,this.detailsMode=!1,this.hideLoadingBar=!1,this.settings=null,this.repositoryAuthMethod=G.mj,this.repositoryAuthMethods=Object.values(G.mj),this.repositoryAuthMethodTranslations=G.f3,this.showChangePassword=!1,this.changePassword=!1,this.showChangePrivateKeyPassword=!1,this.changePrivateKeyPassword=!1}ngOnInit(){this.repositorySettingsForm=this.fb.group({repositoryUri:[null,[h.Validators.required]],defaultBranch:["main",[]],readOnly:[!1,[]],showMergeCommits:[!1,[]],authMethod:[G.mj.USERNAME_PASSWORD,[h.Validators.required]],username:[null,[]],password:[null,[]],privateKeyFileName:[null,[h.Validators.required]],privateKey:[null,[]],privateKeyPassword:[null,[]]}),this.updateValidators(!1),this.repositorySettingsForm.get("authMethod").valueChanges.subscribe(()=>{this.updateValidators(!0)}),this.repositorySettingsForm.get("privateKeyFileName").valueChanges.subscribe(()=>{this.updateValidators(!1)}),this.store.pipe((0,V.select)(z.vu),(0,L.s)(1),(0,B.Z)(N=>N?this.adminService.getRepositorySettings({ignoreErrors:!0}).pipe((0,I.W)(()=>(0,U.of)(null))):(0,U.of)(null))).subscribe(N=>{this.settings=N,null!=this.settings&&(this.settings.authMethod===G.mj.USERNAME_PASSWORD?this.showChangePassword=!0:this.showChangePrivateKeyPassword=!0,this.repositorySettingsForm.reset(this.settings),this.updateValidators(!1))})}checkAccess(){const N=this.repositorySettingsForm.value;this.adminService.checkRepositoryAccess(N).subscribe(()=>{this.store.dispatch(new K.xo({message:this.translate.instant("admin.check-repository-access-success"),type:"success"}))})}save(){const N=this.repositorySettingsForm.value;this.adminService.saveRepositorySettings(N).subscribe(Z=>{this.settings=Z,this.settings.authMethod===G.mj.USERNAME_PASSWORD?(this.showChangePassword=!0,this.changePassword=!1):(this.showChangePrivateKeyPassword=!0,this.changePrivateKeyPassword=!1),this.repositorySettingsForm.reset(this.settings),this.updateValidators(!1),this.store.dispatch(new Q.uS({hasRepository:!0}))})}delete(N){this.dialogService.confirm(this.translate.instant("admin.delete-repository-settings-title"),this.translate.instant("admin.delete-repository-settings-text"),null,this.translate.instant("action.delete")).subscribe(Z=>{Z&&this.adminService.deleteRepositorySettings().subscribe(()=>{this.settings=null,this.showChangePassword=!1,this.changePassword=!1,this.showChangePrivateKeyPassword=!1,this.changePrivateKeyPassword=!1,N.resetForm(),this.repositorySettingsForm.reset({defaultBranch:"main",authMethod:G.mj.USERNAME_PASSWORD}),this.updateValidators(!1),this.store.dispatch(new Q.uS({hasRepository:!1}))})})}changePasswordChanged(){this.changePassword&&(this.repositorySettingsForm.get("password").patchValue(""),this.repositorySettingsForm.get("password").markAsDirty()),this.updateValidators(!1)}changePrivateKeyPasswordChanged(){this.changePrivateKeyPassword&&(this.repositorySettingsForm.get("privateKeyPassword").patchValue(""),this.repositorySettingsForm.get("privateKeyPassword").markAsDirty()),this.updateValidators(!1)}updateValidators(N){const Z=this.repositorySettingsForm.get("authMethod").value,Y=this.repositorySettingsForm.get("privateKeyFileName").value;Z===G.mj.USERNAME_PASSWORD?(this.repositorySettingsForm.get("username").enable({emitEvent:N}),this.changePassword||!this.showChangePassword?this.repositorySettingsForm.get("password").enable({emitEvent:N}):this.repositorySettingsForm.get("password").disable({emitEvent:N}),this.repositorySettingsForm.get("privateKeyFileName").disable({emitEvent:N}),this.repositorySettingsForm.get("privateKey").disable({emitEvent:N}),this.repositorySettingsForm.get("privateKeyPassword").disable({emitEvent:N})):(this.repositorySettingsForm.get("username").disable({emitEvent:N}),this.repositorySettingsForm.get("password").disable({emitEvent:N}),this.repositorySettingsForm.get("privateKeyFileName").enable({emitEvent:N}),this.repositorySettingsForm.get("privateKey").enable({emitEvent:N}),this.changePrivateKeyPassword||!this.showChangePrivateKeyPassword?this.repositorySettingsForm.get("privateKeyPassword").enable({emitEvent:N}):this.repositorySettingsForm.get("privateKeyPassword").disable({emitEvent:N}),(0,H.Q8)(Y)?this.repositorySettingsForm.get("privateKey").clearValidators():this.repositorySettingsForm.get("privateKey").setValidators([h.Validators.required])),this.repositorySettingsForm.get("username").updateValueAndValidity({emitEvent:!1}),this.repositorySettingsForm.get("password").updateValueAndValidity({emitEvent:!1}),this.repositorySettingsForm.get("privateKeyFileName").updateValueAndValidity({emitEvent:!1}),this.repositorySettingsForm.get("privateKey").updateValueAndValidity({emitEvent:!1}),this.repositorySettingsForm.get("privateKeyPassword").updateValueAndValidity({emitEvent:!1})}static{this.\u0275fac=function(Z){return new(Z||oe)(t.\u0275\u0275directiveInject(V.Store),t.\u0275\u0275directiveInject(S.z),t.\u0275\u0275directiveInject(k.o),t.\u0275\u0275directiveInject(O.TranslateService),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:oe,selectors:[["tb-repository-settings"]],inputs:{detailsMode:"detailsMode",popoverComponent:"popoverComponent",hideLoadingBar:"hideLoadingBar"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:70,vars:65,consts:[["formDirective","ngForm"],[2,"height","min-content","max-height","80vh"],["appearance","outlined",1,"repository-settings"],["translate","",1,"mat-headline-5"],[1,"flex-1"],["tb-help","repositorySettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"ngSubmit","formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","required","","formControlName","repositoryUri"],["translate","",4,"ngIf"],["matInput","","formControlName","defaultBranch"],[1,"flex","flex-col"],["formControlName","readOnly"],["formControlName","showMergeCommits"],[1,"fields-group",3,"disabled"],["translate","",1,"group-title"],[1,"mat-block","flex-1"],["required","","formControlName","authMethod"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","username","autocomplete","new-username",3,"placeholder"],[3,"ngModel","ngModelOptions","change","ngModelChange",4,"ngIf"],["class","mat-block",4,"ngIf"],["required","","formControlName","privateKey",3,"fileNameChanged","existingFileName","dropLabel","label"],[1,"flex","flex-row","items-center","justify-end","gap-4","xs:flex-col","xs:items-stretch","xs:justify-end"],["mat-raised-button","","color","warn","type","button",3,"click","disabled"],["mat-raised-button","","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],[3,"change","ngModelChange","ngModel","ngModelOptions"],["matInput","","formControlName","password","type","password","autocomplete","new-password",3,"placeholder"],["matSuffix",""],[3,"innerHTML"],["matInput","","formControlName","privateKeyPassword","type","password","autocomplete","new-password",3,"placeholder"]],template:function(Z,Y){if(1&Z){const ge=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title")(4,"span",3),t.\u0275\u0275text(5,"admin.repository-settings"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(6,"span",4)(7,"div",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,w,1,0,"mat-progress-bar",6),t.\u0275\u0275pipe(9,"async"),t.\u0275\u0275template(10,ee,1,0,"div",7),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275elementStart(12,"mat-card-content",8)(13,"form",9,0),t.\u0275\u0275listener("ngSubmit",function(){return t.\u0275\u0275restoreView(ge),t.\u0275\u0275resetView(Y.save())}),t.\u0275\u0275elementStart(15,"fieldset",10),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275elementStart(17,"mat-form-field",11)(18,"mat-label",12),t.\u0275\u0275text(19,"admin.repository-url"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(20,"input",13),t.\u0275\u0275template(21,_e,2,0,"mat-error",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"mat-form-field",11)(23,"mat-label",12),t.\u0275\u0275text(24,"admin.default-branch"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(25,"input",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"div",16)(27,"mat-checkbox",17),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"mat-checkbox",18),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"fieldset",19),t.\u0275\u0275pipe(34,"async"),t.\u0275\u0275elementStart(35,"legend",20),t.\u0275\u0275text(36,"admin.authentication-settings"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"mat-form-field",21)(38,"mat-label",12),t.\u0275\u0275text(39,"admin.auth-method"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"mat-select",22),t.\u0275\u0275template(41,ve,3,4,"mat-option",23),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"section",16)(43,"mat-form-field",21)(44,"mat-label",12),t.\u0275\u0275text(45,"common.username"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(46,"input",24),t.\u0275\u0275pipe(47,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(48,Ee,3,6,"mat-checkbox",25)(49,$,8,6,"mat-form-field",26),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(50,"section",16)(51,"tb-file-input",27),t.\u0275\u0275pipe(52,"translate"),t.\u0275\u0275pipe(53,"translate"),t.\u0275\u0275listener("fileNameChanged",function(se){return t.\u0275\u0275restoreView(ge),t.\u0275\u0275resetView(Y.repositorySettingsForm.get("privateKeyFileName").patchValue(se))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(54,be,3,6,"mat-checkbox",25)(55,Te,6,3,"mat-form-field",26),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(56,"div",28)(57,"button",29),t.\u0275\u0275pipe(58,"async"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(ge);const se=t.\u0275\u0275reference(14);return t.\u0275\u0275resetView(Y.delete(se))}),t.\u0275\u0275text(59),t.\u0275\u0275pipe(60,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(61,"span",4),t.\u0275\u0275elementStart(62,"button",30),t.\u0275\u0275pipe(63,"async"),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(ge),t.\u0275\u0275resetView(Y.checkAccess())}),t.\u0275\u0275text(64),t.\u0275\u0275pipe(65,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"button",31),t.\u0275\u0275pipe(67,"async"),t.\u0275\u0275text(68),t.\u0275\u0275pipe(69,"translate"),t.\u0275\u0275elementEnd()()()()()()()}2&Z&&(t.\u0275\u0275advance(),t.\u0275\u0275styleMap(Y.popoverComponent?t.\u0275\u0275pureFunction0(63,y):t.\u0275\u0275pureFunction0(64,b)),t.\u0275\u0275classProp("settings-card",!Y.detailsMode),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(9,33,!Y.hideLoadingBar&&Y.isLoading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Y.hideLoadingBar||!1===t.\u0275\u0275pipeBind1(11,35,Y.isLoading$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("formGroup",Y.repositorySettingsForm),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(16,37,Y.isLoading$)),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",Y.repositorySettingsForm.get("repositoryUri").hasError("required")),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(29,39,"admin.repository-read-only")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(32,41,"admin.show-merge-commits")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(34,43,Y.isLoading$)),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngForOf",Y.repositoryAuthMethods),t.\u0275\u0275advance(),t.\u0275\u0275classProp("!hidden",Y.repositorySettingsForm.get("authMethod").value!==Y.repositoryAuthMethod.USERNAME_PASSWORD),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(47,45,"common.enter-username")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",Y.showChangePassword),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",Y.changePassword||!Y.showChangePassword),t.\u0275\u0275advance(),t.\u0275\u0275classProp("!hidden",Y.repositorySettingsForm.get("authMethod").value!==Y.repositoryAuthMethod.PRIVATE_KEY),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("dropLabel",t.\u0275\u0275pipeBind1(52,47,"admin.drop-private-key-file-or")),t.\u0275\u0275property("existingFileName",Y.repositorySettingsForm.get("privateKeyFileName").value)("label",t.\u0275\u0275pipeBind1(53,49,"admin.private-key")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",Y.showChangePrivateKeyPassword),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",Y.changePrivateKeyPassword||!Y.showChangePrivateKeyPassword),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("!hidden",!Y.settings),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(58,51,Y.isLoading$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(60,53,"action.delete")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(63,55,Y.isLoading$)||Y.repositorySettingsForm.invalid),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(65,57,"admin.check-access")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(67,59,Y.isLoading$)||Y.repositorySettingsForm.invalid||!Y.repositorySettingsForm.dirty),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(69,61,"action.save")," "))},dependencies:[P.NgForOf,P.NgIf,A.HelpComponent,u.MatButton,m.MatCheckbox,p.MatCard,p.MatCardContent,p.MatCardHeader,p.MatCardTitle,v.MatProgressBar,T.MatInput,C.MatFormField,C.MatLabel,C.MatHint,C.MatError,C.MatSuffix,_.MatSelect,E.MatOption,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.NgModel,h.FormGroupDirective,h.FormControlName,f.FileInputComponent,O.TranslateDirective,g.TogglePasswordComponent,P.AsyncPipe,O.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-card.repository-settings[_ngcontent-%COMP%]{margin:8px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 16px 8px;margin-bottom:10px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3;width:fit-content}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{display:block;margin-top:16px}','@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{margin:8px}[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 16px 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#000000b3}@media screen and (min-width: 960px) and (max-width: 1279px){[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 1280px){[_nghost-%COMP%]   .mat-mdc-card.settings-card[_ngcontent-%COMP%]{width:60%}}']})}}(0,e.__decorate)([(0,a.coerceBoolean)(),(0,e.__metadata)("design:type",Object)],oe.prototype,"hideLoadingBar",void 0)},40810:(Re,X,n)=>{"use strict";n.d(X,{d:()=>Q});var e=n(93953),t=n(9310),c=n(63729),h=n(14192),S=(n(90039),n(60177)),G=n(27112);const K=["repositorySettingsComponent"];function H(z,L){if(1&z&&e.\u0275\u0275element(0,"tb-repository-settings",3,1),2&z){const B=e.\u0275\u0275nextContext();e.\u0275\u0275property("detailsMode",B.detailsMode)("popoverComponent",B.popoverComponent)}}function k(z,L){if(1&z){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-entity-versions-table",4),e.\u0275\u0275listener("versionRestored",function(){e.\u0275\u0275restoreView(B);const U=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(U.versionRestored.emit())}),e.\u0275\u0275elementEnd()}if(2&z){const B=e.\u0275\u0275nextContext();e.\u0275\u0275property("singleEntityMode",B.singleEntityMode)("popoverComponent",B.popoverComponent)("onBeforeCreateVersion",B.onBeforeCreateVersion)("active",B.active)("entityId",B.entityId)("entityName",B.entityName)("externalEntityId",B.externalEntityId)}}class Q{constructor(L){this.store=L,this.detailsMode=!1,this.active=!0,this.singleEntityMode=!1,this.versionRestored=new e.EventEmitter,this.hasRepository$=this.store.pipe((0,t.select)(c.vu))}ngOnInit(){}confirmForm(){return this.repositorySettingsComponent?.repositorySettingsForm}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(t.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-version-control"]],viewQuery:function(B,I){if(1&B&&e.\u0275\u0275viewQuery(K,5),2&B){let U;e.\u0275\u0275queryRefresh(U=e.\u0275\u0275loadQuery())&&(I.repositorySettingsComponent=U.first)}},inputs:{detailsMode:"detailsMode",popoverComponent:"popoverComponent",active:"active",singleEntityMode:"singleEntityMode",externalEntityId:"externalEntityId",entityId:"entityId",entityName:"entityName",onBeforeCreateVersion:"onBeforeCreateVersion"},outputs:{versionRestored:"versionRestored"},decls:4,vars:4,consts:[["versionsTable",""],["repositorySettingsComponent",""],["hideLoadingBar","",3,"detailsMode","popoverComponent",4,"ngIf","ngIfElse"],["hideLoadingBar","",3,"detailsMode","popoverComponent"],[3,"versionRestored","singleEntityMode","popoverComponent","onBeforeCreateVersion","active","entityId","entityName","externalEntityId"]],template:function(B,I){if(1&B&&(e.\u0275\u0275template(0,H,2,2,"tb-repository-settings",2),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,k,1,7,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),2&B){const U=e.\u0275\u0275reference(3);e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(1,2,I.hasRepository$))("ngIfElse",U)}},dependencies:[S.NgIf,h.h,G.a,S.AsyncPipe],styles:['@charset "UTF-8";']})}}},70933:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{EditWidgetActionsTooltipComponent:()=>_e,WidgetComponentAction:()=>w,WidgetComponentActionType:()=>D,WidgetContainerComponent:()=>ee});var e=n(93953),t=n(69749),h=(n(11035),n(27997)),V=n(15673),S=n(19724),G=n(56508),K=n(9310),H=n(60177),k=n(62901),Q=n(92369),z=n(88834),L=n(14823),B=n(89417),I=n(99691),U=n(81556),F=n(73955),a=n(42415);const O=["tbWidgetElement"],P=ve=>({"tb-widget-actions-absolute":ve});function A(ve,Ee){1&ve&&e.\u0275\u0275elementContainer(0)}function u(ve,Ee){if(1&ve&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,A,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&ve){e.\u0275\u0275nextContext(2);const $=e.\u0275\u0275reference(7);e.\u0275\u0275advance(),e.\u0275\u0275property("ngTemplateOutlet",$)}}function m(ve,Ee){if(1&ve){const $=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275listener("click",function(Te){const oe=e.\u0275\u0275restoreView($).$implicit;return e.\u0275\u0275resetView(oe.onAction(Te))}),e.\u0275\u0275elementStart(1,"tb-icon"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&ve){const $=Ee.$implicit,be=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("!hidden",be.isEdit),e.\u0275\u0275propertyInterpolate("matTooltip",$.displayName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate($.icon)}}function p(ve,Ee){if(1&ve){const $=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275listener("click",function(Te){const oe=e.\u0275\u0275restoreView($).$implicit;return e.\u0275\u0275resetView(oe.onAction(Te))}),e.\u0275\u0275elementStart(2,"tb-icon"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&ve){const $=Ee.$implicit,be=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("!hidden",be.isEdit||!$.show),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(1,4,$.name)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate($.icon)}}function v(ve,Ee){if(1&ve){const $=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275listener("mousedown",function(Te){return e.\u0275\u0275restoreView($),e.\u0275\u0275resetView(Te.stopPropagation())}),e.\u0275\u0275template(1,m,3,4,"button",12)(2,p,4,6,"button",12),e.\u0275\u0275elementStart(3,"button",13),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275listener("click",function(Te){e.\u0275\u0275restoreView($);const oe=e.\u0275\u0275nextContext(2);return Te.stopPropagation(),oe.widget.isFullscreen=!oe.widget.isFullscreen,e.\u0275\u0275resetView(oe.updateEditWidgetActionsTooltipState())}),e.\u0275\u0275elementStart(5,"tb-icon"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()()}if(2&ve){const $=e.\u0275\u0275nextContext(2),be=e.\u0275\u0275reference(5);e.\u0275\u0275classMap(e.\u0275\u0275pureFunction1(10,P,!($.widget.showWidgetTitlePanel&&(null==be.widgetContext||!be.widgetContext.embedTitlePanel)&&($.widget.showTitle||$.widget.hasAggregation)))),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",$.widget.customHeaderActions),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",$.widget.widgetActions),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",$.isEdit||!$.widget.enableFullscreen),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,8,$.widget.isFullscreen?"fullscreen.exit":"fullscreen.expand")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate($.widget.isFullscreen?"fullscreen_exit":"fullscreen")}}function T(ve,Ee){if(1&ve&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,u,2,1,"ng-container",8)(2,v,7,12,"div",9),e.\u0275\u0275elementEnd()),2&ve){const $=e.\u0275\u0275nextContext(),be=e.\u0275\u0275reference(5);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!(null!=be.widgetContext&&be.widgetContext.embedTitlePanel)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",$.widget.showWidgetActions)}}function C(ve,Ee){if(1&ve&&(e.\u0275\u0275elementStart(0,"tb-icon"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ve){const $=e.\u0275\u0275nextContext(4);e.\u0275\u0275styleMap($.widget.titleIconStyle),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate($.widget.titleIcon)}}function _(ve,Ee){1&ve&&e.\u0275\u0275elementContainer(0)}function E(ve,Ee){if(1&ve&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275template(1,C,2,3,"tb-icon",19),e.\u0275\u0275elementStart(2,"div",20),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,_,1,0,"ng-container",10),e.\u0275\u0275elementEnd()),2&ve){const $=e.\u0275\u0275nextContext(2).titleSuffixTemplate,be=e.\u0275\u0275nextContext();e.\u0275\u0275property("matTooltip",be.widget.titleTooltip),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",be.widget.showTitleIcon),e.\u0275\u0275advance(),e.\u0275\u0275styleMap(be.widget.titleStyle),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,6,be.widget.title$)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",$)}}function f(ve,Ee){if(1&ve){const $=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tb-timewindow",21),e.\u0275\u0275twoWayListener("ngModelChange",function(Te){e.\u0275\u0275restoreView($),e.\u0275\u0275nextContext(3);const oe=e.\u0275\u0275reference(5);return e.\u0275\u0275twoWayBindingSet(oe.widget.config.timewindow,Te)||(oe.widget.config.timewindow=Te),e.\u0275\u0275resetView(Te)}),e.\u0275\u0275listener("ngModelChange",function(Te){e.\u0275\u0275restoreView($),e.\u0275\u0275nextContext(3);const oe=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(oe.onTimewindowChanged(Te))}),e.\u0275\u0275elementEnd()}if(2&ve){const $=e.\u0275\u0275nextContext(3),be=e.\u0275\u0275reference(5);e.\u0275\u0275propertyInterpolate("aggregation",$.widget.hasAggregation),e.\u0275\u0275propertyInterpolate("quickIntervalOnly",$.widget.onlyQuickInterval),e.\u0275\u0275propertyInterpolate("historyOnly",$.widget.onlyHistoryTimewindow),e.\u0275\u0275property("isEdit",$.isEdit)("timewindowStyle",be.widget.config.timewindowStyle),e.\u0275\u0275twoWayProperty("ngModel",be.widget.config.timewindow)}}function g(ve,Ee){if(1&ve&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275template(1,E,6,8,"div",16)(2,f,1,6,"tb-timewindow",17),e.\u0275\u0275elementEnd()),2&ve){const $=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",$.widget.showTitle),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",$.widget.hasTimewindow)}}function y(ve,Ee){if(1&ve&&e.\u0275\u0275template(0,g,3,2,"div",14),2&ve){const $=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",$.widget.showWidgetTitlePanel)}}function b(ve,Ee){if(1&ve){const $=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"button",5),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275listener("click",function(Te){e.\u0275\u0275restoreView($);const oe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(oe.container.onReplaceReferenceWithWidgetCopy(Te))}),e.\u0275\u0275elementStart(5,"tb-icon",6),e.\u0275\u0275text(6,"mdi:file-replace-outline"),e.\u0275\u0275elementEnd()()()}if(2&ve){const $=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,4,"widget.reference")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!$.container.isEditActionEnabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,6,"widget.replace-reference-with-widget-copy"))}}var D,ve;(ve=D||(D={}))[ve.MOUSE_DOWN=0]="MOUSE_DOWN",ve[ve.CLICKED=1]="CLICKED",ve[ve.CONTEXT_MENU=2]="CONTEXT_MENU",ve[ve.EDIT=3]="EDIT",ve[ve.EXPORT=4]="EXPORT",ve[ve.REMOVE=5]="REMOVE",ve[ve.REPLACE_REFERENCE_WITH_WIDGET_COPY=6]="REPLACE_REFERENCE_WITH_WIDGET_COPY";class w{}class ee extends t.H{get widgetEditActionsEnabled(){return(this.isEditActionEnabled||this.isRemoveActionEnabled||this.isExportActionEnabled)&&!this.widget?.isFullscreen}constructor(Ee,$,be,Te,oe,R){super(Ee),this.store=Ee,this.cd=$,this.renderer=be,this.container=Te,this.dashboardUtils=oe,this.utils=R,this.widgetContainerClass="tb-widget-container",this.disableWidgetInteraction=!1,this.widgetFullscreenChanged=new e.EventEmitter,this.widgetComponentAction=new e.EventEmitter,this.hovered=!1,this.isReferenceWidget=!1}ngOnInit(){this.widget.widgetContext.containerChangeDetector=this.cd;const Ee=this.widget.widget.config.widgetCss;(0,h.Q8)(Ee)&&(this.cssClass=this.utils.applyCssToElement(this.renderer,this.gridsterItem.el,"tb-widget-css",Ee)),a(this.gridsterItem.el).on("mousedown",be=>this.onMouseDown(be.originalEvent)),a(this.gridsterItem.el).on("click",be=>this.onClicked(be.originalEvent)),a(this.gridsterItem.el).on("tbcontextmenu",be=>this.onContextMenu(be));const $=this.widget.widgetContext.dashboardContentElement;$&&this.initEditWidgetActionTooltip($)}ngAfterViewInit(){this.widget.widgetContext.$widgetElement=a(this.tbWidgetElement.nativeElement)}ngOnChanges(Ee){for(const $ of Object.keys(Ee)){const be=Ee[$];!be.firstChange&&be.currentValue!==be.previousValue&&["isEditActionEnabled","isRemoveActionEnabled","isExportActionEnabled"].includes($)&&this.updateEditWidgetActionsTooltipState()}}ngOnDestroy(){this.cssClass&&this.utils.clearCssElement(this.renderer,this.cssClass),this.editWidgetActionsTooltip&&!this.editWidgetActionsTooltip.status().destroyed&&this.editWidgetActionsTooltip.destroy(),a(this.gridsterItem.el).off("mousedown"),a(this.gridsterItem.el).off("click"),a(this.gridsterItem.el).off("tbcontextmenu")}isHighlighted(Ee){return this.dashboardWidgets.isHighlighted(Ee)}isNotHighlighted(Ee){return this.dashboardWidgets.isNotHighlighted(Ee)}onFullscreenChanged(Ee){Ee?this.renderer.addClass(this.tbWidgetElement.nativeElement,this.cssClass):this.renderer.removeClass(this.tbWidgetElement.nativeElement,this.cssClass),this.widgetFullscreenChanged.emit(Ee)}onMouseDown(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.MOUSE_DOWN})}onClicked(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.CLICKED})}onContextMenu(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.CONTEXT_MENU})}onEdit(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.EDIT})}onReplaceReferenceWithWidgetCopy(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.REPLACE_REFERENCE_WITH_WIDGET_COPY})}onExport(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.EXPORT})}onRemove(Ee){Ee&&Ee.stopPropagation(),this.widgetComponentAction.emit({event:Ee,actionType:D.REMOVE})}updateEditWidgetActionsTooltipState(){this.editWidgetActionsTooltip&&(this.widgetEditActionsEnabled?this.editWidgetActionsTooltip.enable():this.editWidgetActionsTooltip.disable())}initEditWidgetActionTooltip(Ee){let $;(0,S.H)(n.e(89).then(n.t.bind(n,10089,23))).subscribe(()=>{a(this.gridsterItem.el).tooltipster({parent:a(Ee),delay:this.widget.selected?[0,1e7]:[0,100],distance:2,zIndex:151,arrow:!1,theme:["tb-widget-edit-actions-tooltip"],interactive:!0,trigger:"custom",triggerOpen:{mouseenter:!0},triggerClose:{mouseleave:!0},side:["top"],trackOrigin:!0,trackerInterval:25,content:"",functionPosition:(oe,R,N)=>{const Z=R.origin.getBoundingClientRect(),Y=Ee.getBoundingClientRect();return N.coord.left=Math.max(0,Z.right-N.size.width-Y.left),N.coord.top=N.coord.top-Y.top,N.target=Z.right,N},functionReady:(oe,R)=>{const N=a(R.tooltip);N.on("mouseenter",()=>{this.hovered=!0,this.cd.markForCheck()}),N.on("mouseleave",()=>{this.hovered=!1,this.cd.markForCheck()})},functionAfter:()=>{this.hovered=!1,this.cd.markForCheck()},functionBefore:()=>{this.widget.isReference=this.dashboardUtils.isReferenceWidget(this.widget.widgetContext.dashboard.stateController.dashboardCtrl.dashboardCtx.getDashboard(),this.widget.widgetId),$.instance.cd.detectChanges()}}),this.editWidgetActionsTooltip=a(this.gridsterItem.el).tooltipster("instance"),$=this.container.createComponent(_e),$.instance.container=this,$.instance.viewInited.subscribe(()=>{this.editWidgetActionsTooltip.status().open&&this.editWidgetActionsTooltip.reposition()}),this.editWidgetActionsTooltip.on("destroyed",()=>{$.destroy()});const be=$.instance.element.nativeElement,Te=be.firstChild;be.removeChild(Te),be.style.display="none",this.editWidgetActionsTooltip.content(Te),this.updateEditWidgetActionsTooltipState(),this.widget.onSelected(oe=>this.updateEditWidgetActionsTooltipSelectedState(oe))})}updateEditWidgetActionsTooltipSelectedState(Ee){this.editWidgetActionsTooltip&&(Ee?(this.editWidgetActionsTooltip.option("delay",[0,1e7]),this.editWidgetActionsTooltip.option("triggerClose",{mouseleave:!1}),this.widgetEditActionsEnabled&&this.editWidgetActionsTooltip.open()):(this.editWidgetActionsTooltip.option("delay",[0,100]),this.editWidgetActionsTooltip.option("triggerClose",{mouseleave:!0}),this.editWidgetActionsTooltip.close()))}static{this.\u0275fac=function($){return new($||ee)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ViewContainerRef),e.\u0275\u0275directiveInject(G.N),e.\u0275\u0275directiveInject(V.T))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:ee,selectors:[["tb-widget-container"]],viewQuery:function($,be){if(1&$&&e.\u0275\u0275viewQuery(O,7),2&$){let Te;e.\u0275\u0275queryRefresh(Te=e.\u0275\u0275loadQuery())&&(be.tbWidgetElement=Te.first)}},hostVars:2,hostBindings:function($,be){2&$&&e.\u0275\u0275classMap(be.widgetContainerClass)},inputs:{gridsterItem:"gridsterItem",widget:"widget",dashboardStyle:"dashboardStyle",backgroundImage:"backgroundImage",isEdit:"isEdit",isEditingWidget:"isEditingWidget",isPreview:"isPreview",isMobile:"isMobile",dashboardWidgets:"dashboardWidgets",isEditActionEnabled:"isEditActionEnabled",isExportActionEnabled:"isExportActionEnabled",isRemoveActionEnabled:"isRemoveActionEnabled",disableWidgetInteraction:"disableWidgetInteraction"},outputs:{widgetFullscreenChanged:"widgetFullscreenChanged",widgetComponentAction:"widgetComponentAction"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],decls:8,vars:27,consts:[["tbWidgetElement",""],["widgetComponent",""],["widgetTitlePanel",""],["tb-fullscreen","",1,"tb-widget",3,"fullscreenChanged","fullscreen","fullscreenBackgroundStyle","fullscreenBackgroundImage"],["class","tb-widget-header",4,"ngIf"],[1,"tb-widget-content"],[3,"dashboardWidget","isEdit","isPreview","isMobile","widgetTitlePanel"],[1,"tb-widget-header"],[4,"ngIf"],["class","tb-widget-actions",3,"class","mousedown",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"tb-widget-actions",3,"mousedown"],["mat-icon-button","","matTooltipPosition","above",3,"!hidden","matTooltip","click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltipPosition","above",3,"click","matTooltip"],["class","tb-widget-title",4,"ngIf"],[1,"tb-widget-title"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above","class","title-row",3,"matTooltip",4,"ngIf"],["alwaysDisplayTypePrefix","","timezone","true","noMargin","","noPadding","",3,"aggregation","quickIntervalOnly","historyOnly","isEdit","timewindowStyle","ngModel","ngModelChange",4,"ngIf"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above",1,"title-row",3,"matTooltip"],[3,"style",4,"ngIf"],[1,"mat-subtitle-1","title"],["alwaysDisplayTypePrefix","","timezone","true","noMargin","","noPadding","",3,"ngModelChange","aggregation","quickIntervalOnly","historyOnly","isEdit","timewindowStyle","ngModel"]],template:function($,be){if(1&$){const Te=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3,0),e.\u0275\u0275listener("fullscreenChanged",function(R){return e.\u0275\u0275restoreView(Te),e.\u0275\u0275resetView(be.onFullscreenChanged(R))}),e.\u0275\u0275template(2,T,3,2,"div",4),e.\u0275\u0275elementStart(3,"div",5),e.\u0275\u0275element(4,"tb-widget",6,1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,y,1,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)}if(2&$){const Te=e.\u0275\u0275reference(5),oe=e.\u0275\u0275reference(7);e.\u0275\u0275styleMap(be.widget.style),e.\u0275\u0275classProp("tb-highlighted",be.isHighlighted(be.widget))("tb-not-highlighted",be.isNotHighlighted(be.widget))("mat-elevation-z4",be.widget.dropShadow)("tb-overflow-visible",null==Te.widgetContext?null:Te.widgetContext.overflowVisible)("tb-has-timewindow",be.widget.hasTimewindow)("tb-edit",be.isEdit||be.isEditingWidget)("tb-hover",be.hovered),e.\u0275\u0275property("fullscreen",be.widget.isFullscreen)("fullscreenBackgroundStyle",be.dashboardStyle)("fullscreenBackgroundImage",be.backgroundImage),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!(null==Te.widgetContext||!Te.widgetContext.inited)),e.\u0275\u0275advance(),e.\u0275\u0275classProp("tb-no-interaction",be.disableWidgetInteraction),e.\u0275\u0275advance(),e.\u0275\u0275property("dashboardWidget",be.widget)("isEdit",be.isEdit)("isPreview",be.isPreview)("isMobile",be.isMobile)("widgetTitlePanel",oe)}},dependencies:[H.NgForOf,H.NgIf,H.NgTemplateOutlet,k.FullscreenDirective,Q.TimewindowComponent,z.MatIconButton,L.MatTooltip,B.NgControlStatus,B.NgModel,I.TbIconComponent,U.WidgetComponent,H.AsyncPipe,F.TranslatePipe],styles:['@charset "UTF-8";.tb-widget-container{position:absolute;inset:0}.tb-widget{position:absolute;inset:0;margin:0;overflow:hidden;outline:none;transition:all .2s ease-in-out}.tb-widget.tb-overflow-visible,.tb-widget.tb-overflow-visible .tb-widget{overflow:visible}div.tb-widget{display:flex;flex-direction:column}div.tb-widget .tb-widget-header{display:flex;flex-direction:row;place-content:flex-start space-between;align-items:flex-start}div.tb-widget .tb-widget-title{display:flex;flex-direction:column;place-content:flex-start center;align-items:flex-start;max-height:65px;padding-top:5px;padding-left:5px;overflow:hidden}div.tb-widget .tb-widget-title tb-timewindow{font-size:14px;opacity:.85}div.tb-widget .tb-widget-title .title-row{display:flex;flex-direction:row;place-content:center flex-start;align-items:center;gap:4px;width:100%}div.tb-widget .tb-widget-title .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:24px;letter-spacing:normal;margin:0}div.tb-widget .tb-widget-actions{display:flex;flex-direction:row;place-content:center flex-start;align-items:center;z-index:19;margin:5px 0 0}div.tb-widget .tb-widget-actions-absolute{position:absolute;top:3px;right:8px;z-index:150}div.tb-widget .tb-widget-actions button.mat-mdc-icon-button{width:32px;min-width:32px;height:32px;min-height:32px;padding:0!important;margin:0!important;line-height:20px}div.tb-widget .tb-widget-actions button.mat-mdc-icon-button.mat-mdc-button-base .mat-mdc-button-touch-target{height:32px;width:32px}div.tb-widget .tb-widget-actions button.mat-mdc-icon-button .mat-icon{width:20px;min-width:20px;height:20px;min-height:20px;font-size:20px;line-height:20px}div.tb-widget .tb-widget-actions button.mat-mdc-icon-button .mat-icon svg{width:20px;height:20px}div.tb-widget .tb-widget-title .mat-icon,div.tb-widget .tb-widget-actions .mat-icon{vertical-align:bottom}div.tb-widget .tb-widget-content{flex:1;position:relative}div.tb-widget .tb-widget-content.tb-no-interaction{pointer-events:none}div.tb-widget.tb-highlighted{border:1px solid #039be5;box-shadow:0 0 20px #039be5}div.tb-widget.tb-not-highlighted{opacity:.5}div.tb-widget.tb-hover:not(.tb-highlighted){box-shadow:0 0 20px #00000080}div.tb-widget.tb-edit{cursor:pointer}gridster-item:hover .tb-widget-container div.tb-widget.tb-edit:not(.tb-highlighted){box-shadow:0 0 20px #00000080}.tooltipster-sidetip.tb-widget-edit-actions-tooltip{position:absolute!important}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-box{-webkit-user-select:none;user-select:none;background:#fff;border:1px solid rgba(0,0,0,.38);box-shadow:0 0 8px #00000080}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-box .tooltipster-content{padding:4px 8px;font-size:12px;line-height:12px;font-weight:500;color:#000000c2}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-box .tooltipster-content .tb-widget-action-container{display:flex;flex-direction:column;gap:6px}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-box .tooltipster-content .tb-widget-action-container .tb-widget-actions-panel{display:flex;flex-direction:row;place-content:center space-between;align-items:center;gap:8px}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-box .tooltipster-content .tb-widget-action-container .tb-widget-reference-panel{display:flex;flex-direction:row;place-content:center space-between;align-items:center;gap:8px;font-weight:400;color:#305680;font-size:11px;padding:4px 4px 4px 6px;border-radius:2px}.tooltipster-sidetip.tb-widget-edit-actions-tooltip .tooltipster-arrow .tooltipster-arrow-uncropped .tooltipster-arrow-background{border-width:12px}.tooltipster-sidetip.tb-widget-edit-actions-tooltip.tooltipster-top .tooltipster-arrow{bottom:-1px}.tooltipster-sidetip.tb-widget-edit-actions-tooltip.tooltipster-top .tooltipster-arrow .tooltipster-arrow-uncropped .tooltipster-arrow-border{border-top-color:#00000061}.tooltipster-sidetip.tb-widget-edit-actions-tooltip.tooltipster-top .tooltipster-arrow .tooltipster-arrow-uncropped .tooltipster-arrow-background{border-top-color:#fff;left:-2px}\n'],encapsulation:2,changeDetection:0})}}class _e{constructor(Ee,$){this.element=Ee,this.cd=$,this.viewInited=new e.EventEmitter}ngAfterViewInit(){this.viewInited.emit()}static{this.\u0275fac=function($){return new($||_e)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:_e,selectors:[["ng-component"]],inputs:{container:"container"},outputs:{viewInited:"viewInited"},decls:15,vars:16,consts:[[1,"tb-widget-action-container"],["class","tb-widget-reference-panel tb-primary-fill",4,"ngIf"],[1,"tb-widget-actions-panel"],["mat-icon-button","","matTooltipPosition","above",1,"tb-mat-20",3,"click","matTooltip"],[1,"tb-widget-reference-panel","tb-primary-fill"],["mat-icon-button","","color","primary","matTooltipPosition","above",1,"tb-mat-16",3,"click","matTooltip"],["matButtonIcon",""]],template:function($,be){1&$&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,b,7,8,"div",1),e.\u0275\u0275elementStart(2,"div",2)(3,"button",3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275listener("click",function(oe){return be.container.onEdit(oe)}),e.\u0275\u0275elementStart(5,"tb-icon"),e.\u0275\u0275text(6,"edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"button",3),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275listener("click",function(oe){return be.container.onExport(oe)}),e.\u0275\u0275elementStart(9,"tb-icon"),e.\u0275\u0275text(10,"file_download"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"button",3),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275listener("click",function(oe){return be.container.onRemove(oe)}),e.\u0275\u0275elementStart(13,"tb-icon"),e.\u0275\u0275text(14,"close"),e.\u0275\u0275elementEnd()()()()),2&$&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",be.container.widget.isReference),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",!be.container.isEditActionEnabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(4,10,"widget.edit")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",!be.container.isExportActionEnabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(8,12,"widget.export")),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("!hidden",!be.container.isRemoveActionEnabled),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(12,14,"widget.remove")))},dependencies:[H.NgIf,z.MatIconButton,L.MatTooltip,I.TbIconComponent,F.TranslatePipe],encapsulation:2})}}},89466:(Re,X,n)=>{"use strict";n.d(X,{G:()=>K});var e=n(93953),t=n(69749),c=n(27997),h=n(9310),V=n(57469);const S=[[["",8,"tb-preview-panel-content"]]],G=[".tb-preview-panel-content"];class K extends t.H{constructor(k){super(k),this.store=k,this.previewWidth="100%",this.previewHeight="70%"}ngOnInit(){this.loadPreviewWidget()}ngOnChanges(k){let Q=!1;for(const z of Object.keys(k)){const L=k[z];!L.firstChange&&L.currentValue!==L.previousValue&&["widget","widgetConfig"].includes(z)&&(Q=!0)}Q&&this.loadPreviewWidget()}loadPreviewWidget(){if(this.widget){const k=(0,c.Go)(this.widget);k.sizeX=24,k.sizeY=2*this.widget.sizeY,k.row=0,k.col=0,k.config=this.widgetConfig,this.widgets=[k]}}static{this.\u0275fac=function(Q){return new(Q||K)(e.\u0275\u0275directiveInject(h.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:K,selectors:[["tb-widget-preview"]],inputs:{aliasController:"aliasController",stateController:"stateController",dashboardTimewindow:"dashboardTimewindow",widget:"widget",widgetConfig:"widgetConfig",previewWidth:"previewWidth",previewHeight:"previewHeight"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:G,decls:3,vars:15,consts:[[1,"tb-preview-dashboard",3,"aliasController","stateController","dashboardTimewindow","widgets","autofillHeight","columns","isEdit","isPreview","isMobileDisabled","isEditActionEnabled","isRemoveActionEnabled"],[1,"tb-preview-panel"]],template:function(Q,z){1&Q&&(e.\u0275\u0275projectionDef(S),e.\u0275\u0275element(0,"tb-dashboard",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd()),2&Q&&(e.\u0275\u0275styleProp("width",z.previewWidth)("height",z.previewHeight),e.\u0275\u0275property("aliasController",z.aliasController)("stateController",z.stateController)("dashboardTimewindow",z.dashboardTimewindow)("widgets",z.widgets)("autofillHeight",!0)("columns",24)("isEdit",!1)("isPreview",!0)("isMobileDisabled",!0)("isEditActionEnabled",!1)("isRemoveActionEnabled",!1))},dependencies:[V.DashboardComponent],styles:['@charset "UTF-8";[_nghost-%COMP%]{z-index:10;background:#f3f6fa;display:flex;overflow:auto}[_nghost-%COMP%]   .tb-preview-dashboard[_ngcontent-%COMP%]{position:relative;margin:auto}[_nghost-%COMP%]   .tb-preview-panel[_ngcontent-%COMP%]{position:absolute;top:16px;left:24px}[_nghost-%COMP%]     tb-dashboard.tb-preview-dashboard .tb-dashboard-content{background-color:transparent!important}']})}}},85612:(Re,X,n)=>{"use strict";n.r(X),n.d(X,{DeviceWizardDialogComponent:()=>oe});var e=n(93953),t=n(89417),c=n(56542),h=n(5095),V=n(25967),S=n(18810),G=n(96354),K=n(99437),H=n(49466),k=n(74972),Q=n(27997),z=n(9310),L=n(7901),B=n(34006),I=n(99327),U=n(60177),F=n(37441),a=n(39828),O=n(88834),P=n(99213),A=n(67575),u=n(59042),m=n(53719),p=n(55911),v=n(71997),T=n(30450),C=n(76233),_=n(73955),E=n(86508),f=n(19325);const g=["addDeviceWizardStepper"],y=R=>({label:R});function b(R,N){1&R&&e.\u0275\u0275element(0,"mat-progress-bar",35)}function D(R,N){1&R&&(e.\u0275\u0275elementStart(0,"mat-icon"),e.\u0275\u0275text(1,"check"),e.\u0275\u0275elementEnd())}function w(R,N){1&R&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&R&&e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(1,1,"device.wizard.device-details"))}function ee(R,N){1&R&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&R&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.name-required")," "))}function _e(R,N){1&R&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&R&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.name-max-length")," "))}function ve(R,N){1&R&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&R&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.label-max-length")," "))}function Ee(R,N){1&R&&(e.\u0275\u0275elementStart(0,"mat-slide-toggle",36),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&R&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"device.overwrite-activity-time")," "))}function $(R,N){1&R&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"translate")),2&R&&e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(1,1,"device.credentials"))}function be(R,N){if(1&R){const Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Z);const ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ge.previousStep())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&R){const Z=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,Z.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"action.back"))}}function Te(R,N){if(1&R){const Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",38),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Z);const ge=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ge.nextStep())}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()}if(2&R){const Z=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(1,2,Z.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,6,"action.next-with-label",e.\u0275\u0275pureFunction1(9,y,e.\u0275\u0275pipeBind1(3,4,Z.getFormLabel(Z.selectedIndex+1)))))}}class oe extends c.m{constructor(N,Z,Y,ge,ce,se){super(N,Z,Y),this.store=N,this.router=Z,this.dialogRef=Y,this.deviceService=ge,this.breakpointObserver=ce,this.fb=se,this.selectedIndex=0,this.credentialsOptionalStep=!0,this.showNext=!0,this.entityType=V.ck,this.currentDeviceProfileTransportType=h.y0.DEFAULT,this.stepperOrientation=this.breakpointObserver.observe(k.zV["gt-sm"]).pipe((0,G.T)(({matches:J})=>J?"horizontal":"vertical")),this.stepperLabelPosition=this.breakpointObserver.observe(k.zV["gt-sm"]).pipe((0,G.T)(({matches:J})=>J?"end":"bottom")),this.deviceWizardFormGroup=this.fb.group({name:["",[t.Validators.required,t.Validators.maxLength(255)]],label:["",t.Validators.maxLength(255)],gateway:[!1],overwriteActivityTime:[!1],customerId:[null],deviceProfileId:[null,t.Validators.required],description:[""]}),this.credentialsFormGroup=this.fb.group({credential:[]})}cancel(){this.dialogRef.close(null)}previousStep(){this.addDeviceWizardStepper.previous()}nextStep(){this.addDeviceWizardStepper.next()}getFormLabel(N){switch(N){case 0:return"device.wizard.device-details";case 1:return"device.credentials"}}get maxStepperIndex(){return this.addDeviceWizardStepper?._steps?.length-1}add(){this.allValid()&&this.createDevice().subscribe(N=>this.dialogRef.close(N))}get deviceTransportType(){return this.currentDeviceProfileTransportType}deviceProfileChanged(N){N&&(this.currentDeviceProfileTransportType=N.transportType,this.credentialsOptionalStep=this.currentDeviceProfileTransportType!==h.y0.LWM2M)}createDevice(){const N={name:this.deviceWizardFormGroup.get("name").value,label:this.deviceWizardFormGroup.get("label").value,deviceProfileId:this.deviceWizardFormGroup.get("deviceProfileId").value,additionalInfo:{gateway:this.deviceWizardFormGroup.get("gateway").value,overwriteActivityTime:this.deviceWizardFormGroup.get("overwriteActivityTime").value,description:this.deviceWizardFormGroup.get("description").value},customerId:this.deviceWizardFormGroup.get("customerId").value};return this.addDeviceWizardStepper.steps.last.completed||this.addDeviceWizardStepper.selectedIndex>0?this.deviceService.saveDeviceWithCredentials((0,Q.XU)(N),(0,Q.XU)(this.credentialsFormGroup.value.credential)).pipe((0,K.W)(Z=>(Z.error.message.includes("Device credentials")?this.addDeviceWizardStepper.selectedIndex=1:this.addDeviceWizardStepper.selectedIndex=0,(0,S.$)(()=>Z)))):this.deviceService.saveDevice((0,Q.XU)(N)).pipe((0,K.W)(Z=>(this.addDeviceWizardStepper.selectedIndex=0,(0,S.$)(Z))))}allValid(){return!this.addDeviceWizardStepper.steps.find((N,Z)=>!!N.stepControl.invalid&&(N.interacted=!0,this.addDeviceWizardStepper.selectedIndex=Z,!0))}changeStep(N){this.selectedIndex=N.selectedIndex,this.showNext=this.selectedIndex!==this.maxStepperIndex}static{this.\u0275fac=function(Z){return new(Z||oe)(e.\u0275\u0275directiveInject(z.Store),e.\u0275\u0275directiveInject(L.Router),e.\u0275\u0275directiveInject(B.MatDialogRef),e.\u0275\u0275directiveInject(H.g),e.\u0275\u0275directiveInject(I.BreakpointObserver),e.\u0275\u0275directiveInject(t.FormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:oe,selectors:[["tb-device-wizard"]],viewQuery:function(Z,Y){if(1&Z&&e.\u0275\u0275viewQuery(g,7),2&Z){let ge;e.\u0275\u0275queryRefresh(ge=e.\u0275\u0275loadQuery())&&(Y.addDeviceWizardStepper=ge.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:62,vars:42,consts:[["addDeviceWizardStepper",""],["color","primary"],["translate",""],[1,"flex-1"],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"selectionChange","linear","labelPosition","orientation"],["matStepperIcon","edit"],[3,"stepControl"],[2,"padding-bottom","16px",3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","label"],["required","","addNewProfile","","selectDefaultProfile","","formControlName","deviceProfileId",3,"deviceProfileChanged"],[1,"toggle-group"],["formControlName","gateway",2,"min-width","165px"],["formControlName","overwriteActivityTime",4,"ngIf"],["useFullEntityId","","formControlName","customerId","labelText","device.assign-to-customer",3,"entityType"],["subscriptSizing","dynamic",1,"mat-block"],["matInput","","formControlName","description","rows","1"],[3,"stepControl","optional"],["initAccessToken","","formControlName","credential",3,"deviceTransportType"],["mat-dialog-actions","",1,"tb-dialog-actions"],[1,"dialog-actions-row"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"disabled","click",4,"ngIf"],[2,"width","100%"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["color","warn","mode","indeterminate"],["formControlName","overwriteActivityTime"],["mat-stroked-button","",3,"click","disabled"],["mat-stroked-button","","color","primary",3,"click","disabled"]],template:function(Z,Y){if(1&Z){const ge=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-toolbar",1)(1,"h2",2),e.\u0275\u0275text(2,"device.add-device-text"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",3)(4,"div",4),e.\u0275\u0275elementStart(5,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ge),e.\u0275\u0275resetView(Y.cancel())}),e.\u0275\u0275elementStart(6,"mat-icon",6),e.\u0275\u0275text(7,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(8,b,1,0,"mat-progress-bar",7),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementStart(10,"div",8)(11,"mat-horizontal-stepper",9,0),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("selectionChange",function(se){return e.\u0275\u0275restoreView(ge),e.\u0275\u0275resetView(Y.changeStep(se))}),e.\u0275\u0275template(15,D,2,0,"ng-template",10),e.\u0275\u0275elementStart(16,"mat-step",11)(17,"form",12),e.\u0275\u0275template(18,w,2,3,"ng-template",13),e.\u0275\u0275elementStart(19,"fieldset",14),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275elementStart(21,"mat-form-field",15)(22,"mat-label",2),e.\u0275\u0275text(23,"device.name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",16),e.\u0275\u0275template(25,ee,3,3,"mat-error",17)(26,_e,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"mat-form-field",15)(28,"mat-label",2),e.\u0275\u0275text(29,"device.label"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",18),e.\u0275\u0275template(31,ve,3,3,"mat-error",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"tb-device-profile-autocomplete",19),e.\u0275\u0275listener("deviceProfileChanged",function(se){return e.\u0275\u0275restoreView(ge),e.\u0275\u0275resetView(Y.deviceProfileChanged(se))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",20)(34,"mat-slide-toggle",21),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,Ee,3,3,"mat-slide-toggle",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(38,"tb-entity-autocomplete",23),e.\u0275\u0275elementStart(39,"mat-form-field",24)(40,"mat-label",2),e.\u0275\u0275text(41,"device.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"textarea",25),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(43,"mat-step",26),e.\u0275\u0275template(44,$,2,3,"ng-template",13),e.\u0275\u0275elementStart(45,"form",12),e.\u0275\u0275element(46,"tb-device-credentials",27),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"div",28)(48,"div",29),e.\u0275\u0275template(49,be,4,6,"button",30),e.\u0275\u0275element(50,"span",3),e.\u0275\u0275template(51,Te,5,11,"button",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(52,"mat-divider",32),e.\u0275\u0275elementStart(53,"div",29)(54,"button",33),e.\u0275\u0275pipe(55,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ge),e.\u0275\u0275resetView(Y.cancel())}),e.\u0275\u0275text(56),e.\u0275\u0275pipe(57,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"button",34),e.\u0275\u0275pipe(59,"async"),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(ge),e.\u0275\u0275resetView(Y.add())}),e.\u0275\u0275text(60),e.\u0275\u0275pipe(61,"translate"),e.\u0275\u0275elementEnd()()()}2&Z&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("tb-help","devices"),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,24,Y.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("linear",!0)("labelPosition",e.\u0275\u0275pipeBind1(13,26,Y.stepperLabelPosition))("orientation",e.\u0275\u0275pipeBind1(14,28,Y.stepperOrientation)),e.\u0275\u0275advance(5),e.\u0275\u0275property("stepControl",Y.deviceWizardFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("formGroup",Y.deviceWizardFormGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,30,Y.isLoading$)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",Y.deviceWizardFormGroup.get("name").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",Y.deviceWizardFormGroup.get("name").hasError("maxlength")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",Y.deviceWizardFormGroup.get("label").hasError("maxlength")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(36,32,"device.is-gateway")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.deviceWizardFormGroup.get("gateway").value),e.\u0275\u0275advance(),e.\u0275\u0275property("entityType",Y.entityType.CUSTOMER),e.\u0275\u0275advance(5),e.\u0275\u0275property("stepControl",Y.credentialsFormGroup)("optional",Y.credentialsOptionalStep),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",Y.credentialsFormGroup),e.\u0275\u0275advance(),e.\u0275\u0275property("deviceTransportType",Y.deviceTransportType),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Y.selectedIndex>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.showNext),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(55,34,Y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(57,36,"action.cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(59,38,Y.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(61,40,"action.add")))},dependencies:[U.NgIf,F.HelpComponent,a.EntityAutocompleteComponent,O.MatButton,O.MatIconButton,P.MatIcon,A.MatProgressBar,u.MatInput,m.MatFormField,m.MatLabel,m.MatError,p.MatToolbar,B.MatDialogActions,B.MatDialogContent,v.MatDivider,T.MatSlideToggle,C.MatStep,C.MatStepLabel,C.MatStepper,C.MatStepperIcon,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.FormGroupDirective,t.FormControlName,_.TranslateDirective,E.g,f.DeviceProfileAutocompleteComponent,U.AsyncPipe,_.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{height:100%;display:grid;grid-template-rows:min-content 4px auto min-content}[_nghost-%COMP%]   .toggle-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:16px;margin-bottom:16px}@media screen and (min-width: 600px) and (max-width: 959px){[_nghost-%COMP%]{min-width:470px}}@media screen and (min-width: 960px){[_nghost-%COMP%]{min-width:650px}}.mat-mdc-dialog-container[_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%], .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%]{padding:0;grid-row:4}.mat-mdc-dialog-container[_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%]   .dialog-actions-row[_ngcontent-%COMP%], .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%]   .dialog-actions-row[_ngcontent-%COMP%]{padding:8px;display:flex;gap:8px;justify-content:flex-end;flex:1}.mat-mdc-dialog-container[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%], .mat-mdc-dialog-container   [_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{grid-row:3;padding:0}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal{display:flex;height:100%;overflow:hidden}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-wrapper{width:100%}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:500px;max-height:100%;overflow-y:auto;scrollbar-gutter:stable}']})}}},73414:(Re,X,n)=>{"use strict";n.d(X,{j:()=>p});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(49466),S=n(25967),G=n(27468),K=n(20580),H=n(80727),k=n(85568),Q=n(56542),z=n(44037),L=n(9310),B=n(7901),I=n(60177),U=n(44216),F=n(88834),a=n(99213),O=n(67575),P=n(55911),A=n(73955);function u(v,T){1&v&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function m(v,T){1&v&&e.\u0275\u0275element(0,"div",14)}class p extends Q.m{constructor(T,C,_,E,f,g,y,b,D,w,ee){super(T,C,w),this.store=T,this.router=C,this.data=_,this.deviceService=E,this.assetService=f,this.edgeService=g,this.entityViewService=y,this.dashboardService=b,this.errorStateMatcher=D,this.dialogRef=w,this.fb=ee,this.submitted=!1,this.entityType=_.entityType}ngOnInit(){switch(this.addEntitiesToCustomerFormGroup=this.fb.group({entityIds:[null,[h.Validators.required]]}),this.data.entityType){case S.ck.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-device-to-customer-text";break;case S.ck.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-asset-to-customer-text";break;case S.ck.EDGE:this.assignToCustomerTitle="edge.assign-edge-to-customer",this.assignToCustomerText="edge.assign-edge-to-customer-text";break;case S.ck.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-entity-view-to-customer-text";break;case S.ck.DASHBOARD:this.assignToCustomerTitle="dashboard.assign-dashboard-to-customer",this.assignToCustomerText="dashboard.assign-dashboard-to-customer-text"}}isErrorState(T,C){const _=this.errorStateMatcher.isErrorState(T,C),E=!!(T&&T.invalid&&this.submitted);return _||E}cancel(){this.dialogRef.close(!1)}assign(){this.submitted=!0;const T=this.addEntitiesToCustomerFormGroup.get("entityIds").value,C=[];T.forEach(_=>{C.push(this.getAssignToCustomerTask(this.data.customerId,_))}),(0,G.p)(C).subscribe(()=>{this.dialogRef.close(!0)})}getAssignToCustomerTask(T,C){switch(this.data.entityType){case S.ck.DEVICE:return this.deviceService.assignDeviceToCustomer(T,C);case S.ck.ASSET:return this.assetService.assignAssetToCustomer(T,C);case S.ck.EDGE:return this.edgeService.assignEdgeToCustomer(T,C);case S.ck.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(T,C);case S.ck.DASHBOARD:return this.dashboardService.assignDashboardToCustomer(T,C)}}static{this.\u0275fac=function(C){return new(C||p)(e.\u0275\u0275directiveInject(L.Store),e.\u0275\u0275directiveInject(B.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(V.g),e.\u0275\u0275directiveInject(K.I),e.\u0275\u0275directiveInject(z.p),e.\u0275\u0275directiveInject(H.o),e.\u0275\u0275directiveInject(k.I),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["tb-add-entities-to-customer-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:p}]),e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:29,consts:[[3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","entityIds","required","",3,"entityType"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(C,_){1&C&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return _.assign()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return _.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,u,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,m,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"fieldset",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"tb-entity-list",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",10)(21,"button",11),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275listener("click",function(){return _.cancel()}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",12),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd()()()),2&C&&(e.\u0275\u0275property("formGroup",_.addEntitiesToCustomerFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,11,_.assignToCustomerTitle)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,13,_.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,15,_.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,17,_.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,19,_.assignToCustomerText)),e.\u0275\u0275advance(2),e.\u0275\u0275property("entityType",_.entityType),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,21,_.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,23,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,25,_.isLoading$)||_.addEntitiesToCustomerFormGroup.invalid||!_.addEntitiesToCustomerFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,27,"action.assign")," "))},dependencies:[I.NgIf,U.EntityListComponent,F.MatButton,F.MatIconButton,a.MatIcon,O.MatProgressBar,P.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,I.AsyncPipe,A.TranslatePipe],encapsulation:2})}}},28485:(Re,X,n)=>{"use strict";n.d(X,{M:()=>T});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(49466),S=n(44037),G=n(25967),K=n(27468),H=n(20580),k=n(80727),Q=n(85568),z=n(56542),L=n(16450),B=n(89815),I=n(9310),U=n(7901),F=n(60177),a=n(44216),O=n(88834),P=n(99213),A=n(67575),u=n(55911),m=n(73955);function p(C,_){1&C&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function v(C,_){1&C&&e.\u0275\u0275element(0,"div",14)}class T extends z.m{constructor(_,E,f,g,y,b,D,w,ee,_e,ve,Ee){super(_,E,ve),this.store=_,this.router=E,this.data=f,this.deviceService=g,this.edgeService=y,this.assetService=b,this.entityViewService=D,this.dashboardService=w,this.ruleChainService=ee,this.errorStateMatcher=_e,this.dialogRef=ve,this.fb=Ee,this.submitted=!1,this.entityType=this.data.entityType}ngOnInit(){switch(this.addEntitiesToEdgeFormGroup=this.fb.group({entityIds:[null,[h.Validators.required]]}),this.subType="",this.entityType){case G.ck.DEVICE:this.assignToEdgeTitle="device.assign-device-to-edge-title",this.assignToEdgeText="device.assign-device-to-edge-text";break;case G.ck.RULE_CHAIN:this.assignToEdgeTitle="rulechain.assign-rulechain-to-edge-title",this.assignToEdgeText="rulechain.assign-rulechain-to-edge-text",this.subType=B.UR.EDGE;break;case G.ck.ASSET:this.assignToEdgeTitle="asset.assign-asset-to-edge-title",this.assignToEdgeText="asset.assign-asset-to-edge-text";break;case G.ck.ENTITY_VIEW:this.assignToEdgeTitle="entity-view.assign-entity-view-to-edge-title",this.assignToEdgeText="entity-view.assign-entity-view-to-edge-text";break;case G.ck.DASHBOARD:this.assignToEdgeTitle="dashboard.assign-dashboard-to-edge-title",this.assignToEdgeText="dashboard.assign-dashboard-to-edge-text"}}isErrorState(_,E){const f=this.errorStateMatcher.isErrorState(_,E),g=!!(_&&_.invalid&&this.submitted);return f||g}cancel(){this.dialogRef.close(!1)}assign(){this.submitted=!0;const _=this.addEntitiesToEdgeFormGroup.get("entityIds").value,E=[];_.forEach(f=>{E.push(this.getAssignToEdgeTask(this.data.edgeId,f,this.entityType))}),(0,K.p)(E).subscribe(()=>{this.dialogRef.close(!0)})}getAssignToEdgeTask(_,E,f){switch(f){case G.ck.DEVICE:return this.deviceService.assignDeviceToEdge(_,E);case G.ck.ASSET:return this.assetService.assignAssetToEdge(_,E);case G.ck.ENTITY_VIEW:return this.entityViewService.assignEntityViewToEdge(_,E);case G.ck.DASHBOARD:return this.dashboardService.assignDashboardToEdge(_,E);case G.ck.RULE_CHAIN:return this.ruleChainService.assignRuleChainToEdge(_,E)}}static{this.\u0275fac=function(E){return new(E||T)(e.\u0275\u0275directiveInject(I.Store),e.\u0275\u0275directiveInject(U.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(V.g),e.\u0275\u0275directiveInject(S.p),e.\u0275\u0275directiveInject(H.I),e.\u0275\u0275directiveInject(k.o),e.\u0275\u0275directiveInject(Q.I),e.\u0275\u0275directiveInject(L.P),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["tb-add-entities-to-edge-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:T}]),e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:30,consts:[[3,"ngSubmit","formGroup"],["color","primary",1,"flex","flex-row"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","entityIds","required","",3,"entityType","subType"],["mat-dialog-actions","",1,"flex","items-center","justify-end"],["mat-button","","color","primary","type","button",2,"margin-right","20px",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(E,f){1&E&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return f.assign()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return f.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,p,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,v,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"fieldset",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"tb-entity-list",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",10)(21,"button",11),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275listener("click",function(){return f.cancel()}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",12),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd()()()),2&E&&(e.\u0275\u0275property("formGroup",f.addEntitiesToEdgeFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,12,f.assignToEdgeTitle)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,14,f.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,16,f.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,18,f.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,20,f.assignToEdgeText)),e.\u0275\u0275advance(2),e.\u0275\u0275property("entityType",f.entityType)("subType",f.subType),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,22,f.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,24,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,26,f.isLoading$)||f.addEntitiesToEdgeFormGroup.invalid||!f.addEntitiesToEdgeFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,28,"action.assign")," "))},dependencies:[F.NgIf,a.EntityListComponent,O.MatButton,O.MatIconButton,P.MatIcon,A.MatProgressBar,u.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,F.AsyncPipe,m.TranslatePipe],encapsulation:2})}}},27738:(Re,X,n)=>{"use strict";n.d(X,{i:()=>m});var e=n(93953),t=n(86600),c=n(34006),h=n(89417),V=n(49466),S=n(25967),G=n(27468),K=n(20580),H=n(80727),k=n(56542),Q=n(44037),z=n(9310),L=n(7901),B=n(60177),I=n(39828),U=n(88834),F=n(99213),a=n(67575),O=n(55911),P=n(73955);function A(p,v){1&p&&e.\u0275\u0275element(0,"mat-progress-bar",14)}function u(p,v){1&p&&e.\u0275\u0275element(0,"div",15)}class m extends k.m{constructor(v,T,C,_,E,f,g,y,b,D){super(v,T,b),this.store=v,this.router=T,this.data=C,this.deviceService=_,this.assetService=E,this.edgeService=f,this.entityViewService=g,this.errorStateMatcher=y,this.dialogRef=b,this.fb=D,this.submitted=!1,this.entityType=S.ck}ngOnInit(){switch(this.assignToCustomerFormGroup=this.fb.group({customerId:[null,[h.Validators.required]]}),this.data.entityType){case S.ck.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-to-customer-text";break;case S.ck.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-to-customer-text";break;case S.ck.EDGE:this.assignToCustomerTitle="edge.assign-edge-to-customer",this.assignToCustomerText="edge.assign-to-customer-text";break;case S.ck.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-to-customer-text"}}isErrorState(v,T){const C=this.errorStateMatcher.isErrorState(v,T),_=!!(v&&v.invalid&&this.submitted);return C||_}cancel(){this.dialogRef.close(!1)}assign(){this.submitted=!0;const v=this.assignToCustomerFormGroup.get("customerId").value,T=[];this.data.entityIds.forEach(C=>{T.push(this.getAssignToCustomerTask(v,C.id))}),(0,G.p)(T).subscribe(()=>{this.dialogRef.close(!0)})}getAssignToCustomerTask(v,T){switch(this.data.entityType){case S.ck.DEVICE:return this.deviceService.assignDeviceToCustomer(v,T);case S.ck.ASSET:return this.assetService.assignAssetToCustomer(v,T);case S.ck.EDGE:return this.edgeService.assignEdgeToCustomer(v,T);case S.ck.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(v,T)}}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(z.Store),e.\u0275\u0275directiveInject(L.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(V.g),e.\u0275\u0275directiveInject(K.I),e.\u0275\u0275directiveInject(Q.p),e.\u0275\u0275directiveInject(H.o),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(h.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-assign-to-customer-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:m}]),e.\u0275\u0275InheritDefinitionFeature],decls:29,vars:29,consts:[[3,"ngSubmit","formGroup"],["color","primary"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[2,"padding-bottom","0.5em"],["formControlName","customerId","required","",3,"entityType"],["mat-dialog-actions","",1,"flex","flex-row","items-center","justify-end"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return C.assign()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,A,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,u,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"fieldset",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"div",9),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"tb-entity-autocomplete",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",11)(21,"button",12),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275listener("click",function(){return C.cancel()}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",13),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd()()()),2&T&&(e.\u0275\u0275property("formGroup",C.assignToCustomerFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,11,C.assignToCustomerTitle)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,13,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,15,C.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,17,C.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,19,C.assignToCustomerText)),e.\u0275\u0275advance(2),e.\u0275\u0275property("entityType",C.entityType.CUSTOMER),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,21,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,23,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,25,C.isLoading$)||C.assignToCustomerFormGroup.invalid||!C.assignToCustomerFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,27,"action.assign")," "))},dependencies:[B.NgIf,I.EntityAutocompleteComponent,U.MatButton,U.MatIconButton,F.MatIcon,a.MatProgressBar,O.MatToolbar,c.MatDialogActions,c.MatDialogContent,h.\u0275NgNoValidate,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,B.AsyncPipe,P.TranslatePipe],encapsulation:2})}}},52627:(Re,X,n)=>{"use strict";n.d(X,{L:()=>K});var e=n(93953),t=n(60177),c=n(19440),h=n(27738),V=n(73414),S=n(76364),G=n(28485);class K{static{this.\u0275fac=function(Q){return new(Q||K)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:K})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[S.k],imports:[t.CommonModule,c.G]})}}(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(K,{declarations:[h.i,V.j,G.M],imports:[t.CommonModule,c.G],exports:[h.i,V.j,G.M]})},76364:(Re,X,n)=>{"use strict";n.d(X,{k:()=>V});var e=n(93953),t=n(25967),c=n(9231),h=n(34006);class V{constructor(G){this.dialog=G}importEntities(G){switch(G){case t.ck.DEVICE:return this.openImportDialogCSV(G,"device.import","device.device-file");case t.ck.ASSET:return this.openImportDialogCSV(G,"asset.import","asset.asset-file");case t.ck.EDGE:return this.openImportDialogCSV(G,"edge.import","edge.edge-file")}}openImportDialogCSV(G,K,H){return this.dialog.open(c.ImportDialogCsvComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityType:G,importTitle:K,importFileLabel:H}}).afterClosed()}static{this.\u0275fac=function(K){return new(K||V)(e.\u0275\u0275inject(h.MatDialog))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac})}}},34180:(Re,X,n)=>{"use strict";n.d(X,{O:()=>C});var e=n(93953),t=n(81365),c=n(89417),h=n(78502),V=n(15753),S=n(85568),K=(n(12054),n(27997)),H=n(25967),k=n(9310),Q=n(73955),z=n(60177),L=n(44216),B=n(87591),I=n(88834),U=n(99213),F=n(59042),a=n(53719),O=n(14823),P=n(30450),A=n(89692),u=n(86763);const m=_=>({dashboardTitle:_});function p(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.title-required")," "))}function v(_,E){1&_&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"dashboard.title-max-length")," "))}function T(_,E){if(1&_&&(e.\u0275\u0275element(0,"tb-entity-list",25),e.\u0275\u0275pipe(1,"translate")),2&_){const f=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("labelText",e.\u0275\u0275pipeBind1(1,2,"dashboard.assigned-customers")),e.\u0275\u0275property("entityType",f.entityType.CUSTOMER)}}class C extends t.l{constructor(E,f,g,y,b,D,w){super(E,D,y,b,w),this.store=E,this.translate=f,this.dashboardService=g,this.entityValue=y,this.entitiesTableConfigValue=b,this.fb=D,this.cd=w,this.entityType=H.ck}ngOnInit(){this.dashboardScope=this.entitiesTableConfig.componentsData.dashboardScope,this.customerId=this.entitiesTableConfig.componentsData.customerId,super.ngOnInit()}isPublic(E){return(0,V.MX)(E)}isCurrentPublicCustomer(E){return(0,V.hI)(E,this.customerId)}hideDelete(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)}buildForm(E){this.updateFields(E);const f=this.fb.group({title:[E?E.title:"",[c.Validators.required,c.Validators.maxLength(255)]],image:[E?E.image:null],mobileHide:[!!E&&E.mobileHide],mobileOrder:[E?E.mobileOrder:null,[c.Validators.pattern(/^-?[0-9]+$/)]],configuration:this.fb.group({description:[E&&E.configuration?E.configuration.description:""]})});return this.isAdd&&f.addControl("assignedCustomerIds",this.fb.control([])),f}updateForm(E){this.updateFields(E),this.entityForm.patchValue({title:E.title}),this.entityForm.patchValue({image:E.image}),this.entityForm.patchValue({mobileHide:E.mobileHide}),this.entityForm.patchValue({mobileOrder:E.mobileOrder}),this.entityForm.patchValue({configuration:{description:E.configuration?E.configuration.description:""}})}prepareFormValue(E){const f=super.prepareFormValue(E);return f.configuration={...this.entity.configuration||{},...f.configuration||{}},f}onPublicLinkCopied(E){this.store.dispatch(new h.xo({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}onDashboardIdCopied(E){this.store.dispatch(new h.xo({message:this.translate.instant("dashboard.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}updateFields(E){E&&!(0,K.n4)(E,{})&&(this.assignedCustomersText=(0,V.Vk)(E),this.publicLink=this.dashboardService.getPublicDashboardLink(E))}static{this.\u0275fac=function(f){return new(f||C)(e.\u0275\u0275directiveInject(k.Store),e.\u0275\u0275directiveInject(Q.TranslateService),e.\u0275\u0275directiveInject(S.I),e.\u0275\u0275directiveInject("entity"),e.\u0275\u0275directiveInject("entitiesTableConfig"),e.\u0275\u0275directiveInject(c.UntypedFormBuilder),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["tb-dashboard-form"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:82,vars:103,consts:[[1,"tb-details-buttons","xs:flex","xs:flex-col"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"flex","flex-row"],["mat-raised-button","","ngxClipboard","",3,"cbOnSuccess","cbContent"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],[1,"mat-padding","flex","flex-col"],[1,"mat-block"],["matInput","","disabled","",3,"ngModel"],[1,"flex","flex-col"],["shareHashTags","thingsboard, iot",2,"padding-bottom","1.25em",3,"shareTitle","shareText","shareLink"],[1,"mat-block","flex-1"],["mat-icon-button","","ngxClipboard","","matTooltipPosition","above",2,"margin-top","8px",3,"cbOnSuccess","cbContent","matTooltip"],[3,"formGroup"],[3,"disabled"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formGroupName","configuration",1,"flex","flex-col"],["matInput","","formControlName","description","rows","2"],["formControlName","assignedCustomerIds",3,"labelText","entityType",4,"ngIf"],[1,"tb-form-panel","stroked","no-gap"],["translate","",1,"tb-form-panel-title"],["formControlName","mobileHide",1,"mat-slide","margin","fixed-title-width"],["matInput","","formControlName","mobileOrder","type","number","step","1"],["formControlName","image",1,"flex-1",3,"label"],["formControlName","assignedCustomerIds",3,"labelText","entityType"]],template:function(f,g){1&f&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"open")}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",1),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"export")}),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",1),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"makePublic")}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",1),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"makePrivate")}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",1),e.\u0275\u0275pipe(18,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"manageAssignedCustomers")}),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"button",1),e.\u0275\u0275pipe(22,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"unassignFromCustomer")}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",1),e.\u0275\u0275pipe(26,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"unassignFromEdge")}),e.\u0275\u0275text(27),e.\u0275\u0275pipe(28,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"button",1),e.\u0275\u0275pipe(30,"async"),e.\u0275\u0275listener("click",function(b){return g.onEntityAction(b,"delete")}),e.\u0275\u0275text(31),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",2)(34,"button",3),e.\u0275\u0275listener("cbOnSuccess",function(b){return g.onDashboardIdCopied(b)}),e.\u0275\u0275element(35,"mat-icon",4),e.\u0275\u0275elementStart(36,"span",5),e.\u0275\u0275text(37,"dashboard.copyId"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"div",6)(39,"mat-form-field",7)(40,"mat-label",5),e.\u0275\u0275text(41,"dashboard.assignedToCustomers"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",9),e.\u0275\u0275element(44,"tb-social-share-panel",10),e.\u0275\u0275pipe(45,"translate"),e.\u0275\u0275pipe(46,"translate"),e.\u0275\u0275elementStart(47,"div",2)(48,"mat-form-field",11)(49,"mat-label",5),e.\u0275\u0275text(50,"dashboard.public-link"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(51,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"button",12),e.\u0275\u0275pipe(53,"translate"),e.\u0275\u0275listener("cbOnSuccess",function(b){return g.onPublicLinkCopied(b)}),e.\u0275\u0275element(54,"mat-icon",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(55,"form",13)(56,"fieldset",14),e.\u0275\u0275pipe(57,"async"),e.\u0275\u0275elementStart(58,"mat-form-field",7)(59,"mat-label",5),e.\u0275\u0275text(60,"dashboard.title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(61,"input",15),e.\u0275\u0275template(62,p,3,3,"mat-error",16)(63,v,3,3,"mat-error",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"div",17)(65,"mat-form-field",7)(66,"mat-label",5),e.\u0275\u0275text(67,"dashboard.description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(68,"textarea",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(69,T,2,4,"tb-entity-list",19),e.\u0275\u0275elementStart(70,"div",20)(71,"div",21),e.\u0275\u0275text(72,"dashboard.mobile-app-settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"mat-slide-toggle",22),e.\u0275\u0275text(74),e.\u0275\u0275pipe(75,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"mat-form-field",7)(77,"mat-label",5),e.\u0275\u0275text(78,"dashboard.mobile-order"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(79,"input",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(80,"tb-gallery-image-input",24),e.\u0275\u0275pipe(81,"translate"),e.\u0275\u0275elementEnd()()()()),2&f&&(e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",g.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(2,53,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,55,"dashboard.open-dashboard")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||"tenant"!==g.dashboardScope),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(6,57,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,59,"dashboard.export")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||"tenant"!==g.dashboardScope||g.isPublic(g.entity)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(10,61,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,63,"dashboard.make-public")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||!("tenant"===g.dashboardScope&&g.isPublic(g.entity)||"customer"===g.dashboardScope&&g.isCurrentPublicCustomer(g.entity))),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(14,65,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,67,"dashboard.make-private")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||"tenant"!==g.dashboardScope),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(18,69,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,71,"dashboard.manage-assigned-customers")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||"customer"!==g.dashboardScope||g.isCurrentPublicCustomer(g.entity)),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(22,73,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,75,"dashboard.unassign-from-customer")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.isEdit||"edge"!==g.dashboardScope),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(26,77,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(28,79,"edge.unassign-from-edge")," "),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("!hidden",g.hideDelete()||g.isEdit),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(30,81,g.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(32,83,"dashboard.delete")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("!hidden",g.isEdit),e.\u0275\u0275property("cbContent",null==g.entity||null==g.entity.id?null:g.entity.id.id),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("!hidden",g.isEdit||!(null!=g.assignedCustomersText&&g.assignedCustomersText.length)||"tenant"!==g.dashboardScope),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngModel",g.assignedCustomersText),e.\u0275\u0275advance(),e.\u0275\u0275classProp("!hidden",g.isEdit||!("tenant"===g.dashboardScope&&g.isPublic(g.entity)||"customer"===g.dashboardScope&&g.isCurrentPublicCustomer(g.entity))),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("shareTitle",e.\u0275\u0275pipeBind2(45,85,"dashboard.socialshare-title",e.\u0275\u0275pureFunction1(99,m,null==g.entity?null:g.entity.title))),e.\u0275\u0275propertyInterpolate("shareText",e.\u0275\u0275pipeBind2(46,88,"dashboard.socialshare-text",e.\u0275\u0275pureFunction1(101,m,null==g.entity?null:g.entity.title))),e.\u0275\u0275propertyInterpolate("shareLink",g.publicLink),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngModel",g.publicLink),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("cbContent",g.publicLink),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(53,91,"dashboard.copy-public-link")),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",g.entityForm),e.\u0275\u0275advance(),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(57,93,g.isLoading$)||!g.isEdit),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",g.entityForm.get("title").hasError("required")),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",g.entityForm.get("title").hasError("maxlength")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",g.isAdd),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(75,95,"dashboard.mobile-hide")," "),e.\u0275\u0275advance(6),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(81,97,"dashboard.image")))},dependencies:[z.NgIf,L.EntityListComponent,B.SocialSharePanelComponent,I.MatButton,I.MatIconButton,U.MatIcon,F.MatInput,a.MatFormField,a.MatLabel,a.MatError,O.MatTooltip,P.MatSlideToggle,A.Uo,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NumberValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.NgModel,c.FormGroupDirective,c.FormControlName,c.FormGroupName,Q.TranslateDirective,u.GalleryImageInputComponent,z.AsyncPipe,Q.TranslatePipe],styles:['@charset "UTF-8";']})}}},35027:(Re,X,n)=>{"use strict";n.d(X,{Pj:()=>O,QU:()=>P,rk:()=>u});var e=n(93953),t=n(7901),c=n(8968),h=n(9437),V=n(97887),S=n(49764),G=n(73028),K=n(7673),H=n(85568),k=n(56508),Q=n(99437),z=n(96354),L=n(11691),B=n(16272),I=n(63729),U=n(86057),F=n(82456),a=n(9310);class O{constructor(p,v,T,C){this.store=p,this.dashboardService=v,this.userSettingService=T,this.dashboardUtils=C}resolve(p){const v=p.params.dashboardId;return this.dashboardService.getDashboard(v).pipe((0,G.Z)(T=>((0,I.rx)(this.store).isPublic?(0,K.of)(null):this.userSettingService.reportUserDashboardAction(v,B.IT.VISIT,{ignoreLoading:!0,ignoreErrors:!0})).pipe((0,Q.W)(()=>(0,K.of)(T)),(0,z.T)(()=>T))),(0,z.T)(T=>this.dashboardUtils.validateAndUpdateDashboard(T)))}static{this.\u0275fac=function(v){return new(v||O)(e.\u0275\u0275inject(a.Store),e.\u0275\u0275inject(H.I),e.\u0275\u0275inject(L.A),e.\u0275\u0275inject(k.N))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac})}}const P=(m,p,v)=>v.dashboard.title,A=[{path:"dashboards",data:{breadcrumb:{menuId:F.D8.dashboards}},children:[{path:"",component:c.EntitiesTableComponent,data:{auth:[h.s.TENANT_ADMIN,h.s.CUSTOMER_USER],title:"dashboard.dashboards",dashboardsType:"tenant"},resolve:{entitiesTableConfig:V.S}},{path:":dashboardId",component:S.DashboardPageComponent,canDeactivate:[U.L],data:{breadcrumb:{labelFunction:P,icon:"dashboard"},auth:[h.s.TENANT_ADMIN,h.s.CUSTOMER_USER],title:"dashboard.dashboard",widgetEditMode:!1},resolve:{dashboard:O}}]}];class u{static{this.\u0275fac=function(v){return new(v||u)}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:u})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[V.S,O],imports:[t.RouterModule.forChild(A),t.RouterModule]})}}(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(u,{imports:[t.RouterModule],exports:[t.RouterModule]})},19470:(Re,X,n)=>{"use strict";n.d(X,{a:()=>Q});var e=n(93953),t=n(61172),c=n(9310),h=n(60177),V=n(96850),S=n(97261),G=n(40810),K=n(73955);function H(z,L){if(1&z&&(e.\u0275\u0275elementStart(0,"mat-tab",3,0),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"tb-audit-log-table",4),e.\u0275\u0275elementEnd()),2&z){const B=e.\u0275\u0275reference(1),I=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(2,4,"audit-log.audit-logs")),e.\u0275\u0275advance(3),e.\u0275\u0275property("active",B.isActive)("auditLogMode",I.auditLogModes.ENTITY)("entityId",I.entity.id)}}function k(z,L){if(1&z){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-tab",3,1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"tb-version-control",5),e.\u0275\u0275listener("versionRestored",function(){e.\u0275\u0275restoreView(B);const U=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(U.entitiesTableConfig.updateData())}),e.\u0275\u0275elementEnd()()}if(2&z){const B=e.\u0275\u0275reference(1),I=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(2,5,"version-control.version-control")),e.\u0275\u0275advance(3),e.\u0275\u0275property("active",B.isActive)("entityId",I.entity.id)("entityName",I.entity.name)("externalEntityId",I.entity.externalId||I.entity.id)}}class Q extends t.P{constructor(L){super(L),this.store=L}ngOnInit(){super.ngOnInit()}static{this.\u0275fac=function(B){return new(B||Q)(e.\u0275\u0275directiveInject(c.Store))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Q,selectors:[["tb-dashboard-tabs"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["auditLogsTab","matTab"],["versionControlTab","matTab"],[3,"label",4,"ngIf"],[3,"label"],["detailsMode","true",3,"active","auditLogMode","entityId"],["detailsMode","true","singleEntityMode","true",3,"versionRestored","active","entityId","entityName","externalEntityId"]],template:function(B,I){1&B&&e.\u0275\u0275template(0,H,4,6,"mat-tab",2)(1,k,4,7,"mat-tab",2),2&B&&(e.\u0275\u0275property("ngIf",I.entity&&I.authUser.authority===I.authorities.TENANT_ADMIN),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",I.entity&&I.authUser.authority===I.authorities.TENANT_ADMIN))},dependencies:[h.NgIf,V.MatTab,S.AuditLogTableComponent,G.d,K.TranslatePipe],encapsulation:2})}}},97887:(Re,X,n)=>{"use strict";n.d(X,{S:()=>g});var e=n(93953),t=n(12054),c=n(25967),h=n(7673),V=n(27468),S=n(9310),G=n(63729),K=n(96697),H=n(88141),k=n(73028),Q=n(96354),z=n(9437),L=n(74172),B=n(80216),I=n(73414),U=n(15753),F=n(85568),a=n(34180),O=n(46782),P=n(94775),A=n(19470),u=n(46107),m=n(44037),p=n(28485),v=n(76364),T=n(31648),C=n(73955),_=n(60177),E=n(7901),f=n(34006);class g{constructor(b,D,w,ee,_e,ve,Ee,$,be,Te,oe){this.store=b,this.dashboardService=D,this.customerService=w,this.edgeService=ee,this.dialogService=_e,this.homeDialogs=ve,this.importExport=Ee,this.translate=$,this.datePipe=be,this.router=Te,this.dialog=oe,this.config=new t.M7,this.config.entityType=c.ck.DASHBOARD,this.config.entityComponent=a.O,this.config.entityTabsComponent=A.a,this.config.entityTranslations=c.Mi.get(c.ck.DASHBOARD),this.config.entityResources=c.BT.get(c.ck.DASHBOARD),this.config.rowPointer=!0,this.config.deleteEntityTitle=R=>this.translate.instant("dashboard.delete-dashboard-title",{dashboardTitle:R.title}),this.config.deleteEntityContent=()=>this.translate.instant("dashboard.delete-dashboard-text"),this.config.deleteEntitiesTitle=R=>this.translate.instant("dashboard.delete-dashboards-title",{count:R}),this.config.deleteEntitiesContent=()=>this.translate.instant("dashboard.delete-dashboards-text"),this.config.loadEntity=R=>this.dashboardService.getDashboard(R.id),this.config.saveEntity=R=>this.saveAndAssignDashboard(R),this.config.onEntityAction=R=>this.onDashboardAction(R),this.config.detailsReadonly=()=>"customer_user"===this.config.componentsData.dashboardScope||"edge_customer_user"===this.config.componentsData.dashboardScope,this.config.handleRowClick=(R,N)=>(this.config.isDetailsOpen()?this.config.toggleEntityDetails(R,N):this.openDashboard(R,N),!0),this.config.entityAdded=R=>{this.openDashboard(null,R)}}resolve(b){const D=b.params;return this.config.componentsData={dashboardScope:b.data.dashboardsType,customerId:D.customerId,edgeId:D.edgeId},this.store.pipe((0,S.select)(G.SW),(0,K.s)(1)).pipe((0,H.M)(w=>{w.authority===z.s.CUSTOMER_USER&&("edge"===b.data.dashboardsType?this.config.componentsData.dashboardScope="edge_customer_user":this.config.componentsData.dashboardScope="customer_user",this.config.componentsData.customerId=w.customerId)}),(0,k.Z)(()=>this.config.componentsData.customerId?this.customerService.getCustomer(this.config.componentsData.customerId):(0,h.of)(null)),(0,Q.T)(w=>(w?w.additionalInfo&&w.additionalInfo.isPublic?this.config.tableTitle=this.translate.instant("customer.public-dashboards"):this.config.tableTitle=w.title+": "+this.translate.instant("dashboard.dashboards"):"edge"===this.config.componentsData.dashboardScope?this.edgeService.getEdge(this.config.componentsData.edgeId).subscribe(ee=>this.config.tableTitle=ee.name+": "+this.translate.instant("dashboard.dashboards")):this.config.tableTitle=this.translate.instant("dashboard.dashboards"),this.config.columns=this.configureColumns(this.config.componentsData.dashboardScope),this.configureEntityFunctions(this.config.componentsData.dashboardScope),this.config.cellActionDescriptors=this.configureCellActions(this.config.componentsData.dashboardScope),this.config.groupActionDescriptors=this.configureGroupActions(this.config.componentsData.dashboardScope),this.config.addActionDescriptors=this.configureAddActions(this.config.componentsData.dashboardScope),this.config.addEnabled=!("customer_user"===this.config.componentsData.dashboardScope||"edge_customer_user"===this.config.componentsData.dashboardScope),this.config.entitiesDeleteEnabled="tenant"===this.config.componentsData.dashboardScope,this.config.deleteEnabled=()=>"tenant"===this.config.componentsData.dashboardScope,this.config)))}configureColumns(b){const D=[new t.Qr("createdTime","common.created-time",this.datePipe,"150px"),new t.KK("title","dashboard.title","50%")];return"tenant"===b&&D.push(new t.KK("customersTitle","dashboard.assignedToCustomers","50%",w=>(0,U.Vk)(w),()=>({}),!1),new t.KK("dashboardIsPublic","dashboard.public","60px",w=>(0,t.ov)((0,U.MX)(w)),()=>({}),!1)),D}configureEntityFunctions(b){"tenant"===b?(this.config.entitiesFetchFunction=D=>this.dashboardService.getTenantDashboards(D),this.config.deleteEntity=D=>this.dashboardService.deleteDashboard(D.id)):"edge"===b||"edge_customer_user"===b?this.config.entitiesFetchFunction=D=>this.dashboardService.getEdgeDashboards(this.config.componentsData.edgeId,D,this.config.componentsData.dashboardsType):(this.config.entitiesFetchFunction=D=>this.dashboardService.getCustomerDashboards(this.config.componentsData.customerId,D),this.config.deleteEntity=D=>this.dashboardService.unassignDashboardFromCustomer(this.config.componentsData.customerId,D.id))}configureCellActions(b){const D=[];return"tenant"===b&&D.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:()=>!0,onAction:(w,ee)=>this.exportDashboard(w,ee)},{name:this.translate.instant("dashboard.make-public"),icon:"share",isEnabled:w=>!(0,U.MX)(w),onAction:(w,ee)=>this.makePublic(w,ee)},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:w=>(0,U.MX)(w),onAction:(w,ee)=>this.makePrivate(w,ee)},{name:this.translate.instant("dashboard.manage-assigned-customers"),icon:"assignment_ind",isEnabled:()=>!0,onAction:(w,ee)=>this.manageAssignedCustomers(w,ee)}),"customer"===b&&D.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:()=>!0,onAction:(w,ee)=>this.exportDashboard(w,ee)},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:w=>(0,U.hI)(w,this.config.componentsData.customerId),onAction:(w,ee)=>this.makePrivate(w,ee)},{name:this.translate.instant("dashboard.unassign-from-customer"),icon:"assignment_return",isEnabled:w=>!(0,U.hI)(w,this.config.componentsData.customerId),onAction:(w,ee)=>this.unassignFromCustomer(w,ee,this.config.componentsData.customerId)}),"edge"===b&&D.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:()=>!0,onAction:(w,ee)=>this.exportDashboard(w,ee)},{name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:()=>!0,onAction:(w,ee)=>this.unassignFromEdge(w,ee)}),D.push({name:this.translate.instant("dashboard.dashboard-details"),icon:"edit",isEnabled:()=>!0,onAction:(w,ee)=>this.config.toggleEntityDetails(w,ee)}),D}configureGroupActions(b){const D=[];return"tenant"===b&&(D.push({name:this.translate.instant("dashboard.assign-dashboards"),icon:"assignment_ind",isEnabled:!0,onAction:(w,ee)=>this.assignDashboardsToCustomers(w,ee.map(_e=>_e.id.id))}),D.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:(w,ee)=>this.unassignDashboardsFromCustomers(w,ee.map(_e=>_e.id.id))})),"customer"===b&&D.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:(w,ee)=>this.unassignDashboardsFromCustomer(w,ee.map(_e=>_e.id.id),this.config.componentsData.customerId)}),"edge"===b&&D.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:(w,ee)=>this.unassignDashboardsFromEdge(w,ee)}),D}configureAddActions(b){const D=[];return"tenant"===b&&D.push({name:this.translate.instant("dashboard.create-new-dashboard"),icon:"insert_drive_file",isEnabled:()=>!0,onAction:w=>this.config.getTable().addEntity(w)},{name:this.translate.instant("dashboard.import"),icon:"file_upload",isEnabled:()=>!0,onAction:w=>this.importDashboard(w)}),"customer"===b&&D.push({name:this.translate.instant("dashboard.assign-new-dashboard"),icon:"add",isEnabled:()=>!0,onAction:w=>this.addDashboardsToCustomer(w)}),"edge"===b&&D.push({name:this.translate.instant("dashboard.assign-new-dashboard"),icon:"add",isEnabled:()=>!0,onAction:w=>this.addDashboardsToEdge(w)}),D}openDashboard(b,D){b&&b.stopPropagation(),"customer"===this.config.componentsData.dashboardScope?this.router.navigateByUrl(`customers/${this.config.componentsData.customerId}/dashboards/${D.id.id}`):"edge"===this.config.componentsData.dashboardScope?this.router.navigateByUrl(`edgeInstances/${this.config.componentsData.edgeId}/dashboards/${D.id.id}`):this.router.navigateByUrl(`dashboards/${D.id.id}`)}importDashboard(b){this.importExport.importDashboard(this.editMissingAliases.bind(this)).subscribe(D=>{D&&this.config.updateData()})}editMissingAliases(b,D,w,ee){return this.dialog.open(T.EntityAliasesDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:ee,widgets:b,customTitle:w,isSingleWidget:D,disableAdd:!0}}).afterClosed().pipe((0,Q.T)(_e=>{if(_e)return _e;throw new Error("Unable to resolve missing entity aliases!")}))}exportDashboard(b,D){b&&b.stopPropagation(),this.importExport.exportDashboard(D.id.id)}addDashboardsToCustomer(b){b&&b.stopPropagation(),this.dialog.open(I.j,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.config.componentsData.customerId,entityType:c.ck.DASHBOARD}}).afterClosed().subscribe(D=>{D&&this.config.updateData()})}makePublic(b,D){b&&b.stopPropagation(),this.dashboardService.makeDashboardPublic(D.id.id).subscribe(w=>{this.dialog.open(P.x,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:w}}).afterClosed().subscribe(()=>{this.config.updateData()})})}makePrivate(b,D){b&&b.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.make-private-dashboard-title",{dashboardTitle:D.title}),this.translate.instant("dashboard.make-private-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(w=>{w&&this.dashboardService.makeDashboardPrivate(D.id.id).subscribe(()=>{this.config.updateData()})})}manageAssignedCustomers(b,D){const w=D.assignedCustomers?D.assignedCustomers.map(ee=>ee.customerId.id):[];this.showManageAssignedCustomersDialog(b,[D.id.id],"manage",w)}assignDashboardsToCustomers(b,D){this.showManageAssignedCustomersDialog(b,D,"assign")}unassignDashboardsFromCustomers(b,D){this.showManageAssignedCustomersDialog(b,D,"unassign")}showManageAssignedCustomersDialog(b,D,w,ee){b&&b.stopPropagation(),this.dialog.open(O.K,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboardIds:D,actionType:w,assignedCustomersIds:ee}}).afterClosed().subscribe(_e=>{_e&&this.config.updateData()})}unassignFromCustomer(b,D,w){b&&b.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboard-title",{dashboardTitle:D.title}),this.translate.instant("dashboard.unassign-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(ee=>{ee&&this.dashboardService.unassignDashboardFromCustomer(w,D.id.id).subscribe(()=>{this.config.updateData("tenant"!==this.config.componentsData.dashboardScope)})})}unassignDashboardsFromCustomer(b,D,w){b&&b.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboards-title",{count:D.length}),this.translate.instant("dashboard.unassign-dashboards-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(ee=>{if(ee){const _e=[];D.forEach(ve=>{_e.push(this.dashboardService.unassignDashboardFromCustomer(w,ve))}),(0,V.p)(_e).subscribe(()=>{this.config.updateData()})}})}onDashboardAction(b){switch(b.action){case"open":return this.openDashboard(b.event,b.entity),!0;case"export":return this.exportDashboard(b.event,b.entity),!0;case"makePublic":return this.makePublic(b.event,b.entity),!0;case"makePrivate":return this.makePrivate(b.event,b.entity),!0;case"manageAssignedCustomers":return this.manageAssignedCustomers(b.event,b.entity),!0;case"unassignFromCustomer":return this.unassignFromCustomer(b.event,b.entity,this.config.componentsData.customerId),!0;case"unassignFromEdge":return this.unassignFromEdge(b.event,b.entity),!0}return!1}addDashboardsToEdge(b){b&&b.stopPropagation(),this.dialog.open(p.M,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:c.ck.DASHBOARD}}).afterClosed().subscribe(D=>{D&&this.config.updateData()})}unassignFromEdge(b,D){b&&b.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboard-title",{dashboardTitle:D.title}),this.translate.instant("dashboard.unassign-dashboard-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(w=>{w&&this.dashboardService.unassignDashboardFromEdge(this.config.componentsData.edgeId,D.id.id).subscribe(()=>{this.config.updateData("tenant"!==this.config.componentsData.dashboardScope)})})}unassignDashboardsFromEdge(b,D){b&&b.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboards-from-edge-title",{count:D.length}),this.translate.instant("dashboard.unassign-dashboards-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(w=>{if(w){const ee=[];D.forEach(_e=>{ee.push(this.dashboardService.unassignDashboardFromEdge(this.config.componentsData.edgeId,_e.id.id))}),(0,V.p)(ee).subscribe(()=>{this.config.updateData()})}})}saveAndAssignDashboard(b){const{assignedCustomerIds:D,...w}=b;return this.dashboardService.saveDashboard(w).pipe((0,k.Z)(ee=>D?.length?this.dashboardService.addDashboardCustomers(ee.id.id,D):(0,h.of)(ee)))}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275inject(S.Store),e.\u0275\u0275inject(F.I),e.\u0275\u0275inject(L.m),e.\u0275\u0275inject(m.p),e.\u0275\u0275inject(B.o),e.\u0275\u0275inject(v.k),e.\u0275\u0275inject(u.ImportExportService),e.\u0275\u0275inject(C.TranslateService),e.\u0275\u0275inject(_.DatePipe),e.\u0275\u0275inject(E.Router),e.\u0275\u0275inject(f.MatDialog))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac})}}},94775:(Re,X,n)=>{"use strict";n.d(X,{x:()=>m});var e=n(93953),t=n(34006),c=n(85568),h=n(78502),V=n(56542),S=n(9310),G=n(7901),K=n(73955),H=n(89417),k=n(60177),Q=n(915),z=n(87591),L=n(88834),B=n(99213),I=n(67575),U=n(55911),F=n(14823),a=n(89692);const O=(p,v)=>({dashboardTitle:p,publicLink:v}),P=p=>({dashboardTitle:p});function A(p,v){1&p&&e.\u0275\u0275element(0,"mat-progress-bar",17)}function u(p,v){1&p&&e.\u0275\u0275element(0,"div",18)}class m extends V.m{constructor(v,T,C,_,E,f,g){super(v,T,f),this.store=v,this.router=T,this.data=C,this.translate=_,this.dashboardService=E,this.dialogRef=f,this.fb=g,this.dashboard=C.dashboard,this.publicLink=E.getPublicDashboardLink(this.dashboard)}ngOnInit(){}close(){this.dialogRef.close()}onPublicLinkCopied(v){this.store.dispatch(new h.xo({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",target:"makeDashboardPublicDialogContent",duration:750,verticalPosition:"bottom",horizontalPosition:"left"}))}static{this.\u0275fac=function(T){return new(T||m)(e.\u0275\u0275directiveInject(S.Store),e.\u0275\u0275directiveInject(G.Router),e.\u0275\u0275directiveInject(t.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(K.TranslateService),e.\u0275\u0275directiveInject(c.I),e.\u0275\u0275directiveInject(t.MatDialogRef),e.\u0275\u0275directiveInject(H.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["tb-make-dashboard-public-dialog"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:34,vars:42,consts:[[2,"min-width","400px","position","relative"],["color","primary",1,"flex","flex-row"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","makeDashboardPublicDialogContent"],[3,"innerHTML"],[1,"flex","flex-row","items-center","justify-start"],[1,"tb-highlight","flex-1"],["mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbOnSuccess","cbContent","matTooltip"],["svgIcon","mdi:clipboard-arrow-left"],[1,"tb-notice",3,"innerHTML"],["shareHashTags","thingsboard, iot",2,"padding-top","15px",3,"shareTitle","shareText","shareLink"],["mat-dialog-actions","",1,"flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(T,C){1&T&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return C.close()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,A,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,u,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7),e.\u0275\u0275element(14,"span",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"div",9)(17,"pre",10)(18,"code"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"button",11),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275listener("cbOnSuccess",function(E){return C.onPublicLinkCopied(E)}),e.\u0275\u0275element(22,"mat-icon",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"div",13),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275element(25,"tb-social-share-panel",14),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",15),e.\u0275\u0275element(29,"span",2),e.\u0275\u0275elementStart(30,"button",16),e.\u0275\u0275pipe(31,"async"),e.\u0275\u0275listener("click",function(){return C.close()}),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()()()),2&T&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,13,"dashboard.public-dashboard-title")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,15,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,17,C.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(15,19,C.translate.get("dashboard.public-dashboard-text",e.\u0275\u0275pureFunction2(35,O,C.dashboard.title,C.publicLink))),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(C.publicLink),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("cbContent",C.publicLink),e.\u0275\u0275propertyInterpolate("matTooltip",e.\u0275\u0275pipeBind1(21,21,"dashboard.copy-public-link")),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("innerHTML",e.\u0275\u0275pipeBind1(24,23,"dashboard.public-dashboard-notice"),e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("shareTitle",e.\u0275\u0275pipeBind2(26,25,"dashboard.socialshare-title",e.\u0275\u0275pureFunction1(38,P,C.dashboard.title))),e.\u0275\u0275propertyInterpolate("shareText",e.\u0275\u0275pipeBind2(27,28,"dashboard.socialshare-text",e.\u0275\u0275pureFunction1(40,P,C.dashboard.title))),e.\u0275\u0275propertyInterpolate("shareLink",C.publicLink),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(31,31,C.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(33,33,"action.ok")," "))},dependencies:[k.NgIf,Q.ToastDirective,z.SocialSharePanelComponent,L.MatButton,L.MatIconButton,B.MatIcon,I.MatProgressBar,U.MatToolbar,t.MatDialogActions,t.MatDialogContent,F.MatTooltip,a.Uo,k.AsyncPipe,K.TranslatePipe],encapsulation:2})}}},46782:(Re,X,n)=>{"use strict";n.d(X,{K:()=>P});var e=n(93953),t=n(86600),c=n(34006),h=n(25967),V=n(85568),S=n(27468),G=n(56542),K=n(9310),H=n(7901),k=n(89417),Q=n(60177),z=n(44216),L=n(88834),B=n(99213),I=n(67575),U=n(55911),F=n(73955);function a(A,u){1&A&&e.\u0275\u0275element(0,"mat-progress-bar",13)}function O(A,u){1&A&&e.\u0275\u0275element(0,"div",14)}class P extends G.m{constructor(u,m,p,v,T,C,_){switch(super(u,m,C),this.store=u,this.router=m,this.data=p,this.dashboardService=v,this.errorStateMatcher=T,this.dialogRef=C,this.fb=_,this.submitted=!1,this.entityType=h.ck,this.assignedCustomersIds=p.assignedCustomersIds||[],p.actionType){case"assign":this.titleText="dashboard.assign-to-customers",this.labelText="dashboard.assign-to-customers-text",this.actionName="action.assign";break;case"manage":this.titleText="dashboard.manage-assigned-customers",this.labelText="dashboard.assigned-customers",this.actionName="action.update";break;case"unassign":this.titleText="dashboard.unassign-from-customers",this.labelText="dashboard.unassign-from-customers-text",this.actionName="action.unassign"}}ngOnInit(){this.dashboardCustomersFormGroup=this.fb.group({assignedCustomerIds:[[...this.assignedCustomersIds]]})}isErrorState(u,m){const p=this.errorStateMatcher.isErrorState(u,m),v=!!(u&&u.invalid&&this.submitted);return p||v}cancel(){this.dialogRef.close(!1)}submit(){this.submitted=!0;const u=this.dashboardCustomersFormGroup.get("assignedCustomerIds").value,m=[];this.data.dashboardIds.forEach(p=>{m.push(this.getManageDashboardCustomersTask(p,u))}),(0,S.p)(m).subscribe(()=>{this.dialogRef.close(!0)})}getManageDashboardCustomersTask(u,m){switch(this.data.actionType){case"assign":return this.dashboardService.addDashboardCustomers(u,m);case"manage":return this.dashboardService.updateDashboardCustomers(u,m);case"unassign":return this.dashboardService.removeDashboardCustomers(u,m)}}static{this.\u0275fac=function(m){return new(m||P)(e.\u0275\u0275directiveInject(K.Store),e.\u0275\u0275directiveInject(H.Router),e.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),e.\u0275\u0275directiveInject(V.I),e.\u0275\u0275directiveInject(t.ErrorStateMatcher,4),e.\u0275\u0275directiveInject(c.MatDialogRef),e.\u0275\u0275directiveInject(k.UntypedFormBuilder))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:P,selectors:[["tb-manage-dashboard-customers-dialog"]],features:[e.\u0275\u0275ProvidersFeature([{provide:t.ErrorStateMatcher,useExisting:P}]),e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:30,consts:[[2,"width","600px",3,"ngSubmit","formGroup"],["color","primary",1,"flex","flex-row"],[1,"flex-1"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","assignedCustomerIds",3,"required","entityType"],["mat-dialog-actions","",1,"flex","flex-row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"click","disabled"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(m,p){1&m&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return p.submit()}),e.\u0275\u0275elementStart(1,"mat-toolbar",1)(2,"h2"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"span",2),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275elementStart(7,"mat-icon",4),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,a,1,0,"mat-progress-bar",5),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,O,1,0,"div",6),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementStart(13,"div",7)(14,"fieldset",8),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"tb-entity-list",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",10),e.\u0275\u0275element(21,"span",2),e.\u0275\u0275elementStart(22,"button",11),e.\u0275\u0275pipe(23,"async"),e.\u0275\u0275listener("click",function(){return p.cancel()}),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"button",12),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd()()()),2&m&&(e.\u0275\u0275property("formGroup",p.dashboardCustomersFormGroup),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,12,p.titleText)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(10,14,p.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,16,p.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(15,18,p.isLoading$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,20,p.labelText)),e.\u0275\u0275advance(2),e.\u0275\u0275property("required","manage"!==p.data.actionType)("entityType",p.entityType.CUSTOMER),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(23,22,p.isLoading$)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,24,"action.cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(27,26,p.isLoading$)||p.dashboardCustomersFormGroup.invalid||!p.dashboardCustomersFormGroup.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,28,p.actionName)," "))},dependencies:[Q.NgIf,z.EntityListComponent,L.MatButton,L.MatIconButton,B.MatIcon,I.MatProgressBar,U.MatToolbar,c.MatDialogActions,c.MatDialogContent,k.\u0275NgNoValidate,k.NgControlStatus,k.NgControlStatusGroup,k.RequiredValidator,k.FormGroupDirective,k.FormControlName,Q.AsyncPipe,F.TranslatePipe],encapsulation:2})}}},18500:(Re,X,n)=>{"use strict";n.d(X,{a:()=>de});var e=n(83904),t=n(93953),c=n(56542),h=n(34006),V=n(89417),S=n(40283),G=n(25967),K=n(27997),H=n(18530),k=n(56977),Q=n(9437),z=n(63729),L=n(9310),B=n(7901),I=n(60177),U=n(37441),F=n(39828),a=n(44216),O=n(88834),P=n(99213),A=n(67575),u=n(59042),m=n(53719),p=n(55911),v=n(82798),T=n(86600),C=n(14823),_=n(71997),E=n(5951),f=n(30450),g=n(73955),y=n(30893),b=n(29772),D=n(18409);function w(ye,re){1&ye&&t.\u0275\u0275element(0,"mat-progress-bar",23)}function ee(ye,re){1&ye&&t.\u0275\u0275element(0,"div",24)}function _e(ye,re){1&ye&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.name-required")," "))}function ve(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-radio-button",25)(1,"div",26)(2,"div"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()()),2&ye){const ne=re.$implicit,ie=t.\u0275\u0275nextContext();t.\u0275\u0275property("value",ne),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,ie.notificationTargetTypeTranslationMap.get(ne)))}}function Ee(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-option",25),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye){const ne=re.$implicit,ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",ne),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,ie.notificationTargetConfigTypeInfoMap.get(ne).name)," ")}}function $(ye,re){if(1&ye&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"tb-entity-list",34),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementContainerEnd()),2&ye){const ne=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("labelText",t.\u0275\u0275pipeBind1(2,4,"tenant.tenants")),t.\u0275\u0275propertyInterpolate("placeholderText",t.\u0275\u0275pipeBind1(3,6,"tenant.tenants")),t.\u0275\u0275propertyInterpolate("hint",t.\u0275\u0275pipeBind1(4,8,"notification.tenants-list-rule-hint")),t.\u0275\u0275property("entityType",ne.entityType.TENANT)}}function be(ye,re){if(1&ye&&(t.\u0275\u0275element(0,"tb-entity-list",35),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate")),2&ye){const ne=t.\u0275\u0275nextContext(4);t.\u0275\u0275propertyInterpolate("labelText",t.\u0275\u0275pipeBind1(1,4,"tenant-profile.tenant-profiles")),t.\u0275\u0275propertyInterpolate("placeholderText",t.\u0275\u0275pipeBind1(2,6,"tenant-profile.tenant-profiles")),t.\u0275\u0275propertyInterpolate("hint",t.\u0275\u0275pipeBind1(3,8,"notification.tenant-profiles-list-rule-hint")),t.\u0275\u0275property("entityType",ne.entityType.TENANT_PROFILE)}}function Te(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"section")(1,"div",31)(2,"tb-toggle-select",32)(3,"tb-toggle-option",25),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"tb-toggle-option",25),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(9,$,5,10,"ng-container",33)(10,be,4,10,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275reference(11),ie=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275property("value",!0),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,6,"tenant.tenant")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",!1),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,8,"tenant-profile.tenant-profile")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",ie.targetNotificationForm.get("configuration.usersFilter.filterByTenants").value)("ngIfElse",ne)}}function oe(ye,re){if(1&ye&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Te,12,10,"section",13),t.\u0275\u0275elementContainerEnd()),2&ye){const ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ne.isSysAdmin())}}function R(ye,re){if(1&ye&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"tb-entity-list",36),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementContainerEnd()),2&ye){const ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("labelText",t.\u0275\u0275pipeBind1(2,4,"user.user-list")),t.\u0275\u0275propertyInterpolate("placeholderText",t.\u0275\u0275pipeBind1(3,6,"user.user")),t.\u0275\u0275propertyInterpolate("requiredText",t.\u0275\u0275pipeBind1(4,8,"user.user-list-required")),t.\u0275\u0275property("entityType",ne.entityType.USER)}}function N(ye,re){if(1&ye&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"tb-entity-autocomplete",37),t.\u0275\u0275elementContainerEnd()),2&ye){const ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("entityType",ne.entityType.CUSTOMER)}}function Z(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"section",27)(1,"mat-form-field",28)(2,"mat-label",11),t.\u0275\u0275text(3,"notification.recipient-type.user-filters"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-select",16),t.\u0275\u0275template(5,Ee,3,4,"mat-option",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-hint"),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerStart(9,29),t.\u0275\u0275template(10,oe,2,1,"ng-container",30)(11,R,5,10,"ng-container",30)(12,N,2,1,"ng-container",30),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",ne.notificationTargetConfigTypes),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,6,ne.notificationTargetConfigTypeInfoMap.get(ne.targetNotificationForm.get("configuration.usersFilter.type").value).hint)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngSwitch",ne.targetNotificationForm.get("configuration.usersFilter.type").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",ne.notificationTargetConfigType.TENANT_ADMINISTRATORS),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",ne.notificationTargetConfigType.USER_LIST),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",ne.notificationTargetConfigType.CUSTOMER_USERS)}}function Y(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-radio-button",25),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye){const ne=re.$implicit,ie=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",ne),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,ie.slackChanelTypesTranslateMap.get(ne))," ")}}function ge(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"section")(1,"label",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-radio-group",38),t.\u0275\u0275template(5,Y,3,4,"mat-radio-button",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"tb-slack-conversation-autocomplete",39),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,3,"notification.slack-chanel-type")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",ne.slackChanelTypes),t.\u0275\u0275advance(),t.\u0275\u0275property("slackChanelType",ne.targetNotificationForm.get("configuration.conversationType").value)}}function ce(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye){const ne=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,ne.targetNotificationForm.get("configuration.useOldApi").value?"notification.webhook-url-required":"notification.workflow-url-required")," ")}}function se(ye,re){1&ye&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ye&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.channel-name-required")," "))}function J(ye,re){if(1&ye&&(t.\u0275\u0275elementStart(0,"section")(1,"section",40)(2,"mat-slide-toggle",41),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"a",42),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"open_in_new"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"mat-form-field",10)(10,"mat-label"),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(13,"input",43),t.\u0275\u0275template(14,ce,3,3,"mat-error",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"mat-form-field",10)(16,"mat-label",11),t.\u0275\u0275text(17,"notification.channel-name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(18,"input",44),t.\u0275\u0275template(19,se,3,3,"mat-error",13),t.\u0275\u0275elementEnd()()),2&ye){const ne=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"notification.use-old-api")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(6,7,"notification.use-deprecated-webhook-connectors")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(12,9,ne.targetNotificationForm.get("configuration.useOldApi").value?"notification.webhook-url":"notification.workflow-url")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",ne.targetNotificationForm.get("configuration.webhookUrl").hasError("required")),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",ne.targetNotificationForm.get("configuration.channelName").hasError("required"))}}class de extends c.m{constructor(re,ne,ie,Ae,Pe,Be){super(re,ne,ie),this.store=re,this.router=ne,this.dialogRef=ie,this.data=Ae,this.fb=Pe,this.notificationService=Be,this.authState=(0,z.rW)(this.store),this.authUser=this.authState.authUser,this.notificationTargetType=e.pT,this.notificationTargetTypes=Object.values(e.pT),this.notificationTargetTypeTranslationMap=e.S2,this.notificationTargetConfigType=e.Xj,this.notificationTargetConfigTypes=this.allowNotificationTargetConfigTypes(),this.notificationTargetConfigTypeInfoMap=e.Hp,this.slackChanelTypes=Object.keys(e.MG),this.slackChanelTypesTranslateMap=e.v_,this.entityType=G.ck,this.isAdd=!0,this.destroy$=new H.B,(0,K.f1)(Ae.isAdd)&&(this.isAdd=Ae.isAdd),this.targetNotificationForm=this.fb.group({name:[null,V.Validators.required],configuration:this.fb.group({type:[e.pT.PLATFORM_USERS],usersFilter:this.fb.group({type:[e.Xj.ALL_USERS],filterByTenants:[{value:!0,disabled:!0}],tenantsIds:[{value:null,disabled:!0}],tenantProfilesIds:[{value:null,disabled:!0}],customerId:[{value:null,disabled:!0},V.Validators.required],usersIds:[{value:null,disabled:!0},V.Validators.required]}),conversationType:[{value:e.MG.PUBLIC_CHANNEL,disabled:!0}],conversation:[{value:"",disabled:!0},V.Validators.required],webhookUrl:[{value:"",disabled:!0},V.Validators.required],channelName:[{value:"",disabled:!0},V.Validators.required],useOldApi:[{value:!this.isAdd,disabled:!0}],description:[null]})}),this.targetNotificationForm.get("configuration.type").valueChanges.pipe((0,k.Q)(this.destroy$)).subscribe(Ke=>{switch(this.targetNotificationForm.get("configuration").disable({emitEvent:!1}),Ke){case e.pT.PLATFORM_USERS:this.targetNotificationForm.get("configuration.usersFilter").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.usersFilter.type").updateValueAndValidity({onlySelf:!0});break;case e.pT.SLACK:this.targetNotificationForm.get("configuration.conversationType").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.conversation").enable({emitEvent:!1});break;case e.pT.MICROSOFT_TEAMS:this.targetNotificationForm.get("configuration.webhookUrl").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.channelName").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.useOldApi").enable({emitEvent:!1})}this.targetNotificationForm.get("configuration.type").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.description").enable({emitEvent:!1})}),this.userFilterFormControls=Object.keys(this.targetNotificationForm.get("configuration.usersFilter").controls).filter(Ke=>"type"!==Ke),this.targetNotificationForm.get("configuration.usersFilter.type").valueChanges.pipe((0,k.Q)(this.destroy$)).subscribe(Ke=>{switch(this.userFilterFormControls.forEach(Xe=>this.targetNotificationForm.get(`configuration.usersFilter.${Xe}`).disable({emitEvent:!1})),Ke){case e.Xj.TENANT_ADMINISTRATORS:this.isSysAdmin()&&this.targetNotificationForm.get("configuration.usersFilter.filterByTenants").enable({onlySelf:!0});break;case e.Xj.USER_LIST:this.targetNotificationForm.get("configuration.usersFilter.usersIds").enable({emitEvent:!1});break;case e.Xj.CUSTOMER_USERS:this.targetNotificationForm.get("configuration.usersFilter.customerId").enable({emitEvent:!1})}}),this.targetNotificationForm.get("configuration.usersFilter.filterByTenants").valueChanges.pipe((0,k.Q)(this.destroy$)).subscribe(Ke=>{Ke?(this.targetNotificationForm.get("configuration.usersFilter.tenantsIds").enable({emitEvent:!1}),this.targetNotificationForm.get("configuration.usersFilter.tenantProfilesIds").disable({emitEvent:!1})):(this.targetNotificationForm.get("configuration.usersFilter.tenantsIds").disable({emitEvent:!1}),this.targetNotificationForm.get("configuration.usersFilter.tenantProfilesIds").enable({emitEvent:!1}))}),(0,K.f1)(Ae.target)&&(this.targetNotificationForm.patchValue(Ae.target,{emitEvent:!1}),this.targetNotificationForm.get("configuration.type").updateValueAndValidity({onlySelf:!0}),this.isSysAdmin()&&Ae.target.configuration.usersFilter?.type===e.Xj.TENANT_ADMINISTRATORS&&this.targetNotificationForm.get("configuration.usersFilter.filterByTenants").patchValue(!Array.isArray(this.data.target.configuration.usersFilter.tenantProfilesIds),{onlySelf:!0}),Ae.target.configuration.type===e.pT.MICROSOFT_TEAMS&&(0,K.z)(this.data.target.configuration.useOldApi)&&this.targetNotificationForm.get("configuration.useOldApi").patchValue(!0,{emitEvent:!1}))}ngOnDestroy(){super.ngOnDestroy(),this.destroy$.next(),this.destroy$.complete()}cancel(){this.dialogRef.close(null)}save(){let re=(0,K.XU)(this.targetNotificationForm.value);(0,K.f1)(this.data.target)&&(re=Object.assign({},this.data.target,re)),this.isSysAdmin()&&re.configuration.type===e.pT.PLATFORM_USERS&&re.configuration.usersFilter.type===e.Xj.TENANT_ADMINISTRATORS&&delete re.configuration.usersFilter.filterByTenants,this.notificationService.saveNotificationTarget(re).subscribe(ne=>this.dialogRef.close(ne))}isSysAdmin(){return this.authUser.authority===Q.s.SYS_ADMIN}allowNotificationTargetConfigTypes(){return this.isSysAdmin()?[e.Xj.ALL_USERS,e.Xj.TENANT_ADMINISTRATORS,e.Xj.AFFECTED_TENANT_ADMINISTRATORS,e.Xj.SYSTEM_ADMINISTRATORS]:Object.values(e.Xj).filter(re=>re!==e.Xj.AFFECTED_TENANT_ADMINISTRATORS&&re!==e.Xj.SYSTEM_ADMINISTRATORS)}static{this.\u0275fac=function(ne){return new(ne||de)(t.\u0275\u0275directiveInject(L.Store),t.\u0275\u0275directiveInject(B.Router),t.\u0275\u0275directiveInject(h.MatDialogRef),t.\u0275\u0275directiveInject(h.MAT_DIALOG_DATA),t.\u0275\u0275directiveInject(V.FormBuilder),t.\u0275\u0275directiveInject(S.J))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:de,selectors:[["tb-target-notification-dialog"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:43,vars:30,consts:[["tenantProfiles",""],[1,"tb-dialog-container",3,"formGroup"],["color","primary"],[1,"flex-1"],["tb-help","recipientNotifications"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formGroupName","configuration"],[1,"tb-title"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","usersFilter",4,"ngIf"],["matInput","","formControlName","description"],["mat-dialog-actions","",1,"flex","flex-row","items-stretch","justify-end","gap-2"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],[1,"flex","flex-col"],["formGroupName","usersFilter"],["subscriptSizing","dynamic",1,"mat-block"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","flex-1","items-center","justify-center"],["appearance","fill","formControlName","filterByTenants",1,"tb-notification-tenant-group"],[4,"ngIf","ngIfElse"],["formControlName","tenantsIds","subscriptSizing","dynamic",3,"labelText","placeholderText","hint","entityType"],["formControlName","tenantProfilesIds","subscriptSizing","dynamic",3,"labelText","placeholderText","hint","entityType"],["required","","formControlName","usersIds",3,"entityType","labelText","placeholderText","requiredText"],["required","","formControlName","customerId",3,"entityType"],["formControlName","conversationType"],["formControlName","conversation","required","",3,"slackChanelType"],[1,"tb-form-row",2,"margin-bottom","16px"],["formControlName","useOldApi",1,"mat-slide","margin"],["mat-icon-button","","href","https://devblogs.microsoft.com/microsoft365dev/retirement-of-office-365-connectors-within-microsoft-teams/","target","_blank","matTooltipPosition","above",1,"tb-mat-20",3,"matTooltip"],["matInput","","formControlName","webhookUrl"],["matInput","","formControlName","channelName"]],template:function(ne,ie){1&ne&&(t.\u0275\u0275elementStart(0,"form",1)(1,"mat-toolbar",2)(2,"h2"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"span",3)(6,"div",4),t.\u0275\u0275elementStart(7,"button",5),t.\u0275\u0275listener("click",function(){return ie.cancel()}),t.\u0275\u0275elementStart(8,"mat-icon",6),t.\u0275\u0275text(9,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(10,w,1,0,"mat-progress-bar",7),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275template(12,ee,1,0,"div",8),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275elementStart(14,"div",9)(15,"mat-form-field",10)(16,"mat-label",11),t.\u0275\u0275text(17,"notification.name"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(18,"input",12),t.\u0275\u0275template(19,_e,3,3,"mat-error",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"section",14)(21,"label",15),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"mat-radio-group",16),t.\u0275\u0275template(25,ve,5,4,"mat-radio-button",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(26,Z,13,8,"section",18)(27,ge,7,5,"section",13)(28,J,20,11,"section",13),t.\u0275\u0275elementStart(29,"mat-form-field",10)(30,"mat-label",11),t.\u0275\u0275text(31,"notification.description"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(32,"input",19),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(33,"mat-divider"),t.\u0275\u0275elementStart(34,"div",20)(35,"button",21),t.\u0275\u0275pipe(36,"async"),t.\u0275\u0275listener("click",function(){return ie.cancel()}),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(39,"button",22),t.\u0275\u0275pipe(40,"async"),t.\u0275\u0275listener("click",function(){return ie.save()}),t.\u0275\u0275text(41),t.\u0275\u0275pipe(42,"translate"),t.\u0275\u0275elementEnd()()()),2&ne&&(t.\u0275\u0275property("formGroup",ie.targetNotificationForm),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,14,ie.isAdd?"notification.add-notification-recipients-group":"notification.edit-notification-recipients-group")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(11,16,ie.isLoading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===t.\u0275\u0275pipeBind1(13,18,ie.isLoading$)),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",ie.targetNotificationForm.get("name").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(23,20,"notification.type")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",ie.notificationTargetTypes),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.targetNotificationForm.get("configuration.type").value===ie.notificationTargetType.PLATFORM_USERS),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.targetNotificationForm.get("configuration.type").value===ie.notificationTargetType.SLACK),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",ie.targetNotificationForm.get("configuration.type").value===ie.notificationTargetType.MICROSOFT_TEAMS),t.\u0275\u0275advance(7),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(36,22,ie.isLoading$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(38,24,"action.cancel")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",t.\u0275\u0275pipeBind1(40,26,ie.isLoading$)||ie.targetNotificationForm.invalid||!ie.targetNotificationForm.dirty),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(42,28,ie.isAdd?"action.add":"action.save")))},dependencies:[I.NgForOf,I.NgIf,I.NgSwitch,I.NgSwitchCase,U.HelpComponent,F.EntityAutocompleteComponent,a.EntityListComponent,O.MatButton,O.MatIconAnchor,O.MatIconButton,P.MatIcon,A.MatProgressBar,u.MatInput,m.MatFormField,m.MatLabel,m.MatHint,m.MatError,p.MatToolbar,h.MatDialogActions,h.MatDialogContent,v.MatSelect,T.MatOption,C.MatTooltip,_.MatDivider,E.MatRadioGroup,E.MatRadioButton,f.MatSlideToggle,V.\u0275NgNoValidate,V.DefaultValueAccessor,V.NgControlStatus,V.NgControlStatusGroup,V.RequiredValidator,V.FormGroupDirective,V.FormControlName,V.FormGroupName,g.TranslateDirective,y.SlackConversationAutocompleteComponent,b.ToggleOption,D.ToggleSelectComponent,I.AsyncPipe,g.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   form.tb-dialog-container[_ngcontent-%COMP%]{min-width:600px;max-height:100vh;color:#000000de}[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{height:85%}[_nghost-%COMP%]   .tb-title[_ngcontent-%COMP%]{display:block;padding-bottom:6px}[_nghost-%COMP%]   .tb-notification-tenant-group[_ngcontent-%COMP%]{width:280px;margin-bottom:16px}[_nghost-%COMP%]     .mat-mdc-radio-group{display:flex;flex-direction:row;margin-bottom:22px;gap:12px}[_nghost-%COMP%]     .mat-mdc-radio-group .mat-mdc-radio-button{flex:1 1 100%;padding:4px;border:1px solid rgba(0,0,0,.12);border-radius:6px}@media screen and (max-width: 599px){[_nghost-%COMP%]     .mat-mdc-radio-group{flex-direction:column}}']})}}},50670:(Re,X,n)=>{"use strict";n.d(X,{T:()=>$e});var e=n(83904),t=n(93953),c=n(34006),h=n(89417),V=n(40283),S=n(27997),G=n(25967),K=n(74972),H=n(96354),k=n(56977),Q=n(53244),z=n(18500),L=n(94303),B=n(9437),I=n(63729),U=n(9310),F=n(7901),a=n(99327),O=n(73955),P=n(60177),A=n(37441),u=n(34522),m=n(44216),p=n(88834),v=n(99213),T=n(67575),C=n(59042),_=n(53719),E=n(55911),f=n(14823),g=n(9183),y=n(71997),b=n(30450),D=n(39604),w=n(76233),ee=n(36471),_e=n(76085),ve=n(20011),Ee=n(29772),$=n(18409),be=n(99691),Te=n(10731),oe=n(20226);const R=["createNotification"],N=Oe=>({count:Oe});function Z(Oe,Fe){1&Oe&&t.\u0275\u0275element(0,"mat-progress-bar",32)}function Y(Oe,Fe){1&Oe&&(t.\u0275\u0275elementStart(0,"mat-icon"),t.\u0275\u0275text(1,"check"),t.\u0275\u0275elementEnd())}function ge(Oe,Fe){1&Oe&&(t.\u0275\u0275text(0),t.\u0275\u0275pipe(1,"translate")),2&Oe&&t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(1,1,"notification.setup"))}function ce(Oe,Fe){1&Oe&&t.\u0275\u0275elementContainer(0)}function se(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"tb-template-autocomplete",33),t.\u0275\u0275template(2,ce,1,0,"ng-container",34),t.\u0275\u0275elementEnd()),2&Oe){const le=t.\u0275\u0275nextContext(),we=t.\u0275\u0275reference(31);t.\u0275\u0275advance(),t.\u0275\u0275property("notificationTypes",le.notificationType.GENERAL),t.\u0275\u0275advance(),t.\u0275\u0275property("ngTemplateOutlet",we)}}function J(Oe,Fe){1&Oe&&t.\u0275\u0275elementContainer(0)}function de(Oe,Fe){if(1&Oe){const le=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",43),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(le);const qe=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(qe.refreshAllowDeliveryMethod())}),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"refresh"),t.\u0275\u0275elementEnd()()}2&Oe&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"notification.refresh-allow-delivery-method"))}function ye(Oe,Fe){1&Oe&&(t.\u0275\u0275elementStart(0,"mat-icon"),t.\u0275\u0275text(1," chevron_right "),t.\u0275\u0275elementEnd())}function re(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"a",45)(1,"mat-slide-toggle",46),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,ye,2,0,"mat-icon",47),t.\u0275\u0275elementEnd()),2&Oe){const le=t.\u0275\u0275nextContext().$implicit,we=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("routerLink",we.configurationPage(le))("formGroupName",le)("matTooltip",we.getDeliveryMethodsTooltip(le)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,5,we.notificationDeliveryMethodInfoMap.get(le).name)," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",we.isInteractDeliveryMethod(le))}}function ne(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",48)(1,"mat-slide-toggle",46),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext().$implicit,we=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("formGroupName",le)("matTooltip",we.getDeliveryMethodsTooltip(le))("matTooltipDisabled",we.getDeliveryMethodsTemplatesControl(le).enabled),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,we.notificationDeliveryMethodInfoMap.get(le).name)," ")}}function ie(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,re,5,7,"a",44)(2,ne,4,6,"ng-template",null,3,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementContainerEnd()),2&Oe){const le=Fe.$implicit,we=t.\u0275\u0275reference(3),qe=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",qe.isInteractDeliveryMethod(le))("ngIfElse",we)}}function Ae(Oe,Fe){if(1&Oe&&(t.\u0275\u0275template(0,J,1,0,"ng-container",34),t.\u0275\u0275elementStart(1,"section",35)(2,"section",36)(3,"div",37)(4,"div")(5,"label",38),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",39),t.\u0275\u0275text(9,"notification.at-least-one-should-be-selected"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(10,de,4,3,"button",40),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"section",41),t.\u0275\u0275template(12,ie,4,2,"ng-container",42),t.\u0275\u0275elementEnd()()()),2&Oe){const le=t.\u0275\u0275nextContext(),we=t.\u0275\u0275reference(31);t.\u0275\u0275property("ngTemplateOutlet",we),t.\u0275\u0275advance(5),t.\u0275\u0275classProp("tb-error",le.notificationRequestForm.get("template.configuration.deliveryMethodsTemplates").hasError("atLeastOne")),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,6,"notification.delivery-methods")),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",le.showRefresh),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",le.notificationDeliveryMethods)}}function Pe(Oe,Fe){if(1&Oe){const le=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tb-entity-list",49),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"button",50,4),t.\u0275\u0275listener("click",function(qe){t.\u0275\u0275restoreView(le);const lt=t.\u0275\u0275reference(5),Kt=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Kt.createTarget(qe,lt))}),t.\u0275\u0275elementStart(6,"span",51),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()()}if(2&Oe){const le=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("labelText",t.\u0275\u0275pipeBind1(1,6,"notification.recipients")),t.\u0275\u0275propertyInterpolate("placeholderText",t.\u0275\u0275pipeBind1(2,8,"notification.recipient")),t.\u0275\u0275propertyInterpolate("requiredText",t.\u0275\u0275pipeBind1(3,10,"notification.recipients-required")),t.\u0275\u0275propertyInterpolate("entityType",le.entityType.NOTIFICATION_TARGET),t.\u0275\u0275propertyInterpolate("subType",le.notificationType.GENERAL),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,12,"notification.create-new"))}}function Be(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"div",52),t.\u0275\u0275element(1,"tb-timezone-select",53),t.\u0275\u0275elementStart(2,"mat-form-field")(3,"mat-label",54),t.\u0275\u0275text(4,"notification.time"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"mat-datetimepicker-toggle",55)(6,"mat-datetimepicker",56,5)(8,"input",57),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275reference(7),we=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("for",le),t.\u0275\u0275advance(3),t.\u0275\u0275property("min",we.minDate())("max",we.maxDate())("matDatetimepicker",le)}}function Ke(Oe,Fe){1&Oe&&(t.\u0275\u0275text(0),t.\u0275\u0275pipe(1,"translate")),2&Oe&&t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(1,1,"notification.compose"))}function Xe(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"form",18),t.\u0275\u0275element(1,"tb-template-configuration",59),t.\u0275\u0275elementEnd()),2&Oe){t.\u0275\u0275nextContext();const le=t.\u0275\u0275reference(1),we=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",we.notificationTemplateConfigurationForm),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("notificationType",we.notificationType.GENERAL),t.\u0275\u0275property("predefinedDeliveryMethodsTemplate",we.deliveryConfiguration)("interacted",le.interacted)}}function at(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"mat-step",16,6),t.\u0275\u0275template(2,Ke,2,3,"ng-template",17)(3,Xe,2,4,"ng-template",58),t.\u0275\u0275elementEnd()),2&Oe){const le=t.\u0275\u0275nextContext();t.\u0275\u0275property("stepControl",le.notificationTemplateConfigurationForm)}}function bt(Oe,Fe){1&Oe&&(t.\u0275\u0275text(0),t.\u0275\u0275pipe(1,"translate")),2&Oe&&t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(1,1,"notification.review"))}function Mt(Oe,Fe){1&Oe&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275element(1,"mat-progress-spinner",61),t.\u0275\u0275elementEnd())}function ze(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"div",72)(1,"span",73),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&Oe){const le=Fe.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(le.value),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1("",le.key," ")}}function vt(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"div",70),t.\u0275\u0275template(1,ze,4,2,"div",71),t.\u0275\u0275pipe(2,"keyvalue"),t.\u0275\u0275elementEnd()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,1,le.preview.recipientsCountByTarget))}}function tt(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"mat-chip")(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&Oe){const le=Fe.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(le)}}function Ye(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:bell-badge"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.web-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",76),t.\u0275\u0275element(7,"tb-notification",77),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(7),t.\u0275\u0275property("notification",le.preview.processedTemplates.WEB)}}function Qe(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:cellphone-text"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.mobile-app-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",78)(7,"div",79),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(le.preview.processedTemplates.MOBILE_APP.subject),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(le.preview.processedTemplates.MOBILE_APP.body)}}function nt(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:message-processing"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.sms-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",78),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",le.preview.processedTemplates.SMS.body," ")}}function ot(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:email"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.email-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",78)(7,"div",79),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"mat-divider")(10,"div",80),t.\u0275\u0275pipe(11,"safe"),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(le.preview.processedTemplates.EMAIL.subject),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",t.\u0275\u0275pipeBind2(11,2,le.preview.processedTemplates.EMAIL.body,"html"),t.\u0275\u0275sanitizeHtml)}}function gt(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:slack"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.slack-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",78),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",le.preview.processedTemplates.SLACK.body," ")}}function rt(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"section",74)(1,"div",64)(2,"tb-icon",65),t.\u0275\u0275text(3,"mdi:microsoft-teams"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",75),t.\u0275\u0275text(5,"notification.delivery-method.microsoft-teams-preview"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",81)(7,"div",79),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()()),2&Oe){const le=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(le.preview.processedTemplates.MICROSOFT_TEAMS.subject),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",le.preview.processedTemplates.MICROSOFT_TEAMS.body," ")}}function Ze(Oe,Fe){if(1&Oe&&(t.\u0275\u0275elementStart(0,"div",62)(1,"section",63)(2,"div",64)(3,"tb-icon",65),t.\u0275\u0275text(4,"supervisor_account"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",66),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,vt,3,3,"div",67),t.\u0275\u0275element(9,"mat-divider",68),t.\u0275\u0275elementStart(10,"mat-chip-listbox"),t.\u0275\u0275template(11,tt,3,1,"mat-chip",42),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(12,Ye,8,1,"section",69)(13,Qe,11,2,"section",69)(14,nt,8,1,"section",69)(15,ot,12,5,"section",69)(16,gt,8,1,"section",69)(17,rt,10,2,"section",69),t.\u0275\u0275elementEnd()),2&Oe){let le;const we=t.\u0275\u0275nextContext();t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(7,9,"notification.recipients-count",t.\u0275\u0275pureFunction1(12,N,we.preview.totalRecipientsCount))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==(le=we.notificationRequestForm.get("targets").value)?null:le.length)>1),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",we.preview.recipientsPreview),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.WEB?null:we.preview.processedTemplates.WEB.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.MOBILE_APP?null:we.preview.processedTemplates.MOBILE_APP.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.SMS?null:we.preview.processedTemplates.SMS.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.EMAIL?null:we.preview.processedTemplates.EMAIL.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.SLACK?null:we.preview.processedTemplates.SLACK.enabled),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",null==we.preview.processedTemplates.MICROSOFT_TEAMS?null:we.preview.processedTemplates.MICROSOFT_TEAMS.enabled)}}function je(Oe,Fe){if(1&Oe){const le=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",82),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(le);const qe=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(qe.backStep())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&Oe&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"action.back")))}class $e extends L.z{constructor(Fe,le,we,qe,lt,Kt,Jt,Vt,hn){if(super(Fe,le,we,Kt),this.store=Fe,this.router=le,this.dialogRef=we,this.data=qe,this.breakpointObserver=lt,this.fb=Kt,this.notificationService=Jt,this.dialog=Vt,this.translate=hn,this.isAdd=!0,this.entityType=G.ck,this.notificationType=e._n,this.selectedIndex=0,this.preview=null,this.dialogTitle="notification.notify-again",this.showRefresh=!1,this.authUser=(0,I.rx)(this.store),this.notificationDeliveryMethods.forEach(ut=>{ut!==e.Fd.WEB&&this.templateNotificationForm.get("configuration.deliveryMethodsTemplates").get(ut).disable({emitEvent:!1})}),this.stepperOrientation=this.breakpointObserver.observe(K.zV["gt-sm"]).pipe((0,H.T)(({matches:ut})=>ut?"horizontal":"vertical")),this.notificationRequestForm=this.fb.group({useTemplate:[!1],templateId:[{value:null,disabled:!0},h.Validators.required],targets:[null,h.Validators.required],template:this.templateNotificationForm,additionalConfig:this.fb.group({enabled:[!1],timezone:[{value:"",disabled:!0},h.Validators.required],time:[{value:0,disabled:!0},h.Validators.required]})}),this.notificationRequestForm.get("template.name").setValue((0,S.Os)()),this.notificationRequestForm.get("useTemplate").valueChanges.pipe((0,k.Q)(this.destroy$)).subscribe(ut=>{ut?(this.notificationRequestForm.get("templateId").enable({emitEvent:!1}),this.notificationRequestForm.get("template").disable({emitEvent:!1})):(this.notificationRequestForm.get("templateId").disable({emitEvent:!1}),this.notificationRequestForm.get("template").enable({emitEvent:!1}),this.updateDeliveryMethodsDisableState())}),this.notificationRequestForm.get("additionalConfig.enabled").valueChanges.pipe((0,k.Q)(this.destroy$)).subscribe(ut=>{ut?(this.notificationRequestForm.get("additionalConfig.timezone").enable({emitEvent:!1}),this.notificationRequestForm.get("additionalConfig.time").enable({emitEvent:!1})):(this.notificationRequestForm.get("additionalConfig.timezone").disable({emitEvent:!1}),this.notificationRequestForm.get("additionalConfig.time").disable({emitEvent:!1}))}),qe.isAdd&&(this.dialogTitle="notification.new-notification"),qe.request){this.notificationRequestForm.reset({},{emitEvent:!1}),this.notificationRequestForm.patchValue(this.data.request,{emitEvent:!1}),this.notificationRequestForm.get("template.name").setValue((0,S.Os)()),this.notificationRequestForm.get("template.notificationType").setValue(e._n.GENERAL);let ut=!0;(0,S.f1)(this.data.request.template)&&(ut=!1,this.notificationTemplateConfigurationForm.patchValue({deliveryMethodsTemplates:this.data.request.template.configuration.deliveryMethodsTemplates},{emitEvent:!1})),this.notificationRequestForm.get("useTemplate").setValue(ut,{onlySelf:!0}),this.deliveryConfiguration=this.templateNotificationForm.get("configuration.deliveryMethodsTemplates").value}this.refreshAllowDeliveryMethod()}ngOnDestroy(){super.ngOnDestroy()}cancel(){this.dialogRef.close(null)}nextStepLabel(){return this.selectedIndex>=this.maxStepperIndex?"action.send":"action.next"}changeStep(Fe){this.selectedIndex=Fe.selectedIndex,Fe.previouslySelectedIndex>Fe.selectedIndex&&(Fe.previouslySelectedStep.interacted=!1),this.selectedIndex===this.maxStepperIndex&&this.getPreview()}backStep(){this.createNotification.previous()}nextStep(){this.selectedIndex>=this.maxStepperIndex?this.add():this.createNotification.next()}get maxStepperIndex(){return this.createNotification?._steps?.length-1}add(){this.allValid()&&this.notificationService.createNotificationRequest(this.notificationFormValue).subscribe(Fe=>this.dialogRef.close(Fe))}getPreview(){this.allValid()&&(this.preview=null,this.notificationService.getNotificationRequestPreview(this.notificationFormValue).pipe((0,H.T)(Fe=>(Fe.processedTemplates.WEB?.enabled&&(Fe.processedTemplates.WEB.text=Fe.processedTemplates.WEB.body),Fe))).subscribe(Fe=>this.preview=Fe))}get notificationFormValue(){const Fe=(0,S.XU)(this.notificationRequestForm.value);Fe.useTemplate||(Fe.template=super.getNotificationTemplateValue()),delete Fe.useTemplate;let le=0;return Fe.additionalConfig.enabled&&(le=(this.notificationRequestForm.value.additionalConfig.time.valueOf()-this.minDate().valueOf())/1e3),Fe.additionalConfig={sendingDelayInSec:le>0?le:0},Fe}allValid(){return!this.createNotification.steps.find((Fe,le)=>!!Fe.stepControl?.invalid&&(Fe.interacted=!0,this.createNotification.selectedIndex=le,!0))}isSysAdmin(){return this.authUser.authority===B.s.SYS_ADMIN}isTenantAdmin(){return this.authUser.authority===B.s.TENANT_ADMIN}minDate(){return new Date((0,Q.Ln)(this.notificationRequestForm.get("additionalConfig.timezone").value).format("lll"))}maxDate(){const Fe=this.minDate();return Fe.setDate(Fe.getDate()+7),Fe}createTarget(Fe,le){Fe&&Fe.stopPropagation(),le._elementRef.nativeElement.blur(),this.dialog.open(z.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{}}).afterClosed().subscribe(we=>{if(we){let qe=this.notificationRequestForm.get("targets").value;qe||(qe=[]),qe.push(we.id.id),this.notificationRequestForm.get("targets").patchValue(qe)}})}getDeliveryMethodsTemplatesControl(Fe){return this.templateNotificationForm.get("configuration.deliveryMethodsTemplates").get(Fe).get("enabled")}getDeliveryMethodsTooltip(Fe){return this.allowConfigureDeliveryMethod(Fe)?this.translate.instant("notification.delivery-method-not-configure-click"):this.translate.instant("notification.delivery-method-not-configure-contact")}allowConfigureDeliveryMethod(Fe){const le=new Set([e.Fd.SLACK]);return Fe!==e.Fd.WEB&&(!!this.isSysAdmin()||!!this.isTenantAdmin()&&le.has(Fe))}isInteractDeliveryMethod(Fe){return this.getDeliveryMethodsTemplatesControl(Fe).disabled&&this.allowConfigureDeliveryMethod(Fe)}configurationPage(Fe){switch(Fe){case e.Fd.EMAIL:return"/settings/outgoing-mail";case e.Fd.SMS:case e.Fd.SLACK:case e.Fd.MOBILE_APP:return"/settings/notifications"}}refreshAllowDeliveryMethod(){this.notificationService.getAvailableDeliveryMethods({ignoreLoading:!0}).subscribe(Fe=>{this.allowNotificationDeliveryMethods=Fe,this.notificationRequestForm.get("useTemplate").value||(this.updateDeliveryMethodsDisableState(),this.showRefresh=this.notificationDeliveryMethods.length!==Fe.length)})}updateDeliveryMethodsDisableState(){this.allowNotificationDeliveryMethods&&this.notificationDeliveryMethods.forEach(Fe=>{this.allowNotificationDeliveryMethods.includes(Fe)?this.getDeliveryMethodsTemplatesControl(Fe).enable({emitEvent:!0}):(this.getDeliveryMethodsTemplatesControl(Fe).disable({emitEvent:!0}),this.getDeliveryMethodsTemplatesControl(Fe).setValue(!1,{emitEvent:!0}))})}static{this.\u0275fac=function(le){return new(le||$e)(t.\u0275\u0275directiveInject(U.Store),t.\u0275\u0275directiveInject(F.Router),t.\u0275\u0275directiveInject(c.MatDialogRef),t.\u0275\u0275directiveInject(c.MAT_DIALOG_DATA),t.\u0275\u0275directiveInject(a.BreakpointObserver),t.\u0275\u0275directiveInject(h.FormBuilder),t.\u0275\u0275directiveInject(V.J),t.\u0275\u0275directiveInject(c.MatDialog),t.\u0275\u0275directiveInject(O.TranslateService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:$e,selectors:[["tb-sent-notification-dialog"]],viewQuery:function(le,we){if(1&le&&t.\u0275\u0275viewQuery(R,7),2&le){let qe;t.\u0275\u0275queryRefresh(qe=t.\u0275\u0275loadQuery())&&(we.createNotification=qe.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:50,vars:34,consts:[["createNotification",""],["scratchTemplate",""],["recipientsList",""],["deliveryMethod",""],["createTargetButton",""],["startTimePicker",""],["composeStep","matStep"],["color","primary"],[1,"flex-1"],["tb-help","sentNotification"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["linear","","labelPosition","end",3,"selectionChange","orientation"],["matStepperIcon","edit"],[3,"stepControl"],["matStepLabel",""],[3,"formGroup"],[1,"flex","items-stretch","justify-center"],["formControlName","useTemplate","appearance","fill"],[3,"value"],[4,"ngIf","ngIfElse"],["formGroupName","additionalConfig",1,"tb-form-panel","stroked","no-padding-bottom","no-gap"],["formControlName","enabled",1,"toggle"],["class","flex flex-col",4,"ngIf"],[3,"stepControl",4,"ngIf"],["class","tb-loader",4,"ngIf"],["class","tb-form-panel no-padding no-border",4,"ngIf"],["mat-dialog-actions","",1,"tb-dialog-actions"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["color","warn","mode","indeterminate"],["required","","allowCreate","","allowEdit","","formControlName","templateId",3,"notificationTypes"],[4,"ngTemplateOutlet"],["formGroupName","template"],["formGroupName","configuration"],[1,"delivery-title"],[1,"tb-title","tb-required"],["translate","",1,"tb-form-hint"],["matTooltipPosition","above","mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["formGroupName","deliveryMethodsTemplates",1,"delivery-methods-container"],[4,"ngFor","ngForOf"],["matTooltipPosition","above","mat-icon-button","",3,"click","matTooltip"],["class","tb-form-panel stroked delivery-method-container tb-pointer interact","matTooltipPosition","above",3,"routerLink","formGroupName","matTooltip",4,"ngIf","ngIfElse"],["matTooltipPosition","above",1,"tb-form-panel","stroked","delivery-method-container","tb-pointer","interact",3,"routerLink","formGroupName","matTooltip"],["formControlName","enabled",1,"delivery-method"],[4,"ngIf"],["matTooltipPosition","above",1,"delivery-method-container","tb-form-panel","stroked",3,"formGroupName","matTooltip","matTooltipDisabled"],["syncIdsWithDB","","required","","formControlName","targets",3,"labelText","placeholderText","requiredText","entityType","subType"],["mat-button","","color","primary","matSuffix","",3,"click"],[2,"white-space","nowrap"],[1,"flex","flex-col"],["userTimezoneByDefault","","required","","formControlName","timezone"],["translate",""],["matPrefix","",3,"for"],["type","datetime","openOnFocus","true"],["required","","matInput","","formControlName","time",1,"flex-1",3,"min","max","matDatetimepicker"],["matStepContent",""],["formControlName","deliveryMethodsTemplates",3,"notificationType","predefinedDeliveryMethodsTemplate","interacted"],[1,"tb-loader"],["color","warn","mode","indeterminate","strokeWidth","5"],[1,"tb-form-panel","no-padding","no-border"],[1,"preview-group","tb-form-panel","stroked","no-gap"],[1,"flex","flex-row","items-center","justify-start","gap-2"],[1,"tb-mat-18"],[1,"tb-form-panel-title"],["class","details-recipients",4,"ngIf"],[1,"divider"],["class","preview-group notification tb-form-panel stroked no-gap",4,"ngIf"],[1,"details-recipients"],["class","details-recipient",4,"ngFor","ngForOf"],[1,"details-recipient"],[1,"number"],[1,"preview-group","notification","tb-form-panel","stroked","no-gap"],["translate","",1,"tb-form-panel-title"],[1,"web-preview"],["preview","",3,"notification"],[1,"notification-content"],[1,"subject"],[1,"html-content",3,"innerHTML"],[1,"notification-content","mini"],["mat-stroked-button","",3,"click"]],template:function(le,we){if(1&le){const qe=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-toolbar",7)(1,"h2"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"span",8)(5,"div",9),t.\u0275\u0275elementStart(6,"button",10),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(qe),t.\u0275\u0275resetView(we.cancel())}),t.\u0275\u0275elementStart(7,"mat-icon",11),t.\u0275\u0275text(8,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(9,Z,1,0,"mat-progress-bar",12),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementStart(11,"div",13)(12,"mat-horizontal-stepper",14,0),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275listener("selectionChange",function(Kt){return t.\u0275\u0275restoreView(qe),t.\u0275\u0275resetView(we.changeStep(Kt))}),t.\u0275\u0275template(15,Y,2,0,"ng-template",15),t.\u0275\u0275elementStart(16,"mat-step",16),t.\u0275\u0275template(17,ge,2,3,"ng-template",17),t.\u0275\u0275elementStart(18,"form",18)(19,"div",19)(20,"tb-toggle-select",20)(21,"tb-toggle-option",21),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"tb-toggle-option",21),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(27,se,3,2,"div",22)(28,Ae,13,8,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)(30,Pe,9,14,"ng-template",null,2,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(32,"section",23)(33,"mat-slide-toggle",24),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(36,Be,9,4,"div",25),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(37,at,4,1,"mat-step",26),t.\u0275\u0275elementStart(38,"mat-step"),t.\u0275\u0275template(39,bt,2,3,"ng-template",17)(40,Mt,2,0,"div",27),t.\u0275\u0275pipe(41,"async"),t.\u0275\u0275template(42,Ze,18,14,"div",28),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(43,"mat-divider"),t.\u0275\u0275elementStart(44,"div",29),t.\u0275\u0275template(45,je,3,3,"button",30),t.\u0275\u0275element(46,"span",8),t.\u0275\u0275elementStart(47,"button",31),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(qe),t.\u0275\u0275resetView(we.nextStep())}),t.\u0275\u0275text(48),t.\u0275\u0275pipe(49,"translate"),t.\u0275\u0275elementEnd()()}if(2&le){const qe=t.\u0275\u0275reference(29);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,18,we.dialogTitle)),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(10,20,we.isLoading$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("orientation",t.\u0275\u0275pipeBind1(14,22,we.stepperOrientation)),t.\u0275\u0275advance(4),t.\u0275\u0275property("stepControl",we.notificationRequestForm),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",we.notificationRequestForm),t.\u0275\u0275advance(3),t.\u0275\u0275property("value",!1),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(23,24,"notification.start-from-scratch")),t.\u0275\u0275advance(2),t.\u0275\u0275property("value",!0),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(26,26,"notification.use-template")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",we.notificationRequestForm.get("useTemplate").value)("ngIfElse",qe),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,28,"notification.scheduler-later")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",we.notificationRequestForm.get("additionalConfig.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!we.notificationRequestForm.get("useTemplate").value),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(41,30,we.isLoading$)&&!we.preview),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",we.preview),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",we.selectedIndex>0),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(49,32,we.nextStepLabel()))}},dependencies:[P.NgForOf,P.NgIf,P.NgTemplateOutlet,A.HelpComponent,u.TimezoneSelectComponent,m.EntityListComponent,p.MatButton,p.MatIconButton,v.MatIcon,T.MatProgressBar,C.MatInput,_.MatFormField,_.MatLabel,_.MatPrefix,_.MatSuffix,E.MatToolbar,c.MatDialogActions,c.MatDialogContent,f.MatTooltip,g.MatProgressSpinner,y.MatDivider,b.MatSlideToggle,D.MatDatetimepickerComponent,D.MatDatetimepickerToggleComponent,D.MatDatetimepickerInputDirective,w.MatStep,w.MatStepLabel,w.MatStepper,w.MatStepperIcon,w.MatStepContent,ee.MatChip,ee.MatChipListbox,h.\u0275NgNoValidate,h.DefaultValueAccessor,h.NgControlStatus,h.NgControlStatusGroup,h.RequiredValidator,h.FormGroupDirective,h.FormControlName,h.FormGroupName,F.RouterLink,O.TranslateDirective,_e.NotificationComponent,ve.TemplateAutocompleteComponent,Ee.ToggleOption,$.ToggleSelectComponent,be.TbIconComponent,Te.l,P.AsyncPipe,P.KeyValuePipe,oe.SafePipe,O.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:780px;height:100%;max-width:100%;max-height:100vh;display:grid;grid-template-rows:min-content 4px minmax(auto,1fr) min-content min-content}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{grid-row:3;display:flex;flex-direction:column;height:100%;padding:0;color:#000000de}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-dialog-actions[_ngcontent-%COMP%]{grid-row:5;display:flex}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .mat-divider[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .mat-divider[_ngcontent-%COMP%]{grid-row:4}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-title[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-title[_ngcontent-%COMP%]{font-size:16px;line-height:24px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-title.tb-required[_ngcontent-%COMP%]:after, .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-title.tb-required[_ngcontent-%COMP%]:after{font-size:initial;content:"*"}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-title.tb-error[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-title.tb-error[_ngcontent-%COMP%]{color:var(--mdc-theme-error, #f44336)}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-title.tb-error.tb-required[_ngcontent-%COMP%]:after, .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-title.tb-error.tb-required[_ngcontent-%COMP%]:after{color:var(--mdc-theme-error, #f44336)}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-mat-error[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-mat-error[_ngcontent-%COMP%]{font-size:13px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-form-hint[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-form-hint[_ngcontent-%COMP%]{padding:0 0 8px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%]{border-radius:6px;background-color:#3056800a;margin-bottom:8px;padding:8px 16px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{vertical-align:middle}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .delivery-title[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .delivery-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]{margin-bottom:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,auto));gap:8px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container[_ngcontent-%COMP%]{flex-direction:row}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container.interact[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container.interact[_ngcontent-%COMP%]{color:inherit}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container[_ngcontent-%COMP%]   .delivery-method[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .delivery-methods-container[_ngcontent-%COMP%]   .delivery-method-container[_ngcontent-%COMP%]   .delivery-method[_ngcontent-%COMP%]{width:100%;height:100%}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{margin-bottom:16px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .tb-loader[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .tb-loader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;max-height:100%}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%]{background-color:#f3f6fa}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%]   tb-icon[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%]   tb-icon[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%]   .tb-form-panel-title[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group.notification[_ngcontent-%COMP%]   .tb-form-panel-title[_ngcontent-%COMP%]{color:#00000061}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child), .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child){margin-bottom:12px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%]{font-size:14px;line-height:14px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-weight:500;margin-right:4px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%]:not(:last-of-type), .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .details-recipient[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:8px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin-bottom:8px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .web-preview[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .web-preview[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:center;display:flex}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .web-preview[_ngcontent-%COMP%]   tb-notification[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .web-preview[_ngcontent-%COMP%]   tb-notification[_ngcontent-%COMP%]{border:1px groove #305680;border-radius:4px;max-width:400px;width:80%;background-color:#fff}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:4px;background:#fff;padding:12px 16px;display:inline-grid;width:100%}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{padding-bottom:12px;font-weight:500;letter-spacing:.25px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .html-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .html-content[_ngcontent-%COMP%]{margin-top:12px;font-weight:400;font-size:14px;line-height:20px;overflow-x:auto}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content.mini[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content.mini[_ngcontent-%COMP%]{font-size:12px;line-height:1.25}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content.mini[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   .preview-group[_ngcontent-%COMP%]   .notification-content.mini[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;padding-bottom:4px}.tb-fullscreen-dialog   .mat-mdc-dialog-container[_nghost-%COMP%]   tb-toggle-select[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-mdc-dialog-container   [_nghost-%COMP%]   tb-toggle-select[_ngcontent-%COMP%]{margin-bottom:24px;width:320px}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal{display:flex;height:100%;overflow:hidden}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-wrapper{flex:1 1 100%;width:100%}[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:680px;max-height:100%;width:100%;overflow-y:auto;scrollbar-gutter:stable}@media screen and (min-width: 960px){[_nghost-%COMP%]     .mat-mdc-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:500px}}[_nghost-%COMP%]     .preview-group .notification-content .html-content, [_nghost-%COMP%]     .preview-group .notification-content .html-content *{all:revert}[_nghost-%COMP%]     .delivery-methods-container .delivery-method-container.interact *{cursor:pointer}']})}}},5172:(Re,X,n)=>{"use strict";n.d(X,{h:()=>f});var e=n(31635),t=n(93953),c=n(89417),h=n(83904),V=n(56977),S=n(18530),G=n(27997),K=n(29225),H=n(60177),k=n(23593),Q=n(96557),z=n(59042),L=n(53719),B=n(82798),I=n(86600),U=n(30450),F=n(9454),a=n(73955),O=n(86941);const P=g=>({length:g});function A(g,y){1&g&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.button-text-required")," "))}function u(g,y){if(1&g&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g){const b=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"notification.button-text-max-length",t.\u0275\u0275pureFunction1(4,P,b.actionButtonConfigForm.get("text").getError("maxlength").requiredLength))," ")}}function m(g,y){if(1&g&&(t.\u0275\u0275elementStart(0,"mat-form-field",16)(1,"mat-label",11),t.\u0275\u0275text(2,"notification.button-text"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",17),t.\u0275\u0275template(4,A,3,3,"mat-error",18)(5,u,3,6,"mat-error",18),t.\u0275\u0275elementEnd()),2&g){const b=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",b.actionButtonConfigForm.get("text").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",b.actionButtonConfigForm.get("text").hasError("maxlength"))}}function p(g,y){if(1&g&&(t.\u0275\u0275elementStart(0,"mat-option",19),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g){const b=y.$implicit,D=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("value",b),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,D.actionButtonLinkTypeTranslateMap.get(b))," ")}}function v(g,y){1&g&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.link-required")," "))}function T(g,y){if(1&g&&(t.\u0275\u0275elementStart(0,"mat-form-field",20)(1,"mat-label",11),t.\u0275\u0275text(2,"notification.link"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",21),t.\u0275\u0275template(4,v,3,3,"mat-error",18),t.\u0275\u0275elementEnd()),2&g){const b=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",b.actionButtonConfigForm.get("link").hasError("required"))}}function C(g,y){if(1&g&&t.\u0275\u0275element(0,"tb-dashboard-autocomplete",22)(1,"tb-dashboard-state-autocomplete",23),2&g){const b=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275property("dashboardId",b.actionButtonConfigForm.get("dashboardId").value)}}function _(g,y){1&g&&(t.\u0275\u0275elementStart(0,"mat-slide-toggle",24),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&g&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.set-entity-from-notification")," "))}function E(g,y){if(1&g&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275template(1,m,6,2,"mat-form-field",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div",8)(3,"mat-form-field",10)(4,"mat-label",11),t.\u0275\u0275text(5,"notification.action-type"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-select",12),t.\u0275\u0275template(7,p,3,4,"mat-option",13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,T,5,1,"mat-form-field",14)(9,C,2,1,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,_,3,3,"mat-slide-toggle",15)),2&g){const b=t.\u0275\u0275reference(10),D=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!D.hideButtonText),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",D.actionButtonLinkTypes),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",D.actionButtonConfigForm.get("linkType").value===D.actionButtonLinkType.LINK)("ngIfElse",b),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",D.actionButtonConfigForm.get("linkType").value===D.actionButtonLinkType.DASHBOARD)}}class f{get hideButtonText(){return this.hideButtonTextValue}set hideButtonText(y){this.hideButtonTextValue=y,this.hideButtonTextValue&&this.actionButtonConfigForm.removeControl("text")}constructor(y){this.fb=y,this.hideButtonTextValue=!1,this.actionButtonLinkType=h.l5,this.actionButtonLinkTypes=Object.keys(h.l5),this.actionButtonLinkTypeTranslateMap=h.VJ,this.propagateChange=b=>{},this.destroy$=new S.B,this.actionButtonConfigForm=this.fb.group({enabled:[!1],text:[{value:"",disabled:!0},[c.Validators.required,c.Validators.maxLength(50)]],linkType:[h.l5.LINK],link:[{value:"",disabled:!0},c.Validators.required],dashboardId:[{value:null,disabled:!0},c.Validators.required],dashboardState:[{value:null,disabled:!0}],setEntityIdInState:[{value:!0,disabled:!0}]}),this.actionButtonConfigForm.get("enabled").valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(b=>{b?(this.hideButtonText||this.actionButtonConfigForm.get("text").enable({emitEvent:!1}),this.actionButtonConfigForm.get("linkType").enable({onlySelf:!1})):(this.actionButtonConfigForm.disable({emitEvent:!1}),this.actionButtonConfigForm.get("enabled").enable({emitEvent:!1}))}),this.actionButtonConfigForm.get("linkType").valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(b=>{this.actionButtonConfigForm.get("enabled").value&&(b===h.l5.LINK?(this.actionButtonConfigForm.get("link").enable({emitEvent:!1}),this.actionButtonConfigForm.get("dashboardId").disable({emitEvent:!1}),this.actionButtonConfigForm.get("dashboardState").disable({emitEvent:!1}),this.actionButtonConfigForm.get("setEntityIdInState").disable({emitEvent:!1})):(this.actionButtonConfigForm.get("link").disable({emitEvent:!1}),this.actionButtonConfigForm.get("dashboardId").enable({emitEvent:!1}),this.actionButtonConfigForm.get("dashboardState").enable({emitEvent:!1}),this.actionButtonConfigForm.get("setEntityIdInState").enable({emitEvent:!1})))}),this.actionButtonConfigForm.valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(b=>this.propagateChange(b))}ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(y){this.propagateChange=y}registerOnTouched(y){}setDisabledState(y){y?this.actionButtonConfigForm.disable({emitEvent:!1}):(this.actionButtonConfigForm.enable({emitEvent:!1}),this.actionButtonConfigForm.get("enabled").updateValueAndValidity({onlySelf:!0}))}validate(){return this.actionButtonConfigForm.valid?null:{actionButtonConfigForm:{valid:!1}}}writeValue(y){(0,G.f1)(y)&&(this.actionButtonConfigForm.patchValue(y,{emitEvent:!1}),this.actionButtonConfigForm.get("enabled").updateValueAndValidity({onlySelf:!0}))}static{this.\u0275fac=function(b){return new(b||f)(t.\u0275\u0275directiveInject(c.FormBuilder))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:f,selectors:[["tb-notification-action-button-configuration"]],inputs:{actionTitle:"actionTitle",sliderHint:"sliderHint",hideButtonText:"hideButtonText"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>f),multi:!0},{provide:c.NG_VALIDATORS,useExisting:(0,t.forwardRef)(()=>f),multi:!0}])],decls:8,vars:4,consts:[["dashboardSelector",""],[1,"tb-form-panel","tb-slide-toggle","stroked",3,"formGroup"],[1,"tb-settings",3,"expanded"],[1,"fill-width","flex","flex-row","flex-wrap"],[1,"max-w-60%","flex-full"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","enabled",1,"mat-slide","flex","items-stretch","justify-center",3,"click"],["matExpansionPanelContent","",1,"tb-extension-panel"],[1,"flex","flex-row","xs:flex-col","gt-xs:gap-2"],["class","mat-block flex-1",4,"ngIf"],[1,"max-w-30%","flex-full","xs:max-w-full"],["translate",""],["formControlName","linkType"],[3,"value",4,"ngFor","ngForOf"],["class","flex-1",4,"ngIf","ngIfElse"],["formControlName","setEntityIdInState","class","toggle",4,"ngIf"],[1,"mat-block","flex-1"],["matInput","","formControlName","text","required",""],[4,"ngIf"],[3,"value"],[1,"flex-1"],["matInput","","formControlName","link","required",""],["required","","formControlName","dashboardId",1,"max-w-35%","flex-full","xs:max-w-full"],["formControlName","dashboardState",1,"max-w-35%","flex-full","xs:max-w-full",3,"dashboardId"],["formControlName","setEntityIdInState",1,"toggle"]],template:function(b,D){1&b&&(t.\u0275\u0275elementStart(0,"div",1)(1,"mat-expansion-panel",2)(2,"mat-expansion-panel-header",3)(3,"mat-panel-title",4)(4,"div",5)(5,"mat-slide-toggle",6),t.\u0275\u0275listener("click",function(ee){return ee.stopPropagation()}),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(7,E,12,5,"ng-template",7),t.\u0275\u0275elementEnd()()),2&b&&(t.\u0275\u0275property("formGroup",D.actionButtonConfigForm),t.\u0275\u0275advance(),t.\u0275\u0275property("expanded",D.actionButtonConfigForm.get("enabled").value),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("tb-hint-tooltip-icon",D.sliderHint),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",D.actionTitle," "))},dependencies:[H.NgForOf,H.NgIf,k.DashboardAutocompleteComponent,Q.r,z.MatInput,L.MatFormField,L.MatLabel,L.MatError,B.MatSelect,I.MatOption,U.MatSlideToggle,F.MatExpansionPanel,F.MatExpansionPanelHeader,F.MatExpansionPanelTitle,F.MatExpansionPanelContent,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,a.TranslateDirective,O.HintTooltipIconComponent,a.TranslatePipe],encapsulation:2})}}(0,e.__decorate)([(0,K.coerceBoolean)(),(0,e.__metadata)("design:type",Boolean),(0,e.__metadata)("design:paramtypes",[Boolean])],f.prototype,"hideButtonText",null)},10731:(Re,X,n)=>{"use strict";n.d(X,{l:()=>ge});var e=n(31635),t=n(93953),c=n(89417),h=n(83904),V=n(56977),S=n(18530),G=n(27997),K=n(29225),H=n(73955),k=n(60177),Q=n(63950),z=n(59042),L=n(53719),B=n(37403),I=n(30450),U=n(9454),F=n(20992),a=n(62720),O=n(31302),P=n(99691),A=n(5172);const u=()=>({maxWidth:"800px"}),m=ce=>({length:ce});function p(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.subject-required")," "))}function v(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function T(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.subject"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",14),t.\u0275\u0275template(4,p,3,3,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-form-field",12)(6,"mat-label",13),t.\u0275\u0275text(7,"notification.message"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"textarea",16),t.\u0275\u0275text(9,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,v,3,3,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"section",17)(12,"div",18)(13,"mat-slide-toggle",19),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",20),t.\u0275\u0275element(17,"tb-material-icon-select",21)(18,"tb-color-input",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(19,"tb-notification-action-button-configuration",23),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("WEB.subject").hasError("required")),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("WEB.body").hasError("required")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,5,"icon.icon")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("color",J.templateConfigurationForm.get("WEB.additionalConfig.icon.color").value),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("actionTitle",t.\u0275\u0275pipeBind1(20,7,"notification.action-button"))}}function C(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,T,21,9,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.WEB),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.WEB)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.WEB).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.WEB).name)," ")}}function _(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.subject-required")," "))}function E(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"notification.subject-max-length",t.\u0275\u0275pureFunction1(4,m,J.templateConfigurationForm.get("MOBILE_APP.subject").getError("maxlength").requiredLength))," ")}}function f(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function g(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"notification.message-max-length",t.\u0275\u0275pureFunction1(4,m,J.templateConfigurationForm.get("MOBILE_APP.body").getError("maxlength").requiredLength))," ")}}function y(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.subject"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",14),t.\u0275\u0275template(4,_,3,3,"mat-error",15)(5,E,3,6,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-form-field",12)(7,"mat-label",13),t.\u0275\u0275text(8,"notification.message"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"textarea",16),t.\u0275\u0275text(10,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,f,3,3,"mat-error",15)(12,g,3,6,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",17)(14,"div",18)(15,"mat-slide-toggle",19),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",20),t.\u0275\u0275element(19,"tb-material-icon-select",21)(20,"tb-color-input",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(21,"tb-notification-action-button-configuration",24),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("MOBILE_APP.subject").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("MOBILE_APP.subject").hasError("maxlength")),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("MOBILE_APP.body").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("MOBILE_APP.body").hasError("maxlength")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,8,"icon.icon")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("color",J.templateConfigurationForm.get("MOBILE_APP.additionalConfig.icon.color").value),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("actionTitle",t.\u0275\u0275pipeBind1(22,10,"notification.notification-tap-action")),t.\u0275\u0275property("sliderHint",J.notificationTapActionHint)}}function b(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,y,23,12,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.MOBILE_APP),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.MOBILE_APP)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.MOBILE_APP).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.MOBILE_APP).name)," ")}}function D(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function w(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind2(2,1,"notification.message-max-length",t.\u0275\u0275pureFunction1(4,m,J.templateConfigurationForm.get("SMS.body").getError("maxlength").requiredLength))," ")}}function ee(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",25)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.message"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"textarea",16),t.\u0275\u0275text(4,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"mat-hint"),t.\u0275\u0275template(6,D,3,3,"mat-error",15)(7,w,3,6,"mat-error",15),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("SMS.body").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("SMS.body").hasError("maxlength"))}}function _e(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,ee,8,2,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.SMS),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.SMS)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.SMS).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.SMS).name)," ")}}function ve(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.subject-required")," "))}function Ee(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error",29),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function $(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.subject"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",14),t.\u0275\u0275template(4,ve,3,3,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-label",26),t.\u0275\u0275text(6,"notification.message "),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"editor",27),t.\u0275\u0275template(8,Ee,3,3,"mat-error",28)),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("EMAIL.subject").hasError("required")),t.\u0275\u0275advance(),t.\u0275\u0275classProp("tb-error",(J.interacted||J.templateConfigurationForm.get("EMAIL.body").touched)&&J.templateConfigurationForm.get("EMAIL.body").hasError("required")),t.\u0275\u0275advance(2),t.\u0275\u0275property("init",J.tinyMceOptions),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",(J.interacted||J.templateConfigurationForm.get("EMAIL.body").touched)&&J.templateConfigurationForm.get("EMAIL.body").hasError("required"))}}function be(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,$,9,5,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.EMAIL),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.EMAIL)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.EMAIL).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.EMAIL).name)," ")}}function Te(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function oe(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.message"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"textarea",16),t.\u0275\u0275text(4,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Te,3,3,"mat-error",15),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("SLACK.body").hasError("required"))}}function R(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,oe,6,1,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.SLACK),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.SLACK)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.SLACK).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.SLACK).name)," ")}}function N(ce,se){1&ce&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&ce&&(t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"notification.message-required")," "))}function Z(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-label",13),t.\u0275\u0275text(2,"notification.subject"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"input",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-form-field",12)(5,"mat-label",13),t.\u0275\u0275text(6,"notification.message"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"textarea",16),t.\u0275\u0275text(8,"          "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,N,3,3,"mat-error",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",30)(11,"div",31)(12,"div",13),t.\u0275\u0275text(13,"notification.theme-color"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(14,"tb-color-input",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(15,"tb-notification-action-button-configuration",33),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()),2&ce){const J=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(9),t.\u0275\u0275property("ngIf",J.templateConfigurationForm.get("MICROSOFT_TEAMS.body").hasError("required")),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("actionTitle",t.\u0275\u0275pipeBind1(16,2,"notification.action-button"))}}function Y(ce,se){if(1&ce&&(t.\u0275\u0275elementStart(0,"section",7)(1,"mat-expansion-panel",8)(2,"mat-expansion-panel-header",9)(3,"mat-panel-title",10)(4,"tb-icon"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,Z,17,4,"ng-template",11),t.\u0275\u0275elementEnd()()),2&ce){const J=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",J.NotificationDeliveryMethod.MICROSOFT_TEAMS),t.\u0275\u0275advance(),t.\u0275\u0275propertyInterpolate("expanded",J.expandedForm(J.NotificationDeliveryMethod.MICROSOFT_TEAMS)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.MICROSOFT_TEAMS).icon),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,J.NotificationDeliveryMethodInfoMap.get(J.NotificationDeliveryMethod.MICROSOFT_TEAMS).name)," ")}}class ge{set predefinedDeliveryMethodsTemplate(se){(0,G.f1)(se)&&(this.templateConfigurationForm.patchValue(se,{emitEvent:!1}),this.updateDisabledForms(),this.updateExpandedForm(),this.templateConfigurationForm.updateValueAndValidity())}constructor(se,J){this.fb=se,this.translate=J,this.NotificationDeliveryMethodInfoMap=h.d$,this.NotificationDeliveryMethod=h.Fd,this.NotificationTemplateTypeTranslateMap=h.iC,this.tinyMceOptions={base_url:"/assets/tinymce",suffix:".min",plugins:["link","table","image","lists","code","fullscreen"],menubar:"edit insert tools view format table",toolbar:"undo redo | fontfamily fontsize blocks | bold italic  strikethrough | forecolor backcolor | link table image | alignleft aligncenter alignright alignjustify  | numlist bullist | outdent indent  | removeformat | code | fullscreen",toolbar_mode:"sliding",height:400,autofocus:!1,branding:!1,promotion:!1},this.propagateChange=null,this.destroy$=new S.B,this.propagateChangePending=!1,this.templateConfigurationForm=this.buildForm(),this.templateConfigurationForm.valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(de=>{this.updateModel(de)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(se){const J=(0,G.Go)(se);if((0,G.f1)(J))for(const de of Object.values(h.Fd))(0,G.f1)(J[de]?.enabled)&&delete J[de].enabled;this.templateConfigurationForm.patchValue(J,{emitEvent:!1}),this.updateExpandedForm()}registerOnChange(se){this.propagateChange=se,this.propagateChangePending&&(this.propagateChangePending=!1,Promise.resolve().then(()=>{this.templateConfigurationForm.updateValueAndValidity()}))}registerOnTouched(se){}setDisabledState(se){se?this.templateConfigurationForm.disable({emitEvent:!1}):this.updateDisabledForms()}validate(){return this.templateConfigurationForm.valid?null:{templateConfiguration:{valid:!1}}}get notificationTapActionHint(){switch(this.notificationType){case h._n.ALARM:case h._n.ALARM_ASSIGNMENT:case h._n.ALARM_COMMENT:return this.translate.instant("notification.notification-tap-action-hint")}return""}expandedForm(se){return this.expendedBlocks.includes(se)}updateModel(se){this.propagateChange?this.propagateChange(se):this.propagateChangePending=!0}updateExpandedForm(){this.expendedBlocks=[],Object.keys(this.templateConfigurationForm.controls).forEach(se=>{this.templateConfigurationForm.get(se).invalid&&this.expendedBlocks.push(se)})}updateDisabledForms(){Object.values(h.Fd).forEach(se=>{const J=this.templateConfigurationForm.get(se);if(J.get("enabled").value)switch(J.enable({emitEvent:!1}),se){case h.Fd.WEB:case h.Fd.MOBILE_APP:J.get("additionalConfig.icon.enabled").updateValueAndValidity({onlySelf:!0})}else J.disable({emitEvent:!1})})}buildForm(){const se=this.fb.group({});return Object.values(h.Fd).forEach(J=>{se.addControl(J,this.buildDeliveryMethodControl(J),{emitEvent:!1})}),se}buildDeliveryMethodControl(se){let J;switch(se){case h.Fd.WEB:J=this.fb.group({subject:["",c.Validators.required],body:["",c.Validators.required],additionalConfig:this.fb.group({icon:this.fb.group({enabled:[!1],icon:[{value:"notifications",disabled:!0},c.Validators.required],color:[{value:"#757575",disabled:!0}]}),actionButtonConfig:[null]})}),J.get("additionalConfig.icon.enabled").valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(de=>{de?(J.get("additionalConfig.icon.icon").enable({emitEvent:!1}),J.get("additionalConfig.icon.color").enable({emitEvent:!1})):(J.get("additionalConfig.icon.icon").disable({emitEvent:!1}),J.get("additionalConfig.icon.color").disable({emitEvent:!1}))});break;case h.Fd.EMAIL:J=this.fb.group({subject:["",c.Validators.required],body:["",c.Validators.required]});break;case h.Fd.SMS:J=this.fb.group({body:["",[c.Validators.required,c.Validators.maxLength(320)]]});break;case h.Fd.SLACK:J=this.fb.group({body:["",c.Validators.required]});break;case h.Fd.MOBILE_APP:J=this.fb.group({subject:["",[c.Validators.required,c.Validators.maxLength(50)]],body:["",[c.Validators.required,c.Validators.maxLength(150)]],additionalConfig:this.fb.group({icon:this.fb.group({enabled:[!1],icon:[{value:"notifications",disabled:!0},c.Validators.required],color:[{value:"#757575",disabled:!0}]}),onClick:[null]})}),J.get("additionalConfig.icon.enabled").valueChanges.pipe((0,V.Q)(this.destroy$)).subscribe(de=>{de?(J.get("additionalConfig.icon.icon").enable({emitEvent:!1}),J.get("additionalConfig.icon.color").enable({emitEvent:!1})):(J.get("additionalConfig.icon.icon").disable({emitEvent:!1}),J.get("additionalConfig.icon.color").disable({emitEvent:!1}))});break;case h.Fd.MICROSOFT_TEAMS:J=this.fb.group({subject:[""],body:["",c.Validators.required],themeColor:[""],button:[null]});break;default:throw new Error(`Not configured templated for notification delivery method: ${se}`)}return J.addControl("enabled",this.fb.control(!1),{emitEvent:!1}),J.addControl("method",this.fb.control(se),{emitEvent:!1}),J}static{this.\u0275fac=function(J){return new(J||ge)(t.\u0275\u0275directiveInject(c.FormBuilder),t.\u0275\u0275directiveInject(H.TranslateService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:ge,selectors:[["tb-template-configuration"]],inputs:{predefinedDeliveryMethodsTemplate:"predefinedDeliveryMethodsTemplate",notificationType:"notificationType",interacted:"interacted"},features:[t.\u0275\u0275ProvidersFeature([{provide:c.NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>ge),multi:!0},{provide:c.NG_VALIDATORS,useExisting:(0,t.forwardRef)(()=>ge),multi:!0}])],decls:16,vars:16,consts:[[1,"tb-template-header"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-panel-hint","tb-hint-available-params"],[1,"content"],["tb-help-popup-placement","bottom","trigger-style","letter-spacing:0.25px;font-size:12px;",3,"tb-help-popup","tb-help-popup-style","trigger-text"],[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],["class","tb-form-panel tb-slide-toggle stroked",3,"formGroupName",4,"ngIf"],[1,"tb-form-panel","tb-slide-toggle","stroked",3,"formGroupName"],[1,"tb-settings",3,"expanded"],[1,"fill-width","flex","flex-row","flex-wrap"],[1,"template-tittle"],["matExpansionPanelContent","",1,"tb-extension-panel"],[1,"mat-block"],["translate",""],["matInput","","formControlName","subject"],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","cols","1","cdkAutosizeMinRows","1","formControlName","body"],["formGroupName","additionalConfig",1,"tb-form-panel","no-padding","no-border"],["formGroupName","icon",1,"tb-form-row","space-between"],["formControlName","enabled",1,"mat-slide"],[1,"flex","flex-row","items-center","justify-start","gap-2"],["asBoxInput","","formControlName","icon",3,"color"],["asBoxInput","","formControlName","color"],["formControlName","actionButtonConfig",3,"actionTitle"],["formControlName","onClick","hideButtonText","",3,"sliderHint","actionTitle"],["subscriptSizing","dynamic",1,"mat-block"],["translate","",1,"tb-title","tb-required"],["formControlName","body",3,"init"],["class","tb-mat-error",4,"ngIf"],[1,"tb-mat-error"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-row","space-between"],["asBoxInput","","formControlName","themeColor"],["formControlName","button",3,"actionTitle"]],template:function(J,de){1&J&&(t.\u0275\u0275elementStart(0,"section",0)(1,"div",1),t.\u0275\u0275text(2,"notification.customize-messages"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",2)(4,"span",3),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"span",4),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"section",5),t.\u0275\u0275template(10,C,9,6,"section",6)(11,b,9,6,"section",6)(12,_e,9,6,"section",6)(13,be,9,6,"section",6)(14,R,9,6,"section",6)(15,Y,9,6,"section",6),t.\u0275\u0275elementEnd()),2&J&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,11,"notification.input-fields-support-templatization")),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("tb-help-popup",de.NotificationTemplateTypeTranslateMap.get(de.notificationType).helpId),t.\u0275\u0275propertyInterpolate("trigger-text",t.\u0275\u0275pipeBind1(8,13,"notification.see-documentation")),t.\u0275\u0275property("tb-help-popup-style",t.\u0275\u0275pureFunction0(15,u)),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",de.templateConfigurationForm),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("WEB.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("MOBILE_APP.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("SMS.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("EMAIL.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("SLACK.enabled").value),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",de.templateConfigurationForm.get("MICROSOFT_TEAMS.enabled").value))},dependencies:[k.NgIf,Q.HelpPopupComponent,z.MatInput,L.MatFormField,L.MatLabel,L.MatHint,L.MatError,B.xb,I.MatSlideToggle,U.MatExpansionPanel,U.MatExpansionPanelHeader,U.MatExpansionPanelTitle,U.MatExpansionPanelContent,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.FormGroupDirective,c.FormControlName,c.FormGroupName,F.xn,a.ColorInputComponent,O.MaterialIconSelectComponent,H.TranslateDirective,P.TbIconComponent,A.h,H.TranslatePipe],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-template-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:5;padding-bottom:12px;background-color:var(--mdc-dialog-container-color, white)}[_nghost-%COMP%]   .tb-template-header[_ngcontent-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%]{color:#0000008a;letter-spacing:.4px}[_nghost-%COMP%]   .tb-template-header[_ngcontent-%COMP%]   .tb-hint-available-params[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .template-tittle[_ngcontent-%COMP%]{gap:12px;font-weight:400}[_nghost-%COMP%]   .template-tittle[_ngcontent-%COMP%]   tb-icon[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   .tb-mat-error[_ngcontent-%COMP%]{font-size:13px}[_nghost-%COMP%]   .tb-title[_ngcontent-%COMP%]{font-size:16px;line-height:24px}[_nghost-%COMP%]   .tb-title.tb-required[_ngcontent-%COMP%]:after{font-size:initial;content:"*"}[_nghost-%COMP%]   .tb-title.tb-error[_ngcontent-%COMP%]{color:var(--mdc-theme-error, #f44336)}[_nghost-%COMP%]   .tb-title.tb-error.tb-required[_ngcontent-%COMP%]:after{color:var(--mdc-theme-error, #f44336)}[_nghost-%COMP%]     .tb-form-panel .mat-expansion-panel.tb-settings>.mat-expansion-panel-content>.mat-expansion-panel-body{gap:0}']})}}(0,e.__decorate)([(0,K.coerceBoolean)(),(0,e.__metadata)("design:type",Boolean)],ge.prototype,"interacted",void 0)},7239:function(Re){Re.exports=function(){"use strict";var X=function(o,r){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var M in i)Object.prototype.hasOwnProperty.call(i,M)&&(s[M]=i[M])})(o,r)};function n(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=o}X(o,r),o.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}var e=function(){return e=Object.assign||function(r){for(var s,i=1,M=arguments.length;i<M;i++)for(var W in s=arguments[i])Object.prototype.hasOwnProperty.call(s,W)&&(r[W]=s[W]);return r},e.apply(this,arguments)};function t(o,r,s,i){function M(W){return W instanceof s?W:new s(function(te){te(W)})}return new(s||(s=Promise))(function(W,te){function ue(Se){try{De(i.next(Se))}catch(Le){te(Le)}}function me(Se){try{De(i.throw(Se))}catch(Le){te(Le)}}function De(Se){Se.done?W(Se.value):M(Se.value).then(ue,me)}De((i=i.apply(o,r||[])).next())})}function c(o,r){var i,M,W,te,s={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te;function ue(De){return function(Se){return me([De,Se])}}function me(De){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,M&&(W=2&De[0]?M.return:De[0]?M.throw||((W=M.return)&&W.call(M),0):M.next)&&!(W=W.call(M,De[1])).done)return W;switch(M=0,W&&(De=[2&De[0],W.value]),De[0]){case 0:case 1:W=De;break;case 4:return s.label++,{value:De[1],done:!1};case 5:s.label++,M=De[1],De=[0];continue;case 7:De=s.ops.pop(),s.trys.pop();continue;default:if(!(W=(W=s.trys).length>0&&W[W.length-1])&&(6===De[0]||2===De[0])){s=0;continue}if(3===De[0]&&(!W||De[1]>W[0]&&De[1]<W[3])){s.label=De[1];break}if(6===De[0]&&s.label<W[1]){s.label=W[1],W=De;break}if(W&&s.label<W[2]){s.label=W[2],s.ops.push(De);break}W[2]&&s.ops.pop(),s.trys.pop();continue}De=r.call(o,s)}catch(Se){De=[6,Se],M=0}finally{i=W=0}if(5&De[0])throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}}function h(o,r,s){if(s||2===arguments.length)for(var W,i=0,M=r.length;i<M;i++)(W||!(i in r))&&(W||(W=Array.prototype.slice.call(r,0,i)),W[i]=r[i]);return o.concat(W||r)}for(var V=function(){function o(r,s,i,M){this.left=r,this.top=s,this.width=i,this.height=M}return o.prototype.add=function(r,s,i,M){return new o(this.left+r,this.top+s,this.width+i,this.height+M)},o.fromClientRect=function(r,s){return new o(s.left+r.windowBounds.left,s.top+r.windowBounds.top,s.width,s.height)},o.fromDOMRectList=function(r,s){var i=Array.from(s).find(function(M){return 0!==M.width});return i?new o(i.left+r.windowBounds.left,i.top+r.windowBounds.top,i.width,i.height):o.EMPTY},o.EMPTY=new o(0,0,0,0),o}(),S=function(o,r){return V.fromClientRect(o,r.getBoundingClientRect())},G=function(o){var r=o.body,s=o.documentElement;if(!r||!s)throw new Error("Unable to get document size");var i=Math.max(Math.max(r.scrollWidth,s.scrollWidth),Math.max(r.offsetWidth,s.offsetWidth),Math.max(r.clientWidth,s.clientWidth)),M=Math.max(Math.max(r.scrollHeight,s.scrollHeight),Math.max(r.offsetHeight,s.offsetHeight),Math.max(r.clientHeight,s.clientHeight));return new V(0,0,i,M)},K=function(o){for(var r=[],s=0,i=o.length;s<i;){var M=o.charCodeAt(s++);if(M>=55296&&M<=56319&&s<i){var W=o.charCodeAt(s++);56320==(64512&W)?r.push(((1023&M)<<10)+(1023&W)+65536):(r.push(M),s--)}else r.push(M)}return r},H=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var s=o.length;if(!s)return"";for(var i=[],M=-1,W="";++M<s;){var te=o[M];te<=65535?i.push(te):(te-=65536,i.push(55296+(te>>10),te%1024+56320)),(M+1===s||i.length>16384)&&(W+=String.fromCharCode.apply(String,i),i.length=0)}return W},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=typeof Uint8Array>"u"?[]:new Uint8Array(256),z=0;z<k.length;z++)Q[k.charCodeAt(z)]=z;for(var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=typeof Uint8Array>"u"?[]:new Uint8Array(256),I=0;I<L.length;I++)B[L.charCodeAt(I)]=I;for(var U=function(o){var i,W,te,ue,me,r=.75*o.length,s=o.length,M=0;"="===o[o.length-1]&&(r--,"="===o[o.length-2]&&r--);var De=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(r):new Array(r),Se=Array.isArray(De)?De:new Uint8Array(De);for(i=0;i<s;i+=4)W=B[o.charCodeAt(i)],te=B[o.charCodeAt(i+1)],ue=B[o.charCodeAt(i+2)],me=B[o.charCodeAt(i+3)],Se[M++]=W<<2|te>>4,Se[M++]=(15&te)<<4|ue>>2,Se[M++]=(3&ue)<<6|63&me;return De},F=function(o){for(var r=o.length,s=[],i=0;i<r;i+=2)s.push(o[i+1]<<8|o[i]);return s},a=function(o){for(var r=o.length,s=[],i=0;i<r;i+=4)s.push(o[i+3]<<24|o[i+2]<<16|o[i+1]<<8|o[i]);return s},O=5,P=11,A=2,m=65536>>O,v=(1<<O)-1,f=m+(1024>>O)+32,g=65536>>P,b=(1<<P-O)-1,D=function(o,r,s){return o.slice?o.slice(r,s):new Uint16Array(Array.prototype.slice.call(o,r,s))},w=function(o,r,s){return o.slice?o.slice(r,s):new Uint32Array(Array.prototype.slice.call(o,r,s))},ee=function(o,r){var s=U(o),i=Array.isArray(s)?a(s):new Uint32Array(s),M=Array.isArray(s)?F(s):new Uint16Array(s),W=24,te=D(M,W/2,i[4]/2),ue=2===i[5]?D(M,(W+i[4])/2):w(i,Math.ceil((W+i[4])/4));return new _e(i[0],i[1],i[2],i[3],te,ue)},_e=function(){function o(r,s,i,M,W,te){this.initialValue=r,this.errorValue=s,this.highStart=i,this.highValueIndex=M,this.index=W,this.data=te}return o.prototype.get=function(r){var s;if(r>=0){if(r<55296||r>56319&&r<=65535)return s=((s=this.index[r>>O])<<A)+(r&v),this.data[s];if(r<=65535)return s=((s=this.index[m+(r-55296>>O)])<<A)+(r&v),this.data[s];if(r<this.highStart)return s=f-g+(r>>P),s=this.index[s],s+=r>>O&b,s=((s=this.index[s])<<A)+(r&v),this.data[s];if(r<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ee=typeof Uint8Array>"u"?[]:new Uint8Array(256),$=0;$<ve.length;$++)Ee[ve.charCodeAt($)]=$;var Te=50,oe=1,R=2,N=3,Z=4,Y=5,ge=7,ce=8,se=9,J=10,de=11,ye=12,re=13,ne=14,ie=15,Ae=16,Pe=17,Be=18,Ke=19,Xe=20,at=21,bt=22,Mt=23,ze=24,vt=25,tt=26,Ye=27,Qe=28,nt=29,ot=30,gt=31,rt=32,Ze=33,je=34,$e=35,Oe=36,Fe=37,le=38,we=39,qe=40,lt=41,Kt=42,Jt=43,Vt=[9001,65288],hn="!",ut="\xd7",Zt="\xf7",He=ee("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),We=[ot,Oe],he=[oe,R,N,Y],Me=[J,ce],Ne=[Ye,tt],it=he.concat(Me),Ue=[le,we,qe,je,$e],Ce=[ie,re],j=function(o,r){void 0===r&&(r="strict");var s=[],i=[],M=[];return o.forEach(function(W,te){var ue=He.get(W);if(ue>Te?(M.push(!0),ue-=Te):M.push(!1),-1!==["normal","auto","loose"].indexOf(r)&&-1!==[8208,8211,12316,12448].indexOf(W))return i.push(te),s.push(Ae);if(ue===Z||ue===de){if(0===te)return i.push(te),s.push(ot);var me=s[te-1];return-1===it.indexOf(me)?(i.push(i[te-1]),s.push(me)):(i.push(te),s.push(ot))}return i.push(te),ue===gt?s.push("strict"===r?at:Fe):ue===Kt||ue===nt?s.push(ot):ue===Jt?W>=131072&&W<=196605||W>=196608&&W<=262141?s.push(Fe):s.push(ot):void s.push(ue)}),[i,s,M]},q=function(o,r,s,i){var M=i[s];if(Array.isArray(o)?-1!==o.indexOf(M):o===M)for(var W=s;W<=i.length;){if((te=i[++W])===r)return!0;if(te!==J)break}if(M===J)for(W=s;W>0;){var ue=i[--W];if(Array.isArray(o)?-1!==o.indexOf(ue):o===ue)for(var me=s;me<=i.length;){var te;if((te=i[++me])===r)return!0;if(te!==J)break}if(ue!==J)break}return!1},pe=function(o,r){for(var s=o;s>=0;){var i=r[s];if(i!==J)return i;s--}return 0},xe=function(o,r,s,i,M){if(0===s[i])return ut;var W=i-1;if(Array.isArray(M)&&!0===M[W])return ut;var te=W-1,ue=W+1,me=r[W],De=te>=0?r[te]:0,Se=r[ue];if(me===R&&Se===N)return ut;if(-1!==he.indexOf(me))return hn;if(-1!==he.indexOf(Se)||-1!==Me.indexOf(Se))return ut;if(pe(W,r)===ce)return Zt;if(He.get(o[W])===de||(me===rt||me===Ze)&&He.get(o[ue])===de||me===ge||Se===ge||me===se||-1===[J,re,ie].indexOf(me)&&Se===se||-1!==[Pe,Be,Ke,ze,Qe].indexOf(Se)||pe(W,r)===bt||q(Mt,bt,W,r)||q([Pe,Be],at,W,r)||q(ye,ye,W,r))return ut;if(me===J)return Zt;if(me===Mt||Se===Mt)return ut;if(Se===Ae||me===Ae)return Zt;if(-1!==[re,ie,at].indexOf(Se)||me===ne||De===Oe&&-1!==Ce.indexOf(me)||me===Qe&&Se===Oe||Se===Xe||-1!==We.indexOf(Se)&&me===vt||-1!==We.indexOf(me)&&Se===vt||me===Ye&&-1!==[Fe,rt,Ze].indexOf(Se)||-1!==[Fe,rt,Ze].indexOf(me)&&Se===tt||-1!==We.indexOf(me)&&-1!==Ne.indexOf(Se)||-1!==Ne.indexOf(me)&&-1!==We.indexOf(Se)||-1!==[Ye,tt].indexOf(me)&&(Se===vt||-1!==[bt,ie].indexOf(Se)&&r[ue+1]===vt)||-1!==[bt,ie].indexOf(me)&&Se===vt||me===vt&&-1!==[vt,Qe,ze].indexOf(Se))return ut;if(-1!==[vt,Qe,ze,Pe,Be].indexOf(Se))for(var Le=W;Le>=0;){if((ke=r[Le])===vt)return ut;if(-1===[Qe,ze].indexOf(ke))break;Le--}if(-1!==[Ye,tt].indexOf(Se))for(Le=-1!==[Pe,Be].indexOf(me)?te:W;Le>=0;){var ke;if((ke=r[Le])===vt)return ut;if(-1===[Qe,ze].indexOf(ke))break;Le--}if(le===me&&-1!==[le,we,je,$e].indexOf(Se)||-1!==[we,je].indexOf(me)&&-1!==[we,qe].indexOf(Se)||-1!==[qe,$e].indexOf(me)&&Se===qe||-1!==Ue.indexOf(me)&&-1!==[Xe,tt].indexOf(Se)||-1!==Ue.indexOf(Se)&&me===Ye||-1!==We.indexOf(me)&&-1!==We.indexOf(Se)||me===ze&&-1!==We.indexOf(Se)||-1!==We.concat(vt).indexOf(me)&&Se===bt&&-1===Vt.indexOf(o[ue])||-1!==We.concat(vt).indexOf(Se)&&me===Be)return ut;if(me===lt&&Se===lt){for(var mt=s[W],et=1;mt>0&&r[--mt]===lt;)et++;if(et%2!=0)return ut}return me===rt&&Se===Ze?ut:Zt},Ge=function(o,r){r||(r={lineBreak:"normal",wordBreak:"normal"});var s=j(o,r.lineBreak),i=s[0],M=s[1],W=s[2];return("break-all"===r.wordBreak||"break-word"===r.wordBreak)&&(M=M.map(function(ue){return-1!==[vt,ot,Kt].indexOf(ue)?Fe:ue})),[i,M,"keep-all"===r.wordBreak?W.map(function(ue,me){return ue&&o[me]>=19968&&o[me]<=40959}):void 0]},_t=function(){function o(r,s,i,M){this.codePoints=r,this.required=s===hn,this.start=i,this.end=M}return o.prototype.slice=function(){return H.apply(void 0,this.codePoints.slice(this.start,this.end))},o}(),Et=function(o,r){var s=K(o),i=Ge(s,r),M=i[0],W=i[1],te=i[2],ue=s.length,me=0,De=0;return{next:function(){if(De>=ue)return{done:!0,value:null};for(var Se=ut;De<ue&&(Se=xe(s,W,M,++De,te))===ut;);if(Se!==ut||De===ue){var Le=new _t(s,Se,me,De);return me=De,{value:Le,done:!1}}return{done:!0,value:null}}}},Gt=1,Ot=2,Wt=4,qt=8,en=10,Tn=47,tn=92,Mn=9,bn=32,rn=34,on=61,Ta=35,go=36,fo=37,Ma=39,Da=40,aa=41,_o=95,nn=45,vs=33,ys=60,Es=62,Cs=64,xs=91,Ts=93,Ms=61,Ds=123,vn=63,Ps=125,Ii=124,Oi=126,ho=128,Ya=65533,bo=42,Dn=43,Is=44,_r=58,dn=59,Xa=46,Os=0,ws=8,wi=11,Bs=14,hr=31,Lt=127,ln=-1,Bi=48,Si=97,cn=101,Li=102,ra=117,Pn=122,In=65,br=69,Fi=70,Ss=85,Ls=90,zt=function(o){return o>=Bi&&o<=57},Fs=function(o){return o>=55296&&o<=57343},Pa=function(o){return zt(o)||o>=In&&o<=Fi||o>=Si&&o<=Li},Us=function(o){return o>=Si&&o<=Pn},Rs=function(o){return o>=In&&o<=Ls},Ws=function(o){return Us(o)||Rs(o)},Ks=function(o){return o>=ho},vr=function(o){return o===en||o===Mn||o===bn},yr=function(o){return Ws(o)||Ks(o)||o===_o},Ui=function(o){return yr(o)||zt(o)||o===nn},Ns=function(o){return o>=Os&&o<=ws||o===wi||o>=Bs&&o<=hr||o===Lt},Xt=function(o,r){return o===tn&&r!==en},Ja=function(o,r,s){return o===nn?yr(r)||Xt(r,s):!!yr(o)||!(o!==tn||!Xt(o,r))},oa=function(o,r,s){return o===Dn||o===nn?!!zt(r)||r===Xa&&zt(s):zt(o===Xa?r:o)},yn=function(o){var r=0,s=1;(o[r]===Dn||o[r]===nn)&&(o[r]===nn&&(s=-1),r++);for(var i=[];zt(o[r]);)i.push(o[r++]);var M=i.length?parseInt(H.apply(void 0,i),10):0;o[r]===Xa&&r++;for(var W=[];zt(o[r]);)W.push(o[r++]);var te=W.length,ue=te?parseInt(H.apply(void 0,W),10):0;(o[r]===br||o[r]===cn)&&r++;var me=1;(o[r]===Dn||o[r]===nn)&&(o[r]===nn&&(me=-1),r++);for(var De=[];zt(o[r]);)De.push(o[r++]);var Se=De.length?parseInt(H.apply(void 0,De),10):0;return s*(M+ue*Math.pow(10,-te))*Math.pow(10,me*Se)},Er={type:2},vo={type:3},ks={type:4},Vs={type:13},Gs={type:8},Qs={type:21},Hs={type:9},js={type:10},zs={type:11},$s={type:12},Ys={type:14},Cr={type:23},Xs={type:1},Js={type:25},Zs={type:24},qs={type:26},ed={type:27},td={type:28},Wn={type:29},Ri={type:31},Za={type:32},yo=function(){function o(){this._value=[]}return o.prototype.write=function(r){this._value=this._value.concat(K(r))},o.prototype.read=function(){for(var r=[],s=this.consumeToken();s!==Za;)r.push(s),s=this.consumeToken();return r},o.prototype.consumeToken=function(){var r=this.consumeCodePoint();switch(r){case rn:return this.consumeStringToken(rn);case Ta:var s=this.peekCodePoint(0),i=this.peekCodePoint(1),M=this.peekCodePoint(2);if(Ui(s)||Xt(i,M)){var W=Ja(s,i,M)?Ot:Gt;return{type:5,value:this.consumeName(),flags:W}}break;case go:if(this.peekCodePoint(0)===on)return this.consumeCodePoint(),Vs;break;case Ma:return this.consumeStringToken(Ma);case Da:return Er;case aa:return vo;case bo:if(this.peekCodePoint(0)===on)return this.consumeCodePoint(),Ys;break;case Dn:if(oa(r,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(r),this.consumeNumericToken();break;case Is:return ks;case nn:var ue=r,me=this.peekCodePoint(0),De=this.peekCodePoint(1);if(oa(ue,me,De))return this.reconsumeCodePoint(r),this.consumeNumericToken();if(Ja(ue,me,De))return this.reconsumeCodePoint(r),this.consumeIdentLikeToken();if(me===nn&&De===Es)return this.consumeCodePoint(),this.consumeCodePoint(),Zs;break;case Xa:if(oa(r,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(r),this.consumeNumericToken();break;case Tn:if(this.peekCodePoint(0)===bo)for(this.consumeCodePoint();;){var Se=this.consumeCodePoint();if(Se===bo&&(Se=this.consumeCodePoint())===Tn)return this.consumeToken();if(Se===ln)return this.consumeToken()}break;case _r:return qs;case dn:return ed;case ys:if(this.peekCodePoint(0)===vs&&this.peekCodePoint(1)===nn&&this.peekCodePoint(2)===nn)return this.consumeCodePoint(),this.consumeCodePoint(),Js;break;case Cs:var Le=this.peekCodePoint(0),ke=this.peekCodePoint(1),mt=this.peekCodePoint(2);if(Ja(Le,ke,mt))return{type:7,value:this.consumeName()};break;case xs:return td;case tn:if(Xt(r,this.peekCodePoint(0)))return this.reconsumeCodePoint(r),this.consumeIdentLikeToken();break;case Ts:return Wn;case Ms:if(this.peekCodePoint(0)===on)return this.consumeCodePoint(),Gs;break;case Ds:return zs;case Ps:return $s;case ra:case Ss:var et=this.peekCodePoint(0),dt=this.peekCodePoint(1);return et===Dn&&(Pa(dt)||dt===vn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(r),this.consumeIdentLikeToken();case Ii:if(this.peekCodePoint(0)===on)return this.consumeCodePoint(),Hs;if(this.peekCodePoint(0)===Ii)return this.consumeCodePoint(),Qs;break;case Oi:if(this.peekCodePoint(0)===on)return this.consumeCodePoint(),js;break;case ln:return Za}return vr(r)?(this.consumeWhiteSpace(),Ri):zt(r)?(this.reconsumeCodePoint(r),this.consumeNumericToken()):yr(r)?(this.reconsumeCodePoint(r),this.consumeIdentLikeToken()):{type:6,value:H(r)}},o.prototype.consumeCodePoint=function(){var r=this._value.shift();return typeof r>"u"?-1:r},o.prototype.reconsumeCodePoint=function(r){this._value.unshift(r)},o.prototype.peekCodePoint=function(r){return r>=this._value.length?-1:this._value[r]},o.prototype.consumeUnicodeRangeToken=function(){for(var r=[],s=this.consumeCodePoint();Pa(s)&&r.length<6;)r.push(s),s=this.consumeCodePoint();for(var i=!1;s===vn&&r.length<6;)r.push(s),s=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(H.apply(void 0,r.map(function(me){return me===vn?Bi:me})),16),end:parseInt(H.apply(void 0,r.map(function(me){return me===vn?Fi:me})),16)};var te=parseInt(H.apply(void 0,r),16);if(this.peekCodePoint(0)===nn&&Pa(this.peekCodePoint(1))){this.consumeCodePoint(),s=this.consumeCodePoint();for(var ue=[];Pa(s)&&ue.length<6;)ue.push(s),s=this.consumeCodePoint();return{type:30,start:te,end:parseInt(H.apply(void 0,ue),16)}}return{type:30,start:te,end:te}},o.prototype.consumeIdentLikeToken=function(){var r=this.consumeName();return"url"===r.toLowerCase()&&this.peekCodePoint(0)===Da?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Da?(this.consumeCodePoint(),{type:19,value:r}):{type:20,value:r}},o.prototype.consumeUrlToken=function(){var r=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ln)return{type:22,value:""};var s=this.peekCodePoint(0);if(s===Ma||s===rn){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ln||this.peekCodePoint(0)===aa)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),Cr)}for(;;){var M=this.consumeCodePoint();if(M===ln||M===aa)return{type:22,value:H.apply(void 0,r)};if(vr(M))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ln||this.peekCodePoint(0)===aa?(this.consumeCodePoint(),{type:22,value:H.apply(void 0,r)}):(this.consumeBadUrlRemnants(),Cr);if(M===rn||M===Ma||M===Da||Ns(M))return this.consumeBadUrlRemnants(),Cr;if(M===tn){if(!Xt(M,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Cr;r.push(this.consumeEscapedCodePoint())}else r.push(M)}},o.prototype.consumeWhiteSpace=function(){for(;vr(this.peekCodePoint(0));)this.consumeCodePoint()},o.prototype.consumeBadUrlRemnants=function(){for(;;){var r=this.consumeCodePoint();if(r===aa||r===ln)return;Xt(r,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},o.prototype.consumeStringSlice=function(r){for(var s=5e4,i="";r>0;){var M=Math.min(s,r);i+=H.apply(void 0,this._value.splice(0,M)),r-=M}return this._value.shift(),i},o.prototype.consumeStringToken=function(r){for(var s="",i=0;;){var M=this._value[i];if(M===ln||void 0===M||M===r)return{type:0,value:s+=this.consumeStringSlice(i)};if(M===en)return this._value.splice(0,i),Xs;if(M===tn){var W=this._value[i+1];W!==ln&&void 0!==W&&(W===en?(s+=this.consumeStringSlice(i),i=-1,this._value.shift()):Xt(M,W)&&(s+=this.consumeStringSlice(i),s+=H(this.consumeEscapedCodePoint()),i=-1))}i++}},o.prototype.consumeNumber=function(){var r=[],s=Wt,i=this.peekCodePoint(0);for((i===Dn||i===nn)&&r.push(this.consumeCodePoint());zt(this.peekCodePoint(0));)r.push(this.consumeCodePoint());i=this.peekCodePoint(0);var M=this.peekCodePoint(1);if(i===Xa&&zt(M))for(r.push(this.consumeCodePoint(),this.consumeCodePoint()),s=qt;zt(this.peekCodePoint(0));)r.push(this.consumeCodePoint());i=this.peekCodePoint(0),M=this.peekCodePoint(1);var W=this.peekCodePoint(2);if((i===br||i===cn)&&((M===Dn||M===nn)&&zt(W)||zt(M)))for(r.push(this.consumeCodePoint(),this.consumeCodePoint()),s=qt;zt(this.peekCodePoint(0));)r.push(this.consumeCodePoint());return[yn(r),s]},o.prototype.consumeNumericToken=function(){var r=this.consumeNumber(),s=r[0],i=r[1],M=this.peekCodePoint(0),W=this.peekCodePoint(1),te=this.peekCodePoint(2);return Ja(M,W,te)?{type:15,number:s,flags:i,unit:this.consumeName()}:M===fo?(this.consumeCodePoint(),{type:16,number:s,flags:i}):{type:17,number:s,flags:i}},o.prototype.consumeEscapedCodePoint=function(){var r=this.consumeCodePoint();if(Pa(r)){for(var s=H(r);Pa(this.peekCodePoint(0))&&s.length<6;)s+=H(this.consumeCodePoint());vr(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(s,16);return 0===i||Fs(i)||i>1114111?Ya:i}return r===ln?Ya:r},o.prototype.consumeName=function(){for(var r="";;){var s=this.consumeCodePoint();if(Ui(s))r+=H(s);else{if(!Xt(s,this.peekCodePoint(0)))return this.reconsumeCodePoint(s),r;r+=H(this.consumeEscapedCodePoint())}}},o}(),Eo=function(){function o(r){this._tokens=r}return o.create=function(r){var s=new yo;return s.write(r),new o(s.read())},o.parseValue=function(r){return o.create(r).parseComponentValue()},o.parseValues=function(r){return o.create(r).parseComponentValues()},o.prototype.parseComponentValue=function(){for(var r=this.consumeToken();31===r.type;)r=this.consumeToken();if(32===r.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(r);var s=this.consumeComponentValue();do{r=this.consumeToken()}while(31===r.type);if(32===r.type)return s;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},o.prototype.parseComponentValues=function(){for(var r=[];;){var s=this.consumeComponentValue();if(32===s.type)return r;r.push(s),r.push()}},o.prototype.consumeComponentValue=function(){var r=this.consumeToken();switch(r.type){case 11:case 28:case 2:return this.consumeSimpleBlock(r.type);case 19:return this.consumeFunction(r)}return r},o.prototype.consumeSimpleBlock=function(r){for(var s={type:r,values:[]},i=this.consumeToken();;){if(32===i.type||Tr(i,r))return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue()),i=this.consumeToken()}},o.prototype.consumeFunction=function(r){for(var s={name:r.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue())}},o.prototype.consumeToken=function(){var r=this._tokens.shift();return typeof r>"u"?Za:r},o.prototype.reconsumeToken=function(r){this._tokens.unshift(r)},o}(),ia=function(o){return 15===o.type},jn=function(o){return 17===o.type},Pt=function(o){return 20===o.type},Co=function(o){return 0===o.type},qa=function(o,r){return Pt(o)&&o.value===r},xr=function(o){return 31!==o.type},zn=function(o){return 31!==o.type&&4!==o.type},pn=function(o){var r=[],s=[];return o.forEach(function(i){if(4===i.type){if(0===s.length)throw new Error("Error parsing function args, zero tokens for arg");return r.push(s),void(s=[])}31!==i.type&&s.push(i)}),s.length&&r.push(s),r},Tr=function(o,r){return 11===r&&12===o.type||28===r&&29===o.type||2===r&&3===o.type},En=function(o){return 17===o.type||15===o.type},Bt=function(o){return 16===o.type||En(o)},Wi=function(o){return o.length>1?[o[0],o[1]]:[o[0]]},jt={type:17,number:0,flags:Wt},On={type:16,number:50,flags:Wt},wn={type:16,number:100,flags:Wt},la=function(o,r,s){var i=o[0],M=o[1];return[wt(i,r),wt(typeof M<"u"?M:i,s)]},wt=function(o,r){if(16===o.type)return o.number/100*r;if(ia(o))switch(o.unit){case"rem":case"em":return 16*o.number;default:return o.number}return o.number},xo="deg",To="grad",Ki="rad",Ni="turn",Mr={name:"angle",parse:function(o,r){if(15===r.type)switch(r.unit){case xo:return Math.PI*r.number/180;case To:return Math.PI/200*r.number;case Ki:return r.number;case Ni:return 2*Math.PI*r.number}throw new Error("Unsupported angle type")}},ki=function(o){return 15===o.type&&(o.unit===xo||o.unit===To||o.unit===Ki||o.unit===Ni)},Vi=function(o){switch(o.filter(Pt).map(function(s){return s.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[jt,jt];case"to top":case"bottom":return mn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[jt,wn];case"to right":case"left":return mn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[wn,wn];case"to bottom":case"top":return mn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[wn,jt];case"to left":case"right":return mn(270)}return 0},mn=function(o){return Math.PI*o/180},$t={name:"color",parse:function(o,r){if(18===r.type){var s=Qi[r.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported color function "'+r.name+'"');return s(o,r.values)}if(5===r.type){if(3===r.value.length){var i=r.value.substring(0,1),M=r.value.substring(1,2),W=r.value.substring(2,3);return Bn(parseInt(i+i,16),parseInt(M+M,16),parseInt(W+W,16),1)}if(4===r.value.length){i=r.value.substring(0,1),M=r.value.substring(1,2),W=r.value.substring(2,3);var te=r.value.substring(3,4);return Bn(parseInt(i+i,16),parseInt(M+M,16),parseInt(W+W,16),parseInt(te+te,16)/255)}if(6===r.value.length)return i=r.value.substring(0,2),M=r.value.substring(2,4),W=r.value.substring(4,6),Bn(parseInt(i,16),parseInt(M,16),parseInt(W,16),1);if(8===r.value.length)return i=r.value.substring(0,2),M=r.value.substring(2,4),W=r.value.substring(4,6),te=r.value.substring(6,8),Bn(parseInt(i,16),parseInt(M,16),parseInt(W,16),parseInt(te,16)/255)}if(20===r.type){var ue=Sn[r.value.toUpperCase()];if(typeof ue<"u")return ue}return Sn.TRANSPARENT}},$n=function(o){return!(255&o)},Qt=function(o){var r=255&o,s=255&o>>8,i=255&o>>16,M=255&o>>24;return r<255?"rgba("+M+","+i+","+s+","+r/255+")":"rgb("+M+","+i+","+s+")"},Bn=function(o,r,s,i){return(o<<24|r<<16|s<<8|Math.round(255*i))>>>0},sa=function(o,r){if(17===o.type)return o.number;if(16===o.type){var s=3===r?1:255;return 3===r?o.number/100*s:Math.round(o.number/100*s)}return 0},Gi=function(o,r){var s=r.filter(zn);if(3===s.length){var i=s.map(sa),M=i[0],W=i[1],te=i[2];return Bn(M,W,te,1)}if(4===s.length){var ue=s.map(sa),me=(M=ue[0],W=ue[1],te=ue[2],ue[3]);return Bn(M,W,te,me)}return 0};function Mo(o,r,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(r-o)*s*6+o:s<.5?r:s<2/3?6*(r-o)*(2/3-s)+o:o}var Yn=function(o,r){var s=r.filter(zn),i=s[0],M=s[1],W=s[2],te=s[3],ue=(17===i.type?mn(i.number):Mr.parse(o,i))/(2*Math.PI),me=Bt(M)?M.number/100:0,De=Bt(W)?W.number/100:0,Se=typeof te<"u"&&Bt(te)?wt(te,1):1;if(0===me)return Bn(255*De,255*De,255*De,1);var Le=De<=.5?De*(me+1):De+me-De*me,ke=2*De-Le,mt=Mo(ke,Le,ue+1/3),et=Mo(ke,Le,ue),dt=Mo(ke,Le,ue-1/3);return Bn(255*mt,255*et,255*dt,Se)},Qi={hsl:Yn,hsla:Yn,rgb:Gi,rgba:Gi},Ia=function(o,r){return $t.parse(o,Eo.create(r).parseComponentValue())},Sn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Hi={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(o,r){return r.map(function(s){if(Pt(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Do={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Oa=function(o,r){var s=$t.parse(o,r[0]),i=r[1];return i&&Bt(i)?{color:s,stop:i}:{color:s,stop:null}},Dr=function(o,r){var s=o[0],i=o[o.length-1];null===s.stop&&(s.stop=jt),null===i.stop&&(i.stop=wn);for(var M=[],W=0,te=0;te<o.length;te++){var ue=o[te].stop;if(null!==ue){var me=wt(ue,r);me>W?M.push(me):M.push(W),W=me}else M.push(null)}var De=null;for(te=0;te<M.length;te++){var Se=M[te];if(null===Se)null===De&&(De=te);else if(null!==De){for(var Le=te-De,mt=(Se-M[De-1])/(Le+1),et=1;et<=Le;et++)M[De+et-1]=mt*et;De=null}}return o.map(function(dt,Ct){return{color:dt.color,stop:Math.max(Math.min(1,M[Ct]/r),0)}})},Po=function(o,r,s){var i=r/2,M=s/2,W=wt(o[0],r)-i,te=M-wt(o[1],s);return(Math.atan2(te,W)+2*Math.PI)%(2*Math.PI)},Io=function(o,r,s){var i="number"==typeof o?o:Po(o,r,s),M=Math.abs(r*Math.sin(i))+Math.abs(s*Math.cos(i)),W=r/2,te=s/2,ue=M/2,me=Math.sin(i-Math.PI/2)*ue,De=Math.cos(i-Math.PI/2)*ue;return[M,W-De,W+De,te-me,te+me]},sn=function(o,r){return Math.sqrt(o*o+r*r)},Pr=function(o,r,s,i,M){return[[0,0],[0,r],[o,0],[o,r]].reduce(function(te,ue){var me=ue[0],De=ue[1],Se=sn(s-me,i-De);return(M?Se<te.optimumDistance:Se>te.optimumDistance)?{optimumCorner:ue,optimumDistance:Se}:te},{optimumDistance:M?1/0:-1/0,optimumCorner:null}).optimumCorner},Oo=function(o,r,s,i,M){var W=0,te=0;switch(o.size){case 0:0===o.shape?W=te=Math.min(Math.abs(r),Math.abs(r-i),Math.abs(s),Math.abs(s-M)):1===o.shape&&(W=Math.min(Math.abs(r),Math.abs(r-i)),te=Math.min(Math.abs(s),Math.abs(s-M)));break;case 2:if(0===o.shape)W=te=Math.min(sn(r,s),sn(r,s-M),sn(r-i,s),sn(r-i,s-M));else if(1===o.shape){var ue=Math.min(Math.abs(s),Math.abs(s-M))/Math.min(Math.abs(r),Math.abs(r-i)),me=Pr(i,M,r,s,!0),De=me[0],Se=me[1];te=ue*(W=sn(De-r,(Se-s)/ue))}break;case 1:0===o.shape?W=te=Math.max(Math.abs(r),Math.abs(r-i),Math.abs(s),Math.abs(s-M)):1===o.shape&&(W=Math.max(Math.abs(r),Math.abs(r-i)),te=Math.max(Math.abs(s),Math.abs(s-M)));break;case 3:if(0===o.shape)W=te=Math.max(sn(r,s),sn(r,s-M),sn(r-i,s),sn(r-i,s-M));else if(1===o.shape){ue=Math.max(Math.abs(s),Math.abs(s-M))/Math.max(Math.abs(r),Math.abs(r-i));var Le=Pr(i,M,r,s,!1);De=Le[0],Se=Le[1],te=ue*(W=sn(De-r,(Se-s)/ue))}}return Array.isArray(o.size)&&(W=wt(o.size[0],i),te=2===o.size.length?wt(o.size[1],M):W),[W,te]},wa=function(o,r){var s=mn(180),i=[];return pn(r).forEach(function(M,W){if(0===W){var te=M[0];if(20===te.type&&-1!==["top","left","right","bottom"].indexOf(te.value))return void(s=Vi(M));if(ki(te))return void(s=(Mr.parse(o,te)+mn(270))%mn(360))}var ue=Oa(o,M);i.push(ue)}),{angle:s,stops:i,type:1}},Ir="closest-side",Or="farthest-side",wr="closest-corner",Br="farthest-corner",Sr="circle",Lr="ellipse",Fr="cover",Ur="contain",Ba=function(o,r){var s=0,i=3,M=[],W=[];return pn(r).forEach(function(te,ue){var me=!0;if(0===ue?me=te.reduce(function(Se,Le){if(Pt(Le))switch(Le.value){case"center":return W.push(On),!1;case"top":case"left":return W.push(jt),!1;case"right":case"bottom":return W.push(wn),!1}else if(Bt(Le)||En(Le))return W.push(Le),!1;return Se},me):1===ue&&(me=te.reduce(function(Se,Le){if(Pt(Le))switch(Le.value){case Sr:return s=0,!1;case Lr:return s=1,!1;case Ur:case Ir:return i=0,!1;case Or:return i=1,!1;case wr:return i=2,!1;case Fr:case Br:return i=3,!1}else if(En(Le)||Bt(Le))return Array.isArray(i)||(i=[]),i.push(Le),!1;return Se},me)),me){var De=Oa(o,te);M.push(De)}}),{size:i,shape:s,stops:M,position:W,type:2}},Lo=function(o){return 1===o.type},Fo=function(o){return 2===o.type},er={name:"image",parse:function(o,r){if(22===r.type){var s={url:r.value,type:0};return o.cache.addImage(r.value),s}if(18===r.type){var i=Rr[r.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+r.name+'"');return i(o,r.values)}throw new Error("Unsupported image type "+r.type)}};function Uo(o){return!(20===o.type&&"none"===o.value||18===o.type&&!Rr[o.name])}var da,o,Rr={"linear-gradient":function(o,r){var s=mn(180),i=[];return pn(r).forEach(function(M,W){if(0===W){var te=M[0];if(20===te.type&&"to"===te.value)return void(s=Vi(M));if(ki(te))return void(s=Mr.parse(o,te))}var ue=Oa(o,M);i.push(ue)}),{angle:s,stops:i,type:1}},"-moz-linear-gradient":wa,"-ms-linear-gradient":wa,"-o-linear-gradient":wa,"-webkit-linear-gradient":wa,"radial-gradient":function(o,r){var s=0,i=3,M=[],W=[];return pn(r).forEach(function(te,ue){var me=!0;if(0===ue){var De=!1;me=te.reduce(function(Le,ke){if(De)if(Pt(ke))switch(ke.value){case"center":return W.push(On),Le;case"top":case"left":return W.push(jt),Le;case"right":case"bottom":return W.push(wn),Le}else(Bt(ke)||En(ke))&&W.push(ke);else if(Pt(ke))switch(ke.value){case Sr:return s=0,!1;case Lr:return s=1,!1;case"at":return De=!0,!1;case Ir:return i=0,!1;case Fr:case Or:return i=1,!1;case Ur:case wr:return i=2,!1;case Br:return i=3,!1}else if(En(ke)||Bt(ke))return Array.isArray(i)||(i=[]),i.push(ke),!1;return Le},me)}if(me){var Se=Oa(o,te);M.push(Se)}}),{size:i,shape:s,stops:M,position:W,type:2}},"-moz-radial-gradient":Ba,"-ms-radial-gradient":Ba,"-o-radial-gradient":Ba,"-webkit-radial-gradient":Ba,"-webkit-gradient":function(o,r){var s=mn(180),i=[],M=1,W=0,te=3,ue=[];return pn(r).forEach(function(me,De){var Se=me[0];if(0===De){if(Pt(Se)&&"linear"===Se.value)return void(M=1);if(Pt(Se)&&"radial"===Se.value)return void(M=2)}if(18===Se.type)if("from"===Se.name){var Le=$t.parse(o,Se.values[0]);i.push({stop:jt,color:Le})}else if("to"===Se.name)Le=$t.parse(o,Se.values[0]),i.push({stop:wn,color:Le});else if("color-stop"===Se.name){var ke=Se.values.filter(zn);if(2===ke.length){Le=$t.parse(o,ke[1]);var mt=ke[0];jn(mt)&&i.push({stop:{type:16,number:100*mt.number,flags:mt.flags},color:Le})}}}),1===M?{angle:(s+mn(180))%mn(360),stops:i,type:M}:{size:te,shape:W,stops:i,position:ue,type:M}}},Ro={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(o,r){if(0===r.length)return[];var s=r[0];return 20===s.type&&"none"===s.value?[]:r.filter(function(i){return zn(i)&&Uo(i)}).map(function(i){return er.parse(o,i)})}},ji={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(o,r){return r.map(function(s){if(Pt(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},zi={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(o,r){return pn(r).map(function(s){return s.filter(Bt)}).map(Wi)}},Wo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(o,r){return pn(r).map(function(s){return s.filter(Pt).map(function(i){return i.value}).join(" ")}).map(Ko)}},Ko=function(o){switch(o){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(o=da||(da={})).AUTO="auto",o.CONTAIN="contain",o.COVER="cover";var Wr,No={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(o,r){return pn(r).map(function(s){return s.filter($i)})}},$i=function(o){return Pt(o)||Bt(o)},tr=function(o){return{name:"border-"+o+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Yi=tr("top"),Xi=tr("right"),Ji=tr("bottom"),Zi=tr("left"),nr=function(o){return{name:"border-radius-"+o,initialValue:"0 0",prefix:!1,type:1,parse:function(r,s){return Wi(s.filter(Bt))}}},qi=nr("top-left"),el=nr("top-right"),tl=nr("bottom-right"),nl=nr("bottom-left"),ca=function(o){return{name:"border-"+o+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(r,s){switch(s){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},al=ca("top"),rl=ca("right"),Sa=ca("bottom"),pa=ca("left"),ma=function(o){return{name:"border-"+o+"-width",initialValue:"0",type:0,prefix:!1,parse:function(r,s){return ia(s)?s.number:0}}},nd=ma("top"),ad=ma("right"),ua=ma("bottom"),La=ma("left"),rd={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ar={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(o,r){return"rtl"===r?1:0}},ko={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(o,r){return r.filter(Pt).reduce(function(s,i){return s|ol(i.value)},0)}},ol=function(o){switch(o){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},od={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(o,r){switch(r){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},id={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(o,r){return 20===r.type&&"normal"===r.value?0:17===r.type||15===r.type?r.number:0}};!function(o){o.NORMAL="normal",o.STRICT="strict"}(Wr||(Wr={}));var ha,ld={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,r){return"strict"===r?Wr.STRICT:Wr.NORMAL}},rr={name:"line-height",initialValue:"normal",prefix:!1,type:4},Aa=function(o,r){return Pt(o)&&"normal"===o.value?1.2*r:17===o.type?r*o.number:Bt(o)?wt(o,r):r},il={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(o,r){return 20===r.type&&"none"===r.value?null:er.parse(o,r)}},sd={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(o,r){return"inside"===r?0:1}},ga={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(o,r){switch(r){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Kn=function(o){return{name:"margin-"+o,initialValue:"0",prefix:!1,type:4}},wc=Kn("top"),or=Kn("right"),dd=Kn("bottom"),ll=Kn("left"),cd={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(o,r){return r.filter(Pt).map(function(s){switch(s.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Vo={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(o,r){return"break-word"===r?"break-word":"normal"}},fa=function(o){return{name:"padding-"+o,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},sl=fa("top"),dl=fa("right"),Go=fa("bottom"),pd=fa("left"),md={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(o,r){switch(r){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},ud={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(o,r){switch(r){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Ad={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,r){return 1===r.length&&qa(r[0],"none")?[]:pn(r).map(function(s){for(var i={color:Sn.TRANSPARENT,offsetX:jt,offsetY:jt,blur:jt},M=0,W=0;W<s.length;W++){var te=s[W];En(te)?(0===M?i.offsetX=te:1===M?i.offsetY=te:i.blur=te,M++):i.color=$t.parse(o,te)}return i})}},gd={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(o,r){switch(r){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_a={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(o,r){if(20===r.type&&"none"===r.value)return null;if(18===r.type){var s=Qo[r.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported transform function "'+r.name+'"');return s(r.values)}return null}},Qo={matrix:function(o){var r=o.filter(function(s){return 17===s.type}).map(function(s){return s.number});return 6===r.length?r:null},matrix3d:function(o){var r=o.filter(function(me){return 17===me.type}).map(function(me){return me.number}),s=r[0],i=r[1];r[2],r[3];var M=r[4],W=r[5];r[6],r[7],r[8],r[9],r[10],r[11];var te=r[12],ue=r[13];return r[14],r[15],16===r.length?[s,i,M,W,te,ue]:null}},kr={type:16,number:50,flags:Wt},cl=[kr,kr],Ho={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(o,r){var s=r.filter(Bt);return 2!==s.length?cl:[s[0],s[1]]}},jo={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(o,r){switch(r){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(o){o.NORMAL="normal",o.BREAK_ALL="break-all",o.KEEP_ALL="keep-all"}(ha||(ha={}));for(var fd={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,r){switch(r){case"break-all":return ha.BREAK_ALL;case"keep-all":return ha.KEEP_ALL;default:return ha.NORMAL}}},_d={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(o,r){if(20===r.type)return{auto:!0,order:0};if(jn(r))return{auto:!1,order:r.number};throw new Error("Invalid z-index number parsed")}},pl={name:"time",parse:function(o,r){if(15===r.type)switch(r.unit.toLowerCase()){case"s":return 1e3*r.number;case"ms":return r.number}throw new Error("Unsupported time type")}},ba={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(o,r){return jn(r)?r.number:1}},hd={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zo={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(o,r){return r.filter(Pt).map(function(s){switch(s.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(s){return 0!==s})}},$o={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(o,r){var s=[],i=[];return r.forEach(function(M){switch(M.type){case 20:case 0:s.push(M.value);break;case 17:s.push(M.number.toString());break;case 4:i.push(s.join(" ")),s.length=0}}),s.length&&i.push(s.join(" ")),i.map(function(M){return-1===M.indexOf(" ")?M:"'"+M+"'"})}},Yo={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Xo={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(o,r){return jn(r)?r.number:Pt(r)&&"bold"===r.value?700:400}},Jo={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(o,r){return r.filter(Pt).map(function(s){return s.value})}},ir={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(o,r){switch(r){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},kt=function(o,r){return!!(o&r)},bd={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(o,r){if(0===r.length)return[];var s=r[0];return 20===s.type&&"none"===s.value?[]:r}},vd={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(o,r){if(0===r.length)return null;var s=r[0];if(20===s.type&&"none"===s.value)return null;for(var i=[],M=r.filter(xr),W=0;W<M.length;W++){var te=M[W],ue=M[W+1];if(20===te.type){var me=ue&&jn(ue)?ue.number:1;i.push({counter:te.value,increment:me})}}return i}},Fa={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(o,r){if(0===r.length)return[];for(var s=[],i=r.filter(xr),M=0;M<i.length;M++){var W=i[M],te=i[M+1];if(Pt(W)&&"none"!==W.value){var ue=te&&jn(te)?te.number:0;s.push({counter:W.value,reset:ue})}}return s}},ml={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(o,r){return r.filter(ia).map(function(s){return pl.parse(o,s)})}},Zo={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(o,r){if(0===r.length)return null;var s=r[0];if(20===s.type&&"none"===s.value)return null;var i=[],M=r.filter(Co);if(M.length%2!=0)return null;for(var W=0;W<M.length;W+=2){var te=M[W].value,ue=M[W+1].value;i.push({open:te,close:ue})}return i}},ul=function(o,r,s){if(!o)return"";var i=o[Math.min(r,o.length-1)];return i?s?i.open:i.close:""},yd={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,r){return 1===r.length&&qa(r[0],"none")?[]:pn(r).map(function(s){for(var i={color:255,offsetX:jt,offsetY:jt,blur:jt,spread:jt,inset:!1},M=0,W=0;W<s.length;W++){var te=s[W];qa(te,"inset")?i.inset=!0:En(te)?(0===M?i.offsetX=te:1===M?i.offsetY=te:2===M?i.blur=te:i.spread=te,M++):i.color=$t.parse(o,te)}return i})}},Ed={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(o,r){var s=[0,1,2],i=[];return r.filter(Pt).forEach(function(M){switch(M.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}}),s.forEach(function(M){-1===i.indexOf(M)&&i.push(M)}),i}},Cd={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(o,r){return ia(r)?r.number:0}},Al=function(){function o(r,s){var i,M;this.animationDuration=pt(r,ml,s.animationDuration),this.backgroundClip=pt(r,Hi,s.backgroundClip),this.backgroundColor=pt(r,Do,s.backgroundColor),this.backgroundImage=pt(r,Ro,s.backgroundImage),this.backgroundOrigin=pt(r,ji,s.backgroundOrigin),this.backgroundPosition=pt(r,zi,s.backgroundPosition),this.backgroundRepeat=pt(r,Wo,s.backgroundRepeat),this.backgroundSize=pt(r,No,s.backgroundSize),this.borderTopColor=pt(r,Yi,s.borderTopColor),this.borderRightColor=pt(r,Xi,s.borderRightColor),this.borderBottomColor=pt(r,Ji,s.borderBottomColor),this.borderLeftColor=pt(r,Zi,s.borderLeftColor),this.borderTopLeftRadius=pt(r,qi,s.borderTopLeftRadius),this.borderTopRightRadius=pt(r,el,s.borderTopRightRadius),this.borderBottomRightRadius=pt(r,tl,s.borderBottomRightRadius),this.borderBottomLeftRadius=pt(r,nl,s.borderBottomLeftRadius),this.borderTopStyle=pt(r,al,s.borderTopStyle),this.borderRightStyle=pt(r,rl,s.borderRightStyle),this.borderBottomStyle=pt(r,Sa,s.borderBottomStyle),this.borderLeftStyle=pt(r,pa,s.borderLeftStyle),this.borderTopWidth=pt(r,nd,s.borderTopWidth),this.borderRightWidth=pt(r,ad,s.borderRightWidth),this.borderBottomWidth=pt(r,ua,s.borderBottomWidth),this.borderLeftWidth=pt(r,La,s.borderLeftWidth),this.boxShadow=pt(r,yd,s.boxShadow),this.color=pt(r,rd,s.color),this.direction=pt(r,ar,s.direction),this.display=pt(r,ko,s.display),this.float=pt(r,od,s.cssFloat),this.fontFamily=pt(r,$o,s.fontFamily),this.fontSize=pt(r,Yo,s.fontSize),this.fontStyle=pt(r,ir,s.fontStyle),this.fontVariant=pt(r,Jo,s.fontVariant),this.fontWeight=pt(r,Xo,s.fontWeight),this.letterSpacing=pt(r,id,s.letterSpacing),this.lineBreak=pt(r,ld,s.lineBreak),this.lineHeight=pt(r,rr,s.lineHeight),this.listStyleImage=pt(r,il,s.listStyleImage),this.listStylePosition=pt(r,sd,s.listStylePosition),this.listStyleType=pt(r,ga,s.listStyleType),this.marginTop=pt(r,wc,s.marginTop),this.marginRight=pt(r,or,s.marginRight),this.marginBottom=pt(r,dd,s.marginBottom),this.marginLeft=pt(r,ll,s.marginLeft),this.opacity=pt(r,ba,s.opacity);var W=pt(r,cd,s.overflow);this.overflowX=W[0],this.overflowY=W[W.length>1?1:0],this.overflowWrap=pt(r,Vo,s.overflowWrap),this.paddingTop=pt(r,sl,s.paddingTop),this.paddingRight=pt(r,dl,s.paddingRight),this.paddingBottom=pt(r,Go,s.paddingBottom),this.paddingLeft=pt(r,pd,s.paddingLeft),this.paintOrder=pt(r,Ed,s.paintOrder),this.position=pt(r,ud,s.position),this.textAlign=pt(r,md,s.textAlign),this.textDecorationColor=pt(r,hd,null!==(i=s.textDecorationColor)&&void 0!==i?i:s.color),this.textDecorationLine=pt(r,zo,null!==(M=s.textDecorationLine)&&void 0!==M?M:s.textDecoration),this.textShadow=pt(r,Ad,s.textShadow),this.textTransform=pt(r,gd,s.textTransform),this.transform=pt(r,_a,s.transform),this.transformOrigin=pt(r,Ho,s.transformOrigin),this.visibility=pt(r,jo,s.visibility),this.webkitTextStrokeColor=pt(r,Cd,s.webkitTextStrokeColor),this.webkitTextStrokeWidth=pt(r,lr,s.webkitTextStrokeWidth),this.wordBreak=pt(r,fd,s.wordBreak),this.zIndex=pt(r,_d,s.zIndex)}return o.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},o.prototype.isTransparent=function(){return $n(this.backgroundColor)},o.prototype.isTransformed=function(){return null!==this.transform},o.prototype.isPositioned=function(){return 0!==this.position},o.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},o.prototype.isFloating=function(){return 0!==this.float},o.prototype.isInlineLevel=function(){return kt(this.display,4)||kt(this.display,33554432)||kt(this.display,268435456)||kt(this.display,536870912)||kt(this.display,67108864)||kt(this.display,134217728)},o}(),gl=function(){function o(r,s){this.content=pt(r,bd,s.content),this.quotes=pt(r,Zo,s.quotes)}return o}(),Vr=function(){function o(r,s){this.counterIncrement=pt(r,vd,s.counterIncrement),this.counterReset=pt(r,Fa,s.counterReset)}return o}(),pt=function(o,r,s){var i=new yo,M=null!==s&&typeof s<"u"?s.toString():r.initialValue;i.write(M);var W=new Eo(i.read());switch(r.type){case 2:var te=W.parseComponentValue();return r.parse(o,Pt(te)?te.value:r.initialValue);case 0:return r.parse(o,W.parseComponentValue());case 1:return r.parse(o,W.parseComponentValues());case 4:return W.parseComponentValue();case 3:switch(r.format){case"angle":return Mr.parse(o,W.parseComponentValue());case"color":return $t.parse(o,W.parseComponentValue());case"image":return er.parse(o,W.parseComponentValue());case"length":var ue=W.parseComponentValue();return En(ue)?ue:jt;case"length-percentage":var me=W.parseComponentValue();return Bt(me)?me:jt;case"time":return pl.parse(o,W.parseComponentValue())}}},fl="data-html2canvas-debug",_l=function(o){switch(o.getAttribute(fl)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Gr=function(o,r){var s=_l(o);return 1===s||r===s},Cn=function(){function o(r,s){this.context=r,this.textNodes=[],this.elements=[],this.flags=0,Gr(s,3),this.styles=new Al(r,window.getComputedStyle(s,null)),eo(s)&&(this.styles.animationDuration.some(function(i){return i>0})&&(s.style.animationDuration="0s"),null!==this.styles.transform&&(s.style.transform="none")),this.bounds=S(this.context,s),Gr(s,4)&&(this.flags|=16)}return o}(),hl="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ua=typeof Uint8Array>"u"?[]:new Uint8Array(256),sr=0;sr<qo.length;sr++)Ua[qo.charCodeAt(sr)]=sr;for(var bl=function(o){var i,W,te,ue,me,r=.75*o.length,s=o.length,M=0;"="===o[o.length-1]&&(r--,"="===o[o.length-2]&&r--);var De=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(r):new Array(r),Se=Array.isArray(De)?De:new Uint8Array(De);for(i=0;i<s;i+=4)W=Ua[o.charCodeAt(i)],te=Ua[o.charCodeAt(i+1)],ue=Ua[o.charCodeAt(i+2)],me=Ua[o.charCodeAt(i+3)],Se[M++]=W<<2|te>>4,Se[M++]=(15&te)<<4|ue>>2,Se[M++]=(3&ue)<<6|63&me;return De},vl=function(o){for(var r=o.length,s=[],i=0;i<r;i+=2)s.push(o[i+1]<<8|o[i]);return s},yl=function(o){for(var r=o.length,s=[],i=0;i<r;i+=4)s.push(o[i+3]<<24|o[i+2]<<16|o[i+1]<<8|o[i]);return s},Xn=5,Qr=11,Hr=2,ei=65536>>Xn,dr=(1<<Xn)-1,ai=ei+(1024>>Xn)+32,ri=65536>>Qr,Md=(1<<Qr-Xn)-1,Wa=function(o,r,s){return o.slice?o.slice(r,s):new Uint16Array(Array.prototype.slice.call(o,r,s))},jr=function(o,r,s){return o.slice?o.slice(r,s):new Uint32Array(Array.prototype.slice.call(o,r,s))},cr=function(o,r){var s=bl(o),i=Array.isArray(s)?yl(s):new Uint32Array(s),M=Array.isArray(s)?vl(s):new Uint16Array(s),W=24,te=Wa(M,W/2,i[4]/2),ue=2===i[5]?Wa(M,(W+i[4])/2):jr(i,Math.ceil((W+i[4])/4));return new Nn(i[0],i[1],i[2],i[3],te,ue)},Nn=function(){function o(r,s,i,M,W,te){this.initialValue=r,this.errorValue=s,this.highStart=i,this.highValueIndex=M,this.index=W,this.data=te}return o.prototype.get=function(r){var s;if(r>=0){if(r<55296||r>56319&&r<=65535)return s=((s=this.index[r>>Xn])<<Hr)+(r&dr),this.data[s];if(r<=65535)return s=((s=this.index[ei+(r-55296>>Xn)])<<Hr)+(r&dr),this.data[s];if(r<this.highStart)return s=ai-ri+(r>>Qr),s=this.index[s],s+=r>>Xn&Md,s=((s=this.index[s])<<Hr)+(r&dr),this.data[s];if(r<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),Cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xl=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ln=0;Ln<Cl.length;Ln++)xl[Cl.charCodeAt(Ln)]=Ln;var ur,Tl=1,zr=2,pr=3,oi=4,Jn=5,$r=7,Ml=8,ii=9,li=10,Dl=11,Pl=12,Il=13,Ol=14,Ka=15,Dd=function(o){for(var r=[],s=0,i=o.length;s<i;){var M=o.charCodeAt(s++);if(M>=55296&&M<=56319&&s<i){var W=o.charCodeAt(s++);56320==(64512&W)?r.push(((1023&M)<<10)+(1023&W)+65536):(r.push(M),s--)}else r.push(M)}return r},Pd=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var s=o.length;if(!s)return"";for(var i=[],M=-1,W="";++M<s;){var te=o[M];te<=65535?i.push(te):(te-=65536,i.push(55296+(te>>10),te%1024+56320)),(M+1===s||i.length>16384)&&(W+=String.fromCharCode.apply(String,i),i.length=0)}return W},Id=cr(hl),un="\xd7",Yr="\xf7",si=function(o){return Id.get(o)},Od=function(o,r,s){var i=s-2,M=r[i],W=r[s-1],te=r[s];if(W===zr&&te===pr)return un;if(W===zr||W===pr||W===oi||te===zr||te===pr||te===oi)return Yr;if(W===Ml&&-1!==[Ml,ii,Dl,Pl].indexOf(te)||(W===Dl||W===ii)&&(te===ii||te===li)||(W===Pl||W===li)&&te===li||te===Il||te===Jn||te===$r||W===Tl)return un;if(W===Il&&te===Ol){for(;M===Jn;)M=r[--i];if(M===Ol)return un}if(W===Ka&&te===Ka){for(var ue=0;M===Ka;)ue++,M=r[--i];if(ue%2==0)return un}return Yr},wl=function(o){var r=Dd(o),s=r.length,i=0,M=0,W=r.map(si);return{next:function(){if(i>=s)return{done:!0,value:null};for(var te=un;i<s&&(te=Od(r,W,++i))===un;);if(te!==un||i===s){var ue=Pd.apply(null,r.slice(M,i));return M=i,{value:ue,done:!1}}return{done:!0,value:null}}}},Bl=function(o){for(var i,r=wl(o),s=[];!(i=r.next()).done;)i.value&&s.push(i.value.slice());return s},Sl=function(o){var r=123;if(o.createRange){var s=o.createRange();if(s.getBoundingClientRect){var i=o.createElement("boundtest");i.style.height=r+"px",i.style.display="block",o.body.appendChild(i),s.selectNode(i);var M=s.getBoundingClientRect(),W=Math.round(M.height);if(o.body.removeChild(i),W===r)return!0}}return!1},Ll=function(o){var r=o.createElement("boundtest");r.style.width="50px",r.style.display="block",r.style.fontSize="12px",r.style.letterSpacing="0px",r.style.wordSpacing="0px",o.body.appendChild(r);var s=o.createRange();r.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var i=r.firstChild,M=K(i.data).map(function(me){return H(me)}),W=0,te={},ue=M.every(function(me,De){s.setStart(i,W),s.setEnd(i,W+me.length);var Se=s.getBoundingClientRect();W+=me.length;var Le=Se.x>te.x||Se.y>te.y;return te=Se,0===De||Le});return o.body.removeChild(r),ue},di=function(){return typeof(new Image).crossOrigin<"u"},Fl=function(){return"string"==typeof(new XMLHttpRequest).responseType},Bc=function(o){var r=new Image,s=o.createElement("canvas"),i=s.getContext("2d");if(!i)return!1;r.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(r,0,0),s.toDataURL()}catch{return!1}return!0},wd=function(o){return 0===o[0]&&255===o[1]&&0===o[2]&&255===o[3]},Xr=function(o){var r=o.createElement("canvas"),s=100;r.width=s,r.height=s;var i=r.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,s,s);var M=new Image,W=r.toDataURL();M.src=W;var te=An(s,s,0,0,M);return i.fillStyle="red",i.fillRect(0,0,s,s),Ul(te).then(function(ue){i.drawImage(ue,0,0);var me=i.getImageData(0,0,s,s).data;i.fillStyle="red",i.fillRect(0,0,s,s);var De=o.createElement("div");return De.style.backgroundImage="url("+W+")",De.style.height=s+"px",wd(me)?Ul(An(s,s,0,0,De)):Promise.reject(!1)}).then(function(ue){return i.drawImage(ue,0,0),wd(i.getImageData(0,0,s,s).data)}).catch(function(){return!1})},An=function(o,r,s,i,M){var W="http://www.w3.org/2000/svg",te=document.createElementNS(W,"svg"),ue=document.createElementNS(W,"foreignObject");return te.setAttributeNS(null,"width",o.toString()),te.setAttributeNS(null,"height",r.toString()),ue.setAttributeNS(null,"width","100%"),ue.setAttributeNS(null,"height","100%"),ue.setAttributeNS(null,"x",s.toString()),ue.setAttributeNS(null,"y",i.toString()),ue.setAttributeNS(null,"externalResourcesRequired","true"),te.appendChild(ue),ue.appendChild(M),te},Ul=function(o){return new Promise(function(r,s){var i=new Image;i.onload=function(){return r(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(o))})},Ut={get SUPPORT_RANGE_BOUNDS(){var o=Sl(document);return Object.defineProperty(Ut,"SUPPORT_RANGE_BOUNDS",{value:o}),o},get SUPPORT_WORD_BREAKING(){var o=Ut.SUPPORT_RANGE_BOUNDS&&Ll(document);return Object.defineProperty(Ut,"SUPPORT_WORD_BREAKING",{value:o}),o},get SUPPORT_SVG_DRAWING(){var o=Bc(document);return Object.defineProperty(Ut,"SUPPORT_SVG_DRAWING",{value:o}),o},get SUPPORT_FOREIGNOBJECT_DRAWING(){var o="function"==typeof Array.from&&"function"==typeof window.fetch?Xr(document):Promise.resolve(!1);return Object.defineProperty(Ut,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:o}),o},get SUPPORT_CORS_IMAGES(){var o=di();return Object.defineProperty(Ut,"SUPPORT_CORS_IMAGES",{value:o}),o},get SUPPORT_RESPONSE_TYPE(){var o=Fl();return Object.defineProperty(Ut,"SUPPORT_RESPONSE_TYPE",{value:o}),o},get SUPPORT_CORS_XHR(){var o="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ut,"SUPPORT_CORS_XHR",{value:o}),o},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var o=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ut,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:o}),o}},Jr=function(){function o(r,s){this.text=r,this.bounds=s}return o}(),Sc=function(o,r,s,i){var M=Ht(r,s),W=[],te=0;return M.forEach(function(ue){if(s.textDecorationLine.length||ue.trim().length>0)if(Ut.SUPPORT_RANGE_BOUNDS){var me=ci(i,te,ue.length).getClientRects();if(me.length>1){var De=Rl(ue),Se=0;De.forEach(function(ke){W.push(new Jr(ke,V.fromDOMRectList(o,ci(i,Se+te,ke.length).getClientRects()))),Se+=ke.length})}else W.push(new Jr(ue,V.fromDOMRectList(o,me)))}else{var Le=i.splitText(ue.length);W.push(new Jr(ue,Lc(o,i))),i=Le}else Ut.SUPPORT_RANGE_BOUNDS||(i=i.splitText(ue.length));te+=ue.length}),W},Lc=function(o,r){var s=r.ownerDocument;if(s){var i=s.createElement("html2canvaswrapper");i.appendChild(r.cloneNode(!0));var M=r.parentNode;if(M){M.replaceChild(i,r);var W=S(o,i);return i.firstChild&&M.replaceChild(i.firstChild,i),W}}return V.EMPTY},ci=function(o,r,s){var i=o.ownerDocument;if(!i)throw new Error("Node has no owner document");var M=i.createRange();return M.setStart(o,r),M.setEnd(o,r+s),M},Rl=function(o){if(Ut.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(r.segment(o)).map(function(s){return s.segment})}return Bl(o)},an=function(o,r){if(Ut.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(o)).map(function(i){return i.segment})}return Sd(o,r)},Ht=function(o,r){return 0!==r.letterSpacing?Rl(o):an(o,r)},Bd=[32,160,4961,65792,65793,4153,4241],Sd=function(o,r){for(var M,s=Et(o,{lineBreak:r.lineBreak,wordBreak:"break-word"===r.overflowWrap?"break-word":r.wordBreak}),i=[],W=function(){if(M.value){var te=M.value.slice(),ue=K(te),me="";ue.forEach(function(De){-1===Bd.indexOf(De)?me+=H(De):(me.length&&i.push(me),i.push(H(De)),me="")}),me.length&&i.push(me)}};!(M=s.next()).done;)W();return i},Fn=function(){function o(r,s,i){this.text=Ld(s.data,i.textTransform),this.textBounds=Sc(r,this.text,i,s)}return o}(),Ld=function(o,r){switch(r){case 1:return o.toLowerCase();case 3:return o.replace(Zn,qn);case 2:return o.toUpperCase();default:return o}},Zn=/(^|\s|:|-|\(|\))([a-z])/g,qn=function(o,r,s){return o.length>0?r+s.toUpperCase():o},Fd=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.src=i.currentSrc||i.src,M.intrinsicWidth=i.naturalWidth,M.intrinsicHeight=i.naturalHeight,M.context.cache.addImage(M.src),M}return n(r,o),r}(Cn),Na=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.canvas=i,M.intrinsicWidth=i.width,M.intrinsicHeight=i.height,M}return n(r,o),r}(Cn),Wl=function(o){function r(s,i){var M=o.call(this,s,i)||this,W=new XMLSerializer,te=S(s,i);return i.setAttribute("width",te.width+"px"),i.setAttribute("height",te.height+"px"),M.svg="data:image/svg+xml,"+encodeURIComponent(W.serializeToString(i)),M.intrinsicWidth=i.width.baseVal.value,M.intrinsicHeight=i.height.baseVal.value,M.context.cache.addImage(M.svg),M}return n(r,o),r}(Cn),kn=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.value=i.value,M}return n(r,o),r}(Cn),xn=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.start=i.start,M.reversed="boolean"==typeof i.reversed&&!0===i.reversed,M}return n(r,o),r}(Cn),Un=[{type:15,flags:0,unit:"px",number:3}],Vn=[{type:16,flags:0,number:50}],Rn=function(o){return o.width>o.height?new V(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new V(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o},Gn=function(o){var r=o.type===Zr?new Array(o.value.length+1).join("\u2022"):o.value;return 0===r.length?o.placeholder||"":r},gn="checkbox",pi="radio",Zr="password",Kl=707406591,mi=function(o){function r(s,i){var M=o.call(this,s,i)||this;switch(M.type=i.type.toLowerCase(),M.checked=i.checked,M.value=Gn(i),(M.type===gn||M.type===pi)&&(M.styles.backgroundColor=3739148031,M.styles.borderTopColor=M.styles.borderRightColor=M.styles.borderBottomColor=M.styles.borderLeftColor=2779096575,M.styles.borderTopWidth=M.styles.borderRightWidth=M.styles.borderBottomWidth=M.styles.borderLeftWidth=1,M.styles.borderTopStyle=M.styles.borderRightStyle=M.styles.borderBottomStyle=M.styles.borderLeftStyle=1,M.styles.backgroundClip=[0],M.styles.backgroundOrigin=[0],M.bounds=Rn(M.bounds)),M.type){case gn:M.styles.borderTopRightRadius=M.styles.borderTopLeftRadius=M.styles.borderBottomRightRadius=M.styles.borderBottomLeftRadius=Un;break;case pi:M.styles.borderTopRightRadius=M.styles.borderTopLeftRadius=M.styles.borderBottomRightRadius=M.styles.borderBottomLeftRadius=Vn}return M}return n(r,o),r}(Cn),Nl=function(o){function r(s,i){var M=o.call(this,s,i)||this,W=i.options[i.selectedIndex||0];return M.value=W&&W.text||"",M}return n(r,o),r}(Cn),kl=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.value=i.value,M}return n(r,o),r}(Cn),Vl=function(o){function r(s,i){var M=o.call(this,s,i)||this;M.src=i.src,M.width=parseInt(i.width,10)||0,M.height=parseInt(i.height,10)||0,M.backgroundColor=M.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){M.tree=Ql(s,i.contentWindow.document.documentElement);var W=i.contentWindow.document.documentElement?Ia(s,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):Sn.TRANSPARENT,te=i.contentWindow.document.body?Ia(s,getComputedStyle(i.contentWindow.document.body).backgroundColor):Sn.TRANSPARENT;M.backgroundColor=$n(W)?$n(te)?M.styles.backgroundColor:te:W}}catch{}return M}return n(r,o),r}(Cn),Ud=["OL","UL","MENU"],qr=function(o,r,s,i){for(var M=r.firstChild,W=void 0;M;M=W)if(W=M.nextSibling,ka(M)&&M.data.trim().length>0)s.textNodes.push(new Fn(o,M,s.styles));else if(va(M))if(Xl(M)&&M.assignedNodes)M.assignedNodes().forEach(function(ue){return qr(o,ue,s,i)});else{var te=Gl(o,M);te.styles.isVisible()&&(Rd(M,te,i)?te.flags|=4:Wd(te.styles)&&(te.flags|=2),-1!==Ud.indexOf(M.tagName)&&(te.flags|=8),s.elements.push(te),M.slot,M.shadowRoot?qr(o,M.shadowRoot,te,i):!no(M)&&!Hl(M)&&!ao(M)&&qr(o,M,te,i))}},Gl=function(o,r){return to(r)?new Fd(o,r):jl(r)?new Na(o,r):Hl(r)?new Wl(o,r):Kd(r)?new kn(o,r):St(r)?new xn(o,r):Nd(r)?new mi(o,r):ao(r)?new Nl(o,r):no(r)?new kl(o,r):$l(r)?new Vl(o,r):new Cn(o,r)},Ql=function(o,r){var s=Gl(o,r);return s.flags|=4,qr(o,r,s,s),s},Rd=function(o,r,s){return r.styles.isPositionedWithZIndex()||r.styles.opacity<1||r.styles.isTransformed()||ui(o)&&s.styles.isTransparent()},Wd=function(o){return o.isPositioned()||o.isFloating()},ka=function(o){return o.nodeType===Node.TEXT_NODE},va=function(o){return o.nodeType===Node.ELEMENT_NODE},eo=function(o){return va(o)&&typeof o.style<"u"&&!ya(o)},ya=function(o){return"object"==typeof o.className},Kd=function(o){return"LI"===o.tagName},St=function(o){return"OL"===o.tagName},Nd=function(o){return"INPUT"===o.tagName},kd=function(o){return"HTML"===o.tagName},Hl=function(o){return"svg"===o.tagName},ui=function(o){return"BODY"===o.tagName},jl=function(o){return"CANVAS"===o.tagName},zl=function(o){return"VIDEO"===o.tagName},to=function(o){return"IMG"===o.tagName},$l=function(o){return"IFRAME"===o.tagName},Yl=function(o){return"STYLE"===o.tagName},Vd=function(o){return"SCRIPT"===o.tagName},no=function(o){return"TEXTAREA"===o.tagName},ao=function(o){return"SELECT"===o.tagName},Xl=function(o){return"SLOT"===o.tagName},Jl=function(o){return o.tagName.indexOf("-")>0},Gd=function(){function o(){this.counters={}}return o.prototype.getCounterValue=function(r){var s=this.counters[r];return s&&s.length?s[s.length-1]:1},o.prototype.getCounterValues=function(r){return this.counters[r]||[]},o.prototype.pop=function(r){var s=this;r.forEach(function(i){return s.counters[i].pop()})},o.prototype.parse=function(r){var s=this,i=r.counterIncrement,M=r.counterReset,W=!0;null!==i&&i.forEach(function(ue){var me=s.counters[ue.counter];me&&0!==ue.increment&&(W=!1,me.length||me.push(1),me[Math.max(0,me.length-1)]+=ue.increment)});var te=[];return W&&M.forEach(function(ue){var me=s.counters[ue.counter];te.push(ue.counter),me||(me=s.counters[ue.counter]=[]),me.push(ue.reset)}),te},o}(),Zl={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ql={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Qd={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},es={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Va=function(o,r,s,i,M,W){return o<r||o>s?Qa(o,M,W.length>0):i.integers.reduce(function(te,ue,me){for(;o>=ue;)o-=ue,te+=i.values[me];return te},"")+W},ts=function(o,r,s,i){var M="";do{s||o--,M=i(o)+M,o/=r}while(o*r>=r);return M},Nt=function(o,r,s,i,M){var W=s-r+1;return(o<0?"-":"")+(ts(Math.abs(o),W,i,function(te){return H(Math.floor(te%W)+r)})+M)},Ea=function(o,r,s){void 0===s&&(s=". ");var i=r.length;return ts(Math.abs(o),i,!1,function(M){return r[Math.floor(M%i)]})+s},Ga=1,Qn=2,ea=4,mr=8,Hn=function(o,r,s,i,M,W){if(o<-9999||o>9999)return Qa(o,4,M.length>0);var te=Math.abs(o),ue=M;if(0===te)return r[0]+ue;for(var me=0;te>0&&me<=4;me++){var De=te%10;0===De&&kt(W,Ga)&&""!==ue?ue=r[De]+ue:De>1||1===De&&0===me||1===De&&1===me&&kt(W,Qn)||1===De&&1===me&&kt(W,ea)&&o>100||1===De&&me>1&&kt(W,mr)?ue=r[De]+(me>0?s[me-1]:"")+ue:1===De&&me>0&&(ue=s[me-1]+ue),te=Math.floor(te/10)}return(o<0?i:"")+ue},ro="\u5341\u767e\u5343\u842c",Ai="\u62fe\u4f70\u4edf\u842c",ns="\u30de\u30a4\u30ca\u30b9",oo="\ub9c8\uc774\ub108\uc2a4",Qa=function(o,r,s){var i=s?". ":"",M=s?"\u3001":"",W=s?", ":"",te=s?" ":"";switch(r){case 0:return"\u2022"+te;case 1:return"\u25e6"+te;case 2:return"\u25fe"+te;case 5:var ue=Nt(o,48,57,!0,i);return ue.length<4?"0"+ue:ue;case 4:return Ea(o,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",M);case 6:return Va(o,1,3999,Zl,3,i).toLowerCase();case 7:return Va(o,1,3999,Zl,3,i);case 8:return Nt(o,945,969,!1,i);case 9:return Nt(o,97,122,!1,i);case 10:return Nt(o,65,90,!1,i);case 11:return Nt(o,1632,1641,!0,i);case 12:case 49:return Va(o,1,9999,ql,3,i);case 35:return Va(o,1,9999,ql,3,i).toLowerCase();case 13:return Nt(o,2534,2543,!0,i);case 14:case 30:return Nt(o,6112,6121,!0,i);case 15:return Ea(o,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",M);case 16:return Ea(o,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",M);case 17:case 48:return Hn(o,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",ro,"\u8ca0",M,Qn|ea|mr);case 47:return Hn(o,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Ai,"\u8ca0",M,Ga|Qn|ea|mr);case 42:return Hn(o,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",ro,"\u8d1f",M,Qn|ea|mr);case 41:return Hn(o,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Ai,"\u8d1f",M,Ga|Qn|ea|mr);case 26:return Hn(o,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",ns,M,0);case 25:return Hn(o,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",ns,M,Ga|Qn|ea);case 31:return Hn(o,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",oo,W,Ga|Qn|ea);case 33:return Hn(o,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",oo,W,0);case 32:return Hn(o,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",oo,W,Ga|Qn|ea);case 18:return Nt(o,2406,2415,!0,i);case 20:return Va(o,1,19999,es,3,i);case 21:return Nt(o,2790,2799,!0,i);case 22:return Nt(o,2662,2671,!0,i);case 22:return Va(o,1,10999,Qd,3,i);case 23:return Ea(o,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Ea(o,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Nt(o,3302,3311,!0,i);case 28:return Ea(o,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",M);case 29:return Ea(o,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",M);case 34:return Nt(o,3792,3801,!0,i);case 37:return Nt(o,6160,6169,!0,i);case 38:return Nt(o,4160,4169,!0,i);case 39:return Nt(o,2918,2927,!0,i);case 40:return Nt(o,1776,1785,!0,i);case 43:return Nt(o,3046,3055,!0,i);case 44:return Nt(o,3174,3183,!0,i);case 45:return Nt(o,3664,3673,!0,i);case 46:return Nt(o,3872,3881,!0,i);default:return Nt(o,48,57,!0,i)}},as="data-html2canvas-ignore",rs=function(){function o(r,s,i){if(this.context=r,this.options=i,this.scrolledElements=[],this.referenceElement=s,this.counters=new Gd,this.quoteDepth=0,!s.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(s.ownerDocument.documentElement,!1)}return o.prototype.toIFrame=function(r,s){var i=this,M=os(r,s);if(!M.contentWindow)return Promise.reject("Unable to find iframe window");var W=r.defaultView.pageXOffset,te=r.defaultView.pageYOffset,ue=M.contentWindow,me=ue.document,De=zd(M).then(function(){return t(i,void 0,void 0,function(){var Se,Le;return c(this,function(ke){switch(ke.label){case 0:return this.scrolledElements.forEach(Jd),ue&&(ue.scrollTo(s.left,s.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ue.scrollY!==s.top||ue.scrollX!==s.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ue.scrollX-s.left,ue.scrollY-s.top,0,0))),Se=this.options.onclone,typeof(Le=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:me.fonts&&me.fonts.ready?[4,me.fonts.ready]:[3,2];case 1:ke.sent(),ke.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,jd(me)]:[3,4];case 3:ke.sent(),ke.label=4;case 4:return"function"==typeof Se?[2,Promise.resolve().then(function(){return Se(me,Le)}).then(function(){return M})]:[2,M]}})})});return me.open(),me.write(Yd(document.doctype)+"<html></html>"),Xd(this.referenceElement.ownerDocument,W,te),me.replaceChild(me.adoptNode(this.documentElement),me.documentElement),me.close(),De},o.prototype.createElementClone=function(r){if(Gr(r,2),jl(r))return this.createCanvasClone(r);if(zl(r))return this.createVideoClone(r);if(Yl(r))return this.createStyleClone(r);var s=r.cloneNode(!1);return to(s)&&(to(r)&&r.currentSrc&&r.currentSrc!==r.src&&(s.src=r.currentSrc,s.srcset=""),"lazy"===s.loading&&(s.loading="eager")),Jl(s)?this.createCustomElementClone(s):s},o.prototype.createCustomElementClone=function(r){var s=document.createElement("html2canvascustomelement");return gi(r.style,s),s},o.prototype.createStyleClone=function(r){try{var s=r.sheet;if(s&&s.cssRules){var i=[].slice.call(s.cssRules,0).reduce(function(W,te){return te&&"string"==typeof te.cssText?W+te.cssText:W},""),M=r.cloneNode(!1);return M.textContent=i,M}}catch(W){if(this.context.logger.error("Unable to access cssRules property",W),"SecurityError"!==W.name)throw W}return r.cloneNode(!1)},o.prototype.createCanvasClone=function(r){var s;if(this.options.inlineImages&&r.ownerDocument){var i=r.ownerDocument.createElement("img");try{return i.src=r.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",r)}}var M=r.cloneNode(!1);try{M.width=r.width,M.height=r.height;var W=r.getContext("2d"),te=M.getContext("2d");if(te)if(!this.options.allowTaint&&W)te.putImageData(W.getImageData(0,0,r.width,r.height),0,0);else{var ue=null!==(s=r.getContext("webgl2"))&&void 0!==s?s:r.getContext("webgl");if(ue){var me=ue.getContextAttributes();!1===me?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",r)}te.drawImage(r,0,0)}return M}catch{this.context.logger.info("Unable to clone canvas as it is tainted",r)}return M},o.prototype.createVideoClone=function(r){var s=r.ownerDocument.createElement("canvas");s.width=r.offsetWidth,s.height=r.offsetHeight;var i=s.getContext("2d");try{return i&&(i.drawImage(r,0,0,s.width,s.height),this.options.allowTaint||i.getImageData(0,0,s.width,s.height)),s}catch{this.context.logger.info("Unable to clone video as it is tainted",r)}var M=r.ownerDocument.createElement("canvas");return M.width=r.offsetWidth,M.height=r.offsetHeight,M},o.prototype.appendChildNode=function(r,s,i){(!va(s)||!Vd(s)&&!s.hasAttribute(as)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(s)))&&(!this.options.copyStyles||!va(s)||!Yl(s))&&r.appendChild(this.cloneNode(s,i))},o.prototype.cloneChildNodes=function(r,s,i){for(var M=this,W=r.shadowRoot?r.shadowRoot.firstChild:r.firstChild;W;W=W.nextSibling)if(va(W)&&Xl(W)&&"function"==typeof W.assignedNodes){var te=W.assignedNodes();te.length&&te.forEach(function(ue){return M.appendChildNode(s,ue,i)})}else this.appendChildNode(s,W,i)},o.prototype.cloneNode=function(r,s){if(ka(r))return document.createTextNode(r.data);if(!r.ownerDocument)return r.cloneNode(!1);var i=r.ownerDocument.defaultView;if(i&&va(r)&&(eo(r)||ya(r))){var M=this.createElementClone(r);M.style.transitionProperty="none";var W=i.getComputedStyle(r),te=i.getComputedStyle(r,":before"),ue=i.getComputedStyle(r,":after");this.referenceElement===r&&eo(M)&&(this.clonedReferenceElement=M),ui(M)&&ec(M);var me=this.counters.parse(new Vr(this.context,W)),De=this.resolvePseudoContent(r,M,te,ur.BEFORE);Jl(r)&&(s=!0),zl(r)||this.cloneChildNodes(r,M,s),De&&M.insertBefore(De,M.firstChild);var Se=this.resolvePseudoContent(r,M,ue,ur.AFTER);return Se&&M.appendChild(Se),this.counters.pop(me),(W&&(this.options.copyStyles||ya(r))&&!$l(r)||s)&&gi(W,M),(0!==r.scrollTop||0!==r.scrollLeft)&&this.scrolledElements.push([M,r.scrollLeft,r.scrollTop]),(no(r)||ao(r))&&(no(M)||ao(M))&&(M.value=r.value),M}return r.cloneNode(!1)},o.prototype.resolvePseudoContent=function(r,s,i,M){var W=this;if(i){var te=i.content,ue=s.ownerDocument;if(ue&&te&&"none"!==te&&"-moz-alt-content"!==te&&"none"!==i.display){this.counters.parse(new Vr(this.context,i));var me=new gl(this.context,i),De=ue.createElement("html2canvaspseudoelement");gi(i,De),me.content.forEach(function(Le){if(0===Le.type)De.appendChild(ue.createTextNode(Le.value));else if(22===Le.type){var ke=ue.createElement("img");ke.src=Le.value,ke.style.opacity="1",De.appendChild(ke)}else if(18===Le.type){if("attr"===Le.name){var mt=Le.values.filter(Pt);mt.length&&De.appendChild(ue.createTextNode(r.getAttribute(mt[0].value)||""))}else if("counter"===Le.name){var et=Le.values.filter(zn),dt=et[0],Ct=et[1];if(dt&&Pt(dt)){var ft=W.counters.getCounterValue(dt.value),At=Ct&&Pt(Ct)?ga.parse(W.context,Ct.value):3;De.appendChild(ue.createTextNode(Qa(ft,At,!1)))}}else if("counters"===Le.name){var Dt=Le.values.filter(zn),Tt=(dt=Dt[0],Dt[1]);if(Ct=Dt[2],dt&&Pt(dt)){var yt=W.counters.getCounterValues(dt.value),st=Ct&&Pt(Ct)?ga.parse(W.context,Ct.value):3,fe=Tt&&0===Tt.type?Tt.value:"",l=yt.map(function(ae){return Qa(ae,st,!1)}).join(fe);De.appendChild(ue.createTextNode(l))}}}else if(20===Le.type)switch(Le.value){case"open-quote":De.appendChild(ue.createTextNode(ul(me.quotes,W.quoteDepth++,!0)));break;case"close-quote":De.appendChild(ue.createTextNode(ul(me.quotes,--W.quoteDepth,!1)));break;default:De.appendChild(ue.createTextNode(Le.value))}}),De.className=fi+" "+_i;var Se=M===ur.BEFORE?" "+fi:" "+_i;return ya(s)?s.className.baseValue+=Se:s.className+=Se,De}}},o.destroy=function(r){return!!r.parentNode&&(r.parentNode.removeChild(r),!0)},o}();!function(o){o[o.BEFORE=0]="BEFORE",o[o.AFTER=1]="AFTER"}(ur||(ur={}));var It,os=function(o,r){var s=o.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=r.width.toString(),s.height=r.height.toString(),s.scrolling="no",s.setAttribute(as,"true"),o.body.appendChild(s),s},Hd=function(o){return new Promise(function(r){o.complete?r():o.src?(o.onload=r,o.onerror=r):r()})},jd=function(o){return Promise.all([].slice.call(o.images,0).map(Hd))},zd=function(o){return new Promise(function(r,s){var i=o.contentWindow;if(!i)return s("No window assigned for iframe");var M=i.document;i.onload=o.onload=function(){i.onload=o.onload=null;var W=setInterval(function(){M.body.childNodes.length>0&&"complete"===M.readyState&&(clearInterval(W),r(o))},50)}})},$d=["all","d","content"],gi=function(o,r){for(var s=o.length-1;s>=0;s--){var i=o.item(s);-1===$d.indexOf(i)&&r.style.setProperty(i,o.getPropertyValue(i))}return r},Yd=function(o){var r="";return o&&(r+="<!DOCTYPE ",o.name&&(r+=o.name),o.internalSubset&&(r+=o.internalSubset),o.publicId&&(r+='"'+o.publicId+'"'),o.systemId&&(r+='"'+o.systemId+'"'),r+=">"),r},Xd=function(o,r,s){o&&o.defaultView&&(r!==o.defaultView.pageXOffset||s!==o.defaultView.pageYOffset)&&o.defaultView.scrollTo(r,s)},Jd=function(o){var r=o[0],s=o[1],i=o[2];r.scrollLeft=s,r.scrollTop=i},Zd=":before",qd=":after",fi="___html2canvas___pseudoelement_before",_i="___html2canvas___pseudoelement_after",hi='{\n    content: "" !important;\n    display: none !important;\n}',ec=function(o){tc(o,"."+fi+Zd+hi+"\n         ."+_i+qd+hi)},tc=function(o,r){var s=o.ownerDocument;if(s){var i=s.createElement("style");i.textContent=r,o.appendChild(i)}},is=function(){function o(){}return o.getOrigin=function(r){var s=o._link;return s?(s.href=r,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},o.isSameOrigin=function(r){return o.getOrigin(r)===o._origin},o.setContext=function(r){o._link=r.document.createElement("a"),o._origin=o.getOrigin(r.location.href)},o._origin="about:blank",o}(),nc=function(){function o(r,s){this.context=r,this._options=s,this._cache={}}return o.prototype.addImage=function(r){var s=Promise.resolve();return this.has(r)||(vi(r)||ic(r))&&(this._cache[r]=this.loadImage(r)).catch(function(){}),s},o.prototype.match=function(r){return this._cache[r]},o.prototype.loadImage=function(r){return t(this,void 0,void 0,function(){var s,i,M,W,te=this;return c(this,function(ue){switch(ue.label){case 0:return s=is.isSameOrigin(r),i=!bi(r)&&!0===this._options.useCORS&&Ut.SUPPORT_CORS_IMAGES&&!s,M=!bi(r)&&!s&&!vi(r)&&"string"==typeof this._options.proxy&&Ut.SUPPORT_CORS_XHR&&!i,s||!1!==this._options.allowTaint||bi(r)||vi(r)||M||i?(W=r,M?[4,this.proxy(W)]:[3,2]):[2];case 1:W=ue.sent(),ue.label=2;case 2:return this.context.logger.debug("Added image "+r.substring(0,256)),[4,new Promise(function(me,De){var Se=new Image;Se.onload=function(){return me(Se)},Se.onerror=De,(ls(W)||i)&&(Se.crossOrigin="anonymous"),Se.src=W,!0===Se.complete&&setTimeout(function(){return me(Se)},500),te._options.imageTimeout>0&&setTimeout(function(){return De("Timed out ("+te._options.imageTimeout+"ms) loading image")},te._options.imageTimeout)})];case 3:return[2,ue.sent()]}})})},o.prototype.has=function(r){return typeof this._cache[r]<"u"},o.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},o.prototype.proxy=function(r){var s=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var M=r.substring(0,256);return new Promise(function(W,te){var ue=Ut.SUPPORT_RESPONSE_TYPE?"blob":"text",me=new XMLHttpRequest;me.onload=function(){if(200===me.status)if("text"===ue)W(me.response);else{var Le=new FileReader;Le.addEventListener("load",function(){return W(Le.result)},!1),Le.addEventListener("error",function(ke){return te(ke)},!1),Le.readAsDataURL(me.response)}else te("Failed to proxy resource "+M+" with status code "+me.status)},me.onerror=te;var De=i.indexOf("?")>-1?"&":"?";if(me.open("GET",""+i+De+"url="+encodeURIComponent(r)+"&responseType="+ue),"text"!==ue&&me instanceof XMLHttpRequest&&(me.responseType=ue),s._options.imageTimeout){var Se=s._options.imageTimeout;me.timeout=Se,me.ontimeout=function(){return te("Timed out ("+Se+"ms) proxying "+M)}}me.send()})},o}(),ac=/^data:image\/svg\+xml/i,rc=/^data:image\/.*;base64,/i,oc=/^data:image\/.*/i,ic=function(o){return Ut.SUPPORT_SVG_DRAWING||!lc(o)},bi=function(o){return oc.test(o)},ls=function(o){return rc.test(o)},vi=function(o){return"blob"===o.substr(0,4)},lc=function(o){return"svg"===o.substr(-3).toLowerCase()||ac.test(o)},ct=function(){function o(r,s){this.type=0,this.x=r,this.y=s}return o.prototype.add=function(r,s){return new o(this.x+r,this.y+s)},o}(),Ha=function(o,r,s){return new ct(o.x+(r.x-o.x)*s,o.y+(r.y-o.y)*s)},io=function(){function o(r,s,i,M){this.type=1,this.start=r,this.startControl=s,this.endControl=i,this.end=M}return o.prototype.subdivide=function(r,s){var i=Ha(this.start,this.startControl,r),M=Ha(this.startControl,this.endControl,r),W=Ha(this.endControl,this.end,r),te=Ha(i,M,r),ue=Ha(M,W,r),me=Ha(te,ue,r);return s?new o(this.start,i,te,me):new o(me,ue,W,this.end)},o.prototype.add=function(r,s){return new o(this.start.add(r,s),this.startControl.add(r,s),this.endControl.add(r,s),this.end.add(r,s))},o.prototype.reverse=function(){return new o(this.end,this.endControl,this.startControl,this.start)},o}(),fn=function(o){return 1===o.type},sc=function(){function o(r){var s=r.styles,i=r.bounds,M=la(s.borderTopLeftRadius,i.width,i.height),W=M[0],te=M[1],ue=la(s.borderTopRightRadius,i.width,i.height),me=ue[0],De=ue[1],Se=la(s.borderBottomRightRadius,i.width,i.height),Le=Se[0],ke=Se[1],mt=la(s.borderBottomLeftRadius,i.width,i.height),et=mt[0],dt=mt[1],Ct=[];Ct.push((W+me)/i.width),Ct.push((et+Le)/i.width),Ct.push((te+dt)/i.height),Ct.push((De+ke)/i.height);var ft=Math.max.apply(Math,Ct);ft>1&&(W/=ft,te/=ft,me/=ft,De/=ft,Le/=ft,ke/=ft,et/=ft,dt/=ft);var At=i.width-me,Dt=i.height-ke,Tt=i.width-Le,yt=i.height-dt,st=s.borderTopWidth,fe=s.borderRightWidth,l=s.borderBottomWidth,d=s.borderLeftWidth,x=wt(s.paddingTop,r.bounds.width),ae=wt(s.paddingRight,r.bounds.width),Ie=wt(s.paddingBottom,r.bounds.width),Ve=wt(s.paddingLeft,r.bounds.width);this.topLeftBorderDoubleOuterBox=W>0||te>0?Rt(i.left+d/3,i.top+st/3,W-d/3,te-st/3,It.TOP_LEFT):new ct(i.left+d/3,i.top+st/3),this.topRightBorderDoubleOuterBox=W>0||te>0?Rt(i.left+At,i.top+st/3,me-fe/3,De-st/3,It.TOP_RIGHT):new ct(i.left+i.width-fe/3,i.top+st/3),this.bottomRightBorderDoubleOuterBox=Le>0||ke>0?Rt(i.left+Tt,i.top+Dt,Le-fe/3,ke-l/3,It.BOTTOM_RIGHT):new ct(i.left+i.width-fe/3,i.top+i.height-l/3),this.bottomLeftBorderDoubleOuterBox=et>0||dt>0?Rt(i.left+d/3,i.top+yt,et-d/3,dt-l/3,It.BOTTOM_LEFT):new ct(i.left+d/3,i.top+i.height-l/3),this.topLeftBorderDoubleInnerBox=W>0||te>0?Rt(i.left+2*d/3,i.top+2*st/3,W-2*d/3,te-2*st/3,It.TOP_LEFT):new ct(i.left+2*d/3,i.top+2*st/3),this.topRightBorderDoubleInnerBox=W>0||te>0?Rt(i.left+At,i.top+2*st/3,me-2*fe/3,De-2*st/3,It.TOP_RIGHT):new ct(i.left+i.width-2*fe/3,i.top+2*st/3),this.bottomRightBorderDoubleInnerBox=Le>0||ke>0?Rt(i.left+Tt,i.top+Dt,Le-2*fe/3,ke-2*l/3,It.BOTTOM_RIGHT):new ct(i.left+i.width-2*fe/3,i.top+i.height-2*l/3),this.bottomLeftBorderDoubleInnerBox=et>0||dt>0?Rt(i.left+2*d/3,i.top+yt,et-2*d/3,dt-2*l/3,It.BOTTOM_LEFT):new ct(i.left+2*d/3,i.top+i.height-2*l/3),this.topLeftBorderStroke=W>0||te>0?Rt(i.left+d/2,i.top+st/2,W-d/2,te-st/2,It.TOP_LEFT):new ct(i.left+d/2,i.top+st/2),this.topRightBorderStroke=W>0||te>0?Rt(i.left+At,i.top+st/2,me-fe/2,De-st/2,It.TOP_RIGHT):new ct(i.left+i.width-fe/2,i.top+st/2),this.bottomRightBorderStroke=Le>0||ke>0?Rt(i.left+Tt,i.top+Dt,Le-fe/2,ke-l/2,It.BOTTOM_RIGHT):new ct(i.left+i.width-fe/2,i.top+i.height-l/2),this.bottomLeftBorderStroke=et>0||dt>0?Rt(i.left+d/2,i.top+yt,et-d/2,dt-l/2,It.BOTTOM_LEFT):new ct(i.left+d/2,i.top+i.height-l/2),this.topLeftBorderBox=W>0||te>0?Rt(i.left,i.top,W,te,It.TOP_LEFT):new ct(i.left,i.top),this.topRightBorderBox=me>0||De>0?Rt(i.left+At,i.top,me,De,It.TOP_RIGHT):new ct(i.left+i.width,i.top),this.bottomRightBorderBox=Le>0||ke>0?Rt(i.left+Tt,i.top+Dt,Le,ke,It.BOTTOM_RIGHT):new ct(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=et>0||dt>0?Rt(i.left,i.top+yt,et,dt,It.BOTTOM_LEFT):new ct(i.left,i.top+i.height),this.topLeftPaddingBox=W>0||te>0?Rt(i.left+d,i.top+st,Math.max(0,W-d),Math.max(0,te-st),It.TOP_LEFT):new ct(i.left+d,i.top+st),this.topRightPaddingBox=me>0||De>0?Rt(i.left+Math.min(At,i.width-fe),i.top+st,At>i.width+fe?0:Math.max(0,me-fe),Math.max(0,De-st),It.TOP_RIGHT):new ct(i.left+i.width-fe,i.top+st),this.bottomRightPaddingBox=Le>0||ke>0?Rt(i.left+Math.min(Tt,i.width-d),i.top+Math.min(Dt,i.height-l),Math.max(0,Le-fe),Math.max(0,ke-l),It.BOTTOM_RIGHT):new ct(i.left+i.width-fe,i.top+i.height-l),this.bottomLeftPaddingBox=et>0||dt>0?Rt(i.left+d,i.top+Math.min(yt,i.height-l),Math.max(0,et-d),Math.max(0,dt-l),It.BOTTOM_LEFT):new ct(i.left+d,i.top+i.height-l),this.topLeftContentBox=W>0||te>0?Rt(i.left+d+Ve,i.top+st+x,Math.max(0,W-(d+Ve)),Math.max(0,te-(st+x)),It.TOP_LEFT):new ct(i.left+d+Ve,i.top+st+x),this.topRightContentBox=me>0||De>0?Rt(i.left+Math.min(At,i.width+d+Ve),i.top+st+x,At>i.width+d+Ve?0:me-d+Ve,De-(st+x),It.TOP_RIGHT):new ct(i.left+i.width-(fe+ae),i.top+st+x),this.bottomRightContentBox=Le>0||ke>0?Rt(i.left+Math.min(Tt,i.width-(d+Ve)),i.top+Math.min(Dt,i.height+st+x),Math.max(0,Le-(fe+ae)),ke-(l+Ie),It.BOTTOM_RIGHT):new ct(i.left+i.width-(fe+ae),i.top+i.height-(l+Ie)),this.bottomLeftContentBox=et>0||dt>0?Rt(i.left+d+Ve,i.top+yt,Math.max(0,et-(d+Ve)),dt-(l+Ie),It.BOTTOM_LEFT):new ct(i.left+d+Ve,i.top+i.height-(l+Ie))}return o}();!function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=1]="TOP_RIGHT",o[o.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",o[o.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(It||(It={}));var Rt=function(o,r,s,i,M){var W=(Math.sqrt(2)-1)/3*4,te=s*W,ue=i*W,me=o+s,De=r+i;switch(M){case It.TOP_LEFT:return new io(new ct(o,De),new ct(o,De-ue),new ct(me-te,r),new ct(me,r));case It.TOP_RIGHT:return new io(new ct(o,r),new ct(o+te,r),new ct(me,De-ue),new ct(me,De));case It.BOTTOM_RIGHT:return new io(new ct(me,r),new ct(me,r+ue),new ct(o+te,De),new ct(o,De));case It.BOTTOM_LEFT:default:return new io(new ct(me,De),new ct(me-te,De),new ct(o,r+ue),new ct(o,r))}},lo=function(o){return[o.topLeftBorderBox,o.topRightBorderBox,o.bottomRightBorderBox,o.bottomLeftBorderBox]},dc=function(o){return[o.topLeftContentBox,o.topRightContentBox,o.bottomRightContentBox,o.bottomLeftContentBox]},so=function(o){return[o.topLeftPaddingBox,o.topRightPaddingBox,o.bottomRightPaddingBox,o.bottomLeftPaddingBox]},cc=function(){function o(r,s,i){this.offsetX=r,this.offsetY=s,this.matrix=i,this.type=0,this.target=6}return o}(),co=function(){function o(r,s){this.path=r,this.target=s,this.type=1}return o}(),pc=function(){function o(r){this.opacity=r,this.type=2,this.target=6}return o}(),mc=function(o){return 0===o.type},ss=function(o){return 1===o.type},ds=function(o){return 2===o.type},cs=function(o,r){return o.length===r.length&&o.some(function(s,i){return s===r[i]})},uc=function(o,r,s,i,M){return o.map(function(W,te){switch(te){case 0:return W.add(r,s);case 1:return W.add(r+i,s);case 2:return W.add(r+i,s+M);case 3:return W.add(r,s+M)}return W})},ps=function(){function o(r){this.element=r,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return o}(),ms=function(){function o(r,s){if(this.container=r,this.parent=s,this.effects=[],this.curves=new sc(this.container),this.container.styles.opacity<1&&this.effects.push(new pc(this.container.styles.opacity)),null!==this.container.styles.transform){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,M=this.container.bounds.top+this.container.styles.transformOrigin[1].number,W=this.container.styles.transform;this.effects.push(new cc(i,M,W))}if(0!==this.container.styles.overflowX){var te=lo(this.curves),ue=so(this.curves);cs(te,ue)?this.effects.push(new co(te,6)):(this.effects.push(new co(te,2)),this.effects.push(new co(ue,4)))}}return o.prototype.getEffects=function(r){for(var s=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,M=this.effects.slice(0);i;){var W=i.effects.filter(function(me){return!ss(me)});if(s||0!==i.container.styles.position||!i.parent){if(M.unshift.apply(M,W),s=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var te=lo(i.curves),ue=so(i.curves);cs(te,ue)||M.unshift(new co(ue,6))}}else M.unshift.apply(M,W);i=i.parent}return M.filter(function(me){return kt(me.target,r)})},o}(),yi=function(o,r,s,i){o.container.elements.forEach(function(M){var W=kt(M.flags,4),te=kt(M.flags,2),ue=new ms(M,o);kt(M.styles.display,2048)&&i.push(ue);var me=kt(M.flags,8)?[]:i;if(W||te){var De=W||M.styles.isPositioned()?s:r,Se=new ps(ue);if(M.styles.isPositioned()||M.styles.opacity<1||M.styles.isTransformed()){var Le=M.styles.zIndex.order;if(Le<0){var ke=0;De.negativeZIndex.some(function(et,dt){return Le>et.element.container.styles.zIndex.order?(ke=dt,!1):ke>0}),De.negativeZIndex.splice(ke,0,Se)}else if(Le>0){var mt=0;De.positiveZIndex.some(function(et,dt){return Le>=et.element.container.styles.zIndex.order?(mt=dt+1,!1):mt>0}),De.positiveZIndex.splice(mt,0,Se)}else De.zeroOrAutoZIndexOrTransformedOrOpacity.push(Se)}else M.styles.isFloating()?De.nonPositionedFloats.push(Se):De.nonPositionedInlineLevel.push(Se);yi(ue,Se,W?Se:s,me)}else M.styles.isInlineLevel()?r.inlineLevel.push(ue):r.nonInlineLevel.push(ue),yi(ue,r,s,me);kt(M.flags,8)&&Ei(M,me)})},Ei=function(o,r){for(var s=o instanceof xn?o.start:1,i=o instanceof xn&&o.reversed,M=0;M<r.length;M++){var W=r[M];W.container instanceof kn&&"number"==typeof W.container.value&&0!==W.container.value&&(s=W.container.value),W.listValue=Qa(s,W.container.styles.listStyleType,!0),s+=i?-1:1}},Ci=function(o){var r=new ms(o,null),s=new ps(r),i=[];return yi(r,s,s,i),Ei(r.container,i),s},xi=function(o,r){switch(r){case 0:return _n(o.topLeftBorderBox,o.topLeftPaddingBox,o.topRightBorderBox,o.topRightPaddingBox);case 1:return _n(o.topRightBorderBox,o.topRightPaddingBox,o.bottomRightBorderBox,o.bottomRightPaddingBox);case 2:return _n(o.bottomRightBorderBox,o.bottomRightPaddingBox,o.bottomLeftBorderBox,o.bottomLeftPaddingBox);default:return _n(o.bottomLeftBorderBox,o.bottomLeftPaddingBox,o.topLeftBorderBox,o.topLeftPaddingBox)}},Ac=function(o,r){switch(r){case 0:return _n(o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox,o.topRightBorderBox,o.topRightBorderDoubleOuterBox);case 1:return _n(o.topRightBorderBox,o.topRightBorderDoubleOuterBox,o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox);case 2:return _n(o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox,o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox);default:return _n(o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox,o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox)}},Ti=function(o,r){switch(r){case 0:return _n(o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox,o.topRightBorderDoubleInnerBox,o.topRightPaddingBox);case 1:return _n(o.topRightBorderDoubleInnerBox,o.topRightPaddingBox,o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox);case 2:return _n(o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox,o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox);default:return _n(o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox,o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox)}},gc=function(o,r){switch(r){case 0:return po(o.topLeftBorderStroke,o.topRightBorderStroke);case 1:return po(o.topRightBorderStroke,o.bottomRightBorderStroke);case 2:return po(o.bottomRightBorderStroke,o.bottomLeftBorderStroke);default:return po(o.bottomLeftBorderStroke,o.topLeftBorderStroke)}},po=function(o,r){var s=[];return fn(o)?s.push(o.subdivide(.5,!1)):s.push(o),fn(r)?s.push(r.subdivide(.5,!0)):s.push(r),s},_n=function(o,r,s,i){var M=[];return fn(o)?M.push(o.subdivide(.5,!1)):M.push(o),fn(s)?M.push(s.subdivide(.5,!0)):M.push(s),fn(i)?M.push(i.subdivide(.5,!0).reverse()):M.push(i),fn(r)?M.push(r.subdivide(.5,!1).reverse()):M.push(r),M},us=function(o){var r=o.bounds,s=o.styles;return r.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},mo=function(o){var r=o.styles,s=o.bounds,i=wt(r.paddingLeft,s.width),M=wt(r.paddingRight,s.width),W=wt(r.paddingTop,s.width),te=wt(r.paddingBottom,s.width);return s.add(i+r.borderLeftWidth,W+r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth+i+M),-(r.borderTopWidth+r.borderBottomWidth+W+te))},As=function(o,r){return 0===o?r.bounds:2===o?mo(r):us(r)},gs=function(o,r){return 0===o?r.bounds:2===o?mo(r):us(r)},Mi=function(o,r,s){var i=As(za(o.styles.backgroundOrigin,r),o),M=gs(za(o.styles.backgroundClip,r),o),W=Di(za(o.styles.backgroundSize,r),s,i),te=W[0],ue=W[1],me=la(za(o.styles.backgroundPosition,r),i.width-te,i.height-ue);return[fs(za(o.styles.backgroundRepeat,r),me,W,i,M),Math.round(i.left+me[0]),Math.round(i.top+me[1]),te,ue]},ja=function(o){return Pt(o)&&o.value===da.AUTO},uo=function(o){return"number"==typeof o},Di=function(o,r,s){var i=r[0],M=r[1],W=r[2],te=o[0],ue=o[1];if(!te)return[0,0];if(Bt(te)&&ue&&Bt(ue))return[wt(te,s.width),wt(ue,s.height)];var me=uo(W);if(Pt(te)&&(te.value===da.CONTAIN||te.value===da.COVER))return uo(W)?s.width/s.height<W!=(te.value===da.COVER)?[s.width,s.width/W]:[s.height*W,s.height]:[s.width,s.height];var Se=uo(i),Le=uo(M),ke=Se||Le;if(ja(te)&&(!ue||ja(ue)))return Se&&Le?[i,M]:me||ke?ke&&me?[Se?i:M*W,Le?M:i/W]:[Se?i:s.width,Le?M:s.height]:[s.width,s.height];if(me){var ft=0,At=0;return Bt(te)?ft=wt(te,s.width):Bt(ue)&&(At=wt(ue,s.height)),ja(te)?ft=At*W:(!ue||ja(ue))&&(At=ft/W),[ft,At]}var Dt=null,Tt=null;if(Bt(te)?Dt=wt(te,s.width):ue&&Bt(ue)&&(Tt=wt(ue,s.height)),null!==Dt&&(!ue||ja(ue))&&(Tt=Se&&Le?Dt/i*M:s.height),null!==Tt&&ja(te)&&(Dt=Se&&Le?Tt/M*i:s.width),null!==Dt&&null!==Tt)return[Dt,Tt];throw new Error("Unable to calculate background-size for element")},za=function(o,r){var s=o[r];return typeof s>"u"?o[0]:s},fs=function(o,r,s,i,M){var W=r[0],te=r[1],ue=s[0],me=s[1];switch(o){case 2:return[new ct(Math.round(i.left),Math.round(i.top+te)),new ct(Math.round(i.left+i.width),Math.round(i.top+te)),new ct(Math.round(i.left+i.width),Math.round(me+i.top+te)),new ct(Math.round(i.left),Math.round(me+i.top+te))];case 3:return[new ct(Math.round(i.left+W),Math.round(i.top)),new ct(Math.round(i.left+W+ue),Math.round(i.top)),new ct(Math.round(i.left+W+ue),Math.round(i.height+i.top)),new ct(Math.round(i.left+W),Math.round(i.height+i.top))];case 1:return[new ct(Math.round(i.left+W),Math.round(i.top+te)),new ct(Math.round(i.left+W+ue),Math.round(i.top+te)),new ct(Math.round(i.left+W+ue),Math.round(i.top+te+me)),new ct(Math.round(i.left+W),Math.round(i.top+te+me))];default:return[new ct(Math.round(M.left),Math.round(M.top)),new ct(Math.round(M.left+M.width),Math.round(M.top)),new ct(Math.round(M.left+M.width),Math.round(M.height+M.top)),new ct(Math.round(M.left),Math.round(M.height+M.top))]}},_s="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",hs="Hidden Text",fc=function(){function o(r){this._data={},this._document=r}return o.prototype.parseMetrics=function(r,s){var i=this._document.createElement("div"),M=this._document.createElement("img"),W=this._document.createElement("span"),te=this._document.body;i.style.visibility="hidden",i.style.fontFamily=r,i.style.fontSize=s,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",te.appendChild(i),M.src=_s,M.width=1,M.height=1,M.style.margin="0",M.style.padding="0",M.style.verticalAlign="baseline",W.style.fontFamily=r,W.style.fontSize=s,W.style.margin="0",W.style.padding="0",W.appendChild(this._document.createTextNode(hs)),i.appendChild(W),i.appendChild(M);var ue=M.offsetTop-W.offsetTop+2;i.removeChild(W),i.appendChild(this._document.createTextNode(hs)),i.style.lineHeight="normal",M.style.verticalAlign="super";var me=M.offsetTop-i.offsetTop+2;return te.removeChild(i),{baseline:ue,middle:me}},o.prototype.getMetrics=function(r,s){var i=r+" "+s;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(r,s)),this._data[i]},o}(),bs=function(){function o(r,s){this.context=r,this.options=s}return o}(),_c=1e4,hc=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M._activeEffects=[],M.canvas=i.canvas?i.canvas:document.createElement("canvas"),M.ctx=M.canvas.getContext("2d"),i.canvas||(M.canvas.width=Math.floor(i.width*i.scale),M.canvas.height=Math.floor(i.height*i.scale),M.canvas.style.width=i.width+"px",M.canvas.style.height=i.height+"px"),M.fontMetrics=new fc(document),M.ctx.scale(M.options.scale,M.options.scale),M.ctx.translate(-i.x,-i.y),M.ctx.textBaseline="bottom",M._activeEffects=[],M.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),M}return n(r,o),r.prototype.applyEffects=function(s){for(var i=this;this._activeEffects.length;)this.popEffect();s.forEach(function(M){return i.applyEffect(M)})},r.prototype.applyEffect=function(s){this.ctx.save(),ds(s)&&(this.ctx.globalAlpha=s.opacity),mc(s)&&(this.ctx.translate(s.offsetX,s.offsetY),this.ctx.transform(s.matrix[0],s.matrix[1],s.matrix[2],s.matrix[3],s.matrix[4],s.matrix[5]),this.ctx.translate(-s.offsetX,-s.offsetY)),ss(s)&&(this.path(s.path),this.ctx.clip()),this._activeEffects.push(s)},r.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},r.prototype.renderStack=function(s){return t(this,void 0,void 0,function(){return c(this,function(M){switch(M.label){case 0:return s.element.container.styles.isVisible()?[4,this.renderStackContent(s)]:[3,2];case 1:M.sent(),M.label=2;case 2:return[2]}})})},r.prototype.renderNode=function(s){return t(this,void 0,void 0,function(){return c(this,function(i){switch(i.label){case 0:return kt(s.container.flags,16),s.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(s)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(s)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},r.prototype.renderTextWithLetterSpacing=function(s,i,M){var W=this;0===i?this.ctx.fillText(s.text,s.bounds.left,s.bounds.top+M):Rl(s.text).reduce(function(ue,me){return W.ctx.fillText(me,ue,s.bounds.top+M),ue+W.ctx.measureText(me).width},s.bounds.left)},r.prototype.createFontStyle=function(s){var i=s.fontVariant.filter(function(te){return"normal"===te||"small-caps"===te}).join(""),M=Cc(s.fontFamily).join(", "),W=ia(s.fontSize)?""+s.fontSize.number+s.fontSize.unit:s.fontSize.number+"px";return[[s.fontStyle,i,s.fontWeight,W,M].join(" "),M,W]},r.prototype.renderTextNode=function(s,i){return t(this,void 0,void 0,function(){var M,W,te,ue,me,De,Se,Le,ke=this;return c(this,function(mt){return M=this.createFontStyle(i),W=M[0],te=M[1],ue=M[2],this.ctx.font=W,this.ctx.direction=1===i.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",me=this.fontMetrics.getMetrics(te,ue),De=me.baseline,Se=me.middle,Le=i.paintOrder,s.textBounds.forEach(function(et){Le.forEach(function(dt){switch(dt){case 0:ke.ctx.fillStyle=Qt(i.color),ke.renderTextWithLetterSpacing(et,i.letterSpacing,De);var Ct=i.textShadow;Ct.length&&et.text.trim().length&&(Ct.slice(0).reverse().forEach(function(ft){ke.ctx.shadowColor=Qt(ft.color),ke.ctx.shadowOffsetX=ft.offsetX.number*ke.options.scale,ke.ctx.shadowOffsetY=ft.offsetY.number*ke.options.scale,ke.ctx.shadowBlur=ft.blur.number,ke.renderTextWithLetterSpacing(et,i.letterSpacing,De)}),ke.ctx.shadowColor="",ke.ctx.shadowOffsetX=0,ke.ctx.shadowOffsetY=0,ke.ctx.shadowBlur=0),i.textDecorationLine.length&&(ke.ctx.fillStyle=Qt(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(ft){switch(ft){case 1:ke.ctx.fillRect(et.bounds.left,Math.round(et.bounds.top+De),et.bounds.width,1);break;case 2:ke.ctx.fillRect(et.bounds.left,Math.round(et.bounds.top),et.bounds.width,1);break;case 3:ke.ctx.fillRect(et.bounds.left,Math.ceil(et.bounds.top+Se),et.bounds.width,1)}}));break;case 1:i.webkitTextStrokeWidth&&et.text.trim().length&&(ke.ctx.strokeStyle=Qt(i.webkitTextStrokeColor),ke.ctx.lineWidth=i.webkitTextStrokeWidth,ke.ctx.lineJoin=window.chrome?"miter":"round",ke.ctx.strokeText(et.text,et.bounds.left,et.bounds.top+De)),ke.ctx.strokeStyle="",ke.ctx.lineWidth=0,ke.ctx.lineJoin="miter"}})}),[2]})})},r.prototype.renderReplacedElement=function(s,i,M){if(M&&s.intrinsicWidth>0&&s.intrinsicHeight>0){var W=mo(s),te=so(i);this.path(te),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(M,0,0,s.intrinsicWidth,s.intrinsicHeight,W.left,W.top,W.width,W.height),this.ctx.restore()}},r.prototype.renderNodeContent=function(s){return t(this,void 0,void 0,function(){var i,M,W,te,ue,me,Se,Le,ke,mt,et,dt,Ct,ft,At,Dt,Tt,yt;return c(this,function(st){switch(st.label){case 0:this.applyEffects(s.getEffects(4)),i=s.container,M=s.curves,W=i.styles,te=0,ue=i.textNodes,st.label=1;case 1:return te<ue.length?(me=ue[te],[4,this.renderTextNode(me,W)]):[3,4];case 2:st.sent(),st.label=3;case 3:return te++,[3,1];case 4:if(!(i instanceof Fd))return[3,8];st.label=5;case 5:return st.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return At=st.sent(),this.renderReplacedElement(i,M,At),[3,8];case 7:return st.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof Na&&this.renderReplacedElement(i,M,i.canvas),!(i instanceof Wl))return[3,12];st.label=9;case 9:return st.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return At=st.sent(),this.renderReplacedElement(i,M,At),[3,12];case 11:return st.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof Vl&&i.tree?[4,new r(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}).render(i.tree)]:[3,14];case 13:Se=st.sent(),i.width&&i.height&&this.ctx.drawImage(Se,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),st.label=14;case 14:if(i instanceof mi&&(Le=Math.min(i.bounds.width,i.bounds.height),i.type===gn?i.checked&&(this.ctx.save(),this.path([new ct(i.bounds.left+.39363*Le,i.bounds.top+.79*Le),new ct(i.bounds.left+.16*Le,i.bounds.top+.5549*Le),new ct(i.bounds.left+.27347*Le,i.bounds.top+.44071*Le),new ct(i.bounds.left+.39694*Le,i.bounds.top+.5649*Le),new ct(i.bounds.left+.72983*Le,i.bounds.top+.23*Le),new ct(i.bounds.left+.84*Le,i.bounds.top+.34085*Le),new ct(i.bounds.left+.39363*Le,i.bounds.top+.79*Le)]),this.ctx.fillStyle=Qt(Kl),this.ctx.fill(),this.ctx.restore()):i.type===pi&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+Le/2,i.bounds.top+Le/2,Le/4,0,2*Math.PI,!0),this.ctx.fillStyle=Qt(Kl),this.ctx.fill(),this.ctx.restore())),bc(i)&&i.value.length){switch(ke=this.createFontStyle(W),Tt=ke[0],mt=ke[1],et=this.fontMetrics.getMetrics(Tt,mt).baseline,this.ctx.font=Tt,this.ctx.fillStyle=Qt(W.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=yc(i.styles.textAlign),yt=mo(i),dt=0,i.styles.textAlign){case 1:dt+=yt.width/2;break;case 2:dt+=yt.width}Ct=yt.add(dt,0,0,-yt.height/2+1),this.ctx.save(),this.path([new ct(yt.left,yt.top),new ct(yt.left+yt.width,yt.top),new ct(yt.left+yt.width,yt.top+yt.height),new ct(yt.left,yt.top+yt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jr(i.value,Ct),W.letterSpacing,et),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!kt(i.styles.display,2048))return[3,20];if(null===i.styles.listStyleImage)return[3,19];if(0!==(ft=i.styles.listStyleImage).type)return[3,18];At=void 0,Dt=ft.url,st.label=15;case 15:return st.trys.push([15,17,,18]),[4,this.context.cache.match(Dt)];case 16:return At=st.sent(),this.ctx.drawImage(At,i.bounds.left-(At.width+10),i.bounds.top),[3,18];case 17:return st.sent(),this.context.logger.error("Error loading list-style-image "+Dt),[3,18];case 18:return[3,20];case 19:s.listValue&&-1!==i.styles.listStyleType&&(Tt=this.createFontStyle(W)[0],this.ctx.font=Tt,this.ctx.fillStyle=Qt(W.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",yt=new V(i.bounds.left,i.bounds.top+wt(i.styles.paddingTop,i.bounds.width),i.bounds.width,Aa(W.lineHeight,W.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jr(s.listValue,yt),W.letterSpacing,Aa(W.lineHeight,W.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),st.label=20;case 20:return[2]}})})},r.prototype.renderStackContent=function(s){return t(this,void 0,void 0,function(){var i,M,W,te,ue,me,De,Se,Le,ke,mt,et,dt,Ct,ft;return c(this,function(At){switch(At.label){case 0:return kt(s.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(s.element)];case 1:At.sent(),i=0,M=s.negativeZIndex,At.label=2;case 2:return i<M.length?(ft=M[i],[4,this.renderStack(ft)]):[3,5];case 3:At.sent(),At.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(s.element)];case 6:At.sent(),W=0,te=s.nonInlineLevel,At.label=7;case 7:return W<te.length?(ft=te[W],[4,this.renderNode(ft)]):[3,10];case 8:At.sent(),At.label=9;case 9:return W++,[3,7];case 10:ue=0,me=s.nonPositionedFloats,At.label=11;case 11:return ue<me.length?(ft=me[ue],[4,this.renderStack(ft)]):[3,14];case 12:At.sent(),At.label=13;case 13:return ue++,[3,11];case 14:De=0,Se=s.nonPositionedInlineLevel,At.label=15;case 15:return De<Se.length?(ft=Se[De],[4,this.renderStack(ft)]):[3,18];case 16:At.sent(),At.label=17;case 17:return De++,[3,15];case 18:Le=0,ke=s.inlineLevel,At.label=19;case 19:return Le<ke.length?(ft=ke[Le],[4,this.renderNode(ft)]):[3,22];case 20:At.sent(),At.label=21;case 21:return Le++,[3,19];case 22:mt=0,et=s.zeroOrAutoZIndexOrTransformedOrOpacity,At.label=23;case 23:return mt<et.length?(ft=et[mt],[4,this.renderStack(ft)]):[3,26];case 24:At.sent(),At.label=25;case 25:return mt++,[3,23];case 26:dt=0,Ct=s.positiveZIndex,At.label=27;case 27:return dt<Ct.length?(ft=Ct[dt],[4,this.renderStack(ft)]):[3,30];case 28:At.sent(),At.label=29;case 29:return dt++,[3,27];case 30:return[2]}})})},r.prototype.mask=function(s){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(s.slice(0).reverse()),this.ctx.closePath()},r.prototype.path=function(s){this.ctx.beginPath(),this.formatPath(s),this.ctx.closePath()},r.prototype.formatPath=function(s){var i=this;s.forEach(function(M,W){var te=fn(M)?M.start:M;0===W?i.ctx.moveTo(te.x,te.y):i.ctx.lineTo(te.x,te.y),fn(M)&&i.ctx.bezierCurveTo(M.startControl.x,M.startControl.y,M.endControl.x,M.endControl.y,M.end.x,M.end.y)})},r.prototype.renderRepeat=function(s,i,M,W){this.path(s),this.ctx.fillStyle=i,this.ctx.translate(M,W),this.ctx.fill(),this.ctx.translate(-M,-W)},r.prototype.resizeImage=function(s,i,M){var W;if(s.width===i&&s.height===M)return s;var ue=(null!==(W=this.canvas.ownerDocument)&&void 0!==W?W:document).createElement("canvas");return ue.width=Math.max(1,i),ue.height=Math.max(1,M),ue.getContext("2d").drawImage(s,0,0,s.width,s.height,0,0,i,M),ue},r.prototype.renderBackgroundImage=function(s){return t(this,void 0,void 0,function(){var i,M,W,te,ue,me;return c(this,function(De){switch(De.label){case 0:i=s.styles.backgroundImage.length-1,M=function(Se){var Le,ke,mt,et,dt,Ct,ft,At,Dt,Tt,yt,st,fe,l,d,x,ae,Ie,Ve,Je,ht,xt,Ft,ta,na,$a,Ar,gr,Ca,fr,xa;return c(this,function(Ao){switch(Ao.label){case 0:if(0!==Se.type)return[3,5];Le=void 0,ke=Se.url,Ao.label=1;case 1:return Ao.trys.push([1,3,,4]),[4,W.context.cache.match(ke)];case 2:return Le=Ao.sent(),[3,4];case 3:return Ao.sent(),W.context.logger.error("Error loading background-image "+ke),[3,4];case 4:return Le&&(mt=Mi(s,i,[Le.width,Le.height,Le.width/Le.height]),x=mt[0],xt=mt[1],Ft=mt[2],Ve=mt[3],Je=mt[4],l=W.ctx.createPattern(W.resizeImage(Le,Ve,Je),"repeat"),W.renderRepeat(x,l,xt,Ft)),[3,6];case 5:Lo(Se)?(et=Mi(s,i,[null,null,null]),x=et[0],xt=et[1],Ft=et[2],Ve=et[3],Je=et[4],dt=Io(Se.angle,Ve,Je),Ct=dt[0],ft=dt[1],At=dt[2],Dt=dt[3],Tt=dt[4],(yt=document.createElement("canvas")).width=Ve,yt.height=Je,st=yt.getContext("2d"),fe=st.createLinearGradient(ft,Dt,At,Tt),Dr(Se.stops,Ct).forEach(function(Pi){return fe.addColorStop(Pi.stop,Qt(Pi.color))}),st.fillStyle=fe,st.fillRect(0,0,Ve,Je),Ve>0&&Je>0&&(l=W.ctx.createPattern(yt,"repeat"),W.renderRepeat(x,l,xt,Ft))):Fo(Se)&&(d=Mi(s,i,[null,null,null]),x=d[0],ae=d[1],Ie=d[2],Ve=d[3],Je=d[4],ht=0===Se.position.length?[On]:Se.position,xt=wt(ht[0],Ve),Ft=wt(ht[ht.length-1],Je),ta=Oo(Se,xt,Ft,Ve,Je),na=ta[0],$a=ta[1],na>0&&$a>0&&(Ar=W.ctx.createRadialGradient(ae+xt,Ie+Ft,0,ae+xt,Ie+Ft,na),Dr(Se.stops,2*na).forEach(function(Pi){return Ar.addColorStop(Pi.stop,Qt(Pi.color))}),W.path(x),W.ctx.fillStyle=Ar,na!==$a?(gr=s.bounds.left+.5*s.bounds.width,Ca=s.bounds.top+.5*s.bounds.height,xa=1/(fr=$a/na),W.ctx.save(),W.ctx.translate(gr,Ca),W.ctx.transform(1,0,0,fr,0,0),W.ctx.translate(-gr,-Ca),W.ctx.fillRect(ae,xa*(Ie-Ca)+Ca,Ve,Je*xa),W.ctx.restore()):W.ctx.fill())),Ao.label=6;case 6:return i--,[2]}})},W=this,te=0,ue=s.styles.backgroundImage.slice(0).reverse(),De.label=1;case 1:return te<ue.length?(me=ue[te],[5,M(me)]):[3,4];case 2:De.sent(),De.label=3;case 3:return te++,[3,1];case 4:return[2]}})})},r.prototype.renderSolidBorder=function(s,i,M){return t(this,void 0,void 0,function(){return c(this,function(W){return this.path(xi(M,i)),this.ctx.fillStyle=Qt(s),this.ctx.fill(),[2]})})},r.prototype.renderDoubleBorder=function(s,i,M,W){return t(this,void 0,void 0,function(){var te,ue;return c(this,function(me){switch(me.label){case 0:return i<3?[4,this.renderSolidBorder(s,M,W)]:[3,2];case 1:return me.sent(),[2];case 2:return te=Ac(W,M),this.path(te),this.ctx.fillStyle=Qt(s),this.ctx.fill(),ue=Ti(W,M),this.path(ue),this.ctx.fill(),[2]}})})},r.prototype.renderNodeBackgroundAndBorders=function(s){return t(this,void 0,void 0,function(){var i,M,W,te,ue,me,De,Se,Le=this;return c(this,function(ke){switch(ke.label){case 0:return this.applyEffects(s.getEffects(2)),i=s.container.styles,M=!$n(i.backgroundColor)||i.backgroundImage.length,W=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],te=vc(za(i.backgroundClip,0),s.curves),M||i.boxShadow.length?(this.ctx.save(),this.path(te),this.ctx.clip(),$n(i.backgroundColor)||(this.ctx.fillStyle=Qt(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(s.container)]):[3,2];case 1:ke.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(mt){Le.ctx.save();var et=lo(s.curves),dt=mt.inset?0:_c,Ct=uc(et,-dt+(mt.inset?1:-1)*mt.spread.number,(mt.inset?1:-1)*mt.spread.number,mt.spread.number*(mt.inset?-2:2),mt.spread.number*(mt.inset?-2:2));mt.inset?(Le.path(et),Le.ctx.clip(),Le.mask(Ct)):(Le.mask(et),Le.ctx.clip(),Le.path(Ct)),Le.ctx.shadowOffsetX=mt.offsetX.number+dt,Le.ctx.shadowOffsetY=mt.offsetY.number,Le.ctx.shadowColor=Qt(mt.color),Le.ctx.shadowBlur=mt.blur.number,Le.ctx.fillStyle=mt.inset?Qt(mt.color):"rgba(0,0,0,1)",Le.ctx.fill(),Le.ctx.restore()}),ke.label=2;case 2:ue=0,me=0,De=W,ke.label=3;case 3:return me<De.length?0!==(Se=De[me]).style&&!$n(Se.color)&&Se.width>0?2!==Se.style?[3,5]:[4,this.renderDashedDottedBorder(Se.color,Se.width,ue,s.curves,2)]:[3,11]:[3,13];case 4:return ke.sent(),[3,11];case 5:return 3!==Se.style?[3,7]:[4,this.renderDashedDottedBorder(Se.color,Se.width,ue,s.curves,3)];case 6:return ke.sent(),[3,11];case 7:return 4!==Se.style?[3,9]:[4,this.renderDoubleBorder(Se.color,Se.width,ue,s.curves)];case 8:return ke.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Se.color,ue,s.curves)];case 10:ke.sent(),ke.label=11;case 11:ue++,ke.label=12;case 12:return me++,[3,3];case 13:return[2]}})})},r.prototype.renderDashedDottedBorder=function(s,i,M,W,te){return t(this,void 0,void 0,function(){var ue,me,De,Se,Le,ke,mt,et,dt,Ct,ft,At,Dt,Tt,yt,st;return c(this,function(fe){return this.ctx.save(),ue=gc(W,M),me=xi(W,M),2===te&&(this.path(me),this.ctx.clip()),fn(me[0])?(De=me[0].start.x,Se=me[0].start.y):(De=me[0].x,Se=me[0].y),fn(me[1])?(Le=me[1].end.x,ke=me[1].end.y):(Le=me[1].x,ke=me[1].y),mt=0===M||2===M?Math.abs(De-Le):Math.abs(Se-ke),this.ctx.beginPath(),3===te?this.formatPath(ue):this.formatPath(me.slice(0,2)),et=i<3?3*i:2*i,dt=i<3?2*i:i,3===te&&(et=i,dt=i),Ct=!0,mt<=2*et?Ct=!1:mt<=2*et+dt?(et*=ft=mt/(2*et+dt),dt*=ft):(At=Math.floor((mt+dt)/(et+dt)),Dt=(mt-At*et)/(At-1),dt=(Tt=(mt-(At+1)*et)/At)<=0||Math.abs(dt-Dt)<Math.abs(dt-Tt)?Dt:Tt),Ct&&(3===te?this.ctx.setLineDash([0,et+dt]):this.ctx.setLineDash([et,dt])),3===te?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=2*i+1.1,this.ctx.strokeStyle=Qt(s),this.ctx.stroke(),this.ctx.setLineDash([]),2===te&&(fn(me[0])&&(yt=me[3],st=me[0],this.ctx.beginPath(),this.formatPath([new ct(yt.end.x,yt.end.y),new ct(st.start.x,st.start.y)]),this.ctx.stroke()),fn(me[1])&&(yt=me[1],st=me[2],this.ctx.beginPath(),this.formatPath([new ct(yt.end.x,yt.end.y),new ct(st.start.x,st.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},r.prototype.render=function(s){return t(this,void 0,void 0,function(){var i;return c(this,function(M){switch(M.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Qt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=Ci(s),[4,this.renderStack(i)];case 1:return M.sent(),this.applyEffects([]),[2,this.canvas]}})})},r}(bs),bc=function(o){return o instanceof kl||o instanceof Nl||o instanceof mi&&o.type!==pi&&o.type!==gn},vc=function(o,r){switch(o){case 0:return lo(r);case 2:return dc(r);default:return so(r)}},yc=function(o){switch(o){case 1:return"center";case 2:return"right";default:return"left"}},Ec=["-apple-system","system-ui"],Cc=function(o){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?o.filter(function(r){return-1===Ec.indexOf(r)}):o},xc=function(o){function r(s,i){var M=o.call(this,s,i)||this;return M.canvas=i.canvas?i.canvas:document.createElement("canvas"),M.ctx=M.canvas.getContext("2d"),M.options=i,M.canvas.width=Math.floor(i.width*i.scale),M.canvas.height=Math.floor(i.height*i.scale),M.canvas.style.width=i.width+"px",M.canvas.style.height=i.height+"px",M.ctx.scale(M.options.scale,M.options.scale),M.ctx.translate(-i.x,-i.y),M.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),M}return n(r,o),r.prototype.render=function(s){return t(this,void 0,void 0,function(){var i,M;return c(this,function(W){switch(W.label){case 0:return i=An(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,s),[4,Tc(i)];case 1:return M=W.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Qt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(M,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},r}(bs),Tc=function(o){return new Promise(function(r,s){var i=new Image;i.onload=function(){r(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(o))})},Mc=function(){function o(r){var s=r.id,i=r.enabled;this.id=s,this.enabled=i,this.start=Date.now()}return o.prototype.debug=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,h([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},o.prototype.getTime=function(){return Date.now()-this.start},o.prototype.info=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,h([this.id,this.getTime()+"ms"],r))},o.prototype.warn=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,h([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},o.prototype.error=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,h([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},o.instances={},o}(),Dc=function(){function o(r,s){var i;this.windowBounds=s,this.instanceName="#"+o.instanceCount++,this.logger=new Mc({id:this.instanceName,enabled:r.logging}),this.cache=null!==(i=r.cache)&&void 0!==i?i:new nc(this,r)}return o.instanceCount=1,o}(),Pc=function(o,r){return void 0===r&&(r={}),Ic(o,r)};typeof window<"u"&&is.setContext(window);var Ic=function(o,r){return t(void 0,void 0,void 0,function(){var s,i,M,W,te,ue,me,De,Se,Le,ke,mt,et,dt,Ct,ft,At,Dt,Tt,yt,st,l,d,x,ae,Ie,Ve,Je,ht,xt,Ft,ta,na,$a,Ar,gr,Ca,fr;return c(this,function(xa){switch(xa.label){case 0:if(!o||"object"!=typeof o)return[2,Promise.reject("Invalid element provided as first argument")];if(!(s=o.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=s.defaultView))throw new Error("Document is not attached to a Window");return M={allowTaint:null!==(l=r.allowTaint)&&void 0!==l&&l,imageTimeout:null!==(d=r.imageTimeout)&&void 0!==d?d:15e3,proxy:r.proxy,useCORS:null!==(x=r.useCORS)&&void 0!==x&&x},W=e({logging:null===(ae=r.logging)||void 0===ae||ae,cache:r.cache},M),te={windowWidth:null!==(Ie=r.windowWidth)&&void 0!==Ie?Ie:i.innerWidth,windowHeight:null!==(Ve=r.windowHeight)&&void 0!==Ve?Ve:i.innerHeight,scrollX:null!==(Je=r.scrollX)&&void 0!==Je?Je:i.pageXOffset,scrollY:null!==(ht=r.scrollY)&&void 0!==ht?ht:i.pageYOffset},ue=new V(te.scrollX,te.scrollY,te.windowWidth,te.windowHeight),me=new Dc(W,ue),De=null!==(xt=r.foreignObjectRendering)&&void 0!==xt&&xt,Se={allowTaint:null!==(Ft=r.allowTaint)&&void 0!==Ft&&Ft,onclone:r.onclone,ignoreElements:r.ignoreElements,inlineImages:De,copyStyles:De},me.logger.debug("Starting document clone with size "+ue.width+"x"+ue.height+" scrolled to "+-ue.left+","+-ue.top),Le=new rs(me,o,Se),(ke=Le.clonedReferenceElement)?[4,Le.toIFrame(s,ue)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return mt=xa.sent(),et=ui(ke)||kd(ke)?G(ke.ownerDocument):S(me,ke),dt=et.width,Ct=et.height,ft=et.left,At=et.top,Dt=Oc(me,ke,r.backgroundColor),Tt={canvas:r.canvas,backgroundColor:Dt,scale:null!==(na=null!==(ta=r.scale)&&void 0!==ta?ta:i.devicePixelRatio)&&void 0!==na?na:1,x:(null!==($a=r.x)&&void 0!==$a?$a:0)+ft,y:(null!==(Ar=r.y)&&void 0!==Ar?Ar:0)+At,width:null!==(gr=r.width)&&void 0!==gr?gr:Math.ceil(dt),height:null!==(Ca=r.height)&&void 0!==Ca?Ca:Math.ceil(Ct)},De?(me.logger.debug("Document cloned, using foreign object rendering"),[4,new xc(me,Tt).render(ke)]):[3,3];case 2:return yt=xa.sent(),[3,5];case 3:return me.logger.debug("Document cloned, element located at "+ft+","+At+" with size "+dt+"x"+Ct+" using computed rendering"),me.logger.debug("Starting DOM parsing"),st=Ql(me,ke),Dt===st.styles.backgroundColor&&(st.styles.backgroundColor=Sn.TRANSPARENT),me.logger.debug("Starting renderer for element at "+Tt.x+","+Tt.y+" with size "+Tt.width+"x"+Tt.height),[4,new hc(me,Tt).render(st)];case 4:yt=xa.sent(),xa.label=5;case 5:return(!(null!==(fr=r.removeContainer)&&void 0!==fr)||fr)&&(rs.destroy(mt)||me.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),me.logger.debug("Finished rendering"),[2,yt]}})})},Oc=function(o,r,s){var i=r.ownerDocument,M=i.documentElement?Ia(o,getComputedStyle(i.documentElement).backgroundColor):Sn.TRANSPARENT,W=i.body?Ia(o,getComputedStyle(i.body).backgroundColor):Sn.TRANSPARENT,te="string"==typeof s?Ia(o,s):null===s?Sn.TRANSPARENT:4294967295;return r===i.documentElement?$n(M)?$n(W)?te:W:M:te};return Pc}()}}]);